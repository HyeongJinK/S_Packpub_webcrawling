<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch05lvl1sec39"></a>Working with cameras</h2></div></div><hr /></div><p>Cameras render scenes so that the <span>user</span><a id="id288345145" class="indexterm"></a> can view them. Think about the hidden complexity in that statement. Our games are 3D, but people playing our games view them on 2D displays such as a televisions, computer monitors, or mobile devices. Fortunately for us, Unity makes implementing cameras easy work.</p><p>Cameras are GameObjects and can be edited using transform tools in the <strong class="userinput"><code>Scene</code></strong> view as well as in the <strong class="userinput"><code>Inspector</code></strong> panel. Every scene must have at least one camera. In fact, when a new scene is created, Unity creates a camera named <strong class="userinput"><code>Main Camera</code></strong>. As you will see later in this chapter, a scene can have multiple cameras.</p><p>In the <strong class="userinput"><code>Scene</code></strong> view, cameras are indicated with a white camera silhouette, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781788830102/graphics/0a4973f3-a0a7-4a01-92bf-1202961023c6.png" /></div><p>When we click our <strong class="userinput"><code>Main Camera</code></strong> in the <strong class="userinput"><code>Hierarchy</code></strong> panel, we are provided with a <strong class="userinput"><code>Camera Preview</code></strong> in the <strong class="userinput"><code>Scene</code></strong> view. This gives us a preview of what the camera sees as if it were in game mode. We will change this in <a class="link" href="#" linkend="ch07">Chapter 7</a>, <span class="emphasis"><em>Implementing Our Player Character</em></span>. We also have access to several parameters via the <strong class="userinput"><code>Inspector</code></strong> panel. The <strong class="userinput"><code>Camera</code></strong> component in the <strong class="userinput"><code>Inspector</code></strong> panel is shown here:</p><div class="mediaobject"><img src="/graphics/9781788830102/graphics/73f3d8cd-e0f5-4165-a25d-378cf4a2b528.png" /></div><p>Let's look at each of these parameters with relation to our <span class="emphasis"><em>Cucumber Beetle</em></span> game:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">The <strong class="userinput"><code>Clear Flags</code></strong> parameter lets you switch between <strong class="userinput"><code>Skybox</code></strong>, <strong class="userinput"><code>Solid Color</code></strong>, <strong class="userinput"><code>Depth Only</code></strong>, and <strong class="userinput"><code>Don't Clear</code></strong>. The selection here informs Unity which parts of the screen to clear. We will leave this setting as <strong class="userinput"><code>Skybox</code></strong>. You will learn more about Skyboxes later in this chapter.</li><li style="list-style-type: disc">The <strong class="userinput"><code>Background</code></strong> parameter is used to set the default background fill (color) of your game world. This will only be visible after all game objects have been rendered and if there is no Skybox. Our <span class="emphasis"><em>Cucumber Beetle</em></span> game will have a Skybox, so this parameter can be left with the default color.</li><li style="list-style-type: disc">The <strong class="userinput"><code>Culling Mask</code></strong> parameter allows you to select and deselect the layers you want the camera to render. The default selection options are <strong class="userinput"><code>Nothing</code></strong>, <strong class="userinput"><code>Everyt</code></strong><strong class="userinput"><code>hing</code></strong>, <strong class="userinput"><code>Default</code></strong>, <strong class="userinput"><code>TransparentFX</code></strong>, <strong class="userinput"><code>Ignore Raycast</code></strong>, <strong class="userinput"><code>Water</code></strong>, and <strong class="userinput"><code>UI</code></strong>. For our game, we will select <strong class="userinput"><code>Everything</code></strong>. If you are not sure which layer a game object is associated with, select it and look at the <strong class="userinput"><code>Layer</code></strong> parameter in the top section of the Inspector panel. There you will see the assigned layer. You can easily change the layer as well as create your own unique layers. This gives you finite rendering control.
</li><li style="list-style-type: disc">The <strong class="userinput"><code>Projection</code></strong> parameter allows you to select which <strong class="userinput"><code>projection</code></strong>, <strong class="userinput"><code>perspective</code></strong> or <strong class="userinput"><code>orthographic</code></strong>, you want for your camera. We will cover both of those projections later in this chapter. When <span class="emphasis"><em>perspective</em></span> projection is selected, we are given access to the <strong class="userinput"><code>Field of View</code></strong>parameter. This is for the width of the camera's angle of view. The value range is 1-179°. You can use the slider to change the values and see the results in the <strong class="userinput"><code>Camera Preview</code></strong> window. When <strong class="userinput"><code>orthographic</code></strong> projection is selected, an additional <strong class="userinput"><code>Size</code></strong> parameter is available. This refers to the viewport size. For our game, we will select perspective projection with the <strong class="userinput"><code>Field of View</code></strong> set to <code class="literal">60</code>. </li><li style="list-style-type: disc">The <strong class="userinput"><code>Clipping Planes</code></strong> parameters include <strong class="userinput"><code>Near</code></strong> and <strong class="userinput"><code>Far</code></strong>. These settings set the closest and furthest points, relative to the camera, that rendering will happen at. For now, we will leave the default settings of <code class="literal">0.3</code> and <code class="literal">1000</code> for the <strong class="userinput"><code>Near</code></strong> and <strong class="userinput"><code>Far</code></strong> parameters, respectively.</li><li style="list-style-type: disc">The <strong class="userinput"><code>Viewport Rect</code></strong> parameter has four components – <strong class="userinput"><code>X</code></strong>, <strong class="userinput"><code>Y</code></strong>, <strong class="userinput"><code>W</code></strong>, and <strong class="userinput"><code>H</code></strong> – that determine where the camera will be drawn on the screen. As you would expect, the <strong class="userinput"><code>X</code></strong> and <strong class="userinput"><code>Y</code></strong> components refer to horizontal and vertical positions, and the <strong class="userinput"><code>W</code></strong> and <strong class="userinput"><code>H</code></strong> components refer to width and height. You can experiment with these values and see the changes in the <strong class="userinput"><code>Camera Preview</code></strong>. For our game, we will leave the default settings.</li><li style="list-style-type: disc">The <strong class="userinput"><code>Depth</code></strong> parameter is used when we implement more than one camera. We can set a value here to determine the camera's priority in relation to others. Larger values indicate a higher priority. The default setting is sufficient for our game.</li><li style="list-style-type: disc">The <strong class="userinput"><code>Rendering Path</code></strong> parameter defines what rendering methods our camera will use. The options are <strong class="userinput"><code>Use Graphics Settings</code></strong>, <strong class="userinput"><code>Forward</code></strong>, <strong class="userinput"><code>Deferred</code></strong>, <strong class="userinput"><code>Legacy Vertex Lit</code></strong>, and <strong class="userinput"><code>Legacy Deferred (light prepass)</code></strong>. We will use the <strong class="userinput"><code>Use Graphics Settings</code></strong> option for our game, which also uses the default setting.</li><li style="list-style-type: disc">The <strong class="userinput"><code>Target Texture</code></strong> parameter is not something we will use in our game. When a render texture is set, the camera is not able to render to the screen.</li><li style="list-style-type: disc">The <strong class="userinput"><code>Occlusion Culling</code></strong> parameter is a powerful setting. If enabled, Unity will not render objects that are occluded, or not seen by the camera. An example would be objects inside a building. If the camera can currently only see the external walls of the building, then none of the objects inside those walls can be seen. So, it makes sense to not render those. We only want to render what is absolutely necessary to help ensure our game has smooth gameplay and no lag. We will leave this as enabled for our game.</li><li style="list-style-type: disc">The <strong class="userinput"><code>Allow HDR</code></strong><span>parameter</span><a id="id288614688" class="indexterm"></a> is a checkbox that toggles a camera's <span class="strong"><strong>High Dynamic Range</strong></span> (<span class="strong"><strong>HDR</strong></span>) rendering. We will leave the default setting of enabled for our game.
</li><li style="list-style-type: disc">The <strong class="userinput"><code>Allow MSAA</code></strong> parameter is a toggle that determines whether our <span>camera</span><a id="id288614708" class="indexterm"></a> will use a <span class="strong"><strong>Multisample Anti-Aliasing</strong></span> (<span class="strong"><strong>MSAA</strong></span>) render target. MSAA is a computer graphics optimization technique and we want this enabled for our game.</li></ul></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec49"></a>Understanding camera projections</h3></div></div></div><p>There are two camera projections used in Unity: <strong class="userinput"><code>perspective</code></strong> and <strong class="userinput"><code>orthographic</code></strong>. With perspective projection, the camera renders a <span>scene</span><a id="id288614736" class="indexterm"></a> based on the camera angle, as itexists in the scene. Using this projection, the further away an object is from the camera, the smaller it will be displayed. This mimics how we see things in the real world. Because of the desire to produce realistic games, or games that approximate the realworld, perspective projection is the most commonly used in modern games. It is also what we will use in our <span class="emphasis"><em>Cucumber Beetle</em></span> game.</p><p>The other <span>projection</span><a id="id288614750" class="indexterm"></a> is orthographic. An orthographic perspective camera renders a scene uniformly without any perspective. This means that objects further away will not be displayed smaller than objects closer to the camera. This type of camera is commonly used for top-down games and is the default camera projection used in 2D and Unity's UI system.</p><p>We will use perspective projection for our <span class="emphasis"><em>Cucumber Beetle</em></span> game.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec50"></a>Orientating your frustum</h3></div></div></div><p>When a camera is <span>selected</span><a id="id288614771" class="indexterm"></a> in the <strong class="userinput"><code>Hierarchy</code></strong> view, its frustum is visible in the <strong class="userinput"><code>Scene</code></strong> view. A frustum is a geometric shape that looks like a pyramid that has had its top cut off, as illustrated here:</p><div class="mediaobject"><img src="/graphics/9781788830102/graphics/c4b6ac96-40e2-411d-a575-580d6aa3bc6b.png" /></div><p>The near, or top, plane is parallel to its base. The base is also referred to as the far plane. The frustum's shape represents the viable region of your game. Only objects in that region are rendered. Using the camera object in <strong class="userinput"><code>Scene</code></strong> view, we can change our camera's frustum shape. </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec51"></a>Creating a Skybox </h3></div></div></div><p>When we create <span>game</span><a id="id288614808" class="indexterm"></a> worlds, we typically create the ground, buildings, characters, trees, and other game objects. What about the sky? By default, there will be a textured blue sky in your Unity game projects. That sky is sufficient for testing but does not add to an immersive gaming experience. We want a bit more realism, such as clouds, and that can be accomplished by creating a Skybox. </p><p>A Skybox is a six-sided cube visible to the player beyond all other objects. So, when a player looks beyond your objects, what they see is your Skybox. As we said, Skyboxes are six-sided cubes, which means you will need six separate images that can essentially be clamped to each other to form the cube. </p><p>The following screenshot shows the <span class="strong"><strong>Default Skybox</strong></span> that Unity projects start with as well as the completed <span class="strong"><strong>Custom Skybox</strong></span> you will create in this section:</p><div class="mediaobject"><img src="/graphics/9781788830102/graphics/a60f5f6b-acc9-494b-b532-af246f4232d0.png" /></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note25"></a>Note</h3><p>To follow along, you will need the six images located in the <code class="literal">Chapter5-Skybox.zip</code> file on the publisher's companion site.</p></div><p>Perform the following steps to create a Skybox:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>In the <strong class="userinput"><code>Project</code></strong> panel, create a <code class="literal">Skybox</code> subfolder in the <code class="literal">Assets</code> folder. We will use this folder to store our textures and materials for the Skybox.
</li></ol></div><p> </p><div class="orderedlist"><ol class="orderedlist arabic" start="2" type="1"><li>Drag the provided six Skybox images, or your own, into the new <code class="literal">Skybox</code> folder. </li><li>Ensure the <code class="literal">Skybox</code> folder is selected in the <code class="literal">Project</code> panel. </li><li>From the top menu, select <strong class="userinput"><code>Assets | Create | Material</code></strong>. In the <strong class="userinput"><code>Project</code></strong> panel, name the material <code class="literal">Skybox</code>.</li><li>With the <strong class="userinput"><code>Skybox</code></strong> material selected, turn your attention to the <strong class="userinput"><code>Inspector</code></strong> panel. </li><li>Select the <strong class="userinput"><code>Shader</code></strong> drop-down menu and select <strong class="userinput"><code>SkyBox</code></strong> | <strong class="userinput"><code>6 Sided</code></strong>.</li><li>Use the <strong class="userinput"><code>Select</code></strong> button for each of the six images and navigate to the images you added in step 2. Be sure to match the appropriate texture to the appropriate cube face. For example, the <code class="literal">SkyBox_Front</code> texture matches the <code class="literal">Front[+Z]</code> cube face on the <strong class="userinput"><code>Skybox Material</code></strong>.</li><li>In order to assign our new Skybox to our scene, select <strong class="userinput"><code>Window</code></strong> | <strong class="userinput"><code>Lighting</code></strong> | <strong class="userinput"><code>Settings</code></strong> from the top menu. This will bring up the <strong class="userinput"><code>Lighting</code></strong> settings dialog window.</li><li>In the <strong class="userinput"><code>Lighting</code></strong> settings dialog window, click on the small circle to the right of the <strong class="userinput"><code>Skybox Material</code></strong> input field. Then, close the selection window and the <strong class="userinput"><code>Lighting</code></strong> window. Refer to the following screenshot:</li></ol></div><div class="mediaobject"><img src="/graphics/9781788830102/graphics/fcd5766e-94f0-4cd1-8802-6bb05d74d9bb.png" /></div><p>You will now be able to see your Skybox in the <strong class="userinput"><code>Scene</code></strong> view. When you click on the <strong class="userinput"><code>Camera</code></strong> in the <strong class="userinput"><code>Hierarchy</code></strong> panel, you will also see the Skybox as it will appear from the camera's perspective.</p><p>Be sure to save your scene and your project.</p></div></div>