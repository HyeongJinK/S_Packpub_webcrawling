<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch10lvl1sec74"></a>Adding points based on cherry collection and combat hits</h2></div></div><hr /></div><p>In this section, we will <span>edit</span><a id="id288601230" class="indexterm"></a> the appropriate <span>scripts</span><a id="id288601239" class="indexterm"></a> so that the Cucumber Man can earn points, related to cherries, based on the following criteria:</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; "><colgroup><col /><col /></colgroup><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><span class="strong"><strong>In-game event</strong></span></p></td><td style="border-bottom: 0.5pt solid ; "><p><span class="strong"><strong>Points</strong></span></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Cucumber Man picks cherry</p></td><td style="border-bottom: 0.5pt solid ; "><p>+ 5</p></td></tr><tr><td style="border-right: 0.5pt solid ; "><p>Cucumber Man hits beetle with cherry</p></td><td style=""><p>+ 10</p></td></tr></tbody></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec94"></a>Creating a points manager script</h3></div></div></div><p>In this section, we will create and <span>edit</span><a id="id288614164" class="indexterm"></a> a script to manage our points and to display them on our game's HUD. Here are the steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>In the <strong class="userinput"><code>Hierarchy</code></strong> panel, select the <strong class="userinput"><code>HUD_Canvas</code></strong> | <strong class="userinput"><code>Score_Value</code></strong></li><li>In the <strong class="userinput"><code>Inspector</code></strong> panel, click the <strong class="userinput"><code>Add Component</code></strong> button</li><li>Select <strong class="userinput"><code>New Script</code></strong> and name the script <code class="literal">PointsManager</code></li><li>In the <strong class="userinput"><code>Project</code></strong> panel, click <strong class="userinput"><code>Favorites</code></strong> | <strong class="userinput"><code>All Scripts</code></strong></li><li>Drag the <strong class="userinput"><code>PointsManager</code></strong> script to the <strong class="userinput"><code>Assets</code></strong> | <code class="literal">Custom Scripts</code> folder</li><li>Double-click the <strong class="userinput"><code>PointsManager</code></strong> script to open it in an editor</li><li>Edit the script so that it matches the following code</li></ol></div><p>The first section of the code contains the namespace import statements and the <code class="literal">PointsManager</code> class declaration:</p><pre class="programlisting">using System.Collections;
using System.Collections.Generic;
using UnityEngine;
</pre><pre class="programlisting">using UnityEngine.UI;

publicclassPointsManager:MonoBehaviour{
</pre><p>The next section of the script declares two class variables; one for the current score and the other is a reference to the <code class="literal">Text</code> UI component that displays the score during game play:</p><pre class="programlisting">     public static int currentScore;
     Text score;
</pre><p>The first method in our class is the <code class="literal">Awake()</code> method. We use this method to initialize our variables:</p><pre class="programlisting">     void Awake () {
         score = GetComponent&lt;Text&gt; ();
         currentScore = 0;

     }
</pre><p>The last section of our class is the <code class="literal">Update()</code> method. Here, we have a single statement that converts the current score to a string and then updates the HUD:</p><pre class="programlisting">     void Update () {

         score.text = currentScore.ToString ();

     }
 }</pre></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec95"></a>Adding points for each cherry picked</h3></div></div></div><p>In this section, we will <span>edit</span><a id="id288614286" class="indexterm"></a> the appropriate script to add five points for each cherry picked. Here are the steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>In the <strong class="userinput"><code>Project</code></strong> panel, select the <strong class="userinput"><code>Custom Scripts | CucumberManManager</code></strong></li><li>Edit the script</li><li>Add the following class variable: public <code class="literal">PointsManager _ptsManager;</code></li><li>Add the following lines of code inside the nested if statement in the <code class="literal">Update()</code> method:</li></ol></div><pre class="programlisting">_ptsManager=GameObject.Find("Score_Value").GetComponent&lt;PointsManager&gt;();
PointsManager.currentScore=PointsManager.currentScore+5;</pre><p>The two lines of preceding code create a reference to the <code class="literal">PointsManager</code> script and, on the second line, increments the <code class="literal">currentScore</code> by 5.</p><p>The updated <code class="literal">CucumberManManager</code> script should be as follows:</p><pre class="programlisting">using System.Collections;
using System.Collections.Generic;
using UnityEngine;

publicclassCucumberManManager:MonoBehaviour{

publicstaticintcurrentCherryCount;
publicinttempCurrentCherryCount;
publicboolcollectingCherries;
publicPointsManager_ptsManager;

voidAwake(){
currentCherryCount=0;
tempCurrentCherryCount=0;
collectingCherries=false;
}

voidUpdate(){
if(collectingCherries){
if(tempCurrentCherryCount&gt;=60){
currentCherryCount=currentCherryCount+1;
tempCurrentCherryCount=0;

_ptsManager=GameObject.Find
  ("Score_Value").GetComponent&lt;PointsManager&gt;();
PointsManager.currentScore =   
    PointsManager.currentScore + 5;

}else{
tempCurrentCherryCount=tempCurrentCherryCount+1;
}
}
}

voidOnTriggerEnter(CollidertheObject){
if(theObject.gameObject.CompareTag("CherryTree")){

collectingCherries=true;
currentCherryCount=currentCherryCount+1;
}
}

voidOnTriggerExit(CollidertheObject){
if(theObject.gameObject.CompareTag("CherryTree")){
collectingCherries=false;
}
}
}</pre></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec96"></a>Adding points for hitting a beetle with a cherry</h3></div></div></div><p>Our last points-related <span>task</span><a id="id288614349" class="indexterm"></a> is to update the BeetleNPC script so that appropriate points are added when a cherry hits a cucumber beetle. Here are the steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>In the <strong class="userinput"><code>Project</code></strong> panel, select the <strong class="userinput"><code>Custom Scripts</code></strong> | <strong class="userinput"><code>BeetleNPC</code></strong></li><li>Edit the script</li><li>Add the following class variable:  <code class="literal">public PointsManager _ptsManager;</code></li><li>Add the following lines of code inside the nested else if statement in the <code class="literal">OnTriggerEnter()</code> method:</li></ol></div><pre class="programlisting">_ptsManager = GameObject.Find ("Score_Value").GetComponent&lt;PointsManager&gt; ();
PointsManager.currentScore = PointsManager.currentScore + 10; 
</pre><p>The two preceding lines of code create a reference to the <code class="literal">PointsManager</code> script and, on the second line, increment the <code class="literal">currentScore</code> by <code class="literal">10</code>.</p><p>The updated <code class="literal">BeetleNPC</code> script's <code class="literal">OnTriggerEnter()</code> method should be as follows:</p><pre class="programlisting">voidOnTriggerEnter(CollidertheObject){
if(theObject.gameObject.CompareTag("Cucumber")){

cucumberToDestroy=theObject.gameObject;
BeetlePatrol.isEating=true;
animator.Play("EatingonGround");
StartCoroutine("DestroyCucumber");
}elseif(theObject.gameObject.CompareTag("Cherry")){
_ptsManager=GameObject.Find
   ("Score_Value").GetComponent&lt;PointsManager&gt;();
PointsManager.currentScore = PointsManager.currentScore + 10; 
BeetlePatrol.isAttacking=true;
cherryHit=true;
animator.Play("Stand");
}
}</pre></div></div>