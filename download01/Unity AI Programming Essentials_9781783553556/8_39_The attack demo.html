<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch08lvl1sec38"></a>The attack demo</h2></div></div><hr /></div><p>Like our<a id="id224" class="indexterm"></a> previous demos, we will start with a basic scene with a ground and walls. The demos here will involve an enemy ship attacking a player, so add a ship to the scene, name it <code class="literal">player</code>, and add simple controls to move the ship around. Also, tint the color of the material to make the player ship stand out from the enemy ship that we'll add in a moment. Of course, the player ship isn't an AI, so it doesn't need a RAIN AIRig, but it does need to have a RAIN Entity component. With the player selected, go to <span class="strong"><strong>RAIN</strong></span> | <span class="strong"><strong>Create Entity</strong></span>. Next, it needs a visual aspect for the AI enemies to see it; from the <span class="strong"><strong>Add Aspect</strong></span> dropdown, select <span class="strong"><strong>Visual Aspect</strong></span> and rename the aspect to <code class="literal">player</code>. This provides a base for our attack demo. This is how the RAIN attack demos will look with a player ship:</p><div class="mediaobject"><img src="/graphics/9781783553556/graphics/3556OT_08_01.jpg" /></div><p>Next, we need an enemy for the attack. The enemies will also be ship models, and as we are focusing on just the AI, we won't worry about the actual game mechanics of attacking, such as having the ship fire projectiles at the player, then having the player respond to being hit, and so on. Usually, these kind of attack AI states involve playing different animations for the AI, and we will explore these more in <a class="link" href="#" linkend="ch10">Chapter 10</a>, <span class="emphasis"><em>Animation and AI</em></span>; for now, we just need a simple visualization to illustrate the attack. To visualize, we'll store a Boolean variable in RAIN's working memory flagging if the enemy is attacking and if so, start blinking.</p><p>To set this up, add a ship to the scene and add an AIRig to it by going to <span class="strong"><strong>RAIN</strong></span> | <span class="strong"><strong>Create AI</strong></span>. To add an attack flag, select the RAIN <span class="strong"><strong>Memory</strong></span> tab on the ship AI (the light bulb icon) and from <span class="strong"><strong>Add Variable</strong></span>, select <span class="strong"><strong>bool</strong></span>. Rename the variable to <code class="literal">isAttacking</code> and leave it to the default value of false. The memory with the <code class="literal">isAttacking</code> variable set should look like the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553556/graphics/3556OT_08_02.jpg" /></div><p>To use<a id="id225" class="indexterm"></a> this variable, create a new script called <code class="literal">Enemy.cs</code> and add it to the enemy ship. Change the code to the following:</p><div class="mediaobject"><img src="/graphics/9781783553556/graphics/3556OT_08_03.jpg" /></div><p>Here, we store the AIRig for the entity by retrieving it at the start. Then, we get the <code class="literal">isAttacking</code> variable from the working memory, and if the enemy is attacking, the ship starts blinking green. If it's not attacking, the ship stays its default color, which is white. Create a new prefab in Unity named <code class="literal">Enemy</code> and drag the ship into it. Now we have enemies that can start<a id="id226" class="indexterm"></a> attacking the player, and we can start setting up our AI.</p></div>