<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec15"></a>React AI</h2></div></div><hr /></div><p>React AI doesn't come<a id="id39" class="indexterm"></a> equipped with a patrol script, so we provided one. We'll start with this behavior tree script and look at how it works and how to use it. Here are the steps to reproduce it:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Create a patrol script.</p></li><li><p>Create a patrol AI.</p></li><li><p>Set up the NPC patrol.</p></li></ol></div><p>To start with, we've provided a script for you to use. In it, I started with the last script for pathfinding, and then I extended it to use a similar configuration to the patrol path in Quick Path's patrol script. Here are a couple of key points about this script:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>It is based on the <code class="literal">FollowThePlayer</code> script from the previous chapter.</p></li><li style="list-style-type: disc"><p>You can find the code in the book's contents at <code class="literal">\Scripts\React AI\Patrol.cs</code>.</p></li><li style="list-style-type: disc"><p>It stores a public array of <code class="literal">Vector3</code>, so the <span class="strong"><strong>Inspector</strong></span> UI can allow designers to set the waypoints.</p></li><li style="list-style-type: disc"><p>Instead of the target being a player, it is set to the next waypoint in the list. Once we are close enough, it selects the next waypoint. <span class="strong"><strong>Close Enough</strong></span> is the float field that allows the inspector to find it.</p></li><li style="list-style-type: disc"><p>If there are no waypoints left to select, it starts over at the first waypoint.</p></li></ul></div><p>However, now we<a id="id40" class="indexterm"></a> need to create the user endpoint. Right-click on a folder in the <span class="strong"><strong>Project</strong></span> tab and choose <span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>Reactable</strong></span>. Name the reactable <code class="literal">PatrolAI</code>. In its <span class="strong"><strong>Inspector</strong></span> UI, add the patrol script as one of the behaviors. Next, right-click on the <span class="strong"><strong>PatrolAI</strong></span> asset and select <span class="strong"><strong>Edit Reactable</strong></span>.</p><p>In the reactable, right-click on the root element and select <span class="strong"><strong>AddBranch</strong></span> | <span class="strong"><strong>Sequence</strong></span>. A sequence repeats all the steps in an order. Under the <span class="strong"><strong>Sequence</strong></span> option, right-click and navigate to <span class="strong"><strong>Add</strong></span> | <span class="strong"><strong>Leaf</strong></span> | <span class="strong"><strong>Action</strong></span>. Assuming that you only added the patrol script to its behaviors, it should automatically select <span class="strong"><strong>Patrol.Go</strong></span> as its action. You can add notes to each step to help write a better story of what the AI is doing. When it is this simple, it does not matter so much, but many AIs will become more complex.</p><p>Next, the NPC needs to be set up to use this new patrol AI. Find the NPC in the previous chapter's React AI project. You'll need to remove the following AI that was on the NPC before, or create a new NPC. If you create a new NPC, do not forget to add the NavMesh agent so that it can navigate.</p><p>Add two components to the NPC: <span class="strong"><strong>Reactor</strong></span> and <span class="strong"><strong>Patrol</strong></span>. In the <span class="strong"><strong>Reactor</strong></span> component, you will need to set the <span class="strong"><strong>Reactable</strong></span> value to the <span class="strong"><strong>Patrol AI</strong></span> asset that we created earlier. Then, in the patrol script, add some waypoints. Like we did for the Quick Path patrol script, we need to set the <span class="strong"><strong>Vector</strong></span> locations for each of the waypoints.</p><div class="mediaobject"><img src="/graphics/9781783553556/graphics/3556OT_02_04.jpg" /></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip03"></a>Tip</h3><p>A tip to get exact numbers is to just move the NPC to the waypoint positions you want and then copy the position of the NPC to one of the waypoints.</p></div><p>Now your game <a id="id41" class="indexterm"></a>should have a character who patrols from point to point.</p></div>