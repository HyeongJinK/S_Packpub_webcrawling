<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch11lvl1sec52"></a>Advanced NavMesh parameters</h2></div></div><hr /></div><p>Now that <a id="id334" class="indexterm"></a>we know how navigation mesh generations <a id="id335" class="indexterm"></a>works, let's look at the different parameters you can set to generate them in more detail.</p><p>We'll look <a id="id336" class="indexterm"></a>at how to do these parameters with RAIN using the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Open one of our previous scenes or create a new one with a floor and some blocks for walls.</p></li><li><p>Then, go to <span class="strong"><strong>RAIN</strong></span> | <span class="strong"><strong>Create NavMesh</strong></span>. Also, right-click on the <span class="strong"><strong>RAIN</strong></span> menu and choose <span class="strong"><strong>Show Advanced Settings</strong></span>. The setup should look something like the following <a id="id337" class="indexterm"></a>screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553556/graphics/3556OT_11_01.jpg" /><div class="caption"><p>The NavMesh setup</p></div></div><p>Now let's look at some of the important parameters:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Size</strong></span>: This is the overall size of the navigation mesh. You'll want the<a id="id338" class="indexterm"></a> navigation mesh<a id="id339" class="indexterm"></a> to cover your entire<a id="id340" class="indexterm"></a> level and use this parameter instead of trying to scale up the navigation mesh through the <span class="strong"><strong>Scale</strong></span> transform in the <span class="strong"><strong>Inspector</strong></span> window. For our demo here, set the <span class="strong"><strong>Size</strong></span> parameter to <span class="strong"><strong>20</strong></span>.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Walkable Radius</strong></span>: This is <a id="id341" class="indexterm"></a>an important parameter to define the character size of the mesh. Remember, each mesh will be matched to the size of a particular character, and this is the radius of the character. You can visualize the radius for a character by adding a Unity <span class="strong"><strong>Sphere Collider</strong></span> script to your object (by going to <span class="strong"><strong>Component</strong></span> | <span class="strong"><strong>Physics</strong></span> | <span class="strong"><strong>Sphere Collider</strong></span>) and adjusting the radius of the collider.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Cell Size</strong></span>: This is <a id="id342" class="indexterm"></a>also a very important parameter. During the voxel step of the Recast algorithm, this sets the size of the cubes to inspect the geometry. The smaller the size, the more detailed and finer the mesh, but the longer the processing time for Recast. A large cell size makes computation fast but loses detail.</p></li></ul></div></li></ol></div><p>For example, here is a NavMesh from our demo with a cell size of <span class="strong"><strong>0.01</strong></span>:</p><div class="mediaobject"><img src="/graphics/9781783553556/graphics/3556OT_11_02.jpg" /></div><p>You <a id="id343" class="indexterm"></a>can see the finer detail here. The following is the navigation mesh generated with a cell size of <span class="strong"><strong>0.1</strong></span>:</p><div class="mediaobject"><img src="/graphics/9781783553556/graphics/3556OT_11_03.jpg" /></div><p>Note the difference between the two screenshots. In the former, walking through the two walls lower down in our picture is possible, but in the latter with a larger cell size, there is no path even though the character radius is the same. Problems like this become greater with larger cell sizes. The following is a navigation mesh with a cell size of <span class="strong"><strong>1</strong></span>:</p><div class="mediaobject"><img src="/graphics/9781783553556/graphics/3556OT_11_04.jpg" /></div><p>As you <a id="id344" class="indexterm"></a>can see, the detail becomes jumbled and the mesh itself becomes unusable. With such differing results, the big question is how large should a cell size be for a level? The answer is that it depends on the required result. However, one important consideration is that as the processing time to generate one is done during development and not at runtime, even if it takes several minutes to generate a good mesh then it can be worth it to get a good result in the game.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip04"></a>Tip</h3><p>Setting a small cell size on a large level can cause mesh processing to take a significant amount of time and consume a lot of memory. It is a good practice to save the scene before attempting to generate a complex navigation mesh.</p></div><p>The <span class="strong"><strong>Size</strong></span>, <span class="strong"><strong>Walkable Radius</strong></span>, and <span class="strong"><strong>Cell Size</strong></span> parameters are the most important parameters when generating the navigation mesh, but there are more that are used to customize the mesh further:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Max Slope</strong></span>: This<a id="id345" class="indexterm"></a> is the largest slope that a character can walk on. This is how much a piece of geometry that is tilted can still be walked on. If you take the wall and rotate it, you can see it is walkable:</p><div class="mediaobject"><img src="/graphics/9781783553556/graphics/3556OT_11_05.jpg" /></div><p>The preceding is a screenshot of a walkable object with a slope.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Step Height</strong></span>: This is how high a character can step from one object to another. For<a id="id346" class="indexterm"></a> example, if you have steps<a id="id347" class="indexterm"></a> between two blocks, as shown in the following screenshot, this would define how far in height the blocks can be apart and whether the area is still considered walkable:</p><div class="mediaobject"><img src="/graphics/9781783553556/graphics/3556OT_11_06.jpg" /></div><p>This is a screenshot of the navigation mesh with the step height set to connect adjacent blocks.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Walkable Height</strong></span>: This is the vertical height that is needed for the character to walk. For example, in the previous screenshot, the second block is not walkable underneath because of the walkable height. If you raise it to at least one unit <a id="id348" class="indexterm"></a>off the ground and set the <a id="id349" class="indexterm"></a>walkable height to <span class="strong"><strong>1</strong></span>, the area underneath would become walkable:</p><div class="mediaobject"><img src="/graphics/9781783553556/graphics/3556OT_11_07.jpg" /></div></li></ul></div><p>You can see a screenshot of the navigation mesh with the walkable height set to allow going under the higher block.</p><p>These are the most important parameters. There are some other parameters related to the visualization and to cull objects. We will look at culling more in the next section.</p></div>