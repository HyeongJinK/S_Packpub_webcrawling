<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch01lvl1sec11"></a>Setting up the Master Server</h2></div></div><hr /></div><p>Although Unity <a id="id7" class="indexterm"></a>provide their own default Master Server and <a id="id8" class="indexterm"></a>Facilitator (which is connected automatically if you do not specify your own), it is not recommended to use this for production. We'll be using our own Master Server, so you know how to connect to one you've hosted yourself.</p><p>Firstly, go to the following page:</p><p>
<a class="ulink" href="http://unity3d.com/master-server/" target="_blank">http://unity3d.com/master-server/</a>
</p><p>We're going to download two of the listed server components: the <span class="strong"><strong>Master Server</strong></span> and the <span class="strong"><strong>Facilitator</strong></span> as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849692328/graphics/2328OT_01_01.jpg" /></div><p>The servers are provided in full source, zipped. If you are on Windows using Visual Studio Express, <a id="id9" class="indexterm"></a>open up the Visual Studio .sln solution and compile in the <span class="strong"><strong>Release</strong></span> mode. Navigate to the <code class="literal">Release</code> folder and run the EXE (<code class="literal">MasterServer.exe</code> or <code class="literal">Facilitator.exe</code>). If you are on a Mac, you can either use the included XCode project, or simply run the Makefile (the Makefile works under both Linux and Mac OS X).</p><p>The Master Server, <a id="id10" class="indexterm"></a>as previously mentioned, enables our game to show a server lobby to players. The Facilitator is used to help clients connect to each other by performing an operation known as <span class="strong"><strong>NAT punch-through</strong></span>.
<a id="id11" class="indexterm"></a> NAT<a id="id12" class="indexterm"></a> is used when multiple computers are part of the same network, and all use the same public IP address. NAT will essentially translate public and private IPs, but in order for one machine to connect to another, NAT punch-through is necessary. You can read more about it here:</p><p>
<a class="ulink" href="http://www.raknet.net/raknet/manual/natpunchthrough.html" target="_blank">http://www.raknet.net/raknet/manual/natpunchthrough.html</a>
</p><p>The default port for the Master Server is <code class="literal">23466</code>, and for the Facilitator is <code class="literal">50005</code>. You'll need these later in order to configure Unity to connect to the local Master Server and Facilitator instead of the default Unity-hosted servers.</p><p>Now that we've set up our own servers, let's take a look at the Unity Networking API itself.</p></div>