<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch01lvl1sec10"></a>Introducing UDP communication</h2></div></div><hr /></div><p>The built-in Unity networking is built upon <span class="strong"><strong>RakNet</strong></span>.
<a id="id4" class="indexterm"></a> RakNet uses UDP communication for efficiency.</p><p>
<span class="strong"><strong>UDP</strong></span> (<span class="strong"><strong>User Datagram Protocols</strong></span>) is <a id="id5" class="indexterm"></a>a simple way to send messages to another computer. These messages are largely unchecked, beyond a simple checksum to ensure that the message has not been corrupted. Because of this, messages are not guaranteed to arrive, nor are they guaranteed to only arrive once (occasionally a single message can be delivered twice or more), or even in any particular order. TCP, on the other hand, guarantees each message to be received just once, and in the exact order they were sent, although this can result in increased latency (messages must be resent several times if they fail to reach the target, and messages must be buffered when received, in order to be processed in the exact order they were sent).</p><p>To solve this, a reliability layer must be built on top of UDP. This is known as <span class="strong"><strong>rUDP</strong></span> (<span class="strong"><strong>reliable UDP</strong></span>). <a id="id6" class="indexterm"></a>Messages can be sent unreliably (they may not arrive, or may arrive more than once), or reliably (they are guaranteed to arrive, only once per message, and in the correct order). If a reliable message was not received or was corrupt, the original sender has to resend the message. Additionally, messages will be stored rather than immediately processed if they are not in order. For example, if you receive messages 1, 2, and 4, your program will not be able to handle those messages until message 3 arrives.</p><p>Allowing unreliable or reliable switching on a per-message basis affords better overall performance. Messages, such as player position, are better suited to unreliable messages (if one fails to arrive, another one will arrive soon anyway), whereas damage messages must be reliable (you never want to accidentally drop a damage message, and having them arrive in the same order they were sent reduces race conditions).</p><p>In Unity, you can serialize the state of an object (for example, you might serialize the position and health of a unit) either reliably or unreliably (unreliable is usually preferred). All other messages are sent reliably.</p></div>