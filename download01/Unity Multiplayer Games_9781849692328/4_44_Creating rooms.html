<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec48"></a>Creating rooms</h2></div></div><hr /></div><p>To<a id="id203" class="indexterm"></a> create a<a id="id204" class="indexterm"></a> room, there are two methods you can call: <code class="literal">CreateRoom</code>, and <code class="literal">CreateJoinRoom</code>. The <code class="literal">CreateRoom</code> method takes the desired room name (or null if you want a random room name), and room parameters (a dictionary of room properties, such as time limit, map, password, and so on). The <code class="literal">CreateJoinRoom</code> method<a id="id205" class="indexterm"></a> takes both the properties of <code class="literal">CreateRoom</code>, and the properties of <code class="literal">JoinRoom</code>, as it will either join the room if it exists or create a new one.</p><p>One thing to note is that <code class="literal">CreateRoom</code> will not automatically establish a connection. It simply returns a string of the room ID on success, and then this is used to connect via <code class="literal">JoinRoom</code>.</p><div class="informalexample"><pre class="programlisting">void OnGUI()
{
<span class="strong"><strong>  if( roomConnection != null )</strong></span>
<span class="strong"><strong>    return;</strong></span>

<span class="strong"><strong>  if( GUILayout.Button( "Create Room", GUILayout.Width( 200f ) ) )</strong></span>
<span class="strong"><strong>  {</strong></span>
<span class="strong"><strong>    // "MyCode" is the default room type provided with the Serverside Code solution</strong></span>
<span class="strong"><strong>    client.Multiplayer.CreateRoom( null, "MyCode", true, null,</strong></span>
<span class="strong"><strong>      delegate( string roomID )</strong></span>
<span class="strong"><strong>      {</strong></span>
<span class="strong"><strong>        Debug.Log( "Room created" );</strong></span>
<span class="strong"><strong>        client.Multiplayer.JoinRoom( roomID, null,</strong></span>
<span class="strong"><strong>        delegate( Connection connection )</strong></span>
<span class="strong"><strong>        {</strong></span>
<span class="strong"><strong>              </strong></span>
<span class="strong"><strong>Debug.Log( "Connected to room!" );</strong></span>
<span class="strong"><strong>roomConnection = connection;</strong></span>
<span class="strong"><strong>        },</strong></span>
<span class="strong"><strong>        delegate( PlayerIOError error )</strong></span>
<span class="strong"><strong>        {</strong></span>
<span class="strong"><strong>          Debug.Log( error.Message );</strong></span>
<span class="strong"><strong>        } );</strong></span>
<span class="strong"><strong>      },</strong></span>
<span class="strong"><strong>      delegate( PlayerIOError error )</strong></span>
<span class="strong"><strong>      {</strong></span>
<span class="strong"><strong>        Debug.Log( error.Message );</strong></span>
<span class="strong"><strong>      } );</strong></span>
<span class="strong"><strong>  }</strong></span>

  if( rooms == null )
    return;

  foreach( RoomInfo room in rooms )
  {
    if( GUILayout.Button( room.Id, GUILayout.Width( 200f ) ) )
    {
      client.Multiplayer.JoinRoom( room.Id, null,
        delegate( Connection connection )
        {
          Debug.Log( "Connected to room!" );
          roomConnection = connection;
        },
        delegate( PlayerIOError error )
        {
          Debug.Log( error.Message );
        } );
    }
  }
}</pre></div><p>So, we first<a id="id206" class="indexterm"></a> attempt to create a room. If that succeeds, we then establish a<a id="id207" class="indexterm"></a> connection to that room (and store the resulting connection in <code class="literal">roomConnection</code>).</p></div>