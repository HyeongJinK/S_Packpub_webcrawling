<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch05lvl1sec74"></a>Time for action â€“ creating the enemy</h2></div></div><hr /></div><p>We will need to import and do a little setup <a id="id367" class="indexterm"></a>on a second tank, before we can do any AI type programming:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select <code class="literal">Tanks_Type03.png</code> and <code class="literal">Tanks_Type03.blend</code> from the starting assets for the chapter and import them to the <code class="literal">Tanks</code> folder under the <code class="literal">Models</code> folder.</p></li><li><p>Once Unity has finished importing, select the new tank in the <span class="strong"><strong>Project</strong></span> window and take a look at it in the <span class="strong"><strong>Inspector</strong></span> window.</p></li><li><p>This tank has no animations, so the <span class="strong"><strong>Animation Type</strong></span> can be set to <span class="strong"><strong>None</strong></span> and <span class="strong"><strong>Import Animation</strong></span> can be unchecked from the <span class="strong"><strong>Rig</strong></span> and <span class="strong"><strong>Animations</strong></span> pages respectively.</p></li><li><p>Drag the tank from the <span class="strong"><strong>Project</strong></span> window to the <span class="strong"><strong>Scene</strong></span> window; any clear patch of street will work just fine.</p></li><li><p>For starters, rename the model in the <span class="strong"><strong>Scene</strong></span> view to <code class="literal">EnemyTank</code>.</p></li><li><p>Now, we need to change the parenting of the tank so the turret can turn and the cannon will follow, just as we did for the player's tank. To do that, create an empty <span class="strong"><strong>GameObject</strong></span> and rename it to <code class="literal">TurretPivot</code>.</p></li><li><p>Position <code class="literal">TurretPivot</code> to be at the base of the turret.</p></li><li><p>In the <span class="strong"><strong>Hierarchy</strong></span> window, drag-and-drop <code class="literal">TurretPivot</code> onto <code class="literal">EnemyTank</code> to make <code class="literal">EnemyTank</code> the parent.</p></li><li><p>Still in the <span class="strong"><strong>Hierarchy</strong></span> window, make the cannon and turret mesh objects children of <code class="literal">TurretPivot</code>. When Unity asks whether you are sure that you want to break the prefab connection, be sure to click on <span class="strong"><strong>Yes</strong></span>.</p></li><li><p>The tank is a little large, so adjust the <span class="strong"><strong>Scale Factor</strong></span> of the tank's Import Settings in the <span class="strong"><strong>Inspector</strong></span> window to <code class="literal">0.6</code> to give us a tank that is about the size of the player's.</p></li><li><p>In order for the tank to be able to navigate our new NavMesh, we need to add a <span class="strong"><strong>NavMeshAgent</strong></span> component. First, select <code class="literal">EnemyTank</code> in the <span class="strong"><strong>Hierarchy</strong></span> window and then go to the toolbar of Unity; click on <span class="strong"><strong>Component</strong></span>, followed by <span class="strong"><strong>Navigation</strong></span>, <a id="id368" class="indexterm"></a>and then click on <span class="strong"><strong>NavMeshAgent</strong></span>. In the <a id="id369" class="indexterm"></a>
<span class="strong"><strong>Inspector</strong></span> window, we can see the new component and the settings associated with it, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849692014/graphics/2014OT_05_03.jpg" /></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Radius</strong></span>: This is simply how big the agent is. Working in conjunction with the <span class="strong"><strong>Radius</strong></span> <a id="id370" class="indexterm"></a>value we set in the <span class="strong"><strong>Navigation</strong></span> window, this keeps the object from walking partly in the walls.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Speed</strong></span>: The <span class="strong"><strong>NavMeshAgent</strong></span> component <a id="id371" class="indexterm"></a>automatically moves the connected object when it has a path. This value dictates how fast to follow the path in units per second.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Acceleration</strong></span>: This is the maximum<a id="id372" class="indexterm"></a> speed that the agent will accelerate with.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Angular Speed</strong></span>: This is the<a id="id373" class="indexterm"></a> degrees per second that the agent can turn. A person would have a very high angular speed, while a car's angular speed would be low.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Stopping Distance</strong></span>: This is how far away from the target destination the agent will start to<a id="id374" class="indexterm"></a> slow down and stop.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Auto Traverse Off Mesh Link</strong></span>: With this checkbox checked, the agent will use the Off Mesh Links when pathfinding, such as jumping gaps and falling off ledges.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Auto Braking</strong></span>: With this checkbox<a id="id375" class="indexterm"></a> checked, the agent will stop as soon as it reaches the destination, rather than overshooting, because of the irregular frame rate.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Auto Repath</strong></span>: If the path that <a id="id376" class="indexterm"></a>was found is incomplete for any reason, this checkbox allows<a id="id377" class="indexterm"></a> Unity to automatically try to find a new one.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Height</strong></span>: This setting affects<a id="id378" class="indexterm"></a> the cylinder that appears in the editor, around the agent. It simply sets the height of that cylinder.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Base Offset</strong></span>: This is the vertical <a id="id379" class="indexterm"></a>offset of the colliders that are attached to the agent.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Obstacle Avoidance Type</strong></span>: This is<a id="id380" class="indexterm"></a> how much effort the agent will put in to find a smooth path around obstacles. The higher the quality, the more work is done.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Avoidance Priority</strong></span>: This value dictates who has the right of way. An agent with a high value <a id="id381" class="indexterm"></a>will go around an agent with a low value.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>NavMesh Walkable</strong></span>: Remember those layers that were mentioned earlier when discussing<a id="id382" class="indexterm"></a> the <span class="strong"><strong>Navigation</strong></span> window? This is where we can set which layers the agent is able to traverse. Only the layers in this list that are checked will be used for pathfinding.</p></li></ul></div></li><li><p>Now that we understand the settings, let's use them. For the enemy tank, a value of <code class="literal">2.4</code> for the <span class="strong"><strong>Radius</strong></span> and <code class="literal">4</code> for the <span class="strong"><strong>Height</strong></span> will work well. You should be able to see another wire cylinder in the <span class="strong"><strong>Scene</strong></span> window, this time around our enemy tank.</p></li><li><p>The last thing to do is to turn <code class="literal">EnemyTank</code> into a prefab. Do this just as we did with the targets, by dragging it from the <span class="strong"><strong>Hierarchy</strong></span> window and dropping it on the <code class="literal">Prefabs</code> folder in the <span class="strong"><strong>Project</strong></span> window.</p></li></ol></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec68"></a>
<span class="emphasis"><em>What just happened?</em></span>
</h3></div></div></div><p>We created an enemy tank. We also learned about the settings for the <span class="strong"><strong>NavMeshAgent</strong></span> component. However, if you try to play the game now, nothing will appear to happen. This is because the <span class="strong"><strong>NavMeshAgent</strong></span> component is not being given a destination. We will solve that in the next section.</p></div></div>