<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch07lvl1sec111"></a>Time for action – creating the blue bird</h2></div></div><hr /></div><p>The blue bird will again make use of inheritance,<a id="id523" class="indexterm"></a> reducing the amount of code that needs to be written to create the bird:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Again, start building <a id="id524" class="indexterm"></a>your blue bird the same way as the previous two, substituting the appropriate model. You should also adjust the <span class="strong"><strong>Radius</strong></span> of the <span class="strong"><strong>Sphere Collider</strong></span> component to align appropriately with the smaller size of this bird.</p></li><li><p>Next, we create the <code class="literal">BlueBird</code> script.</p></li><li><p>Again, adjust line four so the script extends <code class="literal">Bird</code> instead of <code class="literal">MonoBehaviour</code>.</p><div class="informalexample"><pre class="programlisting">public class BlueBird : Bird {</pre></div></li><li><p>This script has three variables. The first is a list of prefabs to spawn when the bird splits. Next is the angle difference between each new bird that will be launched. Finally is a value to spawn the birds a little ahead of their current position to keep them from getting stuck inside each other.</p><div class="informalexample"><pre class="programlisting">public GameObject[] splitBirds = new GameObject[0];
public float launchAngle = 15f;
public float spawnLead = 0.5f;</pre></div></li><li><p>Next, we override the <code class="literal">DoSpecial</code> function and start, as with the others, by marking that we made our special move. Next, it calculates half of the number of birds to spawn and creates an empty list for storing the rigidbodies of the newly spawned birds.</p><div class="informalexample"><pre class="programlisting">protected override void DoSpecial() {
  didSpecial = true;
  
  int halfLength = splitBirds.Length / 2;
  Rigidbody[] newBodies = new Rigidbody[splitBirds.Length];</pre></div></li><li><p>The function continues by looping through the list of birds, skipping the slots that are empty. It spawns the new birds at its position, continuing to the next if there is a missing <span class="strong"><strong>Rigidbody</strong></span> component. The new <span class="strong"><strong>Rigidbody</strong></span> component is then stored in the list.</p><div class="informalexample"><pre class="programlisting">  for(int i=0;i&lt;splitBirds.Length;i++) {
    if(splitBirds[i] == null) continue;

    GameObject next = Instantiate(splitBirds[i], transform.position, transform.rotation) as GameObject;
    if(next.rigidbody == null) continue;

    newBodies[i] = next.rigidbody;</pre></div></li><li><p>Using <code class="literal">Quaternion.Euler</code>, a new rotation is created that will angle the new bird along a path split off from the main path. The new bird's velocity is set to the rotated velocity of the current bird. It is then moved forward along its new path to get out of the way of the other birds being spawned.</p><div class="informalexample"><pre class="programlisting">    Quaternion rotate = Quaternion.Euler(launchAngle * (i – halfLength), 0, 0);
    next.rigidbody.velocity = rotate * rigidbody.velocity;
    next.transform.position += next.rigidbody.velocity.normalized * spawnLead;
  }</pre></div></li><li><p>After the loop, the function uses <code class="literal">FindObjectOfType</code><a id="id525" class="indexterm"></a> to find the slingshot that is currently in the scene. If found, it is changed to track the first new bird spawned as the one that was fired. The new list of rigidbodies is also set to the <code class="literal">rigidbodyDamper</code> variable to be added to its list of rigidbodies. Finally, the script destroys the bird it is attached to, completing the illusion that the bird has split apart.</p><div class="informalexample"><pre class="programlisting">  Slingshot slingshot = FindObjectOfType(typeof(Slingshot)) as Slingshot;
  if(slingshot != null) {
    slingshot.toFireBird = newBodies[0].transform;
  slingshot.rigidbodyDamper.AddBodiesToCheck(newBodies);
  }

  Destroy(gameObject);
}</pre></div></li><li><p>Before you add the script to your new bird, we actually need two blue birds: one that splits and one that does not. Duplicate your bird and name one <code class="literal">Bird_Blue_Split</code> and the other <code class="literal">Bird_Blue_Normal</code>. To the split bird add the new script and to the normal bird add the <code class="literal">Bird</code> script.</p></li><li><p>Turn both birds into prefabs and add the normal bird to the other's list of birds to be split into.</p></li></ol></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec115"></a>
<span class="emphasis"><em>What just happened?</em></span>
</h3></div></div></div><p>We created the blue bird. This bird splits into multiple birds when the user taps the screen. The effect actually requires two birds that look identical. One that does the splitting and another that is split into but does nothing special.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec116"></a>Have a go hero – creating a rainbow bird</h3></div></div></div><p>It is actually possible to add <a id="id526" class="indexterm"></a>anything we want to spawn to the blue bird's list of things to split into. Your challenge here is to create a rainbow bird. This bird could split into different types of birds, not just blue ones. Or, perhaps it is a stone bird that splits into stone blocks. For an extended challenge, create a mystery bird that picks a bird from its list randomly when it splits.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec117"></a>The black bird</h3></div></div></div><p>Finally, we have the black bird. This bird explodes when the player touches the screen. As with all the birds discussed previously, it will extend the <code class="literal">Bird</code> script.</p></div></div>