<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch06lvl1sec90"></a>Time for action – adding collisions</h2></div></div><hr /></div><p>We need to add some collision capabilities to our space objects, so that they can crash into each other and be shot at properly:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Let's start by giving collision to the asteroid. Do this by first selecting the mesh for the asteroid and adding a <span class="strong"><strong>MeshCollider</strong></span> component. This will later let us shoot at the asteroid.</p></li><li><p>Next, select the same object that holds our <code class="literal">Asteroid</code> script component. Add a <span class="strong"><strong>SphereCollider</strong></span> component to the object and adjust the <span class="strong"><strong>Radius</strong></span> to be a little larger than the asteroid. This collider will detect when the asteroid has collided with the player.</p><div class="mediaobject"><img src="/graphics/9781849692014/graphics/2014OT_06_03.jpg" /></div></li><li><p>The <span class="strong"><strong>SphereCollider</strong></span> needs to have the <span class="strong"><strong>Is Trigger</strong></span> checkbox checked. We are not checking the true collision, just an approximate one. With this checkbox checked, objects <a id="id427" class="indexterm"></a>will no longer be stopped by the collider, but instead trigger an event in script when an object enters the collider volume. When the player enters the collider, it will be close enough that we can assume and act as if it has collided.</p></li><li><p>When you are satisfied with the changes, be sure to apply them to the prefab. Otherwise, the other asteroids will not be updated and collidable.</p></li><li><p>To detect when the player has entered the new trigger area, we need to add a short function to the <code class="literal">Asteroid</code> script. We add a <code class="literal">OnTriggerEnter</code> function to the end of the script. This function is automatically called by the Physics system when one collider enters another. The collider that is passed to it is the one that it collided with. However, the function only works if at least one of the objects has a <span class="strong"><strong>Rigidbody</strong></span> component attached. We will be covering it in detail in <a class="link" href="#" linkend="ch07">Chapter 7</a>, <span class="emphasis"><em>Throwing Your Weight Around – Physics and a 2D Camera</em></span>, but the Rigidbody component is what actually connects an object into Unity's Physics engine, giving our scripts access to the <code class="literal">OnTrigger</code> and <code class="literal">OnCollision</code> groups of functions. We will be adding this to the player's ship. When the function is called, it simply destroys the asteroid.</p><div class="informalexample"><pre class="programlisting">public void OnTriggerEnter(Collider other) {
  Destroy(gameObject);
}</pre></div></li><li><p>Next, we need to add collision to the the player's ship. Start by adding that <span class="strong"><strong>Rigidbody</strong></span> component to the <span class="strong"><strong>PlayerShipPivot</strong></span> GameObject that we created earlier.</p></li><li><p>Be sure to check the <span class="strong"><strong>Is Kinematic</strong></span> checkbox of the new component. This tells the Physics system that we want to control the object's motion through the script. If it was not checked, the ship would begin to fall as soon we start playing the game.</p></li><li><p>One of the features of a <span class="strong"><strong>Rigidbody</strong></span> component is that it treats all colliders on child objects in<a id="id428" class="indexterm"></a> the <span class="strong"><strong>Hierarchy</strong></span> as a part of a single collision shape. This way, we are able to build a complex collision shape using several simple and faster process colliders. By creating an empty <span class="strong"><strong>GameObject</strong></span> and adding the simple colliders, we size and position them to cover the player's ship. Be sure to make the collider objects children of the ship's pivot point.</p><div class="mediaobject"><img src="/graphics/9781849692014/graphics/2014OT_06_04.jpg" /></div></li></ol></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec84"></a>
<span class="emphasis"><em>What just happened?</em></span>
</h3></div></div></div><p>We added collision to the asteroids and the player's ship. This gives the player the ability to crash into and destroy the asteroids. We are utilizing a trigger collider to approximate collision with the asteroid. Also, we make use of the <span class="strong"><strong>Rigidbody</strong></span> component, allowing our ship to collide with other things in the scene. Additionally, this gives us the advantage of being able to build a complex collision shape out of the simple colliders that are provided by Unity. Although it is technically possible to just use a <span class="strong"><strong>MeshCollider</strong></span> to exactly match<a id="id429" class="indexterm"></a> the shape of the ship, it is not recommended. The <span class="strong"><strong>Rigidbody</strong></span> and <span class="strong"><strong>MeshCollider</strong></span> components do not mix well. Also, several simple colliders are much faster for the computer to calculate than a single <span class="strong"><strong>MeshCollider</strong></span>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec85"></a>Have a go hero – adding points</h3></div></div></div><p>It is great that we can make the player ship collide with the asteroids, but it doesn't mean much in terms of a game. There is<a id="id430" class="indexterm"></a> no penalty for the collision. This challenge is for you to implement a scoring system similar to the one we used for the Tank Battle game from the previous chapters. When the player collides with asteroids, subtract points from the score. Use the <code class="literal">SendMessage</code> function on the other collider from the <code class="literal">OnTriggerEnter</code> function<a id="id431" class="indexterm"></a>. Don't just subtract points when the trigger is entered, because (as you will find out later) the asteroids will not be colliding only with the player.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec86"></a>Creating the enemy</h3></div></div></div><p>Flying around space with a handful of asteroids is great, but it doesn't make for much of a fight. That is why we are going <a id="id432" class="indexterm"></a>to add an enemy spaceship that will chase and shoot at the player. We have no mesh to use for pathfinding, so we cannot use the techniques we learned in the previous chapter. However, there are no buildings in space to navigate around, so the chasing of the player will be much simpler.</p></div></div>