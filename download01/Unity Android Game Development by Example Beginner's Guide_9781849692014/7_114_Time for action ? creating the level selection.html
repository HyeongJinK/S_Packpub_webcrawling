<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch07lvl1sec114"></a>Time for action – creating the level selection</h2></div></div><hr /></div><p>A new scene and a single script will serve us well in managing our level selection:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>This last section<a id="id531" class="indexterm"></a> begins by saving your current scene and hitting <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>N</em></span> to create a new one, named <code class="literal">LevelSelect</code>.</p></li><li><p>For this scene, we need to create a single, short script also named <code class="literal">LevelSelect</code>.</p></li><li><p>The first and only variable defines the size of the buttons that will appear on screen.</p><div class="informalexample"><pre class="programlisting">public int buttonSize = 100;</pre></div></li><li><p>The only function is the <code class="literal">OnGUI</code> function.<a id="id532" class="indexterm"></a> This function starts with a loop. It will loop through three times for the three levels we should have created earlier. A <code class="literal">Rect</code> variable is created and initialized to the <code class="literal">buttonSize</code>. The x and y values are then set to position the buttons in a row, centered on the screen. Next, the current high score for the level is retrieved, using <code class="literal">PlayerPrefs.GetInt</code> and the same key creation that we used in our <code class="literal">LevelTracker</code> script. Then, the function creates a string to hold the message that will appear on the button. Finally,<a id="id533" class="indexterm"></a> the button is drawn and, when clicked, <code class="literal">Application.LoadLevel</code> is used to load the scene and start the user playing that level.</p><div class="informalexample"><pre class="programlisting">public void OnGUI() {
  for(int i=0;i&lt;3;i++) {
    Rect next = new Rect(0,0, buttonSize, buttonSize);
    next.x = (Screen.width / 2) – (buttonSize * 1.5f) + (buttonSize * i);
    next.y = (Screen.height / 2) – (buttonSize / 2f);

    int levelScore = PlayerPrefs.GetInt("LevelScore" + (i + 1), 0);
    string text = "Level " + (i + 1) + "\nScore: " + levelScore;

    if(GUI.Button(next, text)) {
      Application.LoadLevel(i + 1);
    }
  }
}</pre></div></li><li><p>Return to Unity and add the script to the <code class="literal">Main Camera</code> object.</p></li><li><p>Finally, open the <span class="strong"><strong>Build Settings</strong></span> and add your scenes to the <span class="strong"><strong>Scenes in Build</strong></span> list. Clicking and dragging on the scenes in the list will let you reorder them. Make sure your <span class="strong"><strong>LevelSelect</strong></span> scene is first and has the index of zero to the right of it. The rest of your scenes can appear in whatever order you desire. But be aware that they will be associated with the buttons in the same order.</p></li></ol></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec120"></a>
<span class="emphasis"><em>What just happened?</em></span>
</h3></div></div></div><p>We created a level-selection screen. It uses a loop to create a list of buttons associated with the levels in our game. When a button is pressed, <code class="literal">Application.LoadLevel</code> starts that level. We also made use of <code class="literal">PlayerPrefs.GetInt</code> to retrieve the high scores for each of the levels.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec121"></a>Have a go hero – adding some style</h3></div></div></div><p>Here, the challenge is to use GUI styles to make the screen look great. A logo and a background would help a lot. Additionally, take a look at <code class="literal">GUI.BeginScrollView</code> if you have more than three levels. This function will let the user scroll through a list of levels that is far greater in size than can be easily seen on screen.</p></div></div>