<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec48"></a>Time for action – moving treads</h2></div></div><hr /></div><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>There is just one thing left to do, and then we will be done with materials and can go on to make the game even more fun. Remember the <span class="strong"><strong>Offset</strong></span> value of the materials? It turns out that we can actually control that with a script. Start by opening up the <code class="literal">ChassisControls</code> script.</p></li><li><p>First, we need to add a few variables to the beginning of the script. The first two will hold references to our tank tread renderers, the part of the mesh object that keeps track of the material that is applied to the mesh and actually does the drawing. This is just like how the <code class="literal">characterControl</code> variable holds a reference to our <code class="literal">CharacterController</code> component.</p><div class="informalexample"><pre class="programlisting">public Renderer rightTread;
public Renderer leftTread;</pre></div></li><li><p>The second two variables will keep track of the amount of offset applied to each tread. We store it here because it is a faster reference than trying to look it up from the thread's material each frame.</p><div class="informalexample"><pre class="programlisting">private float rightOffset = 0;
private float leftOffset = 0;</pre></div></li><li><p>To make use of the new values, these lines need to be added to the end of the <code class="literal">MoveTank</code> function<a id="id240" class="indexterm"></a>. The first line here adjusts the offset for the right tread as per our speed and keeps in time with our frame rate. The second line utilizes the material value of a <code class="literal">Renderer</code> component to find our tank tread material. The <code class="literal">mainTextureOffset</code> value of the material is the offset of the primary texture in the material. In the case of our diffuse materials, it is the only texture. Then, we have to set the offset to a new <code class="literal">Vector2</code> value that will contain our new offset value. <code class="literal">Vector2</code> is just like <code class="literal">Vector3</code> we used for moving, but works in 2D space instead of 3D space. A texture is flat, hence 2D space. The last two lines of the code do the same thing as the other two, but for the left tank tread.</p><div class="informalexample"><pre class="programlisting">rightOffset += speed * Time.deltaTime;
rightTread.material.mainTextureOffset = new Vector2(rightOffset, 0);
leftOffset += speed * Time.deltaTime;
leftTread.material.mainTextureOffset = new Vector2(leftOffset, 0);</pre></div></li><li><p>To make the connections to the <code class="literal">Renderer</code> components of our treads, do the same thing that we did for the pivot points: drag the tread meshes from the <span class="strong"><strong>Hierarchy</strong></span> window to the corresponding value in the <span class="strong"><strong>Inspector</strong></span> window. Once done, be sure to save it and try it out.</p></li></ol></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec35"></a>
<span class="emphasis"><em>What just happened?</em></span>
</h3></div></div></div><p>We updated our <code class="literal">ChassisControls</code> script to make the tank treads move. As the tank is driven around, the textures pan in the appropriate direction. This is the same type of functionality that is used to make waves in water and other textures that move.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec36"></a>Have a go hero – turning with the treads</h3></div></div></div><p>The movement of the material doesn't quite match the speed of the tank. Figure out how to add a speed value for the tank's treads. Also, it would be cool if they moved in opposite directions when the tank is rotating. Real tanks turn by making one tread go forward and the other back.</p></div></div>