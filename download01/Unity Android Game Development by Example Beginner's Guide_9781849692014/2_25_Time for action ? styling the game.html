<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec30"></a>Time for action – styling the game</h2></div></div><hr /></div><p>If you do not want to look far,<a id="id147" class="indexterm"></a> the assets used for this chapter are found along with the resources for the book. All of the needed images are available, and they will work just well, until you have an opportunity to create some of your own.</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>First, we need five small textures: <code class="literal">ButtonActive</code>, <code class="literal">ButtonNormal</code>, <code class="literal">ONormal</code>, <code class="literal">XNormal</code>, and <code class="literal">Title</code>. To create these, you will have to use a separate photo-editing program or use the ones supplied with the included projects.</p></li><li><p>The easiest way to get the images into your Unity project is to simply save them into the <code class="literal">Assets</code> folder that is created when you create a new project. Alternatively, you can go up to the top and click on <span class="strong"><strong>Assets</strong></span> followed by <span class="strong"><strong>Import New Asset</strong></span>. This will open a file browser and let you navigate to the asset you want. When you have found the asset you desire to import and have clicked on the <span class="strong"><strong>Import</strong></span> button, a copy of the asset is put in your project. Unity will not move or remove files that exist outside of the current project.</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>And now<a id="id148" class="indexterm"></a> a note about import settings for textures. By default, Unity assumes any image files imported to your project are going to be used as game model textures. Because of that, Unity compresses them and adjusts them to fit a power of two.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip07"></a>Tip</h3><p>In case you didn't know, in computer graphics it is much faster to render images that can be divided in half evenly, down to a single unit. There are deeper reasons, but suffice it to say that it is because of the binary switches that actually make up a computer.</p></div><div class="mediaobject"><img src="/graphics/9781849692014/graphics/2014OT_02_05.png.jpg" /></div></li><li style="list-style-type: disc"><p>Making our images recognized as being for the GUI is quite simple. To the right of <span class="strong"><strong>Texture Type</strong></span>, click on <span class="strong"><strong>Texture</strong></span> and select <span class="strong"><strong>GUI</strong></span> from the drop-down menu.</p></li><li style="list-style-type: disc"><p>You will<a id="id149" class="indexterm"></a> notice that we were given a new <span class="strong"><strong>Filter Mode</strong></span> drop-down menu. This is essentially how much effort Unity will put into making the image look nice as it is resized for the various GUI elements. <span class="strong"><strong>Trilinear</strong></span> is the best, <span class="strong"><strong>Point</strong></span> is the fastest, and <span class="strong"><strong>Bilinear</strong></span> is in the middle.</p></li><li style="list-style-type: disc"><p>Once the import settings have been changed, be sure to click on <span class="strong"><strong>Apply</strong></span>, or Unity will complain when you try to do anything else. If you do not want to commit the changes, clicking on <span class="strong"><strong>Revert</strong></span> will discard any changes just made and set back the <span class="strong"><strong>Import Settings</strong></span> window to the last configuration that was used.</p></li></ul></div></li><li><p>So, set all of <span class="strong"><strong>Texture Types</strong></span> for your images to GUI and we will get on with it.</p></li><li><p>Let us start with the beginning of the game. Open your <code class="literal">TicTacToeControl</code> script and add the following lines of code at the beginning. These allow us to attach references to other assets inside of the Unity Editor. The first will hold our <code class="literal">GameSkin</code>, so we can style all of our GUI elements. The second, as you can see in the following lines of code, will hold our fancy title image:</p><div class="informalexample"><pre class="programlisting">public GUISkin guiSkin;
public Texture2D titleImage;</pre></div></li><li><p>Now go to the Unity Editor and select <span class="strong"><strong>Main Camera</strong></span> from the <span class="strong"><strong>Hierarchy</strong></span> window.</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Every object that you see listed in the <a id="id150" class="indexterm"></a>
<span class="strong"><strong>Hierarchy</strong></span> window is a <code class="literal">GameObject</code>. A <code class="literal">GameObject</code> is given a purpose and a meaning by the various components that are attached to it, for example, our <code class="literal">TicTacToeControl</code> script.</p></li><li style="list-style-type: disc"><p>An empty <code class="literal">GameObject</code> is just a point in space, as defined by the <code class="literal">Transform</code> component that is always the first component on any <code class="literal">GameObject</code>.</p></li><li style="list-style-type: disc"><p>You can see in the <span class="strong"><strong>Inspector</strong></span> window, the <span class="strong"><strong>Main Camera</strong></span> object has a <span class="strong"><strong>Camera</strong></span> component. It gives a purpose to the <code class="literal">GameObject</code> and controls how the <span class="strong"><strong>Camera</strong></span> component functions, just as our <code class="literal">TicTacToeControl</code> component at the bottom lets it control our Tic-tac-toe game.</p></li><li style="list-style-type: disc"><p>The <span class="strong"><strong>Inspector</strong></span> window also lets us see all of the public variables that can be changed in the Unity Editor. If they are changed, those values<a id="id151" class="indexterm"></a> are saved and used when the game is played. So, by creating a variable in our script, we can add the reference to our <code class="literal">GameSkin</code> and it will be used in the game. To add the reference, simply click-and-drag the object to the desired variable on the component in the <span class="strong"><strong>Inspector</strong></span> window.</p></li></ul></div></li><li><p>Drag <code class="literal">GameSkin</code> to the <span class="strong"><strong>GUI Skin</strong></span> slot and our title image to the <span class="strong"><strong>Title Image</strong></span> slot.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip08"></a>Tip</h3><p>Be sure to save. Saving regularly is the only thing that stands between you and premature baldness, the next time your computer decides to die.</p></div></li><li><p>Inside of our <code class="literal">TicTacToeControl</code> script, add the following line of code at the beginning of the <code class="literal">OnGUI</code> function. It first checks to make sure there is a GUI Skin available. If it is, it is set into the <code class="literal">GUI.skin</code> variable. This variable controls the GUI Skin that is used in the game. Once set, any GUI elements drawn after that will use the new GUI Skin. This could allow you to set one GUI Skin and draw half of the GUI, then set a different GUI Skin and draw the other half in a completely different style.</p><div class="informalexample"><pre class="programlisting">if(guiSkin != null) GUI.skin = guiSkin;</pre></div></li><li><p>If you play your game now, it won't look like much. The defaults of a new GUI Skin are the exact same as the default GUI Skin that Unity uses. Let us change that by selecting our <code class="literal">GameSkin</code> and expanding <span class="strong"><strong>Button</strong></span> and <span class="strong"><strong>Label</strong></span> in the <span class="strong"><strong>Inspector</strong></span> window.</p></li><li><p>For <span class="strong"><strong>Button</strong></span> we created a <span class="strong"><strong>ButtonNormal</strong></span> and <span class="strong"><strong>ButtonActive</strong></span> image. By dragging those to the <span class="strong"><strong>Background</strong></span> properties of the respective states, the look of the buttons will change.</p></li><li><p>The supplied button images have a yellow background, which will make the white text hard to read. So, by clicking on the color next to the <span class="strong"><strong>Text Color</strong></span> property, the <span class="strong"><strong>Color Picker</strong></span> window will open and we can select a new color. A navy blue for the <span class="strong"><strong>Normal</strong></span> state and a faded blue for the <span class="strong"><strong>Active</strong></span> state works well.</p></li><li><p>Also, to keep it from looking weird in the Unity Editor, remove the <span class="strong"><strong>Hover</strong></span> state. With a touch interface, there is no cursor to hover over buttons; therefore, there is no need for a hover state. To remove it, first click on the little circle to the right of the <span class="strong"><strong>Background</strong></span> image.</p><div class="mediaobject"><img src="/graphics/9781849692014/graphics/2014OT_02_06.png.jpg" /></div></li><li><p>The new window that pops up allows us to select any image that is currently in our project. <a id="id152" class="indexterm"></a>However, since we want nothing to be in there select <span class="strong"><strong>None</strong></span>, the first option in the list.</p></li><li><p>The borders on the button images are much larger than those of the default buttons. So, we need to adjust the <span class="strong"><strong>Border</strong></span> attribute to accommodate them. Values of 15 for each side works well.</p></li><li><p>The text is also too small, so for the <span class="strong"><strong>Font Size</strong></span> attribute choose a value of 40. This will give us a large and easily readable text.</p></li><li><p>For the <span class="strong"><strong>Label</strong></span> element, we are only going to make two changes. First, the text is too small. So, it will also get a value of 40 for its font size. Second, we want the text to be centered in the GUI elements. That requires setting the alignment to middle center.</p><div class="mediaobject"><img src="/graphics/9781849692014/graphics/2014OT_02_07.png.jpg" /></div></li><li><p>Play the game now. It is already looking better or at least different. However, it is a little difficult to tell at a glance who controls which square. To fix this we are going to create two custom GUI Styles. To do this, expand the <span class="strong"><strong>Custom Styles</strong></span> <a id="id153" class="indexterm"></a>attribute of our <code class="literal">GameSkin</code> in the <span class="strong"><strong>Inspector</strong></span> window. By default, one blank style is already in there. We are going to need two, but don't change the quantity just yet.</p></li><li><p>Expand the custom GUI Style, by default called <code class="literal">Element 0</code>.</p></li><li><p>On clicking to the right of the <span class="strong"><strong>Name</strong></span> attribute, more or less in the middle of the <span class="strong"><strong>Inspector</strong></span> window, will allow us to rename the style. The name is very important. Whatever we call it here we need to call it exactly the same in code or it won't be used. Give it the name <code class="literal">XSquare</code> because it will be used to mark which squares are controlled by the X player.</p></li><li><p>Inside of the <span class="strong"><strong>Normal</strong></span> state, add the <span class="strong"><strong>XNormal</strong></span> image to the <span class="strong"><strong>Background</strong></span> attribute. The <span class="strong"><strong>Text Color</strong></span> attribute can be left as black. We also need to adjust the font size and alignment properties to the same as we did for the <span class="strong"><strong>Label</strong></span> element. So, set them to <span class="strong"><strong>40</strong></span> and <span class="strong"><strong>MiddleCenter</strong></span> respectively.</p></li><li><p>Now that we have created the first style, creating the second becomes fast and easy. Collapse the <span class="strong"><strong>XSquare</strong></span> style.</p></li><li><p>Set the size of the <span class="strong"><strong>Custom Styles</strong></span> attribute to <span class="strong"><strong>2</strong></span>. When increasing the size of arrays in the Unity<a id="id154" class="indexterm"></a> Editor, Unity duplicates whatever was the last item in the array to each of the new slots. So, we should now have two <code class="literal">XSquare</code> GUI Styles.</p></li><li><p>Expand the second GUI Style and change its name to <code class="literal">Osquare</code>.</p></li><li><p>Also, replace the <code class="literal">XNormal</code> <span class="strong"><strong>Background</strong></span> image with the <code class="literal">ONormal</code> image.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip09"></a>Tip</h3><p>If you are having trouble in dragging-and-dropping in the <span class="strong"><strong>Inspector</strong></span> window, the <code class="literal">GameSkin</code> keeps losing focus perhaps; there is a lock at the top of the <span class="strong"><strong>Inspector</strong></span> window. Clicking on that will stop the window from changing to anything else when a new object is selected. Clicking it again will toggle off this feature.</p></div></li><li><p>Just because we have our spiffy new custom GUI Styles, doesn't mean they will work automatically. But, just a little bit of coding will make them work. Inside our <code class="literal">DrawGameBoard</code> function of the <code class="literal">TicTacToeControl</code> script, we need to change the line that draws our label by adding a little bit to the end of it. The addition of a second string will tell the GUI system to look for a specific GUI Style. A little bit earlier in the function, we figure out who owns the square, is it X or O. By adding this to <code class="literal">Square</code> we create the names of our two custom GUI Styles, <code class="literal">XSquare</code> and <code class="literal">OSquare</code>.</p><div class="informalexample"><pre class="programlisting">else GUI.Label(square, owner, owner + "Square");</pre></div></li><li><p>If you play the game now, you will see that when a player claims control of a square, our custom styles appear.</p><div class="mediaobject"><img src="/graphics/9781849692014/graphics/2014OT_02_08.png.jpg" /></div></li><li><p>There is one<a id="id155" class="indexterm"></a> more thing to do to change the look of our Tic-tac-toe game. Do you remember the title image that was created and for which we added a variable? Now is the time to place that. Inside of <code class="literal">TicTacToeControl</code> go to the <code class="literal">DrawOpening</code> function. To draw our image, we need to replace the call to <code class="literal">GUI.Label</code> with a call to <code class="literal">GUI.DrawTexture</code>. Instead of using GUI Styles, this function simply draws an image to the screen. It uses a <code class="literal">Rect</code> class, just as with all of our <span class="strong"><strong>Buttons</strong></span> and <span class="strong"><strong>Labels</strong></span>, to define a size and position. The image is, by default, stretched to fill the whole <code class="literal">Rect</code> class. For now, this suits us just fine.</p><div class="informalexample"><pre class="programlisting">GUI.DrawTexture(titleRect, titleImage);</pre></div></li><li><p>We can fix the stretching by updating the previous line of code, where we defined the <code class="literal">Rect</code> class for our title to accommodate. As you can see by the following code snippet, we use the width and height of <code class="literal">titleImage</code> to determine the width and height of <code class="literal">titleRect</code>. The <code class="literal">Rect</code> class now automatically determines how large it should be based on the size of our title image. If the <code class="literal">Rect</code> class is of the same size and shape as the image, it won't be stretched. In addition to that, because of the way we defined the <code class="literal">Rect</code> class for our <span class="strong"><strong>New Game</strong></span> button<a id="id156" class="indexterm"></a>, it will still be directly under and just as wide as our title image.</p><div class="informalexample"><pre class="programlisting">Rect titleRect = new Rect(0, 0, titleImage.width, titleImage.height);</pre></div></li><li><p>That is all there for<a id="id157" class="indexterm"></a> styling our Tic-tac-toe game. Click on the <span class="strong"><strong>Play</strong></span> button and take a look at all your hard work.</p><div class="mediaobject"><img src="/graphics/9781849692014/graphics/2014OT_02_09.png.jpg" /></div></li></ol></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec18"></a>
<span class="emphasis"><em>What just happened?</em></span>
</h3></div></div></div><p>We made our Tic-tac-toe game look great, or at least not like the defaults. We achieved this through the use of a handful of images and some custom GUI Skins and GUI Styles. With the addition of a special function for drawing textures on screen, we also add a unique title image to our opening screen.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec19"></a>Have a go hero – backgrounds</h3></div></div></div><p>Your challenge here is to make a background image and draw it behind the game. It also has to cover the whole of the screen. The default blue is great, but we could do so much better. As a note, whichever GUI element was drawn last is drawn on top, so think carefully about where<a id="id158" class="indexterm"></a> to call the function to have the image drawn in the background. Also, since stretching is only good for exercising and rubber bands, take a look at also passing the function a <code class="literal">ScaleMode</code>, which is a special value type that Unity uses to determine how images should stretch. Look in the scripting reference or search online to find more information about it.</p></div></div>