<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec53"></a>Time for action – creating the target</h2></div></div><hr /></div><p>We have all the pieces; the<a id="id273" class="indexterm"></a> next step is to put them together.</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Start by dragging the <span class="strong"><strong>Target</strong></span> model from the <span class="strong"><strong>Project</strong></span> window to the <span class="strong"><strong>Hierarchy</strong></span> window. This creates a new instance of the <code class="literal">target</code> object.</p></li><li><p>By selecting the new <code class="literal">target</code> object, we can see that it already has an <code class="literal">Animator</code> component attached; we just need to add a reference to <code class="literal">AnimatorController</code> that we created. Do this by dragging <code class="literal">TargetController</code> from the <span class="strong"><strong>Project</strong></span> window and dropping it on the Animator component's <span class="strong"><strong>Controller</strong></span> field, just as with all the other object references we have set up so far.</p></li><li><p>Also, we need to add the <code class="literal">Target</code> script to the object and connect a reference to the <code class="literal">Animator</code> component in its relevant field.</p></li><li><p>The last thing to do to the target object is to add a collider to actually receive our cannon shots. Unfortunately, because the <code class="literal">target</code> object uses bones and a rig to animate, it is not as simple as adding a collider directly to the mesh we will be shooting at. Instead, we need to create a new empty <code class="literal">GameObject</code>.</p></li><li><p>Rename it <code class="literal">TargetCollider</code>, and make it a child of the target's <code class="literal">Bone_Target</code> bone.</p></li><li><p>Add a <code class="literal">MeshCollider</code> component<a id="id274" class="indexterm"></a> to the new <code class="literal">GameObject</code>.</p></li><li><p>Now, we need to provide it with some mesh data. Find the <code class="literal">Target</code> mesh data in the <span class="strong"><strong>Project</strong></span> window, underneath the <span class="strong"><strong>Target</strong></span> model. Drag it to the <span class="strong"><strong>Mesh</strong></span> value of the <code class="literal">MeshCollider</code> component. This causes a green cylinder to appear in the <span class="strong"><strong>Scene</strong></span> view. This is our collision, but it is actually not on the target.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip21"></a>Tip</h3><p>The many objects in the <span class="strong"><strong>Project</strong></span> window can be easily told apart by the little symbol that sits next to each. The symbol for a mesh is a gray and blue grid.</p><div class="mediaobject"><img src="/graphics/9781849692014/graphics/1.jpg" /></div></div></li><li><p>Use the <span class="strong"><strong>Transform</strong></span> component to set the GameObject's position to <code class="literal">4</code> for the <span class="strong"><strong>X</strong></span> value and <code class="literal">0</code> for both <span class="strong"><strong>Y</strong></span> and <span class="strong"><strong>Z</strong></span>. The rotation needs to be changed to <code class="literal">0</code> for <span class="strong"><strong>X</strong></span>, <code class="literal">-90</code> for <span class="strong"><strong>Y</strong></span> and <code class="literal">90</code> for <span class="strong"><strong>Z</strong></span>.</p></li><li><p>As we made the changes, you probably noticed that the font of everything that was new or changed became bold. This is to indicate that something is different with this prefab instance when compared to the original. Remember, models are essentially prefabs; their problem is that we cannot directly make changes such as adding scripts. To make this target into a new prefab, simply drag it from the <span class="strong"><strong>Hierarchy</strong></span> window and drop it on the <code class="literal">Prefabs</code> folder in the <span class="strong"><strong>Project</strong></span> window.</p></li><li><p>With this spiffy new prefab created, populate the city with it.</p></li><li><p>In placing all of these targets, you probably noticed that they are a little large. Instead of editing each target individually or even all of them as a group, we only have to make a change to the original prefab. Select the <code class="literal">Target</code> prefab in the <span class="strong"><strong>Project</strong></span> window. The <span class="strong"><strong>Inspector</strong></span> window displays the same information for<a id="id275" class="indexterm"></a> a root prefab object as it does for any other object in the scene. With our prefab selected, half the scale and all of the instances already in the scene will automatically be updated to match. We can also make changes to the min and max idle times and have it affect the whole scene.</p></li></ol></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec43"></a>
<span class="emphasis"><em>What just happened?</em></span>
</h3></div></div></div><p>We just finished creating the targets for our tank. By making use of Unity's prefab system, we are also able to duplicate the target throughout our game and easily make changes that affect them all.</p><p>If you wanted one of the targets to be larger than all of the others, you could change it in the scene. Any changes made to a prefab instance are saved, and they take precedence over changes made to the root prefab object. Also, when looking at an instance in the <span class="strong"><strong>Inspector</strong></span> window, there will be three new buttons at the top of the window. The <span class="strong"><strong>Select</strong></span> button selects the root prefab object in the <span class="strong"><strong>Project</strong></span> window. <span class="strong"><strong>Revert</strong></span> will remove any unique changes made to this instance, whereas the <span class="strong"><strong>Apply</strong></span> button updates the root object with all the changes that were made in this instance.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec44"></a>Have a go hero – more targets</h3></div></div></div><p>Using all that you have learned about animations and state machines, your challenge here is to create a second type of target. Play around with different movements and behaviors. Perhaps, create one that transitions from waving around to standing still.</p></div></div>