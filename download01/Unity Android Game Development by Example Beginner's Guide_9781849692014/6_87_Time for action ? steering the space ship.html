<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch06lvl1sec88"></a>Time for action â€“ steering the space ship</h2></div></div><hr /></div><p>To steer our ship, we will need to create a single script and apply it to our ship:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>To start this off, create a new script and name it <code class="literal">TiltSteering</code>.</p></li><li><p>As with all of our <a id="id415" class="indexterm"></a>other scripts, we will begin this one with a few variables. The first two variables control the speed with which the ship will rotate as the device is tilted. The second two are going to be used to limit the rotation of the ship. These will determine how tight a circle the player's ship can turn in.</p><div class="informalexample"><pre class="programlisting">public float horizRotateSpeed = 7f;
public float vertRotateSpeed = 3f;

public float horizMax = 60f;
public float vertMax = 45f;</pre></div></li><li><p>Next, we will make use of the <code class="literal">Update</code> function. We start out by creating a variable to store the ship's current rotation. Next, we have to adjust the rotation. When working with Euler rotations, Unity adjusts values to be between zero and 360. This way, the values are never negative. Anything below zero simply wraps around and starts counting down from 360; anything above 360 wraps back to start counting up from zero again. We need the negative values. So, if the parts of the rotation are above 180, we subtract 360 to determine their negative values. Also, we are not making adjustments to the z component because the ship will not be rotating around its forward axis.</p><div class="informalexample"><pre class="programlisting">public void Update() {
  Vector3 rotation = transform.eulerAngles;

  if(rotation.y &gt; 180f) rotation.y -= 360f;
  if(rotation.x &gt; 180f) rotation.x -= 360f;</pre></div></li><li><p>Next, we apply the accelerometer measurement. When the device is held horizontally, with the home button on the right and the screen towards the user, the x component holds the rotation of the device while it is facing the user. The z component holds the rotation of the screen being tilted up and down. The components are multiplied by their respective speeds and are added to the rotation. The y rotation controls pointing left and right while the x component controls pointing up and down. However, the z acceleration is the opposite of how the ship should rotate, so we take the negative.</p><div class="informalexample"><pre class="programlisting">rotation.y += Input.acceleration.x * horizRotateSpeed;
rotation.x += -Input.acceleration.z * vertRotateSpeed;</pre></div></li><li><p>After the acceleration is applied, we need to limit the rotations so that the ship is not rotated too far. We use the <code class="literal">Mathf.Clamp</code> function to limit the rotation components between the negative of the max and the max of the relevant values.</p><div class="informalexample"><pre class="programlisting">rotation.y = Mathf.Clamp(rotation.y, -horizMax, horizMax);
rotation.x = Mathf.Clamp(rotation.x, -vertMax, vertMax);</pre></div></li><li><p>Finally, we apply the rotation to the ship's transform and close off the function for the script.</p><div class="informalexample"><pre class="programlisting">  transform.eulerAngles = rotation;
}</pre></div></li><li><p>In order to <a id="id416" class="indexterm"></a>make use of our new script, we need to do some setup for the player's ship. Start by creating an empty <span class="strong"><strong>GameObject</strong></span> and setting its position to zero. Rename it to <code class="literal">PlayerShipPivot</code>. This will allow us to control the movement and appearance of the player's ship independently.</p></li><li><p>Drag your <code class="literal">PlayerShip</code> model from the <span class="strong"><strong>Project</strong></span> window and drop it on the pivot point we just created. Be sure to center your ship on the point and rotate it to face forward along the z axis.</p></li><li><p>You can now add the script to the pivot point.</p></li><li><p>This is the point when it is especially important to have Unity Remote. With your device attached and Unity Remote running, you can hold it up and steer the ship. Feel free to adjust the rotation speeds and limits until you find the settings that feel natural to control.</p></li><li><p>We will need to be able to see past the ship, so that we can later shoot at targets we are flying towards. Adjust the position of the camera so the ship is centered horizontally and a little below center.</p></li><li><p>The scene also needs to be slightly lit. The light in deep space tends to be very general, so we can get away with just adjusting the ambient light. Click on <span class="strong"><strong>Edit</strong></span> in the menu bar of Unity, and then click on <span class="strong"><strong>Render Settings</strong></span>. By setting the <span class="strong"><strong>Ambient Light</strong></span> to white, our scene will be bright enough to see everything.</p></li><li><p>Once all the settings are in place, be sure to save the scene. Name it <code class="literal">SpaceFighter</code>.</p><div class="mediaobject"><img src="/graphics/9781849692014/graphics/2014OT_06_01.jpg" /></div></li></ol></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec80"></a>
<span class="emphasis"><em>What just happened?</em></span>
</h3></div></div></div><p>We made use of the<a id="id417" class="indexterm"></a> accelerometer to provide steering control of a spaceship. By measuring how the player is tilting their device, we are able to rotate the ship accordingly. We did not make the ship actually move, but just rotated it in place. We will come to understand why in a little bit.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec81"></a>Making things move in space</h3></div></div></div><p>Your first instinct to make the ship move would be probably to just change the position of the ship. However, things get weird when objects are really far from the world origin. In programming, there are actually limits on the size of the number that a variable can hold. This limit causes the rendering system to begin failing when the vertex positions become too large, resulting in the model being distorted beyond recognition. Admittedly, we are talking about positional values in the hundreds of thousands and beyond. However, say the player were to just fly straight for a long time; eventually, they could reach this distance of distortion.</p><p>As a potential solution, we could force the player to turn, or stop their forward progress, or wrap their position so they continue flying from the opposite side of a finite space. However, it is so much more fun to fly through an infinite space. We can achieve this by leaving the player's ship in place and moving everything else around it. As a new space is entered, new enemies and objects can be spawned to fill the space. Old objects and enemies that are too far away can be destroyed by removing them where the player won't see. This would give the illusion of an infinite amount of space.</p></div></div>