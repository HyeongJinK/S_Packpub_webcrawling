<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch08lvl1sec119"></a>Understanding particle systems</h2></div></div><hr /></div><p>Particle systems add much to<a id="id560" class="indexterm"></a> the final look of a game. They can take the form of fire, magic waves, rain, or the great many other effects you can dream up. They are often hard to create well, but are well worth the effort. Keep in mind, especially when working with the mobile platform, that less is more. Larger particles are more effective than a great amount of particles. If your particle system ever contains thousands of particles in a small space or is duplicated on itself to increase the effect, you need to rethink the design and find a more efficient solution.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec131"></a>Particle system settings</h3></div></div></div><p>Every particle system contains <a id="id561" class="indexterm"></a>a large variety of components, each with its own settings. Most of the available settings have the option to be <span class="strong"><strong>Constant</strong></span>, <span class="strong"><strong>Curve</strong></span>, <span class="strong"><strong>Random</strong></span> <span class="strong"><strong>Between Two Constants</strong></span>, and <span class="strong"><strong>Random Between Two Curves</strong></span>. <span class="strong"><strong>Constant</strong></span> will be a specific value. <span class="strong"><strong>Curve</strong></span> will be a set value that changes along the curve over time. The two random settings select a random value between the respective value types. It may seem confusing at first but, as we work through them, they will become more understandable.</p><p>As you will be able to see in<a id="id562" class="indexterm"></a> the images and descriptions that follow, we will work through and gain an understanding of each piece of a particle system.</p><p>As you will see in the following screenshot, we will work through and gain an understanding of each piece of a particle system:</p><div class="mediaobject"><img src="/graphics/9781849692014/graphics/2014OT_08_04.png.jpg" /></div><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>The first portion, the<a id="id563" class="indexterm"></a> <span class="strong"><strong>Initial</strong></span> module, of the particle system holds all the settings used by every emitter in Unity.</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Duration</strong></span>: This is how long the emitter lasts. A looping system will repeat after this <a id="id564" class="indexterm"></a>amount of time. A non-looping system will stop emitting after this length of time.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Looping</strong></span>: This<a id="id565" class="indexterm"></a> checkbox dictates whether or not the system loops.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Prewarm</strong></span>: This checkbox, if checked, <a id="id566" class="indexterm"></a>will start a looping system as if it has already had a chance to loop for a while. This is useful in the case of<a id="id567" class="indexterm"></a> torches that should already be lit, not start when the player enters the room.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Start Delay</strong></span>: This will stop the<a id="id568" class="indexterm"></a> particle system from emitting for the given number of seconds when it is initially triggered.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Start Lifetime</strong></span>: This is the number<a id="id569" class="indexterm"></a> of seconds an individual particle begins with.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Start Speed</strong></span>: This is how <a id="id570" class="indexterm"></a>fast a particle will initially move when spawned.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Start Size</strong></span>: This dictates<a id="id571" class="indexterm"></a> how large a particle is when spawned. It is always better to use larger particles rather than more particles.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Start Rotation</strong></span>: This<a id="id572" class="indexterm"></a> will rotate the emitted particles.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Start Color</strong></span>: This is<a id="id573" class="indexterm"></a> the color tint of the particles when spawned.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Gravity Multiplier</strong></span>: This gives <a id="id574" class="indexterm"></a>the particles a greater or lesser amount of the gravity effect.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Inherit Velocity</strong></span>: This will cause<a id="id575" class="indexterm"></a> particles to gain a portion of their transform's momentum if it is moving.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Simulation Space</strong></span>: This determines <a id="id576" class="indexterm"></a>whether the particles will stay with the game object as it is moved (that is, local) or will remain where they are in the world.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Play On Awake</strong></span>: This checkbox, if checked, will cause the emitter to start emitting as<a id="id577" class="indexterm"></a> soon as it is spawned or the scene starts.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Max Particles</strong></span>: This limits the total number of particles that this system supports at a single time. This<a id="id578" class="indexterm"></a> value only comes into play if the rate particles are emitted or their life span is great enough to overbalance their rate of destruction.</p></li></ul></div><div class="mediaobject"><img src="/graphics/9781849692014/graphics/2014OT_08_05.png.jpg" /></div></li><li><p>The <span class="strong"><strong>Emission</strong></span> module<a id="id579" class="indexterm"></a> controls<a id="id580" class="indexterm"></a> how fast the particles are emitted.</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Rate</strong></span>: If set to <span class="strong"><strong>Time</strong></span>, this is the number of particles per second that are created. If set to <span class="strong"><strong>Distance</strong></span>, this is the <a id="id581" class="indexterm"></a>number of particles per unit of distance the system travels as it moves.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Bursts</strong></span>: This is only used when<a id="id582" class="indexterm"></a> the <span class="strong"><strong>Rate</strong></span> option is set to <span class="strong"><strong>Time</strong></span>. It allows you to set points in the system's timeline when a specific number of particles will be emitted.</p></li></ul></div><div class="mediaobject"><img src="/graphics/9781849692014/graphics/2014OT_08_06.png.jpg" /></div></li><li><p>The <span class="strong"><strong>Shape</strong></span> module controls <a id="id583" class="indexterm"></a>how the system emits particles.</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Shape</strong></span>: This dictates what form the<a id="id584" class="indexterm"></a> emission point will take. Each option comes with a few more value fields that determine its size.</p><p>
<span class="strong"><strong>Sphere</strong></span>: This is the point from which particles are emitted in all directions. <span class="strong"><strong>Radius</strong></span> determines<a id="id585" class="indexterm"></a> the size of the sphere. <span class="strong"><strong>Emit from Shell</strong></span> dictates whether the particles are emitted from the surface of the sphere or inside the volume.</p><p>
<span class="strong"><strong>Hemisphere</strong></span>: This is, <a id="id586" class="indexterm"></a>as the name suggests, half of a sphere. <span class="strong"><strong>Radius</strong></span> and <span class="strong"><strong>Emit from Shell</strong></span> work the same here as they do for <span class="strong"><strong>Sphere</strong></span>.</p><p>
<span class="strong"><strong>Cone</strong></span>: This emits particles in one direction. <span class="strong"><strong>Angle</strong></span> determines whether the shape is closer to a<a id="id587" class="indexterm"></a> cone or cylinder. <span class="strong"><strong>Radius</strong></span> dictates the size of the emission point of the shape. <span class="strong"><strong>Emit From</strong></span> will determine where the particles are emitted from. <span class="strong"><strong>Base</strong></span> emits from the base disc of the shape. <span class="strong"><strong>Base Shell</strong></span> emits from the base of the cone, but around the surface of the shape. <span class="strong"><strong>Volume</strong></span> will emit from anywhere inside the shape and <span class="strong"><strong>Volume Shell</strong></span> emits from the surface of the shape.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Box</strong></span>: This emits <a id="id588" class="indexterm"></a>particles from a cube-type shape. <span class="strong"><strong>Box X</strong></span>, <span class="strong"><strong>Box Y</strong></span>, and <span class="strong"><strong>Box Z</strong></span> determine<a id="id589" class="indexterm"></a> the size of the box.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Mesh</strong></span>: This allows you to select a <a id="id590" class="indexterm"></a>model to use as an emission point. All of the particles for the system will be emitted from the surface of the <span class="strong"><strong>Mesh</strong></span>.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Random Direction</strong></span>: This determines<a id="id591" class="indexterm"></a> whether a particle's direction is determined by the surface normal of the shape chosen, or if it is chosen at random.</p></li></ul></div><div class="mediaobject"><img src="/graphics/9781849692014/graphics/2014OT_08_07.png.jpg" /></div></li><li><p>The <span class="strong"><strong>Velocity over Lifetime</strong></span> module <a id="id592" class="indexterm"></a>allows you to control the momentum of the particles after they have been spawned.</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>X</strong></span>, <span class="strong"><strong>Y</strong></span>, and <span class="strong"><strong>Z</strong></span>: These define<a id="id593" class="indexterm"></a> the number of units per second along each axis of the particle's momentum</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Space</strong></span>: This dictates<a id="id594" class="indexterm"></a> whether the velocity is applied locally to the system's transform, or relative to the world</p></li></ul></div><div class="mediaobject"><img src="/graphics/9781849692014/graphics/2014OT_08_08.png.jpg" /></div></li><li><p>The <span class="strong"><strong>Limit Velocity over Lifetime</strong></span> module <a id="id595" class="indexterm"></a>dampens a particle's movement if it exceeds the specified value.</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Separate Axis</strong></span>: This allows<a id="id596" class="indexterm"></a> you to define a value unique to each axis and whether that value is local or relative to the world</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Speed</strong></span>: This is<a id="id597" class="indexterm"></a> how fast the particle has to be moving before the damp is<a id="id598" class="indexterm"></a> applied</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Dampen</strong></span>: This is the percentage<a id="id599" class="indexterm"></a> of speed to cut the particle by. It is a value between zero and one</p></li></ul></div><div class="mediaobject"><img src="/graphics/9781849692014/graphics/2014OT_08_09.png.jpg" /></div></li><li><p>The <span class="strong"><strong>Force over Lifetime</strong></span> module<a id="id600" class="indexterm"></a> adds a constant amount of movement to each particle over the course of its life.</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>X</strong></span>, <span class="strong"><strong>Y</strong></span>, and <span class="strong"><strong>Z</strong></span>: These define how <a id="id601" class="indexterm"></a>much force to apply along each axis</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Space</strong></span>: This dictates whether<a id="id602" class="indexterm"></a> the force is applied local to the system's transform or in the world space</p></li><li style="list-style-type: disc"><p>If <span class="strong"><strong>X</strong></span>, <span class="strong"><strong>Y</strong></span>, and <span class="strong"><strong>Z</strong></span> are random values, <span class="strong"><strong>Randomize</strong></span> will cause the amount of force to apply to be randomly picked each frame, resulting in a statistical averaging of the random values</p></li></ul></div><div class="mediaobject"><img src="/graphics/9781849692014/graphics/2014OT_08_10.png.jpg" /></div></li><li><p>The <span class="strong"><strong>Color over Lifetime</strong></span> module<a id="id603" class="indexterm"></a> allows you to <a id="id604" class="indexterm"></a>define a series of colors for the particle to transition through after it has been spawned.</p></li><li><p>The <span class="strong"><strong>Color by Speed</strong></span> module<a id="id605" class="indexterm"></a> causes<a id="id606" class="indexterm"></a> the particle to transition through the defined range of colors as its speed changes.</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Color</strong></span>: This is the set of colors to transition through</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Speed Range</strong></span>: This defines how fast the particle must be going to be at the minimum and maximum ends of the <span class="strong"><strong>Color</strong></span> range</p></li></ul></div><div class="mediaobject"><img src="/graphics/9781849692014/graphics/2014OT_08_11.png.jpg" /></div></li><li><p>The <a id="id607" class="indexterm"></a>
<span class="strong"><strong>Size over Lifetime</strong></span> module<a id="id608" class="indexterm"></a> changes the size of the particle over the course of its life.</p></li><li><p>The <a id="id609" class="indexterm"></a>
<span class="strong"><strong>Size by Speed</strong></span> module adjusts the size of each particle based on how fast it is going.</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Size</strong></span>: This is the adjustment that the particles transition through</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Speed Range</strong></span>: This defines the min and max values for each of the <span class="strong"><strong>Size</strong></span>
</p></li></ul></div><div class="mediaobject"><img src="/graphics/9781849692014/graphics/2014OT_08_12.png.jpg" /></div></li><li><p>The <a id="id610" class="indexterm"></a>
<span class="strong"><strong>Rotation over Lifetime</strong></span> module<a id="id611" class="indexterm"></a> rotates particles over time after they have been spawned.</p></li><li><p>The <span class="strong"><strong>Rotation by Speed</strong></span> module <a id="id612" class="indexterm"></a>rotates particles<a id="id613" class="indexterm"></a> more as they go faster.</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Angular Velocity</strong></span>: This is the number of rotations to apply</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Speed Range</strong></span>: This is the min and max range for the <span class="strong"><strong>Angular Velocity</strong></span> value if it is not set to <span class="strong"><strong>Constant</strong></span>
</p></li></ul></div><div class="mediaobject"><img src="/graphics/9781849692014/graphics/2014OT_08_13.png.jpg" /></div></li><li><p>The <span class="strong"><strong>External Forces</strong></span> module<a id="id614" class="indexterm"></a> multiplies the effect of Wind Zone<a id="id615" class="indexterm"></a> objects. Wind Zones<a id="id616" class="indexterm"></a> simulate the effects of wind on particle systems and Unity's trees.</p></li><li><p>The <span class="strong"><strong>Collision</strong></span> module allows <a id="id617" class="indexterm"></a>particles to collide and interact with the physical game world.</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>If set to <span class="strong"><strong>Planes</strong></span>, you <a id="id618" class="indexterm"></a>are able to define a number of flat surfaces for the particles to collide with. This is faster to process than World collisions.</p><p>
<span class="strong"><strong>Planes</strong></span>: This is a list of transforms that define the surfaces to collide with. Particles will only collide with the local, positive y side of the transform. Any particles on the other side of the point will be destroyed.</p><p>
<span class="strong"><strong>Visualization</strong></span>: This gives you the option to view the planes as a <span class="strong"><strong>Solid</strong></span> surface or a <span class="strong"><strong>Grid</strong></span> surface.</p><p>
<span class="strong"><strong>Scale Plane</strong></span>: This adjusts the size of the <span class="strong"><strong>Visualization</strong></span> option. It does not affect the actual size of the surface to collide with.</p><p>
<span class="strong"><strong>Particle Radius</strong></span>: This is used to define the size of the sphere used to calculate the particle's collision with the planes.</p></li><li style="list-style-type: disc"><p>If set to <span class="strong"><strong>World</strong></span>, the particles will collide with every collider in your scene. This can become a lot for the processor to handle.</p><p>
<span class="strong"><strong>Collides With</strong></span>: This defines a list of layers that will be collided with. Only colliders on layers that are checked in this list will be used for the collision calculation.</p><p>
<span class="strong"><strong>Collision Quality</strong></span>: This defines how precise the collision calculations are for this particle system. <span class="strong"><strong>High</strong></span> will calculate precisely for every single particle. <span class="strong"><strong>Medium</strong></span> will use an approximation and a limited number of new calculations each frame. <span class="strong"><strong>Low</strong></span> just calculates less often than <span class="strong"><strong>Medium</strong></span>.</p><p>If <span class="strong"><strong>Collision Quality</strong></span> is set to <span class="strong"><strong>Medium</strong></span> or <span class="strong"><strong>Low</strong></span>, <span class="strong"><strong>Voxel Size</strong></span> dictates how precise the system estimates the points of collision.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Dampen</strong></span>: This removes the<a id="id619" class="indexterm"></a> defined fraction amount of speed from the particle when it collides with a surface.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Bounce</strong></span>: This allows the particle to maintain the defined fraction of its speed, specifically along the normal of the surface that was hit.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Lifetime Loss</strong></span>: This is the <a id="id620" class="indexterm"></a>percentage of life. When the particle collides, this percentage of life is removed from the particle. When the particle's life drops to zero over time, or through collision, it is removed.</p></li><li style="list-style-type: disc"><p>If, after collision, the particle's speed is below the <span class="strong"><strong>Min Kill Speed</strong></span> value, it is destroyed.</p></li><li style="list-style-type: disc"><p>If the <span class="strong"><strong>Send Collision Messages</strong></span> checkbox is checked, scripts attached to the particle system and the object that was collided with will be alerted every frame that the collision took place. Only one message is sent per frame, not per particle.</p></li></ul></div><div class="mediaobject"><img src="/graphics/9781849692014/graphics/2014OT_08_14.png.jpg" /></div></li><li><p>The <span class="strong"><strong>Sub Emitters</strong></span> module <a id="id621" class="indexterm"></a>allows additional particle systems to be spawned at points in the life of each particle of this system.</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Any particle <a id="id622" class="indexterm"></a>systems in the <span class="strong"><strong>Birth</strong></span> list will be spawned and follow the particle when it is first created. This could be used to create a fireball or smoke trail.</p></li><li style="list-style-type: disc"><p>The <span class="strong"><strong>Collision</strong></span> list spawns particle systems when the particle hits something. This could be used for rain drop splashes.</p></li><li style="list-style-type: disc"><p>The <span class="strong"><strong>Death</strong></span> list spawns particles when the particle is destroyed. It could be used to spawn the firework explosion.</p></li></ul></div><div class="mediaobject"><img src="/graphics/9781849692014/graphics/2014OT_08_15.png.jpg" /></div></li><li><p>The <span class="strong"><strong>Texture Sheet Animation</strong></span> module <a id="id623" class="indexterm"></a>causes the particle to flip through a number of particles over the course of its life. The texture used is defined in the <span class="strong"><strong>Renderer</strong></span><a id="id624" class="indexterm"></a> module.</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Tiles</strong></span>: This defines<a id="id625" class="indexterm"></a> the number of rows and columns in the sheet. This will determine the total number of frames available.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Animation</strong></span>: This gives you the options of <span class="strong"><strong>Whole Sheet</strong></span> and <span class="strong"><strong>Single Row</strong></span>. If set to <span class="strong"><strong>Single Row</strong></span>, the row used can either be chosen at random or specified using the <span class="strong"><strong>Random Row</strong></span> checkbox and <span class="strong"><strong>Row</strong></span> value.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Frame over Time</strong></span>: This defines how the particle transitions between frames. If set to <span class="strong"><strong>Constant</strong></span>, the system will only use a single frame.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Cycles</strong></span>: This is the number of times the particle will loop through the animation over the course of its life.</p></li></ul></div><div class="mediaobject"><img src="/graphics/9781849692014/graphics/2014OT_08_16.png.jpg" /></div></li><li><p>The<a id="id626" class="indexterm"></a> <span class="strong"><strong>Renderer</strong></span> module <a id="id627" class="indexterm"></a>dictates<a id="id628" class="indexterm"></a> how the particle is drawn on the screen.</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Render Mode</strong></span>: This defines which method a particle should use to orient itself in the game world.</p><p>
<span class="strong"><strong>Billboard</strong></span>: This will always face directly at the camera.</p><p>
<span class="strong"><strong>Stretched Billboard</strong></span>: This will face particles at the camera, but stretch them based on the speed of the camera, the particle's speed, or by a specific value.</p><p>
<span class="strong"><strong>Horizontal Billboard</strong></span>: This is flat on the XZ plane of the game world.</p><p>
<span class="strong"><strong>Vertical Billboard</strong></span>: This will always face the player, but will always stay straight along the y axis.</p><p>If set to <span class="strong"><strong>Mesh</strong></span>, you can define a model to be used as a particle rather than a flat plane.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Normal Direction</strong></span>: This is used for the lighting and shading of the particles by adjusting the normal of each plane. A value of <span class="strong"><strong>1</strong></span> points the normals directly at the camera while a value of <span class="strong"><strong>0</strong></span> points them towards the center of the screen.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Material</strong></span>: This defines the material used to render the particles.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Sort Mode</strong></span>: This dictates what order the particles should be drawn in, by distance or age.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Sorting Fudge</strong></span>: This causes particle systems to be drawn earlier than normal. The higher the value, the earlier it will be drawn on the screen. This affects whether the system appears in front of or behind other particle systems or partially transparent objects.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Cast Shadows</strong></span>: This determines if the particles will block light.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Receive Shadows</strong></span>: This determines if the particles are affected by the shadows cast by other objects.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Max Particle Size</strong></span>: This is the total amount of screen space a single particle is allowed to fill. No matter what the real size of the particle is, it will <a id="id629" class="indexterm"></a>never fill more than this space of the screen.</p></li></ul></div></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec132"></a>Creating engine trails</h3></div></div></div><p>To enforce the player's impression<a id="id630" class="indexterm"></a> that their ship is moving, we need to create some trails for the ship's engines. This exhaust will trail out as if the ship is moving even though it is not. By making the particle systems part of the group of objects that make up the ship, the engine trails will move and leave particles as one would expect them to.</p></div></div>