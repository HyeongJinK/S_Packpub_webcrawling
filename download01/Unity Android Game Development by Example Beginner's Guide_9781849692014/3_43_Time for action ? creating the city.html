<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec47"></a>Time for action – creating the city</h2></div></div><hr /></div><p>Creating a city gives our tanks and our players a good place to play.</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>For the purposes of this section, no part of the provided city was given a specific texture. It was just unwrapped and some tile-able textures were created. So, we need to start by importing the city and the textures to the <code class="literal">Environment</code> folder. Do it the same way that we imported the tank.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip14"></a>Tip</h3><p>The files are <code class="literal">TankBattleCity.blend</code>, <code class="literal">brick_001.png</code>, <code class="literal">brick_002.png</code>, <code class="literal">brick_003.png</code>, <code class="literal">dirt_001.png</code>, <code class="literal">dirt_003.png</code>, <code class="literal">pebbles_001.png</code>, <code class="literal">rocks_001.png</code>, <code class="literal">rubble_001.png</code>, and <code class="literal">water_002.png</code>.</p></div></li><li><p>Because the city was unwrapped, Unity still created a single material for it. However, textures were never applied in any modeling program. So, the material is plain white. We have several extra textures, so we are going to need more than that one material for the whole city. Creating a new material is simple; it is done just as with creating a new script. Right-click on the <code class="literal">Materials</code> folder inside the <code class="literal">Environment</code> folder, and select <span class="strong"><strong>Create</strong></span> followed by <span class="strong"><strong>Material</strong></span>, which is about halfway down the menu.</p></li><li><p>This will create a new material in the folder and immediately allow us to name it. Name the material, <code class="literal">Pebbles</code>.</p><div class="mediaobject"><img src="/graphics/9781849692014/graphics/2014OT_03_05.png.jpg" /></div></li><li><p>With your new material selected, take a look at the <span class="strong"><strong>Inspector</strong></span> window. When we have a<a id="id233" class="indexterm"></a> material selected, we get the options needed to change its look.</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>At the very top of the <span class="strong"><strong>Inspector</strong></span> window, we have the material's name, followed by a <span class="strong"><strong>Shader</strong></span> drop-down list. A shader is essentially a short script that tells the graphics card how to draw something on screen. You will use the <span class="strong"><strong>Diffuse</strong></span> shader most often, so it is always selected by default. This is where you would select from your Bump-mapped shaders, specular, transparent, and a plethora of other options. If you were to create some custom shaders, they would also be found here.</p></li><li style="list-style-type: disc"><p>The next little block will only be visible if Unity has something to warn you about. In this case, it is advising us to use a different shader for performance reasons. However, that is a discussion for <a class="link" href="#" linkend="ch09">Chapter 9</a>, <span class="emphasis"><em>Optimization</em></span>, so we will ignore it for now.</p></li><li style="list-style-type: disc"><p>Then, we have the <span class="strong"><strong>Main Color</strong></span> value with a colored square next to it. By clicking on that square, the <span class="strong"><strong>Color Picker</strong></span> window will open and let us select any color we want. This color value changes the tinting on the texture being drawn by the material. Because we don't have a texture yet, you will notice that it just changes the color of the ball in the <span class="strong"><strong>Preview</strong></span> window.</p></li><li style="list-style-type: disc"><p>The <span class="strong"><strong>Base (RGB)</strong></span> value is under the <span class="strong"><strong>Main Color</strong></span> value. This is the texture. The box on the right, with <span class="strong"><strong>None (Texture)</strong></span> and a <span class="strong"><strong>Select</strong></span> button<a id="id234" class="indexterm"></a> in it, is a preview box for the texture being used by this material. To add a texture to the material, either drag one to this box from the <span class="strong"><strong>Project</strong></span> window, or click on the <span class="strong"><strong>Select</strong></span> button. The button opens a new window that holds the thumbnails of every texture that is currently in the project. You can scroll through or use the search bar to find the texture that you need and double-click to select it.</p></li><li style="list-style-type: disc"><p>To the left of the box, we have our <span class="strong"><strong>Tiling</strong></span> and <span class="strong"><strong>Offset</strong></span> controls. The <span class="strong"><strong>Tiling</strong></span> values dictate how many times the texture will repeat across the normalized UV space in the x and y directions. The <span class="strong"><strong>Offset</strong></span> is how far off zero the texture starts in the normalized UV space. You can select the number fields and input values to modify them. Doing so, and paying attention to the <span class="strong"><strong>Preview</strong></span> window below, you will see how they change the texture. Tiling textures are most commonly used for large surfaces where the texture is similar enough across the surface that it just repeats.</p></li><li style="list-style-type: disc"><p>Our <span class="strong"><strong>Preview</strong></span> window is at the bottom of the <span class="strong"><strong>Inspector</strong></span> window. It functions just as the one we saw for our tank mesh. What makes this one special, though, is the two buttons in the top-right corner of this window. The one to the left scrolls through a set of preview shapes. By clicking on it you'll be able to see how the texture looks on a sphere, cube, cylinder, or torus. The other button toggles between the two types of lighting.</p></li></ul></div></li><li><p>Add the <code class="literal">pebbles_001</code> texture to this material by dragging it from the <span class="strong"><strong>Project</strong></span> window and dropping it on the <span class="strong"><strong>Base (RGB)</strong></span> preview box.</p></li><li><p>Use values of 30 for the material's <span class="strong"><strong>Tiling</strong></span> and a light tan color for the <span class="strong"><strong>Main Color</strong></span> option, so that the texture can be sized right and more pleasing to look at.</p></li><li><p>To see our new material in action, first drag your city to the <span class="strong"><strong>Hierarchy</strong></span> window, so that it is added to the <span class="strong"><strong>Scene</strong></span> view. By right-clicking-and-dragging, you can look around in your <span class="strong"><strong>Scene</strong></span> view. Look over at the streets of the city.</p></li><li><p>Now, drag your new material from the <span class="strong"><strong>Project</strong></span> window into your <span class="strong"><strong>Scene</strong></span> view. While<a id="id235" class="indexterm"></a> dragging the material around, you should see the meshes change to appear as if they are using the material. Once you are over the streets, let go of your left mouse button. The material is now applied to the mesh.</p></li><li><p>However, we currently have a whole quarter of a city to texture. So, create more materials and use the remaining textures on the rest of the city. Create a new material for each extra texture, plus four extra of <code class="literal">brick_002</code>, so, we can have different colors for each building height.</p></li><li><p>Apply your new materials to the city, either by comparison with the following figure or through your own artistic whim:</p><div class="mediaobject"><img src="/graphics/9781849692014/graphics/2014OT_03_06.png.jpg" /></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip15"></a>Tip</h3><p>When trying<a id="id236" class="indexterm"></a> to get to the center fountain, if your tank is in the way, select your tank in the <span class="strong"><strong>Hierarchy</strong></span> window and use the <span class="strong"><strong>Gizmo</strong></span> option in the <span class="strong"><strong>Scene</strong></span> view to drag it out of the way.</p></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>If you were to try to play the game now, you might notice that we have a couple of problems. For starters, we only have a quarter of a city; perhaps you have more if you made your own city. There is still no collision on the city, so we fall right through it when moving. Also, the tank is a little large for this city, and it is too dark to see where we are going. Turning on the lights is the quickest solution to fix this problem.</p></li></ul></div></li><li><p>At the top of the Unity Editor, select <span class="strong"><strong>GameObject</strong></span>, followed by <span class="strong"><strong>Create Other</strong></span>, and finally <span class="strong"><strong>Directional Light</strong></span>. This creates an object that emits light in a single direction. The next chapter explains lights and how to control them, so the details will be left for later.</p></li><li><p>Changing the size of our tank is also pretty simple. Select it in the <span class="strong"><strong>Hierarchy</strong></span> window and look for the <span class="strong"><strong>Scale</strong></span> label in our <span class="strong"><strong>Transform</strong></span> component. Changing the <span class="strong"><strong>X</strong></span>, <span class="strong"><strong>Y</strong></span>, and <span class="strong"><strong>Z</strong></span> values under <span class="strong"><strong>Scale</strong></span> will change the size of our tank. Be sure to change them evenly or some weirdness will occur when we start rotating the tank. Values of 0.5 make the tank small enough to fit through the <a id="id237" class="indexterm"></a>small streets.</p></li><li><p>Next up is collision for the city. For the most part, we will be able to get away with simple collision shapes that are faster to process. However, the circular center of the city will require something special. Start by double-clicking on the walls of one of the square buildings in the <span class="strong"><strong>Scene</strong></span> view.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip16"></a>Tip</h3><p>When dealing with prefabs, which the city still is, clicking on any object that makes up the prefab will select the root prefab object. Once a prefab is selected, clicking on any part of it will select that individual piece. Because this behavior is different from non-prefab objects, you need to be mindful of it when selecting objects in the <span class="strong"><strong>Scene</strong></span> view.</p></div></li><li><p>With a set of walls selected, go to the top of the Unity Editor and select <span class="strong"><strong>Component</strong></span>, followed by <span class="strong"><strong>Physics</strong></span>, and finally <span class="strong"><strong>Box Collider</strong></span>.</p></li><li><p>Because we are adding the collider to a specific mesh, Unity does its best to automatically fit the collider to the shape. For us, this means that the new <code class="literal">BoxCollider</code> component is already sized to fit the building. Continue by adding <code class="literal">BoxColliders</code> to the rest of the square buildings and the outer wall. Our streets are essentially just a plain, so a <code class="literal">BoxCollider</code> component will work just fine for them as well. Though pointed at the top, the obelisk in the center of the fountain is essentially just a box; so, another <code class="literal">BoxCollider</code> will suit it fine.</p></li><li><p>We have one last building and the fountain ring to deal with. These are not boxes, spheres, or capsules. So, our simple colliders will not work. Select the walls of the last building, the one next to the center fountain. A few options down from where you were selecting <span class="strong"><strong>Box Collider</strong></span>, there is a <span class="strong"><strong>Mesh Collider</strong></span> option. This will add a <code class="literal">MeshCollider</code> component to our object. This component does what its name suggests; it takes a mesh and turns it into a collider. By adding it to a specific mesh, the <code class="literal">MeshCollider</code> component automatically selects that mesh to be collideable. You should also add <code class="literal">MeshColliders</code> to the short ledge around the center building and the ring wall around the fountain.</p></li><li><p>The last problem to solve is the duplication of our city quarter. Start by selecting the root <code class="literal">city</code> object in your hierarchy, <code class="literal">TankBattleCity</code>, and remove the <code class="literal">Animator</code> component from it. The city is not going to animate, so it does not need this component.</p></li><li><p>Now, right-click on the city in the <span class="strong"><strong>Hierarchy</strong></span> window and select <span class="strong"><strong>Duplicate</strong></span>. This creates a copy of the object that was selected.</p></li><li><p>Duplicate the city quarter twice more and we will have the four parts of our city. The only problem is that they are all in the exact same position.</p></li><li><p>We need to rotate three of the pieces to make a full city. Select one and set the <span class="strong"><strong>Y Rotation</strong></span> value in the <span class="strong"><strong>Transform</strong></span> component to <code class="literal">90</code>. This will rotate it 90 degrees around the vertical axis and give us half of a city.</p></li><li><p>We will complete<a id="id238" class="indexterm"></a> the city by setting one of the remaining pieces to <code class="literal">180</code> and another to <code class="literal">270</code>.</p></li><li><p>That leaves one last thing to do. We have four center fountains. In three of the four city pieces, select the three meshes that make up the center fountain (the <code class="literal">Obelisk</code>, <code class="literal">Wall</code>, and <code class="literal">Water</code>) and click on the <span class="emphasis"><em>Delete</em></span> key on your keyboard. Confirm that you want to break the prefab connection each time, and our city will be complete.</p><div class="mediaobject"><img src="/graphics/9781849692014/graphics/2014OT_03_07.png.jpg" /></div></li></ol></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec33"></a>
<span class="emphasis"><em>What just happened?</em></span>
</h3></div></div></div><p>Try out the game now. We can drive around the city and rotate our turret. It is so much fun. We created materials<a id="id239" class="indexterm"></a> and textured the city. After making it possible to collide with the buildings and road, we duplicated the section so that we could have a whole city.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec34"></a>Have a go hero – decorating the city</h3></div></div></div><p>Now that you have all the skills needed to import meshes and create materials, the challenge is to decorate the city. Create some rubble and tank traps and practice importing them to Unity and setting them up in the scene. If you really want to go above and beyond, try your hand at creating your own city. Choose something from the world, or choose something from your imagination. Once it is created, we can release the tanks in it.</p></div></div>