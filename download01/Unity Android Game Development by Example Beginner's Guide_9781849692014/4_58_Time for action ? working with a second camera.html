<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec61"></a>Time for action – working with a second camera</h2></div></div><hr /></div><p>If you were to play the game now, it would <a id="id307" class="indexterm"></a>still look no different. This is because the targets do not yet make the call to create the indicator slices. We will also be adding that second camera in this section as we finish off the target indicator.</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Start by opening the <code class="literal">Target</code> script and adding the following line of code to the end of the <code class="literal">Awake</code> function. This line tells the <code class="literal">IndicatorControl</code> script to create a new indicator slice for this target.</p><div class="informalexample"><pre class="programlisting">IndicatorControl.CreateSlice(transform);</pre></div><div class="mediaobject"><img src="/graphics/9781849692014/graphics/2014OT_04_03.jpg" /></div></li><li><p>On playing the game now, you can see the indicator in action. However, it is probably too large and<a id="id308" class="indexterm"></a> certainly appears inside the tank. A bad solution would be to move the <code class="literal">IndicatorControl</code> object until the whole thing appears above the tank. However, when explosions occur and things start flying through the air, they will obscure the target indicator all over again. A better solution is to add a second camera. Do so now by selecting <span class="strong"><strong>GameObject</strong></span> from the top of the Unity Editor, followed by <span class="strong"><strong>Create Other</strong></span>, and finally <span class="strong"><strong>Camera</strong></span>.</p></li><li><p>Additionally, make the camera a child of <code class="literal">Main Camera</code>. Be sure to set the new camera's position and <a id="id309" class="indexterm"></a>rotation values to zero.</p></li><li><p>By default, every camera in Unity is given a variety of components: <span class="strong"><strong>Camera</strong></span>, <span class="strong"><strong>Flare Layer</strong></span>, <span class="strong"><strong>GUI Layer</strong></span>, and <span class="strong"><strong>Audio Listener</strong></span>. Besides the <span class="strong"><strong>Camera</strong></span> component, the others are generally unimportant to every other camera, and there should only be one <span class="strong"><strong>Audio Listener</strong></span> component in the whole of the scene. Remove the excess components from the camera, leaving just the <span class="strong"><strong>Camera</strong></span> component.</p></li><li><p>Before we do anything else with the camera, we need to change the layer that the <code class="literal">IndicatorSlice</code> prefab is on. Layers are used to cause selective interaction between objects. They are used primarily for physics and rendering. First select the prefab in the <span class="strong"><strong>Project</strong></span> window.</p></li><li><p>At the top of the <span class="strong"><strong>Inspector</strong></span> window is the <span class="strong"><strong>Layer</strong></span> label with a drop-down list that reads <span class="strong"><strong>Default</strong></span>. Click on the drop-down list and select <span class="strong"><strong>Add Layer...</strong></span> from the list.</p></li><li><p>A list of layers will now appear in the <span class="strong"><strong>Inspector</strong></span> window. These are all the layers used in the game. The first few are reserved for use by Unity; hence, they are grayed out. The rest are for our use. Click on the right-hand side of <span class="strong"><strong>User Layer 8</strong></span> and name it <span class="strong"><strong>Indicator</strong></span>.</p></li><li><p>Select the <code class="literal">IndicatorSlice</code> prefab again. This time select the new <span class="strong"><strong>Indicator</strong></span> layer from the <span class="strong"><strong>Layer</strong></span> drop-down list.</p></li><li><p>Unity will ask if we want to change the layer of all the child objects as well. We would want the whole object rendered on this layer, so select <span class="strong"><strong>Yes, change children</strong></span> and we will be able to do so.</p></li><li><p>Now, back to our second camera. Select it and take a look in the <span class="strong"><strong>Inspector</strong></span> window.</p></li><li><p>The first attribute of the <span class="strong"><strong>Camera</strong></span> component is <span class="strong"><strong>Clear Flags</strong></span>. This list of options dictate what the camera will fill the background with before drawing all of the models in the game. The second camera does not block out everything drawn by the first camera. We select <span class="strong"><strong>Depth only</strong></span> from the <span class="strong"><strong>Clear Flags</strong></span> drop-down list. This means that, instead of putting the skybox in the background, it will leave what was already rendered and just draw new things on top.</p></li><li><p>The next attribute, <span class="strong"><strong>Culling Mask</strong></span>, controls which layers are rendered by the camera. The first two options, <span class="strong"><strong>Nothing</strong></span> and <span class="strong"><strong>Everything</strong></span>, are for deselection and quick selection of all of the layers. For this camera, deselect all other layers, so that only the <span class="strong"><strong>Indicator</strong></span> layer has a check next to it.</p></li><li><p>The last thing to do is<a id="id310" class="indexterm"></a> to adjust the scale of <code class="literal">IndicatorControl</code> so that the target indicator is not too large or small.</p><div class="mediaobject"><img src="/graphics/9781849692014/graphics/2014OT_04_04.jpg" /></div></li></ol></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec52"></a>
<span class="emphasis"><em>What just happened?</em></span>
</h3></div></div></div><p>We created a system to indicate the direction of potential targets. To do this, we used a second camera. By adjusting the layers in the <span class="strong"><strong>Culling Mask</strong></span> attribute, we can make a camera render only a part of a scene.<a id="id311" class="indexterm"></a> Also, by changing the <span class="strong"><strong>Clear Flags</strong></span> attribute to <span class="strong"><strong>Depth only</strong></span>, the second camera can draw on top of what was drawn by the first camera.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec53"></a>Have a go hero – adjusting the position</h3></div></div></div><p>It is possible to change where the indicator is drawn by moving the camera. If you were to instead move the <code class="literal">IndicatorControl</code> object, it <a id="id312" class="indexterm"></a>will change how the distance from and direction to targets are calculated. Move and angle the second camera so that there is a more pleasing view of the target indicator.</p><p>When you were moving the second camera or when you use the boost from the next section, you probably noticed that the target indicator can still be seen in the tank. Adjust the main camera so that it does not render the target indicator. This is done very similarly to how we made the second camera only render the target indicator.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec54"></a>Turbo boost</h3></div></div></div><p>The last camera effect we will be looking at in this chapter is a turbo boost. It is going to be a button on the screen that will <a id="id313" class="indexterm"></a>propel the player forward rapidly for a short amount of time. The camera effect comes in because a simple adjustment to the <span class="strong"><strong>Field of View</strong></span> attribute can make it look as if we are going much faster. A similar method is used by movies to make the car chases look even faster.</p></div></div>