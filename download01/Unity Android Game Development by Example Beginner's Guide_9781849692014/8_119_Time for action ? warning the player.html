<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch08lvl1sec118"></a>Time for action – warning the player</h2></div></div><hr /></div><p>A single script attached to our objects in space will warn the player as the objects approach.</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>We start by creating a new script and name it <code class="literal">Alarm</code>.</p></li><li><p>This script starts with a single variable. It will hold the distance value at which the sound will start to fade in.</p><div class="informalexample"><pre class="programlisting">public float warningDist = 100f;</pre></div></li><li><p>Next, we create the <code class="literal">Update</code> function. It starts by checking for an <span class="strong"><strong>Audio Source</strong></span> component and exiting the function early if there isn't one. The <code class="literal">audio</code> variable holds the reference to the attached <span class="strong"><strong>Audio Source</strong></span> component.</p><div class="informalexample"><pre class="programlisting">public void Update() {
  if(audio == null) return;</pre></div></li><li><p>The function continues by calculating the distance to the player. Because the player never moves, we can just use the position's distance to the origin to make it simpler. We also use <code class="literal">sqrMagnitude</code>, which is the square of the length of the vector, because it is significantly faster to calculate. If the object is outside the range, the volume is set to <code class="literal">0</code> and the function is exited.</p><div class="informalexample"><pre class="programlisting">float distance = transform.position.sqrMagnitude;
if(distance &gt; warningDist * warningDist) {
  audio.volume = 0;
  return;
}</pre></div></li><li><p>Finally, we calculate the new volume by dividing the distance by the square of <code class="literal">warningDist</code> value and subtracting the result from one. This will result in a rounded curve as it approaches maximum volume.</p><div class="informalexample"><pre class="programlisting">float volume = 1 – (distance / (warningDist * warningDist));
audio.volume = volume;
}</pre></div></li><li><p>We now need to add the script to the relevant objects. To both the enemy ship and asteroid prefabs, add the <code class="literal">Alarm</code> script and an <span class="strong"><strong>Audio Source</strong></span> component.</p></li><li><p>For the <span class="strong"><strong>Audio Clip</strong></span> value, select the <code class="literal">Alarm</code> clip. Also, make sure both the <span class="strong"><strong>Play On Awake</strong></span> and <span class="strong"><strong>Loop</strong></span> checkboxes are checked.</p></li><li><p>Next, we don't want the alarm to overpower other sounds in our game, so set the <span class="strong"><strong>Priority</strong></span> option to <span class="strong"><strong>192</strong></span>.</p></li><li><p>To keep it from making any noise when the object is spawned, set the <span class="strong"><strong>Volume</strong></span> option to <span class="strong"><strong>0</strong></span>.</p></li><li><p>In order for<a id="id559" class="indexterm"></a> the script to fully control the <span class="strong"><strong>Audio Source</strong></span> component's volume, expand the <span class="strong"><strong>3D Sound Settings</strong></span> component. Select <span class="strong"><strong>Linear Rolloff</strong></span> for <span class="strong"><strong>Volume Rolloff</strong></span> and <span class="strong"><strong>495</strong></span> for the <span class="strong"><strong>Min Distance</strong></span> option.</p></li></ol></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec129"></a>
<span class="emphasis"><em>What just happened?</em></span>
</h3></div></div></div><p>We created a script to warn the player when objects get too close. As they approach the player, the volume on their audio source is increased. As they move away from the player, the volume is reduced. By utilizing 3D audio clips, we can direct the player as to where the approaching object is coming from.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec130"></a>Have a go hero – differentiation</h3></div></div></div><p>It is great that we can tell when objects are coming too close, but we can't tell what it is until we see it. Find some alternate alarm sounds. For each type of object that the player has to contend with, give it a different sound. This way, the player will know whether they need to start pulling some tricky maneuvers to dodge bullets or they are entering an asteroid field and need to fly carefully to avoid a collision.</p></div></div>