<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec24"></a>Creating the player character's armature</h2></div></div><hr /></div><p>The process of creating<a id="id679" class="indexterm"></a> the armature for the player character is very similar to that of the monster. The first thing we need to do is create a new armature by pressing <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>A</em></span>, followed by going to <span class="strong"><strong>Armature</strong></span> | <span class="strong"><strong>Single Bone</strong></span>. Next, place<a id="id680" class="indexterm"></a> it somewhere around the hip, and not in the upper torso. This is where the center of mass lies in the human body, so it's most natural to place the root bone around that area.</p><p>After this, select one of the small spheres at the tip of the root bone and press <span class="emphasis"><em>E</em></span> to create a child bone from it. Repeat the same step on the child bones until you get something like this:</p><div class="mediaobject"><img src="/graphics/9781785282140/graphics/B04610_03_09.jpg" /></div><p>Next, enable <span class="strong"><strong>X-Axis Mirror</strong></span> and <a id="id681" class="indexterm"></a>create bones for the limbs by pressing <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>E</em></span> to mirror-extrude the bones. Slowly adjust the bones until it look<a id="id682" class="indexterm"></a> something like this:</p><div class="mediaobject"><img src="/graphics/9781785282140/graphics/B04610_03_10.jpg" /></div><p>After you have done creating all the bones for the character, we will now try to bind the armature to the character mesh using the same method as before. Press <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>P</em></span>; a menu will pop out. Now, select<a id="id683" class="indexterm"></a> <span class="strong"><strong>Armature Deform with Automatic Weights</strong></span>. This time, however, instead of successful binding of the armature to the mesh, you will get an error:</p><div class="mediaobject"><img src="/graphics/9781785282140/graphics/B04610_03_11.jpg" /></div><p>This happens because the character mesh is simply too complicated for Blender to automatically assign weights to the skin. Therefore, we can't use this method this time and we will require some manual labor to make it work. To do this, we need to first of all understand how skinning works.</p><p>Skinning is the process<a id="id684" class="indexterm"></a> of attaching your character's mesh to the armatures you have created so that when one of the bones moves, the vertices of the mesh will also follow the movement of the bone. How does a vertex know which bone is associated with it? Well, the <a id="id685" class="indexterm"></a>scaling factor has many names, often named<a id="id686" class="indexterm"></a> <span class="strong"><strong>vertex weight</strong></span>, <span class="strong"><strong>blend weight</strong></span>, or <span class="strong"><strong>skin weight</strong></span>. The higher the <a id="id687" class="indexterm"></a>value of the skin weight of a vertex associated with a specific bone, the more it will be affected by the movement of that bone.</p><p>For example, if the skin weight of a vertex associated with a bone is at the factor of 1.0, it will move exactly like how the bone is moving. If the skin weight is 0.0, then the vertex will not move at all when the bone is moving. Likewise, if the skin weight is at the factor of 0.5, the vertex will only move half as much as the bone.</p><p>In Blender, the value of the skin weight is represented with different colors. The higher the value, the more reddish the color will be. You can check the skin weight value by entering the weight paint mode. More details will be covered later in this chapter.</p><p>Here's an example of how the skin weight looks like in Blender:</p><div class="mediaobject"><img src="/graphics/9781785282140/graphics/B04610_03_12.jpg" /></div><p>Now, what we need to do is properly name all the bones of the player character. You can do this by selecting<a id="id688" class="indexterm"></a> each bone and changing its name in the<a id="id689" class="indexterm"></a> Properties panel. You must give the same name for both the mirrored bones with a <code class="literal">_L</code> or <code class="literal">_R</code> behind the name, otherwise the mirror effect will be broken.</p><div class="mediaobject"><img src="/graphics/9781785282140/graphics/B04610_03_13.jpg" /></div><p>Next, select the mesh and go to the <span class="strong"><strong>Vertex Groups</strong></span> section under the <span class="strong"><strong>Data</strong></span> tab in the Properties panel. Create new vertex groups and give each of them the same name as the bones. Each of these vertex groups will act as a container to store the skin weight values in for each of the bones in the armature.</p><p>The name of the vertex groups needs to be exactly the same as the bones so that Blender knows which vertex group will be linked to which bone.</p><div class="mediaobject"><img src="/graphics/9781785282140/graphics/B04610_03_14.jpg" /></div><p>After this, batch-select<a id="id690" class="indexterm"></a> the vertices that you want to be associated<a id="id691" class="indexterm"></a> with a specific bone and assign them to the vertex group, which has the same name as the bone.</p><div class="mediaobject"><img src="/graphics/9781785282140/graphics/B04610_03_15.jpg" /></div><p>After you have assigned all the vertices to the bones, we can try to bind the armature to the mesh again. This time, however, instead of choosing automatic weights, we will pick the first option named <span class="strong"><strong>Armature Deform</strong></span>. By choosing this option, Blender will help associate all the vertices in the vertex groups to the bones that it's named after and will simply assign the full skin weight (factor of 1.0) to these vertices. Don't worry about the values of the skin weights because we can adjust them later on.</p><div class="mediaobject"><img src="/graphics/9781785282140/graphics/B04610_03_16.jpg" /></div><p>If we don't adjust the skin weight, the mesh deformation will look really odd, and that makes the character<a id="id692" class="indexterm"></a> look like a robot. To make the character look organic when animating, we need to <a id="id693" class="indexterm"></a>adjust the values of the skin weights in the <span class="strong"><strong>Weight Paint</strong></span> option. To enter the weight paint mode, select the mesh and click on <span class="strong"><strong>Weight Paint</strong></span> in the combo box below the 3D view.</p><div class="mediaobject"><img src="/graphics/9781785282140/graphics/B04610_03_17.jpg" /></div></div>