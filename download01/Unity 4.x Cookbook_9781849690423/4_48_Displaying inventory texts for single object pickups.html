<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec51"></a>Displaying inventory texts for single object pickups</h2></div></div><hr /></div><p>Many <a id="id288" class="indexterm"></a>games<a id="id289" class="indexterm"></a> involve the player picking up items. Perhaps the most common is the need to pick up a key to be able to pass through a doorway, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849690423/graphics/0423_04_17.jpg" /></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec173"></a> Getting ready</h3></div></div></div><p>In the <code class="literal">0423_04_11</code> folder you'll find some key images, and a crisscross image to apply to the terrain.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec174"></a>How to do it...</h3></div></div></div><p>To display a text <a id="id290" class="indexterm"></a>description of inventory objects, please follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Create a new scene, and add a directional light.</p></li><li><p>Create a new terrain with <span class="strong"><strong>Size</strong></span> set to 2000 x 2000 and <span class="strong"><strong>Position</strong></span> (-1000, 0, -1000). Now, apply a texture to this terrain.</p></li><li><p>Create a cube named <span class="strong"><strong>Cube – key</strong></span> at position (0, 1, 5) with scale (2, 2, 2).</p></li><li><p>Tag <span class="strong"><strong>Cube–key</strong></span> with the string <span class="strong"><strong>key</strong></span>, and tick its <span class="strong"><strong>Is Trigger</strong></span> checkbox, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849690423/graphics/0423_04_18.jpg" /></div></li><li><p>Add a key image to <span class="strong"><strong>Cube–key</strong></span>.</p></li><li><p>Import the built-in <span class="strong"><strong>Character Controller</strong></span> Unity package and add a <span class="strong"><strong>3rd Person Controller</strong></span> to your scene at position (0, 1, 0).</p></li><li><p>Attach the following script class to your character controller:</p><div class="informalexample"><pre class="programlisting">// file: PlayerInventory
using UnityEngine;
using System.Collections;

public class PlayerInventory : MonoBehaviour 
{
  private bool isCarryingKey = false;
  
  private void OnGUI()
  {
    string keyMessage = "(bag is empty)";
    if( isCarryingKey )
    {
      keyMessage = "carrying: [ key ]";
    }
    
    GUILayout.Label ( keyMessage );
  }
  
  private void OnTriggerEnter(Collider hitCollider)
  {
    if( "key" == hitCollider.tag )
   {
      isCarryingKey = true;
      Destroy ( hitCollider.gameObject );
    }
  }
}</pre></div></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec175"></a>How it works...</h3></div></div></div><p>The <code class="literal">isCarryingKey</code> Boolean<a id="id291" class="indexterm"></a> variable represents whether or not the player is carrying the key at any point in time.</p><p>In the <code class="literal">OnGUI()</code> method the contents of the <code class="literal">keyMessage</code> string is displayed via the <code class="literal">GUILayout.Label()</code> method. The default value of this string tells the user that the players bag is empty, but an <code class="literal">if</code> statement tests the value of <code class="literal">isCarryingKey</code>. If that is true, then the message is changed to inform the user that the player is carrying a key.</p><p>The <code class="literal">OnTriggerEnter()</code> method tests the <code class="literal">tag</code> string of any object the player's character controller collides with that has its <span class="strong"><strong>Is Trigger</strong></span> checkbox set to true.</p><p>Each time the player's character controller collides with any object that has its <span class="strong"><strong>Is Trigger</strong></span> value set to true, an <code class="literal">OnTriggerEnter()</code> event message is sent to both of the objects involved in the collision.</p><p>The <code class="literal">OnTriggerEnter()</code> message is passed a parameter, which is the <code class="literal">Collider</code> component inside the object it just collided with. Our character controller's <code class="literal">OnTriggerEnter()</code> method tests the <code class="literal">tag</code> string of the object it collided with to see if has the <code class="literal">key</code> value.</p><p>Since the <span class="strong"><strong>Cube–key</strong></span> cube that we created has its trigger set, and has the <code class="literal">key</code> tag, then the <code class="literal">if</code> statement inside this method will detect a collision with <span class="strong"><strong>Cube–key</strong></span> and will perform the following two actions:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>This method sets the <code class="literal">isCarryingKey</code> Boolean variable to <code class="literal">true</code></p></li><li style="list-style-type: disc"><p>It also destroys the game object it has just collided with (in this case, <span class="strong"><strong>Cube–key</strong></span>).</p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note13"></a>Note</h3><p><span class="strong"><strong>Boolean variables are often referred to as flags</strong></span></p><p>The use of a <code class="literal">bool</code> (true/false) variable, to represent whether a particular feature of the game state is true or false, is very common. Programmers often refer to these variables as "flags". So programmers might refer to the <code class="literal">isCarryingKey</code> variable as the key carrying flag.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec176"></a>There's more...</h3></div></div></div><p>Here are some details you don't want to miss:</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl3sec48"></a>Comparing the gameObject tag with a string special method</h4></div></div></div><p>Comparing <a id="id292" class="indexterm"></a>the <code class="literal">tag</code> string of a game object against a string is such a common task that Unity has provided a special method for just this purpose. This method is named <code class="literal">CompareTag()</code>, and takes a string as its single argument. We can therefore rewrite the <code class="literal">if</code> statement in the <code class="literal">OnTriggerEnter</code> method a little more elegantly, as follows:</p><div class="informalexample"><pre class="programlisting">if( hitCollider.CompareTag("key") )</pre></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec177"></a>See also...</h3></div></div></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>The <span class="emphasis"><em>Displaying inventory icons for single object pickups</em></span> recipe.</p></li><li style="list-style-type: disc"><p>The <span class="emphasis"><em>Managing inventories with a general purpose PickUp class</em></span> recipe.</p></li></ul></div></div></div>