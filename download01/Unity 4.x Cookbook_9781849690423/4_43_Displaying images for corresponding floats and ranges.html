<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec46"></a>Displaying images for corresponding floats and ranges</h2></div></div><hr /></div><p>As the <a id="id268" class="indexterm"></a>previous recipe illustrates, displaying images for integers with one-to-one correspondence<a id="id269" class="indexterm"></a> is straightforward. However, sometimes there may be a small number of images to help highlight the "zone" of a numeric variable. Examples might include health points—with green (very healthy) and red (little health remaining) displays. Whether values are represented as floats (for example, 0.0 – 1.0) or ranges within larger numbers (for example, 0 – 50), a general solution is to identify the sub-range (zone) of the numeric value and display the appropriate corresponding image.</p><div class="mediaobject"><img src="/graphics/9781849690423/graphics/0423_04_11.jpg" /></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec153"></a>Getting ready</h3></div></div></div><p>In the <code class="literal">0423_04_06</code> folder,<a id="id270" class="indexterm"></a> you'll find a series of PNG images.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec154"></a>How to do it...</h3></div></div></div><p>To display images corresponding to floats and ranges, please follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Attach the following script class to the <span class="strong"><strong>Main Camera</strong></span>:</p><div class="informalexample"><pre class="programlisting">// file: HealthBar.cs
using UnityEngine;
using System.Collections;

public class HealthBar : MonoBehaviour 
{
  const int MAX_HEALTH = 100;
  public Texture2D bar00;
  public Texture2D bar10;
  public Texture2D bar20;
  public Texture2D bar30;
  public Texture2D bar40;
  public Texture2D bar50;
  public Texture2D bar60;
  public Texture2D bar70;
  public Texture2D bar80;
  public Texture2D bar90;
  public Texture2D bar100;
  
  private int healthPoints = MAX_HEALTH;
  
private void OnGUI() 
{
      GUILayout.Label("health = " + healthPoints);
    float normalisedHealth = (float)healthPoints / MAX_HEALTH;
      GUILayout.Label( HealthBarImage(normalisedHealth) );
      
      bool decButtonClicked = GUILayout.Button("decrease power");
      bool incButtonClicked = GUILayout.Button("increase power");

    if( decButtonClicked )
      healthPoints -= 5;
      
      if( incButtonClicked )
      healthPoints += 5;
    }
    
  private Texture2D HealthBarImage(float health)
   {
    if( health &gt; 0.9 ){  return bar100;  }
    else if( health &gt; 0.8 ){  return bar90;  }
    else if( health &gt; 0.7 ){  return bar80;  }
    else if( health &gt; 0.6 ){  return bar70;  }
    else if( health &gt; 0.5 ){  return bar60;  }
    else if( health &gt; 0.4 ){  return bar50;  }
    else if( health &gt; 0.3 ){  return bar40;  }
    else if( health &gt; 0.2 ){  return bar30;  }
    else if( health &gt; 0.1 ){  return bar20;  }
    else if( health &gt; 0 ){  return bar10;  }
    else{  return bar00;  }
  }
}</pre></div></li><li><p>With the <span class="strong"><strong>Main Camera</strong></span> selected in the <span class="strong"><strong>Hierarchy</strong></span> view, drag each of the images into the <span class="strong"><strong>Inspector</strong></span> view for the corresponding public variable.</p></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec155"></a>How it works...</h3></div></div></div><p>The private <code class="literal">healthPoints</code> integer variable stores the game parameter to be graphically represented. The <code class="literal">MAX_HEALTH</code> constant defines the value of <code class="literal">healthPoints</code>, which indicates full health. The 11 public image variables store different versions of the health bar image to correspond to different health ranges. For example, <code class="literal">bar00</code> corresponds to zero health remaining, so it appears as an image with warning red coloring.</p><p>The core function <a id="id271" class="indexterm"></a>in this recipe is a method being called that returns a <code class="literal">Texture</code> image object corresponding to the current value of <code class="literal">healthPoints</code>. A normalized value is created (which will always range between 0.0 and 1.0) by dividing <code class="literal">healthPoints</code> by <code class="literal">MAX_HEALTH</code>. This normalized float is passed to the <code class="literal">HealthBarImage()</code> method, which returns an image; the image is displayed via a <code class="literal">Label()</code> method call.</p><p>The <code class="literal">HealthBarImage()</code> method uses a sequence of <code class="literal">if</code> statements to decide which image to return. The provided health value is tested in a sequence of decreasing boundary values—<code class="literal">0.9</code> tested first, then <code class="literal">0.8</code>, and so on. Ranges are implied by these values, so if the normalized health value is from <code class="literal">0.9</code> to <code class="literal">1.0</code>, the image in the <code class="literal">bar100</code> variable will be displayed.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note12"></a>Note</h3><p>By normalizing values into the range 0.0 – 1.0, methods can be re-used in many different circumstances. So whether the health points for one game are from 0 – 50, or 0 – 10, or 0 – 500, the same code can be used, by always normalizing values by dividing them by their maximum value to get the 0.0 – 1.0 range.</p></div><p>If ranges corresponding to images are always of the same size, then an even more general purpose method could be created that takes as input a normalized value, and an array of images, and determines the ranges depending on the size of the array.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec156"></a>There's more...</h3></div></div></div><p>Here are some details you don't want to miss:</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl3sec44"></a>Cleaning up code with an array of textures</h4></div></div></div><p>While having lots of public <code class="literal">Texture2D</code> variables is straightforward, cleaner code can be achieved by a single public array of <code class="literal">Texture2D</code> objects (in the <span class="strong"><strong>Inspector</strong></span> view, you'll need to set the size of the array to <code class="literal">11</code> for this example):</p><div class="informalexample"><pre class="programlisting">// public array
public Texture2D[] barImageArray;</pre></div><p>The <code class="literal">if</code> statements inside the <code class="literal">HealthBarImage()</code> method now return values from this array, for example:</p><div class="informalexample"><pre class="programlisting">if( health &gt; 0.9 ){  return barImageArray[10];  }</pre></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec157"></a>See also</h3></div></div></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>The <span class="emphasis"><em>Image display for corresponding integers</em></span> recipe.</p></li><li style="list-style-type: disc"><p>The <span class="emphasis"><em>Displaying a countdown timer graphically (5, 4, 3, 2, 1 – blast off)</em></span> recipe.</p></li><li style="list-style-type: disc"><p>The <span class="emphasis"><em>Displaying a countdown timer graphically as a pie-chart style clock</em></span> recipe.</p></li></ul></div></div></div>