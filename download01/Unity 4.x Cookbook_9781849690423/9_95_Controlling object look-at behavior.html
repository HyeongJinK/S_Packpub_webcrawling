<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch09lvl1sec93"></a>Controlling object look-at behavior</h2></div></div><hr /></div><p>There are often situations where <a id="id651" class="indexterm"></a>we want to make one object orient itself to look in the direction of some other object. Examples include enemies or gun turrets wanting to look at the player, or perhaps making the player start off looking at an object at a key point in the game, such as, after having been teleported or respawned to some location in the game.</p><div class="mediaobject"><img src="/graphics/9781849690423/graphics/0423_09_02.jpg" /></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl2sec320"></a>Getting ready</h3></div></div></div><p>This recipe builds upon the player-controlled cube Unity project you created in the previous recipe. So make a copy of that project, open it, and then follow the steps for this recipe.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl2sec321"></a>How to do it...</h3></div></div></div><p>To make one object "look-at" another object, perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Create a sphere named <code class="literal">Arrow</code> positioned at (2, 0.5, 2) and with scale (1, 1, 1).</p></li><li><p>Create a second sphere, named <code class="literal">Sphere-small</code>, positioned at (2, 0.5, 2.5) and with scale (0.5, 0.5, 0.5).</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note43"></a>Note</h3><p>By default, when objects are first created, they are "looking" (facing) along the Z-axis. By positioning <code class="literal">Sphere-small</code> at (0, 0, 0.5), we have made this smaller sphere the point of an arrow. In other words, when we look at the two spheres, they are facing in the direction of a line drawn from the center of the large sphere towards the center of the small sphere.</p><p>You can check whether this is correct in the <span class="strong"><strong>Scene</strong></span> window. Selecting <span class="strong"><strong>Arrow</strong></span>, you should see the blue Z-axis gizmo arrow point from the center of the larger sphere towards the center of the smaller sphere.</p></div></li><li><p>Make <code class="literal">Sphere-small</code> a child-object of your GameObject <code class="literal">Arrow</code>.</p><div class="mediaobject"><img src="/graphics/9781849690423/graphics/0423_09_03.jpg" /></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note44"></a>Note</h3><p>To make an object a child of another object, in the <span class="strong"><strong>Hierarchy</strong></span> window drag the child object into the parent object. The child object should then appear indented below the parent object. The parent object will also have a <span class="emphasis"><em>contents</em></span> triangle symbol next to it, to control whether its contents (child objects) are listed or not.</p></div></li><li><p>Add the <a id="id652" class="indexterm"></a>following C# script class to your GameObject <code class="literal">Arrow</code>:</p><div class="informalexample"><pre class="programlisting">// file: LookAt.cs
using UnityEngine;
using System.Collections;

public class LookAt : MonoBehaviour {
  public Transform playerTransform;

  private void LateUpdate () {
    transform.LookAt( playerTransform );

    
    UsefulFunctions.DebugRay(transform.position, transform.forward * 100, Color.green);

  }
}</pre></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note45"></a>Note</h3><p>We use <code class="literal">LateUpdate()</code> so we can be sure <code class="literal">playerTransform</code> has been moved before calling <code class="literal">LookAt()</code>.</p></div></li><li><p>Ensuring <span class="strong"><strong>Arrow</strong></span> is selected, in the <span class="strong"><strong>Inspector</strong></span> for the <code class="literal">LookAt</code> scripted component, drag <span class="strong"><strong>Cube-player</strong></span> over the public variable <span class="strong"><strong>playerTransform</strong></span>.</p></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl2sec322"></a>How it works...</h3></div></div></div><p>Since it is so useful, <a id="id653" class="indexterm"></a>Unity has provided all <code class="literal">Transform</code> objects with the <code class="literal">LookAt()</code> method. This method will make the object whose transform has the method applied, orient itself at the object whose transform is provided as a parameter. Since our <code class="literal">Arrow</code> object's script has a reference to <code class="literal">Cube-player</code> (via the public variable <code class="literal">playerTransform</code>), every frame the <code class="literal">Arrow</code> object is made to re-orient itself to, faces towards the direction of the player's character.</p><p>The second statement in the <code class="literal">LateUpdate()</code> method is the call to the <code class="literal">DebugRay()</code> method of the <code class="literal">UsefulFunctions</code> class. This illustrates that the "rays" (lines in 3D space) that can be drawn in the <span class="strong"><strong>Scene</strong></span> window, and can aid in debugging. This statement will result in a ray being drawn in green, from the position of the Arrow object's transform, 100 Unity units in the direction the Arrow object is facing (its transform's <code class="literal">forward</code> vector).</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl2sec323"></a>See also</h3></div></div></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>The <span class="emphasis"><em>Controlling cube movement through player controls</em></span> recipe</p></li><li style="list-style-type: disc"><p>The <span class="emphasis"><em>Controlling object-to-object movements (seek, flee, follow at a distance)</em></span> recipe</p></li><li style="list-style-type: disc"><p>The <span class="emphasis"><em>Controlling object group movement through flocking</em></span> recipe</p></li></ul></div></div></div>