<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch11lvl1sec117"></a>Playing videos inside a scene</h2></div></div><hr /></div><p>TV sets projectors, <a id="id890" class="indexterm"></a> monitors... If you want complex animated materials in your level, you can play video files as texture maps. In this recipe, we will learn how to apply a video texture to a cube. We will also implement a simple control scheme that plays or pauses the video when the cube is clicked.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch11lvl2sec407"></a>Getting ready</h3></div></div></div><p>Unity imports video files through <a id="id891" class="indexterm"></a>
<span class="strong"><strong>Apple Quicktime</strong></span>. If you don't have it installed on your machine, please download it at <a class="ulink" href="http://www.apple.com/quicktime/download/" target="_blank">http://www.apple.com/quicktime/download/</a>. Also, if you need a video file to follow this recipe, please use the <code class="literal">videoTexture.mov</code> file included in the <code class="literal">0423_11_03</code> folder.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch11lvl2sec408"></a>How to do it...</h3></div></div></div><p>To play a video inside a scene, perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Create a cube by navigating to <span class="strong"><strong>Game Object</strong></span> | <span class="strong"><strong>Create Other</strong></span> | <span class="strong"><strong>Cube</strong></span>.</p></li><li><p>In the <span class="strong"><strong>Project</strong></span> view, use the <span class="strong"><strong>Create</strong></span> drop-down menu to create a new material. Rename it as <code class="literal">videoMaterial</code>.</p></li><li><p>We now need to import our video texture. Navigate to <span class="strong"><strong>Assets</strong></span> | <span class="strong"><strong>Import New Asset...</strong></span> and browse to your video file (it will import and convert any video file QuickTime is capable of reading).</p></li><li><p>Unity will convert your file to the <a id="id892" class="indexterm"></a>
<span class="strong"><strong>OGG</strong></span>/<span class="strong"><strong>Theora</strong></span> format.</p></li><li><p>In the <span class="strong"><strong>Project</strong></span> view, select <span class="strong"><strong>videoMaterial</strong></span>. Then, in the <span class="strong"><strong>Inspector</strong></span> view, change its <span class="strong"><strong>Shader</strong></span> to <span class="strong"><strong>Self-Illumin/Diffuse</strong></span>.</p></li><li><p>Apply the <span class="strong"><strong>videoTexture</strong></span> on the <span class="strong"><strong>Main Color</strong></span> of <span class="strong"><strong>videoMaterial</strong></span> by dragging it from the <span class="strong"><strong>Project</strong></span> view into the appropriate slot:</p><div class="mediaobject"><img src="/graphics/9781849690423/graphics/0423_12_07.jpg" /></div></li><li><p>Apply <span class="strong"><strong>videoMaterial</strong></span> to the cube you have created. That will give you an idea of how the video should be displayed.</p></li><li><p>Select the cube. Make sure there is a <span class="strong"><strong>Collider</strong></span> component in the <span class="strong"><strong>Inspector</strong></span>. In case here isn't one, <a id="id893" class="indexterm"></a> add it by navigating to <span class="strong"><strong>Component</strong></span> | <span class="strong"><strong>Physics</strong></span> | <span class="strong"><strong>Box Collider</strong></span>. Colliders are needed for mouse collision detection.</p></li><li><p>Now we need to create our script. In the <span class="strong"><strong>Project</strong></span> view, click on the <span class="strong"><strong>Create</strong></span> drop-down menu and choose <span class="strong"><strong>C# Script</strong></span>. Rename it as <code class="literal">PlayVideoTexture</code> and open it in your editor.</p></li><li><p>Replace your script with the following code:</p><div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;
[RequireComponent (typeof (AudioSource))]
public class PlayVideoTexture : MonoBehaviour {
    public bool  loopVideo = true;â€©    public bool  startPlaying = true;
    public MovieTexture videoTexture;
    void  Start(){  
      videoTexture.loop = loopVideo;
        renderer.material.mainTexture = videoTexture;
        audio.clip = videoTexture.audioClip;	
      if(startPlaying)
        ControlMovie();
    }
    void  OnMouseUp(){
       ControlMovie();
    }
    void  ControlMovie(){
      if(videoTexture.isPlaying)
        videoTexture.Pause();
      else {
        videoTexture.Play();
        audio.Play();
      }
    }
}</pre></div></li><li><p>Save your script and apply it to the cube (in the <span class="strong"><strong>Hierarchy</strong></span> view).</p></li><li><p>Select the cube and, <a id="id894" class="indexterm"></a>in the <span class="strong"><strong>Inspector</strong></span> view, under the <span class="strong"><strong>Play Video Texture</strong></span> component, select the <span class="strong"><strong>videoTexture</strong></span> movie texture from the <span class="strong"><strong>Video Texture</strong></span> field:</p><div class="mediaobject"><img src="/graphics/9781849690423/graphics/0423_12_08.jpg" /></div></li><li><p>Test your scene. You should be able to see the movie being played in the cube face, and also pause/play it by clicking on it.</p></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch11lvl2sec409"></a>How it works...</h3></div></div></div><p>By default, our script makes the movie texture play in the <span class="strong"><strong>Loop</strong></span> mode. There is, however, a Boolean variable that can be changed through the <span class="strong"><strong>Inspector</strong></span> view, where it is represented by a checkbox. Likewise, there is a checkbox that can be used to prevent the movie from playing when the level starts.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch11lvl2sec410"></a>There's more...</h3></div></div></div><p>There are some other movie texture commands and parameters that can be played with. Don't forget to check out Unity's scripting guide at <a class="ulink" href="http://docs.unity3d.com/Documentation/ScriptReference/MovieTexture.html" target="_blank">http://docs.unity3d.com/Documentation/ScriptReference/MovieTexture.html</a>.</p></div></div>