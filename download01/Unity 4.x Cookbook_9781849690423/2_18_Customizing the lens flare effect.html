<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec23"></a>Customizing the lens flare effect</h2></div></div><hr /></div><p>As anyone <a id="id89" class="indexterm"></a>who has played a game set in an outdoor environment in the last 15 years can tell you, the <span class="strong"><strong>lens flare</strong></span> effect is used to simulate the incidence of bright lights over the player's field of view. Although it has become a bit overused, it is still very much present in all kinds of games. In this recipe, we will create and test our own lens flare texture.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec60"></a>Getting ready</h3></div></div></div><p>In order to continue with this recipe, it's strongly recommended that you have access to image editor software such as Adobe Photoshop or GIMP. The source for lens texture created in this recipe can be found in the <code class="literal">0423_02_03</code> folder.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec61"></a>How to do it...</h3></div></div></div><p>To create a new lens flare texture and apply it to the scene, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Import Unity's <span class="strong"><strong>Character Controller</strong></span> package by navigating to <span class="strong"><strong>Assets</strong></span> | <span class="strong"><strong>Import Package</strong></span> | <span class="strong"><strong>Character Controller</strong></span>.</p></li><li><p>Do the same for the <span class="strong"><strong>Light Flares</strong></span> package.</p></li><li><p>In the <span class="strong"><strong>Hierarchy</strong></span> view, use the <span class="strong"><strong>Create</strong></span> button to add a <span class="strong"><strong>Directional Light</strong></span> effect to your scene.</p></li><li><p>Select your camera and add a <span class="strong"><strong>Mouse Look</strong></span> component by accessing the <span class="strong"><strong>Component</strong></span> | <span class="strong"><strong>Camera Control</strong></span> | <span class="strong"><strong>Mouse Look</strong></span> menu option.</p></li><li><p>In the <span class="strong"><strong>Project</strong></span> view, locate the <span class="strong"><strong>Sun</strong></span> flare (inside <span class="strong"><strong>Standard Assets</strong></span> | <span class="strong"><strong>Light Flares</strong></span>), duplicate it and rename it to <span class="strong"><strong>MySun</strong></span>, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849690423/graphics/0423_02_07.jpg" /></div></li><li><p>In the <span class="strong"><strong>Inspector</strong></span> view, click <span class="strong"><strong>Flare Texture</strong></span> to reveal the base texture's location in <a id="id90" class="indexterm"></a>the <span class="strong"><strong>Project</strong></span> view. It should be a texture named <span class="strong"><strong>50mmflare</strong></span>.</p></li><li><p>Duplicate the texture and rename it <code class="literal">My50mmflare</code>.</p><div class="mediaobject"><img src="/graphics/9781849690423/graphics/0423_02_08.jpg" /></div></li><li><p>Right-click <span class="strong"><strong>My50mmflare</strong></span> and choose <span class="strong"><strong>Open</strong></span>. This should open the file (actually a <code class="literal">.psd</code>) in your image editor. If you're using Adobe Photoshop, you might see the guidelines for the texture, as shown here:</p><div class="mediaobject"><img src="/graphics/9781849690423/graphics/0423_02_09.jpg" /></div></li><li><p>To create the light rings, create new <span class="strong"><strong>Circle</strong></span> shapes and add different <span class="strong"><strong>Layer Effects</strong></span> such <a id="id91" class="indexterm"></a>as <span class="strong"><strong>Gradient Overlay</strong></span>, <span class="strong"><strong>Stroke</strong></span>, <span class="strong"><strong>Inner Glow</strong></span>, and <span class="strong"><strong>Outer Glow</strong></span>.</p></li><li><p>Recreate the star-shaped flares by editing the originals or by drawing lines and blurring them.</p><div class="mediaobject"><img src="/graphics/9781849690423/graphics/0423_02_10.jpg" /></div></li><li><p>Save the file and go back to the Unity Editor.</p></li><li><p>In the <a id="id92" class="indexterm"></a>
<span class="strong"><strong>Inspector</strong></span> view, select <span class="strong"><strong>MySun</strong></span>, and set <span class="strong"><strong>Flare Texture</strong></span> to <span class="strong"><strong>My50mmflare</strong></span>:</p><div class="mediaobject"><img src="/graphics/9781849690423/graphics/0423_02_11.jpg" /></div></li><li><p>Select <span class="strong"><strong>Directional Light</strong></span> and, in the <span class="strong"><strong>Inspector</strong></span> view, set <span class="strong"><strong>Flare</strong></span> to <span class="strong"><strong>MySun</strong></span>.</p><div class="mediaobject"><img src="/graphics/9781849690423/graphics/0423_02_12.jpg" /></div></li><li><p>Play the <a id="id93" class="indexterm"></a>scene and move your mouse around. You will be able to see the lens flare as the camera faces the light.</p></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec62"></a>How it works...</h3></div></div></div><p>We have <a id="id94" class="indexterm"></a>used Unity's built-in lens flare texture as a blueprint for our own. Once applied, the lens flare texture will be displayed when the player looks into the approximate direction of the light.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec63"></a>There's more...</h3></div></div></div><p>Flare textures<a id="id95" class="indexterm"></a> can use different layouts and parameters for each element. In case you want to learn more about the <span class="strong"><strong>Lens Flare</strong></span> effect, check out Unity's documentation at <a class="ulink" href="http://docs.unity3d.com/Documentation/Components/class-LensFlare.html" target="_blank">http://docs.unity3d.com/Documentation/Components/class-LensFlare.html</a>.</p></div></div>