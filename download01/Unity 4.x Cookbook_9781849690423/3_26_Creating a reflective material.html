<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec30"></a>Creating a reflective material</h2></div></div><hr /></div><p>Metal, <a id="id139" class="indexterm"></a>car paint, <a id="id140" class="indexterm"></a>and glossy plastic surfaces are just some very recurrent examples of materials that need reflectiveness. Luckily for us, Unity includes reflective shaders that, when properly configured, can help us to achieve the look that we are after.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec85"></a>Getting ready</h3></div></div></div><p>For this recipe, we will prepare two texture maps: the <span class="strong"><strong>Base</strong></span> map<a id="id141" class="indexterm"></a> and the <span class="strong"><strong>Reflection Cubemap</strong></span><a id="id142" class="indexterm"></a>. The Base map will be a RGBA image, where the alpha channel will assign the reflection level from completely opaque (black) to completely reflective (white). The Reflection Cubemap can be made from either six or, as shown in this recipe, a single texture.</p><p>To help us focus on this recipe's main subject, which is setting up a reflective material, a Unity package containing a previously made scene, and also a <code class="literal">.jpg</code> file to be used as reflection map, are available inside the <code class="literal">0423_03_01</code> folder.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec86"></a>How to do it...</h3></div></div></div><p>To create a reflective material, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Import the <code class="literal">reflectiveMaterial</code> Unity package.</p></li><li><p>Open the <code class="literal">reflectiveMaterialLevel</code> level. There will be a single 3D object (a battery) that rotates around its own axis when the level is played. We can also orbit the camera around it.</p></li><li><p>Stop the level from running and, in the <span class="strong"><strong>Hierarchy</strong></span> view, select the battery. The <span class="strong"><strong>Inspector</strong></span> view will display its material. Use the drop-down menu to set <span class="strong"><strong>Shader</strong></span> from <span class="strong"><strong>Diffuse</strong></span> to <span class="strong"><strong>Reflective/Specular</strong></span>:</p><div class="mediaobject"><img src="/graphics/9781849690423/graphics/0423_03_01.jpg" /></div></li><li><p>Now we must build our Reflection Cubemap. In the <span class="strong"><strong>Project</strong></span> view, select the <span class="strong"><strong>reflectionMap</strong></span> texture. The <span class="strong"><strong>Texture Importer</strong></span> settings will be displayed in the <span class="strong"><strong>Inspector</strong></span> view. Using the <span class="strong"><strong>Texture Type</strong></span> drop-down menu, choose <span class="strong"><strong>Reflection</strong></span>. Then, change the <span class="strong"><strong>Mapping</strong></span> option to <span class="strong"><strong>Cylindrical</strong></span>. Finally, click <span class="strong"><strong>Apply</strong></span> to apply the changes we've made, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849690423/graphics/0423_03_02.jpg" /></div></li><li><p>Select the <code class="literal">reflectionMap</code> asset in your <span class="strong"><strong>Project</strong></span> view. It has changed from a 2D texture to a Cubemap (as you can see from its icon).</p></li><li><p>Select the <a id="id143" class="indexterm"></a>battery material and apply the <code class="literal">reflectionMap</code> asset into the <span class="strong"><strong>Reflection Cubemap</strong></span> slot:</p><div class="mediaobject"><img src="/graphics/9781849690423/graphics/0423_03_03.jpg" /></div></li><li><p>Play the level. The reflection effect is visible, but it could be smoother in some areas of the texture.</p></li><li><p>Open the base texture (named <code class="literal">batteryBase</code>) in your image editor.</p></li><li><p>In your image <a id="id144" class="indexterm"></a>editor, make all the channels visible and select the <span class="strong"><strong>Alpha</strong></span> channel window (in Photoshop this can be done by navigating to <span class="strong"><strong>Window</strong></span> | <span class="strong"><strong>Channels</strong></span>).</p></li><li><p>The Alpha channel is completely white. Paint a grey rectangle in the region correspondent to the battery's label. In this example, we have used a grey color of <span class="strong"><strong>Red</strong></span>, and also used <span class="strong"><strong>Green</strong></span> and <span class="strong"><strong>Blue</strong></span> values of <code class="literal">152</code>:</p><div class="mediaobject"><img src="/graphics/9781849690423/graphics/0423_03_04.jpg" /></div></li><li><p>Save the file to <a id="id145" class="indexterm"></a>make the changes and wait for Unity to reload the image. Reflection should now be more discreet inside the label area.</p></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec87"></a>How it works...</h3></div></div></div><p>The base texture map's alpha channel sets the reflectiveness and, in this example, the specular level of the material according to each pixel's brightness. That means the Reflection Cubemap texture will be more visible where the alpha channel is white.</p><p>The Reflection Cubemap<a id="id146" class="indexterm"></a> is actually made from six different images, which were generated from our original image file by the <span class="strong"><strong>Texture Importer</strong></span> settings when we set <span class="strong"><strong>Texture Type</strong></span> to <span class="strong"><strong>Reflection</strong></span>. These six images are mapped as top, bottom, front, back, left, and right.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec88"></a>There's more...</h3></div></div></div><p>Reflection Cubemaps can be done in many ways and have different mapping properties.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec22"></a>Using six different texture maps</h4></div></div></div><p>Instead of <a id="id147" class="indexterm"></a>using a single texture map, you could also create an empty Reflection Cubemap in the <span class="strong"><strong>Project</strong></span> view and assign six different image files illustrating the top, bottom, front, back, left, and right of your environment.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec23"></a>Experimenting with mapping and shader options</h4></div></div></div><p>The cylindrical mapping<a id="id148" class="indexterm"></a> we used was the best choice for the battery model. Experiment with other settings for different shapes. Besides the Base and Reflection texture maps, you can also experiment with the other shader settings<a id="id149" class="indexterm"></a> such as <span class="strong"><strong>Main</strong></span>, <span class="strong"><strong>Specular</strong></span> and <span class="strong"><strong>Reflection Colors</strong></span> (that can be used to tint the material), and also <span class="strong"><strong>Shininess</strong></span> (which controls the specular dispersion).</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec24"></a>Reflecting actual scene geometry</h4></div></div></div><p>If you're <a id="id150" class="indexterm"></a>using Unity Pro, you could make a reflection map from the actual level geometry. In fact, it could either reflect your level in real time or bake a single frame into the Reflection Cubemap. Unity's documentation has all the instructions you need, including the complete script code, at <a class="ulink" href="http://unity3d.com/support/documentation/ScriptReference/Camera.RenderToCubemap.html" target="_blank">http://unity3d.com/support/documentation/ScriptReference/Camera.RenderToCubemap.html</a>.</p></div></div></div>