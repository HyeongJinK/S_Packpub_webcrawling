<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec49"></a>Displaying a countdown timer graphically as a pie-chart style clock</h2></div></div><hr /></div><p>Another way<a id="id279" class="indexterm"></a> to display a<a id="id280" class="indexterm"></a> timer graphically is as a kind of clock, so the player can see the time running out. The following example shows elapsed time as the red portion of the circle:</p><div class="mediaobject"><img src="/graphics/9781849690423/graphics/0423_04_15.jpg" /></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec165"></a>Getting ready</h3></div></div></div><p>In the <code class="literal">0423_04_09</code> folder, you'll find a series of pie-chart PNG images.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec166"></a>How to do it...</h3></div></div></div><p>To display<a id="id281" class="indexterm"></a> a pie-chart style graphical countdown timer, please follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Attach the following script class to the <span class="strong"><strong>Main Camera</strong></span>:</p><div class="informalexample"><pre class="programlisting">// file: CoundownClock.cs
using UnityEngine;
using System.Collections;

public class CoundownClock : MonoBehaviour 
{
  public int timerTotalSeconds = 5;
  
  public Texture2D time0;
  public Texture2D time10;
  public Texture2D time20;
  public Texture2D time30;
  public Texture2D time40;
  public Texture2D time50;
  public Texture2D time60;
  public Texture2D time70;
  public Texture2D time80;
  public Texture2D time90;
  public Texture2D time100;

  private int countdownTimerDelay;
  private float countdownTimerStartTime;
  
  private void Awake(){
    CountdownTimerReset( timerTotalSeconds );
  }
  
  private void CountdownTimerReset(int delayInSeconds){
    countdownTimerDelay = delayInSeconds;
    countdownTimerStartTime = Time.time;
  }
    
  private void OnGUI(){
      float propertionRemaining = (CountdownSecondsLeftFloat() / timerTotalSeconds);
      GUILayout.Label( TimeRemainingImage(propertionRemaining) );
    }

  private float CountdownSecondsLeftFloat(){
    float elapsedSeconds = Time.time - countdownTimerStartTime;
    float secondsLeft = countdownTimerDelay - elapsedSeconds;
    return secondsLeft;
  }
  
  private Texture2D TimeRemainingImage(float propertionRemaining)
  {
    if( propertionRemaining &gt; 0.9 ){  return time100;  }
    else if( propertionRemaining &gt; 0.8 ){  return time90;  }
    else if( propertionRemaining &gt; 0.7 ){  return time80;  }
    else if( propertionRemaining &gt; 0.6 ){  return time70;  }
    else if( propertionRemaining &gt; 0.5 ){  return time60;  }
    else if( propertionRemaining &gt; 0.4 ){  return time50;  }
    else if( propertionRemaining &gt; 0.3 ){  return time40;  }
    else if( propertionRemaining &gt; 0.2 ){  return time30;  }
    else if( propertionRemaining &gt; 0.1 ){  return time20;  }
    else if( propertionRemaining &gt; 0 ){  return time10;  }
    else{	return time0;  }
  }
}</pre></div></li><li><p>With the<a id="id282" class="indexterm"></a> <span class="strong"><strong>Main Camera</strong></span> selected in the <span class="strong"><strong>Hierarchy</strong></span> view, drag each of the images into the <span class="strong"><strong>Inspector</strong></span> view for the corresponding public variable.</p></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec167"></a>How it works...</h3></div></div></div><p>This recipe is a combination of the basic countdown timer and the display of images for floats and ranges. Key aspects of this recipe include:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>The total number of seconds needs to be known by the <code class="literal">OnGUI()</code> method, so that a normalized proportion of time remaining can be calculated (in the range 0.0 – 1.0).</p></li><li style="list-style-type: disc"><p>The seconds left needs to be returned as a float, so the clock will work fine for short time intervals or long ones, and so the <code class="literal">CountdownSecondsLeftFloat()</code> method returns the remaining seconds as a float rather than an integer value, as in the previous recipes.</p></li><li style="list-style-type: disc"><p>The <code class="literal">TimeRemainingImage()</code> method takes in a float argument in the range 0.0 – 1.0, and uses <code class="literal">if</code> statements to return the image corresponding to the proportion of the total seconds remaining in the countdown.</p></li></ul></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec168"></a>There's more...</h3></div></div></div><p>Here are some details you don't want to miss:</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl3sec45"></a>Creating your own images with a spreadsheet</h4></div></div></div><p>The pie-chart clock style images <a id="id283" class="indexterm"></a>were created using a spreadsheet, and by just changing the two values. Stacked bar charts are another useful spreadsheet graph for timer or health graphical images.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec169"></a>See also</h3></div></div></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>The <span class="emphasis"><em>Displaying a digital countdown timer</em></span> recipe.</p></li><li style="list-style-type: disc"><p>The <span class="emphasis"><em>Displaying a countdown timer graphically (5, 4, 3, 2, 1 – blast off)</em></span> recipe.</p></li><li style="list-style-type: disc"><p>The <span class="emphasis"><em>Displaying images for corresponding floats and ranges</em></span> recipe.</p></li></ul></div></div></div>