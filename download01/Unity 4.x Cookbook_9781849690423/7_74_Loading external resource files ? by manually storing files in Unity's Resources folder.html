<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch07lvl1sec74"></a>Loading external resource files – by manually storing files in Unity's Resources folder</h2></div></div><hr /></div><p>At times the contents of external <a id="id493" class="indexterm"></a>resource files may need to be changed after the game is compiled. Hosting resource files on the Web may not be an option. There is a method of manually storing and reading files from the <code class="literal">Resources</code> folder of the compiled game. This allows for those files to be changed after the game's compilation.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note20"></a>Note</h3><p>This technique only works when you compile to a Windows or Mac <span class="emphasis"><em>standalone executable</em></span>. It will not work for Web Player builds, for example.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec254"></a>Getting ready</h3></div></div></div><p>The <code class="literal">0423_07_01</code> folder <a id="id494" class="indexterm"></a>provides the <code class="literal">externalTexture.jpg</code> texture image that you can use for this recipe.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec255"></a>How to do it...</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Add the following C# script to the <span class="strong"><strong>Main Camera</strong></span>:</p><div class="informalexample"><pre class="programlisting">// file: ReadManualResourceImageFile.cs
using UnityEngine;
using System.Collections;
using System.IO;

public class ReadManualResourceImageFile : MonoBehaviour {
  private string fileName = "externalTexture.jpg";
  private string url;
  private Texture2D externalImage;

  private void Start () {
     url = "file:" + Application.dataPath;
     url = Path.Combine(url, "Resources");
     url = Path.Combine(url, fileName);
    
    StartCoroutine( LoadWWW() );
  }
  
  private void OnGUI() {
    GUILayout.Label ( "url = " + url );
    GUILayout.Label ( externalImage );
  }

  private IEnumerator LoadWWW(){
    yield return 0;
    WWW www = new WWW (url);
    yield return www;
      externalImage = www.texture;
  }
}</pre></div></li><li><p>Build your (Windows or Mac) standalone executable.</p></li><li><p>Copy the <code class="literal">externalTexture.jpg</code> image into your standalone's <code class="literal">Resources</code> folder.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note21"></a>Note</h3><p>You will need to place the files in the <code class="literal">Resources</code> folder manually after every compilation.</p><p><span class="strong"><strong>WINDOWS and LINUX</strong></span>: When you create a Windows or Linux standalone executable, there is also a <code class="literal">_Data</code> folder created with the executable application file. The <code class="literal">Resources</code> folder can be found inside this data folder.</p><p><span class="strong"><strong>MAC</strong></span>: A Mac standalone application executable looks like a single file, but it is actually a Mac OS <code class="literal">package</code> folder. Right-click the executable file and select <span class="strong"><strong>Show Package Contents</strong></span>. You will then find the standalone's <code class="literal">Resources</code> folder inside the <code class="literal">Contents</code> folder.</p></div></li><li><p>Run your<a id="id495" class="indexterm"></a> standalone game application, and the image should be displayed.</p></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec256"></a>How it works...</h3></div></div></div><p>Note the need to use the <code class="literal">System.IO</code> package for this recipe.</p><p>When the executable runs, the <code class="literal">WWW</code> object spots that the URL starts with the word "file:" so Unity attempts to find the external resource file in its <code class="literal">Resources</code> folder and then load its contents.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec257"></a>There's more...</h3></div></div></div><p>Here are some details you don't want to miss.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch07lvl3sec61"></a>Avoiding cross-platform problems with Path.Combine() rather than "/" or "\"</h4></div></div></div><p>The filepath folder separator <a id="id496" class="indexterm"></a>character is different for Windows and Mac filesystems ("\" backslash for Windows, "/" forward slash for the Mac). However, Unity knows which kind of standalone you are compiling your project into, therefore the <code class="literal">Path.Combine()</code> method<a id="id497" class="indexterm"></a> will insert the appropriate separator slash character to form the file URL that is required.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch07lvl3sec62"></a>Loading a text file using this approach</h4></div></div></div><p>To use this<a id="id498" class="indexterm"></a> technique to load an external text file, you'll need a private string variable:</p><div class="informalexample"><pre class="programlisting">private string textFileContents = "(still loading file ...)";</pre></div><p>Replace your <code class="literal">LoadWWW()</code> method<a id="id499" class="indexterm"></a> with one that extracts the text of the loaded resource and stores it in your private string variable:</p><div class="informalexample"><pre class="programlisting">private IEnumerator LoadWWW(){
  yield return 0;
  WWW www = new WWW (url);
  yield return textFile;
    textFileContents = www.text;
}</pre></div><p>Then change <code class="literal">OnGUI()</code> to display the string as a label:</p><div class="informalexample"><pre class="programlisting">private void OnGUI() {
  GUILayout.Label ( "url = " + url );
  GUILayout.Label ( textFileContents );
}</pre></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch07lvl3sec63"></a>WWW and resource contents</h4></div></div></div><p>The <code class="literal">WWW</code> class<a id="id500" class="indexterm"></a> defines several different properties and methods to allow downloaded media resource file data to be extracted into appropriate variables for use in the game. The most useful of these include:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p><code class="literal">.text</code>: A <a id="id501" class="indexterm"></a>read-only property returning web data as a string</p></li><li style="list-style-type: disc"><p><code class="literal">.texture</code>: A <a id="id502" class="indexterm"></a>read-only property returning web data as a <code class="literal">Texture2D</code> image</p></li><li style="list-style-type: disc"><p><code class="literal">.GetAudioClip()</code>: A <a id="id503" class="indexterm"></a>method that returns web data as an <code class="literal">AudioClip</code> object</p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note22"></a>Note</h3><p>For more information about the Unity <code class="literal">WWW</code> class, see <a class="ulink" href="http://docs.unity3d.com/Documentation/ScriptReference/WWW.html" target="_blank">http://docs.unity3d.com/Documentation/ScriptReference/WWW.html</a>.</p></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec258"></a>See also</h3></div></div></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>The <span class="emphasis"><em>Loading external resource files – by Unity Default Resources</em></span> recipe.</p></li><li style="list-style-type: disc"><p>The <span class="emphasis"><em>Loading external resource files – by downloading files from the Internet</em></span> recipe.</p></li></ul></div></div></div>