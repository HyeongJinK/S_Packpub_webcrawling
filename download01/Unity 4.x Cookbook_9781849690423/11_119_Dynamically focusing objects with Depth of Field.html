<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch11lvl1sec115"></a>Dynamically focusing objects with Depth of Field</h2></div></div><hr /></div><p>In this recipe, we <a id="id877" class="indexterm"></a>will learn how to change the camera's Depth of Field focus point to the object selected by the user.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch11lvl2sec398"></a>Getting ready</h3></div></div></div><p>In order to follow this recipe, <a id="id878" class="indexterm"></a>please import the <code class="literal">ObjectFocus</code> package, available in the <code class="literal">0423_11_01</code> folder, into your project. The package includes a basic scene containing a <span class="emphasis"><em>Go</em></span> board game setup and a camera.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch11lvl2sec399"></a>How to do it...</h3></div></div></div><p>To dynamically set focus on objects using Depth of Field, perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Import the <span class="strong"><strong>ObjectFocus</strong></span> package and open the <span class="strong"><strong>goBoardGame</strong></span> scene, inside the <span class="strong"><strong>11_01</strong></span> folder. Also import, if you haven't done so already, the <span class="strong"><strong>Package Image Effects</strong></span> (<span class="strong"><strong>Assets</strong></span> | <span class="strong"><strong>Import Package</strong></span> | <span class="strong"><strong>Image Effects (Pro Only)</strong></span>).</p></li><li><p>Select the <span class="strong"><strong>Main Camera</strong></span> and apply the Depth of Field 3.4 image effect (<span class="strong"><strong>Component</strong></span> | <span class="strong"><strong>Image Effects</strong></span> | <span class="strong"><strong>Depth of Field (3.4)</strong></span>).</p></li><li><p>With the <span class="strong"><strong>Main Camera</strong></span> selected, <a id="id879" class="indexterm"></a>access the <span class="strong"><strong>Depth of Field</strong></span> component in the <span class="strong"><strong>Inspector</strong></span> window and apply the <span class="strong"><strong>boardGo</strong></span> game object as the <span class="strong"><strong>Object Focus</strong></span> target. Also, change <span class="strong"><strong>Focal Distance</strong></span> to <span class="strong"><strong>1</strong></span>:</p><div class="mediaobject"><img src="/graphics/9781849690423/graphics/0423_12_01.jpg" /></div></li><li><p>In the <span class="strong"><strong>Project</strong></span> view, click on the <span class="strong"><strong>Create</strong></span> drop-down menu and choose <span class="strong"><strong>C# Script</strong></span>. Rename it to <code class="literal">CameraFocus</code> and open it in your editor.</p></li><li><p>Open your script and replace everything with the following code:</p><div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;

public class CameraFocus : MonoBehaviour
{
  private DepthOfField34 depthOfField;

  void Start(){
    depthOfField = GetComponent&lt;DepthOfField34&gt;();
  }
    void Update(){     
        if (Input.GetButtonDown ("Fire1")) { 
        Ray ray= Camera.main.ScreenPointToRay (Input.mousePosition); 
            RaycastHit hit ; 
        if(depthOfField){
            if (Physics.Raycast(ray, out hit, Camera.main.farClipPlane)) { 
                  depthOfField.objectFocus = hit.collider.transform; 
              } 
          }
        }
    }
}</pre></div></li><li><p>Save your script and attach it to <span class="strong"><strong>Main Camera</strong></span>.</p></li><li><p>Play your scene. You should be able focus on individual tokens by clicking on them.</p></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch11lvl2sec400"></a>How it works...</h3></div></div></div><p>The <code class="literal">CameraFocus</code> script <a id="id880" class="indexterm"></a>uses a <code class="literal">Raycast()</code> function to check for collidrs <a id="id881" class="indexterm"></a>and, <a id="id882" class="indexterm"></a> if positive, designates the collider's game object as the new focal point for the <span class="strong"><strong>Depth of Field 3.4</strong></span> effect. Thus, it is important that these objects have colliders attached to them.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch11lvl2sec401"></a>There's more...</h3></div></div></div><p>Unity 4 includes a new, improved Depth of Field (Lens Blur, Scatter, and DX11). To use it instead of Version 3.4, please see the script named <code class="literal">CameraFocusScatter</code> in the <code class="literal">0423_11_01</code> folder.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch11lvl2sec402"></a>See also</h3></div></div></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>The <span class="emphasis"><em>Zooming a telescopic camera</em></span> recipe in <a class="link" href="#" linkend="ch02">Chapter 2</a>, <span class="emphasis"><em>Using Cameras</em></span></p></li></ul></div></div></div>