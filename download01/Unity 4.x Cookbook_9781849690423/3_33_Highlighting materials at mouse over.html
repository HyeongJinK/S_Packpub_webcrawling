<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec37"></a>Highlighting materials at mouse over</h2></div></div><hr /></div><p>Highlighting an object<a id="id200" class="indexterm"></a> is a very effective way of letting players know they can interact with it. This is very useful in a number of game genres such as puzzles and point-and-click adventures, and it can also be applied to create 3D user interfaces.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec117"></a>Getting ready</h3></div></div></div><p>For this recipe, you'll need a 3D model and a 2D texture map. If you don't have them, please import the <code class="literal">highlight</code> package, available in the <code class="literal">0423_03_08</code> folder, into your project.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec118"></a>How to do it...</h3></div></div></div><p>To highlight a material at mouse over, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Import the Unity package and open the <code class="literal">highlightScene</code><a id="id201" class="indexterm"></a> scene.</p></li><li><p>In the <span class="strong"><strong>Hierarchy</strong></span> view, select the 3D object to be highlighted (in our case, the object named <code class="literal">highlightCube</code>).</p></li><li><p>The <span class="strong"><strong>Inspector</strong></span> view should display the game object's material. Using the drop-down menu, change its <span class="strong"><strong>Shader</strong></span> option from <span class="strong"><strong>Diffuse</strong></span> to <span class="strong"><strong>VertexLit</strong></span>.</p></li><li><p>Apply the <code class="literal">baseBox</code> texture to the Base texture of the material.</p></li><li><p>Note that the <span class="strong"><strong>VertexLit</strong></span> shader has a property called <span class="strong"><strong>Emissive Color</strong></span>, which should be black as default. If you want a preview of what is going to happen later in the recipe, change that to green (but be sure to change it back to black).</p></li><li><p>We need to create a script. In the <span class="strong"><strong>Project</strong></span> view, click on the <span class="strong"><strong>Create</strong></span> drop-down menu and choose <span class="strong"><strong>C# Script</strong></span>. Rename it <code class="literal">HighlightObject</code> and open it in your editor.</p></li><li><p>Replace everything with the following code:</p><div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;

public class HighlightObject : MonoBehaviour
{
    public Color initialColor;
    public Color highlightColor;
    public Color mousedownColor;
    private bool mouseon = false;
    void OnMouseEnter()
    {
        mouseon = true;
        renderer.material.SetColor("_Emission", highlightColor);
    }
    void OnMouseExit()
    {
        mouseon = false;
        renderer.material.SetColor("_Emission", initialColor);
    }
    void OnMouseDown()
    {
        renderer.material.SetColor("_Emission", mousedownColor);
    }
    void OnMouseUp()
    {
        if (mouseon)
            renderer.material.SetColor("_Emission", highlightColor);
        else
            renderer.material.SetColor("_Emission", initialColor);
    }
}</pre></div></li><li><p>Save your <a id="id202" class="indexterm"></a>script and apply it to the <code class="literal">highlightCube</code> game object (in the <span class="strong"><strong>Hierarchy</strong></span> view).</p></li><li><p>Select the <span class="strong"><strong>highlightCube</strong></span> game object and, in the <span class="strong"><strong>Inspector</strong></span> view, set <span class="strong"><strong>Highlight Color</strong></span> to dark green (<span class="strong"><strong>R</strong></span>: <span class="strong"><strong>0</strong></span>, <span class="strong"><strong>G</strong></span>: <span class="strong"><strong>100</strong></span>, <span class="strong"><strong>B</strong></span>: <span class="strong"><strong>0</strong></span>) and <span class="strong"><strong>Mousedown Color</strong></span> to light green (<span class="strong"><strong>R</strong></span>:<span class="strong"><strong>0</strong></span>, <span class="strong"><strong>G</strong></span>: <span class="strong"><strong>255</strong></span>, <span class="strong"><strong>B</strong></span>: <span class="strong"><strong>0</strong></span>):</p><div class="mediaobject"><img src="/graphics/9781849690423/graphics/0423_03_31.jpg" /></div></li><li><p>Add a box collider to the <span class="strong"><strong>highlightCube</strong></span> game object by navigating to <span class="strong"><strong>Component</strong></span> | <span class="strong"><strong>Physics</strong></span> | <span class="strong"><strong>Box Collider</strong></span>.</p></li><li><p>Test the scene. The box should be highlighted when the mouse is over it (and even more when clicked).</p></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec119"></a>How it works...</h3></div></div></div><p>The box collider detects the mouse pointer over the object, working as a trigger for the emissive color value change. The <code class="literal">mouseon</code> Boolean variable<a id="id203" class="indexterm"></a> is used to detect if the mouse button is released within or out of the box collider, changing its color accordingly.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec120"></a>There's more...</h3></div></div></div><p>You can achieve other interesting results using other shaders, but be sure to address the changes to their particular material properties.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec33"></a>Highlighting with self-illuminated shaders</h4></div></div></div><p>Self-illuminated shaders <a id="id204" class="indexterm"></a>will work if you replace <code class="literal">_Emission</code> with <code class="literal">_Color</code> in the script.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec34"></a>Using transparent shaders</h4></div></div></div><p>Transparent shaders <a id="id205" class="indexterm"></a>can be an interesting option. Remember you can change the transparency of the material by changing the Alpha value of its main color (which should be addressed as <code class="literal">_Color</code> in the script).</p></div></div></div>