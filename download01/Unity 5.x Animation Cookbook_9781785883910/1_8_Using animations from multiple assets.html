<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch01lvl1sec15"></a>Using animations from multiple assets</h2></div></div><hr /></div><p>At times it is very convenient to separate <span>animations</span><a id="id325289112" class="indexterm"></a> to multiple assets. A common scenario is to have rigged models separated from animations or different animation types separated from each other (combat from movement, movement from actions, actions from cut scenes, and so on). This recipe shows how to do it for both <strong class="userinput"><code>Humanoid</code></strong> and <strong class="userinput"><code>Generic</code></strong> rigs.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec32"></a>Getting ready</h3></div></div></div><p>Before we start, you should prepare and import at least two assets containing animations. If you are using a <strong class="userinput"><code>Generic</code></strong> rig, make sure to have the same rig in both assets. You can also use the provided example Unity project and go to the <code class="literal">Chapter 01 Working with animations\Recipe 06 Using animations from multiple assets</code>. There is a scene called <code class="literal">Example.unity</code> file there. In the scene <strong class="userinput"><code>Hierarchy</code></strong> you can find a <strong class="userinput"><code>Character</code></strong> game object. It has an attached <strong class="userinput"><code>Animator Controller</code></strong> in which you can find two animations: <strong class="userinput"><code>Idle</code></strong> and <strong class="userinput"><code>Wave</code></strong>. In the <strong class="userinput"><code>Rigs</code></strong> directory, you will find the <code class="literal">Character.fbx</code> asset containing only a rigged character along with the <code class="literal">Idle.fbx</code> and <code class="literal">Wave.fbx</code> assets containing the corresponding animations.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip6"></a>Note</h3><p>If you are exporting FBX files from Blender, make sure to disable the <strong class="userinput"><code>Add Leaf Bones</code></strong> option in the <strong class="userinput"><code>exporter</code></strong>. If you are exporting just the rig and animations (without a mesh), add an empty object to the scene. If you will not do this, your rig could be messed up a bit after import.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec33"></a>How to do it...</h3></div></div></div><p>To use <span>animations</span><a id="id325509815" class="indexterm"></a> from multiple assets, you need to follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Import the files to Unity.</li><li>If you are using the Generic rig, you have to set the <strong class="userinput"><code>Avatar Definition</code></strong> to <strong class="userinput"><code>Create From This Model</code></strong> on your character (or reference character if you plan to have multiple characters with the same rig). For each imported animation asset, set the <strong class="userinput"><code>Avatar Definition</code></strong> to <strong class="userinput"><code>Copy From Other Avatar</code></strong> and choose the avatar of your character or reference character. To do so, you need to unfold the character asset, find the avatar, and drag and drop it to the <strong class="userinput"><code>Source</code></strong> field in the <strong class="userinput"><code>Inspector</code></strong> tab.</li></ol></div><div class="mediaobject"><img src="/graphics/9781785883910/graphics/6181f524-0f93-416a-8f2b-c73c19302c57.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="3" type="1"><li>If you are using a <strong class="userinput"><code>Humanoid</code></strong> rig, you don't have to copy the <strong class="userinput"><code>Avatar Definition </code></strong>(you still can if your rigs are exactly the same; that way you will have fewer avatars in your project, making it easier to find the ones you need).</li><li>Create or open an <strong class="userinput"><code>Animator Controller</code></strong>.</li><li>Assign animations from different files and build transitions between them.</li><li>Run the game to see the animations work.</li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec34"></a>How it works...</h3></div></div></div><p>All <strong class="userinput"><code>Generic</code></strong> rigs can use <span>animations</span><a id="id325522926" class="indexterm"></a> from multiple assets that share the same <strong class="userinput"><code>Avatar Definition</code></strong>. To share the same <strong class="userinput"><code>Avatar Definition</code></strong>, <strong class="userinput"><code>Generic</code></strong> rigs have to have exactly the same rigs (the same hierarchy, the same bone names and transforms). All <strong class="userinput"><code>Humanoid</code></strong> rigs can use animations from multiple assets that are also set to <strong class="userinput"><code>Humanoid</code></strong>. Additionally, they don't need to have the same rigs because Unity automatically retargets all humanoid animations.</p></div></div>