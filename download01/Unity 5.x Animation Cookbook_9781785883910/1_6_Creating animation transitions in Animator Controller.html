<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch01lvl1sec13"></a>Creating animation transitions in Animator Controller</h2></div></div><hr /></div><p>As mentioned previously, <span>Animator Controllers</span><a id="id325289112" class="indexterm"></a> are state machines containing animations (states). Any given character can be in one such state (play one animation) at a time. To switch between states (<span>animations</span><a id="id325289121" class="indexterm"></a>), you need to create state transitions.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec24"></a>Getting ready</h3></div></div></div><p>Before we start, you should have an animated model placed on a scene with an Animator Controller assigned. You can find such a model in the provided example Unity project. Go to the <code class="literal">Chapter 01 Working with animations\Recipe 04 Creating animation transitions in Animator Controller</code> directory. Open the <code class="literal">Example.unity</code> file. You will find a <strong class="userinput"><code>Sheep</code></strong> object in the <strong class="userinput"><code>Hierarchy</code></strong>. It has an <strong class="userinput"><code>Animator Controller</code></strong> assigned. You can open it by double-clicking on the <strong class="userinput"><code>Controller</code></strong> field in the <strong class="userinput"><code>Animator</code></strong> component of the <strong class="userinput"><code>Sheep</code></strong> game object.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec25"></a>How to do it...</h3></div></div></div><p>To create a state transition in an <span>Animator Controller</span><a id="id325509753" class="indexterm"></a>, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Open the <strong class="userinput"><code>Animator Controller</code></strong> asset.</li><li>Add at least two states by dragging and dropping two animations into the <strong class="userinput"><code>Animator</code></strong> window. You can also point the cursor at an empty space in the <strong class="userinput"><code>Animator</code></strong> window, press the right mouse button and select <strong class="userinput"><code>Create State</code></strong> | <strong class="userinput"><code>Empty</code></strong>, then select the state, and add an <span>animation</span><a id="id325509826" class="indexterm"></a> to the <strong class="userinput"><code>Motion</code></strong> field in the <strong class="userinput"><code>Inspector</code></strong>.</li><li>Click on the right mouse button on the state you want to transition from and choose <strong class="userinput"><code>Make Transition</code></strong>.</li><li>Drag the transition onto the state you want to transition to and click the left mouse button.</li></ol></div><div class="orderedlist"><ol class="orderedlist arabic" start="5" type="1"><li>A default transition will be created. The state will switch after its animation has finished playing. To be able to observe it in gameplay, make sure you transition from the default (orange) state, as only the default state will play when the game starts.</li></ol></div><div class="mediaobject"><img src="/graphics/9781785883910/graphics/df168098-8c35-4b20-98a8-ab0a79ed89f1.png" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec26"></a>How it works...</h3></div></div></div><p><span>State transitions</span><a id="id325509868" class="indexterm"></a> define how we can <span class="emphasis"><em>travel</em></span> through the graph of animations. They are combined with transition conditions based on Animator Controller parameters; we will discuss the parameters in detail in the next recipe: <span class="emphasis"><em>Using parameters to control the animation flow</em></span>. Each transition has a set of properties we can adjust. Click on the transition (white arrow) to select it. You can find the transition properties in the <strong class="userinput"><code>Inspector</code></strong> tab (make sure to unfold the <strong class="userinput"><code>Settings</code></strong> foldout):</p><div class="mediaobject"><img src="/graphics/9781785883910/graphics/a4f400f5-e421-41f0-8e9e-f4d448001785.png" /></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><strong class="userinput"><code>Has Exit Time</code></strong>: If set to true, this enables the transition only after a given percentage of the animation has been already played. If disabled, the transition will take place instantly after its conditions are met. If you want to create a sequence of <span>animations</span><a id="id325522940" class="indexterm"></a>, set it to true.</li><li style="list-style-type: disc"><strong class="userinput"><code>Exit Time</code></strong>: This is the percentage (0-1 range) of the animation length after which the <strong class="userinput"><code>Has Exit Time</code></strong> condition is met. If you set it to <code class="literal">0.5</code>, for instance, the state will transition after 50 percent of the animation was played.</li><li style="list-style-type: disc"><strong class="userinput"><code>Fixed Duration</code></strong>: This property is combined with the next one, <strong class="userinput"><code>Transition Duration (s)</code></strong>. If it's on, the <strong class="userinput"><code>Transition Duration (s)</code></strong> is in seconds, and if it's off, the <strong class="userinput"><code>Transition Duration (s)</code></strong> is in percentage of the animation time.</li><li style="list-style-type: disc"><strong class="userinput"><code>Transition Duration (s)</code></strong>: the time of the state transition. This is how long the animations will transition one into another. Animations are being blended together during the transition. Longer transitions are smoother, shorter, are more sharp. A good default value is around <code class="literal">0.25</code>.</li></ul></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><strong class="userinput"><code>Transition Offset</code></strong>: This offsets the target animation in time. The value is in percentage of the animation. Setting it to <code class="literal">0.3</code> means that the target animation will start from 30 percent of its length instead of the beginning.</li><li style="list-style-type: disc"><strong class="userinput"><code>Interruption Source</code></strong>: This setting tells Unity whether the transition can be interrupted by other transitions. You can set it to:
<div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><strong class="userinput"><code>None: </code></strong>the transition cannot be interrupted by any other transition.</li><li style="list-style-type: disc"><strong class="userinput"><code>Current State: </code></strong>The transition can be interrupted by transitions from the state we are trying to transition <span class="emphasis"><em>from</em></span>.</li><li style="list-style-type: disc"><strong class="userinput"><code>Next State: </code></strong>The transition can be interrupted by transition from the state we are trying to transition <span class="emphasis"><em>to</em></span>.</li><li style="list-style-type: disc"><strong class="userinput"><code>Current State then Next State: </code></strong>The transition can be interrupted by the transitions of the state we are trying to transition from or by the transitions of the state we are trying to transition to. The transitions from the state we are trying to transition <span class="emphasis"><em>from </em></span>take the priority.</li><li style="list-style-type: disc"><strong class="userinput"><code>Next State then Current State: </code></strong>The transition can be interrupted by the transitions of the state we are trying to transition from or by the transitions of the state we are trying to transition to. The transitions from the state we are trying to transition <span class="emphasis"><em>to </em></span>take the priority.</li><li style="list-style-type: disc"><strong class="userinput"><code>Ordered Interruption: </code></strong>If set to false, this lets the transition be interrupted by other transitions independently of their order. If set to true,the order of the transitions matters.</li></ul></div></li></ul></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec27"></a>There's more...</h3></div></div></div><p>When you create an <span>Animator Controller</span><a id="id325532791" class="indexterm"></a>, you can see three more nodes apart from your animation states:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><strong class="userinput"><code>Entry and Exit</code></strong>: This node is used when you transition between state machines (Animator Controllers or substate machines). We will discuss it in detail in the <span class="emphasis"><em>Using Sub-State Machines in Animator Controller</em></span> recipe in <span><a class="link" href="#" linkend="ch06">Chapter 6</a></span>, <span class="emphasis"><em>Handling Combat</em></span>.</li><li style="list-style-type: disc"><strong class="userinput"><code>Any state</code></strong>: This node can be used as a helper to make a transition from any state to a <span>given state</span><a id="id325532823" class="indexterm"></a>. It is used when you have an animation that can be played anytime, for instance, a hit animation. We will discuss it in detail in the <span class="emphasis"><em>Using transitions from any state to play hit reactions</em></span> recipe in <span><a class="link" href="#" linkend="ch06">Chapter 6</a></span>, <span class="emphasis"><em>Handling Combat</em></span>.</li></ul></div></div></div>