<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch07lvl1sec77"></a>Using sprite sheets to animate particles</h2></div></div><hr /></div><p>We can add <span>sprite sheet</span><a id="id325241415" class="indexterm"></a><span>animation</span><a id="id325509761" class="indexterm"></a> to Unity's particles to make them more interesting. This concept is especially useful for various explosions and magical effects.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec241"></a>Getting ready</h3></div></div></div><p>To follow this recipe, we need an animation exported as a sprite sheet. If you want to know how to create a sprite sheet animation, you can read the <span class="emphasis"><em>Exporting a 2D sprite animation from a 3D package</em></span> recipe in <span><a class="link" href="#" linkend="ch03">Chapter 3</a></span>, <span class="emphasis"><em>2D and User Interface Animation,</em></span> where you can find an example sprite animation.</p><div class="mediaobject"><img src="/graphics/9781785883910/graphics/4bfc14e9-f288-4e14-85bb-f46f71cf5192.png" /></div><p>Example sprite sheet animation</p><p>You can also open the provided example project and go to the <code class="literal">Chapter 07 Special effects\Recipe 07 Using sprite sheets to animate particles</code> directory. If you open the <code class="literal">Example.unity</code> scene there and play the game, you will see a particle system with explosions using sprite sheet animation. You can find the necessary sprite sheet in the <code class="literal">Rigs</code> directory.</p><p> </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec242"></a>How to do it...</h3></div></div></div><p>To use <span>sprite sheets</span><a id="id325509859" class="indexterm"></a> for <span>particles</span><a id="id325509867" class="indexterm"></a> animation, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Import the sprite sheet texture into Unity. Its size should be a power of 2. The animation should be rendered from left to right and from top to bottom in equal tiles (128 × 128, 256 × 256, or similar).</li><li>Set it as a normal <strong class="userinput"><code>Texture</code></strong> (not a Sprite) and check the <strong class="userinput"><code>Alpha Is Transparency</code></strong> option.</li><li>Create a new <strong class="userinput"><code>Material</code></strong> and name it <code class="literal">Explosion</code>.</li><li>Set the <strong class="userinput"><code>Shader</code></strong> to <strong class="userinput"><code>Particles</code></strong> | <strong class="userinput"><code>Alpha Blended</code></strong> (you can also use Additive or Additive Soft).</li><li>Drag and drop the texture into the <strong class="userinput"><code>Particle Texture</code></strong> slot in the <strong class="userinput"><code>Material</code></strong>.</li><li>Create an empty game object in the scene and name it <code class="literal">AnimatedExplosion</code>.</li><li>Add a <strong class="userinput"><code>Particle System</code></strong> component to it.</li><li>Drag and drop the <strong class="userinput"><code>Explosion</code></strong> material into the <strong class="userinput"><code>Renderer</code></strong> | <strong class="userinput"><code>Material</code></strong> slot.</li><li>Check the <strong class="userinput"><code>Texture Sheet Animation</code></strong> option and unfold it.</li><li>Set the <strong class="userinput"><code>Tile</code></strong>'s <strong class="userinput"><code>X</code></strong> and <strong class="userinput"><code>Y</code></strong> fields according to your exported sprite sheet. In our example, the sheet has <strong class="userinput"><code>8</code></strong> tiles in <strong class="userinput"><code>X</code></strong> and <strong class="userinput"><code>4</code></strong> in <strong class="userinput"><code>Y</code></strong>, as shown in the following screenshot:</li></ol></div><div class="mediaobject"><img src="/graphics/9781785883910/graphics/e83eeca5-486e-4022-8c7d-b641ef28a499.png" /></div><p>Texture Sheet Animation settings</p><div class="orderedlist"><ol class="orderedlist arabic" start="11" type="1"><li>Adjust the <strong class="userinput"><code>Start Lifetime</code></strong> of the particles to match the frame rate of your exported sprite sheet animation. If your exported animation lasts 1 second, then the <strong class="userinput"><code>Start Lifetime</code></strong> of a particle should be also equal to 1 second.</li><li>Adjust the other settings of the particle system to your liking. In this example, those settings are as follows: 
<div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><strong class="userinput"><code>Start Lifetime</code></strong>: 1</li><li style="list-style-type: disc"><strong class="userinput"><code>Looping</code></strong>: True</li><li style="list-style-type: disc"><strong class="userinput"><code>Start Speed</code></strong>: 0</li><li style="list-style-type: disc"><strong class="userinput"><code>Start Size</code></strong>: 5</li><li style="list-style-type: disc"><strong class="userinput"><code>Emission</code></strong> | <strong class="userinput"><code>Rate</code></strong>: 1</li><li style="list-style-type: disc"><strong class="userinput"><code>Shape</code></strong> | <strong class="userinput"><code>Shape</code></strong>: Sphere</li><li style="list-style-type: disc"><strong class="userinput"><code>Shape</code></strong> | <strong class="userinput"><code>Radius</code></strong>: 4</li></ul></div></li><li>Play the game or simulate the particle system to see the effect.</li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec243"></a>How it works...</h3></div></div></div><p>Unity's particle system can play <span>sprite sheet</span><a id="id325550913" class="indexterm"></a> animation for each of its <span>particles</span><a id="id325550921" class="indexterm"></a>. To do so, the <strong class="userinput"><code>Texture Sheet</code></strong> Animation option has to be checked. This option has several important settings:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><strong class="userinput"><code>Tiles</code></strong>: The <strong class="userinput"><code>X</code></strong> and <strong class="userinput"><code>Y</code></strong> fields specify how many tiles in <strong class="userinput"><code>X</code></strong> and <strong class="userinput"><code>Y</code></strong> the texture sheet has. Animation is played from left to right and from top to bottom.</li><li style="list-style-type: disc"><strong class="userinput"><code>Animation</code></strong>: We can use the whole sheet or a single row. If the <strong class="userinput"><code>Single Row</code></strong> option is selected, we can use a random row of the Sprite Sheet or specify a single row for our animation. This way we can have multiple animations in one sprite sheet. It also gives us the possibility to have multiple animations per particle system, instead of playing the same one for every particle (Random Row has to be checked to achieve this).</li><li style="list-style-type: disc"><strong class="userinput"><code>Frame Over Time</code></strong>: This is a curve describing which frame should be played over time. Remember that, by default, the whole sprite sheet is always played during the whole lifetime of a particle.</li><li style="list-style-type: disc"><strong class="userinput"><code>Cycles</code></strong>: Here we can specify how many cycles of the animation should be played in one lifetime of a particle.</li></ul></div></div></div>