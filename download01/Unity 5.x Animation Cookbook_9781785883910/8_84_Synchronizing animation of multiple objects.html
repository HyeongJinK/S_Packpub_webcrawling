<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch08lvl1sec84"></a>Synchronizing animation of multiple objects</h2></div></div><hr /></div><p>In a cutscene, we have to synchronize <span>animation</span><a id="id325241223" class="indexterm"></a> of multiple objects in time. This recipe shows how to do it.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec262"></a>Getting ready</h3></div></div></div><p>To follow this recipe, you will need an animated character and an animated object. You can download the provided example Unity project and go to the <code class="literal">Chapter 08 Animating Cutscenes\Recipe 03 Synchronizing animation of multiple objects</code> directory. You can find the <code class="literal">Example.unity</code> scene there. If you play the game, you will see a character kicking a soccer ball. Both objects are animated and synchronized. You can find the needed animations in the <code class="literal">Animations</code> directory:</p><div class="mediaobject"><img src="/graphics/9781785883910/graphics/e0a12d7d-63b8-4d7e-8574-bba61d26646b.png" /></div><p>Synchronized animation of the ball and a the character kicking it</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec263"></a>How to do it...</h3></div></div></div><p>To synchronize animation of multiple objects, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Open both objects in your 3D package (we are using Blender in this example).</li><li>Synchronize both objects' animations in the 3D package. In our example, the animation has about 160 frames. Both objects have the same length of animation:</li></ol></div><div class="mediaobject"><img src="/graphics/9781785883910/graphics/ccb32840-61d1-4c9f-9c7e-c8e93c6bcedf.png" /></div><p>Ball and character animation synchronized in a 3D package</p><div class="orderedlist"><ol class="orderedlist arabic" start="3" type="1"><li>In this example, the ball has no skeletal animation; we only animate its T<strong class="userinput"><code>ransform</code></strong>.</li><li>Make sure to have key frames for both the ball and the character in the first and last frames of the animation. This way, the animations will have equal length after importing them to Unity.</li><li>After synchronizing the animation in a 3D package, save it to two files: one with only the ball object and its animation, and one only with the character and its animation. Unity can import multiple transform animations, but has problems with importing multiple skeletal animations (for example, you will not be able to set the rig to <strong class="userinput"><code>Humanoid</code></strong>).</li><li>Export both files separately to FBX format and make sure to include the <strong class="userinput"><code>Default Take</code></strong>. In Blender, use the 6.1 version of FBX.</li><li>Import both files to Unity.</li><li>If you want to use a <strong class="userinput"><code>Humanoid</code></strong> character, make sure to set all the <strong class="userinput"><code>Based Upon</code></strong> options to <strong class="userinput"><code>Original</code></strong> in the <strong class="userinput"><code>Animation Import Settings</code></strong>.</li><li>Create an Animator Controller for the ball and another one for the character with the soccer kick animation.</li><li>Place the ball and the character in the same location on the scene. Attach the Animator Controllers to them.</li><li>Play the game to see the effect.</li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec264"></a>How it works...</h3></div></div></div><p>The best way to synchronize cutscene animations is to make sure that they have the same length and are synchronized in a 3D package. If we import them in Unity and start the playback in the same moment, they will stay synchronized.</p><p>Remember that you need to export the characters as separate files if you want to use the <strong class="userinput"><code>Humanoid</code></strong> rigs.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec265"></a>There's more...</h3></div></div></div><p>You can also synchronize animations using Animation Events. In our example, we could create the ball animation from the moment it is kicked by the character and transition to it using an Animation Event in the character's kick animation. Although this is possible, it is more cumbersome than synchronizing the whole cutscene in a 3D package.</p></div></div>