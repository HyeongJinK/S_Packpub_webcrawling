<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec34"></a>Creating a swipe transition with the Animation View</h2></div></div><hr /></div><p>In this recipe, we will create a bit more creative transition effect. A lot of the steps are similar to the previous recipe, but the final result is completely different. This recipe's goal is to encourage you to experiment with animating different UI properties to achieve interesting effects.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec94"></a>Getting ready</h3></div></div></div><p>Similar to the previous recipe, we will create everything from scratch in Unity; you don't have to prepare anything beforehand. You can open the provided example Unity project and go to the <code class="literal">Chapter 03 2D and user interface animation\Recipe 06 Creating a swipe transition with the animation view</code> directory. You will find an <code class="literal">Example.unity</code> scene there. Play the game and press space bar to see the swipe transition effect.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec95"></a>How to do it...</h3></div></div></div><p>To create a swipe transition effect, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Open a scene.</li><li>Create an <strong class="userinput"><code>Image</code></strong> in the <strong class="userinput"><code>Hierarchy</code></strong>. To do so, go to <strong class="userinput"><code>Game Object</code></strong> | <strong class="userinput"><code>UI</code></strong> | <strong class="userinput"><code>Image</code></strong> menu on the top of the screen.</li><li><strong class="userinput"><code>Image</code></strong> and <strong class="userinput"><code>Canvas</code></strong> game objects will be created in the <strong class="userinput"><code>Hierarchy</code></strong>.</li><li>Select the <strong class="userinput"><code>Image</code></strong> game object and set its name to <code class="literal">BlackScreen</code>.</li><li>Right-click on the <strong class="userinput"><code>Canvas</code></strong> game object and choose <strong class="userinput"><code>Create Empty</code></strong> to create an empty game object.</li><li>Set the name of the newly created game object to <code class="literal">FadeAnimator</code>. This object will animate the effect.</li><li>Set the <strong class="userinput"><code>Anchor Preset</code></strong> of the <strong class="userinput"><code>BlackScreen</code></strong> and <strong class="userinput"><code>FadeAnimator</code></strong> game objects to stretch in both <span class="emphasis"><em>X</em></span> and <span class="emphasis"><em>Y</em></span> coordinates the same way as we did in the previous recipe.</li><li>Select the <strong class="userinput"><code>Canvas</code></strong> game object and add a <strong class="userinput"><code>Canvas Scaler</code></strong> component to it. We will need it to scale our effect when players change the screen resolution in our game.</li><li>Set the <strong class="userinput"><code>UI Scale Mode</code></strong> in the <strong class="userinput"><code>Canvas Scaler</code></strong> component to <strong class="userinput"><code>Scale With Screen Size</code></strong> to scale the whole canvas, depending on the screen resolution.</li><li>Set the <strong class="userinput"><code>Left</code></strong>, <strong class="userinput"><code>Top</code></strong>, <strong class="userinput"><code>Right</code></strong>, and <strong class="userinput"><code>Bottom</code></strong> position parameters to 0 in both the <strong class="userinput"><code>BlackScreen</code></strong> and <strong class="userinput"><code>FadeAnimator</code></strong> game objects the same way as we did in the previous recipe.</li><li>Set the color of the <strong class="userinput"><code>Image</code></strong> component in the <strong class="userinput"><code>BlackScreen</code></strong> game object to fully opaque black.</li><li>Parent the <strong class="userinput"><code>BlackScreen</code></strong> game object to the <strong class="userinput"><code>FadeAnimator</code></strong> game object in the <strong class="userinput"><code>Hierarchy</code></strong>.</li></ol></div><div class="orderedlist"><ol class="orderedlist arabic" start="13" type="1"><li>Make sure the <strong class="userinput"><code>Scene</code></strong> View is set to 2D. Set the <strong class="userinput"><code>Right</code></strong> position parameter in the <strong class="userinput"><code>BlackScreen</code></strong> game object to –20 pixels and the Left position parameter to a number bigger than your current <strong class="userinput"><code>Game</code></strong> View screen resolution. The <strong class="userinput"><code>BlackScreen</code></strong> game object should be visible as a very thin strip on the right of the <strong class="userinput"><code>Canvas</code></strong> in the <strong class="userinput"><code>Scene</code></strong> View, as shown in the following screenshot:</li></ol></div><div class="mediaobject"><img src="/graphics/9781785883910/graphics/817fd691-ab40-4e28-ac8f-2cf3c8aaf11d.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="14" type="1"><li>Select the <strong class="userinput"><code>FadeAnimator</code></strong> game object and go to <strong class="userinput"><code>Window</code></strong> | <strong class="userinput"><code>Animation</code></strong> to open the <strong class="userinput"><code>Animation</code></strong> View.</li><li>Create a new Animation Clip by clicking on the <strong class="userinput"><code>Create</code></strong> button. Name the clip <strong class="userinput"><code>Alpha_0</code></strong>; this will be our default animation.</li><li>Make sure the record button is pressed and select the <strong class="userinput"><code>BlackScreen</code></strong> game object. Click on the <strong class="userinput"><code>Left</code></strong> position input field in the <strong class="userinput"><code>Inspector</code></strong> and enter the same value again. It should insert the key frame for all position values. Disable the <strong class="userinput"><code>BlackScreen</code></strong> game object; it should also create a key frame. This Animation Clip should only have one key frame on the frame 0; delete any unwanted key frames.</li><li>Select the <strong class="userinput"><code>FadeAnimator</code></strong> game object again and create another Animation Clip. Name it <code class="literal">Alpha_100</code>.</li></ol></div><div class="orderedlist"><ol class="orderedlist arabic" start="18" type="1"><li>Make sure the record button is pressed and select the <strong class="userinput"><code>BlackScreen</code></strong> game object. Set the <strong class="userinput"><code>Right</code></strong> and <strong class="userinput"><code>Left</code></strong> positions to 0. Enable the <strong class="userinput"><code>BlackScreen</code></strong> game object (make sure a <strong class="userinput"><code>Game Object.Is Active</code></strong> property shows in the <strong class="userinput"><code>Animation</code></strong> View, and, if not, click on the game object's <strong class="userinput"><code>enable</code></strong> checkbox twice). This Animation Clip should also have only one key frame on the frame 0; remove any other key frames. The whole <strong class="userinput"><code>Game</code></strong> View should show a black screen.</li><li>Select the <strong class="userinput"><code>FadeAnimator</code></strong> game object again and create another animation. Name it <strong class="userinput"><code>FadeIn</code></strong>. With the record button pressed, select the <strong class="userinput"><code>BlackScreen</code></strong> game object and create two key frames: one on frame 0 and one on 1-second mark. The <strong class="userinput"><code>BlackScreen</code></strong> game object's position on frame 0 should be set to the same values as in the <strong class="userinput"><code>Alpha_0</code></strong> animation (<strong class="userinput"><code>Right</code></strong> to –20 and <strong class="userinput"><code>Left</code></strong> to a number bigger than the <strong class="userinput"><code>Game</code></strong> View screen resolution). On the 1-second frame, the position should be set to <strong class="userinput"><code>Left</code></strong> 0, <strong class="userinput"><code>Right</code></strong> 0. Also enable the game object in both frames. When you play the animation in the <strong class="userinput"><code>Animation</code></strong> View, you should see the <strong class="userinput"><code>BlackScreen</code></strong> game object swipe from right to left (from a clear game screen to a complete black screen).</li><li>Select the <strong class="userinput"><code>FadeAnimator</code></strong> game object again and create another animation. Name it <code class="literal">FadeOut</code>. With the record button pressed, select the <strong class="userinput"><code>BlackScreen</code></strong> game object and create two key frames: one on frame 0 and one on 1-second mark. The position of the <strong class="userinput"><code>BlackScreen</code></strong> game object in frame 0 should be set to Left 0 and Right 0. In the 1-second mark frame, the <strong class="userinput"><code>Left</code></strong> position should be set to –20 and the <strong class="userinput"><code>Right</code></strong> position to a number higher than the <strong class="userinput"><code>Game</code></strong> View's screen resolution. Also make sure to enable the <strong class="userinput"><code>BlackScreen</code></strong> game object in both key frames. When you play the animation in the <strong class="userinput"><code>Animation</code></strong> View, you should see the <strong class="userinput"><code>BlackScreen</code></strong> game object swipe from right to left (from a full black screen to a clear game screen).</li><li>Open the Animator Controller assigned to the <strong class="userinput"><code>FadeAnimator</code></strong> game object.</li><li>Create a <code class="literal">Trigger</code> parameter and call it <strong class="userinput"><code>Fade</code></strong>.</li><li>Create a loop of transitions:</li></ol></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">  <strong class="userinput"><code>Alpha_0</code></strong> | <strong class="userinput"><code>FadeIn</code></strong> with the trigger <strong class="userinput"><code>Fade</code></strong> set as condition and <strong class="userinput"><code>Has Exit Time</code></strong> set to <code class="literal">false</code></li><li style="list-style-type: disc">  <strong class="userinput"><code>FadeIn</code></strong> | <strong class="userinput"><code>Alpha_100</code></strong> with no conditions and <strong class="userinput"><code>Has Exit Time</code></strong> set to <code class="literal">true</code></li><li style="list-style-type: disc">  <strong class="userinput"><code>Alpha_100</code></strong> | <strong class="userinput"><code>FadeOut</code></strong> with the trigger <strong class="userinput"><code>Fade</code></strong> set as condition and <strong class="userinput"><code>Has Exit Time</code></strong> set to <code class="literal">false</code></li><li style="list-style-type: disc">  <strong class="userinput"><code>FadeOut</code></strong> | <strong class="userinput"><code>Alpha_0</code></strong> with no conditions and <strong class="userinput"><code>Has Exit Time</code></strong> set to <code class="literal">true</code></li></ul></div><div class="orderedlist"><ol class="orderedlist arabic" start="24" type="1"><li>Set every <strong class="userinput"><code>Transition Duration</code></strong> to 0.</li></ol></div><div class="orderedlist"><ol class="orderedlist arabic" start="25" type="1"><li>Write a script to set the <strong class="userinput"><code>Fade</code></strong><code class="literal">Trigger</code> parameter in the Animator Controller. In this example, we use the same script as in the previous recipe. Whenever player presses the space bar button, the <strong class="userinput"><code>Fade</code></strong><code class="literal">Trigger</code> is set. You can find the <code class="literal">Fade.cs</code> script in the provided example Unity project in the <code class="literal">Chapter 03 2D and user interface animation\Recipe 05 Creating a fade out - fade in transition with the animation view\Scripts</code> directory:</li></ol></div><pre class="programlisting">if (Input.GetKeyDown(KeyCode.Space))
{
     animator.SetTrigger("Fade");
}</pre><div class="orderedlist"><ol class="orderedlist arabic" start="26" type="1"><li>Attach the script to the <strong class="userinput"><code>FadeAnimator</code></strong> game object.</li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec96"></a>How it works...</h3></div></div></div><p>This recipe is very similar to the previous one but uses a different concept for the black screen animation. Instead of animating the color value, we are animating the position of the black screen to create the swipe effect. This recipe has several key elements that are different from the precious recipe:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><span class="strong"><strong>Animating Left and Right positions</strong></span>: Our UI <strong class="userinput"><code>BlackScreen</code></strong> game object has its anchors set to stretch in both <span class="emphasis"><em>X</em></span> and <span class="emphasis"><em>Y</em></span> coordinates to make it cover the whole screen. With this anchor type, <strong class="userinput"><code>Left</code></strong>, <strong class="userinput"><code>Right</code></strong>, <strong class="userinput"><code>Top</code></strong>, and <strong class="userinput"><code>Bottom</code></strong> position parameters work as offsets from the screen edge. So setting them to 0 means that the game object will cover the whole screen. The goal of setting the <strong class="userinput"><code>Right</code></strong> position to <code class="literal">-20</code> pixels and the <strong class="userinput"><code>Left</code></strong> position to a number bigger than the <strong class="userinput"><code>Game View</code></strong> screen resolution was to put our <strong class="userinput"><code>BlackScreen</code></strong> game object completely off screen on the right. This way we were able to hide it in game and animate its position later.</li><li style="list-style-type: disc"><span class="strong"><strong>Canvas Scaler</strong></span>: We were using a new component, the Canvas Scaler. This component's job is to scale the whole UI canvas to fill the whole screen. If we didn't use this component, our black screen wouldn't cover the whole screen after changing the screen resolution.</li></ul></div></div></div>