<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec36"></a>Using Mecanim states for animating UI button states</h2></div></div><hr /></div><p>Unity has a very powerful built in UI system. An important part of it is buttons. Buttons have four states: <strong class="userinput"><code>Normal</code></strong>, <strong class="userinput"><code>Highlighted</code></strong>, <strong class="userinput"><code>Pressed</code></strong>, and <strong class="userinput"><code>Disabled</code></strong>. You can use the default <strong class="userinput"><code>Color Tint</code></strong> option to visualize those states, but there is a more interesting option: the animation transition. This recipe covers it.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec101"></a>Getting ready</h3></div></div></div><p>You don't need to prepare anything before hand as we will create animated buttons from scratch in Unity. You can also use the provided example Unity project and go to the <code class="literal">Chapter 03 2D and user interface animation\Recipe 08 Using Mecanim states for animating UI button states</code> directory. You will find an <code class="literal">Example.unity</code> scene there. Open it, play the game, and click on the buttons to see the effect.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec102"></a>How to do it...</h3></div></div></div><p>To create an animated button, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>(Optional) Import the <strong class="userinput"><code>Button</code></strong> graphic to Unity.</li><li>Open a scene and create a new <strong class="userinput"><code>Button</code></strong> by using the <strong class="userinput"><code>Game Object | UI | Button</code></strong> command. <strong class="userinput"><code>Canvas</code></strong> and <strong class="userinput"><code>Button</code></strong> game objects will be created.</li><li>Select the <strong class="userinput"><code>Button</code></strong> game object and find the <strong class="userinput"><code>Button</code></strong> component in <strong class="userinput"><code>Inspector</code></strong>.</li><li>Set the <strong class="userinput"><code>Transition</code></strong> to <strong class="userinput"><code>Animation</code></strong>.</li></ol></div><div class="orderedlist"><ol class="orderedlist arabic" start="5" type="1"><li>Click on the <strong class="userinput"><code>Auto Generate Animation</code></strong> button, as shown in the following screenshot:</li></ol></div><div class="mediaobject"><img src="/graphics/9781785883910/graphics/bdab22d0-506b-4a19-996c-32027a43957c.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="6" type="1"><li>Four empty Animation Clips will be created, one for each button state.</li><li>With the button selected, open the <strong class="userinput"><code>Animation</code></strong> View.</li><li>Select each animation in the <strong class="userinput"><code>Animation</code></strong> View (their names correspond with button states) and change the appearance of the <strong class="userinput"><code>Button</code></strong> game object with the record button pressed in the <strong class="userinput"><code>Animation</code></strong> View. You can change the size of the button, its color, text, and so on. Even one frame of the animation is enough for creating a smooth transition because Unity will smoothly transition between those animations when the game changes the <strong class="userinput"><code>Button</code></strong> state.</li><li>When you finish your animations, close the <strong class="userinput"><code>Animation</code></strong> View and play the game to see the effect.</li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec103"></a>How it works...</h3></div></div></div><p>This recipe has a few key elements that make it work:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><span class="strong"><strong>Button Animator Controller</strong></span>: When you click on the <strong class="userinput"><code>Auto Generate Animation</code></strong> button, not only the Animation Clips are created, but also an Animator Controller is. It is also automatically assigned to the button (along with an Animator component). All the transitions between animation states in the Animator Controller are also already set up. Unity also creates parameters in the Animator Controller for you-those are the <code class="literal">Trigger</code> parameters used for transitions between the button states.</li><li style="list-style-type: disc"><span class="strong"><strong>Calling the Triggers</strong></span>: You can find four properties in the Button component: <strong class="userinput"><code>Normal Trigger</code></strong>, <strong class="userinput"><code>Highlighted Trigger</code></strong>, <strong class="userinput"><code>Pressed Trigger</code></strong>, and <strong class="userinput"><code>Disabled</code></strong><strong class="userinput"><code>Trigger</code></strong>. Unity will try to call those triggers in the Button's Animator Controller to transition to a proper button state. If you change the <code class="literal">Trigger</code> names in the Animator Controller, make sure to change them also in the <strong class="userinput"><code>Button</code></strong> component.</li></ul></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec104"></a>There's more...</h3></div></div></div><p>You don't have to make one frame animations for button states. In fact, your animations can be as long and complex as you please. Remember that you can also add child objects to your buttons and animate them the same way we did in the <span class="emphasis"><em>Exporting a 2D sprite animation from a 3D package</em></span> recipe. Try experimenting! You can achieve awesome results with this simple system.</p></div></div>