<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch05lvl1sec51"></a>Creating an appear or a disappear animation</h2></div></div><hr /></div><p>If our game has monsters in it, there is a huge probability that we will need to use an appear or a disappear animation to introduce such characters in the scene. Often times, monsters spawn near our players to ambush them. This is where the <span>appear animations</span><a id="id325526647" class="indexterm"></a> come in handy.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec151"></a>Getting ready</h3></div></div></div><p>Before we start, you should have a character with at least two animations: a looped <strong class="userinput"><code>Idle</code></strong> animation and an <strong class="userinput"><code>Appear</code></strong> animation. This animation should start below the ground (or high in the air if your character is a flying one). It should end with the <strong class="userinput"><code>Idle</code></strong> pose. See the following image for reference:</p><div class="mediaobject"><img src="/graphics/9781785883910/graphics/02db62a5-5139-4441-a033-4d95ade19de1.png" /></div><p>Appear animation key frames (the animation is done "in place")</p><p>You can download the provided example; open the project in Unity and go to the <code class="literal">Chapter 05 Character actions and expressions\Recipe 01 Creating an appear or disappear animation</code> folder. You will find a scene called <code class="literal">Example. Scene</code> there. When you play it, a Spider character will be spawned (instantiated) and it will play the <strong class="userinput"><code>Appear</code></strong> animation. In the <code class="literal">Rigs</code> directory, you can find the <code class="literal">Spider.fbx</code> asset with the required animations.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec152"></a>How to do it...</h3></div></div></div><p>To create an <span>appear</span><a id="id325526777" class="indexterm"></a> animation, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Import your animated character with <strong class="userinput"><code>Idle</code></strong> and <strong class="userinput"><code>Appear</code></strong> animations.</li><li>Make sure to check the <strong class="userinput"><code>Idle</code></strong> animation's <strong class="userinput"><code>Loop Time</code></strong> option.</li><li>Place the imported character in the scene.</li><li>Create a new Animator Controller and call it <code class="literal">Appear</code> (or you can edit an existing controller).</li><li>Drag and drop your <strong class="userinput"><code>Appear</code></strong> animation into the controller and make sure it is the default state. If not, right-click on it and choose the <strong class="userinput"><code>Set As Layer Default State</code></strong> option.</li><li>Drag and drop your <strong class="userinput"><code>Idle</code></strong> animation into the controller.</li><li>Create one transition:
<div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><strong class="userinput"><code>Appear</code></strong> | <strong class="userinput"><code>Idle</code></strong> with no conditions: <strong class="userinput"><code>Has Exit Time</code></strong> should be set to true and <strong class="userinput"><code>Transition Duration</code></strong> set to 0.2 seconds.</li></ul></div></li><li>Assign the Animator Controller to the character standing on the scene (to its Animator component).</li><li>To better see the <strong class="userinput"><code>Appear</code></strong> animation in action, create a prefab from the character. To do so, drag and drop it from the <strong class="userinput"><code>Hierarchy</code></strong> to any folder in the <strong class="userinput"><code>Project </code></strong>View.</li><li>Delete the character from the <strong class="userinput"><code>Hierarchy</code></strong> and write a script to spawn (instantiate) the character in runtime. In this recipe, we use the <code class="literal">Spawner.cs</code> script from the example Unity project's <code class="literal">Shared Scripts</code> directory.</li><li>This script spawns a prefab (a list of prefabs) in the same position and with the same rotation as the <strong class="userinput"><code>Spawner</code></strong> game object (the object the <code class="literal">Spawner.cs</code> script is attached to).</li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec153"></a>How it works...</h3></div></div></div><p>We use a very simple mechanism here—when Unity instantiates an animated game object, it always plays the game object's default animation state. So, when we set our <strong class="userinput"><code>Appear</code></strong> animation to be the default state, it is played when the character is spawned (instantiated). This way we can create interesting animations to make the characters appear near our players. In this example, our character crawls out from the ground.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec154"></a>There's more...</h3></div></div></div><p>To make the <span>effect</span><a id="id325549047" class="indexterm"></a> complete, you should also add a spawn VFX to the character. You can find an example of that: a particle system prefab called <strong class="userinput"><code>RocksEffect</code></strong> in the <code class="literal">Prefabs</code> directory in the provided Unity project. This is an "unearthing" effect. We spawn it with the same <code class="literal">Spawner.cs</code> script. Additionally, this prefab has an <code class="literal">AutoDestroy.cs</code> script that destroys the spawned effect after a few seconds.</p></div></div>