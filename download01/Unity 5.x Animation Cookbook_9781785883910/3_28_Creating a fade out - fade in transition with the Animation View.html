<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec33"></a>Creating a fade out - fade in transition with the Animation View</h2></div></div><hr /></div><p>Every game has some sort of fade in/fade out transitions: between the levels, or when you enter a dialog or a cutscene, and so on. In Unity, we can create such transitions very easily using the Animation View.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec91"></a>Getting ready</h3></div></div></div><p>You don't have to prepare anything for this recipe; everything is created in Unity from scratch. You can open the provided example Unity project and go to the <code class="literal">Chapter 03 2D and user interface animation\Recipe 05 Creating a fade out - fade in transition with the animation view</code> directory. You will find an <code class="literal">Example.unity</code> scene there. Play the game and press the space bar to see the fade in/fade out effect.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec92"></a>How to do it...</h3></div></div></div><p>To create a fade in/fade out effect, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Open a scene.</li><li>Create an <strong class="userinput"><code>Image</code></strong> in the <strong class="userinput"><code>Hierarchy</code></strong>. To do so, go to <strong class="userinput"><code>Game Object</code></strong> | <strong class="userinput"><code>UI</code></strong> | <strong class="userinput"><code>Image</code></strong> menu on the top of the screen.</li><li><strong class="userinput"><code>Image</code></strong> and <strong class="userinput"><code>Canvas</code></strong> game objects will be created in the <strong class="userinput"><code>Hierarchy</code></strong>.</li><li>Select the <strong class="userinput"><code>Image</code></strong> game object and set its name to <code class="literal">BlackScreen</code>.</li><li>Right-click on the <strong class="userinput"><code>Canvas</code></strong> game object and choose <strong class="userinput"><code>Create Empty</code></strong> to create an empty game object.</li><li>Set the name of the newly created game object to <code class="literal">FadeAnimator</code>. This object will animate the effect.</li><li>Set the <strong class="userinput"><code>Anchor Preset</code></strong> of the <strong class="userinput"><code>BlackScreen</code></strong> and <strong class="userinput"><code>FadeAnimator</code></strong> game objects to stretch in both <span class="emphasis"><em>X</em></span> and <span class="emphasis"><em>Y</em></span> coordinates, as shown in the following screenshot:</li></ol></div><div class="mediaobject"><img src="/graphics/9781785883910/graphics/63775335-52d4-47e1-8fd1-6cbe9677783f.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="8" type="1"><li>Set the <strong class="userinput"><code>Left</code></strong>, <strong class="userinput"><code>Top</code></strong>, <strong class="userinput"><code>Right,</code></strong> and <strong class="userinput"><code>Bottom</code></strong> position parameters to 0 in both the <strong class="userinput"><code>BlackScreen</code></strong> and <strong class="userinput"><code>FadeAnimator</code></strong> game objects. That will make the <strong class="userinput"><code>BlackScreen</code></strong> and <strong class="userinput"><code>FadeAnimator</code></strong> game objects cover the whole screen.</li><li>Parent the <strong class="userinput"><code>BlackScreen</code></strong> game object to the <strong class="userinput"><code>FadeAnimator</code></strong> game object in the <strong class="userinput"><code>Hierarchy</code></strong>.</li></ol></div><div class="orderedlist"><ol class="orderedlist arabic" start="10" type="1"><li>Select the <strong class="userinput"><code>FadeAnimator</code></strong> game object and go to <strong class="userinput"><code>Window</code></strong> | <strong class="userinput"><code>Animation</code></strong> to open the <strong class="userinput"><code>Animation</code></strong> View.</li><li>Create a new Animation Clip by clicking on the <strong class="userinput"><code>Create</code></strong> button. Name the clip <code class="literal">Alpha_0</code>; this will be our default animation.</li><li>Make sure the record button is pressed and select the <strong class="userinput"><code>BlackScreen</code></strong> game object. Set its color to black with alpha channel set to 0 (also black). Also disable the <strong class="userinput"><code>BlackScreen</code></strong> game object. This Animation Clip should only have one key frame on the frame 0; delete any unwanted key frames. Disable the <strong class="userinput"><code>BlackScreen</code></strong> game object in this animator (set is as inactive). This way the object will not render when its alpha is 0 percent.</li><li>Select the <strong class="userinput"><code>FadeAnimator</code></strong> game object again and create another Animation Clip. Name it <code class="literal">Alpha_100</code>. The object in this animation should be enabled.</li><li>Make sure the record button is pressed and select the <strong class="userinput"><code>BlackScreen</code></strong> game object. Set its color to black and the alpha channel to 100 percent (white). Enable the <strong class="userinput"><code>BlackScreen</code></strong> game object (make sure a <strong class="userinput"><code>Game Object.Is Active</code></strong> property shows in the <strong class="userinput"><code>Animation</code></strong> View, and, if not, click on the game object's <strong class="userinput"><code>enable</code></strong> checkbox twice). This Animation Clip should also have only one key frame on the frame 0; remove any other key frames.</li><li>Select the <strong class="userinput"><code>FadeAnimator</code></strong> game object again and create another animation. Name it <code class="literal">FadeIn</code>. With the record button pressed, select the <strong class="userinput"><code>BlackScreen</code></strong> game object and create two key frames: one on frame 0 and one on 1-second mark. The <strong class="userinput"><code>BlackScreen</code></strong> game object should have a black color with alpha set to 0 percent (black) on the first frame and a black color with alpha set to 100 percent (white) on the second key frame. This is meant to be our fade to black animation. You should also enable the <strong class="userinput"><code>BlackScreen</code></strong> game object at frame 0 to make it render.</li><li>Select the <strong class="userinput"><code>FadeAnimator</code></strong> game object again and create another animation. Name it <code class="literal">FadeOut</code>. With the record button pressed, select the <strong class="userinput"><code>BlackScreen</code></strong> game object and create two key frames: one on frame 0 and one on 1-second mark. The <strong class="userinput"><code>BlackScreen</code></strong> game object should have a black color with alpha set to 100 percent (white) on the first frame and a black color with alpha set to 0 percent (black) on the second key frame. This is meant to be our fade from black animation. You should also disable the <strong class="userinput"><code>BlackScreen</code></strong> game object on the second key frame to prevent it from rendering despite its alpha is 0 percent.</li><li>Open the Animator Controller assigned to the <strong class="userinput"><code>FadeAnimator</code></strong> game object.</li><li>Create a <code class="literal">Trigger</code> parameter and call it <code class="literal">Fade</code>.</li></ol></div><div class="orderedlist"><ol class="orderedlist arabic" start="19" type="1"><li>Create a loop of transitions (see the following screenshot for reference):</li></ol></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><strong class="userinput"><code>Alpha_0</code></strong> | <strong class="userinput"><code>FadeIn</code></strong> with the trigger <strong class="userinput"><code>Fade</code></strong> set as condition and <strong class="userinput"><code>Has Exit Time</code></strong> set to <code class="literal">false</code>.</li><li style="list-style-type: disc"><strong class="userinput"><code>FadeIn</code></strong> | <strong class="userinput"><code>Alpha_100</code></strong> with no conditions and <strong class="userinput"><code>Has Exit Time</code></strong> set to <code class="literal">true</code>.</li><li style="list-style-type: disc"><strong class="userinput"><code>Alpha_100</code></strong> | <strong class="userinput"><code>FadeOut</code></strong> with the trigger <strong class="userinput"><code>Fade</code></strong> set as condition and <strong class="userinput"><code>Has Exit Time</code></strong> set to <code class="literal">false</code>.</li><li style="list-style-type: disc"><strong class="userinput"><code>FadeOut</code></strong> |<strong class="userinput"><code>Alpha_0</code></strong> with no conditions and <strong class="userinput"><code>Has Exit Time</code></strong> set to <code class="literal">true</code>.</li></ul></div><div class="mediaobject"><img src="/graphics/9781785883910/graphics/492cc5be-bbe2-4869-b046-d3217ba8918b.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="20" type="1"><li>Write a script to set the <strong class="userinput"><code>Fade </code></strong><code class="literal">Trigger</code> parameter in the Animator Controller. In this example, we use player input to set the <strong class="userinput"><code>Fade</code></strong> parameter. Whenever a player presses the space bar button, the <strong class="userinput"><code>Fade </code></strong><code class="literal">Trigger</code> is set. You can find the <code class="literal">Fade.cs</code> script in the provided example Unity project in the <code class="literal">Chapter 03 2D and user interface animation\Recipe 05 Creating a fade out - fade in transition with the animation view\Scripts</code> directory:</li></ol></div><pre class="programlisting">       if (Input.GetKeyDown(KeyCode.Space)) 
        { 
             animator.SetTrigger("Fade"); 
        } </pre><div class="orderedlist"><ol class="orderedlist arabic" start="21" type="1"><li>Attach the script to the <strong class="userinput"><code>FadeAnimator</code></strong> game object.</li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec93"></a>How it works...</h3></div></div></div><p>This recipe animates the color of an <strong class="userinput"><code>Image</code></strong> component (a part of Unity's UI). We can animate the alpha parameter to fade the transparency of an <strong class="userinput"><code>Image</code></strong>. It allows us to create a fade in/fade out effect very easily. This recipe has some other key elements:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><span class="strong"><strong>FadeAnimator empty game object</strong></span>: Our <strong class="userinput"><code>BlackScreen</code></strong> game object (containing the <strong class="userinput"><code>Image</code></strong> component) is a child of an empty game object (named <strong class="userinput"><code>FadeAnimator</code></strong> in this example). The empty game object has the Animator component attached. This way we can disable and enable the <strong class="userinput"><code>BlackScreen</code></strong> game object in our animations (it wouldn't be possible if the Animator component would be attached to the same  <strong class="userinput"><code>BlackScreen</code></strong> game object).</li><li style="list-style-type: disc"><span class="strong"><strong>Disabling and enabling the BlackScreen game object</strong></span>: It is a good practice to disable our black screens because they can block mouse input for UI elements if they are enabled (even if they are fully transparent).</li><li style="list-style-type: disc"><span class="strong"><strong>BlackScreen in the bottom of the Hierarchy</strong></span>: Our <strong class="userinput"><code>BlackScreen</code></strong> object should be placed in the very bottom of the <strong class="userinput"><code>Hierarchy</code></strong> to cover all other UI elements in our game.</li></ul></div></div></div>