<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch07lvl1sec72"></a>Creating camera shakes with the Animation View and the Animator Controller</h2></div></div><hr /></div><p>In this recipe, we will use a simple, but very effective <span>method</span><a id="id325241223" class="indexterm"></a> for creating <span>camera shakes</span><a id="id325241232" class="indexterm"></a>. Those <span>effects</span><a id="id325241240" class="indexterm"></a> are often used to emphasize impacts or explosions in our games.</p><p> </p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec225"></a>Getting ready</h3></div></div></div><p>You don't need anything special for this recipe. We will create everything from scratch in Unity. You can also download the provided example Unity project and go to the <code class="literal">Chapter 07 Special effects\Recipe 02 Creating camera shakes with the animation window and the animator controller</code> directory. When you open the  <code class="literal">Example.unity</code> scene and play the game, you can press the space bar to see a simple <span>camera shake</span><a id="id325241266" class="indexterm"></a> effect.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec226"></a>How to do it...</h3></div></div></div><p>To <span>create</span><a id="id325241427" class="indexterm"></a> a camera shake effect, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Create an empty game object in the <strong class="userinput"><code>Scene View</code></strong> and name it <strong class="userinput"><code>CameraRig</code></strong>.</li><li>Parent the <strong class="userinput"><code>Main Camera</code></strong> to the <strong class="userinput"><code>CameraRig</code></strong>.</li><li>Select the <strong class="userinput"><code>Main Camera</code></strong> and add an <strong class="userinput"><code>Animator</code></strong> component to it.</li><li>Open the <strong class="userinput"><code>Animation View</code></strong>.</li><li>Create a new <strong class="userinput"><code>Animation Clip</code></strong> and call it <strong class="userinput"><code>CamNormal</code></strong>. The camera should have no motion in this clip. Add keys for both the camera's position and rotation.</li><li>Create another <strong class="userinput"><code>Animation Clip</code></strong> and call it <strong class="userinput"><code>CameraShake</code></strong>. Animate the camera's rotation and position to create a shake effect. The animation should have about 0.5 seconds.</li><li>Open the automatically created <strong class="userinput"><code>Main Camera</code></strong> controller.</li><li>Add a <strong class="userinput"><code>Shake </code></strong><code class="literal">Trigger</code> parameter.</li><li>Create two transitions: 
<div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><strong class="userinput"><code>CamNormal</code></strong> | <strong class="userinput"><code>CameraShake</code></strong> with the condition: <strong class="userinput"><code>Shake </code></strong><code class="literal">Trigger</code> parameter. <strong class="userinput"><code>Has Exit Time</code></strong> should be set to false and <strong class="userinput"><code>Transition Duration</code></strong> set to 0.2 seconds.</li><li style="list-style-type: disc"><strong class="userinput"><code>CameraShake</code></strong><strong class="userinput"><code>| CamNormal</code></strong> with no conditions: <strong class="userinput"><code>Has Exit Time</code></strong> should be set to true and <strong class="userinput"><code>Transition Duration</code></strong> set to 0.2 seconds.</li></ul></div></li><li>Write a new script and call it <code class="literal">CamShake.cs</code>.</li><li>In this script's <code class="literal">Update()</code> function, we check if player pressed the space bar. If so, we trigger the <strong class="userinput"><code>Shake </code></strong><code class="literal">Trigger</code> in our controller:</li></ol></div><pre class="programlisting">        if (Input.GetKeyDown(KeyCode.Space)) 

        { 

            anim.SetTrigger("Shake"); 
        } </pre><div class="orderedlist"><ol class="orderedlist arabic" start="12" type="1"><li>As always, the <code class="literal">anim</code> variable holds the reference to the Animator component and is set in the <code class="literal">Start()</code> function with the <code class="literal">GetComponent&lt;Animator&gt;()</code> method.</li><li>Assign the script to the <strong class="userinput"><code>Main Camera</code></strong>.</li><li>Play the game and press the space bar to see the effect.</li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec227"></a>How it works...</h3></div></div></div><p>In this recipe, we've <span>animated</span><a id="id325509819" class="indexterm"></a> the camera's position and rotation relative to the <strong class="userinput"><code>CameraRig</code></strong> object. This way we can still move the <strong class="userinput"><code>CameraRig</code></strong> (or attach it to a character). Our <strong class="userinput"><code>CameraShake</code></strong> animation only affects the local position and rotation of the camera. In the script, we simply call the <strong class="userinput"><code>Shake </code></strong><code class="literal">Trigger</code> to play the <strong class="userinput"><code>CameraShake</code></strong> animation once.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec228"></a>There's more...</h3></div></div></div><p>You can <span>create</span><a id="id325509852" class="indexterm"></a> more sophisticated <span>camera shake</span><a id="id325509861" class="indexterm"></a> effects with <strong class="userinput"><code>Blend</code></strong><strong class="userinput"><code>Trees</code></strong>. To do so, prepare several shake animations with different strength and blend them in a <strong class="userinput"><code>Blend Tree</code></strong> using a <strong class="userinput"><code>Strength </code></strong><code class="literal">float</code> parameter. This way, you will be able to set the shake's strength, depending on different situations in the game (the distance from an explosion for instance).</p></div></div>