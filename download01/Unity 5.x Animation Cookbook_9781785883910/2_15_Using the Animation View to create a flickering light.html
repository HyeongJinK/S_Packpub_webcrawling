<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec21"></a>Using the Animation View to create a flickering light</h2></div></div><hr /></div><p>This first recipe shows how to make a basic <span>animation</span><a id="id325544894" class="indexterm"></a> inside Unity. We will animate a light-intensity value to create an interesting <span>flickering light</span><a id="id325544903" class="indexterm"></a> effect, which is often found in horror or sci-fi games.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec49"></a>Getting ready</h3></div></div></div><p>Before we start, you need to have a scene with geometry and at least one light. You can also download the <span>example</span><a id="id325549034" class="indexterm"></a> provided; open the project in Unity and go to the folder <code class="literal">Chapter 02 Working with the animation view\Recipe 01 Using the animation view to create a flickering light</code>. You will find a scene called <code class="literal">Example.unity</code> there, with a point light that has already been animated.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec50"></a>How to do it...</h3></div></div></div><p>To use the Animation View and create a <span>flickering</span><a id="id325550866" class="indexterm"></a> light, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Open the scene and select a light you want to animate.</li><li>With the light selected, go to <strong class="userinput"><code>Window</code></strong> | <strong class="userinput"><code>Animation</code></strong>. The Animation View<span class="strong"><strong><span class="emphasis"><em> </em></span></strong></span>will open.</li><li>To create a new animation, click on the <strong class="userinput"><code>Create</code></strong> button, as shown in the following screenshot:</li></ol></div><div class="mediaobject"><img src="/graphics/9781785883910/graphics/a916bdd9-6fc3-4bcf-8b0b-69ea87bede40.png" /></div><p></p><div class="orderedlist"><ol class="orderedlist arabic" start="4" type="1"><li>A <strong class="userinput"><code>Create New Animation Clip</code></strong> will appear. You can choose a directory and the animation name. Then, click the <strong class="userinput"><code>Save</code></strong> button.</li><li>A new, empty animation will be created, an <span class="strong"><strong>Animator</strong></span> component will be added to the selected game object (a light in this example), and an Animator Controller will be created in the same directory as the animation clip.</li><li>To animate the light intensity, we need to add an <strong class="userinput"><code>Intensity</code></strong> property. Click on the <strong class="userinput"><code>Add Property</code></strong> button in the <span>Animation View</span><a id="id325289184" class="indexterm"></a>, then choose <strong class="userinput"><code>Light | Intensity,</code></strong> and then click on the + icon next to it, as shown in the following screenshot:</li></ol></div><div class="mediaobject"><img src="/graphics/9781785883910/graphics/392c2141-c730-40f7-acc0-b36b47b493cc.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="7" type="1"><li>Two key frames will be added. You can click and drag on them to adjust their position in time. You can also add new key frames by changing any property in the light game object's <span class="strong"><strong><span class="emphasis"><em><strong class="userinput"><code>Inspector</code></strong> </em></span></strong></span>(make sure to have the record button <span>clicked</span><a id="id325289218" class="indexterm"></a> in the upper-left corner of the <strong class="userinput"><code>Animation</code></strong> View).</li><li>Add several key frames with different values of light intensity.</li><li>Close the <strong class="userinput"><code>Animation</code></strong> View when the animation is done. Any changes will be saved automatically.</li><li>Play the game to see the effect.</li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec51"></a>How it works...</h3></div></div></div><p>The <span>Animation View</span><a id="id325289246" class="indexterm"></a> is divided into three main parts, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781785883910/graphics/d79b70c8-b312-499d-b7c5-34cad1c753a0.png" /></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><span class="strong"><strong>Playback buttons</strong></span> (<span class="strong"><strong>1</strong></span>): Here you can play back the animation on your scene (you do not have to enter <span class="strong"><strong><strong class="userinput"><code>Play Mode</code></strong></strong></span> to see your animation). On the right to the play back buttons, you can find an <span class="strong"><strong><strong class="userinput"><code>Insert Key Frame</code></strong></strong></span> button and an <span class="strong"><strong><strong class="userinput"><code>Insert Animation Event</code></strong></strong></span> button. You can use the first one to insert key frames; the second one inserts <span class="strong"><strong>Animation Events</strong></span> that allow to call script functions from an animation (Animation Events will be covered later in <a class="link" href="#" linkend="ch06">Chapter 6</a>, <span class="emphasis"><em><span>Handling Combat</span></em></span>). Just below the playback buttons, you can find a drop-down menu, with which you can switch between this object's animations and add new ones.</li><li style="list-style-type: disc"><span class="strong"><strong>Animated properties (2)</strong></span>: Here you can find all the properties of the game object used by this animation. You can also click on the <strong class="userinput"><code>Add Property</code></strong> button to add new properties to the animation.</li><li style="list-style-type: disc"><span class="strong"><strong>Timeline (3)</strong></span>: It represents the time in the animation. You can find all the key frames (and animation events) here. You can click on the timeline header (the one with time displayed in seconds) to go to the frame you clicked on. If you click on a key frame instead, the timeline will automatically jump to that exact key frame.</li></ul></div><p>When you create an animation in the Animation View for the first time for a given game object, a new <span class="strong"><strong>Animation Clip</strong></span> and an Animation Controller are created. The Animator Controller is automatically assigned to the game object you are animating and the Animation Clip is added to the Animator Controller. Any new animation created for the same game object will be added to the same Animator Controller automatically.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec52"></a>There's more...</h3></div></div></div><p>The timeline of the <span>Animation View</span><a id="id325289332" class="indexterm"></a> has two modes (you can switch between them by clicking on the corresponding buttons on the bottom of the properties section):</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><span class="strong"><strong><strong class="userinput"><code>Dope</code></strong><strong class="userinput"><code>Sheet</code></strong></strong></span>: This mode displays key frames in the timeline.</li><li style="list-style-type: disc"><span class="strong"><strong><strong class="userinput"><code>Curves</code></strong></strong></span>: With this mode, you can adjust the interpolation curves of the animation. When you click on a property, its <span>animation curves</span><a id="id325289360" class="indexterm"></a> will be displayed. You can manipulate the handles to adjust the shape of the curves. You can also right-click on any handle to change its tangent type, as shown in the following screenshot:</li></ul></div><div class="mediaobject"><img src="/graphics/9781785883910/graphics/309fcf52-2282-494d-91d8-6cd4d4f7bf63.png" /></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">All Animation Clips created in the Animation View are looped by default. To change this, find the Animation Clip asset, select it, and disable the <strong class="userinput"><code>Loop Time</code></strong><span class="strong"><strong> </strong></span>checkbox in its <strong class="userinput"><code>Inspector</code></strong>.</li><li style="list-style-type: disc">All the animations are created for selected game objects in the Hierarchy. To view an object animation, you need to select it and open the <strong class="userinput"><code>Animation</code></strong> View.</li><li style="list-style-type: disc">If you have multiple Animator components in your object's <span class="strong"><strong><strong class="userinput"><code>Hierarchy</code></strong></strong></span>, a new Animator Controller will be created for each Animator component. It may be useful to create different animations for different objects in the <span class="strong"><strong><strong class="userinput"><code>Hierarchy</code></strong></strong></span> and play them simultaneously. For example, you can have a 2D sprite character with its head and body as separate game objects. You can use two Animator<span class="strong"><strong> </strong></span>components: one for the body, one for the head. If you choose so, you will be able to create facial expressions independently of the body animation.</li></ul></div></div></div>