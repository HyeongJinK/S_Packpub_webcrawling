<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch10lvl1sec100"></a>Using the Rotate() function to animate an object</h2></div></div><hr /></div><p>In this recipe, we will use the <code class="literal">Transform.Rotate()</code> function to create an infinite looping animation of a windmill. We could make the same with the <strong class="userinput"><code>Animation</code></strong> View, but <span>sometimes</span><a id="id325522916" class="indexterm"></a> writing a simple script means much less effort than creating a key frame animation.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec311"></a>Getting ready</h3></div></div></div><p>We need a few models we can rotate in this recipe. As an example, we will use a windmill. It is composed of three game objects: <strong class="userinput"><code>WindmillBase</code></strong>, which is the root of the whole windmill, <strong class="userinput"><code>Windmill</code></strong> which is parented to the <strong class="userinput"><code>WindmillBase</code></strong>, and <strong class="userinput"><code>WindmillWings</code></strong> which is parented to the <strong class="userinput"><code>Windmill</code></strong>. The <strong class="userinput"><code>Windmill</code></strong> game object itself can rotate in the <span class="emphasis"><em>Y</em></span> axis. The <strong class="userinput"><code>WindmillWings</code></strong> game object can rotate in its local <span class="emphasis"><em>Z</em></span> axis.</p><div class="mediaobject"><img src="/graphics/9781785883910/graphics/658b170b-1bd2-4685-8418-357d69e94a81.png" /></div><p>Windmill hierarchy</p><p></p><p>You can download the example project and go to the <code class="literal">Chapter 10 Miscellaneous\Recipe 03 Using the Rotate function to animate an object</code> directory. Open the <code class="literal">Example.unity</code> scene there and play the game. You will see the windmill rotating around the <span class="emphasis"><em>Y</em></span> axis and its wings rotating around their local <span class="emphasis"><em>Z</em></span> axis.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec312"></a>How to do it...</h3></div></div></div><p>To use the <code class="literal"><span>Rotate</span><a id="id325526754" class="indexterm"></a>()</code> function for animating objects, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Import our windmill to Unity. The model should contain three objects: <strong class="userinput"><code>WindmillBase</code></strong>, <strong class="userinput"><code>Windmill</code></strong> (parented to <strong class="userinput"><code>WindmillBase</code></strong>), and <strong class="userinput"><code>WindmillWings</code></strong> (parented to <strong class="userinput"><code>Windmill</code></strong>).</li><li>Place the model in the scene.</li><li>Create a new C# script and name it <code class="literal">ScriptRotation.cs</code>. In this script's <code class="literal">Update()</code> function, we use only one method: <code class="literal">transform.Rotate()</code>. We have a series of <code class="literal">public</code> variables to be able to control the rotation speed and axis. The <code class="literal">Rotate()</code> method can rotate an object in the <code class="literal">World</code> or <code class="literal">Self</code> (local) space. We have a <code class="literal">public Space rotationSpace</code> variable to be able to control it from the <strong class="userinput"><code>Inspector</code></strong>:</li></ol></div><pre class="programlisting">      transform.Rotate(rotateAxis * rotationSpeed * 
                  Time.deltaTime, rotationSpace); </pre><div class="orderedlist"><ol class="orderedlist arabic" start="4" type="1"><li>Assign the script to the <strong class="userinput"><code>Windmill</code></strong> game object.</li><li>Set the <strong class="userinput"><code>Rotation Space</code></strong> to <strong class="userinput"><code>World</code></strong>, and the <strong class="userinput"><code>Rotation Axis</code></strong> to (0, 1, 0). This means our object will rotate in the global <span class="emphasis"><em>Y</em></span> axis (the up vector). Set the <strong class="userinput"><code>Rotation Speed</code></strong> to your liking (it's in degrees per second; a value of 45-90 should be OK).</li><li>Assign the same script to the <strong class="userinput"><code>WindmillWings</code></strong> game object.</li><li>Set the <strong class="userinput"><code>Rotation Space</code></strong> to <strong class="userinput"><code>Self</code></strong> and the <strong class="userinput"><code>Rotation Axis</code></strong> to (0,0,1). This means the object will rotate around its local <span class="emphasis"><em>Z</em></span> axis (the forward vector of the object). Again, set the <strong class="userinput"><code>Rotation Speed</code></strong> to your liking.</li><li>Play the game and observe the effect. The <strong class="userinput"><code>Windmill</code></strong> game object rotates in the global <span class="emphasis"><em>Y</em></span> axis and the <strong class="userinput"><code>WindmillWings</code></strong> game object rotates around its local <span class="emphasis"><em>Z</em></span> axis and follows the <strong class="userinput"><code>Windmill's </code></strong><span class="emphasis"><em>Y</em></span> axis rotation (because of the hierarchy setup).</li></ol></div><p> </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec313"></a>How it works...</h3></div></div></div><p>We are using Unity's <code class="literal">Transform.Rotate()</code> function in this recipe. It allows rotating a transform around any given axis. It rotates the object the number of degrees we set as the function's parameter. We are using <code class="literal">Time.deltatime</code> to rotate the object X degrees per second. This function also has the <code class="literal">space</code> parameter, which lets us make a rotation in world or local space. The rest is handled by the hierarchy setup (<strong class="userinput"><code>WindmillWings</code></strong> being parented to the <strong class="userinput"><code>Windmill</code></strong> game object).</p><p>Using this method can save us a lot of time tweaking animations for simple rotating objects. What's more, we can still use <strong class="userinput"><code>Animation</code></strong> View to create an animation of the <code class="literal">public float rotationSpeed</code> parameter of our script. This way we can control the changes of rotation speed with a very simple animation clip, instead of <span>animating</span><a id="id325550891" class="indexterm"></a> the whole transform.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec314"></a>There's more...</h3></div></div></div><p>Unity has also a <code class="literal">Transform.Translate()</code> function, which has the same parameters as the <code class="literal">Transform.Rotate()</code> method but moves our game object instead of rotating it. We can use it to create a similar script and move our object in the scene.</p></div></div>