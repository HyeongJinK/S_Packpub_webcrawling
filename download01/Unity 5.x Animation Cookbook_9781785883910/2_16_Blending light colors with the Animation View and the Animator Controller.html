<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec22"></a>Blending light colors with the Animation View and the Animator Controller</h2></div></div><hr /></div><p>This recipe shows how to use <span>Animation Controllers</span><a id="id325289099" class="indexterm"></a> with the clips created in Animation View.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec53"></a>Getting ready</h3></div></div></div><p>We will <span>animate</span><a id="id325289114" class="indexterm"></a> the light color in this example. You need to have a scene with at least one light and a mesh to see the effect. You can also download the provided example Unity project and go to the <code class="literal">Chapter 02 Working with the animation view\Recipe 02 Using the animation view and the animator controller to blend light colors</code> directory. You will find a scene called <code class="literal">Example.unity</code> there, with a direction light that has already been animated. In this example, we also animate the background color of the camera (the camera is a child object of the directional light).</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec54"></a>How to do it...</h3></div></div></div><p>To blend animations (colors in this example) of a game object, you need to follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Open the scene and select the light game object in the <span class="strong"><strong><strong class="userinput"><code>Hierarchy</code></strong></strong></span>.</li><li>With the light selected, go to <span class="strong"><strong><strong class="userinput"><code>Window</code></strong></strong></span> | <span class="strong"><strong><strong class="userinput"><code>Animation</code></strong></strong></span> to open the <strong class="userinput"><code>Animation</code></strong> View and create at least two animations the same way as in the <span class="emphasis"><em><span>Using Animation View to create a flickering light recipe</span></em></span>, but this time set the color property instead of the light's intensity. In our example, we have two Animation Clips: <strong class="userinput"><code>Day</code></strong> and <strong class="userinput"><code>Night</code></strong>. They just set the color of the directional light: <strong class="userinput"><code>Day</code></strong> sets it to bright yellow and <strong class="userinput"><code>Night</code></strong> to dark blue. There is no change in the light color over time. Each animation has two key frames with the exact same color value in each key frame (this color is different for each animation). Each animation lasts for about 7 seconds.</li><li>An Animator Controller will be created automatically.</li></ol></div><div class="orderedlist"><ol class="orderedlist arabic" start="4" type="1"><li>Open the <span>Animator Controller</span><a id="id325509741" class="indexterm"></a> and create two transitions between our animations, one going from <strong class="userinput"><code>Day</code></strong> to <strong class="userinput"><code>Night</code></strong> and one from <strong class="userinput"><code>Night</code></strong> to <strong class="userinput"><code>Day</code></strong>, as shown in the following screenshot:</li></ol></div><div class="mediaobject"><img src="/graphics/9781785883910/graphics/6181cd34-27bd-4787-9944-4c87aa255c78.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="5" type="1"><li>Those <span>animations</span><a id="id325509816" class="indexterm"></a> are looped, so you can set the <strong class="userinput"><code>Transition Duration</code></strong> to around 5 seconds to make the effect more subtle. You can set the <strong class="userinput"><code>Transition Duration</code></strong> in the <strong class="userinput"><code>Settings</code></strong> foldout in the <strong class="userinput"><code>Inspector</code></strong> after you select the transition.</li><li>Make sure that the <strong class="userinput"><code>Has Exit Time</code></strong> option is selected as we do not use any other conditions in this example. You can also add your own conditions and use scripts to trigger them.</li><li>Play the game to see the effect.</li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec55"></a>How it works...</h3></div></div></div><p>The purpose of this recipe is to show one very important feature of the Unity animation system: the <span>Animator Controller</span> can blend <code class="literal">Color</code>, <code class="literal">Vector3</code>, <code class="literal">Quaternion</code><span>,</span><code class="literal">bool</code>, and <code class="literal">float</code> values stored in <span>Animation Clips</span>. The <code class="literal">Int</code> and <code class="literal">string</code> values are not supported and cannot be animated. You can only animate public <code class="literal">MonoBehaviour</code> script variables and Unity component properties.</p><p>You do not have to always animate the properties of a game object. Using the transitions in the Animator Controller will create a smooth blend between them.</p></div></div>