<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch10lvl1sec99"></a>Using the Lerp() function to animate an object</h2></div></div><hr /></div><p>We were using the <code class="literal"><span>Lerp</span><a id="id325241224" class="indexterm"></a>()</code> method previously, but it is important to know that we can use it in two different ways. This recipe covers both of these uses.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec307"></a>Getting ready</h3></div></div></div><p>We are going to create this recipe from scratch and we don't need any special assets. You can download the example project and go to the <code class="literal">Chapter 10 Miscellaneous\Recipe 02 Using the Lerp function to animate an object</code> directory. Open the <code class="literal">Example.unity</code> scene there and play the game. You will see two objects: <strong class="userinput"><code>RedDot</code></strong> and <strong class="userinput"><code>BlueDot</code></strong> (both are children of the <strong class="userinput"><code>Canvas</code></strong> object). The first one uses the standard <code class="literal">Lerp()</code> method and interpolates its position from a minimum to a maximum value in time. The second one uses the <code class="literal">Lerp()</code> method in a different way and continuously follows the mouse pointer.</p><div class="mediaobject"><img src="/graphics/9781785883910/graphics/b7c4e14a-2a3c-417d-add2-ea0ded3cc337.png" /></div><p>RedDot interpolates its position between min and max and BlueDot follows the cursor</p><p></p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec308"></a>How to do it...</h3></div></div></div><p>To use the <code class="literal">Lerp()</code><span>function</span><a id="id325241356" class="indexterm"></a> for animating objects, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>First we need to create some objects to work with. Create a new <strong class="userinput"><code>Image</code></strong> (go to <strong class="userinput"><code>Game Object</code></strong> | <strong class="userinput"><code>UI</code></strong> | <strong class="userinput"><code>Image</code></strong>). Name it <code class="literal">RedDot</code> (you can add a circle sprite to it or leave it as it is). Change its color to red.</li><li>Set the <strong class="userinput"><code>RedDot</code></strong> position to (0,0,0) and its <strong class="userinput"><code>Anchor Preset</code></strong> to middle center, as shown in the following screenshot:</li></ol></div><div class="mediaobject"><img src="/graphics/9781785883910/graphics/682d596f-1d33-484c-9194-56dec8c5041b.png" /></div><p>RedDot's Anchor Preset</p><p></p><div class="orderedlist"><ol class="orderedlist arabic" start="3" type="1"><li>Create another <strong class="userinput"><code>Image</code></strong> and name it <strong class="userinput"><code>BlueDot</code></strong>. Change its color to blue.</li><li>Change its <strong class="userinput"><code>Anchor Preset</code></strong> to bottom left.</li><li>Create a new C# script and name it <code class="literal">LerpNormal.cs</code>. In this script's <code class="literal">Update()</code> function, we interpolate a <code class="literal">float posX</code> variable's value from the <code class="literal">public float minPos</code> to <code class="literal">public float maxPos</code> value. We use a <code class="literal">float</code><code class="literal">timer</code> that increases to the value of 1 in time. If its <span>value</span><a id="id325289125" class="indexterm"></a> reaches 1, it starts to decrease to 0. If it reaches 0, it starts to increase again. Finally, we set the <code class="literal">localPosition</code> of <strong class="userinput"><code>RedDot </code></strong><code class="literal">rectTransform</code> using our interpolated <code class="literal">posX</code> value. The <code class="literal">posY</code> and <code class="literal">posZ</code> values are set in the <code class="literal">Start()</code> function and are constant:</li></ol></div><pre class="programlisting">      if (timer &gt; 1f) 
      { 
          lerpDir = -1f; 
      } 
      else if (timer &lt; 0f) 
      { 
          lerpDir = 1f; 
      } 
 
      timer += lerpDir*Time.deltaTime * speed; 
 
      posX = Mathf.Lerp(minPos, maxPos, timer); 
 
      rectTransform.localPosition = new Vector3(posX, posY, 
                                  posZ); </pre><div class="orderedlist"><ol class="orderedlist arabic" start="6" type="1"><li>Assign the script to the <strong class="userinput"><code>RedDot</code></strong> game object.</li><li>Create another C# script and call it <code class="literal">LerpContinuous.cs</code>. In this script's <code class="literal">Update()</code> function, we interpolate the position of the <strong class="userinput"><code>BlueDot</code></strong> with itself and the mouse cursor position. We do it every frame. In the <code class="literal">Lerp()</code> function, we use the <code class="literal">Time.deltaTime</code> value multiplied by a <code class="literal">public float speed</code> variable:</li></ol></div><pre class="programlisting">      rectTransform.position = 
                  Vector3.Lerp(rectTransform.position, 
                  Input.mousePosition, Time.deltaTime * 
                  speed); </pre><div class="orderedlist"><ol class="orderedlist arabic" start="8" type="1"><li>Assign the script to the <strong class="userinput"><code>BlueDot</code></strong> game object.</li><li>Play the game to see the effect.</li></ol></div><p> </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec309"></a>How it works...</h3></div></div></div><p>We are using the <code class="literal">Lerp()</code><span>function</span><a id="id325509844" class="indexterm"></a> in two ways:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><span class="strong"><strong>Standard method</strong></span>: The <code class="literal">Lerp()</code> function's <code class="literal">float t</code> parameter has values from 0 to 1. We've used a timer as out <code class="literal">t</code> parameter. The <code class="literal">timer</code> first was <span>increasing</span><a id="id325522880" class="indexterm"></a> to the value of 1. After it reached 1, it was decreasing to 0. This method gives us standard linear interpolation between two values. The <code class="literal">t</code> parameter is the percentage of the interpolation (for <code class="literal">t = 0.5</code>, the interpolated value is an average of two input values).</li><li style="list-style-type: disc"><span class="strong"><strong>Continuous method</strong></span>: The <span>second</span><a id="id325241418" class="indexterm"></a> method is based on using the output value (in our case the position) as the lower input value in the <code class="literal">Lerp()</code> function. We call the <code class="literal">Lerp()</code> function in <code class="literal">Update()</code> and use <code class="literal">Time.deltaTime</code> as the <code class="literal">t</code> parameter. <code class="literal">Time.deltaTime</code> is a very small value, so each time the function is called, the output value is interpolated toward the end value by a very small fraction. Calling this method in <code class="literal">Update()</code> results in smooth movement. It is not linear anymore. The <strong class="userinput"><code>BlueDot</code></strong> moves faster if it is further away from the cursor and slows down when it gets closer.</li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note18"></a>Note</h3><p>Remember that when you're using the second method, the interpolated value will never truly get to the end position or end value. That's why sometimes we have to implement an <code class="literal">if</code> statement and check if the interpolated value is close enough to the end value. If so, we can set it to be exactly the same.</p></div><p>The  <code class="literal">Lerp()</code> function is implemented in various classes. These are the most commonly used examples:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><code class="literal"><span>Mathf.Lerp</span><a id="id325241473" class="indexterm"></a>()</code>: This interpolates between two float values</li><li style="list-style-type: disc"><code class="literal"><span>Vector3.Lerp</span><a id="id325241485" class="indexterm"></a>()</code>:This interpolates between two vectors (positions for instance)</li><li style="list-style-type: disc"><code class="literal"><span>Quaternion.Lerp</span><a id="id325241497" class="indexterm"></a>()</code>:This interpolates between two rotations</li><li style="list-style-type: disc"><code class="literal"><span>Color.Lerp</span><a id="id325241509" class="indexterm"></a>()</code>:This interpolates between two colors</li></ul></div><p> </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec310"></a>See also</h3></div></div></div><p>Two more methods are also worth checking out in Unity's Scripting Reference: <code class="literal">Vector3.Slerp()</code> and <code class="literal">Vector3.SmoothDamp()</code>. The first one interpolates a vector spherically (as we would by rotating it) and the second one dampens the change in a vector (a position for instance). It can be used for implementing objects that should smoothly follow another object.</p></div></div>