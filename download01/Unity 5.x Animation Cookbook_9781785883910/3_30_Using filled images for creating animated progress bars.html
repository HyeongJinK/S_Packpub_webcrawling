<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec35"></a>Using filled images for creating animated progress bars</h2></div></div><hr /></div><p>In this recipe, we will create a very common UI mechanism: progress bar. The same concept can also be used for creating health bars, cooldown indicators, and so on.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec97"></a>Getting ready</h3></div></div></div><p>Before we start, you should prepare at least one sprite image and import it to Unity. You can also use the provided example Unity project and go to the <code class="literal">Chapter 03 2D and user interface animation\Recipe 07 Using filled images for creating animated progress bars</code> directory. You will find an <code class="literal">Example.unity</code> scene there. Open it and play the game to see the effect.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec98"></a>How to do it...</h3></div></div></div><p>To create an animated progress bar, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Import the progress bar image to Unity and set its type to <strong class="userinput"><code>Sprite (2d and UI)</code></strong>.</li><li>Open a scene and create a new <strong class="userinput"><code>Image</code></strong> by using the <strong class="userinput"><code>Game Object</code></strong> | <strong class="userinput"><code>UI</code></strong> |<strong class="userinput"><code>Image</code></strong> command.<strong class="userinput"><code>Canvas</code></strong> and <strong class="userinput"><code>Image</code></strong> game objects will be created.</li><li>Select the <strong class="userinput"><code>Image</code></strong> game object and change its name to <strong class="userinput"><code>ProgressBar</code></strong>.</li><li>Find the <strong class="userinput"><code>Image</code></strong> component in the <strong class="userinput"><code>ProgressBar</code></strong> game object's <strong class="userinput"><code>Inspector</code></strong>.</li><li>Set the <strong class="userinput"><code>Image Type</code></strong> property to <strong class="userinput"><code>Filled</code></strong>, the <strong class="userinput"><code>Fill Method</code></strong> to <strong class="userinput"><code>Horizontal,</code></strong> and the <strong class="userinput"><code>Fill Amount</code></strong> to 0, as shown in the following screenshot:</li></ol></div><div class="mediaobject"><img src="/graphics/9781785883910/graphics/53c90a88-af05-4b29-a972-d913a6e72077.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="6" type="1"><li>By changing the <strong class="userinput"><code>Fill Amount</code></strong>, value you can animate a progress bar. You can do it with an <strong class="userinput"><code>Animation</code></strong> View, but it makes more sense to use a script here.</li><li>Create a new script and call it <code class="literal">ProgressBars.cs</code> (you can also use the same script provided with the example Unity project; you can find it in the <code class="literal">Scripts</code> directory of this recipe). Make sure to include the <code class="literal">UnityEngine.UI</code> namespace in the script. Write the following line in the <code class="literal">Update()</code> function:</li></ol></div><pre class="programlisting">        image.fillAmount += Time.deltaTime * fillSpeed; </pre><div class="orderedlist"><ol class="orderedlist arabic" start="8" type="1"><li>The <code class="literal">image</code> object is a reference to the <strong class="userinput"><code>Image</code></strong> component on the same game object. We assign it in the <code class="literal">Start()</code> function by calling the line:</li></ol></div><pre class="programlisting">        image = GetComponent&lt;Image&gt;(); </pre><div class="orderedlist"><ol class="orderedlist arabic" start="9" type="1"><li>The <code class="literal">fillSpeed</code> variable is a <code class="literal">public float</code> variable that describes the fill amount increment per second.</li><li>In this simple script, we increase the <strong class="userinput"><code>Fill Amount</code></strong> of the <strong class="userinput"><code>Image</code></strong> component in time.</li><li>Assign the script to the <strong class="userinput"><code>ProgressBar</code></strong> game object and play the game to see the effect.</li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec99"></a>How it works...</h3></div></div></div><p>This recipe has a few key elements that make it work:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><span class="strong"><strong>Image Type set to Filled</strong></span>: Unity provides the <strong class="userinput"><code>Filled Image</code></strong> type for the UI Image components. It fills the image from left to right (or in any other desired direction).</li></ul></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><span class="strong"><strong>Fill Amount reference in scripts</strong></span>: The fill amount of an image can be changed through scripts: it's a public variable of the <code class="literal">Image</code> class.</li></ul></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec100"></a>There's more...</h3></div></div></div><p>Try experimenting with different Fill Types. You can find an example of a Fill Type set to Radial360 in the provided example Unity project.</p></div></div>