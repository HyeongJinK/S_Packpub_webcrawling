<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch08lvl1sec85"></a>Importing a whole cutscene from a 3D package</h2></div></div><hr /></div><p>The best way of creating <span>cutscenes</span><a id="id325241232" class="indexterm"></a> in Unity is to import whole animations from a <span>3D package</span><a id="id325241240" class="indexterm"></a>. We did a similar thing in the previous recipe (we synchronized the animations in a 3D package before importing them to Unity). Here we are going to create a full cutscene with camera animations.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec266"></a>Getting ready</h3></div></div></div><p>For this recipe, we need the same character as in the previous recipe, with a <span class="emphasis"><em>kicking the ball</em></span> animation. Additionally, we've added three simple cubes to the animation. Those cubes are animated and represent cameras. We used cubes instead of empty objects or cameras because Unity sometimes has trouble with importing the motion of objects that are not rigs nor have mesh renderers:</p><div class="mediaobject"><img src="/graphics/9781785883910/graphics/010fdd2a-6606-4847-92bd-b95c017b7179.png" /></div><p>Cutscene objects in Blender. Red cubes hold camera positions</p><p>You can also go to the <code class="literal">Chapter 08 Animating Cutscenes\Recipe 04 Importing a whole cutscene from a 3D package</code> directory. You can find the <code class="literal">Example.unity</code> scene there. If you play the game, you will see a character kicking a soccer ball. The cameras will animate and change as the animation progresses. You can find all the needed animations in the <code class="literal">Animations</code> directory.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec267"></a>How to do it...</h3></div></div></div><p>To import a whole <span>cutscene</span><a id="id325289095" class="indexterm"></a> from a <span>3D package</span><a id="id325289104" class="indexterm"></a>, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Create the cutscene in a 3D package. Remember that all the objects' animations should have the same length. They should have keys on the first and last frame.</li><li>If you plan to use <strong class="userinput"><code>Humanoid</code></strong> rigs, save every character as a separate file before importing it to Unity.</li><li>Import the cutscene to Unity (and all the characters, if needed). All objects that use <strong class="userinput"><code>Generic</code></strong> rigs can be exported together as one file. In such cases, a <strong class="userinput"><code>Generic</code></strong> rig will be created for the whole cutscene.</li><li>If you are using Blender and want to export the cutscene to FBX format, use the 6.1 version and make sure to check the <strong class="userinput"><code>Default Take</code></strong> option.</li><li>Go to the <strong class="userinput"><code>Animation</code></strong> tab in <strong class="userinput"><code>Import Settings</code></strong>.</li><li>The <strong class="userinput"><code>Default Take</code></strong> holds the whole cutscene animation. You may see additional clips in the Animation tab (especially if you are using skeletal animation). Don't use them. You can remove them from the Import Settings and change the <strong class="userinput"><code>Default Take</code></strong> clip name to something more descriptive.</li><li>If you are using <strong class="userinput"><code>Humanoid</code></strong> rigs for the characters, import them one by one from the separate files.</li><li>Create an <strong class="userinput"><code>Animator Controller</code></strong> for the cutscene and one for every character (if you are using the <strong class="userinput"><code>Humanoid</code></strong> rig).</li><li>Place the cutscene animation in the controllers.</li><li>Place all the objects in the same place on the scene.</li><li>If you want to animate cameras, create one camera for every shot of your cutscene.</li><li>Parent the cameras to the animated camera holder objects from the cutscene. You may need to adjust camera rotations.</li><li>Our cameras are children of the camera holder objects (and the cutscene object). But the animation is imported and read-only. So, we cannot change the cameras the same way we did in the <span class="emphasis"><em>Changing cameras with animation</em></span> recipe. We need a script on the root object of the cutscene (the one with the Animator component). Create a new script and call it <code class="literal">CutsceneCameraChanger.cs</code>. In this script, we have a list of all the cutscene cameras and a <code class="literal">public void ChangeCamera()</code> animation event that changes the camera based on the given <code class="literal">int newCameraIndex</code> parameter. It disables all other cameras from the list:</li></ol></div><pre class="programlisting">        public void ChangeCamera (int newCameraIndex) 
       { 
 
            for (int i = 0; i &lt; cutsceneCameras.Length; i++) 
            { 
                cutsceneCameras[i].gameObject. 
                           SetActive(false); 
            } 
               cutsceneCameras[newCameraIndex].gameObject. 
                           SetActive(true); 
        } </pre><div class="orderedlist"><ol class="orderedlist arabic" start="14" type="1"><li>Assign the script to the root object of the cutscene.</li><li>Open the <strong class="userinput"><code>Animation Import Settings</code></strong> for the cutscene.</li><li>Adjust the timeline to the place you want to change the shot.</li><li>Add Animation Events to enable appropriate cameras and change the shots. Use the <code class="literal">int</code> parameter to provide the <code class="literal">newCameraIndex</code> for the <code class="literal">ChangeCamera</code> function. Remember to set the <strong class="userinput"><code>Depth</code></strong> parameters of the cameras to be higher than the gameplay camera.</li><li>Apply the <strong class="userinput"><code>Animation Import Settings</code></strong> and disable the <strong class="userinput"><code>Mesh Renderer</code></strong> components for each of the camera holder objects so that they will not be visible in-game.</li><li>Play the game to see the effect.</li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec268"></a>How it works...</h3></div></div></div><p>Unity can import whole <span>cutscene</span><a id="id325549050" class="indexterm"></a>s as single assets. You can animate a cutscene with a lot of objects and characters and then export it to FBX (or simply save the file if you are using Blender). After the import, the <strong class="userinput"><code>Default Take</code></strong> holds the whole animation. You cannot change the animation (it is read-only), but you can write scripts to enable/disable cameras using Animation Events. You need to add the events in the Animation Import Settings though.</p><p>If you plan to reuse the animation for different characters, you need to export every rig from the cutscene as a separate file. Only then can you set it to <strong class="userinput"><code><span>Humanoid</span><a id="id325550875" class="indexterm"></a></code></strong>.</p><p>You cannot export particle systems from a 3D package. Only transform and skeletal animation is supported. You will need to create VFX in Unity and synchronize them with the cutscene using Animation Events. The same rule applies to sound effects. We were doing this in the <span class="emphasis"><em>Using Animation Events to trigger sound and visual effects</em></span> recipe in <span><a class="link" href="#" linkend="ch07">Chapter 7</a></span>, <span class="emphasis"><em>Special Effects</em></span>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec269"></a>There's more...</h3></div></div></div><p>According to Unity's roadmap, a Director tool is planned sometime in the 5.x schedule. It may make authoring cutscenes in Unity easier. But, for animators used to their favorite 3D packages, importing whole cutscenes can still be the preferred option.</p></div></div>