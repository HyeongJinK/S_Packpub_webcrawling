<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch07lvl1sec78"></a>Animating properties of a particle system with the Animation View</h2></div></div><hr /></div><p>This recipe shows how to use the <span>Animation View</span><a id="id325241223" class="indexterm"></a> to animate a <span>particle system</span><a id="id325241232" class="indexterm"></a>'s properties. Not all of them can be directly accessed with the <strong class="userinput"><code>Animation</code></strong> View, but we will use the same trick as with the fog in the <span class="emphasis"><em>Using the Animation View to animate public script variables</em></span> recipe.</p><p> </p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec244"></a>Getting ready</h3></div></div></div><p>This recipe is created from scratch in Unity; you don't need any special assets. You should have a <span>particle system</span><a id="id325241256" class="indexterm"></a> ready before we start. You can go to the <code class="literal">Chapter 07 Special effects\Recipe 08 Animating properties of a particle system with the animation window</code> directory. You will find an <code class="literal">Example.unity</code> scene there. Open it and play the game to a particle system with animated properties.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec245"></a>How to do it...</h3></div></div></div><p>To <span>animate</span><a id="id325241424" class="indexterm"></a> particle system properties, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Create an empty game object and name it <strong class="userinput"><code>AnimatedParticleSystem</code></strong>.</li><li>Add a <strong class="userinput"><code>Particle System</code></strong> component to it.</li><li>Create the particle system to your liking. We have a very simple particle system with particles flying in straight line in this example.</li><li>Add an <strong class="userinput"><code>Animator</code></strong> component to the <strong class="userinput"><code>AnimatedParticleSystem</code></strong> game object.</li><li>Create an animation of the <strong class="userinput"><code>Emission</code></strong> | <strong class="userinput"><code>Rate</code></strong> parameter. It is only possible to directly animate <strong class="userinput"><code>Emission Module</code></strong> and <strong class="userinput"><code>Shape Module</code></strong> of a particle system.</li><li>To animate other properties, create a new script and call it <code class="literal">ParticleAnims.cs</code>. In this script, we have two public variables: <code class="literal">public float gravityModifier</code> and <code class="literal">public Color color</code>. We use those variables to set the <code class="literal">gravityModifier</code> and the <code class="literal">startColor</code> properties of the particle system in the <code class="literal">Update()</code> function. The reference to the Particle System component is set in the <code class="literal">Start()</code> function and stored in the <code class="literal">particles</code> variable:</li></ol></div><pre class="programlisting">        void Update () { 
            particles.gravityModifier = gravityModifier; 
            particles.startColor = color; 
        } </pre><div class="orderedlist"><ol class="orderedlist arabic" start="7" type="1"><li>Assign the script to the <strong class="userinput"><code>AnimatedParticleSystem</code></strong> game object.</li><li>Open the <strong class="userinput"><code>Animation</code></strong> View again and animate the <strong class="userinput"><code>Color</code></strong> and <strong class="userinput"><code>Gravity Modifier</code></strong> public fields of the script. This way we can create a workaround to animate the particle system's properties unreachable from the <strong class="userinput"><code>Animation</code></strong> View.</li><li>Play the game to see the effect.</li></ol></div><p> </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec246"></a>How it works...</h3></div></div></div><p>This recipe uses the same concept as described in the <span class="emphasis"><em>Using the <span>Animation View</span><a id="id325509735" class="indexterm"></a> to animate public script variables</em></span> recipe. This time we use the public script variable animation to animate a particle system's properties, normally unreachable from the <strong class="userinput"><code>Animation</code></strong> View. Unity has the animate <span class="emphasis"><em>everything</em></span> philosophy, so I think we may expect that all the <span>particle system</span><a id="id325509751" class="indexterm"></a>'s properties will be available to animate directly in the <strong class="userinput"><code>Animation</code></strong> View in the future.</p></div></div>