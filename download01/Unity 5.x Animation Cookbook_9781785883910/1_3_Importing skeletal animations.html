<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch01lvl1sec10"></a>Importing skeletal animations</h2></div></div><hr /></div><p>This first recipe shows how to import a <span>skeletal animation</span><a id="id325289100" class="indexterm"></a> from a 3D package. It assumes that you have an animation already prepared. We are going to bring the file to Unity and show where you can adjust the import settings. We will not jump into too much detail for now to make the import process as quick as possible. We will cover all the settings in further recipes.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec12"></a>Getting ready</h3></div></div></div><p>Most animations are created in external 3D packages such as Maya, 3ds Max, Motion Builder, or Blender 3D. Make sure you have prepared a 3D model with a skeleton, the model is skinned, and you have created at least one animation. You can also download the provided example; open the project in Unity and go to this folder: <code class="literal">Chapter 01 Working with animations\Recipe 01 Importing skeletal animations\Sheep Model</code>. You will find an imported FBX file called <code class="literal">Sheep.fbx</code> there.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec13"></a>How to do it...</h3></div></div></div><p>To import a skeletal animation, you need to follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Export a skinned model and its skeleton (called <span class="strong"><strong>rig</strong></span> in Unity) to FBX format.</li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip3"></a>Note</h3><p>If you are using Blender, you don't have to manually export the file to FBX format. Simply drag and drop the file to your <code class="literal">Assets</code> folder. Unity will use Blender FBX exporter in the background. Additionally, you will be able to open the file by double-clicking on it in Unity. After you edit and save it, Unity will reimport it again. It is a very convenient way of editing animations as you don't have to go through the export-import process each time you make a change.</p></div><div class="orderedlist"><ol class="orderedlist arabic" start="2" type="1"><li>Drag and drop the exported file into any subfolder in the <code class="literal">Assets</code> folder in your project or go to <strong class="userinput"><code>Assets</code></strong> | <strong class="userinput"><code>Import new asset</code></strong> and choose your FBX file.</li></ol></div><div class="orderedlist"><ol class="orderedlist arabic" start="3" type="1"><li>Select the imported file and navigate to the <strong class="userinput"><code>Inspector</code></strong> tab. Click on the <strong class="userinput"><code>Rig</code></strong> button:</li></ol></div><div class="mediaobject"><img src="/graphics/9781785883910/graphics/d77c86bf-e957-487e-993e-de0399ddab08.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="4" type="1"><li>Here you can specify the type of the rig to use. For bipedal characters, use the <strong class="userinput"><code>Humanoid</code></strong> option, for all the rest choose <strong class="userinput"><code>Generic</code></strong>. We use a sheep <span>model</span><a id="id325289234" class="indexterm"></a> in this example, so we need to choose the <strong class="userinput"><code>Generic</code></strong> rig. Differences between those options are described in the <span class="emphasis"><em>How it works</em></span> section.</li><li>Leave all the other inputs as defaults.</li></ol></div><div class="orderedlist"><ol class="orderedlist arabic" start="6" type="1"><li>Click on the <strong class="userinput"><code>Animations</code></strong> button. If an <strong class="userinput"><code>Unapplied import settings</code></strong> window appears, click on <strong class="userinput"><code>Apply</code></strong>.</li></ol></div><div class="mediaobject"><img src="/graphics/9781785883910/graphics/61dce7e2-d50f-4e0d-bf70-36e25421f91d.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="7" type="1"><li>Make sure the <strong class="userinput"><code>Import <span>Animation</span><a id="id325289287" class="indexterm"></a></code></strong> checkbox is checked.</li><li>Click on the <strong class="userinput"><code>Apply</code></strong> button in the lower right corner of the <strong class="userinput"><code>Inspector</code></strong> (just above the <strong class="userinput"><code>Animation Preview</code></strong>). You may need to scroll the <strong class="userinput"><code>Inspector</code></strong> down.</li></ol></div><div class="orderedlist"><ol class="orderedlist arabic" start="9" type="1"><li>You should be able to see all imported animation clips as child assets of your imported FBX file.</li></ol></div><div class="mediaobject"><img src="/graphics/9781785883910/graphics/d84941fa-3483-42bb-afbc-69448b4e67bb.png" /></div><p></p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec14"></a>How it works...</h3></div></div></div><p>Unity uses four different <span>rig configurations</span><a id="id325289336" class="indexterm"></a>:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><strong class="userinput"><code>Generic</code></strong> rig: This one is used for <span>quadruped</span><a id="id325289352" class="indexterm"></a>s, spiders, and other non-humanoid characters. It uses Unity's Mecanim system for controlling animation flow. It can use root motion if you provide a <strong class="userinput"><code>Root node—</code></strong>a bone responsible for character movement.</li><li style="list-style-type: disc"><strong class="userinput"><code>Humanoid</code></strong> rig: This one is used for <span>humanoid</span><a id="id325289368" class="indexterm"></a> characters only. It also uses Mecanim system for controlling animation. If you are using <strong class="userinput"><code>Humanoid</code></strong> rigs, you have more options for importing animations. The biggest advantage is automatic animation retargeting—you can use the same animation clip on various types of humanoid characters (for example, a dwarf and a troll).</li><li style="list-style-type: disc"><strong class="userinput"><code>Legacy</code></strong>: This option is used <span>mostly</span><a id="id325289419" class="indexterm"></a> for backward compatibility with previous versions of Unity. It is similar to the <strong class="userinput"><code>Generic</code></strong> rig but uses scripts instead of Mecanim for controlling animation flow. I recommend using <strong class="userinput"><code>Generic</code></strong> rig instead.</li><li style="list-style-type: disc"><strong class="userinput"><code>None</code></strong>: This last option <span>turns</span><a id="id325289438" class="indexterm"></a> off the rig and disables animation import.</li></ul></div><p>We will discuss <span>differences</span><a id="id325289449" class="indexterm"></a> between <strong class="userinput"><code>Generic</code></strong> and <strong class="userinput"><code>Humanoid</code></strong> rigs further in the next recipe.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec15"></a>There's more...</h3></div></div></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">Imported animation clips are also listed in the <strong class="userinput"><code>Clips</code></strong> section of the <strong class="userinput"><code>Animations</code></strong> tab.</li></ul></div><div class="mediaobject"><img src="/graphics/9781785883910/graphics/7914859e-0c13-4a90-92b3-53a3f39bdbfa.png" /></div><p></p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">You can add new clips by clicking on the plus button below the <strong class="userinput"><code>Clips</code></strong> section. You can also remove clips by clicking on the minus button.</li><li style="list-style-type: disc">You can rename each clip by using the input field above the <strong class="userinput"><code>Source Take</code></strong> drop-down menu.</li><li style="list-style-type: disc">You can choose the <span>source</span><a id="id325289508" class="indexterm"></a> take (the animation stored in your FBX file) for each animation clip with the <strong class="userinput"><code>Source Take</code></strong> drop-down menu.</li><li style="list-style-type: disc">You can also trim the animation clip by editing the <strong class="userinput"><code>Start</code></strong> and <strong class="userinput"><code>End</code></strong> input fields.</li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip4"></a>Note</h3><p>If you are using Blender, make sure to rotate the rig <span class="emphasis"><em>-90</em></span> degrees in the <span class="emphasis"><em>X</em></span> axis, apply the rotation in Blender and then rotate it again, <span class="emphasis"><em>+90</em></span> degrees in the <span class="emphasis"><em>X</em></span> axis. The rotation of the rig in Blender should be: <span class="emphasis"><em>90 X</em></span>, 0 <span class="emphasis"><em>Y</em></span>, and 0 <span class="emphasis"><em>Z</em></span>. Your model should be facing the <span class="emphasis"><em>-Y</em></span> axis in Blender (when you change the view to <strong class="userinput"><code>FRONT</code></strong>, you should see the face of your character). Blender and Unity use different axes alignment: in Blender, <span class="emphasis"><em>Z</em></span> is up and <span class="emphasis"><em>Y</em></span> is back; in Unity <span class="emphasis"><em>Z</em></span>, is front and <span class="emphasis"><em>Y</em></span> is up. This little trick solves the problem. Your model after import should have 0 rotation and should be facing the <span class="emphasis"><em>Z</em></span> axis. It is important for moving objects (such as characters) and rig configuration. If you don't do this, your model will have <span class="emphasis"><em>-90 X</em></span> rotation after the import.</p></div></div></div>