<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec43"></a>More about UI scripting – handlers</h2></div></div><hr /></div><p>There is one last topic that we need to cover, since we will be using this technique later on in <a class="link" href="#" linkend="ch07">Chapter 7</a>, <span class="emphasis"><em>Trading Cupcakes and the Ultimate Battle for the Cake – Gameplay Programming</em></span>
.</p><p>Imagine that you want to create an UI component that does something when it is clicked. We could create a script with a public function, then attach a button component to the game object. Finally, we should create a new <code class="literal">OnClick()</code> event on the button component to trigger the function we have written before. It's fine, but isn't a bit laborious?</p><p>Another example is, suppose you need to drag a UI component around because it is a floating window. How are you going to do it? For what we have seen so far, this appears to be an hard task; but there is an easy solution.</p><p>In fact, in our scripts, we can directly include directly the event systems, by using this line of code:</p><pre class="programlisting">using UnityEngine.EventSystems; &#13;
</pre><p>As a result, you will be able to extend your script with some (C#) interfaces.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note31"></a>Note</h3><p>In case you don't know what a C# interface is or don't know how to use it, you can check any C# manual. However, I recommend this video from the official Documentation of Unity, since it applies interfaces directly to Unity: <a class="ulink" href="https://unity3d.com/learn/tutorials/topics/scripting/interfaces" target="_blank">https://unity3d.com/learn/tutorials/topics/scripting/interfaces</a>.</p></div><p>These interfaces allow you to create a function within your script that is triggered whenever the specific event you chose occurs. Moreover, this function provides some information about that specific event as a parameter within the <code class="literal">PointerEventData</code> class. For instance, to implement our dragging behavior from before, we need to add a handler/interface for the drag event next to the class declaration, like as follows:</p><pre class="programlisting">public class DragTest : MonoBehaviour, IDragHandler {</pre><p>Then, you need to implement the interface with its specific function. In this case we have:</p><pre class="programlisting">    public void OnDrag(PointerEventData eventData) { &#13;
    } &#13;
</pre><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip32"></a>Tip</h3><p>In case you are using Visual Studio as your code editor, you can right-click on the name of the interface and from the quick action menu select <span class="strong"><strong>Implement interface</strong></span> to automatically create that the function we need to implement.</p></div><p>At this stage, implementing the drag behavior is simple, since within the <code class="literal">eventData</code> variable, we have all the data regarding the event, such as the mouse position. Therefore, we can write the following line of code:</p><pre class="programlisting">transform.position = eventData.position; &#13;
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note33"></a>Note</h3><p>Alternatively, you can also use the <code class="literal">Input</code> class, as shown here: <code class="literal">transform.position = Input.mousePosition; </code></p></div><p>For a complete list of events you can consult the official documentation here: <a class="ulink" href="https://docs.unity3d.com/ScriptReference/EventSystems.EventTrigger.html" target="_blank">https://docs.unity3d.com/ScriptReference/EventSystems.EventTrigger.html</a>.</p><p>For details about the <code class="literal">PointerEventData</code> class and which kind of information of an event it holds, here is the link to the official documentation: <a class="ulink" href="https://docs.unity3d.com/ScriptReference/EventSystems.PointerEventData.html" target="_blank">https://docs.unity3d.com/ScriptReference/EventSystems.PointerEventData.html</a>.</p></div>