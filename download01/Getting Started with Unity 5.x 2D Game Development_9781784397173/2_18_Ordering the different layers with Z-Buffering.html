<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec22"></a>Ordering the different layers with Z-Buffering</h2></div></div><hr /></div><p>In the previous chapter, we decided to useÂ Z-Buffering instead of Sorting Layers. However, we need to decide which elements of our game will be in the foreground compared to the others.</p><p>In addition, it is important to keep in mind how the camera is set. Select <span class="strong"><strong>Main Camera</strong></span>, which should be the only camera in the scene. This is what the <span class="strong"><strong>Inspector</strong></span> should look like:</p><div class="mediaobject"><img src="/graphics/9781784397173/graphics/image_02_004.jpg" /></div><p>As you can see, by default, its <span class="strong"><strong>Z</strong></span> value on the the position is set to <code class="literal">-10</code>. This means you cannot have any greater negative values (that means smaller than <code class="literal">-10</code>) in the <span class="strong"><strong>Z</strong></span> value of a Sprite, otherwise it will not be rendered. For our purpose, <code class="literal">-10</code> is perfect, and we will stick with it.</p><p>Next, we need to assign a <span class="strong"><strong>Z</strong></span> value to all the elements that we have. We can start to place the map in the background, by assigning the lowest depth (maximum <span class="strong"><strong>Z</strong></span> value) that we have in mind; in this case it's zero.</p><p>Then, we would like to have the enemies. Therefore, we can set their <span class="strong"><strong>Z</strong></span> value to <code class="literal">-1</code>. After them, the projectiles and the towers, respectively <code class="literal">-2</code> and <code class="literal">-3</code>. Finally, we need to add another value for the foreground. Here is a summary table:</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; "><colgroup><col /><col /><col /></colgroup><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p><span class="strong"><strong>Elements</strong></span></p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p><span class="strong"><strong>Z value (depth)</strong></span></p>
</td><td style="border-bottom: 0.5pt solid ; ">
<p><span class="strong"><strong>Reasons</strong></span></p>
</td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>Map</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p><code class="literal">0</code></p>
</td><td style="border-bottom: 0.5pt solid ; ">
<p>The map has the lowest value, since it will be behind everything.</p>
</td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>Enemies</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p><code class="literal">-1</code></p>
</td><td style="border-bottom: 0.5pt solid ; ">
<p>Enemies are rendered after the map, since they may pass behind the towers, which we would like to keep visible. Furthermore, also the projectiles should be visible on the enemies, just before they hit them.</p>
</td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>Projectiles</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p><code class="literal">-2</code></p>
</td><td style="border-bottom: 0.5pt solid ; ">
<p>Projectiles are shot from the towers, so it may look odd having the projectiles on top of the tower, whereas appearing from the back appears more natural.</p>
</td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>Towers</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p><code class="literal">-3</code></p>
</td><td style="border-bottom: 0.5pt solid ; ">
<p>The towers don't have any other layer on top of them, excluding the map overlay.</p>
</td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>Map Overlay</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p><code class="literal">-9</code></p>
</td><td style="border-bottom: 0.5pt solid ; ">
<p>This is in the foreground, so it has to be rendered last. We chose <code class="literal">-9</code> instead of <code class="literal">-4</code> because we may add some other layers, but the foreground is always the closest one to the camera. We will see what this layer contains in the next section.</p>
</td></tr><tr><td style="border-right: 0.5pt solid ; ">
<p>Main Camera</p>
</td><td style="border-right: 0.5pt solid ; ">
<p><code class="literal">-10</code></p>
</td><td style="">
<p>As default.</p>
</td></tr></tbody></table></div><p>We need to keep these values in mind when we create the Prefabs for our game elements. This is important both for this chapter and the rest of the book.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note13"></a>Note</h3><p>We will discuss what a Prefab is later in the chapter.</p></div></div>