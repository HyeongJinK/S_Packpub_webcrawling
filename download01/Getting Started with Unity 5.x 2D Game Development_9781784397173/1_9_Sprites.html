<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch01lvl1sec14"></a>Sprites</h2></div></div><hr /></div><p>The fundamental bricks of a 2D game in Unity are the Sprites. You can think of them as pictures, but actually as we are going to see, they are something more. In fact, one image can contain more than one Sprite. Usually, this kind of image takes the name of a Sprite Sheet. Here is an example of a Sprite Sheet within our package:</p><div class="mediaobject"><img src="/graphics/9781784397173/graphics/image_01_013.jpg" /></div><p>There are different reasons why we want to have all the Sprites on a single image, rather than display them separately. The most important one is efficiency. Every time you want to render something on the screen, this has to be rendered by the graphics card in your computer. If all the Sprites are in separate images, the graphics card will have to process a lot of images. As a result, your game will run slowly.</p><p>Another reason for having Sprite Sheets is for animations. While 3D animations are made of data that describes how a 3D model has to be moved, 2D animations are made of frames. Like a movie or a cartoon, an animation is made of different images, or in this case, Sprites. Each of them describes a moment, and if you change them quickly enough, such as 25 per second, you can give the illusion of movement. Having all of the frames in a unique image is both efficient and well organized.</p><p>Naturally, there are other reasons for Sprite Sheets, but the two preceding reasons should be enough to convince you that Sprite Sheets are the best practice. On the other hand, there is a tradeoff to pay: the game engine needs to be able to distinguish between them on the image. We will see how Unity handles this in the following sections. But before we move on, there are other important concepts to learn about Sprites in Unity.</p><p>Like a 3D object, a Sprite also has a pivot point. Usually, this is located in the middle, but it can be changed in the Sprite Editor. The pivot point is where Unity starts to do all the calculations from. For instance, when you give a position for the Sprite to be within the Scene, Unity places the pivot point in that specific location, and then draws the Sprite around it. The pivot point is also important for rotations. Every time we rotate the Sprite, the rotation will be around the pivot point. In other words, during a rotation, the pivot point is the only point that does not change position.</p><p>This can be better explained with a screenshot, where the arrow is indicating the location of the pivot point:</p><div class="mediaobject"><img src="/graphics/9781784397173/graphics/image_01_014.jpg" /></div><p>As you can see, there is the same Sprite rotated by 90 degrees clockwise. The one on the left has the pivot point in the middle, whereas the one on the right has it toward the left-hand side (the pivot point can be identified by the blue circle). Of course, you can make them coincide with a translation, but it is important to keep where it is in mind, especially when we code, in order to easily achieve what we want.</p><p>Now, there is another aspect to take into account about Sprites. In a 2D game, both the background and the character who is moving around the world are considered Sprites. However, we would like to render the background behind the character, and not vice versa. Therefore, the Sprites are rendered in a certain order that determines which one should render on top of the others.</p><p>In Unity there are two main ways to decide this order:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p><span class="strong"><strong>Sorting Layers</strong></span>: Each <span class="strong"><strong>Sprite Render</strong></span>, which is a component attached to a game object that renders the Sprite selected, has a variable called <span class="strong"><strong>Sorting Layer</strong></span>. There, we can chose on which layer the Sprite will be rendered. The order of the different sorting layers can be determined in the Tags and Layers Settings (we will see how to access this menu later on in the chapter). Furthermore, Sorting Layers can offer an internal order for Sprites within the same layer by using the <span class="strong"><strong>Order In Layer</strong></span> variable, which is always in the <span class="strong"><strong>Sprite Render</strong></span> component.</p></li><li style="list-style-type: disc"><p><span class="strong"><strong>Z-Buffering</strong></span>: Since a 2D object only needs two coordinates to describe its position (the <span class="emphasis"><em>x</em></span> and <span class="emphasis"><em>y</em></span> axes), we have the <span class="emphasis"><em>z</em></span> axis to describe depth. Unity uses depth to determine which Sprite should be rendered first. Since you need to imagine this as a depth, it's good practice to use only negative values. The greater the negative value, the closer the character or object is to the camera.</p></li></ul></div><p>There aren't any great differences between these methods in terms of computational efficiency. Therefore, both can be used. Actually, they can also be used together. A general approach is to use the <span class="emphasis"><em>z</em></span> axis for visually structuring characters. Imagine a character who is carrying a weapon. Depending on which hand the weapon is held in and in which direction the character is facing, the weapon should be rendered behind the character or in front of it. Sorting Layers, instead, are used for organizing the Sprites at a higher level, such as background, foreground, player, enemies, and so on.</p><p>However, for the sake of learning, in this book we will not use Sorting Layers, but only Z-Buffering, since it can be easily changed within the code.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec6"></a>Sprite Renderer</h3></div></div></div><p>Before we mention this component, it might be worth discussing it a bit more.</p><p>This component will be automatically attached every time we add a Sprite to the scene. It should look like the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781784397173/graphics/image_01_015.jpg" /></div><p>Let's break down the different parameters:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p><span class="strong"><strong>Sprite</strong></span>: This holds the Sprite that it has to render.</p></li><li style="list-style-type: disc"><p><span class="strong"><strong>Color</strong></span>: This is a color that is multiplied to the Sprite image. If you know bit about shaders and renderers, this is actual the vertex color of the rendered mesh.</p></li><li style="list-style-type: disc"><p><span class="strong"><strong>Flip</strong></span>: This defines on which axis the Sprite needs to be flipped. This is a new function from Unity 5.3.</p></li><li style="list-style-type: disc"><p><span class="strong"><strong>Material</strong></span>: This is the material Unity should use to render the Sprite. The default one is more than enough for our needs. If you are an expert in shaders, there are two kinds of built-in shader. Both are simple alpha-blended shaders, but the Diffuse one interacts with light, generating a (<code class="literal">0</code>, <code class="literal">0</code>, <code class="literal">-1</code>) front-facing normal vector.</p></li><li style="list-style-type: disc"><p><span class="strong"><strong>Sorting Layer</strong></span>: This is in which Sorting Layer the Sprite should be rendered (as discussed previously).</p></li><li style="list-style-type: disc"><p><span class="strong"><strong>Order in Layer</strong></span>: This is the order within that particular Sorting Layer (as we discussed previously).</p></li></ul></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec7"></a>Importing new friends</h3></div></div></div><p>If you have downloaded and imported the package from the <span class="emphasis"><em>Getting ready</em></span> section, we should now have all the files inside our <code class="literal">Project</code> folder. If you go to the <code class="literal">Graphics/towers</code> folder and select <code class="literal">cupcake_tower_sheet-01</code>, we should see the following in the <span class="strong"><strong>Inspector</strong></span>:</p><div class="mediaobject"><img src="/graphics/9781784397173/graphics/image_01_016.jpg" /></div><p>These are the <span class="strong"><strong>Import Settings</strong></span>, where different options can be set. After we have changed something, we need to press the <span class="strong"><strong>Apply</strong></span> button at the bottom to confirm the changes. Likewise, if we are not happy, we can press the <span class="strong"><strong>Revert</strong></span> button to discard our changes.</p><p>It is important to note that the <span class="strong"><strong>Texture Type</strong></span> is <span class="strong"><strong>Sprite (2D and UI)</strong></span>. In 2D mode, Unity always imports image files as Sprites and not as Textures.</p><p>The other important parameter that we need to take into consideration is the <span class="strong"><strong>Sprite Mode</strong></span>. By default, it is set to <span class="strong"><strong>Single</strong></span>, but it can be changed to <span class="strong"><strong>Multiple</strong></span> or <span class="strong"><strong>Polygonal</strong></span> (only from Unity 5.3). As the names suggests, the first is used when the image contains a single Sprite, and the second mode is used when we have a Sprite Sheet with more than one Sprite. The last one is used to identify a polygonal Sprite with a custom number of edges.</p><p>Furthermore, the <span class="strong"><strong>Pixel Per Unit</strong></span> parameter determines how big the Sprite will be in the Scene. It represents how many pixels are needed to have a unitary length in the <span class="strong"><strong>Scene View</strong></span>. By default, it is set to <span class="strong"><strong>100</strong></span>, but you should modify this value when you need to adapt your assets and change them to the right dimensions. However, if you already have a scale in mind, creating the graphics accordingly could be a useful time saver for the later stages of development.</p><p>With regard to the other settings (<span class="strong"><strong>Packing Tag</strong></span>, <span class="strong"><strong>Generate Mip Maps</strong></span>, <span class="strong"><strong>Filter Mode</strong></span>, <span class="strong"><strong>Max Size</strong></span>, and <span class="strong"><strong>Format</strong></span>), we will see them in detail in the last chapter of this book, when we will talk about optimization.</p><p>Since the file that we have selected contains more than one Sprite, let's set the <span class="strong"><strong>Sprite Mode</strong></span> to <span class="strong"><strong>Multiple</strong></span> before we move on to the next section.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec8"></a>The Sprite Editor</h3></div></div></div><p>In <span class="strong"><strong>Import Settings</strong></span>, there is also a button named <span class="strong"><strong>Sprite Editor</strong></span>. If we press this button, a new window appears. This is the <span class="strong"><strong>Sprite Editor</strong></span>, as we can see in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781784397173/graphics/image_01_017.jpg" /></div><p>If we mess things up, we can always revert them back by clicking on the <span class="strong"><strong>Revert</strong></span> button in the top-right corner of the <span class="strong"><strong>Sprite Editor</strong></span>. Next to it, you can also find an <span class="strong"><strong>Apply</strong></span> button, which you use to confirm your choices, so be careful which one you press!</p><p>For your own reference, they are highlighted in the next screenshot:</p><div class="mediaobject"><img src="/graphics/9781784397173/graphics/image_01_018.jpg" /></div><p>Near these two buttons, you can find some features that might help you when working in the <span class="strong"><strong>Sprite Editor</strong></span>. The first is a button that is easy to miss, but that allows you to switch from the colored asset (RGB channels) to B/W (alpha channel). This is particularly useful when you need to define contours and the image has transparency, as we will see later. So that you avoid missing it, you can find it highlighted in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781784397173/graphics/image_01_019.jpg" /></div><p>To the right of it, there are two sliders, which allow you to either zoom in/out or increase/decrease the resolution (number of pixels). These features are shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781784397173/graphics/image_01_020.jpg" /></div><p>The <span class="strong"><strong>Sprite Editor</strong></span> allows you to do different things. For single sprites, it gives the possibility to change the pivot point. For Sprite Sheets, such as in this case, it is the way for Unity to understand how many Sprites there are and where they are located on the image.</p><p>Now, there are different ways to do this, so let's have a look at them in more detail.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec0"></a>Manual mode</h4></div></div></div><p>In manual mode, it's you that selects each Sprite in the image, and tells Unity where it is and how big it is.</p><p>To create a new selection, you need to click in a corner of your Sprite and drag the mouse until you have selected the whole Sprite. A green rectangle appears, showing you the selected area, and you can see how the Sprite changes in real time while dragging the mouse. If you release the mouse button, the green rectangle becomes blue and Unity will interpret everything that is inside it as a Sprite.</p><p>You can create as many selections (rectangles) as you want. Also, by clicking on them, you can move them around the image and change their dimensions. Here is an example of our Sprite Sheet with some manual selections:</p><div class="mediaobject"><img src="/graphics/9781784397173/graphics/image_01_021.jpg" /></div><p>If you have made a rectangle that is bigger than the Sprite, Unity can try to trim it. In the top-left corner of the Sprite Editor, there is the Trim button, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781784397173/graphics/image_01_022.jpg" /></div><p>It is active only when a selection is highlighted. If you don't like the final result, you can always modify the selection.</p><p>Furthermore, in the middle of each selection, there is a small blue circle. This is the Pivot Point of that selection. We are free to drag it to another position. However, other than very specific cases, having the pivot point in the middle is common and useful. So at the moment, don't worry much about it, and just leave it in the middle.</p><p>Another thing you may notice is four small green squares in the middle of each edge of the rectangle. We will need them to do 9-slice scaling in a few sections.</p><p>Once we have highlighted a selection, it is possible to modify it in more detail by using the menu that appears in the bottom-right corner of the Sprite Editor. Here is what it looks like:</p><div class="mediaobject"><img src="/graphics/9781784397173/graphics/image_01_023.jpg" /></div><p>From this menu,Â you can modify the name of the selection, which will be reflected in the name of the Sprite when we use it. By typing numeric values, you can precisely set the dimension, the position, and the Pivot Point of the selection.</p><p>To conclude, manual mode is particularly useful when the shape and the dimensions of the Sprite in the Sprite Sheet are different. Even if the designer of the picture is careful and avoids placing single Sprites close to each other, the objects can still have very different dimensions.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec1"></a>Automatic mode</h4></div></div></div><p>In automatic mode, Unity tries to slice the Sprites, which means it creates the different selections for you. However, to get a better result, you need to give some information about the image. In any case, once Unity has offered its selections for the image, you can still modify them as you would in manual mode.</p><p>In the top-left corner of the <span class="strong"><strong>Sprite Editor</strong></span>, next to the <span class="strong"><strong>Trim</strong></span> button, we can see the <span class="strong"><strong>Slice</strong></span> button, as shown here:</p><div class="mediaobject"><img src="/graphics/9781784397173/graphics/image_01_024.jpg" /></div><p>By clicking on it, a menu appears that looks like this:</p><div class="mediaobject"><img src="/graphics/9781784397173/graphics/image_01_025.jpg" /></div><p>As you can see, we can select different types. Let's go through them.</p><p>The <span class="strong"><strong>Automatic</strong></span> type is the best guess of Unity about the selections. Besides the method that we will see in a bit, and where to place the pivot points of the selections, there is nothing else to set. Unity will do everything automatically, and if we don't need our Sprites to be the same size, this way works pretty well. Here is the final result applied to our image:</p><div class="mediaobject"><img src="/graphics/9781784397173/graphics/image_01_026.jpg" /></div><p>The <span class="strong"><strong>Automatic</strong></span> type comes with three different methods:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>The <span class="strong"><strong>Delete Existing</strong></span> method erases all the previous selections before slicing the image</p></li><li style="list-style-type: disc"><p>The <span class="strong"><strong>Smart</strong></span> method tries to create selections for the Sprites that are not yet in a selection</p></li><li style="list-style-type: disc"><p>The <span class="strong"><strong>Safe</strong></span> method creates new selections without erasing the previous ones</p></li></ul></div><p>The <span class="strong"><strong>Grid By Cell Size</strong></span> type, instead, divides the image into a grid of selections. From the menu, you can select the dimension of each cell. As a result, the number of cells will depend on how big they are.</p><p>The <span class="strong"><strong>Grid By Cell Count</strong></span> type, again, divides the image into a grid of selections. However, this time, you can set from the menu how many cells will be in the image, and their dimensions will depend on this. Here is our image sliced using a 4 x 4 grid:</p><div class="mediaobject"><img src="/graphics/9781784397173/graphics/image_01_027.jpg" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec2"></a>Polygonal mode</h4></div></div></div><p>From Unity 5.3, you can have access to this new feature of the Sprite Editor. In order to use it, you need to set the Sprite Mode to Polygonal in the import setting of the asset.</p><p>In this mode, Unity automatically slices the Sprite as a polygon. Once we open the Sprite Editor, we will immediately be able to set the number of sides or edges of the polygon. If we miss this, we can always press the <span class="strong"><strong>Change Shape</strong></span> button in the top-left corner of the Sprite Editor, as shown here:</p><div class="mediaobject"><img src="/graphics/9781784397173/graphics/image_01_028.jpg" /></div><p>If we select an octagon (eight-sided polygon), this is the final result we would get in our image:</p><div class="mediaobject"><img src="/graphics/9781784397173/graphics/image_01_029.jpg" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec3"></a>Sprite Editor for UI-9-slice scaling</h4></div></div></div><p>There is another important feature of the Sprite Editor, called 9-slice. It is used when a UI element needs different scaling in different parts of it. This feature is in the Sprite Editor because UI elements are treated as Sprites by Unity.</p><p>We will see the UI in another chapter, but let's start understanding why some UI elements need to be scaled differently. As you know, the game can run on different screens that usually have different resolutions and aspect ratios. As a result, the UI needs to be scaled properly depending on the screen. However, if you create a button with beautiful rounded corners, once it's scaled they will look completely different to how we had originally designed them, and not for the better.</p><p>The 9-slice technique avoids this problem by defining nine sections on the Sprite that will be scaled differently. In particular, corners will not be scaled at all: only edges along their axis and the central section will scale in all the directions. The following image should help in understanding these nine sections and how they scale:</p><div class="mediaobject"><img src="/graphics/9781784397173/graphics/image_01_030.jpg" /></div><p>Let's take a UI image to learn how to do a 9-slice with the Sprite Editor of Unity. Select <code class="literal">ui_blank_square_icon_pink</code> in the <code class="literal">Graphics/UI</code> folder, and open it in the Sprite Editor. Since we didn't set its <span class="strong"><strong>Sprite Mode</strong></span> to <span class="strong"><strong>Multiple</strong></span>, we have only one selection around the entire image.</p><p>As we have already noticed, there are some green squares at the edges of our selection. If we drag them, we can divide the image into nine sections, and we are performing a 9-slice on that Sprite. Here is how the 9-slice should be done with a button:</p><div class="mediaobject"><img src="/graphics/9781784397173/graphics/image_01_031.jpg" /></div><p>You need to leave the central section as big as possible, and keep the others the right size to include corners and edges.</p><p>Now, we should know a lot about the Sprite Editor. I suggest that you practice with the Sprite Editor for a bit before moving to the next section of this book. In fact, you will need to practice the methods that we have covered so far to prepare all our assets for the game we are going to build.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec9"></a>Preparing the assets</h3></div></div></div><p>In this section, you will have the chance to practice what we have learned so far. In fact, we need to prepare the assets for our game.</p><p>Let's start by selecting <code class="literal">Graphics/towers/cupcake_tower_sheet-01</code> (the same file we used before) and slice it with a 3 x 3 grid. Then, we should rename each Sprite.</p><p>In the first row, we can give them these names (from left to right):</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p><code class="literal">Sprinkles_Cupcake_Tower_0</code></p></li><li style="list-style-type: disc"><p><code class="literal">Sprinkles_Cupcake_Tower_1</code></p></li><li style="list-style-type: disc"><p><code class="literal">Sprinkles_Cupcake_Tower_2</code></p></li></ul></div><p>In the second row, we can give them these names:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p><code class="literal">ChocolateChip_Cupcake_Tower_0</code></p></li><li style="list-style-type: disc"><p><code class="literal">ChocolateChip_Cupcake_Tower_1</code></p></li><li style="list-style-type: disc"><p><code class="literal">ChocolateChip_Cupcake_Tower_2</code></p></li></ul></div><p>Finally, the third row:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p><code class="literal">Lemon_Cupcake_Tower_0</code></p></li><li style="list-style-type: disc"><p><code class="literal">Lemon_Cupcake_Tower_1</code></p></li><li style="list-style-type: disc"><p><code class="literal">Lemon_Cupcake_Tower_2</code></p></li></ul></div><p>At the end, we should have the following in the <span class="strong"><strong>Project</strong></span> panel:</p><div class="mediaobject"><img src="/graphics/9781784397173/graphics/image_01_032.jpg" /></div><p>Repeat the same process with the <code class="literal">Graphics/enemies</code> and <code class="literal">Graphics/UI</code> folders by dividing the different Sprite Sheets. Don't forget to assign meaningful names. For the rest of the book, when we refer to an asset, its name will be self-explanatory. For your convenience, the original file where the Sprite has been taken will be specified.</p></div></div>