<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec18"></a>Slider</h2></div></div><hr /></div><p>Now let's <a id="id95" class="indexterm"></a>add a <a id="id96" class="indexterm"></a>volume slider for the user to move and select his/her volume level.</p><p>A slider template is available, enabling you to adjust parameters easily by sliding a thumb along a bar. Perform the following steps to create a volume slider:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select the <span class="strong"><strong>Panel</strong></span> GameObject and create a new child with <span class="emphasis"><em>Alt</em></span> + <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>N</em></span>.</p></li><li><p>Rename that new child as <code class="literal">Volume</code>. It will be our volume settings container.</p></li><li><p>Navigate to <span class="strong"><strong>NGUI</strong></span> | <span class="strong"><strong>Open</strong></span> | <span class="strong"><strong>Widget Wizard</strong></span> and perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select the <span class="strong"><strong>Slider</strong></span> template.</p></li><li><p>Set the <span class="strong"><strong>Dark</strong></span> Sprite to <span class="strong"><strong>Empty</strong></span>.</p></li><li><p>Set the <span class="strong"><strong>Light</strong></span> Sprite to <span class="strong"><strong>Full</strong></span>.</p></li><li><p>Set <span class="strong"><strong>Highlight</strong></span> to <span class="strong"><strong>Thumb</strong></span>.</p></li></ol></div></li><li><p>With the <span class="strong"><strong>Volume</strong></span> GameObject selected, click on the <span class="strong"><strong>Add To</strong></span> button.</p></li></ol></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec33"></a>Parameters</h3></div></div></div><p>A slider has<a id="id97" class="indexterm"></a> been created. It has 6 parameters as follows:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Value</strong></span>: This is the slider's current value, which is between 0 and 1.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Steps</strong></span>: This is the number of steps to completely fill or empty the slider.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Direction</strong></span>: This is the slider's fill direction, either <span class="strong"><strong>Horizontal</strong></span> or <span class="strong"><strong>Vertical</strong></span>.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Foreground</strong></span>: This is the sprite used to fill the slider.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Thumb</strong></span>: This is the sprite used for the handle to change the slider's value. By leaving this as <span class="strong"><strong>null</strong></span>, a simple progress bar will be created (user cannot interact).</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Notify</strong></span>: This is the GameObject that lets you choose a method to call when there is a change in the slider's value. When a GameObject is assigned, you may choose a method to call on the value change.</p></li></ul></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec34"></a>Creating a volume slider</h3></div></div></div><p>We can use this slider to<a id="id98" class="indexterm"></a> create our volume slider, which will look like the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783558667/graphics/8667OT_02_14.jpg" /></div><p>Proceed with the <a id="id99" class="indexterm"></a>following steps to create it:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Duplicate the <span class="strong"><strong>Background</strong></span> GameObject from <span class="strong"><strong>Nickname</strong></span> and perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Drag the duplicate inside the <span class="strong"><strong>Volume</strong></span> container GameObject.</p></li><li><p>Set its <span class="strong"><strong>Dimensions</strong></span> to <code class="literal">320</code> x <code class="literal">135</code>.</p></li></ol></div></li><li><p>Attach a component to it by navigating to <span class="strong"><strong>NGUI</strong></span> | <span class="strong"><strong>Attach</strong></span> | <span class="strong"><strong>Anchor</strong></span> and perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Drag our <span class="strong"><strong>Window</strong></span> GameObject inside the <span class="strong"><strong>Container</strong></span> field.</p></li><li><p>Set the <span class="strong"><strong>Pixel Offset</strong></span> to {<code class="literal">-420</code>, <code class="literal">-90</code>}.</p></li></ol></div></li><li><p>Duplicate the <span class="strong"><strong>Label</strong></span> GameObject from <span class="strong"><strong>Nickname</strong></span> and perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Drag it inside the <span class="strong"><strong>Volume</strong></span> GameObject.</p></li><li><p>Drag our Volume's <span class="strong"><strong>Background</strong></span> GameObject inside the <span class="strong"><strong>Container</strong></span> field.</p></li><li><p>Change its text to <code class="literal">[AAFFFF]Volume</code>.</p></li></ol></div></li><li><p>Select the <span class="strong"><strong>Slider</strong></span> GameObject.</p></li><li><p>Attach a component to it by navigating to <span class="strong"><strong>NGUI</strong></span> | <span class="strong"><strong>Attach</strong></span> | <span class="strong"><strong>Anchor</strong></span> and perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Drag the <span class="strong"><strong>Background</strong></span> GameObject from <span class="strong"><strong>Volume</strong></span> inside the <span class="strong"><strong>Container</strong></span> field.</p></li><li><p>Set <span class="strong"><strong>Pixel Offset</strong></span> to {<code class="literal">-100</code>, <code class="literal">-23</code>}.</p></li></ol></div></li><li><p>Select the <span class="strong"><strong>Background</strong></span> GameObject from <span class="strong"><strong>Slider</strong></span> and perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Enter <span class="strong"><strong>Depth</strong></span> as <code class="literal">3</code>.</p></li><li><p>In the <span class="strong"><strong>Color Tint</strong></span> parameter, change <span class="strong"><strong>R</strong></span> to <code class="literal">80</code>, <span class="strong"><strong>G</strong></span> to <code class="literal">220</code>, <span class="strong"><strong>B</strong></span> to <code class="literal">85</code>, and <span class="strong"><strong>A</strong></span> to <code class="literal">255</code>.</p></li></ol></div></li><li><p>Select the <span class="strong"><strong>Foreground</strong></span> GameObject from <span class="strong"><strong>Slider</strong></span> and perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Enter <span class="strong"><strong>Depth</strong></span> as <code class="literal">4</code>.</p></li><li><p>In the <span class="strong"><strong>Color Tint</strong></span> parameter, change <span class="strong"><strong>R</strong></span> to <code class="literal">95</code>, <span class="strong"><strong>G</strong></span> to <code class="literal">255</code>, <span class="strong"><strong>B</strong></span> to <code class="literal">190</code>, and <span class="strong"><strong>A</strong></span> to <code class="literal">255</code>.</p></li></ol></div></li><li><p>Select the <span class="strong"><strong>Thumb</strong></span> GameObject from the <span class="strong"><strong>Slider</strong></span> and perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Enter <span class="strong"><strong>Depth</strong></span> as <code class="literal">5</code>.</p></li><li><p>In the <span class="strong"><strong>Color Tint</strong></span> parameter, change <span class="strong"><strong>R</strong></span> to <code class="literal">100</code>, <span class="strong"><strong>G</strong></span> to <code class="literal">255</code>, <span class="strong"><strong>B</strong></span> to <code class="literal">250</code>, and <span class="strong"><strong>A</strong></span> to <code class="literal">255</code>.</p></li></ol></div></li></ol></div><p>Ok, we now<a id="id100" class="indexterm"></a> have a nice volume slider! Your <span class="strong"><strong>Hierarchy</strong></span> view should look like the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783558667/graphics/8667OT_02_15.jpg" /></div><p>We will now link it to the game's volume with a new script. Let's add some music to our main menu. First, add an audio file of your choice to your Unity project as shown in the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select our <span class="strong"><strong>Main Camera</strong></span> GameObject.</p></li><li><p>Attach a component to it by navigating to <span class="strong"><strong>Component</strong></span> | <span class="strong"><strong>Audio</strong></span> | <span class="strong"><strong>AudioSource</strong></span> and perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Drag a music file from the <span class="strong"><strong>Project</strong></span> view to the <span class="strong"><strong>AudioSource</strong></span> parameter's <span class="strong"><strong>Audio Clip</strong></span> field.</p></li></ol></div></li><li><p>Select the <span class="strong"><strong>Slider</strong></span> GameObject from <span class="strong"><strong>Volume</strong></span> and perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Create and attach a new <code class="literal">VolumeManager.cs</code> C# script to it.</p></li><li><p>Open this new <code class="literal">VolumeManager.cs</code> script.</p></li></ol></div></li></ol></div><p>In this new script, we will first need to declare and initialize the necessary variables. Add the following variable declarations and the <code class="literal">Awake()</code> method:</p><div class="informalexample"><pre class="programlisting">//We will need the Slider
UISlider slider;

void Awake ()
{
  //Get the Slider
  slider = GetComponent&lt;UISlider&gt;();
  //Set the Slider's value to last saved volume
<span class="strong"><strong>  slider.value = NGUITools.soundVolume;</strong></span>
}</pre></div><p>Here we initialized<a id="id101" class="indexterm"></a> the slider's value to <code class="literal">NGUITools.soundVolume</code> because this float is persistent and will be saved across scenes—even if you exit the game.</p><p>Now let's create an <code class="literal">OnVolumeChange()</code> method<a id="id102" class="indexterm"></a> that will modify our AudioListener method's volume each time the slider's value is changed:</p><div class="informalexample"><pre class="programlisting">public void OnVolumeChange ()
{
  //Change NGUI's UI Sounds volume
  NGUITools.soundVolume = UISlider.current.value;
  //Change the Game AudioListener's volume
  AudioListener.volume = UISlider.current.value;
}</pre></div><p>Ok, the method is ready. We just need to call it each time the slider's value changes. Let's use the <span class="strong"><strong>UISlider</strong></span> component's <span class="strong"><strong>Notify</strong></span> field as follows:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select the <span class="strong"><strong>Slider</strong></span> GameObject from <span class="strong"><strong>Volume</strong></span> and perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Drag-and-drop the <span class="strong"><strong>Slider</strong></span> GameObject from <span class="strong"><strong>Volume</strong></span> into the <span class="strong"><strong>Notify</strong></span> field.</p></li><li><p>For the <span class="strong"><strong>Method</strong></span> field, select <code class="literal">VolumeManager.OnVolumeChange</code>.</p></li></ol></div></li></ol></div><p>Now, each time the slider's value is modified, our method will be called.</p><p>You can hit the Play button; the game's volume will change with the slider. The volume is saved even when you exit the game and restart!</p></div></div>