<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch06lvl1sec47"></a>Adding a font</h2></div></div><hr /></div><p>For optimization, NGUI uses bitmaps<a id="id285" class="indexterm"></a> instead of true type fonts.<a id="id286" class="indexterm"></a> We need to export our <code class="literal">.ttf</code> or <code class="literal">.otf</code> fonts to a bitmap using a free third-party tool called <span class="strong"><strong>BMFont</strong></span>
<a id="id287" class="indexterm"></a>, which was created by <span class="strong"><strong>AngelCode</strong></span>.</p><p>Then, we will need a <code class="literal">.txt</code> file that will contain information about where each glyph is located in the exported font's bitmap. You can download the BMFont <a id="id288" class="indexterm"></a>from <a class="ulink" href="http://www.angelcode.com/products/bmfont/" target="_blank">www.angelcode.com/products/bmfont/</a>. Free-to-use fonts are available at <a class="ulink" href="http://www.openfontlibrary.org/" target="_blank">www.openfontlibrary.org/</a>.</p><p>For our first font, we will use the Pacaya font created by <span class="emphasis"><em>Daniel Johnson</em></span>—it is included in the <code class="literal">Assets.zip</code> archive. Download, install, and launch BMFont. Install the font now by right-clicking on the <code class="literal">Pacaya.otf</code> file and then selecting <span class="strong"><strong>Install</strong></span>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec64"></a>Exporting a font using BMFont</h3></div></div></div><p>Once BMFont <a id="id289" class="indexterm"></a>is launched and the Pacaya font is installed, go to <span class="strong"><strong>Options</strong></span> | <span class="strong"><strong>Font Settings</strong></span>. You can now select the Pacaya font in the <span class="strong"><strong>Font</strong></span> field. The <span class="strong"><strong>Size(px)</strong></span> field defines the font's size at export in pixels—set it to <code class="literal">24</code> and click on <span class="strong"><strong>OK</strong></span>.</p><p>Our <code class="literal">.otf</code> file is loaded, and we can visualize and select the characters that we want to export with a left-click or click-and-drag. Select them all with <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>A</em></span>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note24"></a>Note</h3><p>If you want to export a selection of characters, don't forget to select the empty character—it's your space character.</p></div><p>Go to <span class="strong"><strong>Options</strong></span> | <span class="strong"><strong>Export</strong></span> options. Here, you must set the <span class="strong"><strong>Bit</strong></span> depth to <code class="literal">32</code>. Now, the only thing you need to check is the <span class="strong"><strong>Width</strong></span> and <span class="strong"><strong>Height</strong></span> value of the bitmap.</p><p>To see if it's currently big enough, click on <span class="strong"><strong>OK</strong></span> and go to <span class="strong"><strong>Options</strong></span> | <span class="strong"><strong>Visualize</strong></span>. The window shown in the following screenshot appears:</p><div class="mediaobject"><img src="/graphics/9781783558667/graphics/8667OT_06_09.jpg" /></div><p>The red space represents wasted space. As you can see, we have a large amount of wasted space. You must try to set the bitmap size to reduce this red space as much as possible, while making sure you have enough space for all characters.</p><p>If your bitmap<a id="id290" class="indexterm"></a> size is too small and can't hold all your characters, the <span class="strong"><strong>Preview</strong></span> window's title will show <span class="strong"><strong>Preview : 1/2</strong></span> instead of <span class="strong"><strong>Preview : 1/1</strong></span>, as shown in the following screenshot. Then, you should increase the bitmap size utile it displays <span class="strong"><strong>Preview : 1/1</strong></span>. For the Pacaya font with all characters selected, enter <code class="literal">256</code> x <code class="literal">128</code>. It should look as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783558667/graphics/8667OT_06_10.jpg" /></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip06"></a>Tip</h3><p>For optimization, you should keep its dimensions as powers of two.</p></div><p>Once you have set the correct bitmap size, go back to <span class="strong"><strong>Options</strong></span> | <span class="strong"><strong>Export Options</strong></span>. Then, make sure the <span class="strong"><strong>Presets</strong></span> field is set to <span class="strong"><strong>White text with alpha</strong></span> in order to have <span class="strong"><strong>R</strong></span>, <span class="strong"><strong>G</strong></span>, and <span class="strong"><strong>B</strong></span> channel values at <span class="strong"><strong>one</strong></span> and the <span class="strong"><strong>glyph</strong></span> in channel <span class="strong"><strong>A</strong></span>:</p><div class="mediaobject"><img src="/graphics/9781783558667/graphics/8667OT_06_11.jpg" /></div><p>When you've done that, go to <span class="strong"><strong>Options</strong></span> | <span class="strong"><strong>Save bitmap font as…</strong></span> and name it <code class="literal">Pacaya</code>. The <code class="literal">.fnt</code> file extension will be added automatically. Inside the output folder you selected, you should have a <code class="literal">Pacaya_0.tga</code> file—the actual font bitmap—and a <code class="literal">.fnt</code> file.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note25"></a>Note</h3><p>You must have only one <code class="literal">.tga</code> file along with your <code class="literal">.fnt</code> file. Otherwise, your bitmap size is too small, and you need to make it larger before you re-export.</p></div><p>Ok, now copy these two files in a new <code class="literal">Assets/Fonts/Sources</code> folder.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec65"></a>Creating a font in Unity</h3></div></div></div><p>We have<a id="id291" class="indexterm"></a> our new font files. We must now create a new font for NGUI using these files.</p><p>In Unity, perform<a id="id292" class="indexterm"></a> the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Open the <span class="strong"><strong>Font Maker</strong></span> window by navigating to <span class="strong"><strong>NGUI</strong></span> | <span class="strong"><strong>Font Maker</strong></span>, or <span class="emphasis"><em>Alt</em></span> + <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>F</em></span>.</p></li><li><p>In the <span class="strong"><strong>Project</strong></span> view, browse to your <code class="literal">Assets/Fonts/Sources</code> folder.</p></li><li><p>Drag your <code class="literal">Pacaya.fnt</code> file in the <span class="strong"><strong>Font Data</strong></span> field in <span class="strong"><strong>Font Maker</strong></span>.</p></li><li><p>Drag the <code class="literal">Pacaya_0.tga</code> file in the <span class="strong"><strong>Texture</strong></span> field in <span class="strong"><strong>Font Maker</strong></span>.</p></li><li><p>Enter <code class="literal">Pacaya</code> in the <span class="strong"><strong>Font Name</strong></span> field.</p></li><li><p>Click on the <span class="strong"><strong>Atlas</strong></span> button and choose our <span class="strong"><strong>Game</strong></span> Atlas.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note26"></a>Note</h3><p>This means the font's texture will be added to the <span class="strong"><strong>Game</strong></span> Atlas, resulting in no supplementary draw call when a label is displayed.</p></div></li><li><p>Select any file in the <code class="literal">Sources</code> folder in the path <code class="literal">Assets/Fonts/</code> of our <span class="strong"><strong>Project</strong></span> view—our font will then be added to the current folder, but you need to actually select a file inside the desired destination for it to work.</p></li><li><p>Click on the green <span class="strong"><strong>Create the Font</strong></span> button.</p></li></ol></div><p>A new Pacaya prefab has been created in the <code class="literal">Sources</code> folder in the path <code class="literal">Assets/Fonts/</code>. That's the prefab NGUI needs to display the font.</p><p>Select it in the <span class="strong"><strong>Project</strong></span> view, and drag it inside our <code class="literal">Fonts</code> folder in <code class="literal">Assets</code>. If you cannot find it, simply type your font's name in the <span class="strong"><strong>Project</strong></span> view's search bar.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec66"></a>Assigning a new font to Label</h3></div></div></div><p>Now that we<a id="id293" class="indexterm"></a> have added a new font to our project, let's assign it to a Label:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Open our <span class="strong"><strong>Menu</strong></span> scene.</p></li><li><p>Select our <span class="strong"><strong>Label</strong></span> GameObject by navigating to <span class="strong"><strong>MainMenu</strong></span> | <span class="strong"><strong>Container</strong></span> | <span class="strong"><strong>Nickname</strong></span> | <span class="strong"><strong>Input</strong></span> and perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Click on the <span class="strong"><strong>Font</strong></span> button in <span class="strong"><strong>UILabel</strong></span>.</p></li><li><p>Choose our new <span class="strong"><strong>Pacaya</strong></span> font.</p></li></ol></div></li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note27"></a>Note</h3><p>If the new font does not appear in recent fonts, find it in your <span class="strong"><strong>Project</strong></span> view and drag it manually in the <span class="strong"><strong>Font</strong></span> field in <span class="strong"><strong>UILabel</strong></span>.</p></div><p>Ok. We have added a new font to our project and assigned it to a label!</p></div></div>