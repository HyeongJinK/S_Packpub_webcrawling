<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch01lvl1sec11"></a>Your UI structure</h2></div></div><hr /></div><p>The wizard<a id="id18" class="indexterm"></a> has created four new GameObjects on the scene for us:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>UI Root (2D)</p></li><li style="list-style-type: disc"><p>Camera</p></li><li style="list-style-type: disc"><p>Anchor</p></li><li style="list-style-type: disc"><p>Panel</p></li></ul></div><p>Let's now review each in detail.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec15"></a>UI Root (2D)</h3></div></div></div><p>The <a id="id19" class="indexterm"></a>
<span class="strong"><strong>UIRoot</strong></span> component<a id="id20" class="indexterm"></a> scales widgets down to keep them at a manageable size. It is also responsible for the <span class="strong"><strong>Scaling Style</strong></span>—it will either scale UI elements to remain pixel perfect or to occupy the same percentage of the screen, depending on the parameters you specify.</p><p>Select the <span class="strong"><strong>UI Root (2D)</strong></span> GameObject in the Hierarchy. It has the <code class="literal">UIRoot.cs</code> script attached to it. This script adjusts the scale of the GameObject it's attached to in order to let you specify widget coordinates in pixels, instead of Unity units as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783558667/graphics/8667OT_01_03.jpg" /></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec03"></a>Parameters</h4></div></div></div><p>The <span class="strong"><strong>UIRoot</strong></span> component<a id="id21" class="indexterm"></a> has four parameters:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Scaling Style</strong></span>: The following are the available scaling styles:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>PixelPerfect</strong></span>: This will ensure that your UI will always try to remain at the same size in pixels, no matter what resolution. In this scaling mode, a 300 x 200 window will be huge on a 320 x 240 screen and tiny on a 1920 x 1080 screen. That also means that if you have a smaller resolution than your UI, it will be cropped.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>FixedSize</strong></span>: This will ensure that your UI will be proportionally resized depending on the screen's height. The result is that your UI will not be pixel perfect but will scale to fit the current screen size.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>FixedSizeOnMobiles</strong></span>: This will ensure fixed size on mobiles and pixel perfect everywhere else.</p></li></ul></div></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Manual Height</strong></span>: With the <span class="strong"><strong>FixedSize</strong></span> scaling style, the scale will be based on this height. If your screen's height goes over or under this value, it will be resized to be displayed identically while maintaining the aspect ratio (width/height proportional relationship).</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Minimum Height</strong></span>: With the <span class="strong"><strong>PixelPerfect</strong></span> scaling style, this parameter defines the <a id="id22" class="indexterm"></a>minimum height for the screen. If your screen height goes below this value, your UI will resize. It will be as if the <span class="strong"><strong>Scaling Style</strong></span> parameter was set to <span class="strong"><strong>FixedSize</strong></span> with <span class="strong"><strong>Manual Height</strong></span> set to this value.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Maximum Height</strong></span>: With the <span class="strong"><strong>PixelPerfect</strong></span> scaling style, this parameter defines the maximum height for the screen. If your screen height goes over this value, your UI will resize. It will be as if the <span class="strong"><strong>Scaling Style</strong></span> parameter was set to <span class="strong"><strong>FixedSize</strong></span> with <span class="strong"><strong>Manual Height</strong></span> set to this value.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note02"></a>Note</h3><p>Please set the <span class="strong"><strong>Scaling Style</strong></span> parameter to <span class="strong"><strong>FixedSize</strong></span> with a <span class="strong"><strong>Manual Height</strong></span> value of 1080. This will allow us to have the same UI on any screen size up to 1920 x 1080.</p></div></li></ul></div><p>Even though the UI will look the same on different resolutions, the <span class="strong"><strong>aspect ratio</strong></span> is still a problem since the rescale is based on the screen's height only. If you want to cover both 4:3 and 16:9 screens, your UI should not be too large—try to keep it square. Otherwise, your UI might be cropped on certain screen resolutions.</p><p>On the other hand, if you want a 16:9 UI, I recommend you force this aspect ratio only. Let's do it now for this project by performing the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Navigate to <span class="strong"><strong>Edit</strong></span> | <span class="strong"><strong>Project Settings</strong></span> | <span class="strong"><strong>Player</strong></span>.</p></li><li><p>In the <span class="strong"><strong>Inspector</strong></span> option, unfold the <span class="strong"><strong>Resolution and Presentation</strong></span> group.</p></li><li><p>Unfold the <span class="strong"><strong>Supported Aspect Ratios</strong></span> group.</p></li><li><p>Check only the <span class="strong"><strong>16:9</strong></span> box.</p></li></ol></div><p>Now that we have seen the UI Root's different parameters, let's discuss the camera.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec16"></a>Camera</h3></div></div></div><p>Select the<a id="id23" class="indexterm"></a> <span class="strong"><strong>Camera</strong></span> GameObject in the <span class="strong"><strong>Hierarchy</strong></span> view. It has the <a id="id24" class="indexterm"></a>
<code class="literal">UICamera.cs</code> script attached to it. This script must be attached to any camera that needs to interact with your UI.</p><p>Its purpose is to send different messages concerning events that happen to UI elements such as colliders attached to a button. Some of the more frequently used events are <code class="literal">OnClick()</code> and <code class="literal">OnHover()</code>.</p><p>You may have multiple cameras if you consider it necessary; for example, you can have an orthographic camera for 2D in-game UI elements and a separate perspective camera for a 3D pause menu.</p><p>For the purpose of this book, we will stick with only one camera.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec04"></a>Parameters</h4></div></div></div><p>The <code class="literal">UICamera.cs</code> script <a id="id25" class="indexterm"></a>has a large number of parameters as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783558667/graphics/8667OT_01_04.jpg" /></div><p>These<a id="id26" class="indexterm"></a> parameters are as follows:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Event Type</strong></span>: Select which event type this camera will send.</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>World</strong></span>: This is used for interacting with 3D-world GameObjects</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>UI</strong></span>: This is used for interacting with the 2D UI</p></li></ul></div></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Event Mask</strong></span>: Select which layer will be used to receive events.</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>In our case, we will set it to <span class="strong"><strong>GUI2D</strong></span> since our UI will reside on it.</p></li></ul></div></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Debug</strong></span>: This consists of the enable or disable debug mode options. This option is useful when you have unwanted behavior.</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Enabled: When <span class="strong"><strong>Debug</strong></span> is enabled, the currently hovered object will be displayed on the top left-hand corner of the screen</p></li></ul></div></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Allow Multi Touch</strong></span>: This consists of the enable or disable touch mode options that allow simultaneous touches. This is mandatory if you want to use pinch-to-zoom or other such gestures on mobile platforms.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Sticky Press</strong></span>: <a id="id27" class="indexterm"></a>This consists of the enable or disable sticky press mode options.</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Enabled: If you drag your finger out of a pressed button, it will remain in the pressed state and no other element will receive upcoming events from that finger until it is released</p></li><li style="list-style-type: disc"><p>Disabled: If you drag your finger out of a pressed button, it will no longer be pressed and other elements will receive upcoming events from that finger</p></li></ul></div></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Sticky Tooltip</strong></span>: It consists of the enable or disable sticky tool tip mode options.</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Enabled: The tool tip disappears when the mouse moves out of the widget</p></li><li style="list-style-type: disc"><p>Disabled: The tool tip disappears as soon as the mouse moves</p></li></ul></div></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Tooltip Delay</strong></span>: It consists of the required stationary time in seconds before the widget's tool tip is displayed.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Raycast Range</strong></span>: A raycast is an invisible ray that is cast from one point towards a specific direction and is stopped if it encounters another object. The camera uses raycasts from the mouse or touch position towards the camera's forward direction to detect collisions and handle events. You may set the range of this raycast if you need to limit the interaction to a certain range. The default <span class="strong"><strong>-1</strong></span> value implies that the raycast's range will be as far as the camera can see.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Event Sources</strong></span>: These Booleans let you specify what events this camera listens to.</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Mouse</strong></span>: This is used for mouse movements, left/right/middle click, and scroll wheel.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Touch</strong></span>: This is used for touch-enabled devices.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Keyboard</strong></span>: This is used for keyboard input. It uses the <code class="literal">OnKey()</code> event.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Controller</strong></span>: This is used for joystick-based devices. It uses the <code class="literal">OnKey()</code> event.</p></li></ul></div></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Thresholds</strong></span>: These values come in handy when you want to specify the minimum values before a particular event is triggered. This may vary from one game/app to another.</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Mouse Drag</strong></span>: When a mouse button is pressed (the <code class="literal">OnPress()</code> event is triggered), this value determines how far in pixels the mouse must move before it is considered a drag, and sends <code class="literal">OnDrag()</code> events to the dragged object</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Mouse Click</strong></span>: When a mouse button is pressed (the <code class="literal">OnPress()</code> event is triggered), this value determines how far in pixels the mouse can travel before the button release has no effect (the <code class="literal">OnClick()</code> event is not triggered)</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Touch Drag</strong></span>: This is the same as <span class="strong"><strong>Mouse Drag</strong></span>, but for touch-based devices</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Touch Tap</strong></span>: This is the same as <span class="strong"><strong>Mouse Click</strong></span>, but for touch-based devices</p></li></ul></div></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Axes and Keys</strong></span>: These <a id="id28" class="indexterm"></a>parameters let you assign Unity input axes and keys to NGUI's input system.</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Horizontal</strong></span>: This is the input axis for horizontal movement (the left and right key events)</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Vertical</strong></span>: This is the input axis for vertical movement (the up and down key events)</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Scroll</strong></span>: This is the input axis for scrolling</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Submit 1</strong></span>: This is the primary keycode for validation</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Submit 2</strong></span>: This is the secondary keycode for validation</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Cancel 1</strong></span>: This is the primary keycode for cancel.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Cancel 2</strong></span>: This is the secondary keycode for cancel.</p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note03"></a>Note</h3><p>You can edit Unity inputs at any time by navigating to <span class="strong"><strong>Edit</strong></span> | <span class="strong"><strong>Project Settings</strong></span> | <span class="strong"><strong>Input</strong></span>.</p></div></li></ul></div><p>Ok, we have seen what the main parameters of the <code class="literal">UICamera</code> component are. We have to see what the camera's anchor child is.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec17"></a>Anchor</h3></div></div></div><p>An<a id="id29" class="indexterm"></a> anchor is used to attach GameObjects to the same area<a id="id30" class="indexterm"></a> inside the camera view. For example, you can attach them to borders or corners of the screen, or another widget.</p><p>Select the <span class="strong"><strong>Anchor</strong></span> GameObject in the <span class="strong"><strong>Hierarchy</strong></span> view. It has the <span class="strong"><strong>UIAnchor</strong></span> component attached to it. It is configured to center content on the screen based on the parent camera.</p><p>Before we create widgets, we must understand how these <span class="strong"><strong>UIAnchor</strong></span> parameters modify their placement behavior.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec05"></a>Parameters</h4></div></div></div><p>The <span class="strong"><strong>UIAnchor</strong></span> component<a id="id31" class="indexterm"></a> has seven parameters as seen in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783558667/graphics/8667OT_01_05.jpg" /></div><p>These parameters are as follows:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Ui Camera</strong></span>: This is the reference camera from which our anchor bounds are determined. By default, it is set to the camera used by the UI.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Container</strong></span>: If you drag and drop a GameObject in this field, it will overwrite the camera anchoring. This can be useful if you need to anchor your panels or widgets based on a container GameObject, instead of a camera. Your content will be placed using the assigned container's position.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Side</strong></span>: Do you want your child GameObjects to be centered or attached to one side or corner of your referenced camera/container? You can choose your anchor point here.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Half Pixel Offset</strong></span>: You should leave this Boolean checked. It makes widget positions pixel perfect on Windows machines.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Run Only Once</strong></span>: This Boolean can be checked if your screen resolution never changes, or if you want it to remove it on start. As a result, your anchor will be executed at the start and then removed and no longer be updated.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Relative Offset</strong></span>: This <code class="literal">Vector2</code> class takes two values between -1 and 1 to add a relative offset to the final position. With a value of 0.12 for <span class="strong"><strong>X</strong></span> and 0.32 for <span class="strong"><strong>Y</strong></span>, it will result in an offset of 12% horizontally and 32% vertically—it will look the same<span class="strong"><strong> </strong></span>on any resolution because the offset depends on the screen size.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Pixel Offset</strong></span>: This parameter is like <span class="strong"><strong>Relative Offset</strong></span>, but it is absolute instead of relative. You can enter the offset in pixels—it will look different<span class="strong"><strong> </strong></span>depending on the resolution because the offset will stay identical in pixels on all screen sizes.</p></li></ul></div><p>We have <a id="id32" class="indexterm"></a>explained the different <span class="strong"><strong>UIAnchor</strong></span> parameters, but what is this last child, Panel? Let's look into that, and we'll be ready to create our first widget!</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec18"></a>Panel</h3></div></div></div><p>Select <a id="id33" class="indexterm"></a>the <span class="strong"><strong>Panel</strong></span> GameObject in the <span class="strong"><strong>Hierarchy</strong></span> view. It has a <span class="strong"><strong>UIPanel</strong></span> component attached.</p><p>A panel's purpose <a id="id34" class="indexterm"></a>is to hold widgets and render geometry in only one draw call. You may create multiple panels to split your UI, but it will add a draw call per new panel.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec06"></a>Parameters</h4></div></div></div><p>The <a id="id35" class="indexterm"></a>
<code class="literal">UIPanel.cs</code> script has eight parameters as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783558667/graphics/8667OT_01_06.jpg" /></div><p>These parameters<a id="id36" class="indexterm"></a> are as follows:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Alpha</strong></span>: You may change the <span class="strong"><strong>transparency level</strong></span>
<a id="id37" class="indexterm"></a> of the entire panel. All child widgets will be affected by this alpha value, but nested panels won't.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Depth</strong></span>: This is used to define which panel is rendered over another. A panel with a depth value of 1 will appear in front of a panel with a depth value of 0. You can use either the <span class="strong"><strong>Back</strong></span> or <span class="strong"><strong>Forward</strong></span> button to change the <span class="strong"><strong>Depth</strong></span> or simply enter a number in the field. Panels can also have negative depth.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Normals</strong></span>: This Boolean must be checked if you need it to react to lighting<span class="strong"><strong> </strong></span>using shaders. It will calculate normals for your UI geometry.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Cull</strong></span>: This Boolean gives you the ability to disable the child widgets rendering while the panel is being dragged, which improves performance.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Static</strong></span>: If all your panel's widgets are static and won't ever move, check this—it will improve performance!</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Show All</strong></span>: This <a id="id38" class="indexterm"></a>will show all draw calls in the <span class="strong"><strong>Inspector</strong></span> view.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Panel Tool</strong></span>: This is a panel managing tool. You can visualize and select each panel in the scene. You can open it with <span class="emphasis"><em>Alt</em></span> + <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>P</em></span> or navigate to <span class="strong"><strong>NGUI</strong></span> | <span class="strong"><strong>Open</strong></span> | <span class="strong"><strong>Panel Tool</strong></span>. Will this panel show in the <span class="strong"><strong>Panel Tool</strong></span> parameter? This should be unchecked for dynamically created temporary panels through code, like a warning message or ammo pick-up notification.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Clipping</strong></span>: This will let us hide widgets outside a given rectangle. When turned on, you will be able to choose the clipping rectangle's dimensions with the <code class="literal">Center</code> and <code class="literal">Size</code> parameters. Anything outside this rectangle will be hidden.</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>None</strong></span>: No clipping—the entire panel will be displayed.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Hard Clip</strong></span>: Clipping enabled—rough clipping of widgets outside the box.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Soft Alpha</strong></span>: Clipping enabled—soft clipping with fade-out / fade-in borders.</p></li></ul></div><p>We've now taken a look at the parameters of the <span class="strong"><strong>UIPanel</strong></span> component, which will be used to hold our widgets.</p></li></ul></div></div></div></div>