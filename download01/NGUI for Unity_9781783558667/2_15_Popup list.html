<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec20"></a>Popup list</h2></div></div><hr /></div><p>We will now learn <a id="id112" class="indexterm"></a>how to create the popup list<a id="id113" class="indexterm"></a>, see its parameters, and create a difficulty selector for our game.</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select the <span class="strong"><strong>Panel</strong></span> GameObject and create a new child with <span class="emphasis"><em>Alt</em></span> + <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>N</em></span>.</p></li><li><p>Rename that new child as <code class="literal">Difficulty</code>. It's our difficulty box container.</p></li><li><p>Navigate to <span class="strong"><strong>NGUI</strong></span> | <span class="strong"><strong>Open</strong></span> | <span class="strong"><strong>Widget Wizard</strong></span> and perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select <span class="strong"><strong>Popup List</strong></span> as <span class="strong"><strong>Template</strong></span>
</p></li><li><p>Select <span class="strong"><strong>Dark</strong></span> as <span class="strong"><strong>Foreground</strong></span>.</p></li><li><p>Select <span class="strong"><strong>Dark</strong></span> as <span class="strong"><strong>Background</strong></span>.</p></li><li><p>Select the <span class="strong"><strong>Highlight</strong></span> sprite as <span class="strong"><strong>Highlight</strong></span>.</p></li></ol></div></li><li><p>With our <span class="strong"><strong>Difficulty</strong></span> GameObject selected, click on the <span class="strong"><strong>Add To</strong></span> button.</p></li></ol></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec37"></a>Parameters</h3></div></div></div><p>A <span class="strong"><strong>Popup List</strong></span> GameObject <a id="id114" class="indexterm"></a>has just been created. Let's look at its parameters:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Atlas</strong></span>: This is the atlas used for the popup list's sprites.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Font</strong></span>: This is the font used for the popup list's options.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Text Label</strong></span>: This is the label to update when <span class="strong"><strong>Popup List</strong></span> changes selection.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Options</strong></span>: This is the list of options that will pop upâ€”one per line.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Default</strong></span>: This is the option selected at start.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Position</strong></span>: You may force the list of options to appear <code class="literal">Above</code> or <code class="literal">Below</code> the Popup List's button. If this parameter is set to <code class="literal">Auto</code>, NGUI will choose one of both depending on the available space.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Localized</strong></span>: This<a id="id115" class="indexterm"></a> enables localization on options.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Background</strong></span>: This is the background sprite for the popup list's options container.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Highlight</strong></span>: This is the sprite for the currently hovered option.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Text Color</strong></span>: This is the options list's text color tint.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Background</strong></span>: This is the popup list's background color tint.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Highlight</strong></span>: This is the hovered option's background color tint.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Padding</strong></span>: This is the padding of the <span class="strong"><strong>X</strong></span> and <span class="strong"><strong>Y</strong></span> options.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Text Scale</strong></span>: This is the options' text scale.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Animated</strong></span>: If this is unchecked, the options' display will be instantaneous.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Notify</strong></span>: This is the GameObject that lets you choose a method to call when the selected option changes.</p></li></ul></div><p>Below the <code class="literal">UIPopup List</code> component, we have the usual <code class="literal">UIButton</code> and <code class="literal">UIPlay Sound</code> components that we have already seen before.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note09"></a>Note</h3><p>A Popup Menu template is also available in the Widget Wizard. The only difference is that the menu does not indicate which choice you have selected; the button's label is not updated.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec38"></a>Creating a difficulty selector</h3></div></div></div><p>We will now use <a id="id116" class="indexterm"></a>our new <span class="strong"><strong>Popup List</strong></span> GameObject to select the game's difficulty level as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783558667/graphics/8667OT_02_18.jpg" /></div><p>Let's create this difficulty selector as shown in the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select <a id="id117" class="indexterm"></a>the <span class="strong"><strong>Background</strong></span> and <span class="strong"><strong>Label</strong></span> GameObjects from <span class="strong"><strong>Sound</strong></span> and perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Duplicate them.</p></li><li><p>Drag-and-drop them into our <span class="strong"><strong>Difficulty</strong></span> container.</p></li></ol></div></li><li><p>Select the <span class="strong"><strong>Background</strong></span> GameObject from <span class="strong"><strong>Difficulty</strong></span> and enter its <span class="strong"><strong>Pixel Offset</strong></span> parameter to {<code class="literal">420</code>, <code class="literal">43</code>}.</p></li><li><p>Select the <span class="strong"><strong>Label</strong></span> GameObject from <span class="strong"><strong>Difficulty</strong></span> and change its text to <code class="literal">[AAFFFF]Difficulty.</code>
</p></li><li><p>Select our <span class="strong"><strong>Popup List</strong></span> in the <span class="strong"><strong>Hierarchy</strong></span> view and perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Rename it as <code class="literal">Popup</code>.</p></li><li><p>Type in <code class="literal">Normal</code> and <code class="literal">Hard</code> separated by a line.</p></li><li><p>In <span class="strong"><strong>Text Color</strong></span>, change <span class="strong"><strong>R</strong></span> to <code class="literal">190</code>, <span class="strong"><strong>G</strong></span> to <code class="literal">250</code>, <span class="strong"><strong>B</strong></span> to <code class="literal">255</code>, and <span class="strong"><strong>A</strong></span> to <code class="literal">255</code>.</p></li><li><p>In <span class="strong"><strong>Background</strong></span>, change <span class="strong"><strong>R</strong></span> to <code class="literal">70</code>, <span class="strong"><strong>G</strong></span> to <code class="literal">250</code>, <span class="strong"><strong>B</strong></span> to <code class="literal">255</code>, and <span class="strong"><strong>A</strong></span> to <code class="literal">255</code>.</p></li><li><p>In <span class="strong"><strong>Highlight</strong></span>, change <span class="strong"><strong>R</strong></span> to <code class="literal">70</code>, <span class="strong"><strong>G</strong></span> to <code class="literal">255</code>, <span class="strong"><strong>B</strong></span> to <code class="literal">150</code>, and <span class="strong"><strong>A</strong></span> to <code class="literal">255</code>.</p></li><li><p>In <span class="strong"><strong>Hover</strong></span>, change <span class="strong"><strong>R</strong></span> to <code class="literal">70</code>, <span class="strong"><strong>G</strong></span> to <code class="literal">255</code>, <span class="strong"><strong>B</strong></span> to <code class="literal">150</code>, and <span class="strong"><strong>A</strong></span> to <code class="literal">255</code>.</p></li></ol></div></li><li><p>Attach a component to it by navigating to <span class="strong"><strong>NGUI</strong></span> | <span class="strong"><strong>Attach</strong></span> | <span class="strong"><strong>Anchor</strong></span> and perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Drag the <span class="strong"><strong>Background</strong></span> GameObject from <span class="strong"><strong>Difficulty</strong></span> in the <span class="strong"><strong>Container</strong></span> field.</p></li><li><p>Enter <span class="strong"><strong>Pixel Offset</strong></span> as {<code class="literal">-76</code>, <code class="literal">-20</code>}.</p></li></ol></div></li><li><p>Select our popup's <span class="strong"><strong>Sprite</strong></span> GameObject and perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>In <span class="strong"><strong>Color Tint</strong></span>, change <span class="strong"><strong>R</strong></span> to <code class="literal">170</code>, <span class="strong"><strong>G</strong></span> to <code class="literal">255</code>, <span class="strong"><strong>B</strong></span> to <code class="literal">190</code>, and <span class="strong"><strong>A</strong></span> to <code class="literal">255</code>.</p></li><li><p>Enter <span class="strong"><strong>Depth</strong></span> as <code class="literal">3</code>.</p></li></ol></div></li><li><p>Select our popup's <span class="strong"><strong>Label</strong></span> GameObject and perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>In <span class="strong"><strong>Color Tint</strong></span>, change <span class="strong"><strong>R</strong></span> to <code class="literal">135</code>, <span class="strong"><strong>G</strong></span> to <code class="literal">255</code>, <span class="strong"><strong>B</strong></span> to <code class="literal">170</code>, and <span class="strong"><strong>A</strong></span> to <code class="literal">255</code>.</p></li><li><p>Enter <span class="strong"><strong>Depth</strong></span> as <code class="literal">4</code>.</p></li></ol></div></li></ol></div><p>Ok, we now have a <span class="strong"><strong>Popup List</strong></span> GameObject that lets us select the game's difficulty level. Your <span class="strong"><strong>Hierarchy</strong></span> panel should look like the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783558667/graphics/8667OT_02_19.jpg" /></div><p>Now it's time to<a id="id118" class="indexterm"></a> link it to a method that will take that difficulty into account. Do this by performing the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Open our <code class="literal">GameManager.cs</code> script.</p></li><li><p>Declare a new enum for our difficulty levels as follows:</p><div class="informalexample"><pre class="programlisting">public enum Difficulties
{
  Normal,
  Hard
}</pre></div></li><li><p>Declare a new <code class="literal">Difficulty</code> variable to store the current difficulty as follows:</p><div class="informalexample"><pre class="programlisting">public static Difficulties Difficulty = Difficulties.Normal;</pre></div></li></ol></div><p>We used a static variable because it won't be destroyed when loading the game scene. By default, the difficulty level is set to <span class="strong"><strong>Normal</strong></span>.</p><p>Now we need to add the <code class="literal">OnDifficultyChange()</code> method<a id="id119" class="indexterm"></a> that will change our <code class="literal">Difficulty</code> variable when <span class="strong"><strong>Popup List</strong></span> changes state as follows:</p><div class="informalexample"><pre class="programlisting">public void OnDifficultyChange()
{
  //If Difficulty changes to Normal, set Difficulties.Normal
  if(UIPopupList.current.value == "Normal")
  Difficulty = Difficulties.Normal;
  //Otherwise, set it to Hard
  else Difficulty = Difficulties.Hard;
}</pre></div><p>Our method is ready; we need to call it when <span class="strong"><strong>Popup List</strong></span> changes state. Do so by performing the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Save all the modified scripts and return to Unity.</p></li><li><p>Select the <span class="strong"><strong>Popup List</strong></span> GameObjectfrom <span class="strong"><strong>Difficulty</strong></span> and perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Drag our <span class="strong"><strong>GameManager</strong></span> GameObject into the <span class="strong"><strong>Notify</strong></span> field.</p></li><li><p>For the <span class="strong"><strong>Method</strong></span> field, select <code class="literal">GameManager.OnDifficultyChange</code>.</p></li></ol></div></li></ol></div><p>Now, the <span class="strong"><strong>Popup List</strong></span> GameObject will change the <code class="literal">Difficulty</code> variable according to its value. We will be <a id="id120" class="indexterm"></a>able to access this static variable once we're in the game.</p></div></div>