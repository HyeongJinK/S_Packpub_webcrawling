<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec16"></a>Buttons</h2></div></div><hr /></div><p>With NGUI, buttons <a id="id76" class="indexterm"></a>are easy<a id="id77" class="indexterm"></a> to create and configure.</p><p>Let's create<a id="id78" class="indexterm"></a> our first one by performing the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select the <span class="strong"><strong>Panel</strong></span> GameObject.</p></li><li><p>Create a new child with <span class="emphasis"><em>Alt</em></span> + <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>N</em></span> and perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Rename it as <code class="literal">Buttons</code>. It will be our buttons container.</p></li></ol></div></li><li><p>Navigate to <span class="strong"><strong>NGUI</strong></span> | <span class="strong"><strong>Open</strong></span> | <span class="strong"><strong>Widget Wizard</strong></span> and perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select the <span class="strong"><strong>Button</strong></span> Template.</p></li><li><p>For the <span class="strong"><strong>Background</strong></span> field, select the sprite named <span class="strong"><strong>Button</strong></span>.</p></li></ol></div></li><li><p>With the <span class="strong"><strong>Buttons</strong></span> GameObject selected, click on the <span class="strong"><strong>Add To</strong></span> button.</p></li></ol></div><p>A button has<a id="id79" class="indexterm"></a> just been created and centered on the screen. If you look at the <span class="strong"><strong>Hierarchy</strong></span> view, you will see that a button is composed of a container GameObject named <span class="strong"><strong>Button</strong></span> and two children: a <span class="strong"><strong>Background</strong></span> sprite and <span class="strong"><strong>Label</strong></span>. That's how NGUI works; templates are simply assembled components and widgets. If you wanted to, you could build a button from scratch using the right components on empty GameObjects.</p><p>Click on the Play button. You can see that hover and click are already set! Turn off the Play mode, select the new <span class="strong"><strong>Button</strong></span> GameObject, and look at the <span class="strong"><strong>Inspector</strong></span> view.</p><p>Interactive widgets have a box collider attached to them, and that is the case with this button. The collider is used to detect collisions with the cursor.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec29"></a>Parameters</h3></div></div></div><p>A button has a <code class="literal">UIButton</code>
<a id="id80" class="indexterm"></a> component that handles seven button parameters:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Target</strong></span>: This GameObject is transformed and modified when the user hovers or presses the button. By default, this is <span class="strong"><strong>Background</strong></span>.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Normal</strong></span>: This is the color tint when nothing is happening.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Hover</strong></span>: This is the color tint when the user's cursor is over the button.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Pressed</strong></span>: This is the color tint when the user clicks on the button.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Disabled</strong></span>: This is the color tint when the button is disabled (can't be clicked).</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Duration</strong></span>: This<a id="id81" class="indexterm"></a> is the duration of transitions between states.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Notify</strong></span>: This is the parameter that lets you choose a method to call when the button is clicked. You must first drag a GameObject into the <span class="strong"><strong>Notify</strong></span> field. A <span class="strong"><strong>Method</strong></span> field will then appear, listing the GameObject's attached script methods, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783558667/graphics/8667OT_02_10.jpg" /></div></li></ul></div><p>In the previous example, I dragged the <span class="strong"><strong>Panel</strong></span> GameObject into the <span class="strong"><strong>Notify</strong></span> field. My <span class="strong"><strong>Panel</strong></span> GameObject has a <code class="literal">ButtonManager.cs</code> script attached to itâ€”this script has a <code class="literal">ButtonClicked()</code> method. I can now select it in the <span class="strong"><strong>Method</strong></span> field. It will be called on click.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note06"></a>Note</h3><p>Only <span class="strong"><strong>public</strong></span> methods without arguments will show in the <span class="strong"><strong>Method</strong></span> field of the <span class="strong"><strong>Notify</strong></span> parameter.</p></div><p>There is also a <span class="strong"><strong>PlaySound</strong></span> component attached to this button. It lets you choose an audio clip to play when the selected event occurs. You can edit the <span class="strong"><strong>Pitch</strong></span> and <span class="strong"><strong>Volume</strong></span> parameters.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note07"></a>Note</h3><p>You can add as many <span class="strong"><strong>PlaySound</strong></span> components as you want if you need a sound to be played whenever the user hovers or clicks on something, for example.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec30"></a>The play and exit buttons</h3></div></div></div><p>We will now add<a id="id82" class="indexterm"></a> two buttons to our window that will exit or launch the game. They will appear as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783558667/graphics/8667OT_02_11.jpg" /></div><p>We need a GameObject that will manage the game. It will contain the <code class="literal">GameManager.cs</code> script attached in order to manage generic behaviors <a id="id83" class="indexterm"></a>such as exiting or launching the game. Let's create it first; follow these steps to do so:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Create a <a id="id84" class="indexterm"></a>new GameObject at the root of <span class="strong"><strong>Hierarchy</strong></span> with <span class="emphasis"><em>Ctlr</em></span> + <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>N</em></span> and perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Rename it as <code class="literal">GameManager</code>.</p></li></ol></div></li><li><p>Create and attach a new <code class="literal">GameManager.cs</code> C# script to it and perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Open this new <code class="literal">GameManager.cs</code> script.</p></li><li><p>Inside this new script, add this new method called <code class="literal">ExitPressed()</code> with the following code lines:</p><div class="informalexample"><pre class="programlisting">public void ExitPressed()
{
  //Exit Now
  Application.Quit();
}</pre></div></li></ol></div></li></ol></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip05"></a>Tip</h3><p>
<span class="strong"><strong>Downloading the example code</strong></span>
</p><p>You can download the example code files for all Packt books you have purchased from your account at <a class="ulink" href="http://www.packtpub.com" target="_blank">http://www.packtpub.com</a>. If you purchased this book elsewhere, you can visit <a class="ulink" href="http://www.packtpub.com/support" target="_blank">http://www.packtpub.com/support</a> and register to have the files e-mailed directly to you.</p></div><p>Now that the exit method is ready, let's create and configure the two buttons as shown in the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select the <span class="strong"><strong>Button</strong></span> GameObject and perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Rename it as <code class="literal">Exit</code>.</p></li><li><p>Drag the <span class="strong"><strong>GameManager</strong></span> GameObject into the <span class="strong"><strong>Notify</strong></span> field.</p></li><li><p>Choose <span class="strong"><strong>GameManager.ExitPressed</strong></span> in the <span class="strong"><strong>Method</strong></span> field.</p></li><li><p>In the <span class="strong"><strong>Normal</strong></span> color tint parameter, change <span class="strong"><strong>R</strong></span> to <code class="literal">185</code>, <span class="strong"><strong>G</strong></span> to <code class="literal">255</code>, <span class="strong"><strong>B</strong></span> to <code class="literal">255</code>, and <span class="strong"><strong>A</strong></span> to <code class="literal">255</code>.</p></li><li><p>In the <span class="strong"><strong>Hover</strong></span> color tint parameter, change <span class="strong"><strong>R</strong></span> to <code class="literal">0</code>, <span class="strong"><strong>G</strong></span> to <code class="literal">220</code>, <span class="strong"><strong>B</strong></span> to <code class="literal">255</code>, and <span class="strong"><strong>A</strong></span> to <code class="literal">255</code>.</p></li></ol></div></li><li><p>Attach a<a id="id85" class="indexterm"></a> component to it by navigating to <span class="strong"><strong>NGUI</strong></span> | <span class="strong"><strong>Attach</strong></span> | <span class="strong"><strong>Anchor</strong></span> and perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Drag our <span class="strong"><strong>Window</strong></span> GameObject into the <span class="strong"><strong>Container</strong></span> field.</p></li><li><p>Set the <span class="strong"><strong>Side</strong></span> parameter to <span class="strong"><strong>BottomLeft</strong></span>.</p></li><li><p>Set <span class="strong"><strong>Pixel Offset</strong></span> to {<code class="literal">135</code>, <code class="literal">60</code>}.</p></li></ol></div></li><li><p>Select our<a id="id86" class="indexterm"></a> <span class="strong"><strong>Exit</strong></span> button's child <span class="strong"><strong>Background</strong></span> GameObject and perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Enter <span class="strong"><strong>Depth</strong></span> as <code class="literal">2</code>.</p></li></ol></div></li><li><p>Select our <span class="strong"><strong>Exit</strong></span> button's child <span class="strong"><strong>Label</strong></span> GameObject and perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Change its text to <code class="literal">Exit</code>.</p></li><li><p>Enter <span class="strong"><strong>Depth</strong></span> as <code class="literal">3</code>.</p></li></ol></div></li></ol></div><p>Ok, we have our <span class="strong"><strong>Exit</strong></span> button. Let's create our <span class="strong"><strong>Play</strong></span> button as follows:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Duplicate the <span class="strong"><strong>Exit</strong></span> button and perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Rename this new duplicate as <code class="literal">Play</code>.</p></li><li><p>Click on the <span class="strong"><strong>Minus</strong></span> button next to the UIButton's <span class="strong"><strong>Notify</strong></span> field to remove the <span class="strong"><strong>GameManager</strong></span> GameObject from it.</p></li><li><p>Set its <span class="strong"><strong>Side</strong></span> parameter to <span class="strong"><strong>BottomRight</strong></span>.</p></li><li><p>Set <span class="strong"><strong>Pixel Offset</strong></span> to {<code class="literal">-135</code>, <code class="literal">60</code>}.</p></li></ol></div></li><li><p>Attach a Component to it by navigating to <span class="strong"><strong>Component</strong></span> | <span class="strong"><strong>NGUI</strong></span> | <span class="strong"><strong>Examples</strong></span> | <span class="strong"><strong>Load Level On Click</strong></span>, and set its <span class="strong"><strong>Level Name</strong></span> string parameter to <span class="strong"><strong>Game</strong></span>.</p></li><li><p>Select our <span class="strong"><strong>Play</strong></span> button's child <span class="strong"><strong>Label</strong></span> GameObject, and change its text to <code class="literal">Play</code>.</p></li></ol></div><p>Perfect, now if you build your scene, you will have a functional <span class="strong"><strong>Exit</strong></span> button with only one line of code! The <span class="strong"><strong>Pixel Offset</strong></span> parameter<a id="id87" class="indexterm"></a> maintains our buttons at the same distance from the window's borders even if you change resolutions or the window's dimensions. We will create our game scene later.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note08"></a>Note</h3><p>
<span class="strong"><strong>Image buttons</strong></span>
<a id="id88" class="indexterm"></a> can also be created with the Widget Wizard. They are identical to normal buttons, except that they use images for the <span class="strong"><strong>Normal</strong></span>, <span class="strong"><strong>Hover</strong></span>, <span class="strong"><strong>Pressed</strong></span>, and <span class="strong"><strong>Disabled</strong></span> states instead of color and scale tweens.</p></div></div></div>