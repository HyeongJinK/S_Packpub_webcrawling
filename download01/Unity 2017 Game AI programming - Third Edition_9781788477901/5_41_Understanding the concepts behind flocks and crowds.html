<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch05lvl1sec45"></a>Understanding the concepts behind flocks and crowds</h2></div></div><hr /></div><p>As with previous concepts, it's easiest to understand flocks and herds by relating them to the real-life behaviors they model. As simple as it sounds, these concepts describe a group of objects, or boids as they are called in artificial intelligence lingo, moving together as a group. The flocking algorithm gets its name from the behavior birds exhibit in nature, where a group of birds follow one another toward a common destination, mostly keeping a fixed distance from each other. The emphasis here is on the group. We've explored how single agents can move and make decisions on their own, but flocks are a relatively computationally efficient way of simulating large groups of agents moving in unison while modeling unique movement in <span>each</span><a id="id288183608" class="indexterm"></a> boid that doesn't rely on randomness or predefined paths.</p><p>The implementation that we'll be building in this chapter for flocking is built upon the concepts originally developed by Craig Reynolds himself. There are many ways to approach Reynolds' flocking behavior, and in our example we've gone with a single-threaded optimized version that allocates no memory. Performance will vary based on the hardware, but generally speaking, the more boids in your flock, the more CPU time it will take to compute the swarm's direction. There are three basic concepts that define how a flock works, and these concepts have been <span>around</span><a id="id288319752" class="indexterm"></a> since the algorithm's introduction in the 80s:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><span class="strong"><strong>Separation</strong></span>: This means maintaining a distance with other neighbors in the flock to avoid collision. The following diagram illustrates this concept:</li></ul></div><div class="mediaobject"><img src="/graphics/9781788477901/graphics/d58789d3-5cdb-4dd9-8058-5abe4a7c9a91.png" /></div><p>Diagram of separation in flocking</p><p>In the preceding image, the middle boid is shown moving in a <span>direction</span><a id="id288562525" class="indexterm"></a> away from the rest of the boids, without changing its heading.</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><span class="strong"><strong>Alignment</strong></span>: This means to moving in the same direction as the flock, and with the same velocity. The following image illustrates this concept:</li></ul></div><div class="mediaobject"><img src="/graphics/9781788477901/graphics/beec76ad-af77-4a66-afda-4fae874c3c3b.png" /></div><p>Diagram of alignment in flocking</p><p>In the preceding image, the boid in the middle is shown changing its heading toward the arrow to match the heading of the boids surrounding it.</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><span class="strong"><strong>Cohesion</strong></span>: This means maintaining a maximum distance from the flock's center. The following image illustrates this concept:</li></ul></div><div class="mediaobject"><img src="/graphics/9781788477901/graphics/c2234e79-8c9c-425f-a68e-42968d85ce7f.png" /></div><p>Diagram of cohesion in flocking</p><p>In the preceding image, the boid to the right of the flock moves in the direction of the arrow to be within the minimum distance to its nearest group of boids.</p></div>