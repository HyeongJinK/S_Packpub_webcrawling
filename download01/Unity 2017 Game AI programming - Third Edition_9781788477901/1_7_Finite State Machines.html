<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch01lvl1sec15"></a>Finite State Machines</h2></div></div><hr /></div><p><span class="strong"><strong>Finite</strong></span><span class="strong"><strong>State Machines</strong></span> (<span class="strong"><strong>FSM</strong></span>) can be considered one of the <span>simplest</span><a id="id288562517" class="indexterm"></a> AI models, and they are commonly used in games. A state machine basically consists of a set number of states that are connected in a graph by the transitions between them. A game entity starts with an initial state and then looks out for the events and rules that will trigger a transition to another state. A game entity can only be in exactly one state at any given time.</p><p>For example, let's take a look at an AI guard character in a <span>typical</span><a id="id288562528" class="indexterm"></a> shooting game. Its states could be as simple as patrolling, chasing, and shooting:</p><div class="mediaobject"><img src="/graphics/9781788477901/graphics/4046a236-aef7-4da1-b3e0-3ad97bcbf67d.png" /></div><p>There are basically four <span>components</span><a id="id288562548" class="indexterm"></a> in a simple FSM:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><span class="strong"><strong>States</strong></span>: This component defines a set of distinct <span>states</span><a id="id288563746" class="indexterm"></a> that a game entity or an NPC can choose from (patrol, chase, and shoot)</li><li style="list-style-type: disc"><span class="strong"><strong>Transitions</strong></span>: This <span>component</span><a id="id288563760" class="indexterm"></a> defines relations between different states</li><li style="list-style-type: disc"><span class="strong"><strong>Rules</strong></span>: This <span>component</span><a id="id288563773" class="indexterm"></a> is used to trigger a state transition (player on sight, close enough to attack, and lost/killed player)</li><li style="list-style-type: disc"><span class="strong"><strong>Events</strong></span>: This is the <span>component</span><a id="id288568567" class="indexterm"></a> that will trigger to check the rules (guard's visible area, distance to the player, and so on)</li></ul></div><p>FSMs are commonly used go-to AI patterns in game development because they are relatively easy to implement, visualize, and understand. Using simple if/else statements or switch statements, we can easily implement an FSM. It can get messy as we start to have more states and more transitions. We'll look at how to manage a simple FSM more in depth in <a class="link" href="#" linkend="ch02">Chapter 2</a>, <span class="emphasis"><em>Finite State Machines and You</em></span>.</p></div>