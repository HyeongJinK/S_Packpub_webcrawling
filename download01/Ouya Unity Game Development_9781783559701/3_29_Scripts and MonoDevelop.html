<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec33"></a>Scripts and MonoDevelop</h2></div></div><hr /></div><p>Click on <span class="strong"><strong>GameObject</strong></span> | <span class="strong"><strong>Create Empty</strong></span> and a new GameObject will appear on the stage with the name <span class="strong"><strong>GameObject</strong></span>. It should already be highlighted, so click it once more and the name will become editable, call it <code class="literal">AdvanceToNextLevel</code>.</p><p>We're going<a id="id123" class="indexterm"></a> to create and attach a C# sharp script to the <code class="literal">AdvanceToNextLevel</code> GameObject that will load a new scene as soon as this one is initialized. Right-click on the <code class="literal">Scripts</code> folder you created earlier and then click on <span class="strong"><strong>Create</strong></span> and <a id="id124" class="indexterm"></a>select the <span class="strong"><strong>C# Script</strong></span> label. Once you click on it, a script will appear in the <code class="literal">Scripts</code> folder and it should already have focus and be asking you to type a name for the script, call it <code class="literal">AdvanceToNextLevel</code>. Double-click on the script in Unity and it will open MonoDevelop, which is an open source, integrated development environment that runs on Linux, Mac OSX, and Windows. It supports automatic<a id="id125" class="indexterm"></a> code completion, source control, and <span class="strong"><strong>Graphical User Interface</strong></span> (<span class="strong"><strong>GUI</strong></span>).</p><p>After MonoDevelop has loaded, you will be presented with the C# stub code that was created automatically for you by Unity when you created the C# script.</p><p>Let's break down what's currently there before we replace some of it with new code. At the top you will see the following two lines of code:</p><div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;</pre></div><p>The <code class="literal">UnityEngine</code> namespace contains interfaces and class definitions that let MonoDevelop know about all the addressable objects inside Unity.</p><p>The <code class="literal">System.Collections</code> namespace contains interfaces and classes that define various collections <a id="id126" class="indexterm"></a>of objects, such as <span class="strong"><strong>lists</strong></span>, <span class="strong"><strong>queues</strong></span>, <span class="strong"><strong>bit arrays</strong></span>, <span class="strong"><strong>hash tables</strong></span>, and <span class="strong"><strong>dictionaries</strong></span>. We won't be using the <code class="literal">System.Collections</code> in this script, so we can go <a id="id127" class="indexterm"></a>ahead and delete that line although it won't affect if you leave it in.</p><p>The next line of code you'll see is as follows:</p><div class="informalexample"><pre class="programlisting">public class AdvanceToNextLevel : MonoBehaviour {</pre></div><p>The class name must match the filename. When Unity created our C# stub code, it took care of this, we can see this result as our file is named <code class="literal">AdvanceToNextLevel</code> and the class is also named <code class="literal">AdvanceToNextLevel</code>. Next up is the <code class="literal">: MonoBehaviour</code> section of the code. All behavior scripts must inherit from <code class="literal">: MonoBehaviour</code> directly or indirectly. While this happens automatically in JavaScript, it must be explicitly declared inside the C# scripts. If you create your script inside Unity through the <span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>C# Script</strong></span>, the created template will already contain the necessary definition.</p><p>The line after that is a method definition for a method named <code class="literal">Start</code>, as shown in the following code. It isn't a user method, but one that belongs to <code class="literal">MonoBehaviour</code>.</p><div class="informalexample"><pre class="programlisting">void Start () {
  
}</pre></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip05"></a>Tip</h3><p>
<span class="strong"><strong>Downloading the example code</strong></span>
</p><p>You can download the example code files for all Packt books you have purchased from your account at <a class="ulink" href="http://www.packtpub.com" target="_blank">http://www.packtpub.com</a>. If you purchased this book elsewhere, you can visit <a class="ulink" href="http://www.packtpub.com/support" target="_blank">http://www.packtpub.com/support</a> and register to have the files e-mailed directly to you.</p></div><p>
<code class="literal">Start</code> is <a id="id128" class="indexterm"></a>called just before any of the <code class="literal">Update</code> methods are called for the <a id="id129" class="indexterm"></a>first time. We're not going to use <code class="literal">Start</code>; we're going to use <code class="literal">Awake</code> instead, so you can change the word <code class="literal">Start</code> to <code class="literal">Awake</code> as the method signatures are the same. This is the method that will load our next scene.</p><p>
<code class="literal">Start</code> is only called once in the lifetime of the behavior. The difference between <code class="literal">Awake</code> and <code class="literal">Start</code> is that <code class="literal">Start</code> is only called if the script instance is enabled. This allows you to delay any initialization code until it is really needed. <code class="literal">Awake</code> is always called before any <code class="literal">Start</code> method functions. This allows you to order the initialization of your scripts.</p><p>Inside the curly braces add the following line to the code:</p><div class="informalexample"><pre class="programlisting">Application.LoadLevel("TitleScreen");</pre></div><p>
<code class="literal">LoadLevel</code> will simply destroy everything in the current scene, excluding GameObjects that have <code class="literal">DontDestroyOnLoad</code> set, and load the scene specified as a string. The string is the filename of the scene, in this case <code class="literal">TitleScreen</code>, which we created earlier.</p><p>The last piece of code is the <a id="id130" class="indexterm"></a>
<code class="literal">Update</code> method. This method is called once every frame so it's an ideal place to add any code that will need to execute constantly such as checks for movement. This particular script has no need for the method, so go ahead and delete it.</p><p>Your final <a id="id131" class="indexterm"></a>script should look like the following code:</p><div class="informalexample"><pre class="programlisting">usingUnityEngine;

public class AdvanceToNextLevel : MonoBehaviour {

  // Use this for initialization
  void Awake () {
    Application.LoadLevel("TitleScreen");
  }
}</pre></div><p>Now we <a id="id132" class="indexterm"></a>have finished our first script, we need to attach it to a GameObject in our scene. Go back to Unity and you'll see a small activity indicator in the lower-right of the screen, that's your script being compiled and checked for errors by Unity. If there are ever any issues, they will appear in the console. Drag your <code class="literal">AdvanceToNextLevel</code> script to your <code class="literal">AdvanceToNextLevel</code> GameObject.</p></div>