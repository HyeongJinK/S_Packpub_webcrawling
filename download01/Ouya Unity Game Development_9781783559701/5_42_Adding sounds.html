<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch05lvl1sec44"></a>Adding sounds</h2></div></div><hr /></div><p>When you start <a id="id244" class="indexterm"></a>adding sounds in to your game, it takes on a whole new<a id="id245" class="indexterm"></a> dimension, you'd be surprised how a game that seems unfinished can suddenly feel almost complete just by adding some sounds effects. We're going to add a sound that will play every time a crate is moved on to a goal tile. With keeping our project tidy in mind, the first step is to create a folder that will store all our sound files.</p><p>Click on the <span class="strong"><strong>Create</strong></span> dropdown menu in the <span class="strong"><strong>Project</strong></span> panel. Click on <span class="strong"><strong>Folder</strong></span> and a new folder will be created in the project panel, call the folder <code class="literal">Sounds</code>. Import the asset <code class="literal">crateOnGoal.mp3</code> from the files for this chapter to your new <code class="literal">Sounds</code> folder.</p><p>Sound in Unity requires the following three things:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>A sound to play</p></li><li style="list-style-type: disc"><p>A source for the sound to come from</p></li><li style="list-style-type: disc"><p>A listener to hear the sound</p></li></ul></div><p>Our <span class="strong"><strong>Main Camera</strong></span> already has an <code class="literal">Audio Listener</code> component attached to it and we have already imported our sound to play, all that's left is to add an audio source with a reference to our sound and a trigger to call it. Click on the <code class="literal">Sokoban</code> GameObject, then click on <span class="strong"><strong>Component</strong></span> | <span class="strong"><strong>Audio</strong></span> | <span class="strong"><strong>Audio Source</strong></span>. You'll see in the <span class="strong"><strong>Inspector</strong></span> panel that the new component has appeared that is <span class="strong"><strong>Audio Source</strong></span>.</p><p>Drag your <code class="literal">crateOnGoal</code> sound effect to the <span class="strong"><strong>Audio Clip</strong></span> section of the component; this is how <span class="strong"><strong>Audio Source</strong></span> knows which sound to play. We also need to uncheck the <span class="strong"><strong>Play On Awake</strong></span> box, as we only want the sound to play when a box is moved on to a goal by the player, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783559701/graphics/9701OS_05_04.jpg" /></div><p>Our audio component is now configured. Go back to MonoDevelop and edit your <code class="literal">Sokoban</code> script, we need to find the appropriate place to add our sound code. The <code class="literal">MovePlayer</code> method is a good place. We need to add it when we know a move has finished, so it will be inside of the <code class="literal">if (movingSteps == 10) {</code> statement. As we want it to play only <a id="id246" class="indexterm"></a>when moving a crate we'll also have to have it inside the <code class="literal">if (movingCrate != "") {</code> statement. Add the following code at the bottom of the <a id="id247" class="indexterm"></a>statement, inside the closing brace:</p><div class="informalexample"><pre class="programlisting">if (levels[currentLevel][pRow + 2 * tRow][pCol + 2 * tCol] == 5) {
  audio.Play();
}</pre></div><p>We only want to play the sound if the crate is on a goal tile, so we check that the array's index is <code class="literal">5</code>, which is the number we use for a crate on a goal tile. As <span class="strong"><strong>Audio Source</strong></span> is attached to the same GameObject as the <code class="literal">Sokoban</code> script, we can just call <code class="literal">audio.Play</code> to play the sound. Click on the play icon at the top-middle of the Unity screen and position a crate on a goal tile, you should have a cool space-style sound effect play. If not then check you dragged the sound file to the <span class="strong"><strong>Audio Source</strong></span> component and that your sound on your test device is turned up.</p></div>