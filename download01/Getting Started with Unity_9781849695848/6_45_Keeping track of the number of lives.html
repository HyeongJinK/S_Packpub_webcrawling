<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch06lvl1sec46"></a>Keeping track of the number of lives</h2></div></div><hr /></div><p>So far, <a id="id609" class="indexterm"></a>we have tracked the user's health levels and decreased these accordingly, whenever it had been hit by enemies or when it has collected a health pack. However, in addition, we could give several lives to players. Whenever they lose a life, they can restart the current level. To do so, we will need to keep track of the number of lives across levels, and also reload the current level when a life has been lost. In our game, the game will end whenever the player has sustained too many injuries (that is, <code class="literal">health = 0</code>), or the player has run out of time. In this case, we would like the player to restart the game. To do so, we will need to monitor the player's health or the time, and reload the level accordingly. Open the script <code class="literal">healthBar</code> and add the <a id="id610" class="indexterm"></a>following <a id="id611" class="indexterm"></a>code in the function <code class="literal">Update</code>:</p><div class="informalexample"><pre class="programlisting">if (currHealth &lt;=0) Application.loadLevel(Application.loadedlevel);</pre></div><p>This <a id="id612" class="indexterm"></a>code checks whether the health levels are equal to or below <code class="literal">0</code>, and if so, the current level is reloaded.</p><p>Open the script <code class="literal">timer</code> and <a id="id613" class="indexterm"></a>add the following code in the function <code class="literal">Update</code>:</p><div class="informalexample"><pre class="programlisting">if (minutes&gt;=10) GameObject.Find("healthBar").GetComponent(healthBar).setHealth(0);</pre></div><p>In the previous code, we check whether the timer has reached <code class="literal">10</code> minutes, if this is the case, the health of the player is set to <code class="literal">0</code>, which means that the level will be reloaded accordingly.</p><p>Lastly, we need to check whether the player has fallen into the water:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select the object labeled <code class="literal">water</code> in the <span class="strong"><strong>Hierarchy</strong></span> window (within the folder <code class="literal">maze</code>).</p></li><li><p>Add a collider to this object by selecting: <span class="strong"><strong>Components</strong></span> | <span class="strong"><strong>Physics</strong></span>| <span class="strong"><strong>Box Collider</strong></span>.</p></li><li><p>In the <span class="strong"><strong>Inspector</strong></span> window, change the center properties of this collider to (x=0, y=-4, z=0) and its size properties to (x=2, y=0, z=2).</p></li><li><p>Create a new tag called <code class="literal">water</code>, and <a id="id614" class="indexterm"></a>apply it to the object labeled <code class="literal">water</code>.</p></li></ol></div><p>Next, add <a id="id615" class="indexterm"></a>the following code to the script, <code class="literal">collisionDetection</code>, at the end of the function <code class="literal">OnControllerColliderHit</code>:</p><div class="informalexample"><pre class="programlisting">if (c.gameObject.tag=="water")
{
  GameObject.Find("healthBar").GetComponent(healthBar).setHealth(0);
}</pre></div><p>In the previous code, the health of the player is set to <code class="literal">0</code> when he/she collides with the water.</p></div>