<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec27"></a>Adding audio</h2></div></div><hr /></div><p>Finally, it <a id="id190" class="indexterm"></a>would be great to add additional feedback when the object has been collected, using an audio cue. This will be done as follows:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Open the <a id="id191" class="indexterm"></a>script <code class="literal">collisionDetection</code>.</p></li><li><p>Add the following two lines at the start of the script:</p><div class="informalexample"><pre class="programlisting">@script RequireComponent(AudioSource)
public var collection_beep : AudioClip;</pre></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>In line 1 of the previous code, we specify that the script requires an audio source component for this object</p></li><li style="list-style-type: disc"><p>In line 2 of the previous code, we declare a variable that will be used for the sound to be played</p></li></ul></div></li><li><p>Locate the sound <code class="literal">collection_beep</code> from the folder <span class="strong"><strong>Assets</strong></span> | <span class="strong"><strong>chapter3</strong></span> | <span class="strong"><strong>chapter3_pack</strong></span>.</p></li><li><p>In the <span class="strong"><strong>Hierarchy</strong></span> window<a id="id192" class="indexterm"></a>, click on the <span class="strong"><strong>First Person Controller</strong></span> object<a id="id193" class="indexterm"></a> (top-most level). In the <span class="strong"><strong>Inspector</strong></span> window<a id="id194" class="indexterm"></a>, drag-and-drop the file <code class="literal">collection_beep</code> to the <a id="id195" class="indexterm"></a>variable <code class="literal">collection_beep</code><a id="id196" class="indexterm"></a> in the component <span class="strong"><strong>Collision Detection</strong></span> of the object <span class="strong"><strong>First Person Controller</strong></span>.</p></li><li><p>Check that the <span class="strong"><strong>First Person Controller</strong></span> object is still selected.</p></li><li><p>Select <span class="strong"><strong>Component</strong></span> | <span class="strong"><strong>Audio</strong></span> | <span class="strong"><strong>Audio Source</strong></span>.</p></li><li><p>This should add an <span class="strong"><strong>Audio Source</strong></span> component to the <span class="strong"><strong>First Person Controller</strong></span> in the <span class="strong"><strong>Inspector</strong></span> window.</p></li><li><p>Check that the option <span class="strong"><strong>Play on Awake</strong></span> is not selected for this component.</p></li></ol></div><p>Modify <a id="id197" class="indexterm"></a>the script <code class="literal">collisionDetection</code> so that it plays the sound on collision:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Open the script <code class="literal">collisionDetection</code>.</p></li><li><p>Add the following line to the script (that is, within the conditional statement):</p><div class="informalexample"><pre class="programlisting">gameObject.audio.Play();</pre></div></li><li><p>The function <code class="literal">OnControllerColliderHit</code><a id="id198" class="indexterm"></a> should now look as follows:</p><div class="informalexample"><pre class="programlisting">function OnControllerColliderHit(c : ControllerColliderHit)
{
  print("collided with"+c.gameObject.tag);
  if (c.gameObject.tag == "medpack") 
  {
    Destroy(c.gameObject);
    audio.clip = collection_beep;
    audio.Play();
  }
}</pre></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>In statement 7 of the previous code, we specify the audio clip that should be played.</p></li><li style="list-style-type: disc"><p>In statement 8 of the previous code, we play the current audio clip. Note that we could also use the following code to play the sound:</p><div class="informalexample"><pre class="programlisting">audio.PlayOneShot(collection_beep);</pre></div></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note20"></a>Note</h3><p>The sound that we have created is automatically a 3D sound, which means that if it was located on a different object, the way the player perceives it could differ based on the position and orientation of the player in relation to the object. In this case, we would need to add an audio listener to the <span class="strong"><strong>First Player Controller</strong></span>, so that this 3D sound can be heard and played accordingly. In our case, the sound will be played through the speakers, regardless of the relative position of the player and the object.</p></div></li></ol></div><p>We could create other objects and use a similar technique to destroy them after collision:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Create a new box, rename it <code class="literal">keys</code>, change its position to (x=2, y=1, z=6), and its <code class="literal">scale</code> property<a id="id199" class="indexterm"></a> to (x=0.2, y=0.5, z=0.5); then apply the texture called <code class="literal">texture_key</code> from the folder <span class="strong"><strong>Assets</strong></span> | <span class="strong"><strong>chapter3</strong></span> | <span class="strong"><strong>chapter3_pack</strong></span> to this box.</p></li><li><p>Create <a id="id200" class="indexterm"></a>a new box, rename it <code class="literal">gun</code>, change its position to (x=1, y=1, z=6), and its <code class="literal">scale</code> property to (x=0.2, y=0.5, z=0.5); then apply the texture called <code class="literal">texture_gun</code> from the folder <span class="strong"><strong>Assets</strong></span> | <span class="strong"><strong>chapter3</strong></span> | <span class="strong"><strong>chapter3_pack</strong></span> to this box.</p></li><li><p>Attach the script labeled <code class="literal">rotate</code> to both objects (<code class="literal">key</code> and <code class="literal">gun</code>) and test the scene.</p></li></ol></div></div>