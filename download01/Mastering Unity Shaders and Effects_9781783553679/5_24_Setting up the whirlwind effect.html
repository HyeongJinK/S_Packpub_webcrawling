<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch05lvl1sec25"></a>Setting up the whirlwind effect</h2></div></div><hr /></div><p>The scene contains a whirlwind effect that is animated with a simple script. In the next step, we will activate the <code class="literal">whirlwind</code> game object and preview it in the game view:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>In the <span class="strong"><strong>Hierarchy</strong></span> panel, select the <code class="literal">whirlwind</code> game object.</p><p>This game object is currently inactive.</p></li><li><p>In the <span class="strong"><strong>Inspector</strong></span>, check the checkbox next to its name.</p><p>The object will appear in the scene:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781783553679/graphics/image_05_011.jpg" /></div><p>
</p><div class="caption">The whirlwind game object in the scene</div></li></ol></div><p>Now let's talk about the object hierarchy and how the material is set up.</p><p>Each of the planes in the whirlwind object is UV mapped with the same coordinates, ensuring that they show the texture in the same way.</p><p>Objects are rendered in a specific order. Opaque objects are rendered first, then alphatesting (cutout objects), and finally, transparent objects are rendered over the top. When it comes to transparent objects, it would be normal to render distant objects first, but we usually adjust this to render closer triangles so that they are not occluded by other triangles behind them.</p><p>Let's demonstrate this with a custom shader that will give the distant triangles in the whirlwind more opacity and a stronger tint color.</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>In the <span class="strong"><strong>Project</strong></span> panel, click on the <code class="literal">PACKT_Shaders</code> folder to view its content in the <span class="strong"><strong>Assets</strong></span> panel.</p></li><li><p>In an empty area of the <span class="strong"><strong>Assets</strong></span> panel, create the new shader. Right-click and choose <span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>Shader</strong></span> | <span class="strong"><strong>Standard Surface Shader </strong></span>from the drop-down list.</p></li><li><p>When it is created in the <span class="strong"><strong>Assets</strong></span> panel, rename the shader <code class="literal">Wind</code>.</p></li><li><p>Double-click on the new shader to open it in MonoDevelop.</p></li><li><p>We will start by amending the shader's name so that it is selectable from our main shader's folder.</p></li><li><p>Adjust the first line to read as follows:</p><pre class="programlisting">        Shader "PACKT/Wind" { &#13;
</pre><p>Next, we will make the geometry transparent.</p></li><li><p>Locate the <code class="literal">RenderType</code> tag and change it to <code class="literal">Transparent</code>:</p><pre class="programlisting">        Tags { "RenderType"="Transparent"} &#13;
</pre></li><li><p>Locate the shader directive and add the <code class="literal">alpha</code> keyword at its end.</p></li><li><p>Save the shader.</p></li><li><p>Return to the main Unity interface.</p></li><li><p>Click the small arrow next to the <code class="literal">whirlwind</code> game object in the <span class="strong"><strong>Hierarchy</strong></span> panel to expand it.</p></li><li><p>Select the <code class="literal">stormPlanes</code> subobject and scroll to the bottom of its components in the <span class="strong"><strong>Inspector</strong></span> panel.</p></li><li><p>In the <code class="literal">PACKT_Textures</code> folder locate the storm texture asset.</p></li><li><p>Drag this into the albedo slot in the <code class="literal">storm</code> material. The quads that make up the model should now appear partially transparent in the <span class="strong"><strong>Scene</strong></span> and <span class="strong"><strong>Game</strong></span> views:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781783553679/graphics/image_05_012.jpg" /><div class="caption">The whirlwind game object in the Game view</div></div><p>
</p><p>The planes in the whirlwind object have now become transparent, but the planes are currently lit. We can make an adjustment to the shader to fix this.</p></li><li><p>Back in MonoDevelop, replace the <code class="literal">alpha</code> keyword that we just added with <code class="literal">alpha:fade</code>.</p></li><li><p>Save the shader.</p></li></ol></div><p>If you look at the <span class="strong"><strong>Game</strong></span> view now, you should see that the whirlwind's appearance has changed again:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781783553679/graphics/image_05_013.jpg" /><div class="caption">The whirlwind game object with the alpha:fade shader applied</div></div><p>
</p><p>The planes have retained their transparency, but now the edges of the quads are no longer visible. This is another useful built-in function.</p></div>