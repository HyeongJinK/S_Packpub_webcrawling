<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec15"></a>Looking at the scene light setup</h2></div></div><hr /></div><p>In Unity, we can light scene objects in real time, use lights to bake light maps, and even cast shadows in real time.</p><p>In this section, we will demonstrate Unity's lighting setup and how scene lighting affects the scene materials.</p><p>You will find the scene set up for this chapter in the Unity project that you have downloaded:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Open the scene using the menu bar in the main Unity interface by clicking on <span class="strong"><strong>File</strong></span> and then <span class="strong"><strong>Open Scene</strong></span>.</p></li><li><p>In the dialog that appears, choose the <code class="literal">Chapter3_Start</code> scene from the <code class="literal">PACKT_Scenes</code> folder.</p></li></ol></div><p>The spacecraft bridge environment will become visible in the <span class="strong"><strong>Scene</strong></span> view:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781783553679/graphics/3529_03_01.jpg" /><div class="caption">Initial state of the example scene</div></div><p>
</p><p>At this stage in our game, our astronaut is back inside the spacecraft after completing the repairs. She is preparing to travel to the planet's surface in order to make contact with the research team.</p><p>The scene represents the spacecraft's bridge, the control center where the astronaut can look at data and plot the ship's course.</p><p>Currently, the scene has just a few basic materials set up and a basic lighting setup.</p><p>Unity uses <span class="strong"><strong>Enlighten</strong></span> for its lighting solutions. The lighting setup can be baked or real time, but each has their own limitations.</p><p>For a more optimized result, we should use <span class="strong"><strong>baked lighting</strong></span>. This solution supports all light sources and emissive surfaces, but it does not accommodate dynamic elements such as a character moving through a scene or lights switching on and off.</p><p>
<span class="strong"><strong>Realtime lighting</strong></span> is calculated for every frame and is better for dynamic situations, but currently, it only has limited support for lights. At the time of writing, only <span class="strong"><strong>directional lights</strong></span> can cast real-time shadows. We will be using this as we have animation and dynamic effects in our scene.</p><p>We need to make sure that we are using the correct solution:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>If it is not already present in the Unity interface, open the <span class="strong"><strong>Lighting</strong></span> panel by clicking on <span class="strong"><strong>Windows</strong></span> and then on <span class="strong"><strong>Lighting</strong></span>.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip23"></a>Tip</h3><p>You may find it convenient to dock the <span class="strong"><strong>Lighting</strong></span> window next to <span class="strong"><strong>Inspector</strong></span>, so it does not disappear behind the main Unity window.</p></div></li><li><p>Scroll to the bottom of the <span class="strong"><strong>Lighting</strong></span> panel and make sure that the <span class="strong"><strong>Auto</strong></span> checkbox is checked.</p><p>This will ensure that lightmaps are automatically baked when a change is made to the scene that affects the lighting.</p></li><li><p>Leave the other settings at their default values.</p></li></ol></div><p>The lightmaps will now be calculated and you will briefly see a blue progress bar in the bottom-right corner of the interface.</p><p>There should be a noticeable difference in the scene:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781783553679/graphics/3529_03_02.jpg" /><div class="caption">The example scene with the lighting solution</div></div><p>
</p><p>When the lightmap is baked, there is deeper shadow in the space behind the astronaut character.</p><p>In the next step, we will add emissive properties to the instrument console to light it up.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec20"></a>Adding emissive properties to a material</h3></div></div></div><p>Any <span class="strong"><strong>Standard Shader</strong></span> material can emit light into a scene by adjusting some values in the Inspector panel.</p><p>We will start by defining the strength of the illumination:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>In the <span class="strong"><strong>Project</strong></span> panel, click on the <code class="literal">PACKT_Materials</code> folder to view its contents in the <span class="strong"><strong>Assets</strong></span> panel.</p></li><li><p>In the <span class="strong"><strong>Assets</strong></span> panel, locate the <code class="literal">interface01</code> material and click it once to display its properties in the <span class="strong"><strong>Inspector</strong></span> panel:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781783553679/graphics/3529_03_03.jpg" /><div class="caption">The interface01 material parameters</div></div><p>
</p><p>The <code class="literal">interface01</code> material is a Standard Shader material set to the <span class="strong"><strong>Cutout</strong></span> mode. It uses a bitmap <span class="strong"><strong>Albedo</strong></span> texture with an alpha channel to define the transparency.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note24"></a>Note</h3><p>The emission value in the Standard Shader can be defined by a color value or a texture map in the <span class="strong"><strong>Inspector</strong></span> panel.</p></div></li><li><p>In the <span class="strong"><strong>Inspector</strong></span> panel, click on the rectangular color swatch next to<span class="strong"><strong> Emission</strong></span>.</p></li><li><p>Choose a gray-blue color. The hex code <code class="literal">3A6359</code> should give you a suitable value.</p></li></ol></div><p>In the <span class="strong"><strong>Scene</strong></span> view, the control panel will become illuminated.</p><p>Let's add a similar illuminated material to another part of the geometry to lighten up the scene even further:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>In the <span class="strong"><strong>Hierarchy</strong></span> panel, locate the <code class="literal">lightCapsule</code> game object.</p></li><li><p>Drag the <code class="literal">glowLight</code> material from the <span class="strong"><strong>Assets</strong></span> panel onto <code class="literal">lightCapsule</code> in the <span class="strong"><strong>Hierarchy</strong></span> panel or <span class="strong"><strong>Scene</strong></span> view to add it.</p><p>Next, we can tone down the existing lighting a little to better see the emissive effect.</p></li><li><p>In the <span class="strong"><strong>Hierarchy</strong></span> panel, select <code class="literal">front light</code>.</p><p>This is a <span class="strong"><strong>point light</strong></span> with adjusted <span class="strong"><strong>Range</strong></span> and <span class="strong"><strong>Intensity</strong></span> values to fit the scene.</p></li><li><p>In the <span class="strong"><strong>Inspector</strong></span>, decrease the light's intensity to <code class="literal">2.0</code>.</p><p>In the <span class="strong"><strong>Scene</strong></span> view, the area in front of the astronaut should become a little darker as a result:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781783553679/graphics/3529_03_04.jpg" /><div class="caption">The example scene with adjusted light values</div></div><p>
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note25"></a>Note</h3><p>The <span class="strong"><strong>Emissive</strong></span> texture map uses brightness to define the areas that are emissive. Full white equals maximum emission and black equals zero emission.</p></div></li></ol></div><p>The control panel is lit up, but it does not currently cast light onto other objects in the scene, such as the astronaut, like a real light would do. To do this, we need to add an effect to the camera.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec21"></a>Adding the Bloom effect</h3></div></div></div><p>Unity's native glow effect is called bloom, it will make all light sources (including emissive surfaces) in a scene glow, based on their light values.</p><p>Unity's image effects are included in a package that comes with the install. We can install packages (or selected contents) when we create a project or any time after:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>In the menu bar at the top of the main Unity interface, navigate to <span class="strong"><strong>Assets</strong></span> | <span class="strong"><strong>Import Package</strong></span> | <span class="strong"><strong>Effects</strong></span>.</p></li><li><p>In the <span class="strong"><strong>Import Unity Package</strong></span> dialog that appears, check the <span class="strong"><strong>ImageEffects</strong></span> folder:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781783553679/graphics/image_03_005.jpg" /><div class="caption">The Import Unity Package window</div></div><p>
</p></li><li><p>Click on the<span class="strong"><strong> Import</strong></span> button to add the effects scripts to the project.</p></li><li><p>In the <span class="strong"><strong>Hierarchy</strong></span> panel, select the <code class="literal">Main Camera</code> game object.</p></li><li><p>In the <span class="strong"><strong>Inspector</strong></span>, scroll to the bottom of the components and click on the <span class="strong"><strong>Add Component</strong></span> button.</p></li><li><p>Navigate to <span class="strong"><strong>Image Effects</strong></span> | <span class="strong"><strong>Bloom and Glow</strong></span> | <span class="strong"><strong>Bloom</strong></span>.</p><p>The default <span class="strong"><strong>Bloom</strong></span> effect will be added to the <code class="literal">Main Camera</code>:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781783553679/graphics/3529_03_05.jpg" /><div class="caption">The Bloom effect added to our scene</div></div><p>
</p><p>The default values appear a little understated within our scene. We need to tweak some values in the effect to get it to look better.</p></li><li><p>In the <span class="strong"><strong>Bloom (Script)</strong></span> component in the <span class="strong"><strong>Inspector</strong></span>, set the <span class="strong"><strong>Intensity</strong></span> value to <code class="literal">2.2</code>.</p></li><li><p>Set the <span class="strong"><strong>Threshold </strong></span>value to <code class="literal">0.23</code>.</p></li><li><p>Set the <span class="strong"><strong>Blur Iterations</strong></span> value to <code class="literal">1</code>.</p></li><li><p>Leave the <span class="strong"><strong>Sample Distance</strong></span> value at its default value of <code class="literal">2.5</code>.</p></li><li><p>Leave the remaining parameters at their default values.</p></li></ol></div><p>When the lighting solution updates, we should see some changes in the scene:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781783553679/graphics/3529_03_06.jpg" /><div class="caption">The Bloom effect with adjusted values</div></div><p>
</p><p>We can get a better result by adding a <span class="strong"><strong>Reflection Probe</strong></span> to the scene. This will create a map of the light that bounces off reflective surfaces.</p><p>We can further improve the effect by adding a Reflection Probe to simulate reflected light in the scene. By default, Unity uses the skybox for reflections, and this is not always appropriate for interior scenes such as this one.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec8"></a>Adding a reflection probe</h4></div></div></div><p>Reflection probes sample the reflected material values in an area of the scene.</p><p>Add the Reflection Probe from the menu bar by clicking on <span class="strong"><strong>GameObject</strong></span>, selecting <span class="strong"><strong>Light</strong></span>, and then clicking on <span class="strong"><strong>Reflection Probe</strong></span>.</p><p>As we have already made sure that the light solution is set to <span class="strong"><strong>Auto</strong></span>, the reflection probe will bake automatically.</p><p>Give it a few minutes to complete. You will see a progress bar in the bottom-right corner of the main Unity interface.</p><p>When the lighting solution has updated, you will see some changes in the scene:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781783553679/graphics/3529_03_07.jpg" /><div class="caption">Effect of Reflection Probe on the Bloom effect in the example scene</div></div><p>
</p><p>The glow effect will appear softer on lit objects that are less shiny, such as the astronaut's hair and clothing, and more pronounced on glossy surfaces, such as the skin and some parts of the bridge interior.</p></div></div></div>