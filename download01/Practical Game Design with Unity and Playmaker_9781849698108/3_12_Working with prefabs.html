<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec17"></a>Working with prefabs</h2></div></div><hr /></div><p>In order to create multiple<a id="id76" class="indexterm"></a> instances of a game object with the same components and properties, or access the same game object from different scenes, you can save it as a file in your <code class="literal">Assets</code> folder. These files are called prefabs in Unity and act like game object templates. To create an empty prefab, right-click on the empty space in the <span class="strong"><strong>Project</strong></span> panel, then select <span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>Prefab</strong></span> from the contextual menu. A new file called <code class="literal">New Prefab</code> should appear in the <span class="strong"><strong>Project</strong></span> panel. Call this prefab <code class="literal">Wall</code>. Now create an empty folder called <code class="literal">Prefabs</code> and put the <code class="literal">Wall</code> prefab in this folder.</p><p>Right now the prefab is empty.</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>In the <span class="strong"><strong>Hierarchy</strong></span> panel, select the <span class="strong"><strong>Wall</strong></span> game object that you created in <a class="link" href="#" linkend="ch02">Chapter 2</a>, <span class="emphasis"><em>Unity's and Playmaker's</em></span> <span class="emphasis"><em>User Interface</em></span>. Click and drag it into the <code class="literal">Wall</code> prefab in the <span class="strong"><strong>Project</strong></span> panel.</p></li><li><p>The name of the <span class="strong"><strong>Wall</strong></span> game object will become blue in <span class="strong"><strong>Hierarchy</strong></span>, and when you select the <code class="literal">Wall</code> prefab, you will see all of the components that the original <span class="strong"><strong>Wall</strong></span> game object had in the <span class="strong"><strong>Inspector</strong></span> panel.</p></li></ol></div><p>Now, if you drag-and-drop the <code class="literal">Wall</code> prefab into the scene, a new object called <span class="strong"><strong>Wall</strong></span> will be created with exactly the same properties as those defined in the prefab.</p><p>Moreover, if you change some of the components and/or properties in the prefab using the <span class="strong"><strong>Inspector</strong></span> panel, these changes will be automatically applied to all the instances of the prefab in the scene. This can save you a lot of time if you have multiple objects of the same type (that is, walls, monsters, trees, and so on) as you do not have to select them one-by-one in the <span class="strong"><strong>Hierarchy</strong></span> and make the same changes multiple times.</p><p>You can also modify your prefab (and, by extension, all of its instances in the scene) by selecting one of the instances in <span class="strong"><strong>Hierarchy</strong></span>, making your changes, and clicking the <span class="strong"><strong>Apply</strong></span> button near the top of the <span class="strong"><strong>Inspector</strong></span> panel. You can also undo all of the changes by clicking on the <span class="strong"><strong>Revert</strong></span> button. This will reset the currently selected instance to the way its prefab was set up.</p><p>This works <a id="id77" class="indexterm"></a>because, in fact, all the components and properties of an instance are linked to the ones of the prefab. Only when you change them in the instance they become unlinked, which means that further updates of that property on the prefab won't be applied to this instance. These unlinked properties can be distinguished because their name becomes bold in the <span class="strong"><strong>Inspector</strong></span> panel. If you want to re-link a specific unlinked property you can right-click on it and select <span class="strong"><strong>Revert value to Prefab</strong></span>.</p><p>Besides the <span class="strong"><strong>Apply</strong></span> and <span class="strong"><strong>Revert</strong></span> buttons, all prefab instances also have a <span class="strong"><strong>Select</strong></span> button. This button lets you select and highlight the prefab corresponding to the currently selected instance in the <span class="strong"><strong>Project</strong></span> panel, so you can access it more easily. Moreover, as we saw earlier, a prefab instance can be easily identified by its blue tinted name in the <span class="strong"><strong>Hierarchy</strong></span> panel. The alternative way of creating a prefab is even simpler: you can simply drag-and-drop a game object from the <span class="strong"><strong>Hierarchy</strong></span> panel into the <span class="strong"><strong>Project</strong></span> panel. An appropriately named file will be created in the <code class="literal">Assets</code> folder.</p><p>Another very important thing to know about prefabs is that they can be copied and shared on the Web, since they are little more than the files recognized by Unity that contain information about components and properties. Now, follow these steps to modify the <code class="literal">Wall</code> prefab to suit our needs better:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Create a new folder in the <span class="strong"><strong>Project</strong></span> panel and call it <code class="literal">Materials</code>. It will contain material files that contain information about textures, shaders, and colors of your game objects.</p></li><li><p>Create a new material file by clicking on the <span class="strong"><strong>Create</strong></span> button in the top-left corner of the <span class="strong"><strong>Project</strong></span> panel and selecting <span class="strong"><strong>Material</strong></span> from the drop-down list.</p></li><li><p>Name the new material <code class="literal">WallMaterial</code> and put it inside the <code class="literal">Materials</code> folder.</p></li><li><p>Select <span class="strong"><strong>WallMaterial</strong></span> in the <span class="strong"><strong>Project</strong></span> panel, then in <span class="strong"><strong>Inspector</strong></span>, click on the rectangle next to the text that says <span class="strong"><strong>Main Color</strong></span>. In the <span class="strong"><strong>Color</strong></span> window that appears, select the black color and close the <span class="strong"><strong>Color</strong></span> window. The following screenshot shows the <span class="strong"><strong>Material</strong></span> modification interface as well as the <span class="strong"><strong>Color</strong></span> window:</p><div class="mediaobject"><img src="/graphics/9781849698108/graphics/8108OT_03_04.jpg" /></div></li><li><p>Now that you <a id="id78" class="indexterm"></a>have this new material set up, select the <code class="literal">Wall</code> prefab, then drag-and-drop <span class="strong"><strong>WallMaterial</strong></span> into the <span class="strong"><strong>Element 0</strong></span> element of the <span class="strong"><strong>Materials</strong></span> property of the prefab's <span class="strong"><strong>Mesh Renderer</strong></span> component. It should replace <span class="strong"><strong>Default Diffuse</strong></span>. The following screenshot shows what the <span class="strong"><strong>Mesh Renderer</strong></span> component should look like once your are done assigning the new material.</p><div class="mediaobject"><img src="/graphics/9781849698108/graphics/8108OT_03_05.jpg" /></div></li><li><p>Now all of the instances of the <code class="literal">Wall</code> prefab will be black.</p></li><li><p>Also, set the X scale property of the <span class="strong"><strong>Transform</strong></span> component to <code class="literal">15</code>. This will make all the new walls longer.</p></li><li><p>Select the <span class="strong"><strong>Main Camera</strong></span> game object and set its <span class="strong"><strong>Projection</strong></span> property of the <span class="strong"><strong>Camera</strong></span> component to <span class="strong"><strong>Orthographic</strong></span> using the <span class="strong"><strong>Inspector</strong></span> panel. This will make the view of the camera flat; the game view will now appear two-dimensional.</p></li><li><p>Set the <span class="strong"><strong>Size</strong></span> property to <code class="literal">5</code>. You can adjust the look later, but for now this will help us focus on gameplay.</p></li></ol></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip11"></a>Tip</h3><p>It is often a good idea to restrict yourself to simple primitives, color-coded untextured materials, and orthographic projection cameras in the beginning of the design process, because it will let you focus on gameplay. This way, if your game is fun, you will know about it, and if it is not, you will not get distracted by fancy visuals.</p></div><p>Make four <a id="id79" class="indexterm"></a>walls and arrange them in the scene so that what you see in the <span class="strong"><strong>Game</strong></span> view looks like the following screenshot. If this is not the case, you can go back to the table in <a class="link" href="#" linkend="ch02">Chapter 2</a>, <span class="emphasis"><em>Unity's and Playmaker's</em></span> <span class="emphasis"><em>User Interface</em></span>, and see if your <span class="strong"><strong>Main Camera</strong></span> game object is positioned and rotated correctly. Its position should be set to (<code class="literal">0</code>, <code class="literal">10</code>, <code class="literal">0</code>) and rotation to (<code class="literal">90</code>, <code class="literal">0</code>, <code class="literal">0</code>). Don't forget that you can rotate the objects to precise values such as <code class="literal">90</code> and <code class="literal">180</code> degrees by changing their rotation angle in the <span class="strong"><strong>Transform</strong></span> component. Also make sure that the Y position of all the walls remains equal to <code class="literal">0.5</code>.</p><div class="mediaobject"><img src="/graphics/9781849698108/graphics/8108OT_03_06.jpg" /></div></div>