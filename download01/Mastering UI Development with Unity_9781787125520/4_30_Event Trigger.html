<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec35"></a>Event Trigger</h2></div></div><hr /></div><p>The <strong class="userinput"><code>Event Trigger</code></strong> component can be attached to any UI (or non-UI) element to allow the object to receive events. Some of the UI elements <span>are</span><a id="id325334206" class="indexterm"></a> preconfigured to intercept specific events. For example, buttons have the <code class="literal">onClick</code> event. However, if you'd like to add an event to an object that either isn't already set up to receive events or you want it to receive different events, you can attach an <strong class="userinput"><code>Event Trigger</code></strong> component to the GameObject.</p><p>You can attach an Event Trigger component by selecting <strong class="userinput"><code>Add Component</code></strong> | <strong class="userinput"><code>Event</code></strong> | <strong class="userinput"><code>Event Trigger</code></strong>.</p><p>One caveat of using the <strong class="userinput"><code>Event Trigger</code></strong> component is that the object it is attached to receives all the events, not just the ones you added. So, even if you don't tell the object what to do with the specified event, it will receive that event and acknowledge <span>that</span><a id="id325599140" class="indexterm"></a> the event occurred—it just won't do anything in response. This can have a slow performance in your game. If you are worried about performance, you will want to write your own script that attaches only the events you want to use to your component. The next section, <span class="emphasis"><em>Event Inputs</em></span>, discusses how to achieve this.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note32"></a>Note</h3><p><span>If</span> you use an <strong class="userinput"><code>Event Trigger</code></strong> component on an object other than a UI element, the object must also have a collider component, and you must include a raycaster on the camera within the scene.</p><p>Which collider and raycaster you use depends on whether you are working in 2D or 3D.</p><p>If you are working in 2D, you can add a 2D collider to the object with <strong class="userinput"><code>Add Component</code></strong> | <strong class="userinput"><code>Physics 2D</code></strong> and then select the appropriate 2D collider from within the object's <strong class="userinput"><code>Inspector</code></strong>. You can then add a raycaster to the camera by selecting <strong class="userinput"><code>Add Component</code></strong> | <strong class="userinput"><code>Event</code></strong> | <strong class="userinput"><code>Physics 2D Raycaster</code></strong> from within the camera's <strong class="userinput"><code>Inspector</code></strong>.</p><p>If you are working in 3D, you can add a 3D collider to the object with <strong class="userinput"><code>Add Component</code></strong> | <strong class="userinput"><code>Physics</code></strong> and then select the appropriate 3D collider from within the object's <strong class="userinput"><code>Inspector</code></strong>. You can then add a raycaster to the camera by selecting <strong class="userinput"><code>Add Component</code></strong> | <strong class="userinput"><code>Event</code></strong> | <strong class="userinput"><code>Physics Raycaster</code></strong> from within the camera's <strong class="userinput"><code>Inspector</code></strong>.</p></div><p>Let's look at the various event types that the Event Trigger can receive.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec38"></a>Event Types</h3></div></div></div><p>You can tell the object which type of <span>input</span><a id="id325601385" class="indexterm"></a> event you want to receive by selecting <strong class="userinput"><code>Add New Event Type</code></strong>.</p><p>Many of these events are tied to the bounding region of the object. The bounding region of a UI object is represented by the area of the Rect Transform. For a non-UI object, the bounding region is represented by a 2D or 3D collider.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl3sec25"></a>Pointer events</h4></div></div></div><p>Pointer events can be called by the <span>pointer</span><a id="id325601405" class="indexterm"></a> in a <strong class="userinput"><code>Standalone Input Module</code></strong>. Remember that a pointer is not exclusively a mouse. The pointer in a <strong class="userinput"><code>Standalone Input Module</code></strong> can be a mouse, finger touch, or a reticle tied to gamepad movement.</p><p>Two of the event types are related to the position of the pointer in relation to the object's bounding box region. The <strong class="userinput"><code>PointerEnter</code></strong> event is called when the pointer enters the bounding box of the object and <strong class="userinput"><code>PointerExit</code></strong> is called when the pointer exits the bound box area.</p><p>There are three events related to clicking on the object. The <strong class="userinput"><code>PointerDown</code></strong> event is called when the pointer is pressed down within the bounding region of the object, and <strong class="userinput"><code>PointerUp</code></strong> is called when the pointer is released within the bounding region of the object. It's important to note that with <strong class="userinput"><code>PointerUp</code></strong>, the pointer can be pressed outside of the object, held down, and then released inside the object for the <strong class="userinput"><code>PointerUp</code></strong> event to trigger. The <strong class="userinput"><code>PointerClick</code></strong> event is called when the pointer is pressed and then released within the bounding region of the object.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl3sec26"></a>Drag and Drop events</h4></div></div></div><p>When working with the various drag <span>and</span><a id="id325630475" class="indexterm"></a> drop events, it's important to differentiate between the object being dragged and the object on which the dragged object is dropped.</p><p>The <strong class="userinput"><code>InitializePotentialDrag</code></strong> event is <span>called</span><a id="id325630489" class="indexterm"></a> whenever a drag object is found, but before an object is actually being dragged.</p><p>The <strong class="userinput"><code>Drag</code></strong> event is called on the object being dragged when it is being dragged. A <strong class="userinput"><code>Drag</code></strong> event occurs when a pointer is pressed within the bounding box of an object and then moved without releasing. It's ended by releasing the pointer. The <strong class="userinput"><code>BeginDrag</code></strong> event is called from the object being dragged when its drag begins and <strong class="userinput"><code>EndDrag</code></strong> event is called when its drag ends.</p><p>The <strong class="userinput"><code>Drop</code></strong> event is different from the <strong class="userinput"><code>EndDrag</code></strong> event. The <strong class="userinput"><code>EndDrag</code></strong> event is called on the object that was just being dragged. The <strong class="userinput"><code>Drop</code></strong> event is called by the object on which the dragged object was dropped. Therefore, the <strong class="userinput"><code>Drop</code></strong> event is called by the <span>object touching the dragged</span> when the dragged object stops dragging. So, if you were making a drag and drop menu, you'd add the <strong class="userinput"><code>Drag</code></strong> event to the objects you want to drag and the <strong class="userinput"><code>Drop</code></strong> event to the slots they will be dragged to.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl3sec27"></a>Selection events</h4></div></div></div><p>The <strong class="userinput"><code>Select</code></strong> event is <span>called</span><a id="id325630855" class="indexterm"></a> when the object is considered the selected object, and <strong class="userinput"><code>Deselect</code></strong> is called when the object is no longer considered selected. Each of these events only fire once—the moment the object is considered selected or deselected. If you want an event that will trigger continuously while the object is selected, you can use the <strong class="userinput"><code>UpdateSelected</code></strong> event. The <strong class="userinput"><code>UpdateSelected</code></strong> event is called every frame.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl3sec28"></a>Other events</h4></div></div></div><p>The following events are <span>called</span><a id="id325630505" class="indexterm"></a> based on assignments in the Input Manager. Remember that you can assign buttons, keys, and such to axes that define movement, submit, and cancel.</p><p>The <strong class="userinput"><code>Scroll</code></strong> event is called when the mouse wheel scrolls, and the <strong class="userinput"><code>Move</code></strong> event is called when a movement happens. When the button assigned to the <code class="literal">Submit</code> axis is pressed, the <strong class="userinput"><code>Submit</code></strong> event is called, and when the button assigned to the <code class="literal">Cancel</code> axis is pressed, the <strong class="userinput"><code>Cancel</code></strong> event is called.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec39"></a>Adding an action to the event</h3></div></div></div><p>Once you have actually selected an <span>event</span><a id="id325630541" class="indexterm"></a> type, you must specify what will happen when that event type triggers. The following screenshot shows the results of selecting <strong class="userinput"><code>Pointer Enter</code></strong> as an event type:</p><div class="mediaobject"><img src="/graphics/9781787125520/graphics/e364ff4a-54b3-4bb6-86e9-70111976ca61.png" /></div><p>The preceding screenshot shows that an event type of <strong class="userinput"><code>Pointer Enter</code></strong> has been selected, but what happens when the pointer enters the object's bounding area yet to be defined. To define what happens when the event triggers, you must select the plus sign (+) at the bottom-right corner of the event's box. You can add multiple things to happen when the event triggers by selecting the plus sign multiple times.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note33"></a>Note</h3><p>Once an event type has been added to the <strong class="userinput"><code>Event Trigger</code></strong>, it cannot be added a second time and will be grayed out in the <strong class="userinput"><code>Add New Event Type</code></strong> list.</p><p>To remove an event type from the <strong class="userinput"><code>Event Trigger</code></strong>, select the minus (-) at the top-right corner of the event type's box.</p></div><p>Once the plus sign is selected, the event type should look as follows:</p><div class="mediaobject"><img src="/graphics/9781787125520/graphics/4c0bd937-7efb-4afa-aafd-20a549e741cf.png" /></div><p>The first setting on this event is a drop-down <span>menu</span><a id="id325630908" class="indexterm"></a> with the <strong class="userinput"><code>Runtime</code></strong><strong class="userinput"><code>Only</code></strong> (by default), <strong class="userinput"><code>Editor and Runtime</code></strong>, and <strong class="userinput"><code>Off</code></strong>options. This is where we specify when the event can be triggered. Setting this to <strong class="userinput"><code>Off</code></strong> will make the event never trigger. Setting this to <strong class="userinput"><code>Runtime Only</code></strong> will have the event trigger when the game is being played. Setting this to <strong class="userinput"><code>Editor and Runtime</code></strong> will make events trigger when the game is being played, but it also accepts the triggers in the Editor when the game is not in play mode. I generally just always set this to <strong class="userinput"><code>Editor and Runtime</code></strong>, because I usually want my events to always work. However, most of the time, <strong class="userinput"><code>Runtime Only</code></strong> is sufficient for what you will be doing and hence it is the default.</p><p>Below that drop-down menu is a slot with <strong class="userinput"><code>None (Object)</code></strong> in it. You are to drag from the Hierarchy whichever item the function you want to run into this slot. Once that is assigned, a list of all the available components and scripts attached to that object will display in the second drop-down menu. You can drag and drop the object the <strong class="userinput"><code>Event Trigger</code></strong> is attached to in this slot and are not restricted to only using other objects.</p><p>The following screenshot shows an Image object with an <strong class="userinput"><code>Event Trigger</code></strong> added to it and the <code class="literal">Pointer Enter</code> event type. The same image is added to the slot, signifying to look at the components available at itself. The image component's sprite property is to change to the image <code class="literal">foodSpriteSheet_1</code> when the pointer enters its <strong class="userinput"><code>Rect Transform</code></strong>.</p><div class="mediaobject"><img src="/graphics/9781787125520/graphics/9efaaa84-c930-4111-9db5-46349b80a5f6.png" /></div><p>Event Trigger Example in the Chapter4Text Scene</p><p>To see this <strong class="userinput"><code>Event Trigger</code></strong> in action, view the <code class="literal">Chapter4Text</code>scene in the provided game project. Hover your mouse over the image; it will look like a potion bottle, and you will see it change to a triangle.</p><p>You can also run functions within scripts attached to objects. For example, the next screenshot shows the same image, but now with a <code class="literal">Pointer Click</code> event as well. <code class="literal">Main Camera</code> has a script attached to it called <strong class="userinput"><code>HelloWorld</code></strong> with a function called <code class="literal">HeyThere()</code>.</p><div class="mediaobject"><img src="/graphics/9781787125520/graphics/0aa3df5f-ed33-4987-9622-0ade13175bf5.png" /></div><p>Event Trigger Example in the Chapter4Text Scene</p><p>The <code class="literal">HeyThere()</code> function simply prints <code class="literal">Hello world! This is main camera speaking!</code> in the <strong class="userinput"><code>Console</code></strong>. Each time the potion bottle is clicked on, that function will run, and you'll see the message in the <strong class="userinput"><code>Console</code></strong>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note34"></a>Note</h3><p>To run a function from the <strong class="userinput"><code>Event Trigger</code></strong>, it must be <code class="literal">public</code>, have a return type of <code class="literal">void</code>, and have no more than one parameter.</p></div></div></div>