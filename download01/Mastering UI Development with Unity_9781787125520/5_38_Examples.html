<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch05lvl1sec42"></a>Examples</h2></div></div><hr /></div><p>For the first three examples in this chapter, we will momentarily step away from the scene we have been working on to build a new scene that will allow us to experiment with button navigation and scene loading. We'll then pick up where we left off <span>with</span><a id="id325376082" class="indexterm"></a> our scene from <a class="link" href="#" linkend="ch04">Chapter 4</a>, <span class="emphasis"><em>The Event System and Programming for UI</em></span>, to add some buttons to our scene.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec51"></a>Navigating through Buttons and using First Selected</h3></div></div></div><p>We’ll build out a faux <span>start</span><a id="id325606632" class="indexterm"></a> screen that <span>appears</span><a id="id325606648" class="indexterm"></a> as follows:</p><div class="mediaobject"><img src="/graphics/9781787125520/graphics/cf7f3907-de4e-4722-860c-059d3c8e906e.png" /></div><p>Most of these buttons will be dummy buttons, but we will set up the <strong class="userinput"><code>Play</code></strong> button in the next example to load the scene we have been working on.</p><p>To give us the ability to experiment with button navigation, we'll assign an <strong class="userinput"><code>Explicit</code></strong> navigation scheme to it so that we can cycle through the buttons with the following pattern:</p><div class="mediaobject"><img src="/graphics/9781787125520/graphics/2aa2fb70-9ef2-40de-abc5-3c7b07b71cd7.png" /></div><p>First, the <strong class="userinput"><code>Play</code></strong><span>button</span><a id="id325611021" class="indexterm"></a> will be selected. Pressing the <span>down</span><a id="id325611030" class="indexterm"></a> key on the keyboard continuously will result in the following selection path:</p><div class="mediaobject"><img src="/graphics/9781787125520/graphics/97597a91-7dd4-43b3-8702-6035d58eeb83.png" /></div><p>Pressing the up <span>button</span><a id="id325620668" class="indexterm"></a> continuously will <span>result</span><a id="id325620677" class="indexterm"></a> in the following path:</p><div class="mediaobject"><img src="/graphics/9781787125520/graphics/6412f2e2-e1ea-4aa6-b441-a0beb9996f72.png" /></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch05lvl3sec31"></a>Laying out the Buttons</h4></div></div></div><p>Let's start by creating a <span>new</span><a id="id325620701" class="indexterm"></a> scene and laying out the buttons.</p><p>To make a faux-start screen as shown in the image at the beginning of this example, complete the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Create a brand new empty scene and name it <code class="literal">Chapter5StartScreen</code>. Open the new scene.</li><li>To give it the same background as the scenes we've made in the last three chapters, we can create the <strong class="userinput"><code>Background Canvas</code></strong> afresh, but it will be easier to just copy it from one of the other scenes. We'll do this by having our new scene and one of our old scenes open in the <strong class="userinput"><code>Hierarchy</code></strong> at the same time:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787125520/graphics/b8ffb499-ea79-4045-a7b7-ec21e39c23a6.png" /></div><p></p><div class="orderedlist"><ol class="orderedlist arabic" start="3" type="1"><li>You will see the name of the <span>current</span><a id="id325630297" class="indexterm"></a> scene in the<strong class="userinput"><code>Hierarchy</code></strong>. From the<code class="literal">Project</code>folder view, drag the<code class="literal">Chapter2</code>scene to the<strong class="userinput"><code>Hierarchy</code></strong>. You should now see the following:<div class="mediaobject"><img src="/graphics/9781787125520/graphics/8eee0bea-7198-46c2-9472-02f3934d05a7.png" /></div>Select <code class="literal">Background Canvas</code> and press <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>D</em></span> to duplicate it. Now, drag the duplicate, labeled <code class="literal">Background Canvas (1)</code>, to the <code class="literal">Chapter5StartScreen</code> scene:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787125520/graphics/43b45222-b52c-4004-bf50-19a04bfcfe33.png" /></div><p>We can now close the <code class="literal">Chapter2</code> scene, as we no longer need it. To do so, select the drop-down menu on the right of the <code class="literal">Chapter2</code> scene, and select <strong class="userinput"><code>Remove Scene</code></strong>. Just in case you accidentally deleted something, select <strong class="userinput"><code>Don't Save</code></strong> when <span>prompted</span>:</p><div class="mediaobject"><img src="/graphics/9781787125520/graphics/345fdd98-3840-42ce-b5d9-65134796dc2e.png" /></div><p>You should now have only <code class="literal">Chapter5StartScreen</code> in the <strong class="userinput"><code>Hierarchy</code></strong>, and the <strong class="userinput"><code>Background Canvas</code></strong> should be visible in the scene:</p><div class="mediaobject"><img src="/graphics/9781787125520/graphics/6fb935de-61dd-4dec-91c7-35681fb07ea7.png" /></div><p>Rename <code class="literal">Background Canvas (1)</code> to <code class="literal">Background Canvas</code> and save the scene.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note39"></a>Note</h3><p>You'll note that by doing this, we have a <strong class="userinput"><code>Canvas</code></strong> in the scene without an <strong class="userinput"><code>Event System</code></strong>. That's okay, though, once we add new UI elements, the <strong class="userinput"><code>Event System</code></strong> will be added in for us.</p></div><div class="orderedlist"><ol class="orderedlist arabic" start="4" type="1"><li>Before we can proceed, we should <span>take</span><a id="id325630344" class="indexterm"></a> care of a warning message that is popping up. As we copied <code class="literal">Background Canvas</code> from another scene, it is trying to access the camera from the other scene.</li><li>A warning message will also appear on the Canvas component of the <code class="literal">Background Canvas</code>:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787125520/graphics/06c44227-b8db-4bb4-955e-0eed063cfca7.png" /></div><p>To fix this, simply drag the <code class="literal">Main Camera</code> from the current scene to the <strong class="userinput"><code>Render Camera</code></strong> slot.</p><div class="mediaobject"><img src="/graphics/9781787125520/graphics/3dc3ea0e-309a-49f5-9a1a-69d7f1aa70d3.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="6" type="1"><li>Now, let's add the <strong class="userinput"><code>Play</code></strong> button. Create a new UI Canvas to place our Buttons on named <code class="literal">Button Canvas</code>. Note that once we placed the <code class="literal">Button Canvas</code>, the <strong class="userinput"><code>Event System</code></strong> was created for us. Create a new UI Button (<strong class="userinput"><code>Create</code></strong> | <strong class="userinput"><code>UI</code></strong> | <strong class="userinput"><code>Button</code></strong>) as a child of the <code class="literal">Button Canvas</code> and give it the following <strong class="userinput"><code>Rect Transform</code></strong> and <strong class="userinput"><code>Image</code></strong> component properties:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787125520/graphics/bc971b8d-a88b-417f-964e-30360cefcac7.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="7" type="1"><li>Now, select the child <strong class="userinput"><code>Text</code></strong> object of <span>the</span><a id="id325630445" class="indexterm"></a><strong class="userinput"><code>Play Button</code></strong> and set its <strong class="userinput"><code>Rect Transform</code></strong> and <strong class="userinput"><code>Text</code></strong> component properties as <span>such:</span></li></ol></div><div class="mediaobject"><img src="/graphics/9781787125520/graphics/b7a7ef27-0c21-4e63-aefc-ee44e89c1ccb.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="8" type="1"><li>Now, let's create an <code class="literal">Achievement Button</code>, a <code class="literal">Leaderboard Button</code>, and an <code class="literal">Info Button</code> so they appear as follows:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787125520/graphics/e74236f1-6bc9-4c07-82e0-971cd4c50164.png" /></div><p>To achieve the preceding layout, use <span>the</span><a id="id325630506" class="indexterm"></a> following properties:</p><div class="mediaobject"><img src="/graphics/9781787125520/graphics/a8cd0cba-57e4-40aa-8791-a1117936ad71.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="9" type="1"><li>Now all that is left to do to set up our scene's layout is create the <code class="literal">Facebook Button</code> and <code class="literal">Twitter Button</code> in the bottom-right corner of the scene.
To achieve the preceding layout, create two buttons with <span>the</span><a id="id325630608" class="indexterm"></a> following properties:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787125520/graphics/46cd21d8-aa96-4d33-8af9-95609f08f67b.png" /></div><p>Your scene should be correctly laid out now, so let's work on setting up the navigation.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch05lvl3sec32"></a>Setting the explicit navigation and First Selected</h4></div></div></div><p>If you select the <strong class="userinput"><code>Visualize</code></strong> button on any of your Button's <strong class="userinput"><code>Button</code></strong> component, you should see the following navigation path (I have disabled <span>the</span><a id="id325630641" class="indexterm"></a> background <span>image</span><a id="id325630649" class="indexterm"></a> to make it a bit easier to view):</p><div class="mediaobject"><img src="/graphics/9781787125520/graphics/eb964b56-adee-4bd6-9502-d0803d13560e.png" /></div><p>This navigation setup allows significantly more navigation range that the setup I described at the beginning of this example. This is because each button has its navigation set to <strong class="userinput"><code>Automatic</code></strong> by default, and <strong class="userinput"><code>Automatic</code></strong> allows multidirectional navigation. Let's make our navigation a bit more linear and make our <code class="literal">Play Button</code> the <strong class="userinput"><code>First Selected</code></strong> Button in our <strong class="userinput"><code>Event System</code></strong>.</p><p>To set up the navigation described at the beginning of this example, complete the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Select the <strong class="userinput"><code>Event System</code></strong> in the <strong class="userinput"><code>Hierarchy</code></strong> and assign the <strong class="userinput"><code>Play Button</code></strong> to the <strong class="userinput"><code>First Selected</code></strong> slot by drag and drop:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787125520/graphics/773f32e1-1d53-4e71-82df-4ca011831f6b.png" /></div><p>Now, when we start cycling through our buttons, our navigation will begin at the <code class="literal">Play Button</code>. Also, if we were to hit the <span class="emphasis"><em>Enter</em></span> key when this scene loads, the <code class="literal">Play Button</code> will automatically be executed.</p><div class="orderedlist"><ol class="orderedlist arabic" start="2" type="1"><li>Now, let's set all the Buttons to have an <strong class="userinput"><code>Explicit Navigation</code></strong> type. Select all six of the buttons in the <strong class="userinput"><code>Hierarchy</code></strong> list:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787125520/graphics/2e1fba6b-a0ed-46df-9a2c-d9d5d160a4ea.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="3" type="1"><li>With all selected, change the Navigation type to Explicit from the drop-down menu. Now, each Button should have the following settings in their Button component:
<div class="mediaobject"><img src="/graphics/9781787125520/graphics/f66c4c0e-a91e-407b-a760-55faa939b6bb.png" /></div></li><li>To make it easier to see <span>our</span><a id="id325630876" class="indexterm"></a> navigation, let's change the <strong class="userinput"><code>Highlighted Colors</code></strong> on each of our Buttons. With all the Buttons still selected, set the <strong class="userinput"><code>Highlighted Color</code></strong> to dark red. It's not terribly attractive, but it will <span>make</span><a id="id325630891" class="indexterm"></a> it easier for us to see whether our buttons are being <span>highlighted</span>:
<div class="mediaobject"><img src="/graphics/9781787125520/graphics/f2579a05-373b-4375-adaa-e15f56005a8f.png" /></div></li></ol></div><p> </p><p>If you play the game, you should see the <strong class="userinput"><code>Play Button</code></strong> highlighted red, symbolizing that it is selected (since we set it as <strong class="userinput"><code>First Selected</code></strong> in Step 1):</p><div class="mediaobject"><img src="/graphics/9781787125520/graphics/26389926-fb99-4ff3-88b6-8dd86d86dc7c.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="5" type="1"><li>Now, we can explicitly (hence the name) set the Buttons that each individual Button is to navigate to by dragging and dropping them into the appropriate slots. Let's set the <strong class="userinput"><code>Navigation</code></strong> for the <code class="literal">Play Button</code> first, since it will be the first button selected. Select the <code class="literal">Play Button</code>.
According to the diagrams, the <code class="literal">Play Button</code> should navigate to the <code class="literal">Twitter Button</code> when the up key is pressed and to the <code class="literal">Achievements Button</code> when the down key is pressed. So, drag and drop those buttons into the slots labeled <strong class="userinput"><code>Select On Up</code></strong> and <strong class="userinput"><code>Select On Down</code></strong>, respectively from the <strong class="userinput"><code>Hierarchy</code></strong>. If you have the <strong class="userinput"><code>Visualize</code></strong> button selected, as you are dragging the Buttons into their slots, you should see the navigation visualization starting to build out. In the following screenshot, I have disabled the background to make it a bit easier to see:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787125520/graphics/452644af-99c6-49f1-bb1c-165134fa7c4a.png" /></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip40"></a>Note</h3><p>Remember that if an arrow begins on top of a Button, that arrow symbolizes where navigation will go if the up key is pressed, and if the arrow begins on the bottom of a Button, it symbolizes where navigation will go if the down key is pressed.</p></div><div class="orderedlist"><ol class="orderedlist arabic" start="6" type="1"><li>Play the game to check and see whether it works. Press the up key and you should see the following, symbolizing that the <code class="literal">Twitter Button</code> is selected:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787125520/graphics/519e0b3c-4e88-4aef-9fe8-20e1941e9eb2.png" /></div><p>To see the <code class="literal">Achievement Button</code> become selected, you actually have to stop playing the game and replay, because we have not set up the navigation for the <code class="literal">Twitter Button</code> to go back to the <code class="literal">Play Button</code>. So stop the game, press <strong class="userinput"><code>Play</code></strong> again, then press the down key, and you should see the following, symbolizing that <code class="literal">Achievement Button</code> is selected:</p><div class="mediaobject"><img src="/graphics/9781787125520/graphics/d6a54bf4-7626-45ca-a583-abe1dcfbca08.png" /></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note41"></a>Note</h3><p>Instead of restarting the game, you can also highlight the <code class="literal">Play Button</code> with your mouse so that you can then navigate to the <code class="literal">Achievement Button</code>.</p></div><div class="orderedlist"><ol class="orderedlist arabic" start="7" type="1"><li>Once you set up the navigation for one Button, the rest aren't too difficult, albeit tedious. Use the following chart to help you set up the rest of the Buttons:</li></ol></div><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; "><colgroup><col /><col /><col /></colgroup><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><span class="strong"><strong>Button</strong></span></p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><span class="strong"><strong>Select On Up</strong></span></p></td><td style="border-bottom: 0.5pt solid ; "><p><span class="strong"><strong>Select On Down</strong></span></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">Play Button</code></p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">Twitter Button</code></p></td><td style="border-bottom: 0.5pt solid ; "><p><code class="literal">Achievement Button</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">Achievement Button</code></p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">Play Button</code></p></td><td style="border-bottom: 0.5pt solid ; "><p><code class="literal">Leaderboard Button</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">Leaderboard Button</code></p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">Achievement Button</code></p></td><td style="border-bottom: 0.5pt solid ; "><p><code class="literal">Info Button</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">Info Button</code></p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">LeaderBoard Button</code></p></td><td style="border-bottom: 0.5pt solid ; "><p><code class="literal">Facebook Button</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">Facebook Button</code></p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">Info Button</code></p></td><td style="border-bottom: 0.5pt solid ; "><p><code class="literal">Twitter Button</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; "><p><code class="literal">Twitter Button</code></p></td><td style="border-right: 0.5pt solid ; "><p><code class="literal">Facebook Button</code></p></td><td style=""><p><code class="literal">Play Button</code></p></td></tr></tbody></table></div><p> </p><p><span>When you are done, your navigation visualization should look like the following:</span></p><div class="mediaobject"><img src="/graphics/9781787125520/graphics/fcfdb6d4-0885-43b3-8031-d6ef23c01a1a.png" /></div><p><span>If</span> you play your game, you should be <span>able</span><a id="id325631322" class="indexterm"></a> to easily cycle <span>through</span><a id="id325631331" class="indexterm"></a> the Buttons using the arrow keys. I recommend setting all the buttons to have Horizontal or Vertical Navigation patterns and seeing how it differs from what we have created so that you can see that this pattern is not attainable with a predefined pattern applied to all the Buttons.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec52"></a>Loading scenes with Button presses</h3></div></div></div><p>Now that we have our <span>start</span><a id="id325631346" class="indexterm"></a> screen laid out, let's hook up the <code class="literal">Play Button</code> to play our "game". First, duplicate the scene you created in <a class="link" href="#" linkend="ch04">Chapter 4</a>, <span class="emphasis"><em>The Event System and Programming for UI</em></span>, called <code class="literal">Chapter4</code>, using <span class="emphasis"><em>Ctrl + D</em></span>. The new scene should be called <code class="literal">Chapter5</code>. Our goal is to have the <code class="literal">Play Button</code> in <code class="literal">Chapter5StartScreen</code> load up the <code class="literal">Chapter5</code> scene.</p><p>To make the <code class="literal">Play Button</code> in <code class="literal">Chapter5StartScreen</code>, load up the <code class="literal">Chapter5</code> scene, complete the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>To transition between scenes within Unity, you must first ensure that they are each listed within the <strong class="userinput"><code>Scenes In Build</code></strong> list in the <strong class="userinput"><code>Build Settings</code></strong>. Select <strong class="userinput"><code>File</code></strong> | <strong class="userinput"><code>Build Settings</code></strong> (or <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>B</em></span>). The following should be visible:
<div class="mediaobject"><img src="/graphics/9781787125520/graphics/ee4a8547-2e4f-4ee8-9b82-3a5fe6018b28.png" /></div></li></ol></div><div class="orderedlist"><ol class="orderedlist arabic" start="2" type="1"><li>From the <code class="literal">Project</code> folder, drag and drop the <code class="literal">Chapter5StartScreen</code> and <code class="literal">Chapter5</code> scenes into the list:
<div class="mediaobject"><img src="/graphics/9781787125520/graphics/b093533f-3747-454e-a67b-ee55b84fb51c.png" /></div>
The order in which scenes appear in this list does not matter, except for the first scene (the one listed as scene 0). The first <span>scene</span><a id="id325636313" class="indexterm"></a> in the list should be the scene you want to load when the game loads. Therefore, it makes sense for us to put <code class="literal">Chapter5StartScreen</code> in position <code class="literal">0</code>.</li><li>Now that our scenes are in the <strong class="userinput"><code>Build</code></strong> Settings, we can write a script that will allow us to navigate between them. Right-click on the <code class="literal">Scripts</code> folder in your <strong class="userinput"><code>Project</code></strong> view and select <strong class="userinput"><code>Create</code></strong> | <strong class="userinput"><code>C# Script</code></strong>. Name the new script <code class="literal">LevelLoader</code>. Open the new <code class="literal">LevelLoader</code> script, and replace the code with the following:</li></ol></div><pre class="programlisting">using UnityEngine;
using System.Collections;
using UnityEngine.SceneManagement;

public class LevelLoader : MonoBehaviour {
 public string sceneToLoad="";
 public void LoadTheLevel(){
 SceneManager.LoadScene(sceneToLoad);
 }
} </pre><p>The preceding code contains a single function—<code class="literal">LoadTheLevel()</code>. This function calls the <code class="literal">LoadScene</code>method in the <code class="literal">SceneManager</code> class. We will load the <code class="literal">sceneToLoad</code>, which is a string we will specify in the <strong class="userinput"><code>Inspector</code></strong>. Note that the <code class="literal">UnityEngine.SceneManagement</code> namespace must be included with the following line at the top of the script:</p><pre class="programlisting">using UnityEngine.SceneManagement;</pre><p> </p><div class="orderedlist"><ol class="orderedlist arabic" start="4" type="1"><li>If you still do not have the <code class="literal">Chapter5StartScreen</code> scene open, open it again. Select the <code class="literal">Play Button</code> and drag and drop the <code class="literal">LevelLoader</code> script onto its <strong class="userinput"><code>Inspector</code></strong>:
<div class="mediaobject"><img src="/graphics/9781787125520/graphics/aea9da02-db0b-4757-8dea-6ed59dff647d.png" /></div>
Now, within the <strong class="userinput"><code>Scene To Load</code></strong> slot, type <code class="literal">Chapter5</code>. You don't need to put it in quotes; since the <code class="literal">sceneToLoad</code>variable is a string, <code class="literal">Chapter5</code> is assumed to be a string without you needing to put it in quotes:
<div class="mediaobject"><img src="/graphics/9781787125520/graphics/bc37336e-ad6f-4b08-aa76-143f0a165e5a.png" /></div></li></ol></div><div class="orderedlist"><ol class="orderedlist arabic" start="5" type="1"><li>Now all that is left is to hook up the button. Select the + sign at the bottom of the <strong class="userinput"><code>OnClick()</code></strong> Event list of the <strong class="userinput"><code>Button</code></strong> component to add a new event. The script we want to access, <code class="literal">LevelLoader.cs</code>, is on the <code class="literal">Play Button</code>, so drag the <code class="literal">Play Button</code> into the object slot. Now, from the function drop-down menu, select <strong class="userinput"><code>LevelLoader</code></strong> | <strong class="userinput"><code>LoadTheLevel</code></strong>.</li></ol></div><p>That's it! Your <code class="literal">Play Button</code> should <span>now</span><a id="id325636548" class="indexterm"></a> navigate to the <code class="literal">Chapter5</code> scene when clicked on or when you press enter when it is highlighted (as it is at the beginning or with your keyboard navigation).</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec53"></a>Button Animation Transitions</h3></div></div></div><p>In the first example, we set the highlighted <span>state</span><a id="id325636566" class="indexterm"></a> of the <code class="literal">Play Button</code> to a dark red color to make it easier for us to see when it was highlighted. It didn't look great, but it was helpful. Now, we'll give the Button an Animation Transition so that we don't have to worry about changing our <strong class="userinput"><code>Highlighted Color</code></strong> any longer. In this example, we will make the <code class="literal">Play Button</code> pulsate in its normal state, enticing you to click on it.</p><p>To create those button animation transitions, complete the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Select the <code class="literal">Play Button</code> and change its <strong class="userinput"><code><span>Transition</span><a id="id325636598" class="indexterm"></a></code></strong> type to <strong class="userinput"><code>Animation</code></strong>:
<div class="mediaobject"><img src="/graphics/9781787125520/graphics/74a88011-19c5-4fdf-a855-94911d888bbf.png" /></div></li></ol></div><div class="orderedlist"><ol class="orderedlist arabic" start="2" type="1"><li>We do not have an Animator Controller prebuilt, so select <strong class="userinput"><code>Auto Generate Animation</code></strong> to create a new one. A window will pop up, asking you save the newly created Animator Controller. Create a new folder in the <code class="literal">Assets</code> folder, called <code class="literal">Animations</code>, and save the new Animator Controller as <code class="literal">Play Button</code> to the folder:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787125520/graphics/3f68960f-41d3-4470-9ec6-5fd1f672e951.png" /></div><p>You should now see the new Animator Controller in the new <code class="literal">Animations</code> folder:</p><div class="mediaobject"><img src="/graphics/9781787125520/graphics/1b24a34d-8a89-4063-86c9-4ed9e79f752d.png" /></div><p>You will also see the new <strong class="userinput"><code>Animator</code></strong> component on the <code class="literal">Play Button</code>:</p><div class="mediaobject"><img src="/graphics/9781787125520/graphics/e419d569-9181-4d4f-85ce-b2bafefc0128.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="3" type="1"><li>Open the Animation window by selecting <strong class="userinput"><code>Window</code></strong> | <strong class="userinput"><code>Animation</code></strong>. If you want to dock this new window, dock it somewhere so <span>that</span><a id="id325636729" class="indexterm"></a> you can still see the scene and game views when it is up. For example, I am currently using the following window set up:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787125520/graphics/47452546-20d8-44f0-9c8f-1e31b8223f39.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="4" type="1"><li>When you have the <code class="literal">Play Button</code> selected and open the <strong class="userinput"><code>Animation</code></strong> window, the various animation clips associated with the transition states will be visible in the animation clip drop-down menu:
<div class="mediaobject"><img src="/graphics/9781787125520/graphics/f0330554-85dc-4cc8-b15e-4a17d166d653.png" /></div>
We want to edit the animation for the <strong class="userinput"><code><strong class="userinput"><code>Normal</code></strong></code></strong> transition state, so if you have selected a different animation clip, reselect the normal animation clip (<strong class="userinput"><code>Normal</code></strong> is the animation selected by default).</li><li>To make the button look like its pulsating, we want to affect its scale. Select <strong class="userinput"><code>Add Property</code></strong> | <strong class="userinput"><code>Rect Transform</code></strong> and then hit the <strong class="userinput"><code>+</code></strong> next to <strong class="userinput"><code>Scale</code></strong>:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787125520/graphics/da17ceb3-6d44-479f-9c11-ce8591c1ae9b.png" /></div><p>The <strong class="userinput"><code>Scale</code></strong> property should now be showing up in the Animation timeline:</p><div class="mediaobject"><img src="/graphics/9781787125520/graphics/434b9600-0cdf-4f5a-98b4-6b264e24ffd9.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="6" type="1"><li>To achieve the pulsation with scaling, we want the button to start at its normal size, get big, and then go back to its normal size. The diamonds that appear on the timeline are known as keyframes. To do what I just described, we need one more keyframe, right in the center of the timeline. Click on the top of the timeline (where the numbers appear) to move the timeline to the <strong class="userinput"><code>0:30</code></strong> mark. Then, select the <strong class="userinput"><code>Add keyframe</code></strong> button to add in a new <span>keyframe</span>:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787125520/graphics/3f633414-0ec7-41ae-b898-db48ea3af4d7.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="7" type="1"><li>Expand the <strong class="userinput"><code>Scale</code></strong> property by selecting the arrow to its left. You will see that if you select any of the keyframes, the number 1 is next to all the three scaling directions. This indicates that the scale at that frame is 100% (or its normal scale):</li></ol></div><div class="mediaobject"><img src="/graphics/9781787125520/graphics/3e3300a9-13d1-4bac-90f8-0316e2b0c330.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="8" type="1"><li>Select the <strong class="userinput"><code>keyframe</code></strong> in the center. Change the number <strong class="userinput"><code>1</code></strong> on <strong class="userinput"><code>Scale.x</code></strong> and <strong class="userinput"><code>Scale.y</code></strong> to <code class="literal">1.2</code> by clicking on the number <strong class="userinput"><code>1</code></strong> and <span>typing</span>. You can press the play button in the animation window to preview your animation. You will see that the button now pulsates:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787125520/graphics/1d44cc4d-e9c7-4433-9f4a-32d7181a46df.png" /></div><p>That's it! Your button should now pulsate when you play the game (and will not turn red any longer). Note that it does not pulsate immediately, which is because the button will only pulsate when it is not highlighted, and since we have it set to <strong class="userinput"><code>First Selected</code></strong>, it is highlighted on start. To remove the highlight, simply click anywhere in your scene outside of the button or navigate away using your keyboard. Once the highlight is removed, it should begin pulsating.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec54"></a>Mute buttons with image swap</h3></div></div></div><p>Now, let's go back to working in our UI scene that we've been building out over the last few chapters. Open the <code class="literal">Chapter5</code>scene. In the scene, we have a <code class="literal">Pause Panel</code> that pops up when the <span class="emphasis"><em>P</em></span> key is hit on the keyboard. On this panel, we will place two mute buttons, one for music and one for sound that will toggle between <span>muted</span><a id="id325636969" class="indexterm"></a> and not unmuted states. The panel will appear, as shown:</p><div class="mediaobject"><img src="/graphics/9781787125520/graphics/69ed285b-22d4-49d7-a49f-4dcb68327232.png" /></div><p>To add the music and sound buttons, as shown in the preceding image, complete the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>First, we need to bring in a new art asset. The button images on the sprite sheet we imported previously are a bit too small and didn't contain a muted version. So, I edited them a bit and provided a new image for you. In the <code class="literal">Chapter5/Sprites</code>folder of the book's source files, you should find the image named <code class="literal">MuteUnmute.png</code>:
<div class="mediaobject"><img src="/graphics/9781787125520/graphics/3e8624f8-42b1-4a78-bf37-9aa79ab673d1.png" /></div>
Import this image file into your project's <code class="literal">Assets/Sprites</code>folder.</li><li>Slice the image into multiple subimages by changing its <strong class="userinput"><code>Sprite Mode</code></strong> to <strong class="userinput"><code>Multiple</code></strong>, opening its <strong class="userinput"><code>Sprite Editor</code></strong>, and applying the automatic slice type. The multiple sprites should appear as follows:
<div class="mediaobject"><img src="/graphics/9781787125520/graphics/c76a6ac8-60a3-4f5f-b75b-769ea1fdf6f4.png" /></div></li><li>Create two new Buttons as children of the <code class="literal">Pause Panel</code> and name them <code class="literal">Music Button</code> and <code class="literal">Sound Button</code>:
<div class="mediaobject"><img src="/graphics/9781787125520/graphics/c49cd8d8-1481-429c-a8a0-6997cc46257f.png" /></div></li></ol></div><div class="orderedlist"><ol class="orderedlist arabic" start="4" type="1"><li>Give the two new buttons the following <strong class="userinput"><code>Rect Transform</code></strong> and <strong class="userinput"><code>Image</code></strong> properties:
<div class="mediaobject"><img src="/graphics/9781787125520/graphics/bc38b68d-e4c0-41d2-8b16-bc001bc64ca4.png" /></div>
Your Panel should now look just like the one at the beginning of this example:
<div class="mediaobject"><img src="/graphics/9781787125520/graphics/67d118a9-826d-4030-9ba9-f8c46ab7bee8.png" /></div></li></ol></div><div class="orderedlist"><ol class="orderedlist arabic" start="5" type="1"><li>Now, let's write some code to make these buttons swap images that will represent the sound and music toggling on and off. Create a new script called <code class="literal">MuteUnmute</code> in your <code class="literal">Assets/Scripts</code> folder.
Replace the code of <code class="literal">MuteUnmute</code> with the following:</li></ol></div><pre class="programlisting">using UnityEngine;
using UnityEngine;
using System.Collections;
using UnityEngine.UI;

public class MuteUnmute : MonoBehaviour { 
     public Button musicButton; 
     public Button soundButton; 
     Image musicImage; 
     Image soundImage; 
     public Sprite MusicOn; 
     public Sprite MusicOff; 
     public Sprite SoundOn; 
     public Sprite SoundOff;
     bool musicMuted; 
     bool soundMuted;

     void Awake(){ 
          musicImage=musicButton.GetComponent&lt;Image&gt;(); 
          soundImage=soundButton.GetComponent&lt;Image&gt;(); 
     } 

     public void MuteAndUnmuteMusic(){ 
          if (musicMuted==false) { //mute music  
               musicImage.sprite=MusicOff; 
               musicMuted=true; 
          } else { //unmute music  
               musicImage.sprite=MusicOn; 
               musicMuted=false; 
          } 
     } 

     public void MuteAndUnmuteSound(){ 
          if (soundMuted==false) { //mute sound  
               soundImage.sprite=SoundOff; 
               soundMuted=true; 
          } else { //unmute sound  
              soundImage.sprite=SoundOn; 
              soundMuted=false; 
          } 
     }
}</pre><p>As you can see, this code contains two main functions: <code class="literal">MuteAndUnmuteMusic()</code> and <code class="literal">MuteAndUnmuteSound()</code>. These two function identically, by simply swapping the image on the specified button based on the Boolean values <code class="literal">musicMuted</code> and <code class="literal">soundMuted</code>.
To swap the image, the script first <span>finds</span><a id="id325637204" class="indexterm"></a> the image component on the two buttons specified as <code class="literal">musicButton</code> and <code class="literal">soundButton</code>, within the <code class="literal">Awake()</code> function. These buttons will be assigned in the <strong class="userinput"><code>Inspector</code></strong>. It then swaps the sprite of the image component. It determines which sprite to select by checking whether it is currently considered muted or not. The images for the mute and unmute states are assigned in the inspector.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note42"></a>Note</h3><p>Sadly, this text does not cover adding sound and music to a Unity project; the code provided here doesn't actually mute and unmute audio, it simply swaps sprites. However, I have provided you with a more complete script in the book's code bundle that includes the code for turning audio on and off, along with toggling the buttons. You will simply need to include two audio sources: one for playing music and one for playing sounds that have the <strong class="userinput"><code>Music</code></strong> and <strong class="userinput"><code>Sound</code></strong> tags, respectively.</p></div><div class="orderedlist"><ol class="orderedlist arabic" start="6" type="1"><li>Go back to the Unity Editor and attach the <code class="literal">MuteUnmute.cs</code> script to the <code class="literal">Pause Panel</code> by dragging it into its <strong class="userinput"><code>Inspector</code></strong>:
<div class="mediaobject"><img src="/graphics/9781787125520/graphics/e9ca2481-870c-4745-b2dd-9c2c49fc5517.png" /></div></li><li>Now, we want to assign the appropriate Buttons and sprites to the slots. Drag the <code class="literal">Music Button</code> and <code class="literal">Sound Button</code> into their designated slots from the Hierarchy. Drag and drop the audio button sprites from the project view to their appropriate slots:
<div class="mediaobject"><img src="/graphics/9781787125520/graphics/6e644deb-9d8d-4524-ae05-ba85e8ffaf4f.png" /></div></li></ol></div><div class="orderedlist"><ol class="orderedlist arabic" start="8" type="1"><li>Now, we just need to hook up the buttons to call the appropriate functions. Select the <code class="literal">Music Button</code>. Select the <strong class="userinput"><code>+</code></strong> sign at the bottom of the <code class="literal">OnClick()</code> Event list of the Button component to add a new event. The script we want to access, <code class="literal">MuteUnmute.cs</code>, is on the <code class="literal">Pause Panel</code>, so drag the <code class="literal">Pause Panel</code> into the object slot. Now, from the function drop-down menu, select <strong class="userinput"><code>MuteUnmute</code></strong> | <strong class="userinput"><code>MuteAndUnmuteMusic</code></strong>.</li><li>Perform the same actions as you did in the previous step for the <strong class="userinput"><code>Sound</code></strong> Button, but this time select <strong class="userinput"><code>MuteUnmute</code></strong> | <strong class="userinput"><code>MuteAndUnmuteMusic</code></strong> from the function drop-down list.</li></ol></div><p>Now, play the game, press <span class="emphasis"><em>P</em></span> to bring up the <code class="literal">Pause Panel</code>, and you will see the buttons toggle back and forth between their two different <span>images</span>.</p></div></div>