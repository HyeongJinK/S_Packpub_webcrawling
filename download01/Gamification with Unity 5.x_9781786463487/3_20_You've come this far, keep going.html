<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec23"></a>You've come this far, keep going</h2></div></div><hr /></div><p>This section will discuss ways to monitor an individual's progress, as well as display it.</p><p>We will be populating it with various icons, which can be downloaded from <a class="ulink" href="http://www.player26.com" target="_blank">www.player26.com</a>, and can be seen in the following screenshot. These icons are available in six different colors (magenta, yellow, blue, green, orange, and red) and three different styles (flat, glossy, and colored). These icons will represent basic things within the game, such as lives, achievements, events, unlockables, and mystery items. However, feel free to add or even change their association to suit the kind of game or app that you are creating:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463487/graphics/image_03_013.jpg" /></div><p>
</p><p>Different icons to choose from</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec28"></a>Making progress</h3></div></div></div><p>As humans, after we commit a certain amount of time and effort to something, we want to see our progress. Progress bars are excellent ways of demonstrating this. They can be designed in many different ways, for example, they can be segmented, where each segment represents a part of the overall progress towards something. Another way is similar to a health bar; it's a colored meter that fills up over time as the player gains experience. We will learn now how to develop a basic progress bar such as in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463487/graphics/image_03_014.jpg" /></div><p>
</p><p>Different types of progress bar implemented in Unity</p><p>In order to create our progress bar, we first need to add a new UI image by right-clicking on the <span class="strong"><strong>Hierarchy</strong></span> panel and then selecting <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Image</strong></span>. As a Sprite, we need to assign <code class="literal">progress_bar_blue_background</code>. To keep its original dimension, let's press the <span class="strong"><strong>Set Native Size</strong></span> button, and then scale it down uniformly (holding the <span class="strong"><strong>Shift</strong></span> key). Rename it <span class="strong"><strong>Progress Bar Background</strong></span>. As a result, we should have something like the following screenshot in the <span class="strong"><strong>Scene</strong></span> view:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463487/graphics/image_03_015.jpg" /></div><p>
</p><p>The progress bar background</p><p>The next step is to create another image, which will fill our progress bar. Repeat all of the preceding steps, but use <code class="literal">progress_bar_blue_overlay</code> as the Sprite. Rename this other one <code class="literal">Progress Bar Overlay</code>. Once you have made the last one, overlay the previous image, and you have the following the <span class="strong"><strong>Scene</strong></span> view:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463487/graphics/image_03_016.jpg" /></div><p>
</p><p>The completed progress bar image</p><p>Since we want to show the percentage of the progress bar as well, we need to create a text component by right-clicking on the <span class="strong"><strong>Hierarchy</strong></span> panel and then selecting <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Text</strong></span>. Rename it <code class="literal">Progress Bar Percentage</code>. Feel free to make it look like you want. In this example, we just changed the text color to white and placed it in the middle of the progress bar. Once you have done all this, you should have something that looks like the following:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463487/graphics/image_03_017.jpg" /></div><p>
</p><p>The complete progress bar with the percentage displayed</p><p>Now, let's parent the <span class="strong"><strong>Progress Bar Overlay</strong></span> to the <span class="strong"><strong>Progress Bar Background</strong></span>, and <span class="strong"><strong>Progress Bar Percentage</strong></span> to <span class="strong"><strong>Progress Bar Overlay</strong></span>. As a result, our Hierarchy should look like the following:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463487/graphics/image_03_018.jpg" /></div><p>
</p><p>The game object parenting of the progress bar in the Hierarchy panel</p><p>Before we start adding our script, we need to prepare the <span class="strong"><strong>Progress Bar Overlay</strong></span>. In the image settings in the <span class="strong"><strong>Inspector</strong></span>, change the <span class="strong"><strong>Image Type</strong></span> to <span class="strong"><strong>Filled</strong></span> so we can change how much it is <span class="emphasis"><em>filled</em></span>. Since we want a progress bar that goes from the left to right, we need to set <span class="strong"><strong>Fill Method</strong></span> to <span class="strong"><strong>Horizontal</strong></span> and <span class="strong"><strong>Fill Origin</strong></span> to <span class="strong"><strong>Left</strong></span>. This is what the <span class="strong"><strong>Inspector</strong></span> at the end of these changes should look like:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463487/graphics/image_03_019.jpg" /></div><p>
</p><p>Screenshot of the image component after the changes</p><p>Now, we are finally ready to add a script. Let's create a new script by clicking on <span class="strong"><strong>Add Component</strong></span> | <span class="strong"><strong>New Script</strong></span>; rename it <code class="literal">ProgressBarScript</code>. Double-click on the script to open it.</p><p>The first thing that we need to do is to add the library that allows us to use UI classes. This can be done by adding the following line at the beginning of the script:</p><pre class="programlisting">using UnityEngine.UI; &#13;
</pre><p>Then, we need to add some variables. A couple of these variables will be needed to keep track of the UI components, and another one for the progress. So, let's write the following:</p><pre class="programlisting">    private Image progressbarFilling; &#13;
    private Text progressbarText; &#13;
    private int progress = 0; &#13;
</pre><p>In the <code class="literal">Start()</code> function, we need to get the references to the UI elements. For the image we can just call the <code class="literal">GetComponent()</code> function. However, for the text component, we need to get it from the child of the game object. We want our bar empty because we need to update the graphics with a function that we are going to write after this. So we can write the following:</p><pre class="programlisting">    void Start() { &#13;
        progressbarFilling = GetComponent&lt;Image&gt;(); &#13;
        progressbarText = GetComponentInChildren&lt;Text&gt;(); &#13;
        updateProgressBar(); &#13;
    } &#13;
</pre><p>Then, we need a function that updates the graphic. We don't use the <code class="literal">Update()</code> function because it is called in every frame. Also, there is no need to update the progress bar in every frame, but only when it changes its value. In particular, we need to update the quantity of filling and the text in percentage form. Since <code class="literal">progress</code> is a value from <span class="emphasis"><em>1</em></span> to <span class="emphasis"><em>100</em></span>, if we divide it by <span class="emphasis"><em>100</em></span>, we will obtain a fraction from <span class="emphasis"><em>0</em></span> to <span class="emphasis"><em>1</em></span>. In fact, this is required for the <code class="literal">fillAmount</code> variable. So, let's write the following:</p><pre class="programlisting">    private void updateProgressBar() { &#13;
        progressbarFilling.fillAmount = progress / 100f; &#13;
        progressbarText.text = progress + "%"; &#13;
    } &#13;
</pre><p>Finally, we need a function that can be called from another script or event to increase the <code class="literal">progress</code>. Furthermore, if the <code class="literal">progress</code> reaches 100%, we should add a piece of code to trigger what we want at the end. So, let's write the following:</p><pre class="programlisting">    public void increaseProgressOf(int value) { &#13;
        progress += value; &#13;
        if (progress &gt;= 100) { &#13;
            progress = 100; &#13;
            //Trigger an action when the progress Bar is complete &#13;
        } &#13;
        updateProgressBar(); &#13;
    } &#13;
</pre><p>Save the script.</p><p>Now our progress bar is ready to use.</p></div></div>