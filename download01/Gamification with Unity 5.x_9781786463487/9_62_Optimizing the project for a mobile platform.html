<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch09lvl1sec59"></a>Optimizing the project for a mobile platform</h2></div></div><hr /></div><p>There are many different ways to optimize a game for a mobile platform. Whether it is for a mobile or tablet, there are a few key things to consider, which we will discuss here.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note39"></a>Note</h3><p>Unity provides a great resource for optimizing for mobile platforms <a class="ulink" href="http://docs.unity3d.com/Manual/MobileOptimizationPracticalGuide.html" target="_blank">docs.unity3d.com/Manual/MobileOptimizationPracticalGuide.html</a>.
This section also provides a list of other, more specific optimizations, such as scripts and graphics.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl2sec110"></a>Processing the power</h3></div></div></div><p>Let's look at the issues that can impede your gaming experience. Mobile devices (and computers in general) have limits on how much they can process at any one time, and ultimately, this impacts the performance of your game on a device. Some parts of your game can be extremely draining and, as a result, the running of your game is not as smooth as it could be. There are different things to consider for 2D and 3D games, and we're going to explore both in the following sections.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch09lvl3sec52"></a>For 2D games</h4></div></div></div><p>Some image formats can result in issues, especially in file size. If for some reason you have large image files, you can reduce the file size in a number of ways:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Change the image resolution</p></li><li style="list-style-type: disc"><p>Change the image type</p></li></ul></div><p>In Unity, you can change these in the importing settings. We encountered this screen in Chapter 6, in the <span class="emphasis"><em>The Import Settings</em></span> section. Just select an asset from your <code class="literal">Project</code> folder and the following screen will appear:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463487/graphics/image_09_001.jpg" /></div><p>
</p><p>To improve the performance, the most important parameters are <span class="strong"><strong>Generate Mip Maps</strong></span>, <span class="strong"><strong>Filter Mode</strong></span>, <span class="strong"><strong>Max Size</strong></span>, and <span class="strong"><strong>Format</strong></span>. For your convenience, they have been highlighted in the screenshot.</p><p>
<span class="strong"><strong>Generate Mip Maps</strong></span> is an option that, if checked, creates smaller versions of the texture/sprite so, that when the sprite is far away or small with respect to the camera, a smaller version is rendered, improving performance. However, some people prefer to leave this unchecked so as not to alter the quality of their assets.</p><p>
<span class="strong"><strong>Filter Mode</strong></span> allows you to apply a filter to the image, in particular to make the borders a little bit blurry. When working with pixel art, having a filter on could be handy, since the filter makes your asset less <span class="emphasis"><em>pixeled</em></span>. The official documentation says that <span class="strong"><strong>Filter Mode</strong></span> selects how the texture is filtered when it gets stretched by transformations:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Point</strong></span>: The texture becomes blocky up close.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Bilinear</strong></span>: The texture becomes blurry up close.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Trilinear</strong></span>: Like Bilinear, but the texture also blurs between the different map levels.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Max Size</strong></span>: As the name suggests, the caps the maximum size that the image could have within that specific platform. In fact, artists often love to have high-resolution pictures or graphics, but sometimes it's not the best things for performance.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Format</strong></span>: Specifies if the image will be compressed or not when the game is compiled/built. Keep in mind that if your target device is really old, it may not support some compressions formats.</p></li></ul></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch09lvl3sec53"></a>For 3D games</h4></div></div></div><p>This is going to be your nemesis if you're creating a 3D application. Poly counts are the number of faces that your 3D assets have. The cumulative total is what needs to be kept in consideration.</p><p>In the User Manual for Unity, there is a section that explains how to model assets and characters to achieve optimal performance. You can access this information via the following link:</p><p>
<a class="ulink" href="http://polycount.com/discussion/130371/polygon-count-for-smartphone-applications" target="_blank">http://polycount.com/discussion/130371/polygon-count-for-smartphone-applications</a>
</p><p>To simply check the poly count inside your Unity scene, head to the top right corner of the <span class="strong"><strong>Game</strong></span> view, and click on the <span class="strong"><strong>Stats</strong></span> option, as seen in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463487/graphics/image_09_002.jpg" /></div><p>
</p><p>Once you have done this, a popup like the following screenshot should appear. Stats shows you a lot of performance information, such as draw calls, and indicates how many polygons are present in your current view of the scene. In fact, one of the great advantages of the Stats screen is that you can use it in real time when you press Play:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463487/graphics/image_09_003.jpg" /></div><p>
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch09lvl3sec54"></a>Other considerations</h4></div></div></div><p>Another consideration is to reduce the number of materials in 3D assets. The less is more theory applies here and should be a mantra for the development of mobile games and applications. Mobile devices are capable of handling some pretty cool things, but everything has a limit, so keep this in mind as you begin to develop assets. Some materials could be really expensive from a computational point of view. There are shaders that replicate cool effects with a good approximation, and are optimized for mobiles.</p><p>Another way to reduce the number of polygons in Unity is by removing assets from the scene. This is not always possible, but it can be the first step before having to go back into your 3D graphics program. However, you can always remove some props from your level if you have exaggerated the number. The poly count is the number of faces that your 3D assets have. The cumulative total is what needs to be considered. In any case, if you want to dig deeper in graphics optimization in Unity, as always a good start is its official documentation:</p><p>
<a class="ulink" href="https://docs.unity3d.com/Manual/OptimizingGraphicsPerformance.html" target="_blank">https://docs.unity3d.com/Manual/OptimizingGraphicsPerformance.html</a>
</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl2sec111"></a>Test, test, and test again</h3></div></div></div><p>Did I mention that you need to test? Not only test with your target, but test, test, and test again. Despite it being an obvious part of the overall process, this stage cannot be emphasized enough. Make sure that the game works on high-end <span class="emphasis"><em>and</em></span> low-end devices. In fact, <span class="emphasis"><em>make sure that it can run on ALL devices</em></span>. During this stage, it is ideal to keep a record of what has or hasn't worked. If during the test you find an interim solution to get by, note it down. If something happens once, but not twice during a playtest, try to recreate it.</p><p>At this stage, you don't want to assume that it <span class="emphasis"><em>will</em></span> work for everyone if it works on your or your friends, tablet or phone. There have been cases where games don't run for a specific phone model, and on others they work very slowly. It can be difficult and probably an impossible feat to test on <span class="emphasis"><em>all</em></span> devices, but if you have the chance, test on as many as possible. You can also refer to <a class="link" href="#" linkend="ch07">Chapter 7</a>, <span class="emphasis"><em>Get Your Motor Running</em></span>, for more information about playtesting and testing your game.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch09lvl3sec55"></a>Don't have access to many devices? Not a problem</h4></div></div></div><p>Ideally, it is better to test it out there in the flesh on a real phone, but if you can't, there are emulators. Genymotion is a product that offers a great way to emulate different devices: <a class="ulink" href="http://www.genymotion.com" target="_blank">www.genymotion.com</a>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note40"></a>Note</h3><p>Remember that some phones and mobile devices can practically run anything and everything, but others, not so much. Your consumers are going to have a range of devices from your basic smart phone to high-end phones with quad core processors.</p></div></div></div></div>