<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec17"></a>Creating a user profile system in Unity</h2></div></div><hr /></div><p>Our profile system will include an avatar (a picture of the player), a profile that will include basic information about their location, as well as having their achievements and game elements displayed on a separate page. However, before we embark on creating a user profile system, we need to do a few things, if you haven't already: getting Unity set up and ready to go. Unity exists in different versions: Personal, Plus, Pro and Enterprise. For the purposes of this book, we will be using the free version (Personal), which you can download here: <a class="ulink" href="https://store.unity.com/" target="_blank">https://store.unity.com/</a>.</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463487/graphics/B05686_02_05.jpg" /></div><p>
</p><p>Downloading Unity screen</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec23"></a>Setting up the Unity project</h3></div></div></div><p>Let's begin by setting up a project in Unity. This might sound simple enough, but at this point, <span class="emphasis"><em>how</em></span> you set up your file and folder structure can determine how many headaches you will have later. Another thing to keep in mind during the design and development process is naming conventions, especially for version control. Of course, you are free to follow whatever file structure you like, but make sure it remains consistent. This will save you a lot of trouble later.</p><p>To begin, create a new project in Unity by clicking on the <span class="strong"><strong>Create project</strong></span> button.</p><p>Then insert the title of your project along with the destination path. Furthermore, since this will be a 2D Application, select 2D, like in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463487/graphics/image_02_006.jpg" /></div><p>
</p><p>Getting started with Unity</p><p>Next, we need to define the resolution of our project. This really depends on what your target platform is. You can change the resolution in the <span class="strong"><strong>Game</strong></span> view like in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463487/graphics/image_02_007.jpg" /></div><p>
</p><p>Picture of resolution and aspect ratio</p><p>Now we need to import the files that we will be using for this project. These files can be downloaded here: <a class="ulink" href="http://player26.com/" target="_blank">http://player26.com/</a>. We can import these files by dragging and dropping them from <span class="strong"><strong>Explorer</strong></span> to the folder that we want them to occupy in the project with a new scene; let's start to create a new image. The image that we need to create will be relevant to the device that you are aiming for, so before you begin it is worthwhile checking the dimensions and resolutions accordingly. A canvas will be created automatically along with the <span class="strong"><strong>Event System</strong></span>. Call it <code class="literal">Background</code>, and expand it so that it fills the entire screen, like in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463487/graphics/image_02_008.jpg" /></div><p>
</p><p>The background</p><p>Now, in the <span class="strong"><strong>Inspector</strong></span>
<span class="strong"><strong>,</strong></span> change the image into <span class="emphasis"><em>[Name of your file]</em></span> so we can have a background for our application. We should have something that looks like this:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463487/graphics/image_02_009.jpg" /></div><p>
</p><p>New background</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl3sec16"></a>Getting personal with some profile information</h4></div></div></div><p>Now that we are all set up and ready to go, let's begin with setting up the structure of the profile page. A picture can say a thousand words, but interpretation isn't always a good thing. Having some basic profile information can give your player more of an identity. It can provide them with a bit more than just a name and a face, but some personality. The profile page in this section will have a few elements:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>The profile picture.</p></li><li style="list-style-type: disc"><p>Profile information (name, e-mail, birthday, gender, and location).</p></li></ul></div><p>Some other examples of information that you can include:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Clans, guilds, and groups that the player is affiliated with</p></li><li style="list-style-type: disc"><p>Their status and rank within the game or application</p></li><li style="list-style-type: disc"><p>The amount of points that they have in total (this may be trophies, stars, and so on)</p></li></ul></div><p>Take a moment to look at the following screenshot; this is an idea of what we will have accomplished by the end of this chapter. Take time to look at each element of the profile. You can also think of some other types of information that you think is useful for your application and substitute it or add it to the following design:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463487/graphics/image_02_010.jpg" /></div><p>
</p><p>Completed interface</p><p>The next step is to insert all of the input fields so that the user will be able to insert their data. Let's create a new field (right-click on the <span class="strong"><strong>Hierarchy</strong></span> panel and then <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Input Field</strong></span>). Then, place it next to the name icon. We need to change the <span class="strong"><strong>Transition</strong></span> to <span class="strong"><strong>None (Material)</strong></span>, and the <span class="strong"><strong>Color</strong></span> of the <span class="strong"><strong>Image (Script)</strong></span> to <code class="literal">zero alpha</code>. In addition, change the color of the text to white. Once you have done all of this, you should have something that looks like the following:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463487/graphics/image_02_011.jpg" /></div><p>
</p><p>Picture of the Inspector</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip10"></a>Tip</h3><p>One thing to keep in mind during the development of any application or game is the Canvas hierarchy. One way to think of this is as layers, where the layers at the back will be behind those that are subsequently towards the front. This is important because, if there are some elements that need to be visible, they should be at the top of the hierarchy, so that they are above all of the other layers. If there are backgrounds, they will usually be featured behind all the other layers, therefore, at the bottom of the hierarchy.</p></div><p>Now, one last thing that we need to do is to change the text of the <span class="strong"><strong>Placeholder</strong></span> if you want. For now, we can just use <code class="literal">...</code>. Of course, feel free to use whatever placeholder text you usually use, and for larger amounts Lorem Ipsum, <a class="ulink" href="http://www.lipsum.com" target="_blank">www.lipsum.com</a> is always a simple alternative.</p><p>Once we have added the placeholder text, we should have something that looks like the following screenshot:</p><p>
</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463487/graphics/image_02_012.jpg" /></div><p>
</p><p>
</p><p>Screen work in progress</p><p>We can copy and paste it twice, so that we can cover name, e-mail, and birthday date. We need to change their names and place them correctly in the scene view, next to each of their icons.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip11"></a>Tip</h3><p>If you want, you can use the options of the input field to give some constraints. For instance, you can set the <code class="literal">Content type</code> of the e-mail input field to be an <code class="literal">email</code>.</p></div><p>For the gender and the country sections, we need to use the <code class="literal">DropDown</code> UI component. Let's create it by right-clicking on the <span class="strong"><strong>Hierarchy</strong></span> panel and then <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>DropDown</strong></span>. As for the input field, we need to set the <span class="strong"><strong>Transition</strong></span> to <span class="strong"><strong>None</strong></span> and the alpha of the color of the image component to zero. Also, change the text <span class="strong"><strong>Color</strong></span> to white. Then in the <span class="strong"><strong>Options</strong></span> tab, we can change them to suit our needs. To add a new one, press the <span class="strong"><strong>+</strong></span> at the bottom of the <span class="strong"><strong>Options</strong></span> tab; to remove one, select it and click the <span class="strong"><strong>
<span class="strong"><strong>-</strong></span>,</strong></span> in this case, <span class="strong"><strong>Male</strong></span> and <span class="strong"><strong>Female</strong></span>. Now we should have something that looks like this:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463487/graphics/image_02_013.jpg" /></div><p>
</p><p>The Inspector</p><p>After we have placed it next to the gender icon, duplicate it, move it down to the country icon, and change its <span class="emphasis"><em>Y</em></span>-position. Depending on the number of icons your profile page will contain will depend on its value on the <span class="emphasis"><em>Y</em></span>-axis (or even <span class="emphasis"><em>X</em></span>-axis if you're changing the layout!) Therefore, feel free to move any of the icons to locations that better suit your design. Next, change <span class="strong"><strong>Male</strong></span> and <span class="strong"><strong>Female</strong></span> into countries like <span class="strong"><strong>Italy</strong></span>, and so on. Once you have done that, we should have something that looks like this:</p><p>
</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463487/graphics/image_02_014.jpg" /></div><p>
</p><p>
</p><p>Screen pre-edit button</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl3sec17"></a>Showing off that beautiful smile</h4></div></div></div><p>What is a profile page without a beautiful mugshot? Obviously, it doesn't have to be a picture of the user themselves, but giving users an option to have a profile image is always good. For simplicity's sake, we are providing the user with a predefined selection of images to choose from to put into the profile page like in the following screenshot. Feel free to choose any images that you want and remember, they don't have to be images of people; objects, landscapes, and even cartoon characters are all perfectly acceptable avatars, <span class="emphasis"><em>dependent on context of course!</em></span>
</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463487/graphics/image_02_015.jpg" /></div><p>
</p><p>Profile page</p><p>Next, we need to allow the user to loop around a series of pictures for their profile, so let's first create a new script. In the <span class="strong"><strong>Project</strong></span> panel in the folder where we want the script, right-click on <span class="strong"><strong>New/C# Script</strong></span>. Name it <code class="literal">ChangeProfilePicture</code>.</p><p>Now, first we need to add at the beginning of the code the following using statement in order to use the UI components in this script: <code class="literal">UnityEngine.UI;</code>.</p><p>Then we need to set some variables. The first is an array of Sprite, where we will set all our images. It has to be public, so we can have access from the <span class="strong"><strong>Inspector</strong></span>. Then we need a counter, that can be private and is an integer. Finally, we need another private variable to get the reference to the UI Image component of the button where this script will be:</p><pre class="programlisting">    public Sprite[] profilePictures; 
 
    private Image uiImage; 
 
    private int counter; 
 
</pre><p>Then in the <code class="literal">Start()</code> function we need to get this reference to the UI image, so use the following code:</p><pre class="programlisting">  void Start () { 
        uiImage = GetComponent&lt;Image&gt;(); 
        uiImage.sprite = profilePictures[0]; 
    } 
</pre><p>Then we need to create a function to access the counter from other scripts; this will be needed when we need to store this data. So use the following code:</p><pre class="programlisting">    public int getProfileImage() { 
        return counter; 
    } 
</pre><p>Finally, we need a function that will be called every time the user presses the profile picture. In this function, we loop over the picture by increasing the counter, check if it has reached the maximum number of image pictures set, and then assign the new profile picture to the image. So use the following code:</p><pre class="programlisting">    public void onClick() { 
        counter++; 
        if(counter &gt;= profilePictures.Length) { 
            counter = 0; 
        } 
 
        uiImage.sprite = profilePictures[counter]; 
    } 
</pre><p>Save the script and now it's time to create a new button. Right-click the <span class="strong"><strong>Hierarchy</strong></span> panel and <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Button</strong></span>. As for the other components, let's set transition to <code class="literal">None</code>, and the alpha of the color of the image component to <code class="literal">zero</code>. Since here we don't need the text, let's erase it, and leave only the button. Now, let's scale it and place it in the profile picture space. Let's also change the image into the first profile picture we want to have, and this should be the result:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463487/graphics/image_02_016.jpg" /></div><p>
</p><p>The profile image</p><p>Now we need to attach as a component our script that we have just created. Then, we can select our array, change its size, and assign our profile pictures for each of the entries, and it should look like the following screenshot:</p><p>
</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463487/graphics/image_02_017.jpg" /></div><p>
</p><p>
</p><p>The Inspector</p><p>Since we don't want the user to edit their profile all the time, let's create another button. Again, set the <span class="strong"><strong>Transition</strong></span> to <span class="strong"><strong>None</strong></span> and the alpha color of the image component to <code class="literal">zero</code>. Finally, change the text into light/gray; as text we can type <code class="literal">edit</code>. Now place it as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463487/graphics/image_02_018.jpg" /></div><p>
</p><p>Avatar screen post edit button</p><p>Next, in the <code class="literal">click</code> tab, let's add some events. In particular, we need to add eight events. Use the first six to get the reference respectively to the name input field, e-mail, birthday, profile, and going in their respective components and set their <span class="strong"><strong>interactable</strong></span> variables to <code class="literal">true</code>. Now duplicate this button and call this the <code class="literal">done</code> button, and change the text into <code class="literal">done</code>. In this new button, disable all the <span class="strong"><strong>interactable</strong></span> variables. About the last two events, on the <span class="strong"><strong>edit</strong></span> button we need to set <span class="strong"><strong>SetActive</strong></span> of the <span class="strong"><strong>edit</strong></span> button to <code class="literal">false</code> and in the other event the done button its <span class="strong"><strong>SetActive</strong></span> to <code class="literal">true</code>. As in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463487/graphics/image_02_019.jpg" /></div><p>
</p><p>Picture of On Click ()</p><p>The <span class="strong"><strong>done</strong></span> button will have the same as properties, but in reverse. We need to activate the <span class="strong"><strong>edit</strong></span> button and disable the <span class="strong"><strong>done</strong></span> button, as in the following screenshot:</p><p>
</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463487/graphics/image_02_020.jpg" /></div><p>
</p><p>
</p><p>Picture of On Click ()</p><p>Finally, let's disable the <span class="strong"><strong>done</strong></span> button in the <span class="strong"><strong>Inspector</strong></span>, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463487/graphics/image_02_021.jpg" /></div><p>
</p><p>The Inspector</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip12"></a>Tip</h3><p>In general, when enabling or disabling items in the Inspector, make sure that the box next to the item is checked if you want it to be enabled, unchecked, or disabled.</p></div><p>Then, let's set all the <span class="strong"><strong>interactable</strong></span> variables of all the components that we have created to <code class="literal">false</code> (so uncheck them). If you press play, you can click on <span class="strong"><strong>edit</strong></span> to edit all the data, and once you have clicked <span class="strong"><strong>done</strong></span> you won't able to change them anymore, unless if you press <span class="strong"><strong>edit</strong></span> again.</p></div></div></div>