<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch12lvl1sec102"></a>Buttons</h2></div></div><hr /></div><p>One of the most <a id="id387" class="indexterm"></a>common UI elements is a simple button. Pretty much all UI interfaces on the most commonly available Unity platforms contain buttons. The simplest interaction with a button is a click. You will now learn how to construct a button in Unity UI and call a certain method in the code when the button is clicked on.</p><p>To speed up your learning <a id="id388" class="indexterm"></a>process, I have prepared ready-to-use UI elements.</p><p>Download and import <code class="literal">MenuViewUIElements.unitypackage</code> into your Unity project, as follows:</p><div class="mediaobject"><img src="/graphics/9781785287596/graphics/B04245_12_06.jpg" /></div><p>Unity will import a few useful assets with this package. In the <span class="strong"><strong>Project</strong></span> View, find <code class="literal">Prefabs/UI/PlayButton.prefab</code> and drag it directly on top of the Menu Canvas, as shown here:</p><div class="mediaobject"><img src="/graphics/9781785287596/graphics/B04245_12_07.jpg" /></div><p>When you drop the <a id="id389" class="indexterm"></a>prefab, the <span class="strong"><strong>PLAY</strong></span> button should appear on the canvas, like this:</p><div class="mediaobject"><img src="/graphics/9781785287596/graphics/B04245_12_08.jpg" /></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch12lvl2sec72"></a>A simple button</h3></div></div></div><p>Before we talk <a id="id390" class="indexterm"></a>about the functionality of the button, we will talk about the visual parts that make up the simple labeled button:</p><div class="mediaobject"><img src="/graphics/9781785287596/graphics/B04245_12_09.jpg" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch12lvl2sec73"></a>Image</h3></div></div></div><p>Unity can very easily <a id="id391" class="indexterm"></a>draw 2D images on the UI canvas. Select your button and take a look at the <span class="strong"><strong>Inspector</strong></span> window. We are using the <span class="strong"><strong>Image</strong></span> component on our button to give it a visual presence. In simple words, the <span class="strong"><strong>Image</strong></span> component gives our button a background.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch12lvl2sec74"></a>The Button component</h3></div></div></div><p>The actual interaction with the <a id="id392" class="indexterm"></a>button is controlled by the <span class="strong"><strong>Button</strong></span> component. The <span class="strong"><strong>Button</strong></span> control responds to a click from the user and is used to initiate or confirm an action. For more detailed information, refer to the Unity Manual. You will find tons of <a id="id393" class="indexterm"></a>useful information and examples in it: <a class="ulink" href="http://docs.unity3d.com/Manual/script-Button.html" target="_blank">http://docs.unity3d.com/Manual/script-Button.html</a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch12lvl2sec75"></a>Interaction</h3></div></div></div><p>There it is! This is our <a id="id394" class="indexterm"></a>first button. It might not look very impressive, but it's functional. To check how it works, click on <span class="strong"><strong>Play</strong></span> in Unity and press the button in the game view.</p><p>What should happen isâ€¦ nothing. You observe the button visually changing a little when you press it, but the game doesn't start. We need to assign an action to the button to call the part of code that we need.</p><p>All user interaction with Unity UI is driven by events. The button has one type of event already built into its component. It is the simple <code class="literal">OnClick</code> event:</p><div class="mediaobject"><img src="/graphics/9781785287596/graphics/B04245_12_10.jpg" /></div><p>The <code class="literal">OnClick</code> event is invoked when a user clicks on the button and releases it. At the moment, the list of methods that we want to invoke when the <code class="literal">OnClick</code> event happens is empty. Hey! That's why the button isn't doing anything useful. Let's hook it up with a method and see how it works.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch12lvl2sec76"></a>The Button action</h3></div></div></div><p>Unity's Event Systems are <a id="id395" class="indexterm"></a>very flexible. The <code class="literal">OnClick</code> event allows you to call any public method in your code directly from the <span class="strong"><strong>Button</strong></span> component. Follow the few simple steps given here to assign a specific method in the code that you want to call when the UI button is clicked on by the user:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select the game object containing the <span class="strong"><strong>Button</strong></span> component.</p></li><li><p>Press the <span class="strong"><strong>+</strong></span> button in the <span class="strong"><strong>Event</strong></span> section, as shown here:</p><div class="mediaobject"><img src="/graphics/9781785287596/graphics/B04245_12_11.jpg" /></div></li><li><p>Drag and drop the <code class="literal">GameObject</code> containing the script with the <code class="literal">public</code> method you want to call from the event. In this case, it is the <code class="literal">GameManager</code> game object. Drop <code class="literal">GameManager</code> into the <span class="strong"><strong>Object</strong></span> field:</p><div class="mediaobject"><img src="/graphics/9781785287596/graphics/B04245_12_12.jpg" /></div></li><li><p>From the function list, select the Component name and then the method name of the function that you want to be called when the button is clicked on. Since we are playing with the <span class="strong"><strong>Play</strong></span> button, we will call the <code class="literal">StartGame()</code> function from <code class="literal">GameManager</code> , as shown next:</p><div class="mediaobject"><img src="/graphics/9781785287596/graphics/B04245_12_13.jpg" /></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note34"></a>Note</h3><p>If you cannot see your function on the function list, it probably means that <code class="literal">EventSystem</code> cannot access the function as it is private. Change the access modifier to <a id="id396" class="indexterm"></a>public.</p></div></li><li><p>If you have connected everything properly, the <code class="literal">OnClick()</code> event attached to the <span class="strong"><strong>Play</strong></span> button will look like this in the <span class="strong"><strong>Inspector</strong></span> window:</p><div class="mediaobject"><img src="/graphics/9781785287596/graphics/B04245_12_14.jpg" /></div></li></ol></div><p>We now have all the bits and pieces we need for the button to work. We have set up the <span class="strong"><strong>Canvas</strong></span> view to render UI elements. We have an <code class="literal">EventSystem</code> to process and trigger events caused by the user. And we also have the first event called when the user presses the <span class="strong"><strong>Play</strong></span> button.</p><p>Great work so far. Let's test the <span class="strong"><strong>Play</strong></span> button! Press <span class="strong"><strong>Play</strong></span> in Unity and click on the green <span class="strong"><strong>Play</strong></span> button in the Game view.</p><p>Woohoo! It's working! Great work! As soon as you press the <span class="strong"><strong>Play</strong></span> button, the Event manager will invoke the <a id="id397" class="indexterm"></a>
<code class="literal">StartGame()</code> function, which is under <code class="literal">GameManager</code>, and the game will start.</p><p>The button is working great. However, something is not right. The user will expect the menu to disappear just after they've pressed the button. Let's get this sorted right away.</p></div></div>