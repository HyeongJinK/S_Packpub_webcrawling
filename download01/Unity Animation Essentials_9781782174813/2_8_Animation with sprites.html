<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec13"></a>Animation with sprites</h2></div></div><hr /></div><p>After you've imported a <a id="id96" class="indexterm"></a>set of sprite objects, either as individual images or as atlas textures, you're ready to start animating with them using a single technique. Achieving this is really simple, at least initially. From the Unity Project panel, just select all sprites that go together as a complete animation sequence, and then drag and drop them as one into the Scene Hierarchy panel. Dropping them into the scene or game tabs won't work; it must be inside the hierarchy panel. For example, drag and drop the player run animation sequence (from this book's files) into the scene. When you do this, Unity displays a <span class="strong"><strong>Save</strong></span> dialog, prompting you to create a new animation sequence asset (<code class="literal">.anim</code> is the file extension). </p><p>Assign the animation a name (such as <code class="literal">PlayerRun.anim</code>) and then click on <span class="strong"><strong>Save</strong></span>.</p><div class="mediaobject"><img src="/graphics/9781782174813/graphics/B04103_02_12.jpg" /><div class="caption"><p>A player character created from multiple frames</p></div></div><p>A sprite object is<a id="id97" class="indexterm"></a> created in the scene, and it should be visible in the <span class="strong"><strong>Scene</strong></span> and <span class="strong"><strong>Game</strong></span> tabs. If it's not, make sure that the object is positioned within the view of the camera. And that's all there is to creating an initial animation sequence. If you test your scene, your sprite character will now be animated, running through all the images in the sequence. This is achieved because Unity has performed a series of configuration steps behind the scenes. Specifically, Unity created a new <code class="literal">Animation Clip</code> (<code class="literal">.anim</code>) asset that defines the key frame sequence. Secondly, Unity has created a Mecanim controller to initiate an animation playback as the level begins, and to control the playback speed. Thirdly, Unity has added an animator component to the sprite object in the scene to link the object to its animation data. By default, however, the animation created may not appear exactly as you want. So, in the subsequent sections, we'll see how we can tweak the animation.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec26"></a>Sprite animation is too slow or too fast</h3></div></div></div><p>If your <a id="id98" class="indexterm"></a>sprite animation is playing too fast or too slow, then you'll need to edit the sprite Mecanim graph (Mecanim is covered in depth in later chapters). The animation speed for sprites can be changed quickly and easily. To achieve this, select the sprite object in the scene. From the Object Inspector, double-click on the <span class="strong"><strong>Animation Controller</strong></span> asset inside the <span class="strong"><strong>Controller</strong></span> slot of the <span class="strong"><strong>Animator</strong></span> component.</p><div class="mediaobject"><img src="/graphics/9781782174813/graphics/B04103_02_13.jpg" /><div class="caption"><p>Accessing the sprite Animation Controller</p></div></div><p>Double-clicking <a id="id99" class="indexterm"></a>on the sprite <span class="strong"><strong>Animation Controller</strong></span> will open the Mecanim graph for the sprite. Here, the animation speed can be controlled. This graph contains several nodes connected together.</p><div class="mediaobject"><img src="/graphics/9781782174813/graphics/B04103_02_14.jpg" /><div class="caption"><p>The Mecanim graph for the animated sprite</p></div></div><p>From the graph, click on the <span class="strong"><strong>PlayerRun</strong></span> (default) node, which represents the sprite animation, to select it and view its properties in the Object Inspector. For the player sprite graphic (included in this book's companion files), this node represents a full walk animation. The<a id="id100" class="indexterm"></a> animation speed is controlled using the <span class="strong"><strong>Speed</strong></span> setting. In it, <span class="strong"><strong>0</strong></span> means stopped, <span class="strong"><strong>1</strong></span> means the default speed, <span class="strong"><strong>0.5</strong></span> means half speed, <span class="strong"><strong>2</strong></span> means double speed, and so on. If your animation is too slow, then increase the <span class="strong"><strong>Speed</strong></span> value, and if it is too fast, then reduce the <span class="strong"><strong>Speed</strong></span> value. For my player character animation, I set the speed to <span class="strong"><strong>2</strong></span> double speed. Once you're done, just replay your game to see the effect.</p><div class="mediaobject"><img src="/graphics/9781782174813/graphics/B04103_02_15.jpg" /><div class="caption"><p>Changing the animation speed</p></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec27"></a>Animation shouldn't be looping</h3></div></div></div><p>By default, sprite animations play on a loop cycle; that is, they play again and again without an end. When the animation playback completes a cycle, it simply returns to the beginning and <a id="id101" class="indexterm"></a>plays again. This may be exactly what you need in some cases, but not always. Sometimes, you may want the animation to play only once and then stop. If so, you'll need to access the animation data (inside the <code class="literal">.anim</code> asset) and adjust its properties. To do this, select the sprite animation asset in the Project panel. Animation assets feature a <span class="strong"><strong>Play</strong></span> icon and match the name you gave the animation during its creation.</p><div class="mediaobject"><img src="/graphics/9781782174813/graphics/B04103_02_16.jpg" /><div class="caption"><p>Selecting an animation asset</p></div></div><p>After the<a id="id102" class="indexterm"></a> asset is selected, remove the checkmark from the <span class="strong"><strong>Loop Time</strong></span> checkbox inside the Object Inspector. Now replay your game and the animation will play only once.</p><div class="mediaobject"><img src="/graphics/9781782174813/graphics/B04103_02_17.jpg" /><div class="caption"><p>Disabling the loop time for play-once animations</p></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec28"></a>Frames play in the wrong order</h3></div></div></div><p>If your <a id="id103" class="indexterm"></a>sprite animation features many frames, it's possible that Unity arranged them in the wrong order while generating the animation, resulting in some frames appearing before or after they should. If this happens, you'll need to edit the animation data itself, through the <span class="strong"><strong>Animation</strong></span> window. This window can be accessed by going to <span class="strong"><strong>Window</strong></span> | <span class="strong"><strong>Animation</strong></span> from the application menu.</p><div class="mediaobject"><img src="/graphics/9781782174813/graphics/B04103_02_18.jpg" /><div class="caption"><p>Accessing the Animation window</p></div></div><p>With the <a id="id104" class="indexterm"></a>
<span class="strong"><strong>Animation</strong></span> window visible in the editor, select the sprite object in the scene, and its animation data will show up automatically in the timeline. The timeline represents the total duration of the animation, from start to end. The diamond-shaped symbols dotted evenly along the timeline represent key frames, in which the sprite image changes. You can select a specific key frame in the timeline by clicking on it. Then, you can also view its properties for the sprite in the Object Inspector. For example, with the player character animation, at time equal to <span class="strong"><strong>0:06</strong></span>, the <span class="strong"><strong>player_run_00013</strong></span> sprite is shown. The <span class="strong"><strong>Sprite</strong></span> field in the Object Inspector is highlighted in red to show that the field is animated and changes over time.</p><div class="mediaobject"><img src="/graphics/9781782174813/graphics/B04103_02_19.jpg" /><div class="caption"><p>Viewing key frames for sprite animation</p></div></div><p>When you <a id="id105" class="indexterm"></a>select a key frame from the timeline in which the wrong image is shown for the sprite at that time, you can easily correct it by just clicking on the <span class="strong"><strong>Sprite</strong></span> field in the Object Inspector and picking a new sprite object from the sprite browser. Unity will automatically record, or understand, that the newly selected sprite should be displayed for that key frame instead.</p><div class="mediaobject"><img src="/graphics/9781782174813/graphics/B04103_02_20.jpg" /><div class="caption"><p>Using the sprite browser to correct animation frames</p></div></div></div></div>