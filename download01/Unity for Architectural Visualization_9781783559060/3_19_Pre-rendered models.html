<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec23"></a>Pre-rendered models</h2></div></div><hr /></div><p>While Unity has a very well integrated Lightmapping system, it might make sense if you do the baking in<a id="id188" class="indexterm"></a> dedicated rendering software, such as to use advanced <span class="emphasis"><em>Global Illumination</em></span>. Most current DCC applications support light baking, including CINEMA 4D and 3ds Max.</p><p>When you use, for example CINEMA 4D, this is available for texture/light baking. This can be achieved by following these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>When a scene is set up, select the object and choose <span class="strong"><strong>Bake Object</strong></span> from the <span class="strong"><strong>Objects</strong></span> menu inside the <span class="strong"><strong>Objects</strong></span> browser.</p></li><li><p>In the dialog, activate <span class="strong"><strong>Ambient Occlusion</strong></span> and <span class="strong"><strong>Illuminate</strong></span> and choose an output folder to save the textures to.</p></li><li><p>When you press <span class="strong"><strong>bake</strong></span>, CINEMA 4D will render the lighting and materials onto the object and create a new mesh, with optimized UV mapping. The original mesh is kept hidden if you ever wanted to make any changes.</p></li><li><p>When the baking is done, check that it works, by disabling GI and lights and call render. In a fraction of a second, the model will be re-rendered.</p></li><li><p>When you load this model into Unity, ensure that you hide the original object and only retain the baked one. Beware that the material for the baked object has a black basic color set, which should actually be white, or the whole object turns out pitch black. Load the rendered and baked texture onto the object. Set the <span class="strong"><strong>Shader</strong></span> to <span class="strong"><strong>Unlit/Texture</strong></span> to only retain the color of the texture.</p></li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note08"></a>Note</h3><p>
<span class="strong"><strong>Limitations</strong></span>
</p><p>This <a id="id189" class="indexterm"></a>procedure mixes both texture maps and lighting, lowering the resolution of the maps considerably. There is also no integration with Unity lighting and shadows, so it is hard to mix regular and baked geometry. Many people rely fully on the integrated Lightmapping in Unity or bake the full scene in external software.</p></div><p>Alternatively, you can use a <span class="strong"><strong>Self-Illumin/Diffuse</strong></span> shader, and use the Lightmap in the <span class="strong"><strong>Illumin (A)</strong></span> map. Beware that you need to change the texture properties of that map to generate an <span class="strong"><strong>Alpha channel</strong></span> from the grey-scale image, as the Illumin channel only takes the alpha channel into account (indicated by <span class="emphasis"><em>A</em></span>). With such a setup, you get a slightly different result, which still integrates with Unity lighting and thus can cast and/or receive shadows. </p><p>The following screenshot shows two ways the baked material can be set up:</p><div class="mediaobject"><img src="/graphics/9781783559060/graphics/7500_03_09.jpg" /></div><p>There is a nice video tutorial, which explains a more elaborate procedure step-by-step at the link <a class="ulink" href="http://www.youtube.com/watch?v=CsSxUSvdrgg" target="_blank">http://www.youtube.com/watch?v=CsSxUSvdrgg</a>. Two bake passes are performed in CINEMA 4D. The first one bakes the materials into a new texture map, as shown previously, while the second bake ensures all baked textures are now part of the regular diffuse<a id="id190" class="indexterm"></a> material, avoiding the manual adjustments that were required.</p><p>For users of SketchUp, <span class="emphasis"><em>LightUp</em></span>
<a id="id191" class="indexterm"></a> available at, <a class="ulink" href="http://www.light-up.co.uk" target="_blank">http://www.light-up.co.uk</a>) is an interesting solution. It provides light baking inside SketchUp and supports a real-time view inside the viewport. In addition, it adds <code class="literal">FBX</code> export (which was missing in the free edition of SketchUp). The baked lighting can be loaded as a Lightmap inside Unity. They provide an optimized shader and import script, to assist with the Unity setup.</p></div>