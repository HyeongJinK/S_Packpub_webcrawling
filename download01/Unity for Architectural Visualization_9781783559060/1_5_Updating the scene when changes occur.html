<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch01lvl1sec11"></a>Updating the scene when changes occur</h2></div></div><hr /></div><p>Regardless if you use CAD or BIM software or rely on DCC systems, chances are that the models need to be updated to reflect changes in the design. Traditional visualization systems <a id="id58" class="indexterm"></a>often fully import models and convert them in a system specific internal model, which is edited and adapted in a project. However, in such systems, you <a id="id59" class="indexterm"></a>need to redo all these changes when you have to replace a model with a new, updated version. Since you cannot reasonably assume that a model is completely finalized before any game authoring starts, a more efficient workflow is in order. Like many game authoring systems, Unity is not modeling<a id="id60" class="indexterm"></a> software, but relies on external software, such as Autodesk 3ds Max or <a id="id61" class="indexterm"></a>Maxon CINEMA 4D. It is, however, possible to add modeling <a id="id62" class="indexterm"></a>functionality to Unity using third-party plug-ins, such as <span class="emphasis"><em>ProBuilder</em></span> available at <a class="ulink" href="http://www.probuilder3d.com" target="_blank">http://www.probuilder3d.com</a> or <span class="emphasis"><em>GameDraw</em></span> available<a id="id63" class="indexterm"></a> at <a class="ulink" href="http://gamedraw.mixeddimensions.com" target="_blank">http://gamedraw.mixeddimensions.com</a>.</p><p>When you load models inside Unity, they are handled by an internal importer module. Like most 3D systems, you can tweak the import with a number of settings. However, in Unity these settings<a id="id64" class="indexterm"></a> are maintained as part of the imported model's properties and a reference to the original file is kept. Whenever that file is updated, for example<a id="id65" class="indexterm"></a> by exporting the model again, using the same file name, Unity recognizes this and reloads the file, applying the same import settings again. This is a very important behavior of the Unity pipeline, as you can see that all models that have already been placed inside the different scenes of a project are placed on exactly the same position, at the same scale and using the same geometry conversion. This also allows you to tweak the import, for example, by altering the import settings and re-importing the model even if it has already been placed in scenes of the project. </p><p>The following screenshot displays an ArchiCAD model inside Unity:</p><div class="mediaobject"><img src="/graphics/9781783559060/graphics/7500_01_05.jpg" /></div><p>Unity goes a step further when you use one of the directly supported DCC modeling systems, such as 3ds Max, Maya, or CINEMA 4D. If you save your native model directly inside the project's <code class="literal">Assets</code> folder, Unity automatically imports the model, or so it seems. Actually, Unity calls the original application in the background to request an export to the FBX format.</p><p>If you have such a supported modeling application and it is installed on the same machine as Unity, making<a id="id66" class="indexterm"></a> changes can be really straightforward as shown<a id="id67" class="indexterm"></a>:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Double click the model icon inside Unity. The native model gets loaded inside the DCC software, ready for you to make changes.</p></li><li><p>When you have finished editing, simply save the file and close the DCC software.</p></li><li><p>When you switch back to Unity, after a few moments, the converted <code class="literal">FBX</code> model is reloaded automatically in the background.</p></li></ol></div><p>For the user, it just looks like there is only a single model that Unity can import when changes occur. This same process also works fine with for example, Photoshop <code class="literal">PSD</code> files, where no conversion is required.</p><p>When using SketchUp or ArchiCAD or other 3D modeling software that is not directly recognized by Unity, the process is a little more complicated:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Double click the model icon inside Unity to launch the authoring software.</p></li><li><p>When you are ready with editing, you need to export the model manually. Export the file to <code class="literal">FBX</code> or another supported format and overwrite the previous version in the Unity project's <code class="literal">Assets</code> folder.</p></li><li><p>When you switch back to Unity, the model is replaced with the new version.</p></li></ol></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip03"></a>Tip</h3><p>If you need to set up the conversion configuration each time (for example, when the software does not remember export settings), take care of noting which configuration was used last time. For example, how the model is organized, how textures are treated,and if a possible transformation occurs. Once you have a conversion configuration that works, take a note of all the export settings and be wary of applying them again at the next export action.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec11"></a>Optimally supported workflows</h3></div></div></div><p>While we would prefer to claim that any modeling software is equally usable, two combinations are <a id="id68" class="indexterm"></a>worth mentioning specifically and they are based on using software from the same vendor in both cases.</p><p>When using CAD or BIM software from Autodesk, it helps to pass through DCC software that is also provided by Autodesk. AutoCAD or Revit models<a id="id69" class="indexterm"></a> are best passed through 3ds Max or Maya before converting to <code class="literal">FBX</code> into Unity. This is especially important to reflect model changes. AutoCAD models are usually passed as <code class="literal">DWG</code> files to Max or Maya. Set up correct material properties and texture mapping and either save the file directly inside the <a id="id70" class="indexterm"></a>
<code class="literal">Assets</code> folder (to have Unity call up the translation in the background) or export to <code class="literal">FBX</code> into the <code class="literal">Assets</code> folder. The former is slightly more convenient, but the latter gives you full control and is usually the preferred choice for experienced users.</p><p>This is equally true when using software from Nemetschek (or one of its daughter companies). ArchiCAD and VectorWorks models are best passed through CINEMA 4D, before converting to Unity, for exactly the same reason. The <span class="emphasis"><em>Exchange</em></span> plug-ins for ArchiCAD and VectorWorks optimizes the model exchange with CINEMA 4D and <a id="id71" class="indexterm"></a>automates model updates. You can set up materials and textures and still refine the model in the original creation software. CINEMA 4D models can be placed directly inside the <code class="literal">Assets</code> folder.</p><p>As always with interoperability through add-ons, success depends on particular software versions and supported platforms and the fact that a software update of one application can break compatibility with the other one. Alas, this is beyond our control.</p><p>You can also be confronted with permission problems. When you use the automatic conversion process, Unity copies an <code class="literal">FBX</code> exporter module in the supported application's add-on folder, which requires administrative permissions. On Windows, you have to launch Unity as an administrator at least once to have this process completed.</p><p>With both the Autodesk and Nemetschek applications workflow, you can reload the architectural model, while preserving applied materials, mapping, or animations, and consequently reload the <code class="literal">FBX</code> model inside Unity while preserving the additional settings over there. The following screenshot gives an example of an ArchiCAD model that is exported to CINEMA 4D and loaded inside Unity:</p><div class="mediaobject"><img src="/graphics/9781783559060/graphics/7500_01_06.jpg" /></div><p>Based on reactions in user forums on Unity (for example, the <span class="emphasis"><em>Unity Community</em></span> at <a class="ulink" href="http://forum.unity3d.com/forum.php" target="_blank">http://forum.unity3d.com/forum.php</a>) or one of the related DCC software programs, many people actually suggest ignoring the automatic conversion and leaving the native models (for example, <code class="literal">MAX</code> or <code class="literal">C4D</code> files) outside of the <code class="literal">Assets</code> folder. They would rather perform the conversion manually. This allows more control, for example by splitting the model up in smaller chunks, so they are easier to manipulate inside Unity. This is also <a id="id72" class="indexterm"></a>required when you collaborate with others and not everyone has the Unity or modeling software available on their machine. In that case, the artist responsible for the 3D model can work on a provided <code class="literal">FBX</code>, while the designer responsible for the building model can continue working, and export the model when updates need to be integrated.</p><p>The following figure summarizes several workflows that are known to work well for architectural visualization. Bold arrows are the recommended pathways for optimal integration.</p><div class="mediaobject"><img src="/graphics/9781783559060/graphics/7500_01_07.jpg" /></div></div></div>