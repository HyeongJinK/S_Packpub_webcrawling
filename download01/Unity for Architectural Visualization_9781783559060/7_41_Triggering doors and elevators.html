<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch07lvl1sec41"></a>Triggering doors and elevators</h2></div></div><hr /></div><p>We will now write a<a id="id375" class="indexterm"></a> simple script that is directly applicable in our example project <a id="id376" class="indexterm"></a>and extend it afterwards to be more generic and reusable, using parameters.</p><p>Doors and elevators are typical interactive elements in buildings. Most buildings have no other moving parts. To rotate a door manually or to use scripting is not that different. However, there are a few tricks to get it correct. These are as follows:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Create a plane GameObject, positioned in the origin. Add a simple Cube, and name it <code class="literal">DoorLeaf</code>. Set its position to <span class="strong"><strong>X</strong></span>=<code class="literal">1</code>, <span class="strong"><strong>Y</strong></span>=<code class="literal">1.5</code>, <span class="strong"><strong>Z</strong></span>=<code class="literal">0</code> and scale to <span class="strong"><strong>X</strong></span>=<code class="literal">2</code>, <span class="strong"><strong>Y</strong></span>=<code class="literal">3</code>, <span class="strong"><strong>Z</strong></span>=<code class="literal">0.1</code>. This ensures that the lower side corner of the door leaf is sitting in the center or our scene.</p><div class="mediaobject"><img src="/graphics/9781783559060/graphics/7500_07_01.jpg" /></div></li><li><p>Load the local documentation from the menu by navigating to <span class="strong"><strong>Help</strong></span> | <span class="strong"><strong>Scripting Reference</strong></span>, which opens your default browser on the starting page of the locally<a id="id377" class="indexterm"></a> installed Unity documentation, which is also <a id="id378" class="indexterm"></a>accessible offline. On the first page there is a small menu to choose the language of all examples (JavaScript, C# or Boo).</p></li><li><p>Type <code class="literal">rotation</code> in the search field to get a list of entries on rotation.</p></li><li><p>Click on <span class="strong"><strong>Transform.rotation</strong></span>, which directs you to the documentation of the rotation property of the Transform component. You can get and set this property using <code class="literal">transform.rotation</code>.</p></li><li><p>Switch back to Unity, create a new C# script by navigating to <span class="strong"><strong>Assets</strong></span> | <span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>C# Script</strong></span>, and name it <code class="literal">rotateObject</code>.</p></li><li><p>If you double-click on the script name in the Assets tab, Unity will launch the default code editor, which is <span class="strong"><strong>MonoDevelop</strong></span> with most installations.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note14"></a>Note</h3><p>MonoDevelop<a id="id379" class="indexterm"></a> is an Open Source editor targeted at Mono development, but it can be used for all scripting languages inside Unity. It is a complete <span class="strong"><strong>Integrated Development Environment</strong></span> (<span class="strong"><strong>IDE</strong></span>)<a id="id380" class="indexterm"></a> with syntax coloring, code-completion, search and replace facilities, line numbering, and even full debugging support. Refrain from using a basic text editor such as Notepad in Windows or TextEdit in OSX. In Windows, many C# developers also use Microsoft Visual Studio.</p></div></li></ol></div><p>Inside MonoDevelop, you get a template script, which does nothing at the moment, but is set up to start entering code.</p><p>The first two statements load the main Unity class library and the Mono/.NET collection classes that are needed to work with lists of objects. These statements are given as follows:</p><div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;</pre></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip14"></a>Tip</h3><p>
<span class="strong"><strong>Downloading the example code</strong></span>
</p><p>You can download the example code files for all Packt Publishing books you have purchased from your account at <a class="ulink" href="http://www.packtpub.com" target="_blank">http://www.packtpub.com</a>. If you purchased this book elsewhere, you can visit <a class="ulink" href="http://www.packtpub.com/support" target="_blank">http://www.packtpub.com/support</a> and register to have the files e-mailed directly to you.</p></div><p>Next up is the class definition, which derives from <code class="literal">MonoBehaviour</code> (the mother class for all Unity scripts). As a convention, the class name should be identical to the script name (without the file extension <code class="literal">.cs</code>). Unity will complain otherwise. This is shown in the following <a id="id381" class="indexterm"></a>statement of code:</p><div class="informalexample"><pre class="programlisting">public class <span class="strong"><strong>rotateObject</strong></span> : MonoBehaviour {</pre></div><p>Variables <a id="id382" class="indexterm"></a>and classes are declared between curly brackets. The <code class="literal">Start() </code>method<a id="id383" class="indexterm"></a> gets called just once when the script launches (usually when you press play). The <code class="literal">void</code> qualifier indicates that the method or function will not return a value or variable upon use. This is shown in the following piece of code:</p><div class="informalexample"><pre class="programlisting">// Use this for initialization
void Start () {

}</pre></div><p>The <code class="literal">Update()</code> method<a id="id384" class="indexterm"></a> is called continuously, whenever a frame in the game is updated. This is shown in the following piece of code:</p><div class="informalexample"><pre class="programlisting">// Update is called once per frame
void Update () {

}</pre></div><p>Do not forget the final closing bracket to complete the class:</p><div class="informalexample"><pre class="programlisting">}</pre></div><p>Now we can enter some new code to add some actual behavior to this class. Adjust the <code class="literal">Update</code> method by typing (and not copying) the following code:</p><div class="informalexample"><pre class="programlisting">void Update () {
  <span class="strong"><strong>this.transform.rotation = Quaternion.Euler (0,90,0);</strong></span>
}</pre></div><p>Unity uses <span class="emphasis"><em>Quaternions</em></span> to indicate rotations. They are numerically more stable than vectors and don't lead to drifting when you continuously rotate entities. The <code class="literal">Quaternion</code> class has an <code class="literal">Euler</code> method<a id="id385" class="indexterm"></a> to set the rotation using three values for X, Y, and Z, respectively. This is exactly what you would type inside the transform component fields. Set all three angles<a id="id386" class="indexterm"></a> in one call when using Euler-angles. Contrary to many <a id="id387" class="indexterm"></a>other programming environments, you don't need to convert angles from degrees to radians first. This is done as given in the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Drag this script onto the <span class="strong"><strong>DoorLeaf</strong></span> object. It now has a component called <span class="strong"><strong>Rotate Object (Script)</strong></span>, which is derived from the script and class name. Notice the capitalization and the space inside the name! It has one parameter, called <span class="strong"><strong>Script</strong></span>, which is set to <span class="strong"><strong>rotateObject</strong></span> (the name of our script).</p></li><li><p>Press play to see what happens. Press <span class="strong"><strong>stop</strong></span> and play a few times to double check. The DoorLeaf rotates abruptly and stays in a rotation state while the script is running. It returns to its former position when you stop the script.</p></li><li><p>Okayâ€¦ that's not really much, is it? Up to this point, our script is really simple and unusable, as the door is rotating around its center, rather than around a hinge. This can be set up with a proper GameObject hierarchy. To add the door hinge, create an empty GameObject by navigating to <span class="strong"><strong>GameObject</strong></span> | <span class="strong"><strong>Create Empty</strong></span> and name it <code class="literal">Hinge</code>. Set its position and rotation to <span class="strong"><strong>X</strong></span>=<code class="literal">0</code>, <span class="strong"><strong>Y</strong></span>=<code class="literal">0</code>, <span class="strong"><strong>Z</strong></span>=<code class="literal">0</code>. It now sits in the corner of our door leaf.</p></li><li><p>Drag the door leaf onto the hinge object, to define a hierarchical relation, as shown below. Check the setup by manually changing the Y-rotation of the hinge. The leaf should follow along.</p><div class="mediaobject"><img src="/graphics/9781783559060/graphics/7500_07_02.jpg" /></div></li><li><p>Adapt the setup by removing the script from the leaf and adding it to the hinge instead. Press play to see that the leaf rotates around the hinge.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note15"></a>Note</h3><p>If we would use <code class="literal">transform.Rotate()</code>, we'd get a different behavior. This command <a id="id388" class="indexterm"></a>adds a rotation to the current rotation, whereas<a id="id389" class="indexterm"></a> setting the rotation variable replaces it. For example, <code class="literal">transform.Rotate(0, 5, 0)</code>, when placed in the <code class="literal">Update </code>method<a id="id390" class="indexterm"></a>, continuously adds a 5 degree rotation with each frame renewal.</p></div></li></ol></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec38"></a>Using triggers and colliders</h3></div></div></div><p>The previous script <a id="id391" class="indexterm"></a>is very basic. We set the rotation directly when the script starts. In <a id="id392" class="indexterm"></a>most cases, we want to control when this occurs. Inside Unity, we receive a notice when objects collide. If you add a <code class="literal">Collider</code> component to any GameObject, it reacts when other objects bump onto it. The system calls the <code class="literal">OnCollisionEnter()</code> event<a id="id393" class="indexterm"></a> to which we can react within our script. When set to <code class="literal">Trigger</code>, the <code class="literal">Collider</code> component works a bit differently. Triggers do not obstruct other objects, but detect when they enter their collision volume (often a box or sphere). We could use this to find out when our player enters a room (<code class="literal">OnTriggerEnter</code>) and when the player leaves again (<code class="literal">OnTriggerExit</code>). This is done as given in the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Add a Cube so it extends in front and behind the door leaf. For example, position <span class="strong"><strong>X</strong></span>=<code class="literal">1</code>, <span class="strong"><strong>Y</strong></span>=<code class="literal">1.5</code>, and <span class="strong"><strong>Z</strong></span>=<code class="literal">0</code> with scale <span class="strong"><strong>X</strong></span>=<code class="literal">2</code>, <span class="strong"><strong>Y</strong></span>=<code class="literal">3</code>, and <span class="strong"><strong>Z</strong></span>=<code class="literal">6</code>. Name it <code class="literal">DoorTrigger</code>.</p></li><li><p>Since Cubes come with a <code class="literal">Box Collider</code> component automatically, we don't have to add one ourselves. Just ensure that you toggle its <span class="strong"><strong>Is Trigger</strong></span> property, so the box will not obstruct the player.</p></li><li><p>Disable the <span class="strong"><strong>Mesh Renderer</strong></span> component, to make it invisible.</p></li><li><p>Add an Empty object in position <span class="strong"><strong>X</strong></span>=<span class="strong"><strong>Y</strong></span>=<span class="strong"><strong>Z</strong></span>=<code class="literal">0</code> and name it <code class="literal">Door</code>. This will group the other elements. Leave scale at 1 or the children will behave erratically!</p></li><li><p>Drag the <span class="strong"><strong>DoorTrigger</strong></span> and <span class="strong"><strong>Hinge</strong></span> on <span class="strong"><strong>Door</strong></span>, to make them a child. The whole group is now underneath a single object, called <span class="strong"><strong>Door</strong></span>. Do not attach the <span class="strong"><strong>DoorTrigger</strong></span> to the <span class="strong"><strong>Hinge</strong></span> or <span class="strong"><strong>Door Leaf</strong></span>, as the triggering zone should not rotate while the door is opening.</p><div class="mediaobject"><img src="/graphics/9781783559060/graphics/7500_07_03.jpg" /></div></li><li><p>Remove the previous version of the <span class="strong"><strong>rotateObject</strong></span> script, which was attached to the <span class="strong"><strong>Hinge</strong></span> object. Use the script given as follows:</p><div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;
public class rotateObject : MonoBehaviour {</pre></div></li></ol></div><p>Add two <span class="emphasis"><em>public variables</em></span> to the script. <code class="literal">Target</code> can hold any GameObject from the scene. <code class="literal">Angle</code> is the <a id="id394" class="indexterm"></a>amount of degrees we want our door to rotate. We write the <a id="id395" class="indexterm"></a>angle as <code class="literal">90.0f</code> to indicate this is a <code class="literal">floating-point</code> number. Public variables become visible in the Inspector of the object with the script attached.</p><div class="informalexample"><pre class="programlisting">public GameObject Target;
public float Angle = 90.0f;</pre></div><p>
<code class="literal">Collider</code> objects that are set to <code class="literal">Trigger</code> call the <code class="literal">OnTriggerEnter</code> and <code class="literal">OnTriggerExit</code> events. We ignore the <code class="literal">Collider</code> parameter <code class="literal">other</code> for now, as shown in the following piece of code:</p><div class="informalexample"><pre class="programlisting">void OnTriggerEnter(Collider other) {
  Target.transform.rotation = Quaternion.Euler (0,Angle,0);
}
void OnTriggerExit(Collider other) {
  Target.transform.rotation = Quaternion.Euler (0,0,0);
}
} // closing bracket</pre></div><p>You can remove the <code class="literal">Start</code> and <code class="literal">Update</code> methods completely, as they are not used here. This is done as shown in the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Now you can re-attach the script to the <span class="strong"><strong>DoorTrigger</strong></span>. Drag the <span class="strong"><strong>Hinge</strong></span> item in the <span class="strong"><strong>Hierarchy</strong></span> tab onto the <span class="strong"><strong>Target</strong></span> parameter slot of the <span class="strong"><strong>Rotate Object</strong></span> script to assign the variable used by the script.</p></li><li><p>To finish <a id="id396" class="indexterm"></a>off, add a first or third person controller into your scene<a id="id397" class="indexterm"></a> and press play. Whenever you run into the <span class="strong"><strong>DoorTrigger</strong></span> zone, the script gets called and the door should open, by rotating the <span class="strong"><strong>Hinge</strong></span> and the attached <span class="strong"><strong>DoorLeaf</strong></span>.</p></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec39"></a>Refining the opening animation</h3></div></div></div><p>While we now<a id="id398" class="indexterm"></a> have a fully functional door, its animation is very crude and abrupt. We will use a technique called <span class="emphasis"><em>easing</em></span> to smooth the door movement and make it more appealing. The trick is to set the angle not in single step, but gradually, each frame getting closer and closer.</p><p>Add three more variables to the script, but make them <code class="literal">private</code>, to not expose them to the user. They are used to set the angle we aim for (<code class="literal">targetAngleY</code>), the value it has at the moment (<code class="literal">currentAngleY</code>), and a small number to control how fast the angle will evolve towards the target value (<code class="literal">easing</code>), as shown in the following piece of code:</p><div class="informalexample"><pre class="programlisting">private float targetAngleY = 0.0f;
private float currentAngleY = 0.0f;
private float easing = 0.05f;</pre></div><p>We move the rotation code to the <a id="id399" class="indexterm"></a>
<code class="literal">Update()</code> method, as it needs to be called on each frame. The current angle will be increased in gradual steps, by multiplying the difference between the target and the current values with the <code class="literal">easing</code> value, as shown in the following piece of code:</p><div class="informalexample"><pre class="programlisting">void Update() {
  currentAngleY += (targetAngleY-currentAngleY) * easing;
  Target.transform.rotation =
    Quaternion.Euler (0.0f, currentAngleY, 0.0f);
}</pre></div><p>Now the two trigger methods are simply used to set the correct <code class="literal">current</code> and <code class="literal">target</code> values. The original public <code class="literal">Angle</code> value is never changed, so we can continue to open and close the door by running in and out of the trigger zone. This is done as shown in the following code:</p><div class="informalexample"><pre class="programlisting">void OnTriggerEnter(Collider other) {
  targetAngleY = Angle;
  currentAngleY = 0.0f;
}
void OnTriggerExit(Collider other) {
  currentAngleY = Angle;
  targetAngleY = 0.0f;
}</pre></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note16"></a>Note</h3><p>Did you notice that these changes did not require another setup of the door hierarchy? Even <a id="id400" class="indexterm"></a>with multiple copies of the door, they'd all use the same script.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec40"></a>Moving platforms</h3></div></div></div><p>A very similar script can be used to define a sliding door or a moving platform, using translation<a id="id401" class="indexterm"></a> instead of rotation. The sliding door is fairly trivial, but the moving platform will be problematic, at first. This is explained in the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>First the setup. Add a cube to become the moving platform and name it <code class="literal">Platform</code>. Place it where you want and adjust its scale.</p></li><li><p>Add a second Cube called <span class="strong"><strong>Tower</strong></span>, and adjust position and scale to become a place where you want the platform to arrive at the end of the translation.</p></li><li><p>Create a third Cube to act as a trigger and name it <code class="literal">PlatformTrigger</code>. Position and size it so it sits just above the platform, defining a zone to enter. Disable its <span class="strong"><strong>Mesh Renderer</strong></span> and toggle the <span class="strong"><strong>Is Trigger</strong></span> parameter, just like the previous example. Make it a child of the platform, so the trigger zone follows the platform. Your setup should resemble the following screenshot.</p><div class="mediaobject"><img src="/graphics/9781783559060/graphics/7500_07_04.jpg" /></div></li><li><p>Now create a new C# script, name it <code class="literal">translateObject</code>, and add the following variables, just after the class declaration, as shown in the following code:</p><div class="informalexample"><pre class="programlisting">public Vector3 targetPosition;
public GameObject Target;
private Vector3 startPosition;
private Vector3 moveCurrent, moveTarget;
private float easing = 0.01f;</pre></div></li><li><p>In the <code class="literal">Start()</code> method<a id="id402" class="indexterm"></a>, we initialize our private parameters, so we retain the original position and set the current and target positions appropriately. This is shown <a id="id403" class="indexterm"></a>in the following piece of code:</p><div class="informalexample"><pre class="programlisting">// Use this for initialization
void Start () {
  startPosition = Target.transform.position;
  moveCurrent = startPosition;
  moveTarget = startPosition;
}</pre></div></li><li><p>The <code class="literal">Update()</code> method<a id="id404" class="indexterm"></a> does the easing, but instead of using floating-point numbers, we calculate directly using vectors, since most useful methods are implemented in the <code class="literal">Vector3</code> class, such as addition, subtraction, and multiplication. This is shown in the following piece of code:</p><div class="informalexample"><pre class="programlisting">// Update is called once per frame
void Update () {
  moveCurrent = moveCurrent + (moveTarget-moveCurrent)*easing;
  Target.transform.position = moveCurrent;
}</pre></div></li><li><p>Then the trigger methods do the trivial work of setting the <code class="literal">moveTarget</code> variable appropriately. Beware that this forces the platform to return to its original position when the player steps off. This is shown in the following piece of code:</p><div class="informalexample"><pre class="programlisting">void OnTriggerEnter(Collider other){
  moveTarget = targetPosition;
}
void OnTriggerExit(Collider other){
  moveTarget = startPosition;
}</pre></div></li><li><p>Add this script to the <span class="strong"><strong>PlatformTrigger</strong></span> and assign the <span class="strong"><strong>Platform</strong></span> as the <code class="literal">Target</code> variable of the script.</p></li><li><p>Adjust the <span class="strong"><strong>Target Position</strong></span> X, Y, and Z values to be somewhere where you want the platform to arrive. Did you notice that this reflects the <code class="literal">targetPosition</code> public variable, which was of type <code class="literal">Vector3</code>?</p></li><li><p>Press play and walk the player onto the platform, which should start translating. Observe what happens when the platform is moving forward.</p></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec41"></a>Solving a problem with parenting</h3></div></div></div><p>This setup has a <a id="id405" class="indexterm"></a>very annoying problem! Whenever the<a id="id406" class="indexterm"></a> platform is moved horizontally, the player gets left behind and falls off! While the vertical movement of the platform continuously triggers the player to detect the floor below, it does not detect any other movement. Luckily, the solution is fairly simple. We temporarily make the player a child of the moving platform. Just be sure to undo this when the player leaves the platform.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note17"></a>Note</h3><p>When using the character motor form the FPC, the scripts take care of it.</p></div><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>The following <code class="literal">switchParent</code> script<a id="id407" class="indexterm"></a> does just that. It first retrieves the player by searching for it using the <span class="strong"><strong>Player</strong></span> <span class="emphasis"><em>tag</em></span>. If you use the FPC, you need to add this tag manually. This is only done once, when the game starts. This is shown in the following piece of code:</p><div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;
public class switchParent : MonoBehaviour {
  public GameObject newParent;
  private GameObject thePlayer;
  void Start () {
    thePlayer = GameObject.FindWithTag("Player");
  }</pre></div></li><li><p>In the trigger methods, we set our player's <code class="literal">transform.parent</code> variable to be the transform component of the <code class="literal">newParent</code> variable. This is shown in the following piece of code:</p><div class="informalexample"><pre class="programlisting">  void OnTriggerEnter (Collider other) {
    thePlayer.transform.parent = newParent.transform;
  }
  void OnTriggerExit(Collider other) {
    thePlayer.transform.parent = null;
  }
} // closing bracket</pre></div></li><li><p>Attach this script also to the <span class="strong"><strong>PlatformTrigger</strong></span> and set the <code class="literal">newParent</code> variable to be the platform object.</p></li><li><p>Press play and walk the player onto the platform. It should follow the movement of the platform. Also check what happens in the Hierarchy tab when you leave the platform again.</p></li></ol></div><p>Beware that these first few scripts lack error checking. We can compare the tag of the colliding object with the <span class="strong"><strong>Player</strong></span> tag, to be certain that only the player will trigger the platform and not some other object flying or moving around.</p><div class="informalexample"><pre class="programlisting">void OnTriggerEnter (Collider other) {
  <span class="strong"><strong>if (other.gameObject.CompareTag("Player"))</strong></span>
    thePlayer.transform.parent = newParent.transform;
}</pre></div><p>Do <a id="id408" class="indexterm"></a>the <a id="id409" class="indexterm"></a>same in<a id="id410" class="indexterm"></a> the <code class="literal">OnTriggerExit()</code> method.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec42"></a>Rework the script using an animation clip</h3></div></div></div><p>We illustrated the use of animation clips in <a class="link" href="#" linkend="ch03">Chapter 3</a>, <span class="emphasis"><em>Let There be Light!</em></span>, with the Sun Study. There we <a id="id411" class="indexterm"></a>created an animation clip that was played<a id="id412" class="indexterm"></a> at the start of the game or level. However, you need a script to launch an animation clip at a particular event, such as when triggering.</p><div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;
public class playAnimation : MonoBehaviour {
  public GameObject target;
  void OnTriggerEnter (Collider other) {
    if (other.gameObject.CompareTag("Player")) {
<span class="strong"><strong>      target.animation.Play();</strong></span>
    }
  }
}</pre></div><p>This is quite straightforward and works fine if your object has a single animation loaded that is set as default. It is also reusable, as you don't need to alter the script when using other animation clips. When you have multiple animations, you have to address the specific animation from the list. We set variables that require an animation clip to be assigned. The next example calls a clip when entering a trigger and another when leaving, as shown in the following piece of code:</p><div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;
public class toggleAnimation : MonoBehaviour {
  public GameObject target;
<span class="strong"><strong>  public string enterAni;</strong></span>
<span class="strong"><strong>  public string exitAni;</strong></span>
  void OnTriggerEnter (Collider other) {
    <span class="strong"><strong>target.animation.Play(enterAni);</strong></span>
}
  void OnTriggerExit (Collider other) {
    <span class="strong"><strong>target.animation.Play(exitAni);</strong></span>
  }
}</pre></div><p>Here we use a string variable to set the animation clip name. This is really flexible, but you have to be careful not to type any mistakes.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip15"></a>Tip</h3><p>Always strive for reusable, generic scripts. Start small and limit scripts to one particular<a id="id413" class="indexterm"></a> purpose. If you need multiple, unrelated behaviors, use different scripts. You can always attach more than one <a id="id414" class="indexterm"></a>script to a GameObject.</p></div></div></div>