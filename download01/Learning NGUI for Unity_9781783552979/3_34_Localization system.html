<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec38"></a>Localization system</h2></div></div><hr /></div><p>NGUI has a built-in <a id="id434" class="indexterm"></a>localization system that allows you to easily define strings for each label in different languages.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec69"></a>Localization file</h3></div></div></div><p>The localization <a id="id435" class="indexterm"></a>system works with a <code class="literal">Localization.txt</code> file with this structure:</p><div class="informalexample"><pre class="programlisting">KEY,English,Francais</pre></div><p>For example, if <a id="id436" class="indexterm"></a>we wanted to localize our main menu's title, we would add this line in the <code class="literal">Localization.txt</code> file:</p><div class="informalexample"><pre class="programlisting">MainMenu_Title, "Main Menu", "Menu Principal"</pre></div><p>Let's create this localization file. Navigate to your project's <code class="literal">Assets</code> folder and create a new <code class="literal">Resources</code> folder. Inside this new folder, create a new <code class="literal">Localization.txt</code> file and open it. Add these lines in it:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>KEY,English,Francais</strong></span>
Francais, "French", "Francais"
English, "English", "Anglais"
MainMenu, "Main Menu", "Menu Principal"</pre></div><p>On the first highlighted line, we define our two languages. The next three lines define our localization keys and their two different values: one in <code class="literal">English</code> and the other in <code class="literal">French</code>.</p><p>OK, the localization file is ready. Now, let's see how to assign a key to a label.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec70"></a>UILocalize</h3></div></div></div><p>In order to easily <a id="id437" class="indexterm"></a>localize a label, we can simply add <a id="id438" class="indexterm"></a>the <code class="literal">UILocalize</code> component to it. Let's see how this works:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select our <code class="literal">UI Root</code> | <code class="literal">Main</code> | <code class="literal">Title</code> | <code class="literal">Label</code> GameObject.</p></li><li><p>In the Inspector view, click on the <span class="strong"><strong>Add Component</strong></span> button.</p></li><li><p>Type <code class="literal">loc</code> to search for components with that word.</p></li><li><p>Select <span class="strong"><strong>Localize</strong></span> and hit <span class="emphasis"><em>Enter</em></span> or click on it with your mouse.</p></li></ol></div><p>We have added the <span class="strong"><strong>UILocalize</strong></span> component to our label. It has only one <span class="strong"><strong>Key</strong></span> parameter. Start typing the first two letters of <code class="literal">MainMenu</code> in the <span class="strong"><strong>Key</strong></span> field. This button will appear:</p><div class="mediaobject"><img src="/graphics/9781783552979/graphics/2979OT_03_23.jpg" /></div><p>It's an auto-completion. Click on it. You now have this preview for each language:</p><div class="mediaobject"><img src="/graphics/9781783552979/graphics/2979OT_03_24.jpg" /></div><p>We just assigned the <code class="literal">MainMenu</code> localization key to our label. The label's text value will be changed <a id="id439" class="indexterm"></a>depending on the current language. Let's see how to define the language.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip10"></a>Tip</h3><p>Sometimes auto-completion does not work the first time. You might have to enter and then exit play mode to update the localization keys.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec71"></a>Selecting the language</h3></div></div></div><p>There is a simple <a id="id440" class="indexterm"></a>way to select the current language for our UI: we just have to add the <code class="literal">Language Selection</code> component to our language pop-up list!</p><p>Let's do it now:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>In the Hierarchy view, select <code class="literal">UI Root</code> | <code class="literal">Options</code> | <code class="literal">Language</code> | <code class="literal">List</code>.</p></li><li><p>In the Inspector view, click on the <span class="strong"><strong>Add Component</strong></span> button.</p></li><li><p>Type <code class="literal">lang</code> to search for components with that word.</p></li><li><p>Select <span class="strong"><strong>Language Selection</strong></span> and hit <span class="emphasis"><em>Enter</em></span> or click on it with your mouse.</p></li></ol></div><p>And that's it! Hit Unity's <span class="strong"><strong>play</strong></span> button. You can see that if you change the game's language with the pop-up list, the main menu's title changes accordingly!</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec72"></a>Remaining keys</h3></div></div></div><p>Now, let's add <a id="id441" class="indexterm"></a>all these remaining keys for our menu to our <code class="literal">Localization.txt</code> file:</p><div class="informalexample"><pre class="programlisting">Play, "Play", "Jouer"
Options, "Options", "Options"
Exit, "Exit", "Quitter"
Language, "Language", "Langue"
Subtitles, "Subtitles", "Sous-titrage"
Nickname, "Nickname", "Pseudo"
Confirm, "Confirm", "Confirmer"
Sound, "Sound", "Son"
Volume, "Volume", "Volume"
SFX, "SFX", "Effets"
Music, "Music", "Musique"
Enabled, "Enabled", "Activ√©"
None, "None", "Aucun"
Welcome, "Welcome! You can change language, subtitles, volume and enter your name on the Options page.", "Bienvenue ! Tu peux changer la langue, les sous-titres et entrer ton pseudo dans les Options."</pre></div><p>Now that we've added all necessary keys, we need to add the <code class="literal">UILocalize</code> component to all labels in the scene. If you have named all GameObjects as recommended in previous chapters, all labels that require localization are named <code class="literal">Label</code>. Let's do a search for <span class="strong"><strong>label</strong></span>, as follows:</p><div class="mediaobject"><img src="/graphics/9781783552979/graphics/2979OT_03_25.jpg" /></div><p>Now, only GameObjects with their name containing the word <code class="literal">label</code> are displayed. We must add the <code class="literal">UILocalize</code> component to all of them:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select one of the GameObjects in the Hierarchy view to have it focused.</p></li><li><p>Select all displayed results with <span class="emphasis"><em>Ctrl + A</em></span>.</p></li><li><p>In the Inspector view, click on the <span class="strong"><strong>Add Component</strong></span> button.</p></li><li><p>Type <code class="literal">loc</code> to search for components with that word.</p></li><li><p>Select <span class="strong"><strong>Localize</strong></span> and hit <span class="emphasis"><em>Enter</em></span> or click on it with your mouse.</p></li></ol></div><p>So, we now have added the <code class="literal">UILocalize</code> component to all required labels. Normally, we should set a <span class="strong"><strong>Key</strong></span> parameter for each of them to know which string to retrieve.</p><p>Fortunately for us, since we've entered text values in the <span class="strong"><strong>Text</strong></span> parameters of <code class="literal">UILabel</code>, they will be <a id="id442" class="indexterm"></a>automatically used by the <code class="literal">UILocalize</code> component to find the correct string.</p><p>In other words, you can simply hit Unity's <span class="strong"><strong>play</strong></span> button, and you'll find that all our UI's labels are now localized! Great!</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec73"></a>Final corrections</h3></div></div></div><p>We still have <a id="id443" class="indexterm"></a>three small tasks to finalize our UI's localization. First, since we have already localized the main menu's title, it now has two <code class="literal">UILocalize</code> components. Before we continue, select <code class="literal">UI Root</code> | <code class="literal">Main</code> | <code class="literal">Title</code> | <code class="literal">Label</code> and remove its second <code class="literal">UILocalize</code>.</p><p>The welcome text is not localized. That's because the <span class="strong"><strong>Key</strong></span> parameter is automatically set to the actual welcome phrase we entered in <code class="literal">UILabel</code>. We must manually set it to <code class="literal">Welcome</code>:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select <code class="literal">UI Root</code> | <code class="literal">Welcome</code> | <code class="literal">Text</code> | <code class="literal">Label</code>.</p></li><li><p>Set the <span class="strong"><strong>Key</strong></span> parameter of <code class="literal">UILocalize</code> to <code class="literal">Welcome</code>.</p></li></ol></div><p>Finally, our <code class="literal">Subtitles</code> pop-up list is not localized. We simply have to request that:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select <code class="literal">UI Root</code> | <code class="literal">Options</code> | <code class="literal">Subtitles</code> | <code class="literal">List</code>.</p></li><li><p>Check the <span class="strong"><strong>Localized</strong></span> option of <code class="literal">UIPopup List</code>.</p></li></ol></div><p>That's it! Now that all <a id="id444" class="indexterm"></a>our UI is localized, let's talk about anchors before we move on to the next chapter.</p></div></div>