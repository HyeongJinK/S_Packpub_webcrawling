<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec29"></a>Menu disappearance</h2></div></div><hr /></div><p>Now that our <a id="id308" class="indexterm"></a>main menu appears smoothly, let's make sure it disappears smoothly before it exits the game.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec49"></a>UIPlay Tween</h3></div></div></div><p>In order to <a id="id309" class="indexterm"></a>make this window scale down, we can simply request the tween to play in reverse. That's where the <code class="literal">UIPlay Tween</code> component <a id="id310" class="indexterm"></a>comes in: it lets us play any other tween in the scene on a specified event, with different behaviors.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec23"></a>Usage</h4></div></div></div><p>Add the <code class="literal">UIPlay Tween </code>
<a id="id311" class="indexterm"></a>component to our <code class="literal">Exit</code> button:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>In Hierarchy, select our <code class="literal">Button </code>| <code class="literal">Exit</code> GameObject.</p></li><li><p>Click on the <span class="strong"><strong>Add Component</strong></span> button.</p></li><li><p>Type <code class="literal">play</code> with your keyboard to search for components with that word.</p></li><li><p>Select <span class="strong"><strong>Play Tween</strong></span>
<code class="literal"> </code>and hit <span class="emphasis"><em>Enter</em></span> or click on it with the mouse.</p></li></ol></div><p>Ok, we just added the <code class="literal">UIPlay Tween</code> component to our exit button. Let's see what its parameters are before we configure it.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec24"></a>Parameters</h4></div></div></div><p>Now added to <a id="id312" class="indexterm"></a>our exit button, the <span class="strong"><strong>UIPlay Tween </strong></span>component has nine parameters, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783552979/graphics/2979OT_03_04.jpg" /></div><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>
<span class="strong"><strong>Tween Target</strong></span>: Drag <a id="id313" class="indexterm"></a>here the GameObject on which your tween component is attached.</p></li><li><p>
<span class="strong"><strong>Include Children</strong></span>: If <a id="id314" class="indexterm"></a>checked, the <code class="literal">Play Tween</code> will search for tween components in the <span class="strong"><strong>Tween Target</strong></span> children and play them too.</p></li><li><p>
<span class="strong"><strong>Tween Group</strong></span>: Specify <a id="id315" class="indexterm"></a>which tween group you want to play on the target. All tween components with this group ID found on the target will be played.</p></li><li><p>
<span class="strong"><strong>Trigger condition</strong></span>: Here, you <a id="id316" class="indexterm"></a>can choose on which condition you want to play the target's tween.</p></li><li><p>
<span class="strong"><strong>Play direction</strong></span>: Select <a id="id317" class="indexterm"></a>one of these three play direction behaviors:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<code class="literal">Toggle</code>: Tween is played in the opposite direction each time</p></li><li style="list-style-type: disc"><p>
<code class="literal">Forward</code>: The tween will only play in a forward direction</p></li><li style="list-style-type: disc"><p>
<code class="literal">Reverse</code>: The tween will only be played in reverse</p></li></ul></div></li><li><p>
<span class="strong"><strong>If target is disabled</strong></span>: Choose <a id="id318" class="indexterm"></a>what to do if the <span class="strong"><strong>Tween Target </strong></span>(<span class="strong"><strong>1</strong></span>) is disabled:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<code class="literal">Do Nothing</code>: If the target is disabled, no tween will be played</p></li><li style="list-style-type: disc"><p>
<code class="literal">Enable Then Play</code>: If the target is disabled, it will be enabled before the tween is played</p></li><li style="list-style-type: disc"><p>
<code class="literal">Ignore Disabled State</code>: If the target is disabled, the tween will still be <a id="id319" class="indexterm"></a>played even though the target will remain invisible</p></li></ul></div></li><li><p>
<span class="strong"><strong>On activation</strong></span>: This <a id="id320" class="indexterm"></a>is the behavior if the tween is already playing on target:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<code class="literal">Continue From Current</code>: Continue playing the current tween</p></li><li style="list-style-type: disc"><p>
<code class="literal">Restart Tween</code>: Interrupt current tween and restart it now</p></li><li style="list-style-type: disc"><p>
<code class="literal">Restart</code> <code class="literal">If</code> <code class="literal">Not</code> <code class="literal">Playing</code>: Restart the tween only if it's not playing</p></li></ul></div></li><li><p>
<span class="strong"><strong>When finished</strong></span>: Choose <a id="id321" class="indexterm"></a>a behavior for when the tween is finished:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<code class="literal">Do Not Disable</code>: When the tween is finished, nothing happens</p></li><li style="list-style-type: disc"><p>
<code class="literal">Disable After Forward</code>: Disable the target at the end of the tween when played in a forward direction</p></li><li style="list-style-type: disc"><p>
<code class="literal">Disable After Reverse</code>: Disable the target when the tween ends when played in reverse</p></li></ul></div></li><li><p>
<span class="strong"><strong>On Finished</strong></span>: Choose <a id="id322" class="indexterm"></a>here which method to call when the tween is finished.</p></li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note25"></a>Note</h3><p>
<code class="literal">Tween Scale</code> is played as soon as it's enabled. If you disable it in the editor and enable it during runtime (through code or Inspector), it will play instantly.</p></div><p>Now, we can <a id="id323" class="indexterm"></a>configure it to request the main menu window to play <code class="literal">Tween Scale</code> in the reverse direction to make it disappear on click.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec25"></a>Configuration</h4></div></div></div><p>Set <a id="id324" class="indexterm"></a>our <code class="literal">Exit</code> GameObject's <span class="strong"><strong>UIPlay Tween</strong></span> parameters as follows:</p><div class="mediaobject"><img src="/graphics/9781783552979/graphics/2979OT_03_05.jpg" /></div><p>We can see that our <span class="strong"><strong>UIPlay Tween</strong></span> on our <code class="literal">Exit</code> button requests our <span class="strong"><strong>Main</strong></span> GameObject to play in <span class="strong"><strong>Reverse</strong></span> its attached tweens of group 0. Also, the target (<span class="strong"><strong>Main</strong></span>), will be disabled automatically when the tween finishes.</p><p>Hit Unity's <a id="id325" class="indexterm"></a>
<span class="strong"><strong>play</strong></span> button. Now, our main menu window scales down from {1, 1, 1} to {0, 0, 0} when the <code class="literal">Exit</code> button is clicked!</p><p>OK. Now, let's make sure we quit the game when the tween is finished.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec50"></a>Game exit</h3></div></div></div><p>For the game to <a id="id326" class="indexterm"></a>exit, we will create a new <span class="strong"><strong>C# script</strong></span> called <code class="literal">MenuManager.cs</code> in which an <code class="literal">Exit()</code> function will be added. This new <code class="literal">Exit()</code> method will be called at the <a id="id327" class="indexterm"></a>end of the tween we just created.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec26"></a>MenuManager Script</h4></div></div></div><p>Let's start <a id="id328" class="indexterm"></a>by creating a new <code class="literal">MenuManager.cs</code> script that <a id="id329" class="indexterm"></a>will hold useful methods:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select our <code class="literal">UI Root</code> GameObject.</p></li><li><p>In the Hierarchy view, click the <span class="strong"><strong>Add Component</strong></span> button.</p></li><li><p>Type <code class="literal">MenuManager</code> on your keyboard. No match will be found.</p></li><li><p>With the <span class="strong"><strong>New Script</strong></span> option selected, hit <span class="emphasis"><em>Enter</em></span> on your keyboard.</p></li><li><p>In the next dialog box, make sure <span class="strong"><strong>Language</strong></span> is in <span class="strong"><strong>CSharp</strong></span> and hit <span class="emphasis"><em>Enter</em></span>.</p></li></ol></div><p>OK, now open our new <code class="literal">MenuManager.cs</code> script, and add this new <code class="literal">Exit()</code> method:</p><div class="informalexample"><pre class="programlisting">// Method called when we want to exit
public void Exit ()
{
  // If currently in Unity Editor
  #if UNITY_EDITOR
  // Stop play mode
<span class="strong"><strong>  UnityEditor.EditorApplication.isPlaying = false;</strong></span>
  #endif
  // Exit the game
  Application.Quit();
}</pre></div><p>This <code class="literal">Exit()</code>
<a id="id330" class="indexterm"></a>method exits the game on its last line. The fourth—highlighted—line of code is only executed in Unity Editor. It makes sure the <a id="id331" class="indexterm"></a>editor stops playing so that we still have feedback without having to build to check if the <code class="literal">Exit()</code> method works.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec27"></a>Linking the tween to Exit()</h4></div></div></div><p>Now that <a id="id332" class="indexterm"></a>we have our <code class="literal">Exit()</code> function, let's link it <a id="id333" class="indexterm"></a>to the tween's <code class="literal">OnFinished</code> event:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select our <code class="literal">Exit</code> button.</p></li><li><p>Drag our <code class="literal">UI Root</code> GameObject in the <span class="strong"><strong>OnFinished</strong></span> event's <span class="strong"><strong>Notify</strong></span> field.</p></li></ol></div><p>Now that we <a id="id334" class="indexterm"></a>have dragged a GameObject in the <span class="strong"><strong>Notify</strong></span> field, we can select which method to assign within its attached components. Select the <span class="strong"><strong>Exit</strong></span> method of <span class="strong"><strong>MenuManager</strong></span>:</p><div class="mediaobject"><img src="/graphics/9781783552979/graphics/2979OT_03_06.jpg" /></div><p>Hit Unity's <span class="strong"><strong>play</strong></span> button. As soon as the <code class="literal">Exit</code> button is pressed, the window disappears and the <code class="literal">Exit()</code>
<a id="id335" class="indexterm"></a>method is called at the end of the tween, exiting the <a id="id336" class="indexterm"></a>game or play mode! Now, let's move on to see <a id="id337" class="indexterm"></a>how we can show the options.</p></div></div></div>