<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch06lvl1sec59"></a>The elemental source switch</h2></div></div><hr /></div><p>We would like both our power<a id="id708" class="indexterm"></a> sources to be switchable between these four elements:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Fire</strong></span>
</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Water</strong></span>
</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Ice</strong></span>
</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Lightning</strong></span>
</p></li></ul></div><p>In order to do that, we'll give the player the possibility to display the following selection menu when he or she right-clicks on a power source:</p><div class="mediaobject"><img src="/graphics/9781783552979/graphics/2979OT_06_04.jpg" /></div><p>Before we implement the code to display it, we'll create the necessary buttons.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec113"></a>The elemental switch UI</h3></div></div></div><p>We'll build the <a id="id709" class="indexterm"></a>elemental switch UI as seen in the previous<a id="id710" class="indexterm"></a> screenshot. We first create the <span class="strong"><strong>Fire</strong></span> elemental button and make it a prefab in order to create the other three other buttons.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch06lvl3sec69"></a>The Fire button</h4></div></div></div><p>Let's start by creating<a id="id711" class="indexterm"></a> the <span class="strong"><strong>Fire</strong></span> elemental button:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select our<a id="id712" class="indexterm"></a> <code class="literal">InGame2DUI</code> GameObject.</p></li><li><p>Create a new empty GameObject with <span class="emphasis"><em>Alt + Shift + N</em></span>.</p></li><li><p>Rename it to <code class="literal">ElementSwitch</code>.</p></li><li><p>In the <span class="strong"><strong>Project</strong></span> view, type in <code class="literal">button</code> in the search box.</p></li><li><p>Drag the <code class="literal">Control â€“ Simple Button</code> prefab into our new <code class="literal">ElementSwitch</code> GameObject.</p></li><li><p>Rename our new button to <code class="literal">ElementalButton</code>.</p></li><li><p>Reset the <span class="strong"><strong>Transform</strong></span> position to {<code class="literal">0</code>,<code class="literal">0</code>,<code class="literal">0</code>}.</p></li></ol></div><p>OK, let's select and configure this button to be an elemental button:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>For its attached <code class="literal">UISprite</code> component:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Change <span class="strong"><strong>Atlas</strong></span> to the <span class="strong"><strong>Game</strong></span> atlas</p></li><li style="list-style-type: disc"><p>Change <span class="strong"><strong>Sprite</strong></span> to the <span class="strong"><strong>Background_Button</strong></span> sprite</p></li><li style="list-style-type: disc"><p>Make sure <span class="strong"><strong>Type</strong></span> is set to <span class="strong"><strong>Sliced</strong></span>
</p></li><li style="list-style-type: disc"><p>Set <span class="strong"><strong>Color Tint</strong></span> {R: <code class="literal">255</code>, G: <code class="literal">180</code>, B: <code class="literal">100</code>, A: <code class="literal">255</code>}</p></li><li style="list-style-type: disc"><p>Set <span class="strong"><strong>Size</strong></span> to <code class="literal">300 x 110</code>
</p></li></ul></div></li><li><p>Now, we can configure its attached <code class="literal">UIButton</code> component, as follows:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Set its <span class="strong"><strong>Hover</strong></span> color to {R: <code class="literal">255</code>, G: <code class="literal">200</code>, B: <code class="literal">150</code>, A: <code class="literal">255</code>}.</p></li><li style="list-style-type: disc"><p>Set its <span class="strong"><strong>Pressed</strong></span> color to {R: <code class="literal">50</code>, G: <code class="literal">50</code>, B: <code class="literal">50</code>, A: <code class="literal">255</code>}.</p></li><li style="list-style-type: disc"><p>Set its <span class="strong"><strong>Disabled</strong></span> color to {R: <code class="literal">80</code>, G: <code class="literal">80</code>, B: <code class="literal">80</code>, A: <code class="literal">140</code>}.</p></li></ul></div></li></ol></div><p>In order to make the hover effect more obvious, we'll add the <code class="literal">UIButton Scale</code> component to it:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select <code class="literal">InGame2DUI</code> | <code class="literal">ElementalSwitch</code> | <code class="literal">ElementalButton</code>.</p></li><li><p>Click on the <span class="strong"><strong>Add Component</strong></span> button in the <span class="strong"><strong>Inspector</strong></span> view.</p></li><li><p>Type in <code class="literal">scale</code> with your keyboard.</p></li><li><p>Select <span class="strong"><strong>Button Scale</strong></span> and hit <span class="emphasis"><em>Enter</em></span> or click on it with your mouse.</p></li></ol></div><p>Great. Now, let's change the button's label to be more visible:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select <code class="literal">InGame2DUI</code> | <code class="literal">ElementalSwitch</code> | <code class="literal">ElementalButton</code> | <code class="literal">Label</code>.</p></li><li><p>Set its font type to <span class="strong"><strong>NGUI</strong></span> (bitmap) and not <span class="strong"><strong>Unity</strong></span> (dynamic).</p></li><li><p>Change <span class="strong"><strong>Font</strong></span> to the <span class="strong"><strong>Lato</strong></span> font.</p></li><li><p>Set <span class="strong"><strong>Font Size</strong></span> to 50.</p></li><li><p>Change <span class="strong"><strong>Text</strong></span> to <code class="literal">Fire</code>.</p></li><li><p>Set <span class="strong"><strong>Effect</strong></span> to <span class="strong"><strong>Shadow</strong></span> with <span class="strong"><strong>X</strong></span> and <span class="strong"><strong>Y</strong></span> values of 2.</p></li><li><p>Set <span class="strong"><strong>Color Tint</strong></span> of the label to {R: 255, G: 220, B: 160, A: 255}.</p></li></ol></div><p>Great. Now that we<a id="id713" class="indexterm"></a> have our elemental button, we can make it a prefab:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Drag <code class="literal">ElementalSwitch</code> | <code class="literal">ElementalButton</code> into our project view's <code class="literal">Assets/Resources/Prefabs</code> folder.</p></li><li><p>Rename <code class="literal">InGame2DUI</code> | <code class="literal">ElementalSwitch</code> | <code class="literal">ElementalButton</code> to <code class="literal">Fire</code>.</p></li></ol></div><p>We can now create the other three elemental buttons.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch06lvl3sec70"></a>The remaining elemental buttons</h4></div></div></div><p>Now that we have <a id="id714" class="indexterm"></a>our first <span class="strong"><strong>Fire</strong></span> button based on the <code class="literal">ElementalButton</code> prefab, we can create our other three elemental buttons: ice, lightning, and water.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="ch06lvl4sec13"></a>The Ice button</h5></div></div></div><p>Follow these<a id="id715" class="indexterm"></a> steps to create<a id="id716" class="indexterm"></a> the <span class="strong"><strong>Ice</strong></span> elemental button:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select <code class="literal">InGame2DUI</code> | <code class="literal">ElementalSwitch</code> | <code class="literal">Fire</code>.</p></li><li><p>Duplicate it with <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>D</em></span>.</p></li><li><p>Rename the new duplicate to <code class="literal">Ice</code>.</p></li><li><p>Set the <span class="strong"><strong>Transform</strong></span> position to {<code class="literal">0</code>, <code class="literal">-260</code>, <code class="literal">0</code>}.</p></li><li><p>For its attached <code class="literal">UIButton</code> component:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Set its <span class="strong"><strong>Normal</strong></span> color to {R: <code class="literal">170</code>, G: <code class="literal">255</code>, B: <code class="literal">250</code>, A: <code class="literal">255</code>}.</p></li><li style="list-style-type: disc"><p>Set its <span class="strong"><strong>Hover</strong></span> color to {R: <code class="literal">255</code>, G: <code class="literal">255</code>, B: <code class="literal">255</code>, A: <code class="literal">255</code>}.</p></li></ul></div></li><li><p>Select its child <code class="literal">Label</code> GameObject. For its <code class="literal">UILabel</code> component:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Change <span class="strong"><strong>Text</strong></span> to <code class="literal">Ice</code>.</p></li><li style="list-style-type: disc"><p>Set <span class="strong"><strong>Color Tint</strong></span> to {R: <code class="literal">190</code>, G: <code class="literal">255</code>, B: <code class="literal">255</code>, A: <code class="literal">255</code>}.</p></li></ul></div></li></ol></div><p>OK, good. Now that <a id="id717" class="indexterm"></a>we have our <code class="literal">Ice</code> button, we can move on to the <span class="strong"><strong>Lightning</strong></span> button.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="ch06lvl4sec14"></a>The Lightning button</h5></div></div></div><p>Follow these steps<a id="id718" class="indexterm"></a> to create the <span class="strong"><strong>Lightning</strong></span> elemental button:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select<a id="id719" class="indexterm"></a> our <code class="literal">InGame2DUI</code> | <code class="literal">ElementalSwitch</code> | <code class="literal">Ice</code> GameObject.</p></li><li><p>Duplicate it with <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>D</em></span>.</p></li><li><p>Rename the new duplicate GameObject to <code class="literal">Lightning</code>.</p></li><li><p>Set the <span class="strong"><strong>Transform</strong></span> position to {<code class="literal">-180</code>, <code class="literal">-130</code>, <code class="literal">0</code>}.</p></li><li><p>For its attached <code class="literal">UIButton</code> component:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Set its <span class="strong"><strong>Normal</strong></span> color to {R: <code class="literal">110</code>, G: <code class="literal">255</code>, B: <code class="literal">255</code>, A: <code class="literal">255</code>}.</p></li><li style="list-style-type: disc"><p>Set its <span class="strong"><strong>Hover</strong></span> color to {R: <code class="literal">0</code>, G: <code class="literal">255</code>, B: <code class="literal">255</code>, A: <code class="literal">255</code>}.</p></li></ul></div></li><li><p>Select its child <code class="literal">Label</code> GameObject. For its <code class="literal">UILabel</code> component:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Change <span class="strong"><strong>Text</strong></span> to <code class="literal">Lightning</code>.</p></li><li style="list-style-type: disc"><p>Set <span class="strong"><strong>Color Tint</strong></span> of the label to {R: <code class="literal">255</code>, G: <code class="literal">255</code>, B: <code class="literal">255</code>, A: <code class="literal">255</code>}.</p></li></ul></div></li></ol></div><p>OK, that's it for the <span class="strong"><strong>Lightning</strong></span> button. Let's work on the last <span class="strong"><strong>Water</strong></span> button.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="ch06lvl4sec15"></a>The Water button</h5></div></div></div><p>Follow these steps to<a id="id720" class="indexterm"></a> create the <span class="strong"><strong>Water</strong></span> elemental <a id="id721" class="indexterm"></a>button:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select our <code class="literal">InGame2DUI</code> | <code class="literal">ElementalSwitch</code> | <code class="literal">Lightning</code> GameObject.</p></li><li><p>Duplicate it with <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>D</em></span>.</p></li><li><p>Rename the new duplicate to <code class="literal">Water</code>.</p></li><li><p>Set the <span class="strong"><strong>Transform</strong></span> position to {<code class="literal">180</code>, <code class="literal">-130</code>, <code class="literal">0</code>}.</p></li><li><p>For its <code class="literal">UIButton</code> component:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Set its <span class="strong"><strong>Normal</strong></span> color to {R: <code class="literal">90</code>, G: <code class="literal">130</code>, B: <code class="literal">255</code>, A: <code class="literal">255</code>}.</p></li><li style="list-style-type: disc"><p>Set its <span class="strong"><strong>Hover</strong></span> color to {R: <code class="literal">0</code>, G: <code class="literal">90</code>, B: <code class="literal">255</code>, A: <code class="literal">255</code>}.</p></li></ul></div></li><li><p>Select its child <code class="literal">Label</code> GameObject. For its <code class="literal">UILabel</code> component:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Change <span class="strong"><strong>Text</strong></span> to <code class="literal">Water</code>.</p></li><li style="list-style-type: disc"><p>Set <span class="strong"><strong>Color Tint</strong></span> of the label to {R: <code class="literal">200</code>, G: <code class="literal">235</code>, B: <code class="literal">255</code>, A: <code class="literal">255</code>}.</p></li></ul></div></li></ol></div><p>OK, we've finished creating the four elemental buttons. Now, let's make sure it will be able to follow the power source the player has clicked on.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch06lvl3sec71"></a>The FollowObject component</h4></div></div></div><p>When the player <a id="id722" class="indexterm"></a>right-clicks on a power source, our elemental switch UI will appear above it. We'll use the <code class="literal">FollowObject</code> component to achieve<a id="id723" class="indexterm"></a> this:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select our <code class="literal">InGame2DUI</code> | <code class="literal">ElementalSwitch</code> GameObject.</p></li><li><p>Click on the <span class="strong"><strong>Add Component</strong></span> button in the Inspector view.</p></li><li><p>Type in <code class="literal">fol</code> with your keyboard.</p></li><li><p>Select <span class="strong"><strong>Follow Object</strong></span> and hit <span class="emphasis"><em>Enter</em></span> or click on it with your mouse.</p></li></ol></div><p>Good. Let's configure it to have the correct cameras and offset value:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Set the <span class="strong"><strong>Offset</strong></span> vector to {<code class="literal">0</code>, <code class="literal">0.25</code>, <code class="literal">0</code>}.</p></li><li><p>Drag <code class="literal">GameCamera</code> into the <span class="strong"><strong>Main Camera</strong></span> field.</p></li><li><p>Drag <code class="literal">InGame2DUI</code> | <code class="literal">Camera</code> into the <span class="strong"><strong>UI Camera</strong></span> field.</p></li></ol></div><p>OK, now that we have our elemental switch UI configured with a <code class="literal">FollowObject</code> component, we can see how to request it to be displayed over the right-clicked power source.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec114"></a>The GameManager component</h3></div></div></div><p>We'll use the existing <code class="literal">GameManager.cs</code> singleton script to handle the global game behavior, which is like<a id="id724" class="indexterm"></a> displaying our <a id="id725" class="indexterm"></a>elemental switch UI:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>In the hierarchy view, select the <code class="literal">GameManager</code> GameObject.</p></li><li><p>Right-click on <span class="strong"><strong>Edit Script</strong></span> on its attached <span class="strong"><strong>GameManager</strong></span> component.</p></li></ol></div><p>Within the opened <code class="literal">GameManager.cs</code> script, declare the following public variable to store our elemental switch UI elements:</p><div class="informalexample"><pre class="programlisting">// We'll need our elemental switch UI stored here
<span class="strong"><strong>public GameObject elementalSwitchUI;</strong></span>
// We'll need its attached FollowObject
<span class="strong"><strong>private FollowObject elementalFollowObject;</strong></span>
// Declare the UIButton array
<span class="strong"><strong>UIButton[] allButtons;</strong></span>
</pre></div><p>Save the script and return to Unity; we'll assign <code class="literal">elementalSwitchUI</code> now:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select our <code class="literal">GameManager</code> GameObject.</p></li><li><p>Drag <code class="literal">InGame2DUI</code> | <code class="literal">ElementalSwitch</code> into the <span class="strong"><strong>Elemental Switch UI</strong></span> field.</p></li></ol></div><p>OK, now let's go back to our <code class="literal">GameManager.cs</code> script and add this <code class="literal">Sta</code>
<code class="literal">rt()</code> method:</p><div class="informalexample"><pre class="programlisting">// At Start
<span class="strong"><strong>void Start () {</strong></span>
  // Retrieve the elemental switch UI's FolloObject
<span class="strong"><strong>  elementalFollowObject =</strong></span>
<span class="strong"><strong>        elementalSwitchUI.GetComponent&lt;FollowObject&gt;();</strong></span>
  // Hide elemental switch UI
<span class="strong"><strong>  elementalSwitchUI.SetActive(false);</strong></span>
       // Retrieve all elemental buttons
<span class="strong"><strong>   allButtons =</strong></span>
<span class="strong"><strong>    elementalSwitchUI.GetComponentsInChildren&lt;UIButton&gt;(true);</strong></span>
}</pre></div><p>In the preceding code, we retrieve the <code class="literal">FollowObject</code> component of <code class="literal">elementalSwichUI</code>, and then<a id="id726" class="indexterm"></a> hide it. Finally, we retrieve all buttons using the<a id="id727" class="indexterm"></a> <code class="literal">GetComponentsInChildren()</code> method. The <code class="literal">true</code> parameter is set to make sure it still retrieves them even if the buttons are disabled in the hierarchy.</p><p>Now that everything is initialized correctly, let's add this new <code class="literal">ShowElementalSwitch()</code> method to display or hide the elemental switch:</p><div class="informalexample"><pre class="programlisting">// Show or hide elemental switch UI
<span class="strong"><strong>public void ShowElementalSwitch(Transform targetObject)</strong></span>
{
  // If the target object to follow isn't null 
<span class="strong"><strong>  if(targetObject != null)</strong></span>
  {
    // Enable the elemental switch UI
<span class="strong"><strong>    elementalSwitchUI.SetActive(true);</strong></span>
    // Make sure it follows the target
<span class="strong"><strong>    elementalFollowObject.target = targetObject;</strong></span>
    // Set its scale to {0,0,0}
<span class="strong"><strong>    elementalSwitchUI.transform.localScale =</strong></span>
<span class="strong"><strong>           new Vector3(0.01f, 0.01f, 0.01f);</strong></span>
    // Start a scale tween on it
<span class="strong"><strong>    TweenScale.Begin(elementalSwitchUI, 0.2f, Vector3.one);</strong></span>
  }
  // If the target object is null
  else
  {
    // Disable the elemental switch UI
<span class="strong"><strong>    elementalSwitchUI.SetActive (false);</strong></span>
  }
}</pre></div><p>With the preceding method, we can request to display the elemental switch UI, which will follow the <code class="literal">target</code> transform passed as argument. If <code class="literal">target</code> is <code class="literal">null</code>, the method will hide the elemental switch UI.</p><p>OK, we're ready to request<a id="id728" class="indexterm"></a> the elemental switch UI to display on right-click. Let's do it by editing the existing <code class="literal">PowerSource.cs</code> script attached to the <code class="literal">PowerSource</code> prefab.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec115"></a>The PowerSource component</h3></div></div></div><p>We'll now edit the <code class="literal">PowerSource</code>.<code class="literal">cs</code> script of our <code class="literal">PowerSource</code> prefab to make it request the elemental<a id="id729" class="indexterm"></a> switch UI to display when a <a id="id730" class="indexterm"></a>right-click is triggered on it:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>In the <span class="strong"><strong>Project</strong></span> view, select the <code class="literal">Assets/Resources/PowerSource</code> prefab.</p></li><li><p>Right-click and select <span class="strong"><strong>Edit Script</strong></span> on the <span class="strong"><strong>PowerSource</strong></span> component in the <span class="strong"><strong>Inspector</strong></span> view.</p></li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note38"></a>Note</h3><p>You might notice that this script already has basic code to handle a few variables and methods that are not linked to the NGUI subject. They are not detailed here but commented so that you can understand them if you wish.</p></div><p>Let's add this <code class="literal">OnPress()</code> method to display the elemental switch menu:</p><div class="informalexample"><pre class="programlisting">// If the power source triggers the OnPress event
<span class="strong"><strong>void OnPress(bool pressed)</strong></span>
{
  // If the power source is pressed
<span class="strong"><strong>  if(pressed)</strong></span>
  {
    // If it's a left click
<span class="strong"><strong>    if(UICamera.currentTouchID == -1)</strong></span>
    {
      // If elemental switch UI is displayed over this
<span class="strong"><strong>   if(GameManager.Instance.GetElementalSwitchUITarget() == transform)</strong></span>
{
        // Request to hide the elemental switch UI
<span class="strong"><strong>        GameManager.Instance.ShowElementalSwitch(</strong></span>
<span class="strong"><strong>                         null);</strong></span>
}
// Make sure the object is draggable
<span class="strong"><strong>            dragObject.dragMovement = new Vector3(1,0,1);</strong></span>
    }
    // If it's a right click and power source is available
<span class="strong"><strong>    else if(UICamera.currentTouchID == -2 &amp;&amp; available)</strong></span>
    {
      // Request to display the elemental switch
    <span class="strong"><strong>  GameManager.Instance.ShowElementalSwitch(transform);</strong></span>
       // Make sure the object isn't draggable
<span class="strong"><strong>       dragObject.dragMovement = Vector3.zero;</strong></span>
    }
  }
} </pre></div><p>In the preceding code, we used <code class="literal">UICamera.currentTouchID</code> to check whether the click was a right-button one. In that case, we display the elemental switch UI and set <code class="literal">dragMovement</code> to zero to<a id="id731" class="indexterm"></a> make sure it is not draggable with a right-click.</p><p>Otherwise, we request to hide it and make sure it's draggable again. We also check whether the power source is <code class="literal">available</code> before we display the elemental switch UI; available means that it is not already changing its elemental type.</p><p>Now, let's make sure the elemental switch menu is hidden as soon as the player right-clicks any object that isn't a power source. Let's create a new component for that.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec116"></a>Hiding the elemental switch UI</h3></div></div></div><p>Let's make sure the elemental switch UI is hidden upon a right-click on other objects, such as the ground <a id="id732" class="indexterm"></a>or power feed. We'll create a new <code class="literal">DisableOnClick</code> component for this:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>In the <span class="strong"><strong>Project</strong></span> view, select the <code class="literal">Assets/Resources/Ground</code> prefab.</p></li><li><p>Click on the <span class="strong"><strong>Add Component</strong></span> button in the Inspector view.</p></li><li><p>Type in <code class="literal">DisableOnClick</code> with your keyboard and hit <span class="emphasis"><em>Enter</em></span>.</p></li><li><p>Make sure <span class="strong"><strong>Language</strong></span> is set to <span class="strong"><strong>CSharp</strong></span>, and hit <span class="emphasis"><em>Enter </em></span>again.</p></li><li><p>Open the newly added <code class="literal">DisableOnClick.cs</code> script.</p></li></ol></div><p>Within this new <code class="literal">DisableOnClick.cs</code> script, add these necessary variable declarations:</p><div class="informalexample"><pre class="programlisting">// The target to disable
<span class="strong"><strong>public GameObject target;</strong></span>
// Either on left click or right click
<span class="strong"><strong>public bool leftClick;</strong></span>
</pre></div><p>Save the script and<a id="id733" class="indexterm"></a> return to Unity; we'll configure the <code class="literal">target</code> variable now:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>In the hierarchy, select our <code class="literal">Ground</code> GameObject.</p></li><li><p>Drag our <code class="literal">InGame2DUI</code> | <code class="literal">ElementSwitch</code> into the <span class="strong"><strong>Target</strong></span> field.</p></li></ol></div><p>OK, good. We can now go back to our <code class="literal">DisableOnClick.cs</code> script and add this new <code class="literal">OnPress()</code> method to disable the target when the required click occurs:</p><div class="informalexample"><pre class="programlisting">// When an OnPress event occurs
<span class="strong"><strong>public void OnPress(bool pressed)</strong></span>
{
  // If it's a press
<span class="strong"><strong>  if(pressed)</strong></span>
  {
    // Get the touch ID
<span class="strong"><strong>    int touchID = UICamera.currentTouchID;</strong></span>

    // If the touch ID matches the configuration
<span class="strong"><strong>    if((touchID == -1 &amp;&amp; leftClick) ||</strong></span>
<span class="strong"><strong>           (touchID == -2 &amp;&amp; !leftClick))</strong></span>
    {
      // Disable the target
<span class="strong"><strong>      target.SetActive(false);</strong></span>
    }
  }
}</pre></div><p>Save the script and go back to Unity. Let's copy this component to the power feeds to make sure right-clicking on them will also hide our elemental switch UI:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>In the hierarchy, select our <code class="literal">Ground</code> GameObject.</p></li><li><p>Right-click on the <span class="strong"><strong>Disable On Click</strong></span> component's name and then select <span class="strong"><strong>Copy Component</strong></span>.</p></li><li><p>In the <span class="strong"><strong>Project</strong></span> view, select <code class="literal">Assets/Resources/Prefabs/PowerFeed</code>.</p></li><li><p>In the <span class="strong"><strong>Inspector</strong></span> view, right-click on any existing component's name.</p></li><li><p>Select the <span class="strong"><strong>Paste Component As New</strong></span> option.</p></li><li><p>In the hierarchy view, select both <code class="literal">PowerFeeds</code>: <code class="literal">Feed1</code> and <code class="literal">Feed2</code>.</p></li><li><p>Drag our <code class="literal">InGame2DUI</code> | <code class="literal">ElementSwitch</code> GameObject into their <span class="strong"><strong>Target</strong></span> fields.</p></li></ol></div><p>OK. Now, hit Unity's play button. You can see that the elemental switch UI now displays gradually when a right-click <a id="id734" class="indexterm"></a>occurs on a power source and disappears when the power source is dragged or when the player right-clicks anywhere else.</p></div></div>