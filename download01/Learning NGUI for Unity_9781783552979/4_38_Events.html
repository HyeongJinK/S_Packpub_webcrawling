<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec41"></a>Events</h2></div></div><hr /></div><p>When scripting<a id="id458" class="indexterm"></a> in C# with the NGUI plugin, some methods will often be used. For example, you will regularly need to know if an object is currently <a id="id459" class="indexterm"></a>hovered upon, pressed, or clicked. Of course, you could code your own system—but NGUI handles that very well, and it's important to use it at its full potential in order to gain development time.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec77"></a>Available methods</h3></div></div></div><p>When you create and attach<a id="id460" class="indexterm"></a> a script to an object that has a collider on it (for example, a button or a 3D object), you can add the following useful methods within the script to catch events:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<code class="literal">OnHover(bool state)</code>: This method is called when the object is hovered or unhovered. The <code class="literal">state</code> bool gives the hover state; if <code class="literal">state</code> is <code class="literal">true</code>, the cursor just<a id="id461" class="indexterm"></a> entered the object's collider. If <code class="literal">state</code> is <code class="literal">false</code>, the cursor has just left the collider's<a id="id462" class="indexterm"></a> bounds.</p></li><li style="list-style-type: disc"><p>
<code class="literal">OnPress(bool state)</code>: This method works in the exact same way as the previous <code class="literal">OnHover()</code> method, except it is called when the object is pressed. It also works for touch-enabled <a id="id463" class="indexterm"></a>devices. If you need to know which mouse button was <a id="id464" class="indexterm"></a>used to press the object, use the <code class="literal">UICamera.currentTouchID</code> variable; if this <code class="literal">int</code> is equal to <code class="literal">-1</code>, it's a left-click. If it's equal to <code class="literal">-2</code>, it's a right-click. Finally, if it's equal to <code class="literal">-3</code>, it's a middle-click.</p></li><li style="list-style-type: disc"><p>
<code class="literal">OnClick()</code>: This method is <a id="id465" class="indexterm"></a>similar to <code class="literal">OnPress()</code>, except that this method is exclusively called when<a id="id466" class="indexterm"></a> the click is validated, meaning when an <code class="literal">OnPress(true)</code> event occurs followed by an <code class="literal">OnPress(false)</code> event. It works with mouse click and touch (tap).</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note27"></a>Note</h3><p>In order to handle double clicks, you can also <a id="id467" class="indexterm"></a>use the <code class="literal">OnDoubleClick()</code> method, which works in the same way.</p></div></li><li style="list-style-type: disc"><p>
<code class="literal">OnDrag(Vector2 delta)</code>: This method is called at each frame when the mouse or touch moves between<a id="id468" class="indexterm"></a> the <code class="literal">OnPress(true)</code> and <code class="literal">OnPress(false)</code> events. The <a id="id469" class="indexterm"></a>
<code class="literal">Vector2</code> <code class="literal">delta</code> argument gives you the object's movement since the last frame.</p></li><li style="list-style-type: disc"><p>
<code class="literal">OnDrop(GameObject droppedObj)</code>: This method is called when an object is dropped on<a id="id470" class="indexterm"></a> the GameObject on which this <a id="id471" class="indexterm"></a>script is attached. The dropped GameObject is passed as the <code class="literal">droppedObj</code> parameter.</p></li><li style="list-style-type: disc"><p>
<code class="literal">OnSelect()</code>: This method is<a id="id472" class="indexterm"></a> called <a id="id473" class="indexterm"></a>when the user clicks on the object. It will not be called again until another object is clicked on or the object is deselected (click on empty space).</p></li><li style="list-style-type: disc"><p>
<code class="literal">OnTooltip(bool state)</code>: This method is called when the cursor is over the object for more than the duration defined by the <span class="strong"><strong>Tooltip Delay</strong></span> inspector parameter of <code class="literal">UICamera</code>. If the <span class="strong"><strong>Sticky Tooltip</strong></span> option of <code class="literal">UICamera</code> is checked, the tooltip<a id="id474" class="indexterm"></a> remains visible until the cursor moves outside<a id="id475" class="indexterm"></a> the collider; otherwise, it disappears as soon as the cursor moves.</p></li><li style="list-style-type: disc"><p>
<code class="literal">OnScroll(float delta)</code>: This method is called when the mouse's scroll wheel is moved while the<a id="id476" class="indexterm"></a> object is hovered—the delta parameter gives you the <a id="id477" class="indexterm"></a>amount and direction of the scroll.</p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note28"></a>Note</h3><p>If you attach your script on a 3D object to catch these events, make sure it is on a layer included in <code class="literal">Event Mask</code> of <code class="literal">UICamera</code>.</p></div><p>Now that we've seen the available event methods, let's see how they are used in a simple example.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec78"></a>Example</h3></div></div></div><p>To illustrate when these <a id="id478" class="indexterm"></a>events occur and how to catch them, you can create a new <code class="literal">EventTester.cs</code> script with the following code:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>void OnHover(bool state)</strong></span>
{
  Debug.Log(this.name + " Hover: " + state);
}

<span class="strong"><strong>void OnPress(bool state)</strong></span>
{
  Debug.Log(this.name + " Pressed: " + state);
}

<span class="strong"><strong>void OnClick()</strong></span>
{
  Debug.Log(this.name + " Clicked");
}

<span class="strong"><strong>void OnDrag(Vector2 delta)</strong></span>
{
  Debug.Log(this.name + " Drag: " + delta);
}

<span class="strong"><strong>void OnDrop(GameObject droppedObject)</strong></span>
{
  Debug.Log(droppedObject.name + " dropped on " + this.name);
}

<span class="strong"><strong>void OnSelect(bool state)</strong></span>
{
  Debug.Log(this.name + " Selected: " + state);
}

<span class="strong"><strong>void OnTooltip(bool state)</strong></span>
{
  Debug.Log("Show " + this.name + "'s Tooltip: " + state);
}

<span class="strong"><strong>void OnScroll(float delta)</strong></span>
{
  Debug.Log("Scroll of " + delta + " on " + this.name);
}</pre></div><p>The above highlighted <a id="id479" class="indexterm"></a>lines are the event methods we discussed, implemented with their respective necessary arguments.</p><p>Attach our <code class="literal">Event Tester</code> component now to any GameObject with a collider, like our <span class="strong"><strong>Main</strong></span> | <span class="strong"><strong>Buttons</strong></span> | <span class="strong"><strong>Play</strong></span> button. Hit Unity's <span class="strong"><strong>play</strong></span> button. From now on, events that occur on the object they're attached to are now tracked in the <span class="strong"><strong>Console</strong></span> output:</p><div class="mediaobject"><img src="/graphics/9781783552979/graphics/2979OT_04_01.jpg" /></div><p>I recommend that you<a id="id480" class="indexterm"></a> keep the <code class="literal">EventTester.cs</code> script in a handy file directory as a reminder for available event methods in the future. Indeed, for each event, you can simply replace the <code class="literal">Debug.Log()</code> lines with the instructions you need.</p><p>Now we know how to catch events through code. Let's use them to display a <span class="strong"><strong>tooltip</strong></span>!</p></div></div>