<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec35"></a>Draggable windows</h2></div></div><hr /></div><p>Dragging elements <a id="id382" class="indexterm"></a>can be very useful and intuitive. That's where the <code class="literal">UIDragObject</code> component comes in handy.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec62"></a>UIDragObject</h3></div></div></div><p>UIDragObject easily makes any <a id="id383" class="indexterm"></a>UI element or other GameObject in the scene draggable with both mouse and touch.</p><p>Just like all NGUI <a id="id384" class="indexterm"></a>interactive components, it requires a collider to detect the mouse or touches. That collider defines the area in which the player must click to start the drag.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec34"></a>Usage</h4></div></div></div><p>Let's add the <a id="id385" class="indexterm"></a>
<code class="literal">UIDragObject</code> and <code class="literal">Box Collider</code> components to our two windows. In Hierarchy, select both our <code class="literal">UI Root</code> | <code class="literal">Main</code> and <code class="literal">Options</code> GameObjects, and then:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Click on the <span class="strong"><strong>Add Component</strong></span> button.</p></li><li><p>Type <code class="literal">object</code> with your keyboard to search for components with that word.</p></li><li><p>Select <span class="strong"><strong>Drag Object</strong></span> and hit <span class="emphasis"><em>Enter</em></span> or click on it with your mouse.</p></li><li><p>Click once again on the <span class="strong"><strong>Add Component</strong></span> button.</p></li><li><p>Type <code class="literal">box</code> with your keyboard to search for components with that word.</p></li><li><p>Select <span class="strong"><strong>Box Collider</strong></span> and hit <span class="emphasis"><em>Enter</em></span> or click on it with your mouse.</p></li></ol></div><p>OK, we've just added the <code class="literal">UIDragObject</code> and <code class="literal">Box Collider</code> components to our main menu and options windows. First, let's configure <code class="literal">Box Collider</code> so that the area initiating the window drag corresponds to the title bar.</p><p>With both <code class="literal">Main</code> and <code class="literal">Options</code> GameObjects selected, set the following parameters:</p><div class="mediaobject"><img src="/graphics/9781783552979/graphics/2979OT_03_12.jpg" /></div><p>OK, the colliders are <a id="id386" class="indexterm"></a>configured to fit the title bar for both windows. Let's see what the <code class="literal">UIDragObject</code> parameters are.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec35"></a>Parameters</h4></div></div></div><p>Now added to our <a id="id387" class="indexterm"></a>windows, the <span class="strong"><strong>UIDrag Object </strong></span>
<a id="id388" class="indexterm"></a>component has six parameters, as follows:</p><div class="mediaobject"><img src="/graphics/9781783552979/graphics/2979OT_03_13.jpg" /></div><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>
<span class="strong"><strong>Target</strong></span>: Drag <a id="id389" class="indexterm"></a>here the target GameObject you want to be dragged.</p></li><li><p>
<span class="strong"><strong>Movement</strong></span>: Drag <a id="id390" class="indexterm"></a>movement factor for each axis. A value of 0 disables movement for the concerned axis.</p></li><li><p>
<span class="strong"><strong>Scroll Wheel</strong></span>: This <a id="id391" class="indexterm"></a>is the movement factor for each axis when the player uses the scroll wheel while the attached collider is hovered.</p></li><li><p>
<span class="strong"><strong>Drag Effect</strong></span>: Choose <a id="id392" class="indexterm"></a>one of these three drag effect behaviors:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<code class="literal">None</code>: No effect, simple, and rough drag.</p></li><li style="list-style-type: disc"><p>
<code class="literal">Momentum</code>: The object is subject to inertia and decelerates smoothly when it's dropped. It cannot go outside its container.</p></li><li style="list-style-type: disc"><p>
<code class="literal">Momentum and Spring</code>: When the window is dropped outside the screen or container it is constrained in, it will return smoothly within its authorized area.</p></li></ul></div></li><li><p>
<span class="strong"><strong>Momentum</strong></span>: This is the <a id="id393" class="indexterm"></a>momentum amount. The higher the momentum, the more inertia it will have.</p></li><li><p>
<span class="strong"><strong>Keep Visible</strong></span>: Check <a id="id394" class="indexterm"></a>this option to limit movement within an area.</p></li><li><p>
<span class="strong"><strong>Content Rect</strong></span>: This <a id="id395" class="indexterm"></a>only appears if <span class="strong"><strong>Keep Visible</strong></span> is checked. Drag here any other UI element that has <code class="literal">Size</code> defined to define the dragged object's bounds. If this parameter is left to <span class="strong"><strong>None (UI Rect)</strong></span>, the dragged object will be constrained to remain onscreen.</p></li><li><p>
<span class="strong"><strong>Panel Region</strong></span>: This only <a id="id396" class="indexterm"></a>appears if <span class="strong"><strong>Keep Visible</strong></span> is checked. Drag here the panel that must act as the container for this draggable element. The corresponding <code class="literal">UIPanel</code> should have clipping enabled or set to <code class="literal">Constrain But Dont Clip</code>.</p></li></ol></div><p>Now, let's configure them to enable drag on both windows.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec36"></a>Configuration</h4></div></div></div><p>Let's configure <a id="id397" class="indexterm"></a>our <code class="literal">UIDrag Object</code> components to enable drag on our windows:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select our <code class="literal">Main</code> GameObject. For its attached <code class="literal">UIDrag Object</code>:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Drag it (the <code class="literal">Main</code> GameObject) inside the <span class="strong"><strong>Target</strong></span> field</p></li><li style="list-style-type: disc"><p>Check the <span class="strong"><strong>Keep Visible</strong></span> option</p></li></ul></div></li><li><p>Select our <code class="literal">Options</code> GameObject. For its attached <code class="literal">UIDrag Object</code>:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Drag it (the <code class="literal">Options</code> GameObject) inside the <span class="strong"><strong>Target</strong></span> field</p></li><li style="list-style-type: disc"><p>Check the <span class="strong"><strong>Keep Visible</strong></span> option</p></li></ul></div></li></ol></div><p>Hit Unity's <a id="id398" class="indexterm"></a>
<span class="strong"><strong>play</strong></span> button. You can now drag both windows by clicking on their title! We have checked <span class="strong"><strong>Keep Visible</strong></span> and left its <span class="strong"><strong>Content Rect</strong></span> to <span class="strong"><strong>None</strong></span>, so when you drop the window out of the screen, it smoothly comes back.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec63"></a>Jumping windows glitch</h3></div></div></div><p>We have a slight <a id="id399" class="indexterm"></a>glitch right now. If you drag-and-drop the window far from the center and hit the options button, you'll see that our main menu jumps to the center of the screen. That's because the tween's <span class="strong"><strong>From</strong></span> position is always set to {0, 0, 0}.</p><p>To resolve that <a id="id400" class="indexterm"></a>issue, we simply have to update the <span class="strong"><strong>From</strong></span> position to be the same as the window's current position.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec37"></a>The Main menu</h4></div></div></div><p>The <code class="literal">Tween Position</code> component has a <code class="literal">SetStartToCurrentValue()</code> method that we can call when the <a id="id401" class="indexterm"></a>appropriate buttons are clicked.</p><p>Select our <code class="literal">UI Root</code> | <code class="literal">Main</code> | <code class="literal">Buttons</code> | <code class="literal">Options</code> GameObject, and configure the <span class="strong"><strong>On Click</strong></span> event for its attached <code class="literal">UIButton</code> component, as follows:</p><div class="mediaobject"><img src="/graphics/9781783552979/graphics/2979OT_03_14.jpg" /></div><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Drag the <code class="literal">UI Root</code> | <code class="literal">Main</code> GameObject in the <span class="strong"><strong>Notify</strong></span> field.</p></li><li><p>Click on the <span class="strong"><strong>Method</strong></span> dropdown list.</p></li><li><p>Select the <span class="strong"><strong>TweenPosition</strong></span> | <span class="strong"><strong>SetStartToCurrentValue </strong></span>method.</p></li></ol></div><p>Let's do the same for our options' <code class="literal">Confirm</code> button, but this time updating the tween's end instead of the start position:</p><p>Select the <code class="literal">Options</code> | <code class="literal">Confirm</code> button. For <code class="literal">On Click</code> of <code class="literal">UIButton</code> event:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Drag the <code class="literal">UI Root</code> | <code class="literal">Options</code> GameObject in the <span class="strong"><strong>Notify</strong></span> field.</p></li><li><p>Click on the <span class="strong"><strong>Method</strong></span> drop-down list.</p></li><li><p>Select the <span class="strong"><strong>TweenPosition</strong></span> | <span class="strong"><strong>SetEndToCurrentValue</strong></span> method.</p></li></ol></div><p>Hit Unity's <span class="strong"><strong>play</strong></span> button. Now, both windows' positions are updated before the tween's start, making them stay where the player moved them as if they were saved. Great!</p><p>Now, let's move on to <a id="id402" class="indexterm"></a>see how we can create scrollable text.</p></div></div></div>