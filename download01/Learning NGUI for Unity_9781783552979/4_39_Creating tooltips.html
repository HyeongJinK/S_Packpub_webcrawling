<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec42"></a>Creating tooltips</h2></div></div><hr /></div><p>Let's use the <code class="literal">OnTooltip()</code> event to show a<a id="id481" class="indexterm"></a> tooltip for our buttons and different options, as shown<a id="id482" class="indexterm"></a> in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783552979/graphics/2979OT_04_02.jpg" /></div><p>The tooltip object shown in the<a id="id483" class="indexterm"></a> preceding screenshot, which we are going to create, is composed of four elements:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Tooltip</strong></span>: The tooltip container, with the <code class="literal">Tooltip</code> component attached.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Background</strong></span>: The background sprite that wraps around <span class="strong"><strong>Label</strong></span>.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Border</strong></span>: A yellow border that wraps around <span class="strong"><strong>Background</strong></span>.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Label</strong></span>: The label that displays the tooltip's text.</p></li></ul></div><p>We will also make sure<a id="id484" class="indexterm"></a> the tooltip is localized using NGUI methods.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec79"></a>The tooltip object</h3></div></div></div><p>In order to create the<a id="id485" class="indexterm"></a> tooltip object, we'll first create its visual elements (widgets), and then we'll attach the <code class="literal">Tooltip</code> component to it in order to define it as NGUI's tooltip.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl3sec41"></a>Widgets</h4></div></div></div><p>First, we need to create the tooltip object's visual <a id="id486" class="indexterm"></a>elements:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select our <code class="literal">UI Root</code> GameObject in the Hierarchy view.</p></li><li><p>Hit <span class="emphasis"><em>Alt</em></span> + <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>N</em></span> to create a new empty child GameObject.</p></li><li><p>Rename this new child from <code class="literal">GameObject</code> to <code class="literal">Tooltip</code>.</p></li><li><p>Add the <span class="strong"><strong>NGUI Panel</strong></span> (<code class="literal">UIPanel</code>) component to it.</p></li><li><p>Set this new <span class="strong"><strong>Depth</strong></span> of <code class="literal">UIPanel</code> to <code class="literal">10</code>.</p></li></ol></div><p>In the preceding steps, we've created the tooltip container. It has <code class="literal">UIPanel</code> with a <span class="strong"><strong>Depth</strong></span> value of <code class="literal">10</code> in order to make sure our tooltip will remain on top of other panels.</p><p>Now, let's create the faintly transparent background sprite:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>With <code class="literal">Tooltip</code> selected, hit <span class="emphasis"><em>Alt</em></span> + <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>S</em></span> to create a new child sprite.</p></li><li><p>Rename this new child from <code class="literal">Sprite</code> to <code class="literal">Background</code>.</p></li></ol></div><p>Select our new <code class="literal">Tooltip</code> | <code class="literal">Background</code> GameObject, and configure <span class="strong"><strong>UISprite</strong></span>, as follows:</p><div class="mediaobject"><img src="/graphics/9781783552979/graphics/2979OT_04_03.jpg" /></div><p>Perform the<a id="id487" class="indexterm"></a> following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Make sure <span class="strong"><strong>Atlas</strong></span> is set to <span class="strong"><strong>Wooden Atlas</strong></span>.</p></li><li><p>Set <span class="strong"><strong>Sprite</strong></span> to the <span class="strong"><strong>Window</strong></span> sprite.</p></li><li><p>Make sure <span class="strong"><strong>Type</strong></span> is set to <span class="strong"><strong>Sliced</strong></span>.</p></li><li><p>Change <span class="strong"><strong>Color Tint</strong></span> to <code class="literal">{R: 90, G: 70, B: 0, A: 180}</code>.</p></li><li><p>Set <span class="strong"><strong>Pivot</strong></span> to top-left (left arrow + up arrow).</p></li><li><p>Change <span class="strong"><strong>Size</strong></span> to 500 x 85.</p></li><li><p>Reset its <span class="strong"><strong>Transform</strong></span> position to <code class="literal">{0, 0, 0}</code>.</p></li></ol></div><p>Ok, we can now easily add a fully opaque border with the following trick:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>With <code class="literal">Tooltip</code> | <code class="literal">Background</code> selected, hit <span class="emphasis"><em>Ctrl </em></span>+ <span class="emphasis"><em>D</em></span> to duplicate it.</p></li><li><p>Rename this new duplicate to <code class="literal">Border</code>.</p></li></ol></div><p>Select <code class="literal">Tooltip</code> | <code class="literal">Border</code> and configure its attached <span class="strong"><strong>UI Sprite</strong></span>, as follows:</p><div class="mediaobject"><img src="/graphics/9781783552979/graphics/2979OT_04_04.jpg" /></div><p>Perform the<a id="id488" class="indexterm"></a> following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Disable the <span class="strong"><strong>Fill Center</strong></span> option.</p></li><li><p>Change <span class="strong"><strong>Color Tint</strong></span> to <code class="literal">{R: 255, G: 220, B: 0, A: 255}</code>.</p></li><li><p>Change the <span class="strong"><strong>Depth</strong></span> value to <code class="literal">1</code>.</p></li><li><p>Set <span class="strong"><strong>Anchors Type</strong></span> to <span class="strong"><strong>Unified</strong></span>.</p></li><li><p>Make sure the <span class="strong"><strong>Execute</strong></span> parameter is set to <span class="strong"><strong>OnUpdate</strong></span>.</p></li><li><p>Drag <code class="literal">Tooltip</code> | <code class="literal">Background</code> in to the new <span class="strong"><strong>Target</strong></span> field.</p></li></ol></div><p>By not filling the center of the <code class="literal">Border</code> sprite, we now have a yellow border around our background. We <a id="id489" class="indexterm"></a>used anchors to make sure this border always wraps the background even during runtime—thanks to the <span class="strong"><strong>Execute</strong></span> parameter set to <span class="strong"><strong>OnUpdate</strong></span>.</p><p>Right now, our <span class="strong"><strong>Game</strong></span> and <span class="strong"><strong>Hierarchy</strong></span> views should look like this:</p><div class="mediaobject"><img src="/graphics/9781783552979/graphics/2979OT_04_05.jpg" /></div><p>Let's create the tooltip's label. With <code class="literal">Tooltip</code> selected, hit <span class="emphasis"><em>Alt</em></span> + <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>L</em></span> to create a new label. For the new <code class="literal">Label</code> GameObject, set the following parameters for <span class="strong"><strong>UILabel</strong></span>:</p><div class="mediaobject"><img src="/graphics/9781783552979/graphics/2979OT_04_06.jpg" /></div><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Set <span class="strong"><strong>Font Type</strong></span> to <span class="strong"><strong>NGUI,</strong></span> and <span class="strong"><strong>Font</strong></span> to <span class="strong"><strong>Arimo20</strong></span> with a size of <span class="strong"><strong>40</strong></span>.</p></li><li><p>Change <span class="strong"><strong>Text</strong></span> to <span class="strong"><strong>[FFCC00]This[FFFFFF] is a tooltip</strong></span>.</p></li><li><p>Change <a id="id490" class="indexterm"></a>
<span class="strong"><strong>Overflow</strong></span> to <span class="strong"><strong>ResizeHeight</strong></span>.</p></li><li><p>Set <span class="strong"><strong>Effect</strong></span> to <span class="strong"><strong>Outline</strong></span>, with an <span class="strong"><strong>X</strong></span> and <span class="strong"><strong>Y</strong></span> of 1 and black color.</p></li><li><p>Set <span class="strong"><strong>Pivot </strong></span>to top-left (left arrow + up arrow).</p></li><li><p>Change <span class="strong"><strong>X Size</strong></span> to <span class="strong"><strong>434</strong></span>. The height adjusts to the text amount.</p></li><li><p>Set the <span class="strong"><strong>Transform</strong></span> position to <code class="literal">{33, -22, 0}</code>.</p></li></ol></div><p>Ok, good. We now have a label that can display our tooltip's text. This label's height will adjust automatically as the text gets longer or shorter.</p><p>Let's configure anchors to make sure the background always wraps around the label:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select our <code class="literal">Tooltip</code> | <code class="literal">Background</code> GameObject.</p></li><li><p>Set <span class="strong"><strong>Anchors Type</strong></span> to <span class="strong"><strong>Unified</strong></span>.</p></li><li><p>Drag <code class="literal">Tooltip</code> | <code class="literal">Label</code> in the new <span class="strong"><strong>Target</strong></span> field.</p></li><li><p>Set the <span class="strong"><strong>Execute</strong></span> parameter to <span class="strong"><strong>OnUpdate</strong></span>.</p></li></ol></div><p>Great! Now, if you<a id="id491" class="indexterm"></a> edit our tooltip's text label to a very large text, you'll see that it adjusts automatically, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783552979/graphics/2979OT_04_07.jpg" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl3sec42"></a>UITooltip</h4></div></div></div><p>We can now add<a id="id492" class="indexterm"></a> the <code class="literal">UITooltip</code> component to our tooltip object:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select our <code class="literal">UI Root</code> | <code class="literal">Tooltip</code> GameObject.</p></li><li><p>Click the <span class="strong"><strong>Add Component</strong></span> button in the Inspector view.</p></li><li><p>Type <code class="literal">tooltip</code> with your keyboard to search for components.</p></li><li><p>Select <span class="strong"><strong>Tooltip</strong></span> and hit <span class="emphasis"><em>Enter</em></span> or click on it with your mouse.</p></li></ol></div><p>Configure the newly<a id="id493" class="indexterm"></a> attached <code class="literal">UITooltip</code> component, as follows:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Drag <code class="literal">UI Root</code> | <code class="literal">Tooltip</code> | <code class="literal">Label</code> in the <span class="strong"><strong>Text</strong></span> field.</p></li><li><p>Drag <code class="literal">UI Root</code> | <code class="literal">Tooltip</code> | <code class="literal">Background</code> in the <span class="strong"><strong>Background</strong></span> field.</p></li></ol></div><p>The tooltip object is ready! It is now defined as a tooltip for NGUI. Now, let's see how we can display it when needed using a few simple lines of code.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec80"></a>Displaying the tooltip</h3></div></div></div><p>We must now show the tooltip when needed. In order to do that, we can use the <code class="literal">OnTooltip()</code> event, in which we <a id="id494" class="indexterm"></a>request to display the tooltip with localized text:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select our three <code class="literal">Main</code> | <code class="literal">Buttons</code> | <code class="literal">Exit</code>, <code class="literal">Options</code>, and <code class="literal">Play</code> buttons.</p></li><li><p>Click the <span class="strong"><strong>Add Component</strong></span> button in the Inspector view.</p></li><li><p>Type <code class="literal">ShowTooltip</code> with your keyboard.</p></li><li><p>Hit <span class="emphasis"><em>Enter</em></span> twice to create and attach the new <code class="literal">ShowTooltip.cs</code> script to it.</p></li><li><p>Open this new <code class="literal">ShowTooltip.cs</code> script.</p></li></ol></div><p>First, we need to add this public <code class="literal">key</code> variable to define which text we want to display:</p><div class="informalexample"><pre class="programlisting">// The localization key of the text to display
public string key = "";</pre></div><p>Ok, now add the following <a id="id495" class="indexterm"></a>
<code class="literal">OnTooltip()</code> method that retrieves the localized text and requests to show or hide the tooltip depending on the <code class="literal">state</code> bool:</p><div class="informalexample"><pre class="programlisting">// When the OnTooltip event is triggered on this object
<span class="strong"><strong>void OnTooltip(bool state)</strong></span>
{
// Get the final localized text
string finalText = Localization.Get(key);

// If the tooltip must be removed...
if(!state)
{
// ...Set the finalText to nothing
finalText = "";
}

// Request the tooltip display
UITooltip.ShowText(finalText);
}</pre></div><p>Save the script. As you can see in the preceding code, the <code class="literal">Localization.Get(string key)</code> method returns localized text of the corresponding <code class="literal">key</code> parameter that is passed. You can now use it to localize a label through code anytime! In order to hide the tooltip, we simply request <code class="literal">UITooltip</code> to show an empty tooltip.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note29"></a>Note</h3><p>To use <code class="literal">Localization.Get(string key)</code>, your label must not have a <code class="literal">UILocalize</code> component attached to it; otherwise, the value of <code class="literal">UILocalize</code> will overwrite anything you assign to <code class="literal">UILabel</code>.</p></div><p>Ok, we have added the <a id="id496" class="indexterm"></a>code to show our tooltip with localized text. Now, open the <code class="literal">Localization.txt</code> file, and add these localized strings:</p><div class="informalexample"><pre class="programlisting">// Tooltips
Play_Tooltip, "Launch the game!", "Lancer le jeu !"
Options_Tooltip, "Change language, nickname, subtitles...", "Changer la langue, le pseudo, les sous-titres..."
Exit_Tooltip, "Leaving us already?", "Vous nous quittez déjà ?"</pre></div><p>Now that our localized strings are added, we could manually configure the <code class="literal">key</code> parameter for our three buttons' <code class="literal">Show Tooltip</code> components to respectively display <code class="literal">Play_Tooltip</code>, <code class="literal">Options_Tooltip</code>, and <code class="literal">Exit_Tooltip</code>.</p><p>But that would be a repetitive action, and if we want to add localized tooltips easily for future and existing objects, we should implement the following system: if the <code class="literal">key</code> parameter is empty, we'll try to get a localized text based on the GameObject's name.</p><p>Let's do this now! Open our <code class="literal">ShowTooltip.cs</code> script, and add this <code class="literal">Start()</code> method:</p><div class="informalexample"><pre class="programlisting">// At start
<span class="strong"><strong>void Start()</strong></span>
{
// If key parameter isn't defined in inspector...
if(string.IsNullOrEmpty(key))
{
// ...Set it now based on the GameObject's name
<span class="strong"><strong>key = name + "_Tooltip";</strong></span>
}
}</pre></div><p>Click on Unity's <span class="strong"><strong>play</strong></span> button. That's it! When you leave your cursor on any of our three buttons, a localized tooltip appears:</p><div class="mediaobject"><img src="/graphics/9781783552979/graphics/2979OT_04_08.jpg" /></div><p>The preceding tooltip<a id="id497" class="indexterm"></a> wraps around the displayed text perfectly, and we didn't have to manually configure their <code class="literal">Show Tooltip</code> components' <code class="literal">key</code> parameters!</p><p>Actually, I have a feeling that the display delay is too long. Let's correct this:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select our <code class="literal">UI Root</code> | <code class="literal">Camera</code> GameObject.</p></li><li><p>Set <span class="strong"><strong>Tooltip Delay</strong></span> of <code class="literal">UICamera</code> to 0.3.</p></li></ol></div><p>That's better—our localized tooltip appears after 0.3 seconds of hovering.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec81"></a>Adding the remaining tooltips</h3></div></div></div><p>We can now easily add<a id="id498" class="indexterm"></a> tooltips for our <code class="literal">Options</code> page's element. The tooltip works on any GameObject with a collider attached to it. Let's use a search by type to find them:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>In the <span class="strong"><strong>Hierarchy</strong></span> view's search bar, type <code class="literal">t:boxcollider</code>
</p></li><li><p>Select <span class="strong"><strong>Checkbox</strong></span>, <span class="strong"><strong>Confirm</strong></span>, <span class="strong"><strong>Input</strong></span>, <span class="strong"><strong>List</strong></span> (both), <span class="strong"><strong>Music</strong></span>, and <span class="strong"><strong>SFX</strong></span>:</p><div class="mediaobject"><img src="/graphics/9781783552979/graphics/2979OT_04_09.jpg" /></div></li><li><p>Click on the <span class="strong"><strong>Add Component</strong></span> button in the Inspector view.</p></li><li><p>Type <code class="literal">show</code> with your keyboard to search the components.</p></li><li><p>Hit <span class="emphasis"><em>Enter</em></span> or click on the <span class="strong"><strong>Show Tooltip</strong></span> component to attach it to them.</p></li></ol></div><p>For the objects<a id="id499" class="indexterm"></a> with generic names, such as <code class="literal">Input</code> and <code class="literal">List</code>, we need to set their <code class="literal">key</code> parameter manually, as follows:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select the <code class="literal">Checkbox</code> GameObject, and set <span class="strong"><strong>Key</strong></span> to <code class="literal">Sound_Tooltip</code>.</p></li><li><p>Select the <code class="literal">Input</code> GameObject, and set <span class="strong"><strong>Key</strong></span> to <code class="literal">Nickname_Tooltip</code>.</p></li><li><p>For the <code class="literal">List</code> for language selection, set <span class="strong"><strong>Key</strong></span> to <code class="literal">Language_Tooltip</code>.</p></li><li><p>For the <code class="literal">List</code> for subtitles selection, set <span class="strong"><strong>Key</strong></span> to <code class="literal">Subtitles_Tooltip</code>.</p></li></ol></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip12"></a>Tip</h3><p>To know if the selected list is the language or subtitles list, look at <span class="strong"><strong>Options</strong></span> of its <code class="literal">UIPopup List</code>: if it has the <code class="literal">None</code> option, then it's the subtitles selection.</p></div><p>Finally, we need to add these localization strings in the <code class="literal">Localization.txt</code> file:</p><div class="informalexample"><pre class="programlisting">Sound_Tooltip, "Enable or disable game sound", "Activer ou désactiver le son du jeu"
Nickname_Tooltip, "Name used during the game", "Pseudo utilisé lors du jeu"
Language_Tooltip, "Game and user interface language", "Langue du jeu et de l'interface"
Subtitles_Tooltip, "Subtitles language", "Langue des sous-titres"
Confirm_Tooltip, "Confirm and return to main menu", "Confirmer et retourner au menu principal"
Music_Tooltip, "Game music volume", "Volume de la musique"
SFX_Tooltip, "Sound effects volume", "Volume des effets"</pre></div><p>Hit Unity's <span class="strong"><strong>play</strong></span> button. We now <a id="id500" class="indexterm"></a>have localized tooltips for all our options! We now know how to easily use NGUI's tooltip system. It's time to talk about <span class="strong"><strong>Tween methods</strong></span>.</p></div></div>