<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec39"></a>Anchors</h2></div></div><hr /></div><p>Until now, we've <a id="id445" class="indexterm"></a>defined our widgets' positions and sizes as absolute values. This process works for now, but we'll see that it works to a certain extent.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec74"></a>Purpose</h3></div></div></div><p>What are anchors <a id="id446" class="indexterm"></a>here for? Here's a simple example: our main menu's title bar background is created with a sprite of 1700 x 100. If we change the main menu's dimensions, the title bar won't be resized accordingly. Let's try it now:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select <code class="literal">UI Root</code> | <code class="literal">Main</code> | <code class="literal">Background</code>.</p></li><li><p>Change the height of <code class="literal">UISprite</code> (Y <span class="strong"><strong>Size</strong></span>) to 815.</p></li><li><p>Our main menu window is now smaller, but the title bar didn't move:</p><div class="mediaobject"><img src="/graphics/9781783552979/graphics/2979OT_03_26.jpg" /></div></li></ol></div><p>We would like the main menu's title bar to be lowered automatically as the main menu's size is reduced. That's where anchors come in.</p><p>Anchors let us define a widget's position and size relative to another widget or 3D object. Each side can be anchored to the same object or different ones. They can be updated during runtime, hence allowing us to have objects following each other at any time.</p><p>Before we configure them, let's see what the anchors' available parameters are.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec75"></a>Parameters</h3></div></div></div><p>Select <code class="literal">UI Root</code> | <code class="literal">Title</code> | <code class="literal">Sprite</code>, and <a id="id447" class="indexterm"></a>change the <span class="strong"><strong>Anchors Type</strong></span> <a id="id448" class="indexterm"></a>parameter of <code class="literal">UISprite</code> to <span class="strong"><strong>Unified</strong></span>:</p><div class="mediaobject"><img src="/graphics/9781783552979/graphics/2979OT_03_27.jpg" /></div><p>In the <span class="strong"><strong>Unified</strong></span> mode, the <span class="strong"><strong>Anchors</strong></span> parameters <span class="strong"><strong>2</strong></span>, <span class="strong"><strong>3</strong></span>, and <span class="strong"><strong>4</strong></span> appear.</p><p>Let's see what these <a id="id449" class="indexterm"></a>parameters are:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>
<span class="strong"><strong>Type</strong></span>: Select here the anchor type.</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<code class="literal">None</code>: No <a id="id450" class="indexterm"></a>anchors are used, that is, the position and size are absolute</p></li><li style="list-style-type: disc"><p>
<code class="literal">Unified</code>: All sides are anchored to the same <span class="strong"><strong>Target</strong></span> object</p></li><li style="list-style-type: disc"><p>
<code class="literal">Advanced</code>: This gives you more control by letting you choose different objects for each side separately</p></li></ul></div></li><li><p>
<span class="strong"><strong>Execute</strong></span>:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<code class="literal">OnEnable</code>: Anchors <a id="id451" class="indexterm"></a>are calculated when the object gets enabled. This gives good performance, but use only if your target is static.</p></li><li style="list-style-type: disc"><p>
<code class="literal">OnUpdate</code>: Anchors are recalculated each frame. Use this option if your target might move during runtime.</p></li><li style="list-style-type: disc"><p>
<code class="literal">OnStart</code>: Anchors are calculated when the game starts. This gives even better performance, but should be used only if your target is static.</p></li></ul></div></li><li><p>
<span class="strong"><strong>Target</strong></span>: Drag here the <a id="id452" class="indexterm"></a>target you want your object to be anchored to.</p></li><li><p>
<span class="strong"><strong>Left</strong></span>, <span class="strong"><strong>Right</strong></span>, <span class="strong"><strong>Bottom</strong></span>, and <span class="strong"><strong>Top</strong></span>: Here, you enter how far (<span class="strong"><strong>b</strong></span>) each side should be from its corresponding anchor point. With the drop-down lists (<span class="strong"><strong>a</strong></span>), you can choose <a id="id453" class="indexterm"></a>the anchor point used to calculate this distance: <code class="literal">Target's</code> <code class="literal">Left</code>, <code class="literal">Center</code>, and <code class="literal">Right</code>. <code class="literal">Custom</code> lets you set a relative value yourself between 0 and 1. For example, with the Left or Right anchor, 0 is left and 1 is right, while 0.5 is the middle. <code class="literal">Set To Current Position</code> sets the pivot point to the currently defined position in order to have an offset of 0.</p></li></ol></div><p>Now that we've seen <a id="id454" class="indexterm"></a>anchor parameters, let's see how we can configure them.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec76"></a>Configuration</h3></div></div></div><p>The fastest way to <a id="id455" class="indexterm"></a>configure them is to place our elements exactly how we need them to be and then configure their anchors: values will be filled automatically. So let's reset our main menu window's background to its original and intended size:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select <code class="literal">UI Root</code> | <code class="literal">Main</code> | <code class="literal">Background</code>.</p></li><li><p>Change back its <code class="literal">UISprite</code> height (Y <span class="strong"><strong>Size</strong></span>) to 900.</p></li></ol></div><p>Now, we can set up our title bar's background anchors:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select <code class="literal">UI Root</code> | <code class="literal">Main</code> | <code class="literal">Title</code> <code class="literal">|</code> <code class="literal">Sprite</code>.</p></li><li><p>Make sure its attached <code class="literal">UISprite</code> <span class="strong"><strong>Anchor Type</strong></span> is set to <span class="strong"><strong>Unified</strong></span>.</p></li><li><p>Set the anchors' <span class="strong"><strong>Execute</strong></span> parameter to <span class="strong"><strong>OnUpdate</strong></span>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note26"></a>Note</h3><p>We need to update the anchors' values during runtime (<code class="literal">OnUpdate</code>) to ensure the title bar always adjusts to the main menu window size. Indeed, the window's size changes throughout the game because of the scale tween.</p></div></li><li><p>Drag <code class="literal">UI Root</code> | <code class="literal">Main</code> | <code class="literal">Background</code> in the anchor's <span class="strong"><strong>Target</strong></span> field.</p></li></ol></div><p>In the Game view, nothing has changed. On the other hand, you can notice that the <span class="strong"><strong>Left</strong></span>, <span class="strong"><strong>Right</strong></span>, <span class="strong"><strong>Bottom</strong></span>, and <span class="strong"><strong>Top</strong></span> values (<span class="strong"><strong>1</strong></span>) have been automatically updated to adjust to the current disposition:</p><div class="mediaobject"><img src="/graphics/9781783552979/graphics/2979OT_03_28.jpg" /></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip11"></a>Tip</h3><p>Make sure your sprite's <span class="strong"><strong>Size</strong></span> is still 1700 x 900. Sometimes, widget sizes or scales are slightly modified after certain actions. In this case, your sprite size might have been changed to 1699 x 900 after you dragged the target.</p></div><p>From now on, if you reduce or increase our main menu's background size, the title bar will move and resize <a id="id456" class="indexterm"></a>accordingly. It's not the case with the close button and the window titleâ€”they stay where they are. Let's configure their anchors to correct this:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select <code class="literal">UI Root</code> | <code class="literal">Main</code> | <code class="literal">Buttons</code> <code class="literal">|</code> <code class="literal">Close</code> GameObject.</p></li><li><p>Change <code class="literal">UISprite</code> <span class="strong"><strong>Anchors Type</strong></span> to <span class="strong"><strong>Unified</strong></span>.</p></li><li><p>Set the <span class="strong"><strong>Anchors Execute</strong></span> parameter to <span class="strong"><strong>OnUpdate</strong></span>.</p></li><li><p>Drag <code class="literal">UI Root</code> | <code class="literal">Main</code> | <code class="literal">Title</code> | <code class="literal">Sprite</code> in the <span class="strong"><strong>Anchors Target</strong></span> field.</p></li></ol></div><p>And now for the label:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select the <code class="literal">UI Root</code> | <code class="literal">Main</code> | <code class="literal">Title</code> <code class="literal">|</code> <code class="literal">Label</code> GameObject.</p></li><li><p>Change <code class="literal">UILabel</code> <span class="strong"><strong>Anchors Type</strong></span> to <span class="strong"><strong>Unified</strong></span>.</p></li><li><p>Set the <span class="strong"><strong>Anchors Execute</strong></span> parameter to <span class="strong"><strong>OnUpdate</strong></span>.</p></li><li><p>Drag <code class="literal">UI Root</code> | <code class="literal">Main</code> | <code class="literal">Title</code> | <code class="literal">Sprite</code> in the <span class="strong"><strong>Anchors Target</strong></span> field.</p></li></ol></div><p>And that's it! Using anchors, we have made sure that when the main menu window is resized, the title bar adjusts itself both in position and size!</p></div></div>