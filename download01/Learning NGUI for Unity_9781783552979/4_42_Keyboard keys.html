<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec45"></a>Keyboard keys</h2></div></div><hr /></div><p>In this section, we'll see how to add keyboard<a id="id521" class="indexterm"></a> control to our UI. First, we'll see how to bind keys to<a id="id522" class="indexterm"></a> buttons, and then we'll add a navigation system using keyboard arrows.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec85"></a>UIKey binding</h3></div></div></div><p>The <code class="literal">UIKey Binding</code> component<a id="id523" class="indexterm"></a> assigns a specific key to the widget it's attached to. We'll use it now to assign the<a id="id524" class="indexterm"></a> keyboard's <span class="emphasis"><em>Escape</em></span> key to our menu's <code class="literal">Exit</code> button:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select our <code class="literal">UI Root</code> | <code class="literal">Main</code> | <code class="literal">Buttons</code> | <code class="literal">Exit</code> GameObject.</p></li><li><p>Click the <span class="strong"><strong>Add Component</strong></span> button in the Inspector view.</p></li><li><p>Type <code class="literal">key</code> with your keyboard to search for components.</p></li><li><p>Select <span class="strong"><strong>Key Binding</strong></span> and hit <span class="emphasis"><em>Enter</em></span> or click on it with your mouse.</p></li></ol></div><p>Let's see its available<a id="id525" class="indexterm"></a> parameters.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl3sec47"></a>Parameters</h4></div></div></div><p>We've just added the<a id="id526" class="indexterm"></a> following <span class="strong"><strong>UIKey Binding</strong></span> component to our <code class="literal">Exit</code> button, as follows:</p><div class="mediaobject"><img src="/graphics/9781783552979/graphics/2979OT_04_14.jpg" /></div><p>The newly attached <span class="strong"><strong>UIKey Binding</strong></span> component has three parameters:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Key Code</strong></span>: Which key would you like to bind to an action?</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Modifier</strong></span>: If you want a two-button combination. Select on the four available modifiers: <code class="literal">Shift</code>, <code class="literal">Control</code>, <code class="literal">Alt</code> or <code class="literal">None</code>.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Action</strong></span>: Which action should we bind to this key? You can simulate a button click with <code class="literal">PressAndClick</code>, a selection with <code class="literal">Select</code>, or both with <code class="literal">All</code>.</p></li></ul></div><p>Ok, now, we'll configure it to see how it works.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl3sec48"></a>Configuration</h4></div></div></div><p>Simply set the <span class="strong"><strong>Key Code</strong></span> field to <span class="strong"><strong>Escape</strong></span>. Now, hit Unity's <span class="strong"><strong>play</strong></span> button. When you hit the <span class="emphasis"><em>Escape</em></span> key of our keyboard, it<a id="id527" class="indexterm"></a> reacts as if the <code class="literal">Exit</code> button was pressed!</p><p>We can now move on to see how to add keyboard and controller navigation to the UI.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec86"></a>UIKey navigation</h3></div></div></div><p>The <code class="literal">UIKey Navigation</code> component helps <a id="id528" class="indexterm"></a>us assign objects to<a id="id529" class="indexterm"></a> select using the keyboard arrows or controller directional-pad. For most widgets, the automatic configuration is enough, but we'll need to use the override parameters in some cases to have the behavior we need.</p><p>The nickname input field has neither the <code class="literal">UIButton</code> nor the <code class="literal">UIButton Scale</code> components attached<a id="id530" class="indexterm"></a> to it. This means that there will be no feedback to show the user it's currently selected with the keyboard navigation, which is a problem. We can correct this right now.</p><p>Select <code class="literal">UI Root</code> | <code class="literal">Options</code> | <code class="literal">Nickname</code> | <code class="literal">Input</code>, and then:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Add the <span class="strong"><strong>Button</strong></span> component (<code class="literal">UIButton</code>) to it.</p></li><li><p>Add the <span class="strong"><strong>Button Scale</strong></span> component (<code class="literal">UIButton Scale</code>) to it.</p></li><li><p>Center <span class="strong"><strong>Pivot</strong></span> of <code class="literal">UISprite</code> (middle bar + middle bar).</p></li><li><p>Reset <span class="strong"><strong>Center</strong></span> of <code class="literal">Box Collider</code> to <code class="literal">{0, 0, 0}</code>.</p></li></ol></div><p>The <code class="literal">Nickname</code> | <code class="literal">Input</code> GameObject should have an Inspector view like this:</p><div class="mediaobject"><img src="/graphics/9781783552979/graphics/2979OT_04_15.jpg" /></div><p>Ok. We'll now add the <span class="strong"><strong>Key Navigation</strong></span> component (<code class="literal">UIKey Navigation</code>) to most of the buttons in the <a id="id531" class="indexterm"></a>scene. In order to do that, type <code class="literal">t:uibutton</code> in the <span class="strong"><strong>Hierarchy</strong></span> view's search bar to display only GameObjects with the <code class="literal">UIButton</code> component attached to them:</p><div class="mediaobject"><img src="/graphics/9781783552979/graphics/2979OT_04_16.jpg" /></div><p>Ok. With the<a id="id532" class="indexterm"></a> preceding search filter, select the following GameObjects:</p><div class="mediaobject"><img src="/graphics/9781783552979/graphics/2979OT_04_17.jpg" /></div><p>Now, with the preceding selection, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Click the <span class="strong"><strong>Add Component</strong></span> button in the Inspector view.</p></li><li><p>Type <code class="literal">key</code> with your keyboard to search for components.</p></li><li><p>Select <span class="strong"><strong>Key Navigation</strong></span> and hit <span class="emphasis"><em>Enter</em></span> or click on it with your mouse.</p></li></ol></div><p>We've added the <code class="literal">UIKey Navigation</code> component to our selection. Let's see its parameters.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl3sec49"></a>Parameters</h4></div></div></div><p>We've just added the <a id="id533" class="indexterm"></a>following <span class="strong"><strong>UIKey Navigation</strong></span> component to our objects:</p><div class="mediaobject"><img src="/graphics/9781783552979/graphics/2979OT_04_18.jpg" /></div><p>The newly attached <span class="strong"><strong>UIKey Navigation</strong></span> component has <a id="id534" class="indexterm"></a>four parameter groups:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>
<span class="strong"><strong>Starts Selected</strong></span>: Is this widget selected by default at the start?</p></li><li><p>
<span class="strong"><strong>Select on Click</strong></span>: Which widget should be selected when this widget is clicked on â€” or the <span class="emphasis"><em>Enter</em></span> key/confirm button has been pressed? This option can be used to select a specific widget when a new page is displayed.</p></li><li><p>
<span class="strong"><strong>Constraint</strong></span>: Use this to limit the navigation movement from this widget:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<code class="literal">None</code>: The movement is free from this widget</p></li><li style="list-style-type: disc"><p>
<code class="literal">Vertical</code>: From this widget, you can only go up or down</p></li><li style="list-style-type: disc"><p>
<code class="literal">Horizontal</code>: From this widget, you can only move left or right</p></li><li style="list-style-type: disc"><p>
<code class="literal">Explicit</code>: Only move to widgets specified in the <span class="strong"><strong>Override</strong></span>
</p></li></ul></div></li><li><p>
<span class="strong"><strong>Override</strong></span>: Use the <span class="strong"><strong>Left</strong></span>, <span class="strong"><strong>Right</strong></span>, <span class="strong"><strong>Up</strong></span>, and <span class="strong"><strong>Down</strong></span> fields to force the input to select the specified objects. If the <span class="strong"><strong>Constraint</strong></span> parameter is set to <code class="literal">Explicit</code>, only widgets specified here can be selected. Otherwise, automatic configuration still works for fields left to <code class="literal">None</code>.</p></li></ol></div><p>Ok. Now, let's configure it to understand and test the above parameters.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl3sec50"></a>Configuration</h4></div></div></div><p>First things first: we need to set our <code class="literal">Play</code> button as the default selected object at the start. In order to do this, simply select our <code class="literal">UI Root</code> | <code class="literal">Main </code>| <code class="literal">Buttons</code> | <code class="literal">Play</code> GameObject, and check the <span class="strong"><strong>Starts Selected</strong></span> option of <code class="literal">UIKey Navigation</code>.</p><p>Now, let's try it. Hit Unity's <a id="id535" class="indexterm"></a>
<span class="strong"><strong>play</strong></span> button. You'll see that most <a id="id536" class="indexterm"></a>of them work, but here's our first issue with automatic configuration: the <code class="literal">Exit</code> button cannot be selected. Let's see why and what we can do to fix this.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="ch04lvl4sec07"></a>The Exit button</h5></div></div></div><p>That's because it is not considered as<a id="id537" class="indexterm"></a> being below the <code class="literal">Play</code> and <code class="literal">Options</code> buttons. We can use the <span class="strong"><strong>Override</strong></span> parameters to correct this and force the selection on input:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select both our <code class="literal">UI Root</code> | <code class="literal">Main</code> | <code class="literal">Buttons</code> | <code class="literal">Play</code> and <code class="literal">Options</code> buttons.</p></li><li><p>Drag our <code class="literal">Exit</code> button to the <span class="strong"><strong>Down</strong></span> field of <code class="literal">UIKey Navigation</code>.</p></li><li><p>Now, select our <code class="literal">Exit</code> button.</p></li><li><p>Drag our <code class="literal">Play</code> button in the <span class="strong"><strong>Up</strong></span> field of <code class="literal">UIKey Navigation</code>.</p></li></ol></div><p>Hit Unity's <span class="strong"><strong>play</strong></span> button. That's it. The <span class="strong"><strong>Override</strong></span> parameters are now taken into account and we can select our <code class="literal">Exit</code> button and go back to the <code class="literal">Play</code> button with the arrow keys!</p><p>Now, try hitting <span class="emphasis"><em>Enter</em></span> while the <code class="literal">Options</code> button is selected. When the options page appears, we cannot move from a widget to another anymore. Let's talk about that.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="ch04lvl4sec08"></a>The Options button</h5></div></div></div><p>When the <code class="literal">Options</code> button is<a id="id538" class="indexterm"></a> clicked, nothing is selected on the options page. We can correct this using the <span class="strong"><strong>Select on Click</strong></span> parameter:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select our <code class="literal">UI Root</code> | <code class="literal">Main</code> | <code class="literal">Buttons</code> | <code class="literal">Options</code> button.</p></li><li><p>Drag <code class="literal">Options</code> | <code class="literal">Language</code> | <code class="literal">List</code> in the <span class="strong"><strong>Select on Click</strong></span> field.</p></li></ol></div><p>Hit Unity's <span class="strong"><strong>play</strong></span> button. Now, when the options page is displayed, our language popup list is selected by default, letting us navigate through options using the arrow keys.</p><p>We also need the <code class="literal">Play</code> button to be selected as soon as the <code class="literal">Confirm</code> button is pressed:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select our <code class="literal">Options</code> | <code class="literal">Confirm</code> button.</p></li><li><p>Drag <code class="literal">Main</code> | <code class="literal">Buttons</code> | <code class="literal">Play</code> in its <span class="strong"><strong>Select on Click</strong></span> field.</p></li></ol></div><p>That's it. Now, when you select <code class="literal">Options</code>, the language list will be selected automatically. Now, the <a id="id539" class="indexterm"></a>nickname input field has a small issue upon validation.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="ch04lvl4sec09"></a>The nickname input field</h5></div></div></div><p>If you hit the <span class="emphasis"><em>Enter</em></span> key while you're typing<a id="id540" class="indexterm"></a> a new nickname, the input field is no longer selected, and you cannot navigate with the keyboard anymore.</p><p>This occurs because, by default, the input field's <span class="strong"><strong>On Submit</strong></span> event delegate is set to call the <span class="strong"><strong>UIInput/RemoveFocus</strong></span> method. We'll change this now:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select our <code class="literal">UI Root</code> | <code class="literal">Options</code> | <code class="literal">Nickname</code> | <code class="literal">Input</code> GameObject.</p></li><li><p>Click on the button (<span class="strong"><strong>1</strong></span>) of the <span class="strong"><strong>Notify</strong></span> field of <span class="strong"><strong>On Submit</strong></span>, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783552979/graphics/2979OT_04_19.jpg" /></div></li></ol></div><p>Hit Unity's <span class="strong"><strong>play</strong></span> button. Great, we can now validate the nickname input field, and the focus is no longer removed from it.</p><p>That's it! We've solved all of our major issues with the key navigation for our UI. We can now see how to interact with the volume sliders separately.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="ch04lvl4sec10"></a>The volume sliders</h5></div></div></div><p>Our last issue with key navigation is that our <a id="id541" class="indexterm"></a>volume sliders aren't accessible with the arrow keys. Let's create a new depth of navigation and achieve the following behavior:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>The arrow keys let us select the <code class="literal">Volume</code> box.</p></li><li><p>If the user hits <span class="emphasis"><em>Enter</em></span>, they enter the <code class="literal">Volume</code> box.</p></li><li><p>From now on, the user can move the sliders' values with the left or right keys.</p></li><li><p>By hitting <span class="emphasis"><em>Enter</em></span> again, they validate their changes.</p></li></ol></div><p>First, we need to make our volume box a button like other options on the page:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select our <code class="literal">UI Root</code> | <code class="literal">Options</code> | <code class="literal">Volume</code> GameObject.</p></li><li><p>Add the <span class="strong"><strong>Button Scale</strong></span> (<code class="literal">UIButton Scale</code>) component to it.</p></li><li><p>Add a <span class="strong"><strong>Key Navigation</strong></span> (<code class="literal">UIKey Navigation</code>) component to it.</p></li><li><p>Drag <code class="literal">UI Root</code> | <code class="literal">Options</code> | <code class="literal">Volume</code> | <code class="literal">SFX</code> in the <span class="strong"><strong>Select on Click</strong></span> field.</p></li></ol></div><p>Ok. Hit Unity's <span class="strong"><strong>play</strong></span> button. We can now select the volume box with the arrow keys, and if you hit <span class="emphasis"><em>Enter</em></span> while it's <a id="id542" class="indexterm"></a>selected, the <code class="literal">SFX</code> slider is automatically selected.</p><p>We'll now make sure you can navigate through both sliders and go back to the normal navigation depth when you hit <span class="emphasis"><em>Enter</em></span> again:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select both the <code class="literal">UI Root</code> | <code class="literal">Options</code> | <code class="literal">Volume</code> | <code class="literal">SFX</code> and <code class="literal">Music</code> GameObjects.</p></li><li><p>With both <code class="literal">SFX</code> and <code class="literal">Music</code> sliders selected:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Add the <span class="strong"><strong>Button Scale</strong></span> component (<code class="literal">UIButton Scale</code>) to them</p></li><li style="list-style-type: disc"><p>Add a <span class="strong"><strong>Key Navigation</strong></span> component (<code class="literal">UIKey Navigation</code>) to them</p></li><li style="list-style-type: disc"><p>Change their <span class="strong"><strong>Constraint</strong></span> parameter to <span class="strong"><strong>Vertical</strong></span>
</p></li><li style="list-style-type: disc"><p>Drag <code class="literal">UI Root</code> | <code class="literal">Options</code> | <code class="literal">Volume</code> in <span class="strong"><strong>Select on Click</strong></span>
</p></li></ul></div></li><li><p>Select our <code class="literal">UI Root</code> | <code class="literal">Options</code> | <code class="literal">Confirm</code> GameObject.</p></li><li><p>Drag <code class="literal">UI Root</code> | <code class="literal">Options</code> | <code class="literal">Volume</code> in the <span class="strong"><strong>Right</strong></span> field of <code class="literal">UIKey Navigation</code>.</p></li></ol></div><p>That's it! Hit Unity's <span class="strong"><strong>play</strong></span> button, and you'll see that we can now edit the sliders' values using the right and left arrow keys after the <code class="literal">Volume</code> box has been selected with <span class="emphasis"><em>Enter</em></span>.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl3sec51"></a>Mouse and keyboard behavior</h4></div></div></div><p>The UIKey navigation<a id="id543" class="indexterm"></a> works with the keyboard or<a id="id544" class="indexterm"></a> gamepad, but it also works along with the mouse.</p></div></div></div>