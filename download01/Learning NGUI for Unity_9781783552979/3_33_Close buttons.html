<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec37"></a>Close buttons</h2></div></div><hr /></div><p>Our windows are <a id="id417" class="indexterm"></a>draggable pop ups; we should add a close button in the top-right corner:</p><div class="mediaobject"><img src="/graphics/9781783552979/graphics/2979OT_03_20.jpg" /></div><p>In order to do this quickly and easily, we can use a component called <code class="literal">UIForward Events</code>. It's a legacy componentâ€”it is now recommended that you use <code class="literal">UIEvent Trigger</code> instead. We'll try both because it's good that you understand how they work.</p><p>Before we continue, let's <a id="id418" class="indexterm"></a>create the close button for our main menu:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select our <code class="literal">UI Root</code> | <code class="literal">Main</code> | <code class="literal">Buttons</code> | <code class="literal">Exit</code> GameObject.</p></li><li><p>Hit <span class="emphasis"><em>Ctrl + D</em></span> to duplicate it.</p></li><li><p>Rename the new duplicate to <code class="literal">Close</code>.</p></li><li><p>Remove its attached <code class="literal">UIPlay Tween</code> component.</p></li><li><p>Change the <code class="literal">UISprite</code> <span class="strong"><strong>Size</strong></span> to 100 x 100.</p></li><li><p>Set its <span class="strong"><strong>Transform</strong></span> position to {800, 400, 0}.</p></li><li><p>Select our <code class="literal">UI Root</code> | <code class="literal">Main</code> | <code class="literal">Buttons</code> | <code class="literal">Close</code> | <code class="literal">Label</code> GameObject.</p></li><li><p>Rename it to <code class="literal">X</code>.</p></li><li><p>Set its <code class="literal">UILabel</code> <span class="strong"><strong>Text</strong></span> to a lowercase <code class="literal">x</code> character to look like a cross.</p></li><li><p>Change its <code class="literal">UILabel</code> <span class="strong"><strong>Font Size</strong></span> to 55.</p></li></ol></div><p>The close button is ready. Let's see how the <code class="literal">UIForward Events</code> component works.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec67"></a>UIForward events</h3></div></div></div><p>This (legacy) <a id="id419" class="indexterm"></a>component is very simple to use. You just have to <a id="id420" class="indexterm"></a>select which events you want to forward to another target GameObject.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec38"></a>Closing the main menu</h4></div></div></div><p>Let's <a id="id421" class="indexterm"></a>create the close button for our <a id="id422" class="indexterm"></a>main menu:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select our <code class="literal">UI Root</code> | <code class="literal">Main</code> | <code class="literal">Buttons</code> | <code class="literal">Close</code> button GameObject.</p></li><li><p>In the Inspector view, click on the <span class="strong"><strong>Add Component</strong></span> button.</p></li><li><p>Type <code class="literal">forward</code> to search for components with that word.</p></li><li><p>Select <span class="strong"><strong>Forward Events (Legacy)</strong></span> and hit <span class="emphasis"><em>Enter</em></span>.</p></li></ol></div><p>We've added the <span class="strong"><strong>Forward Events</strong></span> component to the close button. Configure it like this:</p><div class="mediaobject"><img src="/graphics/9781783552979/graphics/2979OT_03_21.jpg" /></div><p>In this configuration, we've dragged our main menu's <span class="strong"><strong>Exit</strong></span> button in the <span class="strong"><strong>Target</strong></span> field and checked the <span class="strong"><strong>On Click</strong></span> option.</p><p>Consequently, when the <code class="literal">Close</code> button is clicked, the <code class="literal">OnClick() </code>event is forwarded to our <code class="literal">Exit</code> button.</p><p>If you hit Unity's <a id="id423" class="indexterm"></a>
<span class="strong"><strong>play</strong></span> button and click on the <code class="literal">Close</code> button (cross), you'll see that it's exactly the same as if you clicked on the <code class="literal">Exit</code> button. That's <a id="id424" class="indexterm"></a>an easy event forwarding!</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec39"></a>Closing options</h4></div></div></div><p>Let's do the <a id="id425" class="indexterm"></a>same for our options window:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select our <code class="literal">UI Root</code> | <code class="literal">Main</code> | <code class="literal">Buttons</code> | <code class="literal">Close</code> button GameObject.</p></li><li><p>Hit <span class="emphasis"><em>Ctrl + D</em></span> to duplicate it.</p></li><li><p>In the Hierarchy view, drag it inside our <code class="literal">UI Root</code> | <code class="literal">Options</code> GameObject.</p></li><li><p>For its <a id="id426" class="indexterm"></a>attached <code class="literal">UIForward Events</code> component:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Drag our <code class="literal">Options</code> | <code class="literal">Confirm</code> GameObject in the <span class="strong"><strong>Target</strong></span> field</p></li></ul></div></li></ol></div><p>OK, so we have created two <a id="id427" class="indexterm"></a>close buttons for our windows. Let's see what the <code class="literal">UIEvent Trigger</code> component is.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec68"></a>UIEvent Trigger</h3></div></div></div><p>The <code class="literal">UIEvent Trigger</code> <a id="id428" class="indexterm"></a>component gives us the possibility of notifying (call functions within) other components when an event occurs <a id="id429" class="indexterm"></a>on the object it's attached to.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec40"></a>Force-saving the nickname</h4></div></div></div><p>Currently, we <a id="id430" class="indexterm"></a>have a slight problem with our input field <a id="id431" class="indexterm"></a>for the nickname: the entered name is only saved when the user hits the <span class="emphasis"><em>Enter</em></span> key. To be honest, most of our players won't do that. We need the nickname saved even if the <span class="emphasis"><em>Enter</em></span> key is not pressed.</p><p>In order to do that, we can request <code class="literal">UIInput</code> to save its value when it's deselected.</p><p>Let's use the <code class="literal">UIEvent Trigger</code> component to force-save the input:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>In the Hierarchy view, select <code class="literal">Options</code> | <code class="literal">Nickname</code> | <code class="literal">Input</code>.</p></li><li><p>In the Inspector view, click on the <span class="strong"><strong>Add Component</strong></span> button.</p></li><li><p>Type <code class="literal">trigger</code> to search for components with that word.</p></li><li><p>Select <span class="strong"><strong>Event Trigger</strong></span> and hit <span class="emphasis"><em>Enter</em></span> or click on it with your mouse.</p></li></ol></div><p>Configure the new <span class="strong"><strong>UIEvent Trigger</strong></span> component like this:</p><div class="mediaobject"><img src="/graphics/9781783552979/graphics/2979OT_03_22.jpg" /></div><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Click on the <span class="strong"><strong>On Deselect</strong></span> parameters group to show it.</p></li><li><p>Drag our <code class="literal">Nickname</code> | <code class="literal">Input</code> child GameObject in the <span class="strong"><strong>Notify</strong></span> field.</p></li><li><p>Select the <span class="strong"><strong>UIInput</strong></span> | <span class="strong"><strong>SaveValue</strong></span> method for the <span class="strong"><strong>Method</strong></span> field.</p></li></ol></div><p>Hit Unity's <span class="strong"><strong>play</strong></span> button. If you enter a nickname and click anywhere else, such as on the <code class="literal">Confirm</code> or the <code class="literal">Close</code> button, you'll see that the nickname is still saved. We successfully force-saved the <a id="id432" class="indexterm"></a>input's value using <a id="id433" class="indexterm"></a>the <code class="literal">UITrigger Event</code> component. It's time to see how NGUI's localization system works.</p></div></div></div>