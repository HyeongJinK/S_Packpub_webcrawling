<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec43"></a>Tweens</h2></div></div><hr /></div><p>The tweens <a id="id501" class="indexterm"></a>we have used until now were components we added to GameObjects in the scene. It is also possible to easily add tweens to GameObjects<a id="id502" class="indexterm"></a> through code.</p><p>You can see all available tweens by simply typing <code class="literal">Tween</code> inside any method in your favorite IDE. You will see a list of <code class="literal">Tween</code> classes thanks to auto-completion, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783552979/graphics/2979OT_04_10.jpg" /></div><p>The strong point of these classes is that they work in one line and don't have to be executed at each frame; you just have to call their <code class="literal">Begin()</code> method!</p><p>Here, we will apply tweens on widgets, but keep in mind that it works in the exact same way with other GameObjects since NGUI widgets are GameObjects.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec82"></a>Tween Scale</h3></div></div></div><p>Previously, we've used the <code class="literal">Tween Scale</code> component to make our main window disappear when the <code class="literal">Exit</code> button<a id="id503" class="indexterm"></a> is pressed. Let's do the same<a id="id504" class="indexterm"></a> when the <code class="literal">Play</code> button is pressed, but this time we'll do it through code to understand how it's done.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl3sec43"></a>DisappearOnClick Script</h4></div></div></div><p>We will first create a <a id="id505" class="indexterm"></a>new <code class="literal">DisappearOnClick.cs</code> script that will tween a target's scale to <code class="literal">{0.01, 0.01, 0.01}</code> when the GameObject it's attached to is <a id="id506" class="indexterm"></a>clicked on:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select our <code class="literal">UI Root</code> | <code class="literal">Main</code> | <code class="literal">Buttons</code> | <code class="literal">Play</code> GameObject.</p></li><li><p>Click the <span class="strong"><strong>Add Component</strong></span> button in the Inspector view.</p></li><li><p>Type <code class="literal">DisappearOnClick</code> with your keyboard.</p></li><li><p>Hit <span class="emphasis"><em>Enter</em></span> twice to create and add the new <code class="literal">DisappearOnClick.cs</code> script.</p></li><li><p>Open this new <code class="literal">DisappearOnClick.cs</code> script.</p></li></ol></div><p>First, we must add this public <code class="literal">target</code> GameObject to define which object will be affected by the tween, and a <code class="literal">duration</code> float to define the speed:</p><div class="informalexample"><pre class="programlisting">// Declare the target we'll tween down to {0.01, 0.01, 0.01}
<span class="strong"><strong>public GameObject target;</strong></span>
// Declare a float to configure the tween's duration
<span class="strong"><strong>public float duration = 0.3f;</strong></span>
</pre></div><p>Ok, now, let's add the following <code class="literal">OnClick()</code> method, which creates a new tween towards {0.01, 0.01, 0.01} on our desired <code class="literal">target</code> using the <code class="literal">duration</code> variable:</p><div class="informalexample"><pre class="programlisting">// When this object is clicked
<span class="strong"><strong>private void OnClick()</strong></span>
{
// Create a tween on the target
TweenScale.Begin(target, duration, Vector3.one * 0.01f);
}</pre></div><p>In the preceding code, we scale down the target for the desired duration, towards 0.01f.</p><p>Save the script. Good. Now, we simply have to assign our variables in the Inspector view:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Go back to Unity and select our <code class="literal">Play</code> button GameObject.</p></li><li><p>Drag our <code class="literal">UI Root</code> | <code class="literal">Main</code> object in the <code class="literal">DisappearOnClick</code> <span class="strong"><strong>Target</strong></span> field.</p></li></ol></div><p>Great. Now, hit Unity's <span class="strong"><strong>play</strong></span> button. When you click the menu's <code class="literal">Play</code> button, our main menu is scaled down to <code class="literal">{0.01, 0.01, 0.01}</code>, with the simple <code class="literal">TweenScale.Begin()</code> line!</p><p>Now that we've seen how to make a basic<a id="id507" class="indexterm"></a> tween, let's see<a id="id508" class="indexterm"></a> how to add effects.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl3sec44"></a>Tween effects</h4></div></div></div><p>Right now, our tween<a id="id509" class="indexterm"></a> is simple and linear. In order to add an effect to the tween, we first need to store it as <code class="literal">UITweener</code>, which is its parent class.</p><p>Replace lines of our <code class="literal">OnClick()</code> method by these to first store it and set an effect:</p><div class="informalexample"><pre class="programlisting">// Retrieve the new target's tween
<span class="strong"><strong>UITweener tween =</strong></span>
TweenScale.Begin(target, duration, Vector3.one * 0.01f);
// Set the new tween's effect method
<span class="strong"><strong>tween.method = UITweener.Method.EaseInOut;</strong></span>
</pre></div><p>That's it. Our tween now has an <code class="literal">EaseInOut</code> effect. You also have the following tween effect methods:</p><div class="mediaobject"><img src="/graphics/9781783552979/graphics/2979OT_04_11.jpg" /></div><p>Perform the following steps:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>BounceIn</strong></span>: Bouncing effect at the start of tween</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>BounceOut</strong></span>: Bouncing effect at the end of tween</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>EaseIn</strong></span>: Smooth acceleration effect at the start of tween</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>EaseInOut</strong></span>: Smooth acceleration and deceleration</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>EaseOut</strong></span>: Smooth deceleration effect at the end of tween</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Linear</strong></span>: Simple linear tween without any effects</p></li></ul></div><p>Great. We now know<a id="id510" class="indexterm"></a> how to add tween effects through code. Now, let's see how we can set event delegates through code.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip13"></a>Tip</h3><p>You can set the tween's <code class="literal">ignoreTimeScale</code> to <code class="literal">true</code> if you want it to always run at normal speed even if your <code class="literal">Time.timeScale</code> variable is different from 1.</p></div></div></div></div>