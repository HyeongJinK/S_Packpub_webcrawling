<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch06lvl1sec40"></a>Adding a spawn point</h2></div></div><hr /></div><p>Now that we have our <a id="id257" class="indexterm"></a>Weapon prefab put together, we are going to need a way to get it to the player. We've already answered this problem, with the chest, in the previous chapter. We will just reuse the <code class="literal">Chest</code> object to also spawn weapons as well.</p><p>Open the <code class="literal">Chest.cs</code> script that's to be edited. We will want to add a variable to store a reference to our generated weapon. Add the <code class="literal">public Weapon weapon;</code> variable right under our <code class="literal">randomItem</code> variable. Then, we need to make some adjustments to our <code class="literal">Open()</code> function, which can be seen in <span class="emphasis"><em>Code Snip 6.3</em></span>:</p><div class="informalexample"><pre class="programlisting">1 public void Open () {
2  spriteRenderer.sprite = openSprite;
3
4  GameObject toInstantiate;
5
6  if (Random.Range (0, 2) == 1) {
7    randomItem.RandomItemInit ();
8    toInstantiate = randomItem.gameObject;
9  } else {
10    toInstantiate = weapon.gameObject;
11  }
12  GameObject instance = Instantiate (toInstantiate, new Vector3 (transform.position.x, transform.position.y, 0f), Quaternion.identity) as GameObject;
13  instance.transform.SetParent (transform.parent);
14  gameObject.layer = 10;
15  spriteRenderer.sortingLayerName = "Items";
16 }</pre></div><p>This will be a<a id="id258" class="indexterm"></a> pretty simple update. We just need to add the condition that weapons can spawn as well. Let's take a look at how this can be done:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p><code class="literal">Lines 6-11</code>: We add the new random conditional here. Right now, items and weapons have a 50/50 chance that either will spawn, but you can experiment with this value as you see fit.</p></li><li style="list-style-type: disc"><p><code class="literal">Lines 12-15</code>: We pushed the actual instantiation call to the bottom of the function so that we could either instantiate an item or weapon, but we don't really need to explicitly know which is which.</p></li></ul></div><p>Returning to the Unity Editor, go to the <span class="strong"><strong>Chest</strong></span> prefab, and in the <span class="strong"><strong>Chest Script</strong></span> component, assign the <span class="strong"><strong>Weapon</strong></span> prefab to the <span class="strong"><strong>Weapon</strong></span> field. Now you can play the game and check that the chest spawns a randomized modular weapon. By interacting with some chests, you should eventually find a sword. You won't be able to pick the weapon up like you did with items, but this completes the first step.</p><div class="mediaobject"><img src="/graphics/9781785287473/graphics/B04808_06_10.jpg" /><div class="caption"><p>Chest spawning a weapon</p></div></div></div>