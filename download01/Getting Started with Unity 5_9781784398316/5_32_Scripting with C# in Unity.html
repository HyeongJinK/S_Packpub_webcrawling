<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch05lvl1sec34"></a>Scripting with C# in Unity</h2></div></div><hr /></div><p>Let's get our feet wet by jumping right in<a id="id211" class="indexterm"></a> and start scripting. The following are the steps to create a new script in Unity using C#:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Launch Unity.</p></li><li><p>Open the game project.</p></li><li><p>From the top menu, navigate and select <span class="strong"><strong>Assets</strong></span> | <span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>C# Script</strong></span>.</p></li><li><p>You'll see the script in the <span class="strong"><strong>Project</strong></span> view and you'll be in script name edit mode. Name the script <code class="literal">testScript</code>. We'll delete this script when we are finished:</p><div class="mediaobject"><img src="/graphics/9781784398316/graphics/3852_05_01.jpg" /></div><p>The script is now visible in the <span class="strong"><strong>Inspector</strong></span> view.</p></li><li><p>In the <span class="strong"><strong>Project</strong></span> view, under <span class="strong"><strong>Assets</strong></span>, double-click on the script. This will launch MonoDevelop and provide you with the ability to edit the script:</p><div class="mediaobject"><img src="/graphics/9781784398316/graphics/3852_05_02.jpg" /></div></li><li><p>Add the following line of code in MonoDevelop in line 8:</p><div class="informalexample"><pre class="programlisting">print("Hello Little Farmer Colt!");</pre></div></li><li><p>Your script should now<a id="id212" class="indexterm"></a> match the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781784398316/graphics/3852_05_03.jpg" /></div></li><li><p>In the MonoDevelop top menu, navigate and select <span class="strong"><strong>File</strong></span> | <span class="strong"><strong>Save</strong></span> or <span class="strong"><strong>File</strong></span> | <span class="strong"><strong>Save All</strong></span>.</p></li><li><p>Close the MonoDevelop window.</p></li><li><p>Review the script using the <span class="strong"><strong>Inspector</strong></span> view to ensure that your changes were saved, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781784398316/graphics/3852_05_04.jpg" /></div></li><li><p>Click on the<a id="id213" class="indexterm"></a> <span class="strong"><strong>Main Camera</strong></span> option in the <span class="strong"><strong>Hierarchy</strong></span> view.</p></li><li><p>In the <span class="strong"><strong>Project</strong></span> view, single-click on the script and drag it to the <span class="strong"><strong>Main Camera</strong></span>  option in <span class="strong"><strong>Hierarchy</strong></span> view. This attaches the script to the <span class="strong"><strong>Main Camera</strong></span> option. For scripts to be used in your game, they must be attached to a game object.</p></li><li><p>With the <span class="strong"><strong>Main Camera</strong></span> option selected in <span class="strong"><strong>Hierarchy</strong></span> view, you'll see the script listed as a component in the <span class="strong"><strong>Inspector</strong></span> view:</p><div class="mediaobject"><img src="/graphics/9781784398316/graphics/3852_05_05.jpg" /></div></li><li><p>Next, click on the play button. The script was executed and the output message was written to Unity's console pane. You'll find this in the lower-left corner of the Unity interface:</p><div class="mediaobject"><img src="/graphics/9781784398316/graphics/3852_05_06.jpg" /></div></li></ol></div><p>You can also access the output console by navigating and selecting the <span class="strong"><strong>Window</strong></span> | <span class="strong"><strong>Console</strong></span> menu option. This will bring up the console in a separate window, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781784398316/graphics/3852_05_07.jpg" /></div><p>If you followed these steps using the Little Farmer Colt game project, you'll want to delete the script. The following are the steps to completely delete the test script we created:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>In <span class="strong"><strong>Hierarchy</strong></span> view, select <a id="id214" class="indexterm"></a>the <span class="strong"><strong>Main Camera</strong></span> object.</p></li><li><p>In <span class="strong"><strong>Inspector</strong></span> view, click on the cogwheel to the right of the script object.</p></li><li><p>Select <span class="strong"><strong>Remove Component</strong></span>.</p></li><li><p>In the <span class="strong"><strong>Project</strong></span> view, right-click on the script. Click on <span class="strong"><strong>Delete</strong></span>.</p></li><li><p>Click on the <span class="strong"><strong>Delete</strong></span> button in the pop-up window, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781784398316/graphics/3852_05_08.jpg" /></div></li></ol></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec37"></a>Start and update functions</h3></div></div></div><p>You probably noticed that when we<a id="id215" class="indexterm"></a> first created our C# script, the script shell had two functions:</p><div class="informalexample"><pre class="programlisting">void Start () {    }
void Update () {    }</pre></div><p>We put our line of code in the <code class="literal">Start</code> function so<a id="id216" class="indexterm"></a> that it would run the first time the object it is attached to is initiated. The <span class="strong"><strong>Main Camera</strong></span> option is initiated when the game starts.</p><p>If we print our statement in the <code class="literal">Update</code> function, it will be run every frame. Our game is set for several frames per second, so that would be a lot of unnecessary output and processing.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec38"></a>Scripting example</h3></div></div></div><p>Let's look at a larger script to complete <a id="id217" class="indexterm"></a>our overview of scripting in Unity. The script you see in the following code is used to get user input via keyboard buttons. It is okay if you do not fully understand this script. It is presented here so that you can gain an appreciation for how scripts look in Unity. This is not something you need to type or add to your game:</p><div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;

public class ButtonInput : MonoBehaviour
{
    public GUITexture graphic;
    public Texture2D standard;
    public Texture2D downgfx;
    public Texture2D upgfx;
    public Texture2D heldgfx;
    
    void Start()
    {
        graphic.texture = standard;
    }
    
    void Update ()
    {
        bool down = Input.GetButtonDown("Jump");
        bool held = Input.GetButton("Jump");
        bool up = Input.GetButtonUp("Jump");
        
        if(down)
        {
            graphic.texture = downgfx;
        }
        else if(held)
        {
            graphic.texture = heldgfx;
        }
        else if(up)
        {
            graphic.texture = upgfx;
        }
        else
        {
            graphic.texture = standard;
        }
    
        guiText.text = " " + down + "\n " + held + "\n " + up;
    }
}</pre></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip04"></a>Tip</h3><p><span class="strong"><strong>Downloading the example code</strong></span></p><p>You can download the example code files for all Packt books you have purchased from your account at <a class="ulink" href="http://www.packtpub.com" target="_blank">http://www.packtpub.com</a>. If you purchased this book elsewhere, you can visit <a class="ulink" href="http://www.packtpub.com/support" target="_blank">http://www.packtpub.com/support</a> and register to have the files e-mailed directly to you.</p></div><p>This script contains a <code class="literal">ButtonInput</code> class that has a <code class="literal">Start</code> and an <code class="literal">Update</code> method. The <code class="literal">Start</code> function is<a id="id218" class="indexterm"></a> executed once the game first starts. The <code class="literal">Update</code> method is executed in each frame of the game while it is running. This function is how we would detect the button input associated with "Jump."</p><p>As you can probably tell, there are four possible states for this button: down, held, up, and nothing. We do not need to look for the button's nothing state as that is the defaultâ€”that the player is not touching the button. The down, held, and up states are self-explanatory.</p><p>The code is offered here so you can get used to looking at it. Once you start learning how to program in C#, this code will be easier to read.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec39"></a>Unity scripting assets</h3></div></div></div><p>You already have experience with <a id="id219" class="indexterm"></a>Unity's Asset Store and might already have noticed that scripting is one of the asset categories in the store. There are thousands of scripts for free or paid that are readily available in the Asset Store.</p><p>The following screenshot shows a sample free script from Unity Technologies, the folks that created Unity:</p><div class="mediaobject"><img src="/graphics/9781784398316/graphics/3852_05_09.jpg" /></div><p>The Lens Flares scripting asset <a id="id220" class="indexterm"></a>includes sixteen lens flares that you can use in your games. Because the asset is free, you merely need to click on the <span class="strong"><strong>Open in Unity</strong></span> button.</p><p>You can save a lot of time by using pre-existing scripts.</p><p>Now that you have a basic understanding of the C# language and how scripts are used in Unity, it is time to apply this to our game. We'll do that in the next section.</p></div></div>