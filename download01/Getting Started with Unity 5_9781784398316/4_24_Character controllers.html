<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec27"></a>Character controllers</h2></div></div><hr /></div><p>There are two types of <a id="id149" class="indexterm"></a>player characters in games: those controlled by human players and those controlled by computers. The first type is known as a player <a id="id150" class="indexterm"></a>character while the other type is referred to as a non-player character. Player characters can be almost anything you can imagine. In modern games, player characters are usually human or humanoid. This is not to say you cannot create a game in which the player character is an uprooted tree or a rock with seven legs. For our game, the player character will be a human boy named Colt.</p><p>Unity uses a game object called a character controller to enable user controls. There are two types of character controllers in Unity. The two types are first person controller and third person controller. The types refer to the user perspective, first or third, used during the game. Take a look at the following image that shows the player perspective:</p><div class="mediaobject"><img src="/graphics/9781784398316/graphics/3852_04_01.jpg" /></div><p>With first person controllers, only part of the player's character is visible on screen. Most games will display hands, arms, fists, weapons, or some combination. The perspective the game is played is essentially through the character's eyes. Third person controllers allow the entire character to be <a id="id151" class="indexterm"></a>seen during gameplay.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec29"></a>First person controller</h3></div></div></div><p>We will not need a first <a id="id152" class="indexterm"></a>person controller in our <span class="emphasis"><em>Little Farmer Colt</em></span> game, but it is important to understand how to create one for other games you might create with Unity.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip03"></a>Tip</h3><p>This section provides instructions based on the assumption that you have worked through the previous chapters. If you get stuck on a step, refer back to the earlier chapter that covers that step.</p></div><p>To create a first person <a id="id153" class="indexterm"></a>controller, perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Launch Unity.</p></li><li><p>Create a new 3D project.</p></li><li><p>Import the <span class="strong"><strong>Characters and Environment Asset Packages</strong></span>.</p></li><li><p>Create a new terrain and add a texture to it. This will help you see the first person controller object in the <span class="strong"><strong>Scene</strong></span> view.</p></li><li><p>In the <span class="strong"><strong>Project</strong></span> view, navigate and select <span class="strong"><strong>Assets</strong></span> | <span class="strong"><strong>Sample Assets</strong></span> | <span class="strong"><strong>Characters</strong></span> | <span class="strong"><strong>FirstPersonCharacter</strong></span> | <span class="strong"><strong>Prefabs</strong></span>.</p></li><li><p>In the <span class="strong"><strong>Project</strong></span> view's second column, select the <span class="strong"><strong>FPSController</strong></span> object and drag it to the <span class="strong"><strong>Scene</strong></span> view. Release the mouse and you will have a first person controller in your scene:</p><div class="mediaobject"><img src="/graphics/9781784398316/graphics/3852_04_02.jpg" /></div></li></ol></div><p>A cylinder shape represents the first person controller. The controller can be tied to an avatar so that it looks like an actual character. Because this is a first person controller, you will not see any part of the character when you put your game in play mode.</p><p>Click on the <span class="strong"><strong>play</strong></span> button to test the controller in game play mode. You can move the controller around with the arrow keys.</p><p>There is a lot more to the <a id="id154" class="indexterm"></a>first person controller. If you intend to <a id="id155" class="indexterm"></a>create a game that uses this controller, you'll gain great insights in Unity's online documentation. For more complex games, developers typically create custom controllers.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec30"></a>Creating a third person controller</h3></div></div></div><p>Unity comes with a <a id="id156" class="indexterm"></a>third person controller asset as <a id="id157" class="indexterm"></a>part of the character package. The avatar associated with this controller is called Ethan.</p><div class="mediaobject"><img src="/graphics/9781784398316/graphics/3852_04_03.jpg" /></div><p>This is a great avatar to experiment with, but there is no place for Ethan in our game. To allow players to control the little farmer character, we'll need to implement a third person controller for him <a id="id158" class="indexterm"></a>instead of Ethan. To do so, perform the <a id="id159" class="indexterm"></a>following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Launch Unity.</p></li><li><p>Open the game project.</p></li><li><p>Load the scene.</p></li><li><p>Using the transform tools in <span class="strong"><strong>Scene</strong></span> view, adjust the view of the terrain so we are looking at the bridge from ground level. This will help you see where to place the character.</p><div class="mediaobject"><img src="/graphics/9781784398316/graphics/3852_04_04.jpg" /></div></li><li><p>In the <span class="strong"><strong>Project</strong></span> view, select the <span class="strong"><strong>SampleAssets</strong></span> folder.</p></li><li><p>From the top menu, navigate and select <span class="strong"><strong>Assets</strong></span> | <span class="strong"><strong>Import Package</strong></span> | <span class="strong"><strong>Characters</strong></span>. The <a id="id160" class="indexterm"></a>asset package will be decompressed and then the <span class="strong"><strong>Importing package</strong></span> dialog window will be <a id="id161" class="indexterm"></a>displayed. Ensure all items are checked and then click on the <span class="strong"><strong>Import</strong></span> button.</p></li><li><p>In the <span class="strong"><strong>Project</strong></span> view, expand the folders until you see <span class="strong"><strong>SampleAssets</strong></span> | <span class="strong"><strong>Characters</strong></span> | <span class="strong"><strong>ThirdPersonCharacter</strong></span> | <span class="strong"><strong>Prefabs</strong></span>. Click on the <span class="strong"><strong>Prefabs</strong></span> folder. In the <span class="strong"><strong>Project</strong></span> view's second column, you will see an object labeled <span class="strong"><strong>ThirdPersonController</strong></span>.</p><div class="mediaobject"><img src="/graphics/9781784398316/graphics/3852_04_05.jpg" /></div></li><li><p>Click on the <span class="strong"><strong>ThirdPersonCharacter</strong></span> object and drag it into the <span class="strong"><strong>Scene</strong></span> view. Drop the object <a id="id162" class="indexterm"></a>on top of the bridge.</p></li><li><p>Zoom in on the <a id="id163" class="indexterm"></a>new object and you will see that it is Ethan encased in a character controller.</p><div class="mediaobject"><img src="/graphics/9781784398316/graphics/3852_04_06.jpg" /></div></li></ol></div><p>At this point, you can run the game in play mode and use Ethan to explore the game environment. Next, we'll <a id="id164" class="indexterm"></a>swap out Ethan for Colt. To do so, perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>In the <span class="strong"><strong>Scene</strong></span> view, expand the <span class="strong"><strong>ThirdPersonController</strong></span> object. You will see three items listed, all <a id="id165" class="indexterm"></a>starting with the name Ethan:</p><div class="mediaobject"><img src="/graphics/9781784398316/graphics/3852_04_07.jpg" /></div></li><li><p>Delete the three items that start with the name Ethan. At this point, our third person controller still exists; it is just lacking an avatar.</p></li><li><p>In <span class="strong"><strong>Project</strong></span> view, navigate and select <span class="strong"><strong>Assets</strong></span> | <span class="strong"><strong>Farmer Boy</strong></span> and then, in the second column, select <a id="id166" class="indexterm"></a>the <span class="strong"><strong>FarmerBoy</strong></span> <a id="id167" class="indexterm"></a>object.</p><div class="mediaobject"><img src="/graphics/9781784398316/graphics/3852_04_08.jpg" /></div></li><li><p>Drag the <span class="strong"><strong>FarmerBoy</strong></span> object from the <span class="strong"><strong>Project</strong></span> view to the <span class="strong"><strong>Hierarchy</strong></span> view and drop it on top of the <span class="strong"><strong>ThirdPersonController</strong></span> object:</p><div class="mediaobject"><img src="/graphics/9781784398316/graphics/3852_04_09.jpg" /></div></li><li><p>You will now see Colt standing on the bridge, instead of Ethan.</p><div class="mediaobject"><img src="/graphics/9781784398316/graphics/3852_04_10.jpg" /></div></li><li><p>Save the scene and the project. You should do this often.</p></li><li><p>The next thing we need to do is to tell Unity which controller to use for the Animator. In the <a id="id168" class="indexterm"></a>
<span class="strong"><strong>Hierarchy</strong></span> view, navigate and select <span class="strong"><strong>ThirdPersonController</strong></span> | <span class="strong"><strong>FarmerBoy</strong></span>.</p></li><li><p>In the <span class="strong"><strong>Inspector</strong></span> <a id="id169" class="indexterm"></a>view, select the small circle icon to the right of the <span class="strong"><strong>Controller</strong></span> text box. This is in the <span class="strong"><strong>Animator</strong></span> section of the <span class="strong"><strong>Inspector</strong></span> view.</p><div class="mediaobject"><img src="/graphics/9781784398316/graphics/3852_04_11.jpg" /></div></li><li><p>The <span class="strong"><strong>Select Runtime</strong></span><a id="id170" class="indexterm"></a>
<span class="strong"><strong>AnimatorController</strong></span> window will appear. Click on the <span class="strong"><strong>Assets</strong></span> tab and then double-click on the <a id="id171" class="indexterm"></a>
<span class="strong"><strong>Farmer_Boy</strong></span> item:</p><div class="mediaobject"><img src="/graphics/9781784398316/graphics/3852_04_12.jpg" /></div></li><li><p>Select the third person <a id="id172" class="indexterm"></a>controller that was chosen in the <span class="strong"><strong>Hierarchy</strong></span> view.</p></li><li><p>In the <span class="strong"><strong>Inspector</strong></span> <a id="id173" class="indexterm"></a>view, you will notice that we have Ethan as our avatar. Although we have already changed this, changing the <span class="strong"><strong>Runtime Animation Controller</strong></span> option has changed the setting:</p><div class="mediaobject"><img src="/graphics/9781784398316/graphics/3852_04_13.jpg" /></div></li><li><p>So, if you see Ethan listed as the avatar in the <span class="strong"><strong>Animator</strong></span> section of the <span class="strong"><strong>Inspector</strong></span> view, click <a id="id174" class="indexterm"></a>on the little circle to <a id="id175" class="indexterm"></a>the right of that field and select <span class="strong"><strong>FarmerBoyAvatar</strong></span> from the <span class="strong"><strong>Select Avatar</strong></span> dialog window.</p><div class="mediaobject"><img src="/graphics/9781784398316/graphics/3852_04_14.jpg" /></div></li><li><p>In the <span class="strong"><strong>Scene</strong></span> view, zoom in on the character so you can see the player controller. Remember, a light green-framed cylinder represents the player controller. You'll notice <a id="id176" class="indexterm"></a>that the cylinder is smaller than Colt. We must make sure that our character fits inside the character controller.</p></li><li><p>Select the <a id="id177" class="indexterm"></a>
<span class="strong"><strong>ThirdPersonController</strong></span> option in the <span class="strong"><strong>Hierarchy</strong></span> view. With this selected, we will make changes to the <span class="strong"><strong>Capsule Collider</strong></span> section of the <span class="strong"><strong>Inspector</strong></span> view.</p></li><li><p>In the <span class="strong"><strong>Inspector</strong></span> view, in the <span class="strong"><strong>Capsule Collider</strong></span> section, change the <span class="strong"><strong>Center Y</strong></span> value to <code class="literal">0.8</code>, the <span class="strong"><strong>Radius</strong></span> value to <code class="literal">1</code>, and the <span class="strong"><strong>Height</strong></span> value to <code class="literal">6</code>.</p><div class="mediaobject"><img src="/graphics/9781784398316/graphics/3852_04_15.jpg" /></div></li><li><p>The <span class="strong"><strong>Capsule Collider</strong></span> should now completely encapsulate Colt. Zoom in on Colt in the <span class="strong"><strong>Scene</strong></span> <a id="id178" class="indexterm"></a>view to make sure your <a id="id179" class="indexterm"></a>collider is large enough.</p><div class="mediaobject"><img src="/graphics/9781784398316/graphics/3852_04_16.jpg" /></div></li><li><p>We need to make one final change. We'll change Colt's y coordinate so that he is slightly above the ground. In the <span class="strong"><strong>Inspector</strong></span> view, change the <span class="strong"><strong>Position Y Transform</strong></span> value to <code class="literal">0.2</code>. This will prevent Colt from falling through the terrain.</p><div class="mediaobject"><img src="/graphics/9781784398316/graphics/3852_04_17.jpg" /></div></li></ol></div><p>You can now put your game into play mode and watch the Colt character come to life. You can use the arrow keys to <a id="id180" class="indexterm"></a>rotate him and to have him explore the game world.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note07"></a>Note</h3><p>One word of caution: Colt cannot swim, nor can he walk on water. So, at least for now, I recommend <a id="id181" class="indexterm"></a>keeping him out of the water.</p></div><p>In later sections, we'll add more animations and functionality to Colt.</p></div></div>