<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch05lvl1sec42"></a>Attacking the enemy</h2></div></div><hr /></div><p>Players tend to become <a id="id328" class="indexterm"></a>frustrated quickly when faced with an enemy that they are unable to fight against. So, we are going to give our player the ability to damage and destroy the enemy tank. This will function in a similar manner to how the targets are shot.</p><p>The easiest way to weaken our enemies is to give them some health that will reduce when they are shot. We can then destroy them when they run out of health. Let's create a script with these steps to do this:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>We will start by <a id="id329" class="indexterm"></a>creating a new script and naming it <code class="literal">Health</code>.</p></li><li><p>This script is rather short and starts with a single variable. This variable will keep track of the remaining health of the tank. By setting the default value to <code class="literal">3</code>, the tank will be able to survive three hits before being destroyed.</p><div class="informalexample"><pre class="programlisting">public int health = 3;</pre></div></li><li><p>This script also contains only one function, <code class="literal">Hit</code>. As in the case of the targets, this function is called by the <code class="literal">BroadcastMessage</code> function when the player shoots at it. The first line of the function reduces <code class="literal">health</code> by one point. The next line checks to see whether <code class="literal">health</code> is below zero. If it is, the tank is destroyed by calling the <code class="literal">Destroy</code> function and passing the <code class="literal">gameObject</code> variable to it. We also give the player a handful of points.</p><div class="informalexample"><pre class="programlisting">public void Hit() {
  health--;
  if(health &lt;= 0) {
    Destroy(gameObject);
    ScoreCounter.score += 5;
  }
}</pre></div></li><li><p>It really is just that simple. Now, add the new script to the <code class="literal">EnemyTank</code> prefab in the <span class="strong"><strong>Project</strong></span> window, and it will update all the enemy tanks that you currently have in the scene.</p></li><li><p>Try this out: add a few extra enemy tanks to the scene and watch them follow you around and disappear when you shoot them.</p></li></ol></div><p>Here, we gave the enemy tank a weakness, health. By creating a short script, the tank is able to track its health and detect when it has been shot. Once the tank runs out of health, it is removed from the game.</p><p>We now have two targets to shoot at: the animated ones and the tank. However, they are both indicated with red slices. Try to make the ones that point at tanks to be of a different color. You will have to make a duplicate of the <code class="literal">IndicatorSlice</code> prefab and change the <code class="literal">IndicatorControl</code> script so that it can be told which type of slice to use when the <code class="literal">CreateSlice</code> and <code class="literal">NewSlice</code> functions are called.</p><p>As a further challenge, the moment we give a creature some health, players want to be able to see how much damage they have done to it. There are two ways you could do this. First, you could put a cluster of cubes above the tank. Then, each time the tank loses health, you will have to <a id="id330" class="indexterm"></a>delete one of the cubes. The second option is a little more difficultâ€”drawing the bar in the GUI and changing its size based on the remaining health. To make the bar stay above the tank as the camera moves around, take a look at <code class="literal">Camera.WorldToScreenPoint</code> in the documentation.</p></div>