<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch07lvl1sec59"></a>Level selection</h2></div></div><hr /></div><p>Finally, we<a id="id462" class="indexterm"></a> need to create our level selection screen. From this scene, we will be able to access and start playing all the levels we created earlier. We will also display the current high scores for each level. A new scene and a single script will serve us well in managing our level selection. Let's use these steps to do it:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>This last section begins by saving our current scene and pressing <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>N</em></span> to create a new one; we will name it <code class="literal">LevelSelect</code>.</p></li><li><p>For this scene, we need to create a single, short script also named <code class="literal">LevelSelect</code>.</p></li><li><p>This script is going to work with the buttons in the GUI to tell players about the high scores and load levels. However, before we can do this, we need to add a line at the very beginning of the script, along with the other <code class="literal">using</code> linesâ€”just like the other scripts we have created that need to update the GUI:</p><div class="informalexample"><pre class="programlisting">using UnityEngine.UI;</pre></div></li><li><p>The first and only variable is a list of all the button text that we want to update, with the high scores for the levels they are associated with:</p><div class="informalexample"><pre class="programlisting">public Text[] buttonText = new Text[0];</pre></div></li><li><p>The first function is the <code class="literal">Awake</code> function. Here, it loops through all the buttons, finds the high score for it, and updates the text to display it. <code class="literal">PlayerPrefs.GetInt</code> is the opposite of the <code class="literal">SetInt</code> function we used earlier to save the high score:</p><div class="informalexample"><pre class="programlisting">public void Awake() {
  for(int i=0;i&lt;buttonText.Length;i++) {
    int levelScore = PlayerPrefs.GetInt("LevelScore" + (i + 1), 0);
    buttonText[i].text = "Level " + (i + 1) + "\nScore: " + levelScore;
  }
}</pre></div></li><li><p>The second and last function for this script is <code class="literal">LoadLevel</code>. It will receive a number from the GUI button and use it to load the level that the players want to play:</p><div class="informalexample"><pre class="programlisting">public void LoadLevel(int lvl) {
  Application.LoadLevel(lvl);
}</pre></div></li><li><p>Return to Unity and add the script to the <code class="literal">Main Camera</code> object.</p></li><li><p>Next, we need to create three buttons. Without these, our player will not be able to select a level to play. Make each of them of <code class="literal">200</code> units square and position them in a row in the center of the screen. Also, increase the value of <span class="strong"><strong>Font Size</strong></span> to <code class="literal">25</code>, so that the text is easy to read.</p></li><li><p>Drag <a id="id463" class="indexterm"></a>each of the buttons' <code class="literal">Text</code> children to the <span class="strong"><strong>Button Texts</strong></span> list on the <code class="literal">Main Camera</code> component's <span class="strong"><strong>Level Select</strong></span> script component. The way they are ordered in this list is the order in which they will get their text and high score information changed.</p></li><li><p>Also, each button needs a new <span class="strong"><strong>On Click</strong></span> event. Select <code class="literal">Main Camera</code> for the object and then navigate to <span class="strong"><strong>LevelSelect</strong></span> | <span class="strong"><strong>LoadLevel (int)</strong></span> for the function. Then, each button needs a number. The button that has its <span class="strong"><strong>Text</strong></span> child in the <span class="strong"><strong>Button Texts</strong></span> list should have the number <code class="literal">1</code> since it will display the information for level one. The second has <code class="literal">2</code>, the third has <code class="literal">3</code>, and so on. Each button must have the same number as the order in the list, or they will cause a different level to load than what the player is expecting.</p></li><li><p>Finally, open <span class="strong"><strong>Build Settings</strong></span> and add your scenes to the <span class="strong"><strong>Scenes in Build</strong></span> list. Clicking and dragging on the scenes in the list will let you reorder them. Make sure that your <span class="strong"><strong>LevelSelect</strong></span> scene is first and has an index of zero at the right-hand side. The rest of your scenes can appear in whatever order you desire. However, beware as they will be associated with the buttons in the same order.</p><div class="mediaobject"><img src="/graphics/9781784394691/graphics/4691OT_07_07.jpg" /></div></li></ol></div><p>We have created a level selection screen. It has a list of buttons associated with the levels in our game. When a button is pressed, <code class="literal">Application.LoadLevel</code> starts that level. We also made use of <code class="literal">PlayerPrefs.GetInt</code> to retrieve the high scores for each of the levels.</p><p>Here, the challenge<a id="id464" class="indexterm"></a> is to style the GUI to make the screen look great. A logo and a background will help a lot. Additionally, take a look at the <span class="strong"><strong>Scrollbar</strong></span> GUI object if you have more than three levels. This object will let you create a function that offsets the level buttons when the user scrolls through a list of levels that are far greater in size than can be easily seen on the screen.</p></div>