<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec19"></a>Creating a Tic-tac-toe game</h2></div></div><hr /></div><p>The <a id="id103" class="indexterm"></a>project for this chapter is a simple Tic-tac-toe style game, similar to what any of us might play on paper. As with anything else, there are several ways in which you can make this game. We are going to use Unity's uGUI system in order to better understand how to create a GUI for any of our other games.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec14"></a>The game board</h3></div></div></div><p>The<a id="id104" class="indexterm"></a> basic Tic-tac-toe game involves two players and a 3 x 3 grid. The players take turns filling squares with Xs and Os. The player who first fills a line of three squares with his or her letter wins the game. If all squares are filled without a player achieving a line of three, the game is a tie. Let's start with the following steps to create our game board:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>The first thing to do is to create a project for this chapter. So, start up Unity and we will do just that.</p><p>If you have been following along so far, Unity should boot up into the last project that was open. This isn't a bad feature, but it can become extremely annoying. Think of it like this: you have been working on a project for a while and it has grown large. Now you need to quickly open something else, but Unity defaults to your huge project. If you wait for it to open before you can work on anything else, it can consume a lot of time.</p><p>To change this feature, go to the top of the Unity window and click on <span class="strong"><strong>Edit</strong></span>, followed by <span class="strong"><strong>Preferences</strong></span>. This is the same place where we changed our script editor's preferences. This time, though, we are going to change settings in the <span class="strong"><strong>General</strong></span> tab. The following screenshot shows the options that are present under the <span class="strong"><strong>General</strong></span> tab:</p><div class="mediaobject"><img src="/graphics/9781784394691/graphics/4691OT_02_01.jpg" /></div></li><li><p>At this <a id="id105" class="indexterm"></a>moment, our primary concern is the <span class="strong"><strong>Load Previous Project on Startup</strong></span> option; however, we will still cover all the options<a id="id106" class="indexterm"></a> in turn. All the options under the <span class="strong"><strong>General</strong></span> tab are explained in detail as follows:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p><span class="strong"><strong>Auto Refresh</strong></span>: This is one of the best features of Unity. Because an asset is changed outside of Unity, this option lets Unity automatically detect the change and refresh the asset inside your project.</p></li><li style="list-style-type: disc"><p><span class="strong"><strong>Load Previous Project on Startup</strong></span>: This is a great option, and you should make sure that this is unchecked whenever installing Unity. When checked, Unity will immediately open the last project you worked on rather than <span class="strong"><strong>Project Wizard</strong></span>.</p></li><li style="list-style-type: disc"><p><span class="strong"><strong>Compress Assets on Import</strong></span>: This is the checkbox for automatically compressing your game assets when they are first imported into Unity.</p></li><li style="list-style-type: disc"><p><span class="strong"><strong>Editor Analytics</strong></span>: This checkbox is for Unity's anonymous usage statistics. Leave it checked and the Unity Editor will send information occasionally to the Unity source. It doesn't hurt anything to leave it on and helps the Unity team to make the Unity Editor better; however, it comes down to personal preference.</p></li><li style="list-style-type: disc"><p><span class="strong"><strong>Show Asset Store search hits</strong></span>: This setting is only relevant if you plan to use <span class="strong"><strong>Asset Store</strong></span>. The asset store can be a great source of assets and tools for any game; however, since we are not going to use it, its relevance to this book is rather limited. It does what the name suggests. When you search the asset store for something within the Unity Editor, the number of results is displayed based on this checkbox.</p></li><li style="list-style-type: disc"><p><span class="strong"><strong>Verify Saving Assets</strong></span>: This is a good one to leave unchecked. If this is on, every time you click on <span class="strong"><strong>Save</strong></span> in Unity, a dialog box will pop up so that <a id="id107" class="indexterm"></a>you can make sure to save any and all of the assets that have changed since your last save. This option is not so much about your models and textures, but is concerned with Unity's internal files, materials, and prefabs. It's best to leave it off for now.</p></li><li style="list-style-type: disc"><p><span class="strong"><strong>Skin (Pro Only)</strong></span>: This option only applies to Unity Pro users. It gives the option to switch between the light and dark versions of the Unity Editor. It is purely cosmetic, so go with your gut for this one.</p></li></ul></div></li><li><p>With your preferences set, now go to <span class="strong"><strong>File</strong></span> and then select <span class="strong"><strong>New Project</strong></span>.</p></li><li><p>Click on the <span class="strong"><strong>Browse...</strong></span> button to pick a location and name for the new project.</p></li><li><p>We will not be using any of the included packages, so click on <span class="strong"><strong>Create</strong></span> and we can get on with it.</p></li></ol></div><p>By changing <a id="id108" class="indexterm"></a>a few simple options, we can save ourselves a lot of trouble later. This may not seem like that big of a deal now for simple projects from this book, but for large and complex projects, not choosing the correct options can cause a lot of hassle for you even if you just want to make a quick switch between projects.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl3sec26"></a>Creating the board</h4></div></div></div><p>With<a id="id109" class="indexterm"></a> the new project created, we have a clean slate to create our game. Before we can create the core functionality, we need to set up some structure in our scene for our game to work and our players to interact with:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Once Unity finishes initializing the new project, we need to create a new <span class="strong"><strong>canvas</strong></span>. We<a id="id110" class="indexterm"></a> can do this by navigating to <span class="strong"><strong>GameObject</strong></span> | <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Canvas</strong></span>. The whole of <a id="id111" class="indexterm"></a>Unity's uGUI system requires a canvas in order to draw anything on the screen. It has a few key components, as you can see in the following <span class="strong"><strong>Inspector</strong></span> window, which allow it and everything else in your interface to work:</p><div class="mediaobject"><img src="/graphics/9781784394691/graphics/4691OT_02_08.jpg" /></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p><span class="strong"><strong>Rect Transform</strong></span>: This is a special type of the normal transform component that you will find on nearly every other object you will use in your games. It keeps track of the object's position on screen, its size, its rotation, the pivot point around which it will rotate, and how it will behave when the screen size changes. By default, the Rect Transform for a canvas is locked to include the whole screen's size.</p></li><li style="list-style-type: disc"><p><span class="strong"><strong>Canvas</strong></span>: This component controls how it and the interface elements it controls interact with the camera and your scene. You can change this by adjusting <span class="strong"><strong>Render Mode</strong></span>. The default mode, <span class="strong"><strong>Screen Space – Overlay</strong></span>, means that everything will be drawn on screen and over the top of everything else in the scene. The <span class="strong"><strong>Screen Space – Camera</strong></span> mode will draw everything a specific distance away from the camera. This allows your interface to be affected by the perspective nature of the camera, but any models that might be closer to the camera will appear in front of it. The <span class="strong"><strong>World Space</strong></span> mode ensures that the canvas and elements it controls are drawn in the world just like any of the models in your scene.</p></li><li style="list-style-type: disc"><p><span class="strong"><strong>Graphics Raycaster</strong></span>: This is the component that lets you actually interact with and click on your various interface elements.</p></li></ul></div></li><li><p>When <a id="id112" class="indexterm"></a>you added the canvas, an extra object called <span class="strong"><strong>EventSystem</strong></span> was also created. This is what allows our buttons and other interface elements to interact with our scripts. If you ever accidentally delete it, you can recreate it by going to the top of Unity and navigating to <span class="strong"><strong>GameObject</strong></span> | <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>EventSystem</strong></span>.</p></li><li><p>Next, we need to adjust the way the Unity Editor will display our game so that we can easily make our game board. To do this, switch to the <span class="strong"><strong>Game</strong></span> view by clicking on its tab at the top of the <span class="strong"><strong>Scene</strong></span> view.</p></li><li><p>Then, click on the button that says <span class="strong"><strong>Free Aspect</strong></span> and select the option near the bottom: <span class="strong"><strong>3 : 2 Landscape (3 : 2)</strong></span>. Most of the mobile devices your games will be played on will use a screen that approximates this ratio. The rest will not see any distortion in your game.</p></li><li><p>To allow our game to adjust to the various resolutions, we need to add a new component to our canvas object. With it selected in the <span class="strong"><strong>Hierarchy</strong></span> panel, click on <span class="strong"><strong>Add Component</strong></span> in the <span class="strong"><strong>Inspector</strong></span> panel and navigate to <span class="strong"><strong>Layout</strong></span> | <span class="strong"><strong>Canvas Scaler</strong></span>. The selected component allows us to work from a base screen resolution, letting it automatically scale our GUI as the devices change.</p></li><li><p>To select a base resolution, select <span class="strong"><strong>Scale With Screen Size</strong></span> from the <span class="strong"><strong>Ui Scale Mode</strong></span> drop-down list.</p></li><li><p>Next, let's put <code class="literal">960</code> for <span class="strong"><strong>X</strong></span> and <code class="literal">640</code> for <span class="strong"><strong>Y</strong></span>. It is better to work from a larger resolution than a smaller one. If your resolution is too small, all your GUI elements will look fuzzy when they are scaled up for high-resolution devices.</p></li><li><p>To keep <a id="id113" class="indexterm"></a>things organized, we need to create three empty GameObjects. Go back to the top of Unity and select<span class="strong"><strong> Create Empty</strong></span> three times under <span class="strong"><strong>GameObject</strong></span>.</p></li><li><p>In the <span class="strong"><strong>Hierarchy</strong></span> tab, click and drag them to our canvas to make them the canvas's children.</p></li><li><p>To make each of them usable for organizing our GUI elements, we need to add the Rect Transform component. Find it by navigating to <span class="strong"><strong>Add Component</strong></span> | <span class="strong"><strong>Layout</strong></span> | <span class="strong"><strong>Rect Transform</strong></span> in <span class="strong"><strong>Inspector</strong></span> for each.</p></li><li><p>To rename them, click on their name at the top of the <span class="strong"><strong>Inspector</strong></span> and type in a new name. Name one <code class="literal">Board</code>, another <code class="literal">Buttons</code>, and the last one <code class="literal">Squares</code>.</p></li><li><p>Next, make <code class="literal">Buttons</code> and <code class="literal">Squares</code> children of <code class="literal">Board</code>. The <code class="literal">Buttons</code> element will hold all the pieces of our game board that are clickable while <code class="literal">Squares</code> will hold the squares that have already been selected.</p></li><li><p>To keep the <code class="literal">Board</code> element at the same place as the devices change, we need to change the way it anchors to its parent. Click on the box with a red cross and a yellow dot in the center at the top right of <span class="strong"><strong>Rect Transform</strong></span> to expand the <span class="strong"><strong>Anchor Presets</strong></span> menu:</p><div class="mediaobject"><img src="/graphics/9781784394691/graphics/4691OT_02_02.jpg" /></div></li><li><p>Each of these options affects which corner of the parent the element will stick to as the screen changes size. We want to select the bottom-right option with four arrows, one in each direction. This will make it stretch with the parent element.</p></li><li><p>Make <a id="id114" class="indexterm"></a>the same change to <code class="literal">Buttons</code> and <code class="literal">Squares</code>, as well.</p></li><li><p>Set <span class="strong"><strong>Left</strong></span>, <span class="strong"><strong>Top</strong></span>, <span class="strong"><strong>Right</strong></span>, and <span class="strong"><strong>Bottom</strong></span> of each of these objects to <code class="literal">0</code>. Also, make sure that <span class="strong"><strong>Rotation</strong></span> is set to <code class="literal">0</code> and <span class="strong"><strong>Scale</strong></span> is set to <code class="literal">1</code>. Otherwise, our interface may be scaled oddly when we work or play on it.</p></li><li><p>Next, we need to change the anchor point of the board. If <span class="strong"><strong>Anchor</strong></span> is not expanded, click on the little triangle on the left-hand side to expand it. Either way, the <span class="strong"><strong>Max X</strong></span> value needs to be set to <code class="literal">0.667</code> so that our board will be a square and cover the left two-thirds of our screen.</p></li></ol></div><p>This game board is the base around which the rest of our project will be created. Without it, the game won't be playable. The game squares use it to draw themselves on screen and anchor themselves to relevant places. Later, when we create menus, is needed to make sure that a player only sees what we need he or she to be interacting with at that moment.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl3sec27"></a>Game squares</h4></div></div></div><p>Now that <a id="id115" class="indexterm"></a>we have our base game board in place, we need the actual game squares. Without them, it is going to be kind of hard to play the game. We need to create nine buttons for the player to click on, nine images for the background of the selected squares, and nine texts to display which person controls the squares. To create and set them up, perform these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Navigate to <span class="strong"><strong>Game Object</strong></span> | <span class="strong"><strong>UI</strong></span> just like we did for the canvas, but this time select <span class="strong"><strong>Button</strong></span>, <span class="strong"><strong>Image</strong></span>, and <span class="strong"><strong>Text</strong></span> to create everything we need.</p></li><li><p>Each of the image objects needs one of the text objects as a child. Then, all the images must be children of the <code class="literal">Squares</code> object and the buttons must be children of the <code class="literal">Buttons</code> object.</p></li><li><p>All the buttons and images need a number in their name so that we can keep them organized. Name the buttons <code class="literal">Button0</code> through <code class="literal">Button8</code> and the images <code class="literal">Square0</code> through <code class="literal">Square8</code>.</p></li><li><p>The next step is to lay out our board so that we can keep things organized and in sync with our programming. We need to set each numbered set specifically. But first, pick the crossed arrows from the bottom-right corner of <span class="strong"><strong>Anchor Presets</strong></span> for all of them and ensure that their <span class="strong"><strong>Left</strong></span>, <span class="strong"><strong>Top</strong></span>, <span class="strong"><strong>Right</strong></span>, and <span class="strong"><strong>Bottom</strong></span> values are set to <code class="literal">0</code>.</p></li><li><p>To set each of our buttons and squares at the right place, just match the numbers to the<a id="id116" class="indexterm"></a> following table. The result will be that all the squares will be in order, starting at the top left and ending at the bottom right:</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; "><colgroup><col align="left" /><col align="left" /><col align="left" /><col align="left" /><col align="left" /></colgroup><thead><tr><th style="border-bottom: 0.5pt solid ; " align="left" valign="bottom">
<p>Square</p>
</th><th style="border-bottom: 0.5pt solid ; " align="left" valign="bottom">
<p>Min X</p>
</th><th style="border-bottom: 0.5pt solid ; " align="left" valign="bottom">
<p>Min Y</p>
</th><th style="border-bottom: 0.5pt solid ; " align="left" valign="bottom">
<p>Max X</p>
</th><th style="border-bottom: 0.5pt solid ; " align="left" valign="bottom">
<p>Max Y</p>
</th></tr></thead><tbody><tr><td style="" align="left" valign="top">
<p>0</p>
</td><td style="" align="left" valign="top">
<p>0</p>
</td><td style="" align="left" valign="top">
<p>0.67</p>
</td><td style="" align="left" valign="top">
<p>0.33</p>
</td><td style="" align="left" valign="top">
<p>1</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>1</p>
</td><td style="" align="left" valign="top">
<p>0.33</p>
</td><td style="" align="left" valign="top">
<p>0.67</p>
</td><td style="" align="left" valign="top">
<p>0.67</p>
</td><td style="" align="left" valign="top">
<p>1</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>2</p>
</td><td style="" align="left" valign="top">
<p>0.67</p>
</td><td style="" align="left" valign="top">
<p>0.67</p>
</td><td style="" align="left" valign="top">
<p>1</p>
</td><td style="" align="left" valign="top">
<p>1</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>3</p>
</td><td style="" align="left" valign="top">
<p>0</p>
</td><td style="" align="left" valign="top">
<p>0.33</p>
</td><td style="" align="left" valign="top">
<p>0.33</p>
</td><td style="" align="left" valign="top">
<p>0.67</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>4</p>
</td><td style="" align="left" valign="top">
<p>0.33</p>
</td><td style="" align="left" valign="top">
<p>0.33</p>
</td><td style="" align="left" valign="top">
<p>0.67</p>
</td><td style="" align="left" valign="top">
<p>0.67</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>5</p>
</td><td style="" align="left" valign="top">
<p>0.67</p>
</td><td style="" align="left" valign="top">
<p>0.33</p>
</td><td style="" align="left" valign="top">
<p>1</p>
</td><td style="" align="left" valign="top">
<p>0.67</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>6</p>
</td><td style="" align="left" valign="top">
<p>0</p>
</td><td style="" align="left" valign="top">
<p>0</p>
</td><td style="" align="left" valign="top">
<p>0.33</p>
</td><td style="" align="left" valign="top">
<p>0.33</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>7</p>
</td><td style="" align="left" valign="top">
<p>0.33</p>
</td><td style="" align="left" valign="top">
<p>0</p>
</td><td style="" align="left" valign="top">
<p>0.67</p>
</td><td style="" align="left" valign="top">
<p>0.33</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>8</p>
</td><td style="" align="left" valign="top">
<p>0.67</p>
</td><td style="" align="left" valign="top">
<p>0</p>
</td><td style="" align="left" valign="top">
<p>1</p>
</td><td style="" align="left" valign="top">
<p>0.33</p>
</td></tr></tbody></table></div></li><li><p>The last thing we need to add is an indicator to show whose turn it is. Create another <span class="strong"><strong>Text</strong></span> object just like we did before and rename it <code class="literal">Turn Indicator</code>.</p></li><li><p>After you make sure that the <span class="strong"><strong>Left</strong></span>, <span class="strong"><strong>Top</strong></span>, <span class="strong"><strong>Right</strong></span>, and <span class="strong"><strong>Bottom</strong></span> values are set to <code class="literal">0</code> again, set <span class="strong"><strong>Anchor Point Preset</strong></span> to the blue arrows once more.</p></li><li><p>Finally, set <span class="strong"><strong>Min X</strong></span> under <span class="strong"><strong>Anchor</strong></span> to <code class="literal">0.67</code>.</p></li><li><p>We now have everything we need to play the basic game of Tic-tac-toe. To check it out, select the <span class="strong"><strong>Squares</strong></span> object and uncheck the box in the top-right corner to turn it off. When you hit play now, you should be able to see your whole game board and click on the buttons. You can even use Unity Remote to test it with the touch settings. If you have not already done so, it would be a good idea to save the scene before continuing.</p></li></ol></div><p>The game squares are the last piece to set up our initial game. It almost looks like a playable game now. We just need to add a few scripts and we will be able to play all the games of Tic-tac-toe we could ever desire.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec15"></a>Controlling the game</h3></div></div></div><p>Having a <a id="id117" class="indexterm"></a>game board is one of the most important parts of creating any game. However, it doesn't do us any good if we can't control what happens when its various buttons are pressed. Let's create some scripts and write some code to fix this now:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Create two new scripts in the <span class="strong"><strong>Project</strong></span> panel, just as we did for the <span class="emphasis"><em>Hello World</em></span> project in the previous chapter. Name the new scripts <code class="literal">TicTacToeControl</code> and <code class="literal">SquareState</code>. Open them and clear out the default functions, just as we did in <a class="link" href="#" linkend="ch01">Chapter 1</a>, <span class="emphasis"><em>Saying Hello to Unity and Android</em></span>.</p></li><li><p>The <code class="literal">SquareState</code> script will hold the possible states of each square of our game board. To do this, clear absolutely everything out of the script, including the <code class="literal">using UnityEngine</code> line and the <code class="literal">public class SquareState</code> line, so that we can replace them with a simple enumeration. An enumeration is just a list of potential values. This one is concerned with the player who controls the square. It will allow us to keep track of whether X is controlling it, O is controlling it, or if it is clear. The <code class="literal">Clear</code> statement becomes the first and therefore, the default state:</p><div class="informalexample"><pre class="programlisting">public enum SquareState {
  Clear,
  Xcontrol,
  Ocontrol
}</pre></div></li><li><p>In our other script, <code class="literal">TicTacToeControl</code>, we need to start by adding an extra line at the very beginning, right under <code class="literal">using UnityEngine</code>. This line lets our code interact with the various GUI elements, and most importantly, with this game, allowing us to change the text of who controls a square and whose turn it is:</p><div class="informalexample"><pre class="programlisting">using UnityEngine.UI;</pre></div></li><li><p>Next, we need two variables that will largely control the flow of the game. They need to be added in place of the two default functions. The first defines our game board. It is an array of nine squares to keep track of who owns what. The second keeps track of whose turn it is. When the Boolean is <code class="literal">true</code>, the X player gets a turn. When the Boolean is <code class="literal">false</code>, the O player gets a turn:</p><div class="informalexample"><pre class="programlisting">public SquareState[] board = new SquareState[9];
public bool xTurn = true;</pre></div></li><li><p>The next variable will let us change the text on screen for whose turn it is:</p><div class="informalexample"><pre class="programlisting">public Text turnIndicatorLandscape;</pre></div></li><li><p>These three variables will give us access to all the GUI objects we set up in the last section, allowing us to change the image and text based on who owns the square. We can also turn the buttons and squares on and off as they are clicked. All of them are marked with <span class="strong"><strong>Landscape</strong></span> so that we will be able to keep them straight later, when we have a second board for the <span class="strong"><strong>Portrait</strong></span> orientation of devices:</p><div class="informalexample"><pre class="programlisting">public GameObject[] buttonsLandscape;
public Image[] squaresLandscape;
public Text[] squareTextsPortrait;</pre></div></li><li><p>The last two variables, for now, will give us access to the images we need to change the backgrounds of:</p><div class="informalexample"><pre class="programlisting">public Sprite oImage;
public Sprite xImage;</pre></div></li><li><p>Our <a id="id118" class="indexterm"></a>first function for this script will be called every time a button is clicked. It receives the number of buttons clicked, and the first thing it does is turn the button off and the square on:</p><div class="informalexample"><pre class="programlisting">public void ButtonClick(int squareIndex) {
  buttonsLandscape[squareIndex].SetActive(false);
  squaresLandscape[squareIndex].gameObject.SetActive(true);</pre></div></li><li><p>Next, the function checks the Boolean we created earlier to see whose turn it is. If it is the X player's turn, the square is set to use the appropriate image and text, indicating that their control is set. It then marks on the script's internal board that controls the square before finally switching to the O player's turn:</p><div class="informalexample"><pre class="programlisting">if(xTurn) {
  squaresLandscape[squareIndex].sprite = xImage;
  squareTextsLandscape[squareIndex].text = "X";

  board[squareIndex] = SquareState.XControl;
  xTurn = false;
  turnIndicatorLandscape.text = "O's Turn";
}</pre></div></li><li><p>This next block of code does the same thing as the previous one, except it marks control for the O player and changes the turn to the X player:</p><div class="informalexample"><pre class="programlisting">else {
  squaresLandscape[squareIndex].sprite = oImage;
  squareTextsLandscape[squareIndex].text = "O";
  
  board[squareIndex] = SquareState.OControl;
  xTurn = true;
  turnIndicatorLandscape.text = "X's Turn";
}
}</pre></div></li><li><p>That is it for the code right now. Next, we need to return to the Unity Editor and set up our new script in the scene. You can do this by creating another empty GameObject and renaming it <code class="literal">GameControl</code>.</p></li><li><p>Add our <code class="literal">TicTacToeControl</code> script to it by dragging the script from the <span class="strong"><strong>Project</strong></span> panel and dropping it in the <span class="strong"><strong>Inspector</strong></span> panel when the object is selected.</p></li><li><p>We <a id="id119" class="indexterm"></a>now need to attach all the object references our script needs in order to actually work. We don't need to touch the <span class="strong"><strong>Board</strong></span> or <span class="strong"><strong>XTurn</strong></span> slots in the <span class="strong"><strong>Inspector</strong></span> panel, but the <span class="strong"><strong>Turn Indicator</strong></span> object does need to be dragged from the <span class="strong"><strong>Hierarchy</strong></span> tab to the <span class="strong"><strong>Turn Indicator Landscape</strong></span> slot in the <span class="strong"><strong>Inspector</strong></span> panel.</p></li><li><p>Next, expand the <span class="strong"><strong>Buttons Landscape</strong></span>, <span class="strong"><strong>Squares Landscape</strong></span>, and <span class="strong"><strong>Square Texts Landscape</strong></span> settings and set each <span class="strong"><strong>Size</strong></span> slot to <code class="literal">9</code>.</p></li><li><p>To each of the new slots, we need to drag the relevant object from the <span class="strong"><strong>Hierarchy</strong></span> tab. The <span class="strong"><strong>Element 0</strong></span> object under <span class="strong"><strong>Buttons Landscape</strong></span> gets <span class="strong"><strong>Button0</strong></span>, <span class="strong"><strong>Element 1</strong></span> gets <span class="strong"><strong>Button1</strong></span>, and so on. Do this for all the buttons, images, and texts. Ensure that you put them in the right order or else our script will appear confusing as it changes things when the player is playing.</p></li><li><p>Next, we need a few images. If you have not already done so, import the starting assets for this chapter by going to the top of Unity, by navigating to <span class="strong"><strong>Assets</strong></span> | <span class="strong"><strong>Import New Asset</strong></span>, and selecting the files to import them. You will need to navigate to and select each one at a time. We have <span class="strong"><strong>Onormal</strong></span> and <span class="strong"><strong>Xnormal</strong></span> for indicating control of the square. The <span class="strong"><strong>ButtonNormal</strong></span> image is used when the button is just sitting there and <span class="strong"><strong>ButtonActive</strong></span> is used when the player touches the button. The <span class="strong"><strong>Title</strong></span> field is going to be used for our main menu a little bit later.</p></li><li><p>In order to use any of these images in our game, we need to change their import settings. Select each of them in turn and find the <span class="strong"><strong>Texture Type</strong></span> dropdown in the <span class="strong"><strong>Inspector</strong></span> panel. We need to change them from <span class="strong"><strong>Texture</strong></span> to <span class="strong"><strong>Sprite (2D \ uGUI)</strong></span>. We can leave the rest of the settings at their defaults. The <span class="strong"><strong>Sprite Mode</strong></span> option is used if we have a sprite sheet with multiple elements in one image. The <span class="strong"><strong>Packing Tag</strong></span> option is used for grouping and finding sprites in the sheet. The <span class="strong"><strong>Pixels To Units</strong></span> option affects the size of the sprite when it is rendered in world space. The <span class="strong"><strong>Pivot</strong></span> option simply changes the point around which the image will rotate.</p></li><li><p>For the four square images, we can click on <span class="strong"><strong>Sprite Editor</strong></span> to change how the border appears when they are rendered. When clicked, a new window opens that shows our image with some green lines at the edges and some information about it in the lower-right. We can drag these green lines to change the <span class="strong"><strong>Border</strong></span> property. Anything outside the green lines will not be stretched with the image as it fills spaces that are larger than it. A setting around <code class="literal">13</code> for each side will keep our whole border from stretching.</p></li><li><p>Once<a id="id120" class="indexterm"></a> you make any changes, ensure that you hit the <span class="strong"><strong>Apply</strong></span> button to commit them.</p></li><li><p>Next, select the <span class="strong"><strong>GameControl</strong></span> object once more and drag the <span class="strong"><strong>ONormal</strong></span> image to the <span class="strong"><strong>OImage</strong></span> slot and the <span class="strong"><strong>XNormal</strong></span> image to the <span class="strong"><strong>XImage</strong></span> slot.</p></li><li><p>Each of the buttons need to be connected to the script. To do this, select each of them from <span class="strong"><strong>Hierarchy</strong></span> in turn and click on the plus sign at the bottom-right corner of their <span class="strong"><strong>Inspector</strong></span>:</p><div class="mediaobject"><img src="/graphics/9781784394691/graphics/4691OT_02_03.jpg" /></div></li><li><p>We then need to click on that little circle to the left of <span class="strong"><strong>No Function</strong></span> and select <span class="strong"><strong>GameControl</strong></span> from the list in the new window.</p></li><li><p>Now, navigate to <span class="strong"><strong>No Function</strong></span> | <span class="strong"><strong>TicTacToeControl</strong></span> | <span class="strong"><strong>ButtonClick (int)</strong></span> to connect the function in our code to the button.</p></li><li><p>Finally, for each of the buttons, put the number of the button in the number slot to the right of the function list.</p></li><li><p>To keep everything organized, rename your <span class="strong"><strong>Canvas</strong></span> object <code class="literal">GameBoard_Landscape</code>.</p></li><li><p>Before we can test it out, be sure that the <code class="literal">Squares</code> object is turned on by checking the box in the top-left corner of its <span class="strong"><strong>Inspector</strong></span>. Also, uncheck the box of each of its image children.</p><div class="mediaobject"><img src="/graphics/9781784394691/graphics/4691OT_02_04.jpg" /></div></li></ol></div><p>This may not <a id="id121" class="indexterm"></a>look like the best game in the world, but it is playable. We have buttons that call functions in our scripts. The turn indicator changes as we play. Also, each square indicates who controls it after they are selected. With a little more work, this game could look and work great.</p></div></div>