<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch06lvl1sec50"></a>Putting together the complex environment</h2></div></div><hr /></div><p>Having a one <a id="id366" class="indexterm"></a>block map does not make for a very interesting game experience. It works excellently for us to set up the controls, but the players will not find it much fun. So, we need something a little better. Here, we will be setting up a more complex environment with ramps, bridges, and turns. We will also use some fences to help and guide the player. Let's do this all with these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Start by adding the <code class="literal">MonkeyBallMap</code> model to the scene.</p></li><li><p>Set its <span class="strong"><strong>Scale</strong></span> attribute to <code class="literal">100</code> on each axis and its <span class="strong"><strong>Position</strong></span> attribute to <code class="literal">0</code> on each axis.</p></li><li><p>If the map appears to be white, then apply the <code class="literal">Grass</code> texture to it. This map gives us a good starting platform, a half-pipe ramp, a few turns, and a short bridge. Altogether, there are plenty of basic challenges for the player.</p></li><li><p>To enable our ball to actually to use the map, it is going to need some colliders to make it physical. Expand <code class="literal">MonkeyBallMap</code> in the <span class="strong"><strong>Hierarchy</strong></span> window and select both <code class="literal">FlatBits</code> and <code class="literal">HalfPipe</code>.</p></li><li><p>On to each of these objects add a <span class="strong"><strong>MeshCollider</strong></span> component, just like we did for some of the parts of our tank city. Remember, it can be found by navigating to <span class="strong"><strong>Component</strong></span> | <span class="strong"><strong>Physics</strong></span> | <span class="strong"><strong>Mesh Collider</strong></span>.</p></li><li><p>Next, we have the <code class="literal">Fence</code> model. With this, we can both help and hinder the player by placing guardrails along the edges or blockages in their path. Start by dragging the <code class="literal">Fence</code> model into the scene and setting its <span class="strong"><strong>Scale</strong></span> to <code class="literal">100</code> to keep it sized in proportion to our map.</p></li><li><p>To enable the fences to physically block the player, they need a collider. To both of the children fence objects, add a <span class="strong"><strong>BoxCollider</strong></span> component that can be found by navigating to <span class="strong"><strong>Component</strong></span> | <span class="strong"><strong>Physics</strong></span> | <span class="strong"><strong>Box Collider</strong></span>.</p></li><li><p>In addition, ensure that you apply the <code class="literal">Wood</code> texture to both of the fence pieces if they <a id="id367" class="indexterm"></a>appear white in the scene.</p></li><li><p>Create a new empty <span class="strong"><strong>GameObject</strong></span> and name it <code class="literal">Fences</code>. Then, set its <span class="strong"><strong>Position</strong></span> attribute to <code class="literal">0</code> on each axis. This object will help us to stay organized because we could end up with a great many pieces of fence.</p></li><li><p>Now, expand the <code class="literal">Fence</code> model in the <span class="strong"><strong>Hierarchy</strong></span> window and make both <code class="literal">Post</code> and <code class="literal">PostWithSpokes</code> children of the <code class="literal">Fences</code> empty<span class="strong"><strong> GameObject</strong></span>. Then, delete the <code class="literal">Fence</code> object. By doing this, we break the prefab connection and remove the risk of recreating it. If we had just used the <code class="literal">Fence</code> object for our organization, there was a risk that we could've ended up deleting all of our work that we put in setting them up in the scene if we made changes to the original model file.</p></li><li><p>We need to position the fences in strategic locations to affect how our player is able to play the game. The first place we might want to put them is around the starting area, giving our player a nice safe beginning to the game. Remember, you can use <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>D</em></span> to duplicate the fence pieces so that you will always have enough fences.</p><div class="mediaobject"><img src="/graphics/9781784394691/graphics/4691OT_06_08.jpg" /></div></li><li><p>The second <a id="id368" class="indexterm"></a>place to put fences would be after the half pipe, just before the bridge. Here, they would help the player to reorient themselves before they try to go across the small bridge:</p><div class="mediaobject"><img src="/graphics/9781784394691/graphics/4691OT_06_09.jpg" /></div></li><li><p>The last place we could put them would be a hindrance to the player. If we place them in the middle of the final platform, we would force the player to go around <a id="id369" class="indexterm"></a>and risk falling off before reaching the end.</p></li><li><p>Speaking of the finish line, now that everything else is placed, we need to move it into position. Place it at the end of the lower platform. Here, the player will have to face all of the challenges of the map and risk falling many times before they finally achieve victory by reaching the end.</p><div class="mediaobject"><img src="/graphics/9781784394691/graphics/4691OT_06_10.jpg" /></div></li></ol></div><p>That is it for setting up our complex environment. We gave the player a chance to orient themselves before forcing them to navigate a handful of challenges and reach the end. Give it a try. Our game is starting to look really nice.</p><p>The first challenge here might be quite obvious. Try your hand at making your own map with ramps, bridges, chutes, and blockages. You could perhaps make a big maze out of the fences. Otherwise, you could alter the level so that it actually requires the player to go up some straight paths and ramps, meaning the player would need enough speed to make it. There might even be the need for a few jumps. Make the player go down a ramp to gain speed before jumping <a id="id370" class="indexterm"></a>across to another platform. Whatever your new level becomes, make sure that <code class="literal">KillVolume</code> is below it and covers plenty of area underneath. You never quite know how the players will play and where they will manage to get themselves stuck.</p><p>The map itself looks pretty good, but the area around it could use some work. Use your skills from the previous chaptersâ€”add a skybox to the world, something that looks better than the defaults. While you're at it, work with the lighting. A single <span class="strong"><strong>Directional Light</strong></span> is nice but not very <a id="id371" class="indexterm"></a>interesting. Create some light source models to place round the map. Then, bake the lightmaps to create some good quality shadows.</p></div>