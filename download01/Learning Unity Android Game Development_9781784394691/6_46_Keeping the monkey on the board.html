<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch06lvl1sec48"></a>Keeping the monkey on the board</h2></div></div><hr /></div><p>What fun is a game if there is no risk of failure? In order to test our monkey and tilt controls, we put a safety fence around our basic environment to keep them from falling over. However, every game needs a little risk to make it exciting. By removing the safety fence, we introduce a risk of falling over and losing the game. However, usually there is an option to retry the game if you fall. To this end, we will now create what is traditionally called a <span class="strong"><strong>kill </strong></span><a id="id353" class="indexterm"></a>
<span class="strong"><strong>volume</strong></span>. This is simply an area that resets the <a id="id354" class="indexterm"></a>player when they fall into it. Let's use these steps to create it:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>First, create a new script and name it <code class="literal">KillVolume</code>.</p></li><li><p>This script has a single variable. It will keep track of where to put the monkey ball after it has fallen in:</p><div class="informalexample"><pre class="programlisting">public Transform respawnPoint;</pre></div></li><li><p>This script also has a single function, <code class="literal">OnTriggerEnter</code>. This function is called every time an object with a <span class="strong"><strong>Rigidbody</strong></span> component enters a trigger volume. It receives the object that enters as a collider:</p><div class="informalexample"><pre class="programlisting">public void OnTriggerEnter(Collider other) {</pre></div></li><li><p>The function simply changes the position of the thing that entered the volume to that of the point where we want to respawn it. The only thing that will be moving around our game will be the monkey ball, so we don't have to worry about any double-checking what has entered. We also set <code class="literal">velocity</code> to <code class="literal">zero</code> so that it doesn't move suddenly when the player regains control:</p><div class="informalexample"><pre class="programlisting">other.transform.position = respawnPoint.position;
other.attachedRigidbody.velocity = Vector3.zero;
}</pre></div></li><li><p>Next, we need a new empty <span class="strong"><strong>GameObject</strong></span>, named <code class="literal">RespawnPoint</code>.</p></li><li><p>Position this object at approximately the same location of where our ball starts. This is the point where the ball will be put after it has fallen off the field.</p></li><li><p>Now, create another empty <span class="strong"><strong>GameObject</strong></span> and name it <code class="literal">KillVolume</code>. This object will catch and reset the game when the player falls in.</p></li><li><p>Set its position to <code class="literal">-10</code> for <span class="strong"><strong>Y</strong></span> and <code class="literal">0</code> for both <span class="strong"><strong>X</strong></span> and <span class="strong"><strong>Z</strong></span>. This will put it well below where the player is going to be. The important thing for future levels is that this volume is below where the player is normally going to be. If it isn't, they might miss it and fall forever, or suddenly jump back to the beginning, passing through it on their way to an that area they are supposed to be in.</p></li><li><p>We need to give the <a id="id355" class="indexterm"></a>object a <span class="strong"><strong>Box Collider</strong></span> component and attach our <code class="literal">KillVolume</code> script.</p></li><li><p>In order to get <code class="literal">OnTriggerEnter</code> function called by Unity, we need the <span class="strong"><strong>Is Trigger</strong></span> box checked. Otherwise, it will just collide with the volume and appear to the player that they are just floating.</p></li><li><p>Next, we need to make the volume large enough to actually catch our player when they fall in. To do this, set <span class="strong"><strong>Size</strong></span> on the <span class="strong"><strong>Box Collider</strong></span> component to <code class="literal">100</code> for both the <span class="strong"><strong>X</strong></span> and <span class="strong"><strong>Z</strong></span> axes.</p></li><li><p>Drag the <code class="literal">RespawnPoint</code> object from the <span class="strong"><strong>Hierarchy</strong></span> window to the <span class="strong"><strong>Respawn Point</strong></span> slot on our <code class="literal">KillVolume</code> script component in the <span class="strong"><strong>Inspector</strong></span>. Without it, our player will never be able to get back after falling off the map.</p></li><li><p>Finally, delete the <code class="literal">Fence</code> cubes from our basic environment so that we can test it out. You can move the ball around and when it falls off the ground block, it will hit <code class="literal">KillVolume</code> and return to <code class="literal">RespawnPoint</code>.</p><div class="mediaobject"><img src="/graphics/9781784394691/graphics/4691OT_06_06.jpg" /></div></li></ol></div><p>We now have the ability to reset our players when they fall off the map. The important part is detecting when they are no longer on the map and not interrupting them when they should be. This is why we have made it so large and put it well underneath the main area of our level. However, it would be a <a id="id356" class="indexterm"></a>bad idea to put the volume too far below the play area, or the player is going to be falling for a long time before the game is reset.</p></div>