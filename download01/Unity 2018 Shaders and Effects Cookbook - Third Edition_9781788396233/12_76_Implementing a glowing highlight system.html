<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch12lvl1sec74"></a>Implementing a glowing highlight system</h2></div></div><hr /></div><p>Now that we have some background <span>information</span><a id="id325169868" class="indexterm"></a> on how to build shaders, let's look at a real-world example of a shader we could potentially use. When playing certain kinds of games, you may notice that, when the player faces an object they can interact with, the object may glow such as in Dontnod Entertainment's <span class="emphasis"><em>Life is Strange</em></span>, The Fullbright Company‎'s <span class="emphasis"><em>Gone Home</em></span>, and even in recent mobile games such as Jam City's <span class="emphasis"><em>Harry Potter Hogwarts Mystery</em></span>. This is something that we can easily do in Shader Graph, which will also allow us to see a non-trivial example of Shader Graph being used.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch12lvl2sec187"></a>Getting ready</h3></div></div></div><p>Ensure that you have created a project using the Lightweight Render Pipeline, as described in the <span class="emphasis"><em>Creating a Shader Graph project</em></span> recipe. Afterward, complete the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Create a new scene, if you haven't done so already, by going to <strong class="userinput"><code>File | New Scene</code></strong></li><li>Afterward, we need to have something to show our shader, so let's create a new sphere by going to <strong class="userinput"><code>Game Object | 3D Object | Sphere</code></strong></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch12lvl2sec188"></a>How to do it...</h3></div></div></div><p>We will start off by <span>creating</span><a id="id325209382" class="indexterm"></a> a simple shader graph:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>From the <strong class="userinput"><code>Project</code></strong> window, create a new shader by going to <strong class="userinput"><code>Create Shader PBR Graph</code></strong>, and name it <code class="literal">GlowGraph</code>.</li><li>Afterward, create a new material by going to <strong class="userinput"><code>Create | </code></strong><strong class="userinput"><code>Material</code></strong> (I named mine<strong class="userinput"><code> </code></strong><code class="literal">GlowGraphMat</code>). Next, assign the shader to the material by selecting the material, and then, from the <strong class="userinput"><code>Inspector</code></strong> tab, you should select the <strong class="userinput"><code>Shader</code></strong> dropdown at the top and select <strong class="userinput"><code>graphs/GlowGraph</code></strong>.</li><li>Then, drag and drop the material onto our sphere object in the scene, so we can see our shader being used in action.</li><li>Now that the setup is done, we can start creating the graph. If you select the shader, you should see that, from the <strong class="userinput"><code>Inspector</code></strong> tab, there will be a button that says <strong class="userinput"><code>Open Shader Graph</code></strong>. Click on the button and the <strong class="userinput"><code>Shader Graph Editor</code></strong> will open automatically.</li><li>Firstly, we will add a new node called a Fresnel (pronounced fer-nel) Effect. To add it, go to the left-hand side of the <strong class="userinput"><code>PBR Master</code></strong> node, right-click, and select <strong class="userinput"><code>Create Node</code></strong>. From there, type in <code class="literal">Fresnel</code>, and once it has been selected press the <span class="emphasis"><em>Enter</em></span> key.</li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note88"></a>Note</h3><p>The Fresnel Effect is often used to provide rim-lighting for objects. For more information on it, check out: <a class="ulink" href="https://github.com/Unity-Technologies/ShaderGraph/wiki/Fresnel-Effect-Node" target="_blank">https://github.com/Unity-Technologies/ShaderGraph/wiki/Fresnel-Effect-Node</a>.</p></div><div class="orderedlist"><ol class="orderedlist arabic" start="6" type="1"><li>Once created, connect the <strong class="userinput"><code>Out</code></strong> of the <strong class="userinput"><code>Fresnel Effect</code></strong> node to the <strong class="userinput"><code>Emission</code></strong> property of the <strong class="userinput"><code>PBR Master</code></strong> node.</li></ol></div><div class="orderedlist"><ol class="orderedlist arabic" start="7" type="1"><li>To make it easier to tell what each node does, click on the grey color to the left of the <strong class="userinput"><code>Albedo</code></strong> property and change it to a different color, such as a bright pink:</li></ol></div><div class="mediaobject"><img src="/graphics/9781788396233/graphics/4633c5ad-767c-4f67-866f-ec5910646329.png" /></div><p>Notice how the Fresnel effect is applied on top of the Albedo color due to it using that value for the <strong class="userinput"><code>Emission</code></strong> property.</p><div class="orderedlist"><ol class="orderedlist arabic" start="8" type="1"><li>We just want the edges of our <span>object</span><a id="id325442697" class="indexterm"></a> to glow, so change the <code class="literal">Power</code> property of the <strong class="userinput"><code>Fresnel Effect</code></strong> node to <code class="literal">4</code>. Currently, the light around our object is white, but we can make it a different color instead by multiplying it by a color.</li><li>To do this, go to the Blackboard and create a new color by clicking on the <strong class="userinput"><code>+</code></strong> icon and then selecting <strong class="userinput"><code>Color</code></strong>. Once created, give it a name (<code class="literal">HoverColor</code>) and then set the <strong class="userinput"><code>Default</code></strong> color.</li></ol></div><div class="orderedlist"><ol class="orderedlist arabic" start="10" type="1"><li>Once created, drag and <span>drop</span><a id="id325445061" class="indexterm"></a> the property beneath the <strong class="userinput"><code>Fresnel Effect</code></strong> node in the same way we learned in the previous recipe:</li></ol></div><div class="mediaobject"><img src="/graphics/9781788396233/graphics/92c27c00-1cd7-4c58-813d-42b766629af5.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="11" type="1"><li>Now, we need to multiply these together. Create a new node between them by selecting <strong class="userinput"><code>Math</code></strong> | <strong class="userinput"><code>Basic</code></strong> | <strong class="userinput"><code>Multiply</code></strong>. Connect the Out of the <strong class="userinput"><code>Fresnel Effect</code></strong> node to the <strong class="userinput"><code>A</code></strong> of the <strong class="userinput"><code>Multiply</code></strong> node. Then, connect the <strong class="userinput"><code>HoverColor</code></strong> property to the <strong class="userinput"><code>B</code></strong> of the <strong class="userinput"><code>Multiply</code></strong> node. Afterward, connect <span>the</span><a id="id325445196" class="indexterm"></a><strong class="userinput"><code>Out</code></strong> of the <strong class="userinput"><code>Multiply</code></strong> node to the <strong class="userinput"><code>Emission</code></strong> property:</li></ol></div><div class="mediaobject"><img src="/graphics/9781788396233/graphics/57f5db88-f73f-4e14-9e06-259e33a82db2.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="12" type="1"><li> Save the graph and dive back into the Unity editor. You should notice that the effect is indeed working as intended.</li></ol></div><div class="orderedlist"><ol class="orderedlist arabic" start="13" type="1"><li>From the <strong class="userinput"><code>Project</code></strong> tab, select the <code class="literal">GlowGraph</code> shader we've created. Notice that the <strong class="userinput"><code>Inspector</code></strong> tab includes information on the properties used in the shader:</li></ol></div><div class="mediaobject"><img src="/graphics/9781788396233/graphics/381536bf-3dd8-4f71-9803-b2e96b2e7c2d.png" /></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip89"></a>Note</h3><p>Even though we are using the name <strong class="userinput"><code>HoverColor</code></strong> in the shader graph, throughout code it is referred to as <code class="literal">Color_AA468061</code>. If we wish to refer to this in the code, we will need to use this name latter instead.</p></div><div class="orderedlist"><ol class="orderedlist arabic" start="14" type="1"><li>Create a new C# Script called <code class="literal">HighlightOnHover</code>. Double-click <span>on</span><a id="id325169962" class="indexterm"></a> it to enter your IDE, and use the following code:</li></ol></div><pre class="programlisting">using UnityEngine;

public class HighlightOnHover : MonoBehaviour
{

    public Color highlightColor = Color.red;

    private Material material;

    // Use this for initialization
    void Start()
    {
        material = GetComponent&lt;MeshRenderer&gt;().material;

        // Turn off glow
        OnMouseExit();
    }

    void OnMouseOver()
    {
        material.SetColor("Color_AA468061", highlightColor);
    }

    void OnMouseExit()
    {
        material.SetColor("Color_AA468061", Color.black);
    }

}</pre><div class="orderedlist"><ol class="orderedlist arabic" start="15" type="1"><li>Save your script and return to the Unity editor. From there, attach the component to your sphere and start the game:</li></ol></div><div class="mediaobject"><img src="/graphics/9781788396233/graphics/c57bd01c-982a-4ec2-800c-0adf9e1a54c3.png" /></div><p>Now, when we highlight the object with the mouse, we will see the hover effect, but, otherwise, it will turn itself off!</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch12lvl2sec189"></a>How it works...</h3></div></div></div><p>The <strong class="userinput"><code>Emission</code></strong> property is reflective of the light <span>that</span><a id="id325170006" class="indexterm"></a> an object receives. If the <strong class="userinput"><code>Emission</code></strong> is white it will be fully lit with that color. If black, it will act as if it doesn't exist. We make use of that by using black by default. However, if we do put our mouse over the object, the <code class="literal">OnMouseOver</code> function will trigger, causing it to use the <span>color</span><a id="id325170021" class="indexterm"></a> mentioned.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note90"></a>Note</h3><p>I could write much more on the subject of Shader Graph, but, unfortunately, there isn't enough space in the book. If you would like to explore Shader Graph even more, Andy Touch has put together a lovely group of examples of Shader Graph being used that could be great research material. Check it out at <a class="ulink" href="https://github.com/UnityTechnologies/ShaderGraph_ExampleLibrary" target="_blank">https://github.com/UnityTechnologies/ShaderGraph_ExampleLibrary</a>.</p></div></div></div>