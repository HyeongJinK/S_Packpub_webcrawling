<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec13"></a>Automatic layouts and options</h2></div></div><hr /></div><p>You can <a id="id209" class="indexterm"></a>obviously place <span class="strong"><strong>UI</strong></span> components within the <span class="strong"><strong>Canvas</strong></span> and place them (if you wish), but there are those situations where you need to be able to either group or order elements together, such as:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>A list box</p></li><li style="list-style-type: disc"><p>A grid</p></li><li style="list-style-type: disc"><p>A scrollable area</p></li></ul></div><p>In the legacy GUI system, this was done with separate controls that had layout options built-in. For the new <span class="strong"><strong>Unity UI</strong></span> however, this has been broken up into a more component-based system with new grouping components, these can be attached to any GameObject to organize <a id="id210" class="indexterm"></a>the elements attached to that GameObject as children.</p><p>The types of groups you can create are:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Horizontal Layout Groups</strong></span>
</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Vertical Layout Groups</strong></span>
</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Grid Layout Groups</strong></span>
</p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note45"></a>Note</h3><p>Groups don't have to be static top level elements; like with anything else in the new system, everything is flexible. Want a <span class="strong"><strong>Horizontal Layout Group</strong></span> within a <span class="strong"><strong>Vertical Layout Group</strong></span> within a <span class="strong"><strong>Grid Layout Group</strong></span>, then knock yourself out, as there are no limitations (well other than common sense, it still has to look good doesn't it).</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec22"></a>Horizontal Layout Group</h3></div></div></div><p>With <a id="id211" class="indexterm"></a>the horizontal layout, it will automatically place child <a id="id212" class="indexterm"></a>GameObjects side by side (columns) within the group's <span class="strong"><strong>Rect Transform</strong></span> area. For example, we can create a simple horizontal list (like what could be used to list a selection of in-app purchase items) by creating the following:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Create a <span class="strong"><strong>Canvas</strong></span> in the scene (<span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Canvas</strong></span>).</p></li><li><p>Right-click on the new <span class="strong"><strong>Canvas</strong></span> and add an empty GameObject (<span class="strong"><strong>Create Empty</strong></span>).</p></li><li><p>Rename this new <span class="strong"><strong>GameObject</strong></span> to <span class="strong"><strong>Horizontal Layout Group</strong></span>.</p></li><li><p>Select the <span class="strong"><strong>HorizontalLayoutGroup</strong></span> GameObject object and add a <span class="strong"><strong>Horizontal Layout Group</strong></span> component by clicking on <span class="strong"><strong>GameObject</strong></span> by navigating to <span class="strong"><strong>Add Component</strong></span> | <span class="strong"><strong>Layout</strong></span> | <span class="strong"><strong>Horizontal Layout Group</strong></span> in the <span class="strong"><strong>Inspector</strong></span> (or just searching for it when clicking on the <span class="strong"><strong>Add Component</strong></span> button).</p></li><li><p>Set the <span class="strong"><strong>Width</strong></span> of the <span class="strong"><strong>HorizontalLayoutGroup</strong></span> GameObject to <code class="literal">300</code> (<span class="emphasis"><em>3 children = 3 x 100</em></span> width children as it will auto resize its children <span class="strong"><strong>Rect Transforms</strong></span>).</p></li><li><p>Right-click the <span class="strong"><strong>HorizontalLayoutGroup</strong></span> GameObject and add three child. Image controls (UI | Image), I named them <span class="strong"><strong>Child1</strong></span>, <span class="strong"><strong>Child2</strong></span>, and <span class="strong"><strong>Child3</strong></span>. (<span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Image</strong></span>).</p></li><li><p>Set the <span class="strong"><strong>Source Image</strong></span> of each child to a <span class="strong"><strong>Sprite</strong></span> of your choice (I borrowed the Unity 128 x 128 logo as an example, which is included in the book sample assets download).</p><p>This would result in the following view:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_02_06.jpg" /><div class="caption"><p>An example showing 3 sprites arranged horizontally by the layout group</p></div></div></li></ol></div><p>The resulting view shows three child Unity logos arranged side by side organized by the <span class="strong"><strong>Horizontal Layout Group</strong></span> component automatically.</p><p>This is <a id="id213" class="indexterm"></a>a very basic example, but we will cover more <a id="id214" class="indexterm"></a>advanced layouts later in the book.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note46"></a>Note</h3><p>Note: By default, the layout group will resize the child elements to fit within the area defined by the group's <span class="strong"><strong>Rect Transform</strong></span>, to alter this you will need to either resize the group to fit its content or use <span class="strong"><strong>Layout Element</strong></span> or <span class="strong"><strong>Content</strong></span> <span class="strong"><strong>Size Fitter</strong></span> components described in the sections that follow.</p><p>The three 128 x 128 Unity logo's in this example got resized down to 100 x 100.</p></div><p>When we look at the <span class="strong"><strong>Horizontal Layout Group</strong></span> in the <span class="strong"><strong>Inspector</strong></span> window, we see the following:</p><p> </p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_02_07.jpg" /></div><p>
</p><p>Within<a id="id215" class="indexterm"></a> the <span class="strong"><strong>Horizontal Layout Group</strong></span> component <a id="id216" class="indexterm"></a>itself, we have <span class="strong"><strong>Padding</strong></span> options to alter the area surrounding the child elements of the group. This allows you to have a wide border within the group surrounding the laid out elements within.</p><p>You can also set the spacing in between each of the child elements with the <span class="strong"><strong>Spacing</strong></span> property, leaving a gap equally between each child (if you want finer control, then you need to use <span class="strong"><strong>Layout Element</strong></span> component to manually control a child elements size see the <span class="strong"><strong>Layout Element</strong></span> section later in this chapter).</p><p>Additionally, you can align the the children within the group, however, this setting only takes effect if you also use some of the additional layout options with a <span class="strong"><strong>Layout Element</strong></span> component.</p><p>Finally, there <a id="id217" class="indexterm"></a>are two <span class="strong"><strong>Child Force Expand</strong></span> options (<span class="strong"><strong>Width</strong></span> and <span class="strong"><strong>Height</strong></span>) to force all child elements within the group's borders to take up the<a id="id218" class="indexterm"></a> maximum space possible for each child (evenly distributing that space between its children). These settings also override the <span class="strong"><strong>Maximum</strong></span> settings for all child settings if you have applied <span class="strong"><strong>Layout Elements</strong></span> (see section later in this chapter).</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note47"></a>Note</h3><p>The default for the <span class="strong"><strong>Child Force Expand</strong></span> settings is <span class="emphasis"><em>on</em></span>, so keep this in mind if you are using any of the layout options described later as it will render some of them <span class="strong"><strong>invalid</strong></span>.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec23"></a>Vertical Layout Group</h3></div></div></div><p>With <a id="id219" class="indexterm"></a>the <span class="strong"><strong>Vertical Layout Group</strong></span>, as the name suggests we<a id="id220" class="indexterm"></a> tile the child components vertically into separate rows. Everything else is pretty much the same as the <span class="strong"><strong>Horizontal Layout Group</strong></span>.</p><p>You can even use the same previous example, switching the <span class="strong"><strong>Width</strong></span> and <span class="strong"><strong>Height </strong></span>values, then using <span class="strong"><strong>Vertical Layout Group</strong></span> instead of <span class="strong"><strong>Horizontal Layout Group </strong></span>component, which would result in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_02_08.jpg" /><div class="caption"><p>An example showing 3 sprites arranged vertically by the layout group</p></div></div><p>Looking at <span class="strong"><strong>Vertical Layout Group</strong></span> in the <span class="strong"><strong>Inspector</strong></span> window, we also see familiar options:</p><p> </p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_02_09.jpg" /></div><p>
</p><p>So we <a id="id221" class="indexterm"></a>have the same <span class="strong"><strong>Padding</strong></span>, <span class="strong"><strong>Spacing</strong></span>, and <span class="strong"><strong>Child Alignment</strong></span> options<a id="id222" class="indexterm"></a> as with the <span class="strong"><strong>Horizontal Layout Group</strong></span> and the same restrictions apply to child elements.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec24"></a>Grid Layout Group</h3></div></div></div><p>The <span class="strong"><strong>Grid Layout Group</strong></span> is slightly more advanced than the horizontal and vertical layout groups, giving <a id="id223" class="indexterm"></a>you more flexibility and control over how the<a id="id224" class="indexterm"></a> child elements are drawn within a grid formation.</p><p>Creating the <span class="strong"><strong>Grid Layout Group</strong></span> is done in exactly the same way as the vertical and horizontal layout groups but selecting the <span class="strong"><strong>Grid Layout Group</strong></span> component instead. Setting the <span class="strong"><strong>Width</strong></span> and <span class="strong"><strong>Height</strong></span> to <code class="literal">200</code>, and adding <span class="emphasis"><em>4 </em></span>children instead of <span class="emphasis"><em>3</em></span>. This would result in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_02_10.jpg" /><div class="caption"><p>An example showing 4 sprites arranged in a 2x2 grid by the layout group</p></div></div><p>When we look at the <span class="strong"><strong>Inspector</strong></span> window, the flexibility we have becomes more evident:</p><p> </p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_02_11.jpg" /></div><p>
</p><p>Again, we <a id="id225" class="indexterm"></a>have the familiar <span class="strong"><strong>Rect Transform</strong></span> to set the Grid's layout<a id="id226" class="indexterm"></a> area and the same <span class="strong"><strong>Padding</strong></span> options as the other layout groups.</p><p>The rest of the options open up some new possibilities for how children of the grid should be arranged; all these settings will determine how many cells will appear within the <span class="strong"><strong>Rect Transform</strong></span> of the grid and how they are laid out. They are elaborated here:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Cell Size</strong></span>: This defines the interior cell size of child elements; this will also resize the content to the defined size unless overridden by the <span class="strong"><strong>Layout Element</strong></span> component (see <span class="strong"><strong>Layout Element</strong></span> section later in this chapter). The control will automatically try to fit as many child elements within its grid based on the cell size and the size of the group <span class="strong"><strong>Rect Transform</strong></span>. If the grid cannot fit a new cell in, then it won't attempt to. (A fine balance to work out from how big you want your cells to the size of the group itself.)</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Spacing</strong></span>: As with the other layout groups, you can define spacing in-between child<a id="id227" class="indexterm"></a> elements; the main difference with the <span class="strong"><strong>Grid</strong></span> contents is that <a id="id228" class="indexterm"></a>you can set separate spacing for both vertical (<span class="strong"><strong>Y</strong></span>) and horizontal (<span class="strong"><strong>X</strong></span>) children.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Start Corner</strong></span>: A nice little effect sets which is the first cell within the grid that children are drawn from (the start point). You can choose from any of the four corners of the grid, defined as <span class="strong"><strong>Upper</strong></span> <span class="strong"><strong>Left</strong></span>, <span class="strong"><strong>Upper</strong></span> <span class="strong"><strong>Right</strong></span>, <span class="strong"><strong>Lower</strong></span> <span class="strong"><strong>Left</strong></span>, and <span class="strong"><strong>Lower</strong></span> <span class="strong"><strong>Right</strong></span>. (No, you cannot start in the middle! That would just be silly.)</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Start Axis</strong></span>: Along with the <span class="strong"><strong>Start Corner</strong></span>, you can also define the flow for the cells by drawing in a horizontal direction first (starting from the <span class="strong"><strong>Start Corner</strong></span>) or you can draw in the vertical direction first. If we set the <span class="strong"><strong>Start Corner</strong></span> to <span class="strong"><strong>Upper Left</strong></span> the child controls would flow in the following order:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_02_12.jpg" /></div></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Child Alignment</strong></span>: If the child elements have been configured with a <span class="strong"><strong>Layout Element</strong></span> (later in the chapter) component, then you can align them within the grid cells around any of the edges or the middle.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Constraint</strong></span>: We could all use a little constraint and the <span class="strong"><strong>Grid Layout Group</strong></span> is no different. If you want to limit the number of rows or columns, the grid will show that you can set this property to either <span class="strong"><strong>Fixed Row Count</strong></span> or <span class="strong"><strong>Fixed Column Count</strong></span>, which will open up an additional <span class="strong"><strong>Constraint Count</strong></span> property for you to provide the constrained number. The default is <span class="strong"><strong>Flexible</strong></span>, which is basically unconstrained.</p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note48"></a>Note</h3><p>Unlike the vertical and horizontal groups, which resize the content to fit the entire layout group area, the <span class="strong"><strong>Grid Layout Group</strong></span> will actually overflow and draw any additional<a id="id229" class="indexterm"></a> cells that don't fit in the Group area below<a id="id230" class="indexterm"></a> the group, filling up more rows. If you don't want this behavior, then you will need to either set a <span class="strong"><strong>Constraint</strong></span>, add a <span class="strong"><strong>Mask</strong></span> component or limit how many child elements you add.</p><p>It will still resize the original image, however, to fit your defined Cell sizes by default.</p></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip17"></a>Tip</h3><p>For more details about the Mask component, see the <span class="strong"><strong>Mask</strong></span> section later in this chapter.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec25"></a>Layout options</h3></div></div></div><p>The <a id="id231" class="indexterm"></a>default behavior of the Layout Group components is good for most <a id="id232" class="indexterm"></a>situations but for others you want to add a finer level of control. For these situations, Unity has provided several layout overrides to constraint the use of controls within a group or as a standalone <span class="strong"><strong>UI</strong></span> element:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Layout Element</strong></span>
</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Content Size Fitter</strong></span>
</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Aspect Ratio Fitter</strong></span>
</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Scroll Rects</strong></span>
</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Masks</strong></span>
</p></li></ul></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip18"></a>Tip</h3><p>All of these components can also be used on most <span class="strong"><strong>UI</strong></span> controls as well as to alter their behavior when presented on the canvas; the layout groups are just the default use for these controls.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl3sec28"></a>Layout Element</h4></div></div></div><p>Most<a id="id233" class="indexterm"></a> <span class="strong"><strong>UI</strong></span> controls implement <span class="strong"><strong>Layout Element</strong></span> properties<a id="id234" class="indexterm"></a> internally but to expose these for manipulation, you need to add the <span class="strong"><strong>Layout Element</strong></span> component (<span class="strong"><strong>Add Component</strong></span> | <span class="strong"><strong>Layout</strong></span> | <span class="strong"><strong>Layout Element</strong></span>) to a child of a layout group as shown here:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_02_13.jpg" /></div><p>Through<a id="id235" class="indexterm"></a> each of the settings we can define:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Ignore Layout</strong></span>: Added the override and then changed your mind? Then you can<a id="id236" class="indexterm"></a> turn it off with this handy toggle. Most likely for use in scripts or animation where you want to alter the layout properties of a UI element at runtime but don't want to keep changing the settings. It does not reset the properties set in the <span class="strong"><strong>Layout Element</strong></span>.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Min Width</strong></span>: The minimum width property defines the smallest width that the <span class="strong"><strong>Rect Transform</strong></span> for the child element in a layout group will scale down to. If the layout group's <span class="strong"><strong>Rect Transform</strong></span> width is reduced, the control will scale down until this width property is hit and will not scale the width down any further. In the following example, the topmost element has a <span class="strong"><strong>Min Width</strong></span> set to <code class="literal">100</code> and is not resized, whereas the bottom most element has not and as such has been scaled down:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_02_14.jpg" /><div class="caption"><p>The top most child element overrides the layout and remains larger</p></div></div></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Min Height</strong></span>: The minimum height property defines the smallest height that the <span class="strong"><strong>Rect Transform</strong></span> for the child element in a layout group will scale down to. If the<a id="id237" class="indexterm"></a> layout group's <span class="strong"><strong>Rect Transform</strong></span> height is reduced, the control will scale down until this height property is <a id="id238" class="indexterm"></a>hit and will not scale the height down any further. In the following example, the leftmost element has a <span class="strong"><strong>Min Height</strong></span> set to <code class="literal">100</code> and is not resized, whereas the right-hand element has not and as such has been scaled down:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_02_15.jpg" /><div class="caption"><p>The left most child element overrides the layout and remains larger</p></div></div></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Preferred Width</strong></span>: The preferred width property defines the largest width that the <span class="strong"><strong>Rect Transform</strong></span> for the child element in a layout group will scale up to. If the layout group's <span class="strong"><strong>Rect Transform</strong></span> width is increased, the control will not<a id="id239" class="indexterm"></a> scale up any more beyond this value. Its<a id="id240" class="indexterm"></a> width however, will scale lower than this value.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note49"></a>Note</h3><p>Note: If you have left the default options on the group for <span class="strong"><strong>Child Force Expand</strong></span>, it will override any preferred settings of the <span class="strong"><strong>Layout Element</strong></span>, forcing the UI element to take up the maximum space available within the group.</p></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>In the following example, the topmost element has a <span class="strong"><strong>Preferred Width</strong></span> set to <code class="literal">50</code> and its width is smaller than the bottommost element, which has not been set. With the parent <span class="strong"><strong>Rect Transform</strong></span> set to <code class="literal">100</code>, the topmost element has not scaled up past its maximum to match its parent:</p></li></ul></div><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_02_16.jpg" /><div class="caption"><p>The topmost child element overrides the layout and does not grow bigger</p></div></div></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Preferred Height</strong></span>: The preferred width property defines the largest height that the <span class="strong"><strong>Rect Transform</strong></span> for the child element in a layout group will scale up to. If the layout group's <span class="strong"><strong>Rect Transform</strong></span> height is increased, the control will not scale up any more beyond this value. Its height however, will scale lower than this value.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note50"></a>Note</h3><p>Remember, if you have left the default options on the group for <span class="strong"><strong>Child Force Expand</strong></span>, it will override any <span class="strong"><strong>Preferred</strong></span> settings of the <span class="strong"><strong>Layout Element</strong></span>, forcing the UI element to take up the maximum space available within the group.</p></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>In<a id="id241" class="indexterm"></a> the following example, the<a id="id242" class="indexterm"></a> leftmost element has a <span class="strong"><strong>Preferred Height</strong></span> set to <code class="literal">50</code> and its height is less than the rightmost element which has not been set. With the parent <span class="strong"><strong>Rect Transform</strong></span> set to <code class="literal">100</code>, the leftmost element is not scaled up past its maximum to match its parent:</p></li></ul></div><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_02_17.jpg" /><div class="caption"><p>The leftmost child element overrides the layout and does not grow bigger</p></div></div></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Flexible Width</strong></span>: The flexible width property can be best be described as a width percentage of the containing group's <span class="strong"><strong>Rect Transform</strong></span>. This is defined as a number between <code class="literal">0</code> and <code class="literal">1</code> to indicate the percentage.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note51"></a>Note</h3><p>Remember, if you have left the default options on the group for <span class="strong"><strong>Child Force Expand</strong></span>, it will override any flexible settings of the <span class="strong"><strong>Layout Element</strong></span>, forcing the UI element to take up the maximum space available within the group.</p></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>In<a id="id243" class="indexterm"></a> the following example, the<a id="id244" class="indexterm"></a> topmost element has a <span class="strong"><strong>Flexible Width</strong></span> applied at <code class="literal">0.8</code> (80 percentage) and its width is smaller than the bottommost element, which has not been set:</p></li></ul></div><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_02_18.jpg" /><div class="caption"><p>The topmost child element overrides the layout and only takes u 80% of the available width</p></div></div></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Flexible Height</strong></span>: The flexible height property (same as the width) can be best be described as a height percentage of the containing group's <span class="strong"><strong>Rect Transform</strong></span>. Defined as a number between <code class="literal">0</code> and <code class="literal">1</code> to indicate the percentage.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note52"></a>Note</h3><p>Remember, if you have left the default options as the group for <span class="strong"><strong>Child Force Expand</strong></span>, it will override any flexible settings of the <span class="strong"><strong>Layout Element</strong></span>, forcing the <span class="strong"><strong>UI</strong></span> element to take up the maximum space available within the group.</p></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>In the following example, the leftmost element has a <span class="strong"><strong>Flexible Height</strong></span> applied at <code class="literal">0.8</code> (80 percentage) and its height is less than the right-hand element which has not been set:</p></li></ul></div><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_02_19.jpg" /><div class="caption"><p>The leftmost child element overrides the layout and only takes up 80% of the available height</p></div></div></li></ul></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl3sec29"></a>Content Size Fitter</h4></div></div></div><p>Seeing <a id="id245" class="indexterm"></a>the need to constrain the <span class="strong"><strong>Rect Transform</strong></span><a id="id246" class="indexterm"></a> for a layout group's based on its content (instead of fitting the child elements to the group, which is the default) Unity created the <span class="strong"><strong>Content Size Fitter</strong></span> component. When attached to a layout group, the <span class="strong"><strong>Content Size Fitter</strong></span> will automatically manage the bounds of the <span class="strong"><strong>Rect Transform</strong></span> for the group so that it will resized based on the dimensions of its children. </p><p>For the <span class="strong"><strong>Content Size Fitter</strong></span> to function, it needs to have child controls that support minimum or preferred layout size settings such as text or an image (or any other control deriving from the <code class="literal">ILayoutElement</code> interface). It can also be used with other layout groups.</p><p>By default, these settings are used automatically based on the native controls setting of the <span class="strong"><strong>Min</strong></span> and <span class="strong"><strong>Preferred</strong></span> sizes; however, these can also be overridden by adding a <span class="strong"><strong>Layout Element</strong></span> component manually, to child components to define the <span class="strong"><strong>Min</strong></span> and <span class="strong"><strong>Preferred</strong></span> size of the content.</p><p>When you add the <span class="strong"><strong>Content Size Fitter</strong></span> to a GameObject, you get three options per axis:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_02_20.jpg" /></div><p>The <a id="id247" class="indexterm"></a>options provide the following capabilities:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Unconstrained</strong></span>: Do nothing, the <span class="strong"><strong>Content Size Fitter</strong></span> does not control this axis</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>MinSize</strong></span>: This <a id="id248" class="indexterm"></a>lays out the content and restricts the <span class="strong"><strong>Rect Transforms</strong></span> width or height to the minimum values of the GameObjects content and/or children</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>PreferredSize</strong></span>: This lays out the content and restricts the <span class="strong"><strong>Rect Transforms</strong></span> width or height to the preferred values of the GameObjects content and/or children</p></li></ul></div><p>Using the <span class="strong"><strong>Content Size Fitter</strong></span> becomes especially important when you are working with content sized to the target platforms resolution and if you have additional background images/layouts on a parent GameObject or dynamically sized content.</p><p>As an example, let's create a text chat window that will automatically grow and shrink based on the text within it:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Add a Canvas to the scene (<span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Canvas</strong></span>) or use one that you already have.</p></li><li><p>Right-click on the <span class="strong"><strong>Canvas</strong></span> and select to <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Image</strong></span> â€“ this is our text window background.</p></li><li><p>Right-click on the <span class="strong"><strong>Image</strong></span> and select to <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Text</strong></span> to add a <span class="strong"><strong>child text</strong></span> component.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note53"></a>Note</h3><p>Note that the text size now overlaps the <span class="strong"><strong>Image</strong></span>.</p></div></li><li><p>Select the <span class="strong"><strong>Image</strong></span> in the <span class="strong"><strong>Hierarchy</strong></span> and in the <span class="strong"><strong>Inspector</strong></span> click on the <span class="strong"><strong>Add Component</strong></span> button and then select <span class="strong"><strong>Layout</strong></span> | <span class="strong"><strong>Vertical layout Group</strong></span>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note54"></a>Note</h3><p>Note that the <span class="strong"><strong>Text</strong></span> has now positioned to the top-left of the <span class="strong"><strong>Image</strong></span> and its <span class="strong"><strong>Rect Transform</strong></span> now fills the <span class="strong"><strong>Image's Rect Transform</strong></span>. This shows by default the child resizes to the parent.</p></div></li><li><p>Still with the <span class="strong"><strong>Image</strong></span> selected, click on <span class="strong"><strong>Add Component</strong></span> and select <span class="strong"><strong>Layout</strong></span> | <span class="strong"><strong>Content Size Fitter</strong></span>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note55"></a>Note</h3><p>Note that there is no actual change yet as the defaults for the fitter are <span class="strong"><strong>Unconstrained</strong></span>.</p></div></li><li><p>Change the <span class="strong"><strong>Horizontal Fit</strong></span> of the <span class="strong"><strong>Content Size Fitter</strong></span> to <span class="strong"><strong>Preferred Size</strong></span>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note56"></a>Note</h3><p>Note, that the <span class="strong"><strong>Image Rect Transform's</strong></span> width has reduced to match the <span class="strong"><strong>Text</strong></span> width of the <span class="strong"><strong>Text</strong></span> component.</p></div></li></ol></div><p>For <a id="id249" class="indexterm"></a>fun, you can extend on this example and set the <span class="strong"><strong>Vertical Fit</strong></span> and <a id="id250" class="indexterm"></a>add some additional child <span class="strong"><strong>Text</strong></span> controls and end up with something like the following:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_02_32.jpg" /></div><p>As you can see, the parent <span class="strong"><strong>Image</strong></span> (thanks to the <span class="strong"><strong>Content Size Fitter</strong></span>) now resizes to fit the latest child instead of the other way round.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl3sec30"></a>Aspect Ratio Fitter</h4></div></div></div><p>The <span class="strong"><strong>Aspect Ratio Fitter</strong></span> was<a id="id251" class="indexterm"></a> one of the late entrants to<a id="id252" class="indexterm"></a> the UI framework and is certainly one of the fringe cases you can use to organize your UI. In effect, this layout tool will resize the UI of a <span class="strong"><strong>Rect Transform</strong></span> according to an <span class="strong"><strong>Aspect Ratio</strong></span>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note57"></a>Note</h3><p>Bear in mind, this is the aspect ratio of UI elements and not the aspect ratio of the screen resolution. The final resolution of the screen has no impact on GameObject <a id="id253" class="indexterm"></a>managed by the <span class="strong"><strong>Aspect Ratio Fitter</strong></span>.</p></div><p>If you<a id="id254" class="indexterm"></a> add the <span class="strong"><strong>Aspect Ratio Fitter</strong></span> component to a UI <a id="id255" class="indexterm"></a>GameObject navigating to <span class="strong"><strong>Add Component</strong></span> | <span class="strong"><strong>Layout</strong></span> | <span class="strong"><strong>Aspect Ratio Fitter</strong></span> we see the following:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_02_38.jpg" /></div><p>From here the <span class="strong"><strong>Aspect Ratio Fitter</strong></span> has several different modes:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>None</strong></span>: This does nothing at all and if you try to change the <span class="strong"><strong>Aspect Ratio</strong></span> property, it will just reset it to its previous value. It literally does nothing (why even add the component unless you are going to animate something with it maybe?).</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Width Controls Height</strong></span>: In this mode, the <span class="strong"><strong>Aspect Ratio</strong></span> will alter the <span class="strong"><strong>Height</strong></span> of the <span class="strong"><strong>Rect Transform</strong></span> it is attached to based on its <span class="strong"><strong>Width</strong></span>. So, <span class="emphasis"><em>Height = Width x Aspect Ratio</em></span>.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Height Controls Width</strong></span>: In this mode, the <span class="strong"><strong>Aspect Ratio</strong></span> will alter the <span class="strong"><strong>Width</strong></span> of the <span class="strong"><strong>Rect Transform</strong></span> it is attached to based on its height. So, <span class="emphasis"><em>Width = Height x Aspect Ratio</em></span>.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Fit In Parent</strong></span>: This mode will resize a <span class="strong"><strong>Rect Transform</strong></span> within the bounds of its parent based on the <span class="strong"><strong>Aspect Ratio</strong></span>.</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>When the <span class="strong"><strong>Aspect Ratio</strong></span> is less than <code class="literal">1</code> (but greater than <code class="literal">0</code>), it will make the <span class="strong"><strong>Width</strong></span> of the <span class="strong"><strong>Rect Transform</strong></span> a percentage of the <span class="strong"><strong>Width</strong></span> of the Parent, as shown here:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_02_39.jpg" /><div class="caption"><p>Rect Transform drawn based on aspect ratio width</p></div></div></li><li style="list-style-type: disc"><p>When<a id="id256" class="indexterm"></a> the <span class="strong"><strong>Aspect Ratio</strong></span> = <code class="literal">1</code>, the <span class="strong"><strong>Rect Transform</strong></span> of the GameObject will match the parent <span class="strong"><strong>Rect Transform</strong></span> area</p></li><li style="list-style-type: disc"><p>When<a id="id257" class="indexterm"></a> the <span class="strong"><strong>Aspect Ratio</strong></span> is greater than <code class="literal">1</code>, it will make the <span class="strong"><strong>Height</strong></span> of the <span class="strong"><strong>Rect Transform</strong></span> proportional to the parents <span class="strong"><strong>Rect Transform</strong></span> based on the <span class="strong"><strong>Aspect Ratio</strong></span>, as shown here:</p></li></ul></div><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_02_40.jpg" /><div class="caption"><p>Rect Transform drawn based on aspect ratio height</p></div></div></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Envelope Parent</strong></span>: The <span class="strong"><strong>Envelope Parent</strong></span> mode is the same as the <span class="strong"><strong>Fit In Parent </strong></span>mode with one obvious exception, instead of working within the parent <span class="strong"><strong>Rect Transform</strong></span>, it applies its logic to be outside the parent <span class="strong"><strong>Rect Transform</strong></span>. So instead of working inwards, it work outwards from the parent. The <a id="id258" class="indexterm"></a>effects of the <span class="strong"><strong>Aspect Ratio</strong></span> are the<a id="id259" class="indexterm"></a> same, just in reverse.</p></li></ul></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip19"></a>Tip</h3><p>I personally struggled for the use case behind the <span class="strong"><strong>Aspect Ratio Fitter</strong></span> but there must be one. For the best use of this <span class="strong"><strong>Fitter</strong></span>, I suggest you play with the settings if you find a need for this style of fitter.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl3sec31"></a>Scroll Rect</h4></div></div></div><p>When a<a id="id260" class="indexterm"></a> layout group needs to be larger than the display can<a id="id261" class="indexterm"></a> handle is where <span class="strong"><strong>Scroll Rect</strong></span> comes in. This provides the user with an area that they can interact with that gives the scrolling capability to the selected Rect Transform content, for example:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Add a <span class="strong"><strong>Canvas</strong></span> to the scene (<span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Canvas</strong></span>) or use one that you already have.</p></li><li><p>Right-click the <span class="strong"><strong>Canvas</strong></span> and select <span class="strong"><strong>Create Empty</strong></span> to add an Empty GameObject to the <span class="strong"><strong>Canvas</strong></span> as a child.</p></li><li><p>Rename the new <span class="strong"><strong>Empty</strong></span> GameObject to <span class="strong"><strong>ScrollRectArea</strong></span>.</p></li><li><p>Set the <span class="strong"><strong>Width</strong></span> of the <span class="strong"><strong>ScrollRectArea</strong></span> to <code class="literal">300</code>, this will form the area of the screen the user can interact with.</p></li><li><p>With the <span class="strong"><strong>ScrollRectArea</strong></span> selected and add a <span class="strong"><strong>Scroll Rect</strong></span> component to it by navigating to <span class="strong"><strong>Add Component</strong></span> | <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Scroll Rect</strong></span>.</p></li><li><p>Add another <span class="strong"><strong>Empty</strong></span> GameObject as a child to the <span class="strong"><strong>ScrollRectArea</strong></span> and rename it to <span class="strong"><strong>Content</strong></span>.</p></li><li><p>Set the <span class="strong"><strong>Width</strong></span> of the <span class="strong"><strong>Content</strong></span> GameObject to <code class="literal">1000</code>, which is several times larger than the <span class="strong"><strong>ScrollRectArea</strong></span> and larger than the screen width (make it bigger if you wish).</p></li><li><p>Select the <span class="strong"><strong>Content</strong></span> GameObject and add a <span class="strong"><strong>Horizontal Layout Group</strong></span> by navigating to <span class="strong"><strong>Add Component</strong></span> | <span class="strong"><strong>Layout</strong></span> | <span class="strong"><strong>Horizontal Layout Group</strong></span>.</p></li><li><p>Add several <span class="strong"><strong>Images</strong></span> as children of the <span class="strong"><strong>Content</strong></span> GameObject and set them to different colors or apply different source images to tell them apart.</p></li><li><p>Finally, select the <span class="strong"><strong>ScrollRectArea</strong></span> GameObject and drag the newly created <span class="strong"><strong>Content</strong></span> GameObject from the hierarchy to the <span class="strong"><strong>Content</strong></span> property of the <span class="strong"><strong>Scroll Rect</strong></span> (or select it using the discovery button to the right of the <span class="strong"><strong>Content</strong></span> property <a id="id262" class="indexterm"></a>of the <span class="strong"><strong>Scroll Rect</strong></span> component).</p></li></ol></div><p>This should result<a id="id263" class="indexterm"></a> in the following display:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_02_33.jpg" /></div><p>When run, the user can swipe or click and drag within the <span class="strong"><strong>ScrollRectArea</strong></span> (identified with the <span class="strong"><strong>Rect Tool</strong></span> selection area), which will move the <span class="strong"><strong>Content</strong></span> area in the direction of the user's movement but not beyond the viewable area of the Scroll Rect control's <span class="strong"><strong>Rect Transform</strong></span>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note58"></a>Note</h3><p>We'll make a bigger example with the Scroll Rect in <a class="link" href="#" linkend="ch03">Chapter 3</a>, <span class="emphasis"><em>Control, Control, You Must Learn Control</em></span>
</p></div><p>If we look at the <span class="strong"><strong>Scroll Rect</strong></span> in the <span class="strong"><strong>Inspector</strong></span>, we will see the following:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_02_21.jpg" /></div><p>From <a id="id264" class="indexterm"></a>the previous screenshot we have:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Content</strong></span>: This<a id="id265" class="indexterm"></a> defines the <span class="strong"><strong>Rect Transform</strong></span> that contains the content to be managed by the <span class="strong"><strong>Scroll Rect</strong></span>; it doesn't have to be a <span class="strong"><strong>Layout Group</strong></span>, it can be any other <span class="strong"><strong>UI</strong></span> control that needs a scrollable area. It should have dimensions larger that the <span class="strong"><strong>Scroll Rect</strong></span> to work properly.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Horizontal/Vertical</strong></span>: These options allow you to enable or restrict the scrolling direction for the <span class="strong"><strong>Content</strong></span> area. Useful if you want just a vertical or horizontal swiping area.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Movement Type</strong></span>: With the <span class="strong"><strong>Movement Type</strong></span>, you can control how the user interacts with the scrollable area:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Unrestricted</strong></span>: Moves and keeps on moving without restriction (even off the screen where you cannot get hold of it again)</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Elastic</strong></span>: Moves with an elastic motion, which snaps back if it goes beyond the scrollable area</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Clamped</strong></span>: Moves in a fix motion within the scrollable area, and stops as soon as it hits the edges</p></li></ul></div></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Inertia</strong></span>: Applies a physical force to the scrollable movement, both how fast it moves initially and how quickly it slows down. You can also set a <span class="strong"><strong>Deceleration Rate</strong></span> for how fast the scroll slows down.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Scroll Sensitivity</strong></span>: Scales the input from scroll devices such as a mouse wheel or track pad scroll.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Scrollbars</strong></span>: As well as the normal grabbing of the scrollable area, you can also attach scrollbars to the <span class="strong"><strong>Scroll Rect</strong></span> to give a visual indication of how large the area is, both <span class="strong"><strong>Horizontally</strong></span> and <span class="strong"><strong>Vertically</strong></span>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note59"></a>Note</h3><p>To apply <span class="strong"><strong>Scroll Bars</strong></span>, simply add them to your scene like any other <span class="strong"><strong>UI</strong></span> component and then drag your relevant <span class="strong"><strong>Vertical</strong></span> or <span class="strong"><strong>Horizontal Scrollbar</strong></span> to the relevant property in the <span class="strong"><strong>Scroll Rect</strong></span> component. More on this later in <a class="link" href="#" linkend="ch03">Chapter 3</a>, <span class="emphasis"><em>Control, Control, You Must Learn Control</em></span>.</p></div></li></ul></div><p>So<a id="id266" class="indexterm"></a> the <span class="strong"><strong>Scroll Rect</strong></span> provides us a way to scroll over larger <a id="id267" class="indexterm"></a>content than we can see on the screen, as shown here:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_02_22.jpg" /><div class="caption"><p>A basic Scroll Rect example</p></div></div><p>If you want to also restrict the visible area of the <span class="strong"><strong>Scroll Rect</strong></span>, then we also need a <span class="strong"><strong>Mask</strong></span>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl3sec32"></a>Masks</h4></div></div></div><p>A <a id="id268" class="indexterm"></a>welcome addition to the <span class="strong"><strong>Unity UI</strong></span> arsenal is the <span class="strong"><strong>Mask</strong></span> component. In<a id="id269" class="indexterm"></a> short, it limits the drawing of child components to the <span class="strong"><strong>Rect Transform</strong></span> of the GameObject it is attached to. It is very basic and very easy to use.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note60"></a>Note</h3><p>Note: The <span class="strong"><strong>Mask</strong></span> requires an <span class="strong"><strong>Image</strong></span> or other <span class="strong"><strong>Visual</strong></span> component in order to mask the child area. Having a <span class="strong"><strong>Mask</strong></span> on its own without an additional component that uses the <span class="strong"><strong>Canvas</strong></span> layout won't work and will not mask the area.</p></div><p>If you <a id="id270" class="indexterm"></a>add a <span class="strong"><strong>Mask</strong></span> component to the <span class="strong"><strong>ScrollRectArea</strong></span> GameObject from the previous<a id="id271" class="indexterm"></a> example (and an <span class="strong"><strong>Image</strong></span> component without setting a <span class="strong"><strong>Source Image</strong></span>, as the <span class="strong"><strong>Mask</strong></span> requires a <span class="strong"><strong>Graphic</strong></span> component), then it would only show the <span class="strong"><strong>Content</strong></span> area within the bounds of the <span class="strong"><strong>ScrollRectArea</strong></span> GameObject's <span class="strong"><strong>Rect Transform</strong></span> as seen here:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_02_34.jpg" /></div></div></div></div>