<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch06lvl1sec45"></a>Setting up for the big game</h2></div></div><hr /></div><p>To make any picture stand out, it <a id="id714" class="indexterm"></a>needs a really good background, so in <a class="link" href="#" linkend="ch05">Chapter 5</a>, <span class="emphasis"><em>Screen Space, World Space, and the Camera</em></span>, I created this simple 3D space scene for us to paint our UI on:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_APP_01.jpg" /></div><p>It's a cool mix of different <a id="id715" class="indexterm"></a>Canvas UI elements displayed in a 3D scene, all with completely free assets!</p><p>First off, for our big example, let's grab a few things:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Start a new 3D project or just create a brand new scene for our playground.</p></li><li><p>Add the standard <span class="strong"><strong>Particle</strong></span> project asset that comes with Unity (either when setting up the project or through <span class="strong"><strong>Assets</strong></span> | <span class="strong"><strong>Import Package</strong></span> | <span class="strong"><strong>Particles</strong></span> in the menu).</p></li><li><p>Grab the <a id="id716" class="indexterm"></a>
<span class="strong"><strong>Skybox Volume 2 Nebula</strong></span> asset package from the store (it's free and fantastic for demos — <a class="ulink" href="http://bit.ly/NebulaSkybox" target="_blank">http://bit.ly/NebulaSkybox</a>).</p></li><li><p>Grab the <span class="strong"><strong>Free SciFi Fighter</strong></span> asset package<a id="id717" class="indexterm"></a> from the store (it's pretty—<a class="ulink" href="http://bit.ly/SciFiFighter" target="_blank">http://bit.ly/SciFiFighter</a>).</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip59"></a>Tip</h3><p>The free <span class="strong"><strong>SciFi Fighter</strong></span> asset package when imported doesn't use its own folder (very annoying), so after you have imported it, create a new folder called <code class="literal">SciFi Fighter</code> and move its assets to this folder (the <code class="literal">Materials</code>, <code class="literal">Meshes</code>, and <code class="literal">Textures</code> folders and the <code class="literal">SciFi_Fighter_AK5</code> scene), just to keep the project structure tidy.</p></div></li></ol></div><p>It is truly amazing <a id="id718" class="indexterm"></a>what free stuff is available for game creators these days!</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec83"></a>The initial 3D scene</h3></div></div></div><p>I almost had a little too much<a id="id719" class="indexterm"></a> fun creating this basic scene and even learned some new tricks along the way. It's not crucial for the UI setup, so you can skip it if you want to, but it'll only take 5 minutes or so to complete:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Start with a new scene (if you haven't done so already) and save it as <code class="literal">Example_UI</code>.</p></li><li><p>Drag the <code class="literal">SciFi_Fighter_AK5.fbx</code> mesh asset into the scene from the <span class="strong"><strong>Meshes</strong></span> folder (either from the project root or the <code class="literal">SciFi Fighter</code> folder you created).</p></li><li><p>Change the <span class="strong"><strong>Rotation</strong></span> of the <span class="strong"><strong>SciFi Fighter</strong></span> to <span class="strong"><strong>X</strong></span> <code class="literal">357</code>, <span class="strong"><strong>Y</strong></span> <code class="literal">18</code>, <span class="strong"><strong>Z</strong></span> <code class="literal">317</code>. This gives a nice outbound flight path for the fighter.</p></li><li><p>Drag the <span class="strong"><strong>Main Camera</strong></span> (in the <span class="strong"><strong>Hierarchy</strong></span>) as a child of the <span class="strong"><strong>SciFi Fighter</strong></span> and reset its transform (using the cog icon in the top right-hand corner of the <span class="strong"><strong>Inspector</strong></span> with the <span class="strong"><strong>Main Camera</strong></span> selected, then select <span class="strong"><strong>Reset</strong></span>). This ensures that the camera is always following the fighter and keeps it in view.</p></li><li><p>Set up the Main Camera's transform as follows:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Position</strong></span>: <code class="literal">X 38</code>, <code class="literal">Y 48</code>,  <code class="literal">Z -47</code>
</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Rotation</strong></span>: <code class="literal">X 31</code>, <code class="literal"> Y </code>
<code class="literal">340</code>,  <code class="literal">Z 30</code>
</p></li></ul></div></li><li><p>Remove the <span class="strong"><strong>GUILayer</strong></span>, <span class="strong"><strong>Flare layer</strong></span>, and <span class="strong"><strong>Audio Listener</strong></span> from the <span class="strong"><strong>Main Camera</strong></span> by right-clicking on each component and selecting the <span class="strong"><strong>Remove</strong></span> <span class="strong"><strong>Component</strong></span> option. These just get in the way here because it's following the ship.</p></li><li><p>Set the <span class="strong"><strong>Clear Flags</strong></span> property to <span class="strong"><strong>Depth</strong></span> <span class="strong"><strong>Only</strong></span> and the <span class="strong"><strong>Depth</strong></span> to <code class="literal">0</code> on the <span class="strong"><strong>Main Camera</strong></span> since this is just a tracking camera in front of a background (which we'll add in a bit).</p></li><li><p>Add a <span class="strong"><strong>Directional Light</strong></span> using <span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>Light</strong></span> | <span class="strong"><strong>Directional Light</strong></span> to the scene to light the way.</p></li></ol></div><p>Here's where you should be up to now, no UI yet, just the beginnings of a scene:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_APP_02.jpg" /></div><p>Next, let's smarten it up a <a id="id720" class="indexterm"></a>bit with a background skybox and even a trail for the ship:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Add a new <span class="strong"><strong>Layer</strong></span> to the project (through the <span class="strong"><strong>Layer</strong></span> menu in the top-right corner of the <span class="strong"><strong>Inspector</strong></span> for every GameObject) called <span class="strong"><strong>Background</strong></span> (this just helps you identify background objects for the background camera). This should be in the <span class="strong"><strong>User Layer 8</strong></span> field (but any position in the Layer array will do).</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_APP_03.jpg" /><div class="caption"><p>The Add Layer... option in the Inspector</p></div></div></li><li><p>Add a new<a id="id721" class="indexterm"></a> <span class="strong"><strong>Camera</strong></span> to the scene (using <span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>Camera</strong></span>) and rename it to <code class="literal">BackgroundCamera</code>. </p></li><li><p>Set the <span class="strong"><strong>Depth</strong></span> for the <code class="literal">BackgroundCamera</code> to <code class="literal">1</code>.</p></li><li><p>Set the <span class="strong"><strong>Layer</strong></span> for the <code class="literal">BackgroundCamera</code> to the new <span class="strong"><strong>Background</strong></span> layer using the Layer combobox shown earlier.</p></li><li><p>Configure the <span class="strong"><strong>Culling Mask</strong></span> of the <span class="strong"><strong>BackgroundCamera</strong></span> to just <span class="strong"><strong>Background</strong></span> by selecting <span class="strong"><strong>Nothing</strong></span> in the drop-down selection and then selecting <span class="strong"><strong>Background</strong></span>. (For an added bonus, also remove the Background layer from the <span class="strong"><strong>Culling Mask</strong></span> of the <span class="strong"><strong>Main Camera</strong></span> so it does not render it.)</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_APP_04.jpg" /></div></li><li><p>Add a <a id="id722" class="indexterm"></a>
<span class="strong"><strong>Skybox</strong></span> component (<span class="strong"><strong>Add</strong></span> <span class="strong"><strong>Component</strong></span> | <span class="strong"><strong>Rendering</strong></span> | <span class="strong"><strong>Skybox</strong></span>) to the <span class="strong"><strong>BackgroundCamera</strong></span> and set the <span class="strong"><strong>Custom Skybox</strong></span> property to one of the skyboxes from the <code class="literal">SkyBox Volume 2</code> folder. You can do this by dragging the <span class="strong"><strong>DSG.mat</strong></span> asset (the material, not the textures) to the <span class="strong"><strong>Custom SkyBox</strong></span> property of the <span class="strong"><strong>Skybox</strong></span> <span class="strong"><strong>Component</strong></span>. I personally went for the <code class="literal">DeepSpaceGreen SkyBox</code> (in the folder of the same name under the <code class="literal">SkyBox Volume 2</code> folder).</p></li><li><p>Finally, add a new <span class="strong"><strong>Particle System</strong></span> as a child of the <span class="strong"><strong>BackgroundCamera</strong></span> (right-click on <span class="strong"><strong>BackgroundCamera</strong></span> and select <span class="strong"><strong>Particle System</strong></span>) with the following settings (any settings you won't alter are the defaults):</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Transform</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Position: X = <span class="strong"><strong>83</strong></span>, Y = <span class="strong"><strong>28</strong></span>, Z = <span class="strong"><strong>76</strong></span>
</p></li><li style="list-style-type: disc"><p>Rotation: X = <span class="strong"><strong>10</strong></span>, Y = <span class="strong"><strong>240</strong></span>, Z = <span class="strong"><strong>1.8</strong></span>
</p></li></ul></div></li><li style="list-style-type: disc"><p>Particle System</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Duration = <span class="strong"><strong>20</strong></span>
</p></li><li style="list-style-type: disc"><p>Start Lifetime = <span class="strong"><strong>20</strong></span>
</p></li><li style="list-style-type: disc"><p>Start Speed = <span class="strong"><strong>10</strong></span>
</p></li><li style="list-style-type: disc"><p>Emission Rate = <span class="strong"><strong>5</strong></span>
</p></li></ul></div></li><li style="list-style-type: disc"><p>Shape</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Shape = <span class="strong"><strong>Box</strong></span>
</p></li><li style="list-style-type: disc"><p>Box X = <span class="strong"><strong>50</strong></span>
</p></li><li style="list-style-type: disc"><p>Box Y = <span class="strong"><strong>50</strong></span>
</p></li><li style="list-style-type: disc"><p>Box Z = <span class="strong"><strong>5</strong></span>
</p></li></ul></div></li><li style="list-style-type: disc"><p>Renderer Max Particle Size = <span class="strong"><strong>0.005</strong></span>
</p></li></ul></div></li></ol></div><p>The <span class="strong"><strong>Particle </strong></span><a id="id723" class="indexterm"></a>
<span class="strong"><strong>System</strong></span> should now look like the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_APP_05.jpg" /></div><p>All this does is it<a id="id724" class="indexterm"></a> simply adds some flavor to our scene so it's not boring.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note187"></a>Note</h3><p>I've found in situations where you want a background and a moving target that you want to follow, it is best to have the background and the target use separate cameras.</p></div><p>After all that, our demo scene now looks like the following:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_APP_06.jpg" /></div><p>Lastly, let's kick <a id="id725" class="indexterm"></a>our ship into action and make it at least look like it's moving:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Add a <span class="strong"><strong>Rigidbody</strong></span> component (<span class="strong"><strong>Add</strong></span> <span class="strong"><strong>Component</strong></span> | <span class="strong"><strong>Physics</strong></span> | <span class="strong"><strong>Rigidbody</strong></span>) to the <span class="strong"><strong>SciFi_Fighter_AK5</strong></span> and uncheck the <span class="strong"><strong>Use Gravity</strong></span> property. (It's space; there is no gravity!)</p></li><li><p>Add two new Empty GameObjects as children to the <span class="strong"><strong>SciFi_Fighter_AK5</strong></span> (right-click on the <span class="strong"><strong>fighter</strong></span> and select <span class="strong"><strong>Create Empty</strong></span>). Name them <span class="strong"><strong>Engine1</strong></span> and <span class="strong"><strong>Engine2</strong></span>.</p></li><li><p>For <span class="strong"><strong>Engine1</strong></span>, set its <span class="strong"><strong>Transform</strong></span> <span class="strong"><strong>Position</strong></span> to <span class="strong"><strong>X</strong></span> -<code class="literal">3.24</code>, <span class="strong"><strong>Y</strong></span> -<code class="literal">0.04</code>, <span class="strong"><strong>Z</strong></span> -<code class="literal">1.69</code> (<span class="strong"><strong>Rotation</strong></span> values should all be <code class="literal">0</code> and <span class="strong"><strong>Scale</strong></span> values should all be <code class="literal">1</code>).</p></li><li><p>For <span class="strong"><strong>Engine2</strong></span>, set its <span class="strong"><strong>Transform</strong></span> <span class="strong"><strong>Position</strong></span> to <span class="strong"><strong>X</strong></span> <code class="literal">3.49</code>, <span class="strong"><strong>Y</strong></span> -<code class="literal">0.04</code>, <span class="strong"><strong>Z</strong></span> -<code class="literal">1.69</code> (<span class="strong"><strong>Rotation</strong></span> values should all be <code class="literal">0</code> and <span class="strong"><strong>Scale</strong></span> values should all be <code class="literal">1</code>).</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note188"></a>Note</h3><p>If, for some reason, this does not place the engine's GameObjects in the exhaust ports of the ship, just position them manually in relation to the SciFi Fighter.</p></div></li><li><p>Select <span class="strong"><strong>BOTH</strong></span> the Engines in the project <span class="strong"><strong>Hierarchy</strong></span>. Then, in the <span class="strong"><strong>Inspector </strong></span>window, click on <span class="strong"><strong>Add</strong></span> <span class="strong"><strong>Component</strong></span> and select <span class="strong"><strong>Effects</strong></span> | <span class="strong"><strong>Trail Renderer</strong></span>.</p></li><li><p>Still with both the Engines selected, expand the <span class="strong"><strong>Materials</strong></span> section of the <span class="strong"><strong>Trail Renderer</strong></span> in the Inspector and set the <span class="strong"><strong>Size</strong></span> to <code class="literal">2</code>.</p></li><li><p>Drag the<a id="id726" class="indexterm"></a> <span class="strong"><strong>FlameE</strong></span> material from the standard <code class="literal">Assets\Particles\Sources\Materials</code> folder onto <span class="strong"><strong>Element</strong></span> <code class="literal">0</code> of <span class="strong"><strong>Trail Renderer Materials.</strong></span>
</p></li><li><p>Drag the <span class="strong"><strong>Smoke Trail</strong></span> material from the standard <code class="literal">Assets\Particles\Sources\Materials</code> folder on to <span class="strong"><strong>Element</strong></span> <code class="literal">1</code> of <span class="strong"><strong>Trail Renderer Materials.</strong></span>
</p></li><li><p>Set the <span class="strong"><strong>Time</strong></span> to <code class="literal">2</code>, <span class="strong"><strong>Start Width</strong></span> to <code class="literal">5</code>, and <span class="strong"><strong>End Width</strong></span> to <code class="literal">0.5</code>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note189"></a>Note</h3><p>The <span class="strong"><strong>Trail Renderer</strong></span> is a great way of adding simple trails to GameObjects, whether it's a light cycle, a car, or, in this case, a spaceship. They float along behind the object as it moves round the scene.</p></div></li></ol></div><p>The <span class="strong"><strong>Trail Renderer</strong></span> in the <span class="strong"><strong>Inspector</strong></span> window should now look like the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_APP_07.jpg" /></div><p>Almost there! One <a id="id727" class="indexterm"></a>last thing remains. If you run the scene now, you won't see any change. There are no trails; the ship just sits there and does nothing. Simply put, it's doing nothing because we haven't told it to do anything. For the <span class="strong"><strong>Trail Renderer</strong></span> to work, the ship has to move.</p><p>For the last touch, create a new C# script called <code class="literal">ShipMove</code> and replace its contents with the following:</p><div class="informalexample"><pre class="programlisting">using UnityEngine;
 
public class ShipMove : MonoBehaviour {
  void Start () {
  //Kick the ship in to action with a bit of force.	
GetComponent&lt;Rigidbody&gt;().AddForce(Vector3.forward * 50, 
 ForceMode.VelocityChange);
  }
}</pre></div><p>Now, simply attach the script to the <span class="strong"><strong>SciFi_Fighter_AK5</strong></span> GameObject and hit play and your fighter will be screaming through the stars on its way to oblivion.</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_APP_08.jpg" /></div><p>Our sample <a id="id728" class="indexterm"></a>scene is complete.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note190"></a>Note</h3><p>The complete scene is also available as a Unity package and can be downloaded from <a class="ulink" href="http://bit.ly/UIEssentialsCh5DemoScene" target="_blank">http://bit.ly/UIEssentialsCh5DemoScene</a>.</p></div><p>Now, return to <a class="link" href="#" linkend="ch05">Chapter 5</a>, <span class="emphasis"><em>Screen Space, World Space, and the Camera</em></span>, and start adding some UI to this amazing scene you have created.</p></div></div>