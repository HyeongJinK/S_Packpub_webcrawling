<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec31"></a>Scaling and resolution</h2></div></div><hr /></div><p>Time <a id="id491" class="indexterm"></a>for a bit of tilt and sail.</p><p>If you <a id="id492" class="indexterm"></a>recall, in <a class="link" href="#" linkend="ch02">Chapter 2</a>, <span class="emphasis"><em>Building Layouts</em></span>, we made reference to the <span class="strong"><strong>Canvas Scaler</strong></span>, an automagical component that tells our <span class="strong"><strong>Canvas</strong></span> how to draw the top-level <span class="strong"><strong>Canvas</strong></span> to the screen. The <span class="strong"><strong>Canvas Scaler</strong></span> is automatically added to a new <span class="strong"><strong>Canvas</strong></span> when it is added to the scene, if you need to re-add it simply click <span class="strong"><strong>Add Component</strong></span> | <span class="strong"><strong>Layout</strong></span> | <span class="strong"><strong>Canvas Scaler</strong></span> in the <span class="strong"><strong>Inspector</strong></span> with the <span class="strong"><strong>Canvas</strong></span> selected.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec48"></a>Working with the constant default</h3></div></div></div><p>The <a id="id493" class="indexterm"></a>default setting of the <span class="strong"><strong>Canvas Scaler</strong></span> component<a id="id494" class="indexterm"></a> for your top-level <span class="strong"><strong>Canvas</strong></span> is <span class="strong"><strong>Constant Pixel Size</strong></span> mode, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_04_14.jpg" /></div><p>This just lets us set the default Sprite's <span class="strong"><strong>Scale Factor</strong></span> and a <span class="strong"><strong>Reference</strong></span> <span class="strong"><strong>Pixels Per Unit</strong></span> value (for pixel-perfect drawing if the <span class="strong"><strong>Pixels Per Unit</strong></span> setting is used in your sprites) for the <span class="strong"><strong>Canvas</strong></span>, making <a id="id495" class="indexterm"></a>it as steadfast as a ship run<a id="id496" class="indexterm"></a> into the groundâ€”this boat isn't moving.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note118"></a>Note</h3><p>The <span class="strong"><strong>Pixels Per Unit</strong></span> setting on a sprite sets how many in-game units a sprite takes up (how big it is in relation to your other sprites). This is then used by the <span class="strong"><strong>Reference Pixels Per Unit</strong></span> value that decides how many pixels are in 1 game unit; <code class="literal">100</code> pixels in this case makes 1 game unit of width and height.</p><p>For more information on this, check the Unity documentation at <a class="ulink" href="http://docs.unity3d.com/Manual/class-TextureImporter.html" target="_blank">http://docs.unity3d.com/Manual/class-TextureImporter.html</a>.</p></div><p>So what does this mean for our fancy health bar and other UI elements? Well, if we resize our gameplay screen, the result is fairly obvious.</p><p>If we compare what our <span class="strong"><strong>Canvas</strong></span> looks like at the moment in various resolutions using the <span class="strong"><strong>Constant Pixel Size</strong></span> mode, this is what we will see:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_04_15.jpg" /><div class="caption"><p>Slider as seen in the Free Aspect view using Constant Pixel Size</p></div></div><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_04_16.jpg" /><div class="caption"><p>Slider as seen in the 3:2 aspect using Constant Pixel Size</p></div></div><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_04_17.jpg" /><div class="caption"><p>Slider as seen in a the 5:4 aspect using Constant Pixel Size</p></div></div><p>As <a id="id497" class="indexterm"></a>you can see, using the <span class="strong"><strong>Constant Pixel Size</strong></span> mode, every value we entered is adhered to regardless of the display resolution. So, the <a id="id498" class="indexterm"></a>width of the <span class="strong"><strong>Slider</strong></span> is dynamically updated because of its Anchors; however, the padding around the <span class="strong"><strong>Slider</strong></span> remains constant.</p><p>As this is not desirable, let's look at how we can make our UI behave better when the screen is resized. This is important not just to work with smaller screens, but also when your game is displayed on huge 50 inch screens with desktops and consoles.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec49"></a>Scaling to my view</h3></div></div></div><p>The next <a id="id499" class="indexterm"></a>option we have in our arsenal <a id="id500" class="indexterm"></a>with the <span class="strong"><strong>Canvas Scaler</strong></span> is to use what is referred to as <span class="strong"><strong>Reference Resolution</strong></span>. This simply means that the UI we are presenting will always have the same resolution on screen, no matter what its screen size is, setting our course straight and true.</p><p>In this mode the <a id="id501" class="indexterm"></a>entire <span class="strong"><strong>Canvas</strong></span> will make itself fit <a id="id502" class="indexterm"></a>in the screen using our own preferred resolution scale. Looking at <span class="strong"><strong>Canvas Scaler</strong></span> in <span class="strong"><strong>Scale With Screen Size</strong></span> mode, we see the following:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_04_18.jpg" /></div><p>By setting up our preferred <span class="strong"><strong>Reference Resolution</strong></span> to a virtual <span class="strong"><strong>Width</strong></span> (<span class="strong"><strong>X</strong></span>) and <span class="strong"><strong>Height</strong></span> (<span class="strong"><strong>Y</strong></span>), we can control how the canvas will be drawn. With the <span class="strong"><strong>Screen Match Mode</strong></span>, we can also determine on which axis scaling should be controlled. Just the <span class="strong"><strong>Width</strong></span>, the <span class="strong"><strong>Height</strong></span> or a<a id="id503" class="indexterm"></a> factor in-between using the <span class="strong"><strong>Match</strong></span> slider; alternatively, we can just <a id="id504" class="indexterm"></a>set it to only <span class="strong"><strong>Expand</strong></span> or only <span class="strong"><strong>Shrink</strong></span> if you so wish, all of which was explained in great detail in <a class="link" href="#" linkend="ch02">Chapter 2</a>, <span class="emphasis"><em>Building Layouts</em></span>.</p><p>So, using the <span class="strong"><strong>Scale With Screen Size</strong></span> mode, we ensure what we originally configured in our UI will always look the same as shown in the following screenshots (using a <span class="strong"><strong>Match</strong></span> width/height setting with a 0.5 <span class="strong"><strong>Match</strong></span> value, balanced):</p><p>If we revisit our comparisons, they now look like this, using <span class="strong"><strong>Scale With Screen Size</strong></span> <span class="strong"><strong>Canvas Scaler</strong></span> (using a Match width/height setting with a 0.5 Match value, balanced):</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_04_19.jpg" /><div class="caption"><p>Slider as seen in the Free Aspect view using Scale With Screen Size</p></div></div><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_04_20.jpg" /><div class="caption"><p>Slider as seen in the 3:2 aspect using Scale With Screen Size</p></div></div><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_04_21.jpg" /><div class="caption"><p>Slider as seen in the 5:4 aspect using Scale With Screen Size</p></div></div><p>This <a id="id505" class="indexterm"></a>gives a much better result than<a id="id506" class="indexterm"></a> not using any manual scaling at all, but as you can see, there is still some scaling going on: the bar is being shrunk to fit the desired area. In some cases this may not be the desired effect. We could increase the <span class="strong"><strong>Reference Resolution</strong></span> but this would just make it a lot smaller on small screens and crisper on a large screen. It is a fine balance, but there is another option to consider.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec50"></a>Getting physical</h3></div></div></div><p>When <a id="id507" class="indexterm"></a>you want to get things exactly how<a id="id508" class="indexterm"></a> you want them and when you want them, the final gate is to work with pixels. Shaders do it and meshes do this when you're working at the indices level.</p><p>By setting the <span class="strong"><strong>Canvas Scaler</strong></span> mode to <span class="strong"><strong>Constant Physical Size</strong></span>, you are in complete control of your destiny, as you can see here:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_04_22.jpg" /></div><p>You are so much in control that you can even set your own measurements the way you want to, from Points (effectively, individual pixels) to real-world measurements in <span class="strong"><strong>Centimeters</strong></span> and <span class="strong"><strong>Millimeters</strong></span>. Then, you can set a default screen scale in <span class="strong"><strong>DPI</strong></span> (or measurement per inch really), which decides what the full screen aspect would be.</p><p>On first reflection, however, changing our <span class="strong"><strong>Canvas Scaler</strong></span> over to <span class="strong"><strong>Constant Physical Size</strong></span> gives us some unintentional results, as you can see here (iceberg ahead):</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_04_23.jpg" /><div class="caption"><p>Slider as seen in the Free Aspect view using Constant Physical Size</p></div></div><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_04_24.jpg" /><div class="caption"><p>Slider as seen in the 3:2 aspect using Constant Physical Size</p></div></div><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_04_25.jpg" /><div class="caption"><p>Slider as seen in the 5:4 aspect using Constant Physical Size</p></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note119"></a>Note</h3><p>You will notice that in the 5:4 screen ratio, the slider has vanished completely. This is just because our <span class="strong"><strong>Slider</strong></span> now has a negative width due to the padding and position values used on the slider's <span class="strong"><strong>Rect Transform</strong></span>. If you check the scene view, you will see the following:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_04_26.jpg" /></div><p>As you can see, the <span class="strong"><strong>Slider</strong></span> is now drawn with a red cross; this shows that it is being rendered incorrectly. Effectively, its left and right edges have been folded over onto themselves (think of it like folding a piece of paper over itself), and because UI cannot be rendered backwards, it cannot be drawn.</p></div><p>The <a id="id509" class="indexterm"></a>reason for this is quite simple. All <a id="id510" class="indexterm"></a>our measurements for position and padding are now completely wrong; they simply haven't been scaled or factored into the new type of measurement we have selected using our <span class="strong"><strong>Canvas Scaler</strong></span>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note121"></a>Note</h3><p>Granted, if you are starting a new Canvas and selected the Physically sized <span class="strong"><strong>Canvas Scaler</strong></span> from the beginning, you won't have these issues simply because you started with the correct measurements.</p><p>However, if you switch to using a different <span class="strong"><strong>Ui Scale Mode</strong></span>, you will have to resize your elements again.</p></div><p>If we simply return and update the Rect Transform's <span class="strong"><strong>Left</strong></span> and <span class="strong"><strong>Right</strong></span> values to <code class="literal">100</code> (instead of the previous value of <code class="literal">200</code>), our <span class="strong"><strong>Slider</strong></span> will again be positioned correctly and give the following results when scaled:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_04_27.jpg" /><div class="caption"><p>Slider as seen in the Free Aspect view using Constant Physical Size, that is now scaled correctly</p></div></div><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_04_28.jpg" /><div class="caption"><p>Slider as seen in the 3:2 aspect using Constant Physical Size, that is now scaled correctly</p></div></div><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_04_29.jpg" /><div class="caption"><p>Slider as seen in the 5:4 aspect using Constant Physical Size that is now scaled correctly</p></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec51"></a>Which to choose?</h3></div></div></div><p>Each mode of the <span class="strong"><strong>Canvas Scaler</strong></span> has its benefits and drawbacks, and you may even end up using<a id="id511" class="indexterm"></a> more than one type of <span class="strong"><strong>Ui Scale Mode</strong></span> on separate Canvases within a scene.</p><p>Planning a truly multiplatform UI is still hard, but at least Unity has now given you much better tools and layouts than the old legacy GUI system, plus the full source code should you wish to extend it in your own way.</p><p>Generally speaking, you will most likely use <span class="strong"><strong>Scale With Screen Size</strong></span> mode of the <span class="strong"><strong>Canvas Scaler</strong></span> for your topmost <span class="strong"><strong>Canvas</strong></span> as it offers the best resizing options. However, the <span class="strong"><strong>Constant Physical Size</strong></span> mode of <span class="strong"><strong>Canvas Scaler</strong></span> is great for those pixel-perfect UIs where you want everything just so, which you will most likely use as a child Canvas of a top-level Canvas (remember, you can have any kind of depth for the Canvas you wish).</p><p>Of course, you can forgo all of this and leave the <span class="strong"><strong>Canvas Scaler</strong></span> alone and build different UIs for each platform as before if you wish.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip35"></a>Tip</h3><p>My best advice with all these options is to play with them and see what works for you as each UI situation is different. Remember, you are not limited in anyway, so if you want three parent Canvases, all with different scaling options, then go wild or create nested Canvases in your scene.</p><p>However, only use a new <span class="strong"><strong>Canvas</strong></span> if you want to add the <span class="strong"><strong>Canvas Scaler</strong></span> to it or a different <span class="strong"><strong>Raycast</strong></span> system, else just use an empty GameObject and its <span class="strong"><strong>Rect Transform</strong></span> to position, rotate, or scale your UI panel/window.</p></div></div></div>