<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec30"></a>Stretch it, bend it</h2></div></div><hr /></div><p>Now that we have mastered pinning our UI in place, how about some dynamic resizing? Time to set our course straight and true, <span class="emphasis"><em>Warp factor 5, Mr. Sulu</em></span>. (Darn it! That's Star Trek, not very nautical is it?)</p><p>In a lot of UI designs, it is just not enough to have objects drawn in a particular position; we want them to always fill a particular portion of the screen, say 50 percent of the width. In these cases, just having it in a fixed place is no good if the screen resizes down below the width of the element we are trying to draw.</p><p>As an <a id="id485" class="indexterm"></a>example, let's wipe out what we have done so far and build a health bar. The requirements set down by our really critical graphics designer are as follows:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>It should always be centered at the top of the screen.</p></li><li style="list-style-type: disc"><p>It should have a 20-pixel space between the top of the screen and the health bar.</p></li><li style="list-style-type: disc">
It should take up approximately 50 percent of the width of the screen on all devices. (But I'm targeting Android; that's impossible! Far too many resolutions to handle with any UI <span class="inlinemediaobject"><img src="/graphics/9781783553617/graphics/Smiley.jpg" /></span>)
</li><li style="list-style-type: disc"><p>It should be 25 pixels high.</p></li><li style="list-style-type: disc"><p>It should fill from the left, with left being 0 and right being 100 health.</p></li></ul></div><p>A simple request from our designer, but how do we achieve this in the new UI without a lot of complicated scripting? Easy, with our Anchors.</p><p>Let's start by adding a <span class="strong"><strong>Slider</strong></span> to a new scene; in the example code, I called it <span class="strong"><strong>Resizing</strong></span> UI.</p><p>We'll add a <span class="strong"><strong>Slider</strong></span> and then configure its properties to give it a health bar look and feel (with my poor UX skills and lack of color coordination):</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Add a new <span class="strong"><strong>Slider</strong></span> to the Scene.</p></li><li><p>Expand the <span class="strong"><strong>Slider</strong></span> control in the hierarchy and delete the <span class="strong"><strong>Handle Slide Area</strong></span> (which will also delete its child <span class="strong"><strong>Handle</strong></span> GameObject).</p></li><li><p>Select the <span class="strong"><strong>Slider</strong></span> and click on the <span class="strong"><strong>Handle Rect</strong></span> property; if it says Missing <span class="strong"><strong>Rect Transform</strong></span>, then hit <span class="emphasis"><em>delete</em></span> (to clear the property as we have no handle).</p></li><li><p>Set the <span class="strong"><strong>Target Graphic</strong></span> of the <span class="strong"><strong>Slider</strong></span> to the <span class="strong"><strong>Fill</strong></span> <span class="strong"><strong>GameObject </strong></span>by either using the <span class="strong"><strong>Object Selector</strong></span> button to the right of the property or dragging the <span class="strong"><strong>Fill GameObject</strong></span> from the hierarchy to the property. (This is just so when the user's mouse hovers over the control it will be highlighted; this is optional).</p></li><li><p>Set<a id="id486" class="indexterm"></a> the Slider <span class="strong"><strong>Width</strong></span> property to <code class="literal">200</code>.</p></li><li><p>Set the Slider <span class="strong"><strong>Height</strong></span> property to <code class="literal">25</code>.</p></li><li><p>Select the <span class="strong"><strong>Background GameObject in the Hierarchy </strong></span>and set the <span class="strong"><strong>Color</strong></span> property of the Image to <code class="literal">Black</code> (the slider background).</p></li><li><p>(optional) Resize the <span class="strong"><strong>Rect Transform</strong></span> of the <span class="strong"><strong>Background</strong></span> GameObject to fill the area of the <span class="strong"><strong>Slider</strong></span> GameObject).</p></li><li><p>Select the Slider again and set the <span class="strong"><strong>Max Value</strong></span> property to <code class="literal">100</code>.</p></li><li><p>Check the box for <span class="strong"><strong>Whole Numbers</strong></span> on the <span class="strong"><strong>Slider</strong></span>.</p></li><li><p>Select the <span class="strong"><strong>Fill GameObject</strong></span> in the project hierarchy and set the <span class="strong"><strong>Color</strong></span> property of the image to <code class="literal">Green</code>. (Green is good for health, isn't it?)</p></li><li><p>(optional) Resize the <span class="strong"><strong>Rect Transform</strong></span> of the <span class="strong"><strong>FillArea</strong></span> GameObject to fill the area of the <span class="strong"><strong>Slider</strong></span> GameObject).</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_04_10.jpg" /><div class="caption"><p>A screenshot showing the health bar Slider with its value at 80 (80%)</p></div></div></li></ol></div><p>So we have our health bar; what about our other requirements? For these, we'll use our stretching Anchors. Select the <span class="strong"><strong>Slider</strong></span> in the hierarchy and then click on the <span class="strong"><strong>Anchor Presets</strong></span> button. Once it's open, select the <span class="strong"><strong>top</strong></span> and <span class="strong"><strong>stretch</strong></span> option, as shown in following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_04_11.jpg" /></div><p>Now you <a id="id487" class="indexterm"></a>have two options when selecting the preset: you can just click on it to alter the <span class="strong"><strong>Anchor </strong></span>positions, or you can hold the <span class="emphasis"><em>Alt</em></span> key and also move the GameObject, which will give you either of the following results:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_04_12.jpg" /></div><p>As you <a id="id488" class="indexterm"></a>can see, in both instances, we still need to do some work to position our health bar how we want it to be; you just choose the path of least resistance for what you want to achieve.</p><p>To finish off, let's finalize the settings of <span class="strong"><strong>Rect Transform</strong></span> for our <span class="strong"><strong>Slider</strong></span> to position it how we want it to be. You will also notice that because we are now using Stretched Anchors, the <span class="strong"><strong>Rect Transform</strong></span> position values have been updated to those shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_04_30.jpg" /><div class="caption"><p>Position values after stretching the health bar</p></div></div><p>Because the <span class="strong"><strong>Slider</strong></span> GameObject is now has stretched <span class="strong"><strong>Anchors</strong></span> on the <span class="strong"><strong>X</strong></span> axis, the <span class="strong"><strong>Pos X</strong></span> and <span class="strong"><strong>Width</strong></span> properties have been replaced <a id="id489" class="indexterm"></a>with <span class="strong"><strong>Left</strong></span> and <span class="strong"><strong>Right</strong></span>. These now indicate how much padding is there between the GameObject's <span class="strong"><strong>Rect Transform</strong></span> border and the left- and right-hand side areas of the screen.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note115"></a>Note</h3><p>If you set <span class="strong"><strong>Rect Transform</strong></span> <span class="strong"><strong>Anchors</strong></span> to the <span class="strong"><strong>stretch</strong></span> mode on <span class="strong"><strong>Y</strong></span> axis, the <span class="strong"><strong>Pos Y</strong></span> and <span class="strong"><strong>Height</strong></span> settings will be replaced with the top and bottom settings instead. If you set it to stretch the area completely, then all four settings will be updated.</p></div><p>If you now update the <span class="strong"><strong>Rect Transorm</strong></span> values for the <span class="strong"><strong>Slider</strong></span> with those shown in the following screenshot, we will achieve the laudy goals our designer required, well almost:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_04_13.jpg" /><div class="caption"><p>Updated position values</p></div></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip34"></a>Tip</h3><p>If you wish, you can now go back to the <span class="strong"><strong>Slider</strong></span> and stretch the <span class="strong"><strong>Anchors</strong></span> for the <span class="strong"><strong>Background</strong></span> and <span class="strong"><strong>FillArea</strong></span> GameObjects to make them fill the entire Slider.</p></div><p>The designer asked for 20-pixel distance between the top of the screen and the health bar, but at present, it's actually about 9 pixels from the top. (Why oh why? It's set to 20 in the preceding screenshot, isn't it!)</p><p>The reason is simple if you recall from earlier: the <span class="strong"><strong>Anchors</strong></span> are positioned relative to the <span class="strong"><strong>Pivot</strong></span> point of the <span class="strong"><strong>Rect Transform</strong></span>, and our <span class="strong"><strong>Pivot</strong></span> is still set to the default, in the center of our <span class="strong"><strong>Slider</strong></span> <span class="inlinemediaobject"><img src="/graphics/9781783553617/graphics/Smiley.jpg" /></span>.</p><p>To correct this, include half the height of the Slider's GameObject in your <span class="strong"><strong>Pos Y</strong></span> value of the Slider's <span class="strong"><strong>Rect Transform</strong></span> (it's negative because we are counting from the top of the screen), edit the <span class="strong"><strong>Pivot</strong></span> point to be at the top of the <span class="strong"><strong>Slider</strong></span> by setting the value of <span class="strong"><strong>Pivot</strong></span> <span class="strong"><strong>Y</strong></span> to <code class="literal">1</code>, or use the <span class="strong"><strong>Rect Tool</strong></span> in <span class="strong"><strong>Pivot</strong></span> mode and drag the <span class="strong"><strong>Pivot</strong></span> point (blue circle) to the top of the <span class="strong"><strong>Rect Transform</strong></span> (which is what I did in this example).</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note116"></a>Note</h3><p>Just be sure to check that the <span class="strong"><strong>Pos Y</strong></span> value is correct after editing the <span class="strong"><strong>Pivot</strong></span> point and that it hasn't moved the <span class="strong"><strong>Rect Transform</strong></span>. If it has, then update it again to <code class="literal">-20</code>.</p></div><p>So we have <a id="id490" class="indexterm"></a>met our goal; time to get paid, right? Actually, no because our designer simply failed to mention one little thing: it's meant to also run on a 4-inch Android device. This means our previous settings will not scale down enough and our health bar will not be drawn all because the left and right padding values are set to <code class="literal">200</code>. When the screen is scaled down, there won't be enough space left to draw the slider, whoops!</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note117"></a>Note</h3><p>Note, you do not have to use just the <span class="strong"><strong>Anchor Presets</strong></span>. If you wish you can also alter the <span class="strong"><strong>Anchors</strong></span> manually by dragging each corner of the <span class="strong"><strong>Anchor</strong></span> handle to the position you wish. In most cases the presets are enough but if you want more, you can just Do it Yourself!</p></div></div>