<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch05lvl1sec37"></a>Going deep</h2></div></div><hr /></div><p>So far in both modes <a id="id559" class="indexterm"></a>of the Screen Space Canvases, we dealt with a UI that was being drawn relative to the entire drawing space of the screen; each of the modes is intended to draw over or against the full screen.</p><p>However, in a lot of cases, this is not the desired effect. We want our UI to draw on surfaces, pop up message boxes within (not on) a scene, or even hover over the shoulder of a third-person character (as shown in the aforementioned inventory panel used in games such as Dead Space).</p><p>A lot of this is possible today, either using render textures (which require the pro version of Unity), twisting the legacy GUI through code (not very pretty), or using shaders in an intrinsic way (requiring an in-depth knowledge of shaders). All of these are usually outside the comfort zone for beginners or require a lot of time to set up and get right. This is where the new <span class="strong"><strong>World Space</strong></span> <span class="strong"><strong>Canvas</strong></span> comes in.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec61"></a>Hang your Canvas wherever you like</h3></div></div></div><p>With the <a id="id560" class="indexterm"></a>
<span class="strong"><strong>World Space Canvas</strong></span>, you literally get to take your UI canvas and place it where you want, positioned where you want, and rotated however you like, fully within a 3D environment. Unlike the Screen Space Canvases, they are not limited in any way. In fact, a <span class="strong"><strong>World Space Canvas</strong></span> acts almost entirely the same as a <span class="strong"><strong>Render Texture</strong></span> but without the limitation of requiring a Pro license—it is available to all.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note139"></a>Note</h3><p>A <span class="strong"><strong>Render Texture</strong></span><a id="id561" class="indexterm"></a> is a special kind of texture that is generated at runtime using an independent camera. The view of the camera is output to a texture buffer instead of directly to the screen. This image can then be placed anywhere within a 3D scene to display the camera's output.</p><p>This is normally used for minimaps (where the map is rendered in view of a different camera) for rearview displays or circumstances where you want to show an additional view other than what the <span class="strong"><strong>Main Camera</strong></span> is displaying. In one case, I saw a <span class="strong"><strong>Render Texture</strong></span> being used in a <a id="id562" class="indexterm"></a>
<span class="strong"><strong>Portal</strong></span> (<a class="ulink" href="http://en.wikipedia.org/wiki/Portal_(video_game)" target="_blank">http://en.wikipedia.org/wiki/Portal_(video_game)</a>) clone, where one portal showed the view from another portal, in other words, the place where the port came out, which was obviously not what the player was looking at.</p><p>The big thing about Render Textures (as stated previously) is that it requires a Unity Pro license (for each platform) for it to be used, putting it just out of reach of users using the free license of Unity.</p></div><p>So once you have your <span class="strong"><strong>World Space Canvas</strong></span> set up, the world is your oyster, enabling you to build such fanciful things as:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>A TV screen, showing a series of ads</p></li><li style="list-style-type: disc"><p>A floating information board</p></li><li style="list-style-type: disc"><p>Interactive text with in-game characters</p></li><li style="list-style-type: disc"><p>A computer terminal that the player can actually interact with</p></li></ul></div><p>All of these can be fully animated through Unity's 2D animation system, which is pretty neat.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec62"></a>The showcase</h3></div></div></div><p>Right, as a basic example of this, we are going to add a <span class="strong"><strong>World Space Canvas</strong></span><a id="id563" class="indexterm"></a> into our <a id="id564" class="indexterm"></a>scene and attach it to our ship so it follows it wherever it goes (or at least when a conversation needs to happen), as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_05_17.jpg" /><div class="caption"><p>A World Space Canvas UI attached to the ship</p></div></div><p>The make-up of the UI is quite simple:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>One Panel in the top-left as an information image</p></li><li style="list-style-type: disc"><p>A child image for the Avatar placed relative to the empty slot in the top-left panel</p></li><li style="list-style-type: disc"><p>Another panel for the text background</p></li><li style="list-style-type: disc"><p>A Text control-sized for the panel area as a child of the text panel</p></li></ul></div><p>However, in a break from tradition, I'm first going to show you the wrong way to build a <span class="strong"><strong>World Space</strong></span> Canvas, so you can recognize issues it causes and then update to the better way.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note140"></a>Note</h3><p>The reason I'm showing you the wrong way first is to show you why it's wrong; it's a learning exercise. It also points out why there are certain ways of doing things that may not appear obvious and what to expect when it doesn't go right; just bear with me.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec63"></a>Build your UI and place it in the scene</h3></div></div></div><p>So, jumping in, let's add a new <span class="strong"><strong>World Space Canvas</strong></span> to our scene:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Disable the <a id="id565" class="indexterm"></a>
<span class="strong"><strong>GUICamera</strong></span> for now so we can <a id="id566" class="indexterm"></a>focus on our new <span class="strong"><strong>World Space Canvas</strong></span> (or just delete it; it's up to you).</p></li><li><p>Right-click on the <span class="strong"><strong>SciFi_Fighter_AK5</strong></span> and select <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Canvas</strong></span>.</p></li><li><p>A new canvas will appear in the scene offset and in a funny place; rename it to <code class="literal">WorldSpaceCanvas</code>.</p></li><li><p>Change the <span class="strong"><strong>Render Mode</strong></span> of the <span class="strong"><strong>Canvas</strong></span> to <span class="strong"><strong>World Space</strong></span>.</p></li><li><p>Reset the <span class="strong"><strong>Transform</strong></span> of the <span class="strong"><strong>WorldSpaceCanvas</strong></span> GameObject (using the cog icon in the top right hand corner of the <span class="strong"><strong>Rect Transform</strong></span> component in <span class="strong"><strong>Inspector</strong></span> with the WorldSpaceCanvas selected, then select Reset).</p></li><li><p>Right-click on the WorldSpaceCanvas GameObject and select <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Panel</strong></span> (this just adds a background image to our Canvas so we can see/position it).</p></li></ol></div><p>If you now switch to the Game view, you will see your new canvas positioned relative to your fighter in the 3D scene (ain't no 2D on this bad boy), as shown here:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_05_18.jpg" /></div><p>So we have our <a id="id567" class="indexterm"></a>Canvas. If you return to the <span class="strong"><strong>Scene</strong></span> view, you can <a id="id568" class="indexterm"></a>see the first issue with first positioning your new Canvas in World Space in your 3D scene before adding UI elements, the Canvas is rotated and positioned at an odd angle in the other 3D scene. Granted, this isn't a big issue. As with any 3D development we are used to this, so we can do the following:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Rotate the camera around until we are looking straight on at the <span class="strong"><strong>Canvas</strong></span>
</p></li><li style="list-style-type: disc"><p>Alternatively, switch on 2D view to flip to seeing the Canvas straight on (granted, it is still rotated when you use this method)</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note141"></a>Note</h3><p>If you try to use the GameObject alignment options (<span class="strong"><strong>GameObject</strong></span> | <span class="strong"><strong>Align with View or GameObject </strong></span>| <span class="strong"><strong>Align with Selected in the menu</strong></span>), then it will likely push our UI out of view. This is just my experience; yours may be different.</p></div></li></ul></div><p>Regardless of which path you choose, let's set up our <span class="strong"><strong>Canvas</strong></span> how we want it, so do the following:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Rotate and Position the <span class="strong"><strong>Canvas</strong></span> so it's alongside the Fighter, as shown in the screenshot earlier in the <span class="emphasis"><em>The Showcase</em></span> section.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip42"></a>Tip</h3><p>I find it's easier to do this by undocking the <span class="strong"><strong>Game</strong></span> view and placing it alongside the <span class="strong"><strong>Scene</strong></span> view. This way, you can use the Rotation and Position handles to update the Canvas position/rotation and see the result while you edit it. Alternatively, you can use the preconfigured view modes for the editor (dropdown in the upper right-hand corner of the editor) and use the 2 by 3 or 4 Split options, which will arrange your editor view.</p></div></li><li><p>Rename the <a id="id569" class="indexterm"></a>
<span class="strong"><strong>Panel</strong></span> that we added earlier to <a id="id570" class="indexterm"></a>
<code class="literal">TextArea</code> and resize it to the bottom right-hand corner of the <span class="strong"><strong>Canvas</strong></span>.</p></li><li><p>Change the <span class="strong"><strong>Source Image</strong></span> of the TextArea panel to the <code class="literal">Backdrop_Dark</code> sprite from the <span class="strong"><strong>HUD_BaseA</strong></span> image.</p></li><li><p>Add another <span class="strong"><strong>Panel</strong></span> to the <span class="strong"><strong>Canvas</strong></span> and rename it <code class="literal">AvatarArea</code>.</p></li><li><p>Change the <span class="strong"><strong>Source Image</strong></span> of the <span class="strong"><strong>AvatarArea</strong></span> panel to the <code class="literal">HUD_UnSelected</code> sprite from the <span class="strong"><strong>HUD_BaseA</strong></span> image.</p></li><li><p>Resize the <span class="strong"><strong>Panel</strong></span> down to the top left-hand corner.</p></li><li><p>Tweak both the panels until you get something like the following in the <span class="strong"><strong>Scene</strong></span>/<span class="strong"><strong>Game</strong></span> view:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_05_19.jpg" /></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip43"></a>Tip</h3><p>Remember, this is a 3D object like anything else. So, when positioning it, position it in 3D space to get the view you want.</p></div></li></ol></div><p>With these set up, let's <a id="id571" class="indexterm"></a>add the <span class="strong"><strong>Text</strong></span> and <span class="strong"><strong>Avatar</strong></span> and we're done:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Import an<a id="id572" class="indexterm"></a> Avatar head from the <span class="strong"><strong>NobleAvatar</strong></span> pack mentioned earlier (make sure you set its <span class="strong"><strong>TextureType</strong></span> to <code class="literal">Sprite</code> after importing).</p></li><li><p>Right-click on the <span class="strong"><strong>AvatarArea</strong></span> panel and select <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Image</strong></span> and change its <span class="strong"><strong>Source Image</strong></span> to the imported <span class="strong"><strong>Avatar</strong></span>.</p></li><li><p>Resize and position the <span class="strong"><strong>Avatar</strong></span> over the empty hexagon on the <span class="strong"><strong>AvatarArea</strong></span>.</p></li><li><p>Right-click on the <span class="strong"><strong>TextArea</strong></span> and add select <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Text</strong></span> to add a<span class="strong"><strong> Text Component</strong></span>. </p></li><li><p>Resize the <span class="strong"><strong>Text Rect Transform</strong></span> to fit comfortably within the <span class="strong"><strong>TextArea</strong></span>.</p></li><li><p>Set the <span class="strong"><strong>Text Color</strong></span> to <code class="literal">White</code>.</p></li></ol></div><p>Now, if we examine our creation, you will find it looks pretty awful:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>The images look grainy</p></li><li style="list-style-type: disc"><p>The text is massive</p></li><li style="list-style-type: disc"><p>If you set the <span class="strong"><strong>Font size</strong></span> of the text down, it looks horrible</p></li></ul></div><p>So just what is going on here? Why does this look so bad?</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec64"></a>Troubles with scale</h3></div></div></div><p>The simple <a id="id573" class="indexterm"></a>answer to the previous question, is scale. If you check the size of the <span class="strong"><strong>Rect Transform</strong></span> of your <span class="strong"><strong>WorldSpaceCanvas</strong></span> GameObject, you will see it is <span class="strong"><strong>100</strong></span> pixels wide by <span class="strong"><strong>100</strong></span> pixels high; in other words, it's tiny in your massive 3D scene.</p><p>If you take any image and resize it down to a minute size, it will look awful and cause all sorts of problems.</p><p>If you also recall, in a previous chapter, I noted that the text system hasn't changed in Unity 4.6. It has its flaws and doesn't scale well, which is why it looks its worst in the scene at the moment; the text needs to stay large (the larger, the better) to maintain any kind of quality.</p><p>So, the simple answer to this is to think bigger!</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec65"></a>A better way</h3></div></div></div><p>Now that we've ascertained just throwing the Canvas into 3D space isn't enough, what can we do?</p><p>We simply need a bigger Canvas, one drawn at a resolution that suits our art assets and works well with the text system as it currently is, then lean on the rendering path used by the <span class="strong"><strong>Canvas</strong></span> system and scale it down to the size we need.</p><p>This way, the <span class="strong"><strong>Canvas</strong></span> is rendered at the resolution we want, and then once rendered, is scaled down to a texture for drawing in our scene.</p><p>To do this, do the following:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Either start fresh or simply set the appropriate width and height values for the canvas to the resolution we want (say 700 x 400 for example, but it could be any resolution you want)</p></li><li style="list-style-type: disc"><p>Resize and move the <span class="strong"><strong>Canvas</strong></span> components (its children) to fit the new resolution (basically, make them bigger)</p></li><li style="list-style-type: disc"><p>Once you are happy, just scale down the Canvas, either using the scale tool in the scene view or by manually altering the scale values on the <span class="strong"><strong>WorldSpaceCanvas</strong></span> GameObject in the inspector (I'd recommend using the Scale Tool)</p></li></ul></div><p>Once you have done this, the quality will go up considerably because the <span class="strong"><strong>Canvas</strong></span> is working at a much better resolution.</p><p>In practice, the way I would recommend creating <span class="strong"><strong>World Space</strong></span> Canvases would be the same as working with Render Textures, for example:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Create your <span class="strong"><strong>Canvas</strong></span> and switch to 2D mode.</p></li><li><p>Set the <span class="strong"><strong>Render Mode</strong></span> of the <span class="strong"><strong>Canvas</strong></span> to <span class="strong"><strong>World Space</strong></span>.</p></li><li><p>Set the <span class="strong"><strong>Width</strong></span> and <span class="strong"><strong>Height</strong></span> to a good resolution for the type of element you are trying to create. If you are using text, the bigger the better (just don't go silly; use what you feel works best with the font you are using, and try not to oversize). I set mine to a <span class="strong"><strong>Width</strong></span> of <code class="literal">700</code> and a <span class="strong"><strong>Height</strong></span> of <code class="literal">400</code>.</p></li><li><p>Add <span class="strong"><strong>UI</strong></span> elements to your <span class="strong"><strong>Canvas</strong></span> and configure/arrange it how you want.</p></li><li><p>Once complete, place and scale it down to where you want it in your scene.</p></li><li><p>Done.</p></li></ol></div><p>You can of course just create it in the overlay mode and then change the <span class="strong"><strong>Render Mode</strong></span> afterwards; it's up to you. However, you will then not get a feel of the resolution of your <span class="strong"><strong>Canvas</strong></span> that works best for what you are creating.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note142"></a>Note</h3><p>You will notice I didn't delve into <span class="strong"><strong>Anchors</strong></span> for the <span class="strong"><strong>World Space</strong></span> Canvas. They aren't as important with World Space UI due to them being rendered in 3D; however, I would recommend that you use them where possible to ensure you keep in the habit of using them.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec66"></a>A final word on Event Cameras</h3></div></div></div><p>Now, as the previous<a id="id574" class="indexterm"></a> <span class="strong"><strong>UI</strong></span> didn't have any interactive elements on it, we didn't bother setting up an Event Camera for the <span class="strong"><strong>World Space</strong></span> Canvas. You only need to apply an Event Camera if you want to alter the rendering of a <span class="strong"><strong>World Space</strong></span> Canvas and thus need to specify a different camera to do the raycasting for the UI input.</p><p>The Unity examples<a id="id575" class="indexterm"></a> (<a class="ulink" href="http://bit.ly/UnityOfficialUIExamples" target="_blank">http://bit.ly/UnityOfficialUIExamples</a>) already do a good job of demonstrating this, and in most cases for <span class="strong"><strong>World Space</strong></span> UI, you will not need to define a separate <span class="strong"><strong>Event Camera</strong></span>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note143"></a>Note</h3><p>Remember, if you don't specify an <span class="strong"><strong>Event Camera</strong></span>, it will use the <span class="strong"><strong>Main Camera</strong></span> by default.</p><p>If you don't have any buttons, sliders, or other interactive elements, there isn't much point setting one.</p></div><p>So, either the <span class="strong"><strong>UI</strong></span> will be in the main view and use the <span class="strong"><strong>Main Camera</strong></span>, or you will need to draw it in a particular part of the screen (say an Inventory UI). In this case, you will use a separate camera (like what was done with the <span class="strong"><strong>Screen Space – Camera</strong></span> examples earlier), which will be used as the<a id="id576" class="indexterm"></a> <span class="strong"><strong>Event Camera</strong></span> and help you to provide direct (simplify) input and render the <span class="strong"><strong>World Space</strong></span> UI.</p></div></div>