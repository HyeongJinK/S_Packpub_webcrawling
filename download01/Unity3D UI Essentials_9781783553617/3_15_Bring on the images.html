<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec20"></a>Bring on the images</h2></div></div><hr /></div><p>Next up is the <span class="strong"><strong>Image</strong></span> <a id="id376" class="indexterm"></a>control/component, which is the basis for all textured drawing in the new <span class="strong"><strong>UI</strong></span> framework (even if you just want a colored box).</p><p>The <span class="strong"><strong>Image</strong></span> control is also very important for any input where you want the player to interact with any UI GameObject as it forms the <span class="strong"><strong>Hittable/Interactable</strong></span> area for the Raycasting system. This determines what point of the screen a user is touching/clicking and then uses the Image and its bounds (through the <span class="strong"><strong>Graphics Raycaster</strong></span>) 3to determine which control the user may be interacting with.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note81"></a>Note</h3><p>Don't forget, there are also other Raycaster systems such as the Physics and Physics2D raycasters if you want to test against 3D data, or you can build your own based on them.</p></div><p>When we add the Image control to our scene, we get the default view in the inspector as follows:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_03_08.jpg" /></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note82"></a>Note</h3><p>Note: The <span class="strong"><strong>Image Type</strong></span> property will not appear until you have assigned a <span class="strong"><strong>Sprite</strong></span> to the <span class="strong"><strong>Source Image</strong></span> property, allowing you to just use it as a simple or transparent background for basic images or <span class="strong"><strong>Masks</strong></span>.</p></div><p>Walking through this control, the common options we have are:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Source Image</strong></span>: This <a id="id377" class="indexterm"></a>is the sprite image to displayed within the bounds of the <span class="strong"><strong>Rect Transform</strong></span>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note83"></a>Note</h3><p>Note: Other than color, none of the other options will do anything unless an image has been selected. Without an image, it just acts like a colored box.</p><p>There is a <a id="id378" class="indexterm"></a>pretextured <span class="strong"><strong>Image</strong></span> control called a <span class="strong"><strong>Panel</strong></span>. A <span class="strong"><strong>Panel</strong></span> control is just an Image control with one of the built-in sprites that come with Unity preconfigured as the <span class="strong"><strong>Source Image</strong></span>.</p></div></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Color</strong></span>: This is the <a id="id379" class="indexterm"></a>tint color to apply to the sprite or the background color of the <span class="strong"><strong>Rect Transform</strong></span> area.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note84"></a>Note</h3><p>Note, if your <span class="strong"><strong>Sprite</strong></span> has black sections, then the color tint will not affect those parts.</p></div></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Material</strong></span>: If you <a id="id380" class="indexterm"></a>wish to apply shaders to your UI controls, then you can apply a material with a shader attached to it.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Preserve Aspect</strong></span>: If <a id="id381" class="indexterm"></a>you want to uniformly scale the source image within the <span class="strong"><strong>Rect Transform</strong></span>, then by clicking this option, the source image will remain in the same aspect as the original image no matter how much you stretch and twist the GameObjects <span class="strong"><strong>Rect Transform</strong></span>. This <a id="id382" class="indexterm"></a>option only appears for Simple and Filled <span class="strong"><strong>Image Types</strong></span> (see the following section for the explanation of Image Types).</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Set Native Size</strong></span>: If <a id="id383" class="indexterm"></a>you want to resize the <span class="strong"><strong>Rect Transform</strong></span> of the GameObject to the original size of the selected image, then clicking on this button will do just that.</p></li></ul></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec39"></a>Image types</h3></div></div></div><p>The other option <a id="id384" class="indexterm"></a>on the Image control, the <span class="strong"><strong>Image Type</strong></span> property, opens up a wrath of other options and capabilities. The options are:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Simple</p></li><li style="list-style-type: disc"><p>Sliced</p></li><li style="list-style-type: disc"><p>Tiled</p></li><li style="list-style-type: disc"><p>Filled</p></li></ul></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec33"></a>Simple Images</h4></div></div></div><p>As the type name <a id="id385" class="indexterm"></a>suggests, this just presents the selected image or base color within the bounds of the <span class="strong"><strong>Rect Transform</strong></span>. Nothing fancy, just draws the image, although you can use the shader material to affect how it's drawn and/or use <span class="strong"><strong>Effect</strong></span> components to alter the GameObject presentation.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec34"></a>Sliced Images</h4></div></div></div><p>Slicing (or 9 slicing as it is sometimes called) is a method where you can define a border within the <a id="id386" class="indexterm"></a>bounds of your image, then that border will be preserved around the edges of the <span class="strong"><strong>Image</strong></span> GameObject's <span class="strong"><strong>Rect Transform</strong></span>. In layman's terms, it allows <a id="id387" class="indexterm"></a>the border of an image to retain its aspect while the interior of the image will just be stretched to fill its area. This ensures the border will always look the same no matter the size of the image. (See <a class="link" href="#" linkend="ch05">Chapter 5</a>, <span class="emphasis"><em>Screen Space, World Space, and the Camera</em></span>, for a full example).</p><p>To define a border for an image, select it in your project's <span class="strong"><strong>Asset</strong></span> view and then open up the <span class="strong"><strong>Sprite Editor</strong></span> using the <span class="strong"><strong>Sprite Editor</strong></span> button in the inspector window (which is now available for <span class="emphasis"><em>both</em></span> <span class="strong"><strong>Single</strong></span> and <span class="strong"><strong>Multiple</strong></span> sprite images). When you open up the editor and click in the area for the selected sprite (selected by default for single images), you will see a <span class="strong"><strong>green </strong></span>border surrounding the image at the top, bottom, left, and right-hand sides, as you can see in the following screenshot:</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note85"></a>Note</h3><p>Note: The corner picking points and the green border only show up once you have added a border, either by dragging the four picking points surrounding the image or by manually altering the border dimension properties.</p></div><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_03_09.jpg" /></div><p>By adjusting this <a id="id388" class="indexterm"></a>border zone, you can control which parts of the image will be <a id="id389" class="indexterm"></a>scaled and stretched (the portion surrounding the border) with the size of the <span class="strong"><strong>Rect Transform</strong></span>.</p><p>When using a sliced <span class="strong"><strong>Sprite</strong></span> as the <span class="strong"><strong>Source Image</strong></span> for the <span class="strong"><strong>Image</strong></span> control, if you set the <span class="strong"><strong>Image Type</strong></span> to <span class="strong"><strong>Sliced</strong></span>, you will see the following in the <span class="strong"><strong>Inspector</strong></span> window:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_03_10.jpg" /></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note86"></a>Note</h3><p>If your <span class="strong"><strong>Source Image</strong></span> does not have a border set (a border with dimensions | 1), then you will get a warning when setting the <span class="strong"><strong>Image Type</strong></span> to <span class="strong"><strong>Sliced</strong></span>, informing you that the image cannot be used in this mode without a border.</p></div><p>As you can see, the <a id="id390" class="indexterm"></a>preview window shows the border positions as well as an <a id="id391" class="indexterm"></a>additional <span class="strong"><strong>Fill Center</strong></span> option, which when checked will draw the entire image in the <span class="strong"><strong>Rect Transform</strong></span> with non-uniform scale; unchecking it will remove the portion of the image within the border square.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note87"></a>Note</h3><p>Note: An image that has a border defined cannot be used for a <span class="strong"><strong>Tiled</strong></span> image (see the following <a id="id392" class="indexterm"></a>screenshot). Additionally, when you apply an <a id="id393" class="indexterm"></a>image with a border to an <span class="strong"><strong>Image</strong></span> control, it will automatically default to a <span class="strong"><strong>Sliced Image</strong></span> type.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec35"></a>Tiled Images</h4></div></div></div><p>Instead of scaling the <a id="id394" class="indexterm"></a>source image, Unity also provides the option to tile an <span class="strong"><strong>Image</strong></span> <a id="id395" class="indexterm"></a>within the bounds of the GameObject's <span class="strong"><strong>Rect Transform</strong></span>. By setting the <span class="strong"><strong>Image Type</strong></span> option to <span class="strong"><strong>Tiled</strong></span>, the image will then tile both horizontally and vertically from the bottom-left point of the <span class="strong"><strong>Rect Transform</strong></span> as shown here:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_03_11.jpg" /></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note88"></a>Note</h3><p>A limitation with the Tiled image at preset is that there is no way to alter the scale of the source image used; it will simply be drawn using its native size. Also if you use a <span class="strong"><strong>Sprite</strong></span> with a border, the control will attempt to also draw the border tiled, which gives some very unpredicable results at present.</p></div><p>There isn't much more to say about the <span class="strong"><strong>Tiled</strong></span> option. It does exactly what it says on the tin. If you want images to tile from a different corner, then you will need to rotate and flip the <span class="strong"><strong>Rect Transform</strong></span> to put the desired corner where you wish.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip28"></a>Tip</h3><p>Alternatively, you could create your own version of the Image control and override the <a id="id396" class="indexterm"></a>
<span class="strong"><strong>Tiled</strong></span> feature to give it a little more flexibility. See <a class="link" href="#" linkend="ch06">Chapter 6</a>, <span class="emphasis"><em>Working with the UI source</em></span>, for more details.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec36"></a>Filled Images</h4></div></div></div><p>The last <span class="strong"><strong>Image Type</strong></span> <a id="id397" class="indexterm"></a>option, the Image control is probably the most fascinating as it <a id="id398" class="indexterm"></a>mixes masking elements with a gradual fill to offer a way to gradually introduce an image into the scene. When we set the <span class="strong"><strong>Image Type</strong></span> to <span class="strong"><strong>Filled</strong></span> we see the following in the inspector window:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_03_12.jpg" /></div><p>We see the familiar options as well as a few new ones, all of which you just have to play with to get the real sense of this option. They include:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Fill Method</strong></span>: This <a id="id399" class="indexterm"></a>allows you to set the way in which the image is filled in, from <span class="strong"><strong>Horizontal</strong></span> or <span class="strong"><strong>Vertical</strong></span>, to <span class="strong"><strong>Radial</strong></span> in either a <code class="literal">90</code>, <code class="literal">180</code>, or <code class="literal">360</code> fashion (see the following screenshot with an example of a <span class="strong"><strong>Radial360</strong></span> fill) </p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Fill Origin</strong></span>: This <a id="id400" class="indexterm"></a>sets the position where the fill should start from, be it <span class="strong"><strong>Top</strong></span>, <span class="strong"><strong>Bottom</strong></span>, <span class="strong"><strong>Left</strong></span>, or <span class="strong"><strong>Right</strong></span> depending on the type of fill you select</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Fill Amount</strong></span>: This <a id="id401" class="indexterm"></a>is a simple slider that ranges from <code class="literal">0</code> to <code class="literal">1</code> to control the percentage of the image that is filled</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Clockwise</strong></span> (only available for Radial fills): If you don't like the direction the fill is facing, then <a id="id402" class="indexterm"></a>flip it to the other direction; simple!</p></li></ul></div><p>As an example of a <a id="id403" class="indexterm"></a>
<span class="strong"><strong>Radial360</strong></span> fill, see the following progression by <a id="id404" class="indexterm"></a>altering the <span class="strong"><strong>Fill Amount</strong></span> property:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_03_13.jpg" /></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec40"></a>Adding animation to the mix</h3></div></div></div><p>One good <a id="id405" class="indexterm"></a>fact about the new <span class="strong"><strong>UI</strong></span> system is that each and every part can be fully animated. To show this, let's build a simple animation logo using the <span class="strong"><strong>Filled Image</strong></span> control.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note89"></a>Note</h3><p>Note: We will only be covering the basics of the Unity Animation system here as it's outside the scope of this title. I'd recommend picking up a good Unity 2D title to learn more about it. I'm sure I've seen one somewhere!</p></div><p>First off, let's build a quick animation to control our <span class="strong"><strong>Image</strong></span>:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Create an <span class="strong"><strong>Image</strong></span> control called <code class="literal">LoadingLogo</code> and apply a sprite to it, then set the <span class="strong"><strong>Image Type</strong></span> property to <span class="strong"><strong>Filled</strong></span>.</p></li><li><p>Ensure that the <span class="strong"><strong>Filled Amount</strong></span> is set to <code class="literal">0</code>.</p></li><li><p>Create a new folder in your project called <span class="strong"><strong>Animation</strong></span> and two sub folders called <span class="strong"><strong>Controllers</strong></span> and <span class="strong"><strong>Clips</strong></span> (you can skip this step if you wish, it's a standard thing for me).</p></li><li><p>Create a new <span class="strong"><strong>Animation Controller</strong></span>
<span class="strong"><strong> </strong></span>by<span class="strong"><strong> </strong></span>navigating to <span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>Animator Controller</strong></span> from the project menu and saving it in the <code class="literal">Animation\Controllers</code> folder.</p></li><li><p>Double-click the new controller to open the <span class="strong"><strong>Animator</strong></span> editor window.</p></li><li><p>Right-click in the <span class="strong"><strong>Animator</strong></span> window and navigate to <span class="strong"><strong>Create State</strong></span> | <span class="strong"><strong>Empty</strong></span> to add a new state to the controller, then rename the new state <span class="strong"><strong>Start</strong></span>.</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_03_40.jpg" /><div class="caption"><p>The Animator Controller with a new Start animation state</p></div></div></li><li><p>Return to <a id="id406" class="indexterm"></a>your scene and add an <span class="strong"><strong>Animator</strong></span> <span class="strong"><strong>Component</strong></span> to the <span class="strong"><strong>Image</strong></span> control by navigating to <span class="strong"><strong>Add Component</strong></span> | <span class="strong"><strong>Miscellaneous</strong></span> | <span class="strong"><strong>Animator</strong></span>.</p></li><li><p>Apply the new <span class="strong"><strong>LoadingLogo</strong></span> <span class="strong"><strong>Animation Controller</strong></span> to the <span class="strong"><strong>Animator</strong></span> component by dragging it from the project view to the <span class="strong"><strong>Controller</strong></span> property.</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_03_41.jpg" /><div class="caption"><p>The configured Animator Controller on the LoadingLogo Image GameObject</p></div></div></li><li><p>Select the <span class="strong"><strong>LoadingLogo</strong></span> GameObject and open the <span class="strong"><strong>Animator</strong></span> window (<span class="strong"><strong>Menu</strong></span> | <span class="strong"><strong>Windows</strong></span> | <span class="strong"><strong>Animation</strong></span>).</p></li><li><p>Create a <a id="id407" class="indexterm"></a>new <span class="strong"><strong>Animation</strong></span> clip (when prompted, save it to the <code class="literal">Animation\Clips</code> folder) by clicking on <span class="strong"><strong>Create New Clip</strong></span> in the clip selection dropdown of the Animation Dope sheet and call it <span class="strong"><strong>LoadingAnimationClip</strong></span>, as shown here:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_03_42.jpg" /><div class="caption"><p>Animation clip selector with Create New Clip option in drop down</p></div></div></li><li><p>Check whether the Dope sheet is set to record by clicking on the <span class="strong"><strong>Record</strong></span> icon (the red dot in the previous screenshot) and set the time at <code class="literal">1</code> second by clicking on the <span class="strong"><strong>1:00</strong></span> point on the dope sheet (a red line should now appear at that point).</p></li><li><p>Select the <span class="strong"><strong>Image</strong></span> control and alter the <span class="strong"><strong>Fill Amount</strong></span> to <code class="literal">1</code>. A new property should be added to the view, as shown in the following screenshot:</p></li></ol></div><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_03_43.jpg" /><div class="caption"><p>Completed Loading Animation clip</p></div></div><p>If you hit the play button on the <span class="strong"><strong>Animator</strong></span> window, you will see the Image being filled gradually over time in the <span class="strong"><strong>Scene</strong></span> view.</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Now <a id="id408" class="indexterm"></a>return to the Animator view and add a new <span class="strong"><strong>Bool</strong></span> property called <span class="strong"><strong>Loading</strong></span> by clicking on the <span class="strong"><strong>+</strong></span> icon in the <span class="strong"><strong>Properties</strong></span> box in the lower left of the screen and then selecting <span class="strong"><strong>Bool </strong></span>and entering the name <span class="strong"><strong>Loading</strong></span>.</p></li><li><p>Next, right-click on the <span class="strong"><strong>Start</strong></span> state, select <span class="strong"><strong>Make Transition</strong></span>, and then click on the new <span class="strong"><strong>LoadingAnimationClip</strong></span> state (automatically added when we created the new clip previously) to create an animation transition between the two states, as shown in this screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_03_44.jpg" /><div class="caption"><p>Animator controller with new LoadingAnimationClip and a transition created from Start to the new state</p></div></div></li><li><p>Select the new transition (the arrow) from <span class="strong"><strong>Start</strong></span> to <span class="strong"><strong>LoadingAnimation</strong></span> and in the inspector under the <span class="strong"><strong>Conditions</strong></span> section, click on the drop-down, and select <a id="id409" class="indexterm"></a>our new <span class="strong"><strong>Loading</strong></span> property. Check whether the value is set to <span class="strong"><strong>true</strong></span> (which should be the default). This simply means that when the <span class="strong"><strong>Loading</strong></span> property is set to <span class="strong"><strong>true</strong></span>, the animation should move (one way) to the connected state.</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_03_45.jpg" /><div class="caption"><p>Setting the conditon for the Start to LoadingAnimationClip state transition</p></div></div></li><li><p>Finally repeat steps 14 and 15, this time creating the transition between the <span class="strong"><strong>LoadingAnimation</strong></span> state to the <span class="strong"><strong>Start</strong></span> state with the <span class="strong"><strong>Loading</strong></span> condition set to <span class="strong"><strong>False</strong></span>.</p></li></ol></div><p>That finishes the animation part. We now have an end-to-end animation that will play the loading animation when we tell it we are <span class="strong"><strong>Loading</strong></span>; it will also stop the animation when we tell it we are not <span class="strong"><strong>Loading</strong></span>.</p><p>Now we need to tell the animation when the game is <span class="strong"><strong>Loading</strong></span>. To do this we'll add a script to play the <a id="id410" class="indexterm"></a>animation when the scene starts.</p><p>Create a new C# script called <span class="strong"><strong>LoadingAnimation</strong></span> in the <code class="literal">Assets\Scripts</code> folder and replace its contents with the following:</p><div class="informalexample"><pre class="programlisting">using System.Collections;
using UnityEngine;

public class LoadingAnimation : MonoBehaviour {
 
  Animator loadingAnimation;
  // Get the Animator component on Awake
  void Awake () {
    loadingAnimation = GetComponent&lt;Animator&gt;();
  }
  
  // Start the loading animation by setting the animation
  // Loading property to true
  void Start () {
    loadingAnimation.SetBool("Loading", true);
    StartCoroutine(LoadLevel());
  }

  // A simple coroutine to wait 3 seconds and load the level
  IEnumerator LoadLevel()
  {
    for (int i = 0; i &lt; 3; i++)
    {
      yield return new WaitForSeconds(1);
    }
    loadingAnimation.SetBool("Loading", false);
    //Application.LoadLevel("Main Menu");
  }
}</pre></div><p>This is just a simple script that gets the reference to the <span class="strong"><strong>Animation</strong></span> and starts it by setting the <span class="strong"><strong>Loading</strong></span> property of the <span class="strong"><strong>Animation</strong></span> to <span class="strong"><strong>true</strong></span>, after 3 seconds it then stops the animation to load a level. (Which is commented out, as it's just an example.)</p><p>Attach this script <a id="id411" class="indexterm"></a>to the <span class="strong"><strong>LoadingLogo</strong></span> GameObject, and now you have a very simple <span class="strong"><strong>UI</strong></span> loading animation, which will work with any of the <span class="strong"><strong>Filled Image Type</strong></span> options.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec41"></a>A word on RawImage</h3></div></div></div><p>Alongside the <a id="id412" class="indexterm"></a>
<span class="strong"><strong>Image</strong></span> control is the <span class="strong"><strong>RawImage</strong></span> control. The only difference between the two is that the <span class="strong"><strong>RawImage</strong></span> uses a <span class="strong"><strong>Texture</strong></span> instead of a <span class="strong"><strong>Sprite</strong></span> as its <span class="strong"><strong>Source</strong></span> (the <span class="strong"><strong>Texture</strong></span> property in this case).</p><p>Apart from the advanced texture import settings, the big advantage here is that you could use this to display images downloaded from the Web (once you have downloaded it), since there are functions to turn a downloaded image stream into a <span class="strong"><strong>Texture</strong></span>.</p></div></div>