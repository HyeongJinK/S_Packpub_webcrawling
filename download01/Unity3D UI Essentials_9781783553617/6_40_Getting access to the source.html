<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch06lvl1sec43"></a>Getting access to the source</h2></div></div><hr /></div><p>In a bold move, Unity <a id="id682" class="indexterm"></a>released almost all the source code for the new <span class="strong"><strong>Unity UI</strong></span> system as an open source project via <a class="ulink" href="http://Bitbucket.org" target="_blank">Bitbucket.org</a>. This isn't the first time they have made things public; back in October 2014, Unity released their Unit Test <a id="id683" class="indexterm"></a>Tools and a bunch of examples on their new public account (check them all out at <a class="ulink" href="https://Bitbucket.org/Unity-Technologies" target="_blank">https://Bitbucket.org/Unity-Technologies</a>).</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note167"></a>Note</h3><p>Note: This section assumes you have either Visual Studio (2012+ express/community, pro, or ultimate), MonoDevelop, or Xamarin Studio installed to build and edit code. By default, you should already have MonoDevelop installed when you installed Unity.</p><p>You can browse the code all you like on the website, but to build/use it on your machine you will need a code editor and code build engine.</p></div><p>This is however, the first time they have released a core part of the Unity Engine for all to see (there have been a few other side projects but this is the biggest so far), to break it apart and even replace it in your own installs. Not only that, they are welcoming developers to review their code and suggest fixes/updates (within one week there were already 74 copies/forks of the new UI system); the world has become a very interesting place indeed.</p><p>Granted not everything is in there, the <span class="strong"><strong>Canvas</strong></span> for example is a core engine component with specific rendering code so that isn't exposed, however, almost everything else is there to tinker with.</p><p>In this section, we'll walk over the repository itself (if you are not yet familiar with it), how you get access to the code, make changes, and even submit your suggestions.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note168"></a>Note</h3><p>Note: If you <a id="id684" class="indexterm"></a>do find a bug and are unsure how to resolve it, then you should still use the Unity Bug Tracker built into Unity (<span class="strong"><strong>Help</strong></span> | <span class="strong"><strong>Report a bug</strong></span>) or pop along to the Unity UI forum located at <a class="ulink" href="http://forum.unity3d.com/forums/unity-ui.60" target="_blank">http://forum.unity3d.com/forums/unity-ui.60</a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec76"></a>The repository</h3></div></div></div><p>As the code repository is <a id="id685" class="indexterm"></a>completely open to the public, getting access to it is very simple. Just navigate to <a class="ulink" href="https://Bitbucket.org/Unity-Technologies/ui" target="_blank">https://Bitbucket.org/Unity-Technologies/ui</a> and you will see the following page:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_06_06.jpg" /><div class="caption"><p>The Unity UI Bitbucket source page (at time of writing this)</p></div></div><p>From here you can browse the source using the <span class="strong"><strong>Source</strong></span> link on the left or simply check out all the existing changes to the project through the <span class="strong"><strong>Commits</strong></span> link. If you are feeling brave you can also see what other changes have already been proposed by other committed developers (or should be) using the <span class="strong"><strong>Pull Requests</strong></span> link.</p><p>Additionally, you can see a feed to the right of all the recent activity.</p><p>The main part of the page <a id="id686" class="indexterm"></a>is taken up with instructions for how to get involved and more importantly, how to run with the code in your local environment, but more on that later.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note169"></a>Note</h3><p>Note: The <a id="id687" class="indexterm"></a>source control system used by Unity is Mercurial (<a class="ulink" href="http://mercurial.selenic.com/about" target="_blank">http://mercurial.selenic.com/about</a>), a very similar distributed version control system (DVCS) to the other popular source control system, GIT. Keep this in mind if you have your own source control clients and want to connect to the UI project.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec77"></a>Getting forked</h3></div></div></div><p>So you have decided <a id="id688" class="indexterm"></a>you want to at least look through the code on your own machine and make changes for yourself; so, what next?</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note170"></a>Note</h3><p>Note: If you only want to download and examine the code you can skip this step and jump straight to the following <span class="emphasis"><em>Downloading the code</em></span> section. You can change your mind at any time and return here if you suddenly have the urge to make changes.</p></div><p>The first thing you do is to make your own source copy of the UI project; this process is called <span class="strong"><strong>Creating a </strong></span><a id="id689" class="indexterm"></a>
<span class="strong"><strong>Fork</strong></span>. This clones the entire project into your own area on Bitbucket's own code servers, and every change you make within this new repository is your own and (more importantly) linked back to the original project.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note171"></a>Note</h3><p>The link between your own copy of the project and the original is crucial if you later want to send changes back to the original (parent) project later.</p></div><p>It is very simple to create your own fork:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>First navigate to the Unity UI Bitbucket site (<a class="ulink" href="https://Bitbucket.org/Unity-Technologies/ui" target="_blank">https://Bitbucket.org/Unity-Technologies/ui</a>).</p></li><li><p>Log in to Bitbucket, if you haven't done so already.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip49"></a>Tip</h3><p>It's free to register and host your own projects on Bitbucket. So even after you have finished playing with the Unity UI code you can go and create your own public/private projects. If you also want to host your projects on Bitbucket it's free; just be sure to configure your Unity environment in the same way you do for GIT source control. Check out this post for more details: <a class="ulink" href="http://bit.ly/UnitySourceControlSetup" target="_blank">http://bit.ly/UnitySourceControlSetup</a>.</p></div></li><li><p>Click on the <span class="strong"><strong>Fork</strong></span> action in the top-left hand corner of the Bitbucket page.</p></li><li><p>You will now see a form (as shown in the screenshot) for your copy of the project. Here you can select various options such as making it public or private (can the <a id="id690" class="indexterm"></a>rest of the world see it), what permissions to assign, and whether you want a bug tracking system or <span class="strong"><strong>Wiki</strong></span> <a id="id691" class="indexterm"></a>attached to it.</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_06_07.jpg" /><div class="caption"><p>Bitbucket Fork request form</p></div></div></li></ol></div><p>Once you have completed the form, the cogs at Bitbucket will churn for a while and then spit out your very own project. You will then be returned to the project's start page, however, this time it's your project, not Unity's.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note172"></a>Note</h3><p>When browsing any open source project via the source control website, be sure you are looking at the correct one. Don't get confused if you aren't seeing your changes when you accidentally look at the parent project.</p><p>With Bitbucket (as with most) it's easy enough to see whose project you are looking at; just check the top-left hand corner where the project information and owner are listed.</p><p>Expect a few double takes till you get used to it.</p></div><p>There are many other advanced options when creating a fork; however, most are only used within your own <a id="id692" class="indexterm"></a>projects and not when working with someone <a id="id693" class="indexterm"></a>else's project.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note173"></a>Note</h3><p>I actually had the fourth Fork of the Unity UI Bitbucket project but had to delete it for the purposes of the book—my claim to fame is gone. The first ever commit from the public was done by <span class="strong"><strong>Andreia Gaita</strong></span>, which was accepted and merged. Well done Andreia!</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec78"></a>Downloading the code</h3></div></div></div><p>So you have <a id="id694" class="indexterm"></a>access to Unity's UI project and possibly made your own Fork (copy) of the code (granted, completely optional). Now how do you get the code down to your machine.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip50"></a>Tip</h3><p>You can actually just download all the source code in a compressed file using the <span class="strong"><strong>Downloads</strong></span> link on the left-hand side of the page. However, this isn't recommended as it will be disconnected from the main project (you won't receive updates) and any changes you make could be lost (if you don't back it up properly).</p><p>It's an option but not one I'd recommend.</p></div><p>First off, you are going to need a source control client to pull the code from the server onto your computer and keep it linked. Here are a few possible options:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Atlassian SourceTree</strong></span> (<a class="ulink" href="http://www.sourcetreeapp.com/" target="_blank">http://www.sourcetreeapp.com/</a>): This is a nice graphical client <a id="id695" class="indexterm"></a>that is available for most operating systems</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Tortoise HG</strong></span> (<a class="ulink" href="http://tortoisehg.Bitbucket.org/" target="_blank">http://tortoisehg.Bitbucket.org/</a>): This is my preferred <a id="id696" class="indexterm"></a>client as it integrates tightly with Windows Explorer and offers several GUI management screens</p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note174"></a>Note</h3><p>There are many other <a id="id697" class="indexterm"></a>Mercurial clients for various operating systems that you can find on the Mercurial site at <a class="ulink" href="http://mercurial.selenic.com/wiki/OtherTools" target="_blank">http://mercurial.selenic.com/wiki/OtherTools</a>.</p></div><p>Bitbucket themselves (oddly enough since they make it) recommend SourceTree; you'll find links peppered around the website and they also offer integration with all projects hosted on Bitbucket. If you only use Bitbucket then it's not a bad option to choose.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip51"></a>Tip</h3><p>If, however, you <a id="id698" class="indexterm"></a>work on several open source projects on many sites, I'd recommend the Tortoise source control clients. It's my preference; however, the choice is ultimately up to you of course.</p><p>There's nothing particularly wrong with SourceTree and it will work with several DCVS systems.</p></div><p>Once you have your client installed, you need to get the <span class="strong"><strong>Pull URL</strong></span> from the projects website as shown here:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_06_08.jpg" /><div class="caption"><p>The Clone action on the Bitbucket site to get the code</p></div></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip52"></a>Tip</h3><p>If you have <span class="strong"><strong>SourceTree</strong></span> installed, you can actually just click the <span class="strong"><strong>Clone in SourceTree</strong></span> button as well. I did say the integration is peppered everywhere and aimed at beginner users.</p></div><p>Alternatively, you can also find this URL published on the front page of the project's website in the <a id="id699" class="indexterm"></a>upper-right hand corner of the screen as shown here:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_06_09.jpg" /></div><p>Once you have the URL, all that's left is to then clone the project to a folder on your local machine, assuming you are using <span class="strong"><strong>SourceTree</strong></span> you will see something like the following once the operation is completed:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_06_10.jpg" /><div class="caption"><p>The UI project open in SourceTree</p></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note175"></a>Note</h3><p>With the Tortoise clients you need only:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Open <span class="strong"><strong>Windows Explorer</strong></span>.</p></li><li style="list-style-type: disc"><p>Navigate to where you want to download (clone) the code.</p></li><li style="list-style-type: disc"><p>Right-click and navigate to <span class="strong"><strong>TortoiseHG</strong></span> | <span class="strong"><strong>Clone</strong></span>.</p></li><li style="list-style-type: disc"><p>Give the destination folder a name (the source URL will be prepopulated from your clipboard, if it <a id="id700" class="indexterm"></a>doesn't then just paste the URL into the source field and check your destination folder).</p></li><li style="list-style-type: disc"><p>Click <span class="strong"><strong>Clone</strong></span>.</p></li></ul></div><p>It's just my preference to use <span class="strong"><strong>Windows Explorer</strong></span> really.</p></div><p>So you now have the code and can browse through it at your leisure and start making your plans to take over the world. Ahem, maybe that's just me!</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip53"></a>Tip</h3><p>As a <span class="emphasis"><em>big</em></span> tip, if you are using <span class="strong"><strong>Visual Studio</strong></span> to view the code, then I highly recommend downloading the <span class="strong"><strong>VisualHG</strong></span> extension (<span class="strong"><strong>Tools</strong></span> | <span class="strong"><strong>Extensions and</strong></span> <span class="strong"><strong>Updates</strong></span>) and <a id="id701" class="indexterm"></a>then setting the source control manager for the project (<span class="strong"><strong>Tools</strong></span> | <span class="strong"><strong>Options</strong></span> | <span class="strong"><strong>Source Control</strong></span>) to <span class="strong"><strong>VisualHG</strong></span>. You will then see a <a id="id702" class="indexterm"></a>graphically enhanced <span class="strong"><strong>Solution Explorer</strong></span> and see the change state of each file. This gives you direct access to any modification/changes to source from within <span class="strong"><strong>Visual Studio</strong></span>!</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec79"></a>Keeping up to date</h3></div></div></div><p>Over time with each new release Unity will be updating the source repository on BitBucket with changes and fixes, so you need to ensure you keep up to date.</p><p>When a new release is <a id="id703" class="indexterm"></a>announced, be sure to pop over to your repository on the BitBucket website and use the <span class="strong"><strong>Sync</strong></span> feature that will appear in the top-right hand corner of the page. This will automatically get any new changes and attempt to merge them into your own project. Then you will need to refresh your local code via your source control application so that you are now working with the latest source.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note177"></a>Note</h3><p>Be sure to check if any changes you are working on are affected by the Unity changes by updating any separate develop branches you have as well as by refreshing them. Each is a separate project in its own right.</p></div><p>If however, you have not created your own fork/copy, simply update/refresh your local Mercurial repository using your source control application to continue.</p><p>One great thing about the source being public is that you have more detailed information about what has changed in a file-by-file, line-by-line comparison between releases. The easiest way to see this is via the commit entries for the project.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec80"></a>What is in the solution?</h3></div></div></div><p>Now you have the code on your machine, let's delve into what we have.</p><p>Open the folder where the Unity UI code has been copied to on your machine and open the <code class="literal">UISystem.sln</code> file by double clicking it and that will open your code editor of choice, such as <span class="strong"><strong>MonoDevelop</strong></span>, as shown here:</p><div class="mediaobject"><img src="/graphics/9781783553617/graphics/3617OS_06_11.jpg" /></div><p>You will see three projects in the Unity UI solution:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>UnityEditor.UI</strong></span>: This <a id="id704" class="indexterm"></a>contains all the Unity Property Drawers (<a class="ulink" href="http://docs.unity3d.com/Manual/editor-PropertyDrawers.html" target="_blank">http://docs.unity3d.com/Manual/editor-PropertyDrawers.html</a>) and <a id="id705" class="indexterm"></a>Custom Editor <a id="id706" class="indexterm"></a>windows (<a class="ulink" href="http://docs.unity3d.com/Manual/editor-CustomEditors.html" target="_blank">http://docs.unity3d.com/Manual/editor-CustomEditors.html</a>) for all the UI components. If you want to extend or add new Editor features, this is the place to add them.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>UnityEngine.UI</strong></span>: This <a id="id707" class="indexterm"></a>contains the core UI classes and components, with everything from the Event System to <span class="strong"><strong>Images</strong></span> and Toggles plus everything in between. If you are adding new controls or fixing existing controls this is the place to be.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>UnityEngine.UI-Editor</strong></span>: This <a id="id708" class="indexterm"></a>is the editor version of the previous UI code.</p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note178"></a>Note</h3><p>The <span class="strong"><strong>UnityEngine.UI-Editor</strong></span> project only contains linked files from the <span class="strong"><strong>UnityEngine.UI</strong></span> project, meaning they are the same files. If you add more classes to the <span class="strong"><strong>UI</strong></span> project you will also need to create a new <code class="literal">Linked</code> file in this project.</p></div><p>Navigating round the innards of the <a id="id709" class="indexterm"></a>
<span class="strong"><strong>UnityEngine.UI</strong></span> project you will find the following folders:</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note179"></a>Note</h3><p>Subject to change, it is an open source project after all.</p></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<code class="literal">EventSystem</code>: This contains core code and types to do with events, the <span class="strong"><strong>Event System</strong></span>, and communication:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>EventData</strong></span>: This contains structures and classes for event information.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>InputModules</strong></span>: These contain the base input managers and delegate inputs from the Unity input event to the <span class="strong"><strong>Event System.</strong></span>
</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Raycasters</strong></span>: This contains the base raycast modules that interrogate the scene based on the inputs. Note that it doesn't include the <span class="strong"><strong>GraphicsRayaster</strong></span>, as this is located in the UI Core folder.</p></li></ul></div></li><li style="list-style-type: disc"><p>
<code class="literal">UI</code>: This is a structured folder for UI specific code. Code is located within the subfolders.</p></li><li style="list-style-type: disc"><p>
<code class="literal">Animation</code>: This contains animation helper files.</p></li><li style="list-style-type: disc"><p>
<code class="literal">Core</code>: At the moment, this contains everything else. So it includes all the components, types, modifiers, and utilities.</p></li></ul></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip54"></a>Tip</h3><p>If you add a new type or class to the <span class="strong"><strong>UnityEngine.UI</strong></span> project, be sure to also link that file in the <span class="strong"><strong>UnityEngine.UI-Editor</strong></span> project, or it won't compile. The <span class="strong"><strong>UnityEngine.UI-Editor</strong></span> project is essential for the inner workings of the editor and the main <code class="literal">UnityEngine.UI</code> project is what is deployed to the players.</p></div><p>There is certainly a lot of code to browse and get used to, so when you start I recommend you take your time walking through each component and understand how it has been implemented. (All the previous sections in this chapter were put together after spending a lot of time with the code.)</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec81"></a>Adding your own version of UI to your project</h3></div></div></div><p>So you got your <a id="id710" class="indexterm"></a>code, what to do with it? The first step is to build the code, ready to copy it to your Unity installation.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note180"></a>Note</h3><p>At the time of writing this, the only method of getting your own local code changes to the UI system into your Unity installation is to manually copy them. However, in the future this may be enhanced and made easier through the Module system in Unity (<span class="strong"><strong>Edit</strong></span> | <span class="strong"><strong>Modules in Unity</strong></span>) or some other method; they are aware this isn't simple yet and want to make it easier. So keep checking on Unity's site or the UI Bitbucket page for updates.</p></div><p>With your solution open from earlier, build the project and once it's complete we can start:</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note181"></a>Note</h3><p>I will be brief here as the full instructions are included with the project and on the Unity UI Bitbucket project page.</p></div><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Open Windows Explorer on your computer (or the Finder on your Mac) and navigate to your <code class="literal">Unity installation</code> folder.</p></li><li><p>Open up the <code class="literal">Editor\Data\UnityExtensions\Unity\GUISystem</code> folder (or <code class="literal">Unity.app/Contents/UnityExtensions/Unity/GUISystem</code> on a Mac).</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip55"></a>Tip</h3><p>By default, on a Mac, the filename extensions aren't turned on. So instead of <span class="strong"><strong>Unity.app</strong></span> it will appear in the Finder (the Mac file manager) as just <span class="strong"><strong>Unity</strong></span>. To be able to browse to the right folder, it's necessary to right-click on <span class="strong"><strong>Unity</strong></span> (or <span class="strong"><strong>Unity.app</strong></span>) and then select <span class="strong"><strong>Show Package Contents</strong></span> from the pop-up menu. A new Finder window then appears that allows you to navigate from <span class="strong"><strong>Contents</strong></span> onwards.</p><p>This is a handy tip from one of my Mac owning reviewers, Simon Wheatley.</p></div></li><li><p>If you haven't done so already, back up the original folders within the GUISystem folder, which is the same as your installed version (for example, 4.6.0 for the initial release).</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip56"></a>Tip</h3><p>It seems on a Mac you may have trouble copying the folder in the same location, as the Finder (file manager) copy process appeared to virtually stop or hang. After several minutes, nothing had happened, so I cancelled the copy process. Copying the folder to a different location (such as a network drive) worked fine—and in an instant! Thanks again Simon Wheatley.</p></div></li><li><p>Now open the <code class="literal">Code</code> folder on your local computer in a new window and locate the new <code class="literal">Output</code> folder (if the project built successfully).</p></li><li><p>Double-check you built successfully and that the timestamp of the files/folders within the <code class="literal">Output</code> folder match!</p></li><li><p>Copy the contents of the <code class="literal">Output</code> folder (the <code class="literal">Unity Editor</code> folder, the <code class="literal">Standalone</code> folder, and <code class="literal">UnityEngine.UI.dll</code>) to the <code class="literal">version</code> folder in the <code class="literal">GUISystem</code> folder of your Unity installation.</p></li><li><p>Select <span class="strong"><strong>Yes</strong></span> to overwrite any files.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note182"></a>Note</h3><p>Note: You must have administrative privileges to overwrite these files; if you <a id="id711" class="indexterm"></a>haven't then uninstall Unity and install it to a folder on the computer you have write access to (you did know you can install Unity anywhere on your computer, didn't you?).</p></div></li></ol></div><p>Now when you start up Unity (provided nothing went wrong!) you will be using your own copy of the Unity UI system with all your own fixes and changes (provided you made any).</p><p>If at any time you need to go back to the installed version, just copy your backup folder over the contexts of the <code class="literal">GUISystem</code> folder (you did make a backup didn't you?)</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip57"></a>Tip</h3><p>If you ever need to log an issue on the new Unity UI system, ensure you are using the version that comes installed with Unity. They will not be very forgiving if it's your own code that is breaking it!</p><p>Plus it is unlikely they will be able to replicate it if it is your code causing the problem. </p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec82"></a>Extra credit, push it back to Unity</h3></div></div></div><p>So you have been going through the UI source and found a bug that you know how to fix or have some award-winning idea that you have implemented that you think is good enough to go into <a id="id712" class="indexterm"></a>the main build, then thanks to the magic of a DCVS source control system, we have a way.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note183"></a>Note</h3><p>Note: The following pattern is meant only for submitting new features or fixed bugs. If you find something that is breaking or you don't know how to fix it, then use the standard Unity bug reporter (<span class="strong"><strong>Help</strong></span> | <span class="strong"><strong>Report a bug</strong></span>) to submit it. Don't submit a change with some notes saying it's broken because it will likely not be picked up by anyone.</p></div><p>Now to submit fixes or new features, you need to keep a few things in mind if you want it to be accepted (this is true for any open source project):</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Keep it small</strong></span>: Do this as large submissions will likely be ignored.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Keep it succinct</strong></span>: Stay on target and fix one thing or add one feature at a time.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Document where possible</strong></span>: This will help moderators who read the code understand it quicker and easier.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Plan ahead</strong></span>: If you have a number of changes, either ensure they don't overlap/depend on each other or work with the moderators to ensure they are aware of what's coming. There is nothing worse than having a whole plan of work not accepted because it was too much or not what was wanted.</p></li></ul></div><p>In the road to submission, we start from grass roots, which means you start planning for the change before you even start coding. The basic workflow is like this:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Create a new branch and keep the name simple and about your change.</p></li><li><p>Add your changes in one go or in a few commits/check-ins (too many commits in a request are bad).</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note184"></a>Note</h3><p>Commits are when you are done making changes, then you use your source control tool to mark a checkpoint in your coding and then push/upload them to the server.</p></div></li><li><p>Commit your change to your branch.</p></li><li><p>Submit a Pull Request (PR) from your repository back to the main branch of the parent repository.</p></li><li><p>Monitor the request and answer queries.</p></li><li><p>If necessary update your development branch in your repository in answer to queries/requests.</p></li><li><p>Commit your fixes (no need to create a new PR, it will automatically be updated).</p></li><li><p>Once accepted, delete your development branch.</p></li><li><p>Refresh your repository from the parent.</p></li></ol></div><p>Bitbucket has all this information to hand on their site, so check it regularly for updates.</p><p>If you have already made your changes to your own repository (some developers to have a playground where they test things), then do not fret. Simply create a new branch in your source code application <a id="id713" class="indexterm"></a>from the last <span class="strong"><strong>Commit</strong></span> point by Unity, then follow the previous steps and copy your change in.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip58"></a>Tip</h3><p>It's quite normal to have a playground/sandbox area in your own repository; just be sure to start from a new branch in your local project before doing anything and above all else, keep the main development branch (the one from Unity) clean. <span class="emphasis"><em>Do not commit directly to the unity main branch.</em></span>
</p><p>Always use a new/clean branch of your own, or things will get muddled.</p></div><p>Happy coding!</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note185"></a>Note</h3><p>A last note about submitting changes in the current process. Unity won't actually accept your change directly into their repository. The pattern currently being followed is that Unity will review your change and if it's deemed worthy they will copy your fixes/changes into their own code servers for consumption.</p><p>So they aren't using the source control in a normal fashion; they're just using it for people to highlight what they can easily fix/include. This may change over time as Unity get better working with Bitbucket.</p></div></div></div>