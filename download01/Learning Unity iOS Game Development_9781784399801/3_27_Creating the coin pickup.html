<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec31"></a>Creating the coin pickup</h2></div></div><hr /></div><p>The coin pickup <a id="id141" class="indexterm"></a>is a representation of the good type of collider the character can interact with. It will be what the player collects in the game that they can use for currency. Perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>To start with, navigate to the <code class="literal">Assets</code> folder, right-click on it, and select <span class="strong"><strong>Create Folder</strong></span>. Name this folder <code class="literal">Pickup</code>.</p></li><li><p>Open the <code class="literal">Pickup</code> folder, right-click on it, and select <span class="strong"><strong>Import New Asset…</strong></span>. Navigate to the <code class="literal">Art</code> files for this book, and open the <code class="literal">ChapterThree_Pickup</code> folder, and select the <code class="literal">Pickup_Coin.png</code> file to import.</p></li><li><p>With the <code class="literal">Pickup_Coin.png</code> file imported, select it. Then, in the <span class="strong"><strong>Inspector</strong></span> window, select <span class="strong"><strong>Sprite Mode</strong></span> as <span class="strong"><strong>Multiple</strong></span>.</p></li><li><p>Then, select <span class="strong"><strong>Filter Mode</strong></span> as <span class="strong"><strong>Point</strong></span>.</p></li><li><p>Now, select <span class="strong"><strong>Max Size</strong></span> as <code class="literal">256</code>.</p></li><li><p>Then, select <span class="strong"><strong>Format</strong></span> as <span class="strong"><strong>Truecolor</strong></span>.</p></li><li><p>Finally, click on <span class="strong"><strong>Apply</strong></span>.</p></li><li><p>Now, click on the <span class="strong"><strong>Sprite Editor</strong></span> button to open <span class="strong"><strong>Sprite Editor</strong></span>.</p></li><li><p>Then, click on the <span class="strong"><strong>Slice</strong></span> button in <span class="strong"><strong>Sprite Editor</strong></span> and select <span class="strong"><strong>Type</strong></span> as <span class="strong"><strong>Grid</strong></span>.</p></li><li><p>Now, select <span class="strong"><strong>Pixel Size</strong></span> for both <span class="strong"><strong>X</strong></span> and <span class="strong"><strong>Y</strong></span> as <code class="literal">32</code>.</p></li><li><p>Then, select <span class="strong"><strong>Pivot</strong></span> as <span class="strong"><strong>Top Left</strong></span>.</p></li><li><p>Now, click on <span class="strong"><strong>Slice</strong></span> and then on <span class="strong"><strong>Apply</strong></span>.</p></li><li><p>Select the <code class="literal">Pickup_Coin.png</code> file from the <code class="literal">Assets/Pickup</code> folder and drag it onto the <span class="strong"><strong>Scene</strong></span> window.</p></li><li><p>A new window will open to create an animation file for it; this is similar to what we did for the character running and jumping.</p></li><li><p>Name this file <code class="literal">Coin_Spin</code>.</p></li><li><p>Double-click on the <code class="literal">Pickup_Coin_0.controller</code> file to open <span class="strong"><strong>Animator</strong></span>.</p></li><li><p>Then, right-click on the <span class="strong"><strong>Any State</strong></span> node in the <span class="strong"><strong>Animator</strong></span> window and select <span class="strong"><strong>Make Transition</strong></span>.</p></li><li><p>Now, left-click on the <span class="strong"><strong>Coin_Spin</strong></span> node to connect the nodes.</p></li><li><p>Select the <span class="strong"><strong>Pickup_Coin_0</strong></span> GameObject in the <span class="strong"><strong>Hierarchy</strong></span> tab.</p></li><li><p>In the <span class="strong"><strong>Inspector</strong></span> tab, select <span class="strong"><strong>Add Component</strong></span>.</p></li><li><p>Search for <span class="strong"><strong>Box Collider 2D</strong></span> and select <span class="strong"><strong>Box Collider 2D</strong></span>.</p></li><li><p>In the <span class="strong"><strong>Box Collider 2D</strong></span> component settings, check <span class="strong"><strong>IsTrigger</strong></span>.</p></li><li><p>Change the size of <span class="strong"><strong>Box Collider 2D</strong></span> from <span class="strong"><strong>X</strong></span> as <code class="literal">0.32</code> and <span class="strong"><strong>Y</strong></span> as <code class="literal">0.32</code> to <span class="strong"><strong>X</strong></span> as <code class="literal">0.2</code> and <span class="strong"><strong>Y</strong></span> as <code class="literal">0.2</code>.</p><p>You will see that these steps are similar to the steps we took for the character <a id="id142" class="indexterm"></a>and just like the character, this pickup will need a code class for itself, although it will be much smaller than the character.</p></li><li><p>Right-click on the <code class="literal">Assets/Scripts</code> folder and select <span class="strong"><strong>Create</strong></span> and <span class="strong"><strong>C# Class</strong></span>.</p></li><li><p>Name this C# Class as <code class="literal">Coin</code>.</p></li><li><p>Then, click on the <span class="strong"><strong>Pickup_Coint_0</strong></span> GameObject in the <span class="strong"><strong>Hierarchy</strong></span> tab and select <span class="strong"><strong>Add Component</strong></span>.</p></li><li><p>Search for <span class="strong"><strong>Coin</strong></span> and select <span class="strong"><strong>Coin</strong></span>.</p></li><li><p>Double-click on the <code class="literal">Coin.cs</code> file to open it.</p></li></ol></div><p>Just as with all the other classes, you will find only the generated code from Unity, including the <code class="literal">Start</code> and <span class="strong"><strong>Update</strong></span> functions and two <code class="literal">Includes</code>:</p><div class="mediaobject"><img src="/graphics/9781784399801/graphics/B04063_03_20.jpg" /></div><p>Under the <code class="literal">Update</code> <a id="id143" class="indexterm"></a>function, add the following code:</p><div class="informalexample"><pre class="programlisting">    // When trigger collider is collided with
    void OnTriggerEnter2D(Collider2D Col)
    {
      print( Col.gameObject );
    }</pre></div><p>If you position <code class="literal">Pickup_Coin_0</code> before the character and play the game and jump on the coin you should see the following console message:</p><div class="mediaobject"><img src="/graphics/9781784399801/graphics/B04063_03_14.jpg" /></div><p>Unlike the collider on the character, the trigger collider will not block the colliding object from moving; it will only say that something has collided with it. This is handy for us because we don't want the coins to block the character if it hits the coin. We only want to know that the character has collided with it. <code class="literal">OnTriggerEnter2D</code> is a Unity function that is similar to the <code class="literal">OnCollisionEnter2D</code> function we used in character. It will give us the <code class="literal">Collider2D</code> object that <a id="id144" class="indexterm"></a>it has collided with so that we can use it to do something, that is, give the character <span class="emphasis"><em>one</em></span> more coin in our case.</p><p>Update the <code class="literal">OntriggerEnter2D</code> function as follows:</p><div class="informalexample"><pre class="programlisting">    // When trigger collider is collided with
    void OnTriggerEnter2D(Collider2D Col)
    {
      Character gameChar;
      if (Col.gameObject.name == "Character")
      {
        gameChar = Col.gameObject.GetComponent&lt;Character&gt;( );
        if (gameChar != null)
        {
          if (!gameChar.isDead)
          {
            gameChar.CoinCount += 1;
            print(gameChar.CoinCount);
            Destroy(gameObject);
          }
        }
      }
    }</pre></div><p>This function will first check whether <code class="literal">gameObject</code> who owns <code class="literal">Collider2D</code>, which is being passed to the function, is named <code class="literal">Character</code>. As there will only be one GameObject named this, we will know that this is our character.</p><p>We will then assign a local reference to the <code class="literal">Character</code> component of the <span class="strong"><strong>Character</strong></span> GameObject and check to make sure that it exists by verifying that it is <span class="emphasis"><em>not</em></span> null.</p><p>If the character is not <span class="emphasis"><em>null</em></span>, we will then make sure that it is not dead because we don't want the character to pick up anything when it is dead.</p><p>Once we have a valid reference to the <code class="literal">Character</code> component of the <span class="strong"><strong>Character</strong></span> GameObject and know that the character is not dead, we can then add <span class="emphasis"><em>one</em></span> to the <span class="strong"><strong>CoinCount</strong></span> of the character and print out the current value of coins held by the character.</p><p>Once we have given <a id="id145" class="indexterm"></a>character a coin, we will no longer want this coin to do anything because it's already been used, so we can call the <code class="literal">Destroy</code> function and give it the <code class="literal">gameObject</code> of the coin to destroy, removing it from the scene and preventing character from touching and collecting another coin from it.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip21"></a>Tip</h3><p><span class="strong"><strong>gameObject</strong></span> (lowercase <span class="strong"><strong>g</strong></span> in game) is a reference to GameObject that the C# class <a id="id146" class="indexterm"></a>belongs to.</p></div><p>This is our pickup class. This class is designed to only perform one thing—add <span class="emphasis"><em>one</em></span> to a value of another class—so it is a simple C# class to write.</p></div>