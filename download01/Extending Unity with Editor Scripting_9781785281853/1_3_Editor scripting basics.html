<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch01lvl1sec09"></a>Editor scripting basics</h2></div></div><hr /></div><p>It's time to<a id="id3" class="indexterm"></a> go hands on in the creation of editor scripts so in this section we are going to explore how to start them off.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec07"></a>What is an editor script?</h3></div></div></div><p>An <span class="strong"><strong>editor script</strong></span> is<a id="id4" class="indexterm"></a> any piece of code that uses methods from the <a id="id5" class="indexterm"></a>
<span class="strong"><strong>UnityEditor</strong></span> namespace, and its principal objective is to create <a id="id6" class="indexterm"></a>or modify functionalities in the Unity editor.</p><p>To see this working, let's start with a basic example. Create a new project in Unity and then a new script called <code class="literal">HelloWorld.cs</code>. Don't worry about where to place the script, we'll talk about that in a bit. Copy the following code:</p><div class="informalexample"><pre class="programlisting">using UnityEngine;
using UnityEditor;

public class HelloWorld {
    
    [MenuItem ("GameObject/Create HelloWorld")]
    private static void CreateHelloWorldGameObject () {
        if(EditorUtility.DisplayDialog(
            "Hello World", 
            "Do you really want to do this?", 
            "Create", 
            "Cancel")) {
            new GameObject("HelloWorld");
        }
    }
}     </pre></div><p>Wait for the<a id="id7" class="indexterm"></a> compiler to finish and then go to the Unity editor menu and click on <span class="strong"><strong>GameObject</strong></span>. At the end of the menu, you will see an item called <span class="strong"><strong>Create HelloWorld</strong></span>, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781785281853/graphics/B04640_01_01.jpg" /></div><p>Click on this item, then a dialog window asks whether you really want to create this game object:</p><div class="mediaobject"><img src="/graphics/9781785281853/graphics/B04640_01_02.jpg" /></div><p>After clicking<a id="id8" class="indexterm"></a> on <span class="strong"><strong>Create</strong></span>, a new game object with the name <span class="strong"><strong>HelloWorld</strong></span> is added to the current scene. You can check this in the <span class="strong"><strong>Hierarchy</strong></span> window:</p><div class="mediaobject"><img src="/graphics/9781785281853/graphics/B04640_01_03.jpg" /></div><p>You created your first editor script using two things:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>A <code class="literal">MenuItem</code> attribute<a id="id9" class="indexterm"></a> to add menu items to the Unity editor menu.</p></li><li style="list-style-type: disc"><p>A <code class="literal">DisplayDialog</code> method, part of the <code class="literal">EditorUtility</code> class, to show a custom <a id="id10" class="indexterm"></a>model popup.</p></li></ul></div><p>Don't worry, we will discuss these in depth later in this book. For now, we are going to move forward and discuss something very important in the creation of editor scripts: the <code class="literal">Editor</code> folder.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec08"></a>The Editor folder</h3></div></div></div><p>The <code class="literal">Editor</code> folder is <a id="id11" class="indexterm"></a>one of the special folders Unity has, just<a id="id12" class="indexterm"></a> like the <code class="literal">Resources</code> or <code class="literal">Plugins</code> folders.</p><p>Like the Unity documentation says, all scripts inside a folder with the name <span class="emphasis"><em>Editor</em></span> will be treated as editor scripts rather than runtime scripts related to your video game. Also, you can have more than one Editor folder in your project at once if you want.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip02"></a>Tip</h3><p>To learn more about <a id="id13" class="indexterm"></a>other special folders in Unity, visit <a class="ulink" href="http://docs.unity3d.com/Manual/SpecialFolders.html" target="_blank">http://docs.unity3d.com/Manual/SpecialFolders.html</a>.</p></div><p>If you have at least one <code class="literal">Editor</code> folder with a script inside, you will see something like the following in MonoDevelop (in other IDEs, such as Visual Studio or Xamarin, you may see something slightly different, but the concept is the same):</p><div class="mediaobject"><img src="/graphics/9781785281853/graphics/B04640_01_04.jpg" /></div><p>Two different assemblies will be created: the first assembly, <span class="strong"><strong>Assembly-CSharp</strong></span>, is for your video game scripts and the second assembly, <span class="strong"><strong>Assembly-CSharp-Editor</strong></span>, is for your editor scripts. This means that the editor scripts will not be included in your final video game build.</p><p>So, what is the problem with <code class="literal">HelloWorld.cs</code>? Well, right now it' s not inside an <code class="literal">Editor</code> folder, so if you try to build a video game with that script included, the build process will fail because Unity won't be able to find the namespace named UnityEditor:</p><div class="mediaobject"><img src="/graphics/9781785281853/graphics/B04640_01_05.jpg" /></div><p>Most of the editor scripts that we will discuss in this book, like <a id="id14" class="indexterm"></a>
<span class="strong"><strong>custom inspectors</strong></span> in <a class="link" href="#" linkend="ch03">Chapter 3</a>, <span class="emphasis"><em>Creating Custom Inspectors</em></span>, or <span class="strong"><strong>editor windows</strong></span> in <a class="link" href="#" linkend="ch04"> Chapter 4</a>, <span class="emphasis"><em>Creating Editor Windows </em></span>require being saved inside an Editor folder in order to work. However, in some<a id="id15" class="indexterm"></a> situations, it is possible to achieve this without using the <code class="literal">Editor</code> folder.</p><p>Let's fix the original <code class="literal">HelloWorld.cs</code> file to work outside an <code class="literal">Editor</code> folder. In this case, we must tell the<a id="id16" class="indexterm"></a> compiler to not include the editor-related code if we are<a id="id17" class="indexterm"></a> making a video game build.</p><p>To achieve this, we will use the preprocessor directives <code class="literal">#if</code> and <code class="literal">#endif</code> with the conditional compilation symbol <code class="literal">UNITY_EDITOR</code>. Using both together, we can tell the compiler to exclude a block of code when we create a video game build.</p><p>Update <code class="literal">HelloWorld.cs</code> as follows:</p><div class="informalexample"><pre class="programlisting">using UnityEngine;
<span class="strong"><strong>#if UNITY_EDITOR</strong></span>
using UnityEditor;
<span class="strong"><strong>#endif</strong></span>
public class HelloWorld {
    
<span class="strong"><strong>    #if UNITY_EDITOR</strong></span>
    [MenuItem ("GameObject/Create HelloWorld")]
    private static void CreateHelloWorldGameObject () {
        if(EditorUtility.DisplayDialog(
            "Hello World", 
            "Do you really want to do this?", 
            "Create", 
            "Cancel")) {
            new GameObject("HelloWorld");
        }
    }
<span class="strong"><strong>    #endif</strong></span>
    
    // Add your video game code here
}</pre></div><p>If you feel a little overwhelmed, just keep in mind that the last script example is an exception, and as a guideline, all the editor scripts must be inside an <code class="literal">Editor</code> folder. to keep everything organized and working</p></div></div>