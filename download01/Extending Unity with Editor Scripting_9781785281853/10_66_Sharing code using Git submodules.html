<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch10lvl1sec62"></a>Sharing code using Git submodules</h2></div></div><hr /></div><p>Using <a id="id394" class="indexterm"></a>packages to share code across different projects has a few problems. These are hard to maintain because any change means a new package must be generated and distributed manually across the team.</p><p>Collaboration is not easy because fixes to bugs in the implementation are not necessarily shared across the team, unless you invest time to manually share the packages with updates. This is not good, as it requires extra management.</p><p>The good news is that we can address this situation using Git submodules as we started using Git in the previous chapter.</p><p>With submodules, you can maintain a Git repository as a subdirectory of another Git repository. This lets you clone another repository with a specific tool into your project and keep your commits separate.</p><p>In this section, we<a id="id395" class="indexterm"></a> will make the AppBuilder tool a submodule used by <span class="emphasis"><em>Run &amp; Jump</em></span>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec82"></a>Creating a submodule</h3></div></div></div><p>We need to create a <a id="id396" class="indexterm"></a>Git repository inside the AppBuilder project that only contains the files and folders we want to add in the submodule. This means that all the extra files and folders Unity creates won't be included here, for example, the project settings.</p><p>In this case, we need to open a terminal (in Windows, use Git bash or something similar) and remain in the root of the AppBuilder project:</p><div class="mediaobject"><img src="/graphics/9781785281853/graphics/B04640_10_07.jpg" /></div><p>Now execute the following commands:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ cd Assets/Tools/AppBuilder</strong></span>
<span class="strong"><strong>$ git init</strong></span>
</pre></div><p>Finally, make the first commit:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ git add .</strong></span>
<span class="strong"><strong>$ git commit -m 'First commit'</strong></span>
</pre></div><p>The last thing to do is to make this repository available using a repository hosting service such as GitHub.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note43"></a>Note</h3><p>GitHub offers both paid plans for private repositories and free accounts. To learn how to publish your repository, visit <a class="ulink" href="https://help.github.com/articles/adding-an-existing-project-to-github-using-the-command-line/" target="_blank"> https://help.github.com/articles/adding-an-existing-project-to-github-using-the-command-line/</a>.</p></div><p>For this example, we hosted the AppBuilder tool in <a class="ulink" href="https://github.com/angelotadres/AppBuilder" target="_blank">https://github.com/angelotadres/AppBuilder</a>.</p><p>Now, we are ready to start using our submodule in the <code class="literal">Run &amp; Jump</code> project.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec83"></a>Using a submodule</h3></div></div></div><p>Right now, this <a id="id397" class="indexterm"></a>is the current status of the <code class="literal">Run &amp; Jump</code> project:</p><div class="mediaobject"><img src="/graphics/9781785281853/graphics/B04640_10_08.jpg" /></div><p>The <code class="literal">AppBuilder</code> folder will no longer be a part of the project because we will add this using a Git submodule.</p><p>In the terminal, go to the folder in which you have the <code class="literal">Run &amp; Jump</code> project (this assumes that you already have this project under version control using Git).</p><div class="mediaobject"><img src="/graphics/9781785281853/graphics/B04640_10_09.jpg" /></div><p>Now, execute the following (replacing the last part with your submodule repository if you have it):</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ cd Assets/Tools</strong></span>
<span class="strong"><strong>$ git submodule add git@github.com:angelotadres/AppBuilder.git</strong></span>
</pre></div><p>By default, the command <code class="literal">submodule</code> will add the subproject to a directory named the same as the repository, in this case, <code class="literal">AppBuilder</code>.</p><p>Finally, go back again to the root of the <span class="emphasis"><em>Run &amp; Jump</em></span> project and commit the changes.</p><p>Basically, the changes we made are the addition of a new folder and a new file called <code class="literal">.gitmodules</code> located in the root of the project. This file contains all the information about the submodules in your project.</p><p>Now, every<a id="id398" class="indexterm"></a> time you have a change in your game, you can commit these changes normally. If you need to make a fix or change in the submodule, you need to go to that folder and deal with it as a normal repository. The good thing is that all the users of these tools are able to make improvements to them now.</p><p>After this, if you cloned or forked the main project or if you want to get the latest version of all the submodules, the only thing you need to do is execute these two commands in the root of your main project:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ git submodule init</strong></span>
<span class="strong"><strong>$ git submodule update</strong></span>
</pre></div><p>The first line initializes your local configuration file, that is, the <code class="literal">.gitmodules</code> file, and the second one fetches all the data from the project and checks out the appropriate commits listed in our main project.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note44"></a>Note</h3><p>To understand in depth how a<a id="id399" class="indexterm"></a> submodule works, visit <a class="ulink" href="https://git-scm.com/book/en/v2/Git-Tools-Submodules" target="_blank">https://git-scm.com/book/en/v2/Git-Tools-Submodules</a>.</p></div></div></div>