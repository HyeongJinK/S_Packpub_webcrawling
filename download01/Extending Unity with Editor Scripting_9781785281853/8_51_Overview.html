<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch08lvl1sec49"></a>Overview</h2></div></div><hr /></div><p>The <span class="strong"><strong>AssetPostprocessor</strong></span> is <a id="id312" class="indexterm"></a>a class meant to help us to automate the process of applying specific configurations to the assets imported.</p><p>Is up to you how you define the criteria for applying or not a specific configuration, for example you can use a system based on the location of the imported asset or detecting keywords in the asset name to do several things such as adding scripts to objects, adding colliders to objects, or changing settings to textures.</p><p>In order to guarantee the availability of the <code class="literal">AssetPostprocessor</code> scripts you are going to implement, it is good practice to use a<a id="id313" class="indexterm"></a> <span class="strong"><strong>DLL</strong></span> to group them and use the DLL inside the <code class="literal">Editor</code> folder in your target video game project. If you don't use a DLL and something in the project fails to compile, <a id="id314" class="indexterm"></a>your assets are not going to be configured as you was planned.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec65"></a>Defining the chapter goals</h3></div></div></div><p>In this<a id="id315" class="indexterm"></a> chapter, we will create a DLL using the <code class="literal">AssetPostprocessor</code> class to control the import pipeline of the background and level pieces images in <span class="emphasis"><em>Run &amp; Jump</em></span>.</p><p>The goals here are:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Implementing the <code class="literal">AssetPostprocessor</code> class to format images</p></li><li style="list-style-type: disc"><p>Creating a new DLL with the <code class="literal">AssetPostprocessor</code> classes inside it and integrating the DLL with Run &amp; Jump.</p></li></ul></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec66"></a>Using the AssetPostprocessor class</h3></div></div></div><p>The <a id="id316" class="indexterm"></a>
<code class="literal">AssetPostprocessor</code> class is part of the <code class="literal">UnityEditor</code> namespace, and must be extended for any class intended to control the asset import pipeline. This class has several message methods to react when an asset is imported.</p><p>To start with, we will create a folder in the <span class="emphasis"><em>Run &amp; Jump</em></span> project called <code class="literal">ImportPipeline</code>. Place this folder inside the <code class="literal">Tools</code> folder.</p><div class="mediaobject"><img src="/graphics/9781785281853/graphics/B04640_08_01.jpg" /></div><p>Inside the <code class="literal">ImportPipeline</code> folder add an <code class="literal">Editor</code> folder and then create a script called <code class="literal">TexturePipeline.cs</code>. Add the following code:</p><div class="informalexample"><pre class="programlisting">using UnityEngine;
using UnityEditor;
namespace RunAndJump.ImportPipeline {
  public class TexturePipeline : AssetPostprocessor {

    private void OnPreprocessTexture () {
      Debug.LogFormat("OnPreprocessTexture, The path is {0}", assetPath);
    }

    private void OnPostprocessTexture (Texture2D texture) {
      Debug.LogFormat("OnPostprocessTexture, The path is {0}", assetPath);
    }
  }
}</pre></div><p>Since the<a id="id317" class="indexterm"></a> <code class="literal">TexturePipeline</code> class needs to know when an asset is added to the project, we will extend from the <code class="literal">AssetPostprocessor</code>, a class that will trigger several events when an asset is imported to the project depending on whether the asset is a 3D model, an audio, or a texture. In this example, our focus is to detect when a texture is imported, so we will add two methods. The first one is <code class="literal">OnPreprocessTexture</code>, which triggers before the importing process initiates. This is the perfect place to add the code related to configuring the settings of the imported asset. The second one is called the <code class="literal">OnPostprocessTexture</code> method. This method is similar to <code class="literal">OnPreprocessTexture</code>, except this one isn't called until the asset is imported. The final asset is passed as a parameter on this method, and this is a good place to do something with it such as generating a new prefab using this asset, reallocating the asset in a specific folder, and so on.</p><p>As you can see in the code, we are just printing logs using the  <code class="literal">assetPath</code> variable. This contains the pathname of the asset being imported.</p><p>To test this, pick from the book contents an image, <span class="strong"><strong>Bg_OrangeSky.png</strong></span> for example, and drop that into the root of the project. You will see a couple of logs in the console, as follows:</p><div class="mediaobject"><img src="/graphics/9781785281853/graphics/B04640_08_02.jpg" /></div><p>Our class <a id="id318" class="indexterm"></a>works and captures the changes when a texture is added to the project. Using this as a base, we can make something more interesting to improve our import pipeline.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note33"></a>Note</h3><p>To become <a id="id319" class="indexterm"></a>familiar with all the available methods from the <code class="literal">AssetPostprocessor</code> class, visit <a class="ulink" href="http://docs.unity3d.com/ScriptReference/AssetPostprocessor.html" target="_blank">http://docs.unity3d.com/ScriptReference/AssetPostprocessor.html</a>.</p></div></div></div>