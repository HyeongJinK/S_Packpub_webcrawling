<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch06lvl1sec41"></a>Changing the look and feel of the Level Creator tool</h2></div></div><hr /></div><p>In this section, we <a id="id260" class="indexterm"></a>will modify the current look and feel of our tool.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec54"></a>Using GUIStyles in our GUI components</h3></div></div></div><p>The <code class="literal">GUIStyle</code> class is part of the <code class="literal">UnityEditor</code> namespace, and is used to define the style of a<a id="id261" class="indexterm"></a> single GUI control, such as a button, a label, or a text area. Most of the methods used to create these GUI components accept an optional <code class="literal">GUIStyle</code> parameter to override their default style.</p><p>Let's check the current look of the level inspector:</p><div class="mediaobject"><img src="/graphics/9781785281853/graphics/B04640_06_02.jpg" /></div><p>We divided the inspector into four sections, and each one has a title. In the previous chapters, we used something like this to make the text of these labels look different:</p><div class="informalexample"><pre class="programlisting">EditorGUILayout.LabelField("MyTitle", EditorStyles.boldLabel);</pre></div><p>We made all the title texts look bold using the class <code class="literal">EditorStyles</code>.</p><p>The class <code class="literal">EditorStyles</code> contain these <code class="literal">GUIStyle</code> instances commonly used by Unity to style their GUI components. Here, we have a huge number of styles available that respect the native Unity look and feel.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note30"></a>Note</h3><p>If you want to<a id="id262" class="indexterm"></a> check more about the <code class="literal">EditorStyles</code> class, visit: <a class="ulink" href="http://docs.unity3d.com/ScriptReference/EditorStyles.html" target="_blank">http://docs.unity3d.com/ScriptReference/EditorStyles.html</a>.</p></div><p>The titles <a id="id263" class="indexterm"></a>are OK but we want to make something better, so we will create our own custom <code class="literal">GUIStyle</code> instance.</p><p>Let's add a new member variable inside the <code class="literal">LevelInspector</code> class:</p><div class="informalexample"><pre class="programlisting">private GUIStyle _titleStyle;</pre></div><p>Then, let's create a new method called <code class="literal">InitStyles</code> and copy the following code:</p><div class="informalexample"><pre class="programlisting">private void InitStyles() {
    _titleStyle = new GUIStyle();
    _titleStyle.alignment = TextAnchor.MiddleCenter;
    _titleStyle.fontSize = 16;
}</pre></div><p>Here, we created a new <code class="literal">GUIStyle</code> instance called <code class="literal">_titleStyle</code> and defined its alignment and font size. With that done, the only thing we need to do is call the <code class="literal">InitStyles</code> method inside the method <code class="literal">OnEnable</code>, like this:</p><div class="informalexample"><pre class="programlisting">private void OnEnable () {
    //Debug.Log ("OnEnable was called...");
    _myTarget = (Level)target;
    InitLevel ();
    ResetResizeValues ();
    SubscribeEvents();
<span class="strong"><strong>    InitStyles();</strong></span>
}</pre></div><p>Now, replace all the <code class="literal">EditorStyles.boldLabel</code> instances with the <code class="literal">_titleStyle</code> variable. For example, in the method <code class="literal">DrawLevelDataGUI</code>, you will find something like this:</p><div class="informalexample"><pre class="programlisting">EditorGUILayout.LabelField ("Data", EditorStyles.boldLabel);</pre></div><p>The idea is to update the line to something like this:</p><div class="informalexample"><pre class="programlisting">EditorGUILayout.LabelField ("Data", _titleStyle);</pre></div><p>If you check the Level custom inspector, you will notice the change in the title's look and feel:</p><div class="mediaobject"><img src="/graphics/9781785281853/graphics/B04640_06_03.jpg" /></div><p>When <a id="id264" class="indexterm"></a>you work with the <code class="literal">GUIStyle</code> instances, you will also use resources such as textures and fonts to improve the look and feel of your GUI components. To learn how to do this, grab the <span class="strong"><strong>Color_Bg.png</strong></span> and <span class="strong"><strong>Oswald-Regular.ttf</strong></span> files from the book content and add them to a folder called <span class="strong"><strong>Resources</strong></span> inside <code class="literal">Tools/LevelCreator/Editor</code>:</p><div class="mediaobject"><img src="/graphics/9781785281853/graphics/B04640_06_04.jpg" /></div><p>Remember, every<a id="id265" class="indexterm"></a> time you want to use a texture in an editor GUI context, you must change the attribute <span class="strong"><strong>Texture Type</strong></span> to <span class="strong"><strong>Editor GUI and Legacy GUI</strong></span> on the inspector associated to it:</p><div class="mediaobject"><img src="/graphics/9781785281853/graphics/B04640_06_05.jpg" /></div><p>Let's update the method <code class="literal">InitStyles</code>:</p><div class="informalexample"><pre class="programlisting">private void InitStyles() {
    _titleStyle = new GUIStyle();
    _titleStyle.alignment = TextAnchor.MiddleCenter;
    _titleStyle.fontSize = 16;
    
<span class="strong"><strong>Texture2D titleBg = (Texture2D)  </strong></span>
<span class="strong"><strong>        Resources.Load("Color_Bg");</strong></span>
<span class="strong"><strong>        Font titleFont = (Font) </strong></span>
<span class="strong"><strong>        Resources.Load("Oswald-Regular");</strong></span>
<span class="strong"><strong>    _titleStyle.normal.background = titleBg;</strong></span>
<span class="strong"><strong>    _titleStyle.normal.textColor = Color.white;</strong></span>
<span class="strong"><strong>    _titleStyle.font = titleFont;</strong></span>

}</pre></div><p>Because the<a id="id266" class="indexterm"></a> texture and the font are inside a folder called <code class="literal">Resources</code>, we can just use the <code class="literal">Resources.Load</code> method to get their reference.</p><p>We assign the texture as a background for the label; to have access to this property, we write <code class="literal">_titleStyle.normal.background = titleBg</code>.</p><p>In this case, <code class="literal">normal</code> is a <code class="literal">GUIStyleState</code>, a class that has specialized values for a given state. These values are the background and text color.</p><p>There are several <code class="literal">GUIStyleState</code> class types<span class="strong"><strong>,</strong></span> but we will talk more about these later. Because the GUI component for which we are trying to modify the look and feel is a label, the only valid one is <code class="literal">normal</code>.</p><p>Save and check the changes. Now, the different sections in this inspector are clearly defined:</p><div class="mediaobject"><img src="/graphics/9781785281853/graphics/B04640_06_06.jpg" /></div><p>Now, you<a id="id267" class="indexterm"></a> have the idea about how to work with the <code class="literal">GUIStyle</code> class. In the next section, we will continue modifying the look and feel of the Level Creator tool focusing on the Palette window.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec55"></a>Working with the GUIStyleState instances</h3></div></div></div><p>Before <a id="id268" class="indexterm"></a>coding, let's take a look at how the Palette window looks:</p><div class="mediaobject"><img src="/graphics/9781785281853/graphics/B04640_06_07.jpg" /></div><p>The current GUI is ok, but there is a room for improvement. The original idea for the Palette <a id="id269" class="indexterm"></a>window was to map categories to tabs. When the user selects a tab, the content associated to that category is displayed.</p><p>Here we will make the top buttons, created using the <code class="literal">GUILayout.Toolbar</code> method, look like tabs.</p><p>For each tab, we will have three different states. The first state is normal, where the tab is not selected. The next state is hover, where the cursor is over the tab. The last state is selected, where the tab is selected; this means the category associated to this tab is displayed in the scrollable area.</p><p>For each state, we will need a texture. So, grab from the book contents the <code class="literal">Tab_Normal.png</code> and <code class="literal">Tab_Selected.png</code> files and copy them inside of the <code class="literal">Tools\LevelCreator\Editor\Resources</code> folder.</p><p>The following image shows the different textures:</p><div class="mediaobject"><img src="/graphics/9781785281853/graphics/B04640_06_08.jpg" /></div><p>Now, we will repeat the process we did for the labels in the level inspector class, but for the Palette window. In the <code class="literal">PaletteWindow</code> class, add a new member variable:</p><div class="informalexample"><pre class="programlisting">private GUIStyle _tabStyle;</pre></div><p>Then create a new method called <code class="literal">InitStyles</code> and copy the following code:</p><div class="informalexample"><pre class="programlisting">private void InitStyles() {

    _tabStyle = new GUIStyle();
    _tabStyle.alignment = TextAnchor.MiddleCenter;
    _tabStyle.fontSize = 16;
    
}</pre></div><p>Add this<a id="id270" class="indexterm"></a> method at the end of the <code class="literal">OnEnable</code> method. Until this point it is similar to what we did with the Level custom inspector.</p><p>To work with the different states that the buttons on the toolbar can have, we will make use of the <code class="literal">GUIStyleState</code> instances inside the <code class="literal">GUIStyle</code>. The following list contains the available ones:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<code class="literal">normal</code>: This renders settings for when the component is displayed normally</p></li><li style="list-style-type: disc"><p>
<code class="literal">hover</code>: This renders settings for when the mouse hovers over the control</p></li><li style="list-style-type: disc"><p>
<code class="literal">active</code>: This renders settings for when the control is pressed down</p></li><li style="list-style-type: disc"><p>
<code class="literal">onNormal</code>: This renders settings for when the control is turned on</p></li><li style="list-style-type: disc"><p>
<code class="literal">onHover</code>: This renders settings for when the control is turned on and the mouse hovers over it</p></li><li style="list-style-type: disc"><p>
<code class="literal">onActive</code>: This renders settings for when the element is turned on and pressed down</p></li><li style="list-style-type: disc"><p>
<code class="literal">focused</code>: This renders settings for when the element has a keyboard focus</p></li><li style="list-style-type: disc"><p>
<code class="literal">onFocused</code>: This renders settings for when the element has a keyboard focus and is turned on</p></li></ul></div><p>In this case, the normal state of a tab will be represented by the normal <code class="literal">GUIStyleState</code>, and the selected state will be represented by a combination of <code class="literal">onNormal</code> and <code class="literal">onFocused</code> <code class="literal">GUIStyleState</code> instances.</p><p>Let's update the <code class="literal">InitStyles</code> method:</p><div class="informalexample"><pre class="programlisting">private void InitStyles() {
      
      _tabStyle = new GUIStyle();
      _tabStyle.alignment = TextAnchor.MiddleCenter;
      _tabStyle.fontSize = 16;

<span class="strong"><strong>          Texture2D tabNormal = (Texture2D)     </strong></span>
<span class="strong"><strong>        Resources.Load("Tab_Normal");</strong></span>
<span class="strong"><strong>      Texture2D tabSelected = (Texture2D)   </strong></span>
<span class="strong"><strong>        Resources.Load("Tab_Selected");</strong></span>
<span class="strong"><strong>      Font tabFont = (Font) Resources.Load("Oswald-Regular");</strong></span>
<span class="strong"><strong>      _tabStyle.font = tabFont;</strong></span>
<span class="strong"><strong>      _tabStyle.fixedHeight = 40;</strong></span>
<span class="strong"><strong>      _tabStyle.normal.background = tabNormal;</strong></span>
<span class="strong"><strong>      _tabStyle.normal.textColor = Color.grey;</strong></span>
<span class="strong"><strong>      </strong></span>
<span class="strong"><strong>      _tabStyle.onNormal.background = tabSelected;</strong></span>
<span class="strong"><strong>      _tabStyle.onNormal.textColor = Color.black;</strong></span>
<span class="strong"><strong>      </strong></span>
<span class="strong"><strong>      _tabStyle.onFocused.background = tabSelected;</strong></span>
<span class="strong"><strong>      _tabStyle.onFocused.textColor = Color.black;</strong></span>
    }</pre></div><p>Now it is<a id="id271" class="indexterm"></a> time to update the method in charge of rendering the toolbar in order to use the new <code class="literal">GUIStyle</code> method we created. Update the method <code class="literal">DrawTabs</code> to look like this:</p><div class="informalexample"><pre class="programlisting">private void DrawTabs () {
            int index = (int)_categorySelected;
            EditorGUILayout.Space();
            index = GUILayout.Toolbar (index, _categoryLabels.ToArray (), _tabStyle);
            _categorySelected = _categories [index];
        }</pre></div><p>Save and wait for Unity to compile the changes. Then, open the Palette window; you will see something like this:</p><div class="mediaobject"><img src="/graphics/9781785281853/graphics/B04640_06_09.jpg" /></div><p>Now the buttons look more like tabs, however, the texture of the tabs is not displayed properly because it is stretched. This is because Unity stretches the texture to fill the area occupied by the GUI component by default. To solve this problem, we need to add an extra line of<a id="id272" class="indexterm"></a> code at the end of the <code class="literal">InitStyles</code> method:</p><div class="informalexample"><pre class="programlisting">_tabStyle.border = new RectOffset(18, 18, 20, 4);</pre></div><p>With this, we defined a border for the textures that we are using for the tabs, this means all the content that corresponds to the margins (left, right, top, and bottom, respectively) won't be stretched, only the center will be.</p><p>Now, if you take a look again to the Palette window, you will see that the textures used for the tabs look good:</p><div class="mediaobject"><img src="/graphics/9781785281853/graphics/B04640_06_10.jpg" /></div></div></div>