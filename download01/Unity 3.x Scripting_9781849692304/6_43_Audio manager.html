<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch06lvl1sec44"></a>Audio manager</h2></div></div><hr /></div><p>To design the audio manager, perform the following steps:<a id="id969" class="indexterm"></a></p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Create a new script called <code class="literal">AudioManager</code>.</p></li><li><p>As in world manager, we need to create the <code class="literal">GetInstance</code> function.</p></li><li><p>Now, we need to create a music player that will take care of switching music.</p></li><li><p>To initialize our audio manager, we need to call the <code class="literal">GetInstance</code> function<a id="id970" class="indexterm"></a> from <code class="literal">GameLoader</code>.</p></li><li><p>In the <code class="literal">AudioManager</code> script, add the following code snippet:</p><div class="informalexample"><pre class="programlisting">static private var instance : AudioManager = null;
public var auMusicPlaying1 : AudioClip;
public var auMusicPlaying2 : AudioClip;

static public function GetInstance(){
if(!instance){
instance = FindObjectOfType(AudioManager);
if(!instance){
Debug.LogError("AudioManager does not exist");
return instance;
}
}
function MusicPlayer(){
if ( !audio.isPlaying ){
if(audio.clip == auMusicPlaying1)
audio.clip = auMusicPlaying2;
else
audio.clip = auMusicPlaying1;
audio.Play();
}
}
function Update(){    
MusicPlayer();
}
function Awake(){
audio.clip = auMusicPlaying1;
}</pre></div></li><li><p>In the <code class="literal">GameLoader</code> script, add the following code snippet: <a id="id971" class="indexterm"></a></p><div class="informalexample"><pre class="programlisting">function Start (){    
WorldManager.GetInstance();
AudioManager.GetInstance();
}</pre></div></li></ol></div></div>