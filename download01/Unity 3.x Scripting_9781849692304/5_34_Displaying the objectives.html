<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch05lvl1sec36"></a>Displaying the objectives</h2></div></div><hr /></div><a id="id800" class="indexterm"></a><p>As this chapter has been about the creation and implementation of visual indications of various kinds, we believe it would make sense if we actually showed these functions working appropriately. We will write a <code class="literal">Displaying</code> <code class="literal">Objectives</code> script<a id="id801" class="indexterm"></a> to do this.</p><p>This script will allow players to have the current objective displayed on screen and then upon triggering or giving an input, have that objective changed to the next one. Perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Revisit <code class="literal">TextManager</code>.</p></li><li><p>Revisit <code class="literal">textMesh</code>.</p></li></ol></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec68"></a>Revisiting TextManager</h3></div></div></div><a id="id802" class="indexterm"></a><a id="id803" class="indexterm"></a><p>Just a few things to tackle in here to get objective display working. This script essentially is going to act as an objective manager. The player will be able to keep and display as many objectives as he wishes. As the <span class="emphasis"><em>O</em></span> button is pressed, the objective array increments itself to display the next objective in the array.</p><p>Two variables need to be added. One will be the <code class="literal">String</code> list and the other will be <code class="literal">increment</code>:</p><div class="informalexample"><pre class="programlisting">var objectiveArray : String[];
private var increment : int = 0;</pre></div><p>Access the <code class="literal">DisplayInformation</code> function through the <code class="literal">Awake</code> function<a id="id804" class="indexterm"></a>. Create <code class="literal">newText</code> and <code class="literal">Color.blue</code> as its parameters:</p><div class="informalexample"><pre class="programlisting">function Awake(){
    itemText[1].GetComponent("textMesh").DisplayInformation("newText", Color.blue);
}</pre></div><p>An increment control is required to control the flow through the array. An explanation on this is given earlier in this chapter:</p><div class="informalexample"><pre class="programlisting">function IncrementControl(){
    if(increment != objectiveArray.length - 1){
        increment += 1;
    }
    else{
        increment = 0;
    }
}</pre></div><p>The next function is <code class="literal">ChangeObjective</code> and it does just that. Two functions are called in here. One is <code class="literal">Objectives</code> and the other is <code class="literal">IncrementControl</code>:</p><div class="informalexample"><pre class="programlisting">function ChangeObjective()
{
    Objectives();
    IncrementControl();
}</pre></div><p>The second last function to create is the <code class="literal">Update</code> function<a id="id805" class="indexterm"></a>. We have an <code class="literal">if</code> statement checking for player input for the <span class="emphasis"><em>O</em></span> key. If the player does press the <span class="emphasis"><em>O</em></span> key, call the <code class="literal">DisplayInformation</code> function<a id="id806" class="indexterm"></a> again to get it to display the next message:</p><div class="informalexample"><pre class="programlisting">function Update()
{
    if(Input.GetKeyDown(KeyCode.O))
    {
        itemText[1].GetComponent("textMesh").DisplayInformation("newText", Color.blue);
    }
}</pre></div><a id="id807" class="indexterm"></a><a id="id808" class="indexterm"></a><p>Finally, create the <code class="literal">Objectives</code> function. This function will return the current objective to be displayed:</p><div class="informalexample"><pre class="programlisting">function Objectives(){    return objectiveArray[increment];}</pre></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec69"></a>Revisiting textMesh</h3></div></div></div><a id="id809" class="indexterm"></a><a id="id810" class="indexterm"></a><p>As we have done with the previous HUD elements, a new variable needs to be created. That variable is <code class="literal">ObjectiveDisplay</code> and is <code class="literal">boolean</code>:</p><div class="informalexample"><pre class="programlisting">private var ObjectiveDisplay : boolean = false;</pre></div><p>In the <code class="literal">Awake</code> function, we need to check if this <code class="literal">gameObject</code> is <code class="literal">ObjectiveDisplay</code>; if it is, the flag is <code class="literal">true</code>:</p><div class="informalexample"><pre class="programlisting">    else if(gameObject.name == "ObjectiveDisplay"){
        ObjectiveDisplay = true;
    }</pre></div><p>In the <code class="literal">DisplayInformation</code> function<a id="id811" class="indexterm"></a>, create an <code class="literal">else</code> <code class="literal">if</code> statement with <code class="literal">ObjectiveDisplay</code> as its parameter. Inside it, create an <code class="literal">if</code> statement that checks if <code class="literal">textName</code> is equal to its own. If it is, it sets the renderer color to the parameter color. It also sets the text display of the attached <code class="literal">textMesh</code> to the current Objective being returned from <code class="literal">textManager</code> and the <code class="literal">Objectives</code> function. After this, the increment control in the text manager is activated to make sure that the next time a player presses that button, the next message appears:</p><div class="informalexample"><pre class="programlisting">    else if(ObjectiveDisplay){
        if(textName == "newText"){
            renderer.material.color = newColor;
            myText.text = ("Current Objective: " + gameManager.GetComponent("TextManager").Objectives());
            gameManager.GetComponent("TextManager").IncrementControl();
        }
    }</pre></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec70"></a>Hooking up HUD</h3></div></div></div><a id="id812" class="indexterm"></a><a id="id813" class="indexterm"></a><p>This part is going to be a checklist to make sure that everything is displaying and set up properly. The following screenshot is an example of the HUD we have been building:</p><div class="mediaobject"><img src="/graphics/9781849692304/graphics/2304EXP_05_09.jpg" /></div><p>We are going to go through it based upon our layout, so first off, we are going to make <a id="id814" class="indexterm"></a>sure that your layout is similar to mine, so that if you have any errors or questions, it will be easy to navigate through what is going on. With that being said, let's structure our HUD layout like we have here in <span class="strong"><strong>Hierarchy</strong></span>. Once done we will move on to each <code class="literal">gameObject</code> and make sure that the right objects are hooked up and that no questions are left unanswered towards the hooking up of this HUD.</p><div class="mediaobject"><img src="/graphics/9781849692304/graphics/2304EXP_05_10.jpg" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec71"></a>Game manager</h3></div></div></div><a id="id815" class="indexterm"></a><a id="id816" class="indexterm"></a><p>Make sure that all these scripts are attached and have correct values in them, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849692304/graphics/2304EXP_05_11.jpg" /></div><a id="id817" class="indexterm"></a><a id="id818" class="indexterm"></a><p>Make sure that in the <span class="strong"><strong>Text</strong></span> <span class="strong"><strong>Manager</strong></span> script, <span class="strong"><strong>Text</strong></span> <span class="strong"><strong>Mesh</strong></span> and <span class="strong"><strong>Objective</strong></span> <span class="strong"><strong>Array</strong></span> have the correct items hooked up, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849692304/graphics/2304EXP_05_12.jpg" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec72"></a>Health</h3></div></div></div><a id="id819" class="indexterm"></a><a id="id820" class="indexterm"></a><p>This is an example of the <span class="strong"><strong>Health</strong></span> <span class="strong"><strong>Bar</strong></span> script. Make sure that all texture elements are in place, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849692304/graphics/2304EXP_05_13.jpg" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec73"></a>Item_Pic</h3></div></div></div><a id="id821" class="indexterm"></a><a id="id822" class="indexterm"></a><p>Make sure that you hooked up the correct <span class="strong"><strong>Game</strong></span> <span class="strong"><strong>Manager</strong></span>, <span class="strong"><strong>Pain</strong></span> <span class="strong"><strong>Killer</strong></span>, and <span class="strong"><strong>Health</strong></span> <span class="strong"><strong>Pack</strong></span> scripts. They should have textures that represent them, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849692304/graphics/2304EXP_05_14.jpg" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec74"></a>ItemMultiplier, highScoreDisplay, ObjectiveDisplay, scoreDisplay, and weaponDisplay</h3></div></div></div><a id="id823" class="indexterm"></a><a id="id824" class="indexterm"></a><a id="id825" class="indexterm"></a><a id="id826" class="indexterm"></a><a id="id827" class="indexterm"></a><p>Everything that has to deal with text needs to have parameters like those given in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849692304/graphics/2304EXP_05_15.jpg" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec75"></a>saveDisplay</h3></div></div></div><a id="id828" class="indexterm"></a><a id="id829" class="indexterm"></a><p>Make sure that the <span class="strong"><strong>Timer</strong></span> and <span class="strong"><strong>Text</strong></span> <span class="strong"><strong>Mesh</strong></span> scripts are set up properly, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849692304/graphics/2304EXP_05_16.jpg" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec76"></a>Weapon_Pic</h3></div></div></div><a id="id830" class="indexterm"></a><a id="id831" class="indexterm"></a><p>Last, but not least, weapon pictures. Make sure that all weapons have correct pictures attached to the variables, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849692304/graphics/2304EXP_05_17.jpg" /></div></div></div>