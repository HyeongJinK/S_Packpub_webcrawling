<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec21"></a>Weapon pickup</h2></div></div><hr /></div><a id="id378" class="indexterm"></a><p>Our next step will be programming of the weapon pickups. To begin with, create a new script called <code class="literal">Weapon_pickUp</code>
<a id="id379" class="indexterm"></a>. Attach it to the <span class="strong"><strong>Gun_PickUp</strong></span> prefab<a id="id380" class="indexterm"></a> and drag it to the scene.</p><div class="mediaobject"><img src="/graphics/9781849692304/graphics/2304EXP_03_07.jpg" /></div><p>As with most of the weapon pickups, we want it to rotate around its base and disappear when a player collides with it. Open the <span class="strong"><strong>Weapon_pick</strong></span> <span class="strong"><strong>Up</strong></span> script<a id="id381" class="indexterm"></a> and declare a couple of <a id="id382" class="indexterm"></a>variables:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>We need to declare a <code class="literal">public</code> variable called <code class="literal">Speed</code> of <code class="literal">float</code> type, which will be used to control weapon rotation speed around the base</p></li><li style="list-style-type: disc"><p>We need to make sure that we are not colliding with anything but <code class="literal">gameObject</code> with the <code class="literal">Player</code> tag</p></li><li style="list-style-type: disc"><p>Last is a placeholder for the function to notify the <code class="literal">CH_Controller</code> script that we have equipped the weapon and are now ready to use it</p></li></ul></div><p>Add the following code snippet to the <code class="literal">Weapon_pickUp</code> script:</p><div class="informalexample"><pre class="programlisting">public var Speed : float = 20.0;
function OnTriggerEnter(other : Collider){
    if (other.gameObject.tag != "Player")
    return;
other.gameObject.GetComponent("CH_Controller").EquipWeapon();</pre></div><p>Switch to the <span class="strong"><strong>CH_Controller</strong></span> script and declare the <code class="literal">EquipWeapon()</code> function<a id="id383" class="indexterm"></a> at the very bottom of the script.</p><p>Inside the <code class="literal">CH_Controller</code> script in the <code class="literal">EquipWeapon</code> function<a id="id384" class="indexterm"></a>, we need to switch <code class="literal">boolean</code>, to set weapon to be equipped or not:</p><div class="informalexample"><pre class="programlisting">...
function EquipWeapon()
{    bWeaponEquiped = (bWeaponEquiped) ? false : true; }
...</pre></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note10"></a>Note</h3><p>If <code class="literal">bWeaponEquiped</code> <code class="literal">=</code> <code class="literal">(bWeaponEquiped)</code> <code class="literal">?false</code> <code class="literal">:</code> <code class="literal">true;</code> looks strange to you, this is how it can be interpreted:</p><p>Variable = (condition) ? if true(first value) : else (second value).</p><p>The other way to make that is: <code class="literal">bWeaponEquiped</code> <code class="literal">=</code> <code class="literal">!bWeaponEquiped</code>.</p></div><a id="id385" class="indexterm"></a><p>If <code class="literal">bWeaponEquiped</code> is <code class="literal">true</code>, then choose the  first option and set it to <code class="literal">false</code>, or else set it to <code class="literal">true</code>. This new statement has to be added in several different places as follows:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>At the top of the <code class="literal">FixedUpdate</code> function, in the first <code class="literal">if</code> statement:</p><div class="informalexample"><pre class="programlisting">if (counter &amp;&amp; bWeaponEquiped){</pre></div></li><li style="list-style-type: disc"><p>At the end of the <code class="literal">FixedUpdate</code> function where we are registering input from the mouse:</p><div class="informalexample"><pre class="programlisting">if(Input.GetKey (KeyCode.Mouse0) &amp;&amp; bWeaponEquiped){
...
if(Input.GetKey (KeyCode.Mouse1) &amp;&amp; bWeaponEquiped){</pre></div></li><li style="list-style-type: disc"><p>Last, but not least, we will add a rotation for our gun at the bottom of the <code class="literal">Weapon_pickUp</code> script:</p><div class="informalexample"><pre class="programlisting">function Update ()
{transform.Rotate(Vector3.up * Time.deltaTime * Speed); }</pre></div></li></ul></div><p>The following screenshot shows the gun pickup:</p><div class="mediaobject"><img src="/graphics/9781849692304/graphics/2304EXP_03_08.jpg" /></div></div>