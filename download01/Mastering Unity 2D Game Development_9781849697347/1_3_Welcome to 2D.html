<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch01lvl1sec09"></a>Welcome to 2D</h2></div></div><hr /></div><p>Welcome<a id="id9" class="indexterm"></a> to 2D, as you might say, Unity v4.3 has brought 2D into its primary toolset a huge range of features to make 2D development a lot simpler and more integrated with its editor environment.</p><p>What follows is a brief rundown of the entire primary enhancement and a walkthrough of some of the other important improvements brought in with v4.3.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec09"></a>The new 2D mode</h3></div></div></div><p>When creating a <a id="id10" class="indexterm"></a>new Unity project, you now have the option to select whether you want to treat assets as normal 3D assets or use the new 2D import wizards, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849697347/graphics/7347OT_01_01.jpg" /></div><p>The main <a id="id11" class="indexterm"></a>difference is the way assets will be imported into your solution and the default camera is set up. You can easily change the profile that the editor is using at any time by navigating to <span class="strong"><strong>Edit</strong></span> | <span class="strong"><strong>Project Settings</strong></span> | <span class="strong"><strong>Editor</strong></span> and changing the <span class="strong"><strong>Default Behavior Mode</strong></span> option. This is shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849697347/graphics/7347OT_01_02.jpg" /></div><p>Changing the <span class="strong"><strong>Mode</strong></span> setting will not affect the running of your game. This setting is only used while<a id="id12" class="indexterm"></a> importing new assets and adding them to your scene as to whether they are imported as textures or sprites.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec10"></a>Sprites</h3></div></div></div><p>In 2D, sprites<a id="id13" class="indexterm"></a> are simple images that generally depict a single object (for example, a character) or <a id="id14" class="indexterm"></a>scene (for example, background). Several sprites can also be made for a single object in the individual frames for that, as shown here:</p><div class="mediaobject"><img src="/graphics/9781849697347/graphics/7347OT_01_03.jpg" /></div><p>At the<a id="id15" class="indexterm"></a> core of the new 2D system is the new sprite texture importer, which imports your texture assets and prepares them as sprites in your project folder. When<a id="id16" class="indexterm"></a> dragged on to your scene, they are automatically given a new <span class="strong"><strong>Sprite Renderer</strong></span> object (refer to the next section) that is ready to be displayed in your game; no additional lighting or work is required.</p><p>As you<a id="id17" class="indexterm"></a> would expect, you can alter most of the characteristics of your sprite, including the following characteristics:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Scaling</p></li><li style="list-style-type: disc"><p>Pivot point</p></li><li style="list-style-type: disc"><p>Sprite region on texture</p></li></ul></div><p>All of the previous characteristics can be modified straight from the editor or at runtime through code or by using the new animation dope sheet (Unity's new animation editor control).</p><p>By default, each texture is imported as a single sprite; however, by using the <span class="strong"><strong>Sprite Editor</strong></span> (refer to the <span class="emphasis"><em>Sprite Editor</em></span> section), you can change this in various ways. These are covered in the next sections.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec01"></a>Sprite Renderer</h4></div></div></div><p>The <a id="id18" class="indexterm"></a>Sprite Renderer is the new 2D renderer to draw sprites to<a id="id19" class="indexterm"></a> the screen, much in the same way as other Unity renderers draw currently. Refer to the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849697347/graphics/7347OT_01_04.jpg" /></div><p>The main difference with the Sprite Renderer object is that you do not need to set up a separate material<a id="id20" class="indexterm"></a> manually (it is assigned automatically) and the default shader does<a id="id21" class="indexterm"></a> not require any additional lighting (single vertex lighting is used). You can enhance beyond this by adding your own materials and lighting if you wish; there are certainly no limits here.</p><p>The Sprite Renderer, like the other renderers, also supports dynamic batching with uniform scaling as well.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec02"></a>Sprite Editor</h4></div></div></div><p>The new <a id="id22" class="indexterm"></a>
<span class="strong"><strong>Sprite</strong></span><a id="id23" class="indexterm"></a>
<span class="strong"><strong> Editor</strong></span> object is Unity's way of viewing and manipulating the sprite texture assets once they have been imported into Unity.</p><div class="mediaobject"><img src="/graphics/9781849697347/graphics/7347OT_01_05.jpg" /><div class="caption"><p>The sprite editor window showing a single sprite</p></div></div><p>The<a id="id24" class="indexterm"></a> editor <a id="id25" class="indexterm"></a>allows some basic manipulations to happen to a sprite. For example:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Changing the Alpha color</p></li><li style="list-style-type: disc"><p>Altering the sprite's pivot position</p></li><li style="list-style-type: disc"><p>Splicing the texture to identify the sprite region (this is also used for spritesheets; refer to the next section)</p></li></ul></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec03"></a>Spritesheets</h4></div></div></div><p>Spritesheets are a core part of any 2D system, especially with 2D animation. Unifying all textures into<a id="id26" class="indexterm"></a> a single larger texture means greater performance when <a id="id27" class="indexterm"></a>sending the sprites to the graphic cards in a single texture, which is a lot faster than sending lots of smaller files. Refer to the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849697347/graphics/7347OT_01_06.jpg" /><div class="caption"><p>Sprite editor window showing multiple sprites in a grid</p></div></div><p>The traditional <a id="id28" class="indexterm"></a>way of forming spritesheets is to put sprites into specific<a id="id29" class="indexterm"></a> regions on a single image, and then identify the box regions where the individual sprites lie. These regions form individual frames in the sprite animation. As you can see in the preceding screenshot, you have six sprites arranged horizontally in two rows to form a single splash animation. The sprites could have also been arranged in a single row or a single column; it doesn't matter. It's just how the artist best packs the spritesheet for the animation. Unity can handle just about any arrangement you wish to throw at it. Just set the width and height of each texture region and the Unity <span class="strong"><strong>Sprite Editor</strong></span> will do the rest.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec04"></a>Texture atlases</h4></div></div></div><p>Akin<a id="id30" class="indexterm"></a> to spritesheets, texture atlases are a more efficient way of <a id="id31" class="indexterm"></a>packing textures into a single texture. Refer to the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849697347/graphics/7347OT_01_07.jpg" /><div class="caption"><p>A selection of separate textures that have been automatically packed, example from Unity's platformer sample</p></div></div><p>Unity has<a id="id32" class="indexterm"></a> added a very clever texture cutting and edge detection to make<a id="id33" class="indexterm"></a> this work very well and identify specific regions on the texture for each sprite. You can also change the selection areas if Unity is too optimistic when selecting the texture regions.</p><p>If you have the Pro edition of Unity, the editor can also generate these texture atlases for you from many other sprites very efficiently. This saves hours in asset generation.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec05"></a>Sprite meshes</h4></div></div></div><p>In Unity Pro, the engine <a id="id34" class="indexterm"></a>also has the capability to turn your 2D texture asset into a 2D<a id="id35" class="indexterm"></a> static mesh, which allows you to have greater control over the display and modification of the original texture at runtime. Refer to the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849697347/graphics/7347OT_01_08.jpg" /><div class="caption"><p>Image sprites that have been converted into 2D meshes in the scene view</p></div></div><p>You have<a id="id36" class="indexterm"></a> several options with the mesh feature, and you can decide whether you<a id="id37" class="indexterm"></a> want a mesh for the entire texture or a single tight mesh for the sprite in parts only (effectively, creating a flat 2D mesh just for your sprite).</p><p>This also would enable the ability to rig your sprites and alter their shape during the course of the game.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec06"></a>The Box2D physics system</h4></div></div></div><p>For those who have tried (or have created) physics systems in a 3D world of a 2D game, it's always been troublesome to just restrict one of the physics axes; it basically just doesn't work very well and is not as performant as it could be due to all calculations still being in 3D.<a id="id38" class="indexterm"></a>
<a id="id39" class="indexterm"></a> Refer to the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849697347/graphics/7347OT_01_09.jpg" /><div class="caption"><p>Example of Box2D 2D colliders used in the Unity platformer example to surround walkable elements</p></div></div><p>More often than not, developers create their own much more simple physics systems (which usually accounts for a high percentage of bugs in games if done wrong).</p><p>Unity recognized this limitation while building their 2D system and has pulled in another world class physics<a id="id40" class="indexterm"></a> system for 2D, called <span class="strong"><strong>Box2D</strong></span>.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip02"></a>Tip</h3><p>Games such as Angry Birds and Cut the Rope make heavy use of the 2D physics systems to handle a lot of on-screen animation for free using physics.</p></div><p>Box2D has<a id="id41" class="indexterm"></a> already been used and ported for many <a id="id42" class="indexterm"></a>other platforms (including XNA), so it makes complete sense for Unity; in most 2D games, you'll see a 4 times increase in the physics performance. Care should be taken, as with every physics system; don't expect it to solve all your problems. Code well and make sure that the standing objects generate interactions.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip03"></a>Tip</h3><p>If you want to see a great comparison<a id="id43" class="indexterm"></a> between<a id="id44" class="indexterm"></a> the 2D and 3D physics systems, refer to this excellent post at <a class="ulink" href="http://x-team.com/2013/11/unity3d-v4-3-2d-vs-3d-physics/" target="_blank">http://x-team.com/2013/11/unity3d-v4-3-2d-vs-3d-physics/</a>.</p></div><p>Through<a id="id45" class="indexterm"></a> Box2D, Unity adds several new physics collision options. They are as follows:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p><span class="strong"><strong>Rigidbody 2D</strong></span></p></li><li style="list-style-type: disc"><p><span class="strong"><strong>CircleCollider 2D</strong></span></p></li><li style="list-style-type: disc"><p><span class="strong"><strong>BoxCollider 2D</strong></span></p></li><li style="list-style-type: disc"><p><span class="strong"><strong>PolygonCollider 2D</strong></span></p></li><li style="list-style-type: disc"><p><span class="strong"><strong>EdgeCollider 2D</strong></span></p></li></ul></div><p>Unity <a id="id46" class="indexterm"></a>also <a id="id47" class="indexterm"></a>adds the <a id="id48" class="indexterm"></a>following 2D physics joint options to control how two physics bodies bond together:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p><span class="strong"><strong>Distance Joint 2D</strong></span></p></li><li style="list-style-type: disc"><p><span class="strong"><strong>Hinge Joint 2D</strong></span></p></li><li style="list-style-type: disc"><p><span class="strong"><strong>Slider Joint 2D</strong></span></p></li><li style="list-style-type: disc"><p><span class="strong"><strong>Spring Joint 2D</strong></span></p></li></ul></div><p>Similar to the 3D system, you can also apply the physics materials to your 2D objects using <span class="strong"><strong>Physics Material 2D</strong></span>. This allows greater control over an object's physics interactions, such as friction and bounciness.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec07"></a>The new animation Dope Sheet</h4></div></div></div><p>The new<a id="id49" class="indexterm"></a> animation <span class="strong"><strong>Dope Sheet</strong></span>(animation editor) is effectively a second version <a id="id50" class="indexterm"></a>of the original animation <span class="strong"><strong>Dope Sheet</strong></span>. This area has received a complete overhaul and has now been tightly integrated with the <span class="strong"><strong>Mecanim</strong></span><a id="id51" class="indexterm"></a> system. Refer to the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849697347/graphics/7347OT_01_10.jpg" /><div class="caption"><p>The animation editor <span class="strong"><strong>Dope Sheet</strong></span> window showing a single animation over time</p></div></div><p>When the recording mode is enabled (it is a small record button at the upper-left of the <span class="strong"><strong>Dope Sheet</strong></span> tab), simply changing any value in the editor while in animator view will create new properties in the animation. These animations can then be enhanced with curves for tweening/lerping support and can have the length of the animation controlled much more easily.</p><p>You can also manually edit the <span class="strong"><strong>Dope Sheet</strong></span> tab without the recording mode enabled by adding the curves (the <span class="strong"><strong>Animation</strong></span> properties) and selecting the property on the attached object that you wish to animate.</p><p>For extra<a id="id52" class="indexterm"></a> visibility, there is a <span class="strong"><strong>Preview</strong></span> window next<a id="id53" class="indexterm"></a> to the <span class="strong"><strong>Animator</strong></span> controls. So, you can see a close up of the effects of the changes you make to the animation.</p><p>In the 2D system, animations automatically generated from the spritesheets lean very heavily on this feature, making it very powerful for 2D.</p><p>We will cover the animation <span class="strong"><strong>Dope Sheet</strong></span> system in <a class="link" href="#" linkend="ch03">Chapter 3</a>,<span class="emphasis"><em> Getting Animated</em></span>, so stay tuned.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec11"></a>Other Unity 4.3 improvements</h3></div></div></div><p>Unity 4.3 was<a id="id54" class="indexterm"></a> not just about the new 2D system; there are also a host of other improvements and features with this release.</p><p>The major highlights of Unity 4.3 are covered in the following sections.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec08"></a>Improved Mecanim performance</h4></div></div></div><p>Mecanim is a <a id="id55" class="indexterm"></a>powerful tool for both 2D and 3D animations. In Unity 4.3, there<a id="id56" class="indexterm"></a> have been many improvements and enhancements, including a new game object optimizer that ensures objects are more tightly bound to their skeletal systems and removes unnecessary transform holders. Thus making Mecanim animations lighter and smoother. Refer to the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849697347/graphics/7347OT_01_11.jpg" /><div class="caption"><p>The Mecanim Animator window showing an example animation tree</p></div></div><p>In Unity 4.3, Mecanim also adds greater control to blend animations together, allowing the <a id="id57" class="indexterm"></a>addition<a id="id58" class="indexterm"></a> of curves to have smooth transitions, and now it also includes events that can be hooked into at every step.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec09"></a>The Windows Phone API improvements and Windows 8.1 support</h4></div></div></div><a id="id59" class="indexterm"></a><p>Unity 4.2 introduced Windows<a id="id60" class="indexterm"></a> Phone and Windows 8 support, since then things have been going wild, especially since Microsoft has thrown its support behind the movement and offered free licensing for the existing Pro owners. Refer to the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849697347/graphics/7347OT_01_12.jpg" /></div><p>Unity 4.3 builds solidly on the v4 foundations by bringing additional platform support, and it closes<a id="id61" class="indexterm"></a> some more gaps between the existing platforms. Some of the advantages are as follows:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>The emulator is now fully supported with Windows Phone (new x86 phone build)</p></li><li style="list-style-type: disc"><p>It has more orientation support, which allows even the splash screens to rotate properly and enabling pixel perfect display</p></li><li style="list-style-type: disc"><p>It has trial application APIs for both Phone and Windows 8</p></li><li style="list-style-type: disc"><p>It has improved sensors and location support</p></li></ul></div><p>On top of this, with the recent release of Windows 8.1, Unity 4.3 now also supports Windows 8.1 fully; additionally, Unity 4.5.3 will introduce support for Windows Phone 8.1 and universal projects.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec10"></a>Dynamic Nav Mesh (Pro version only)</h4></div></div></div><p>If you have <a id="id62" class="indexterm"></a>only been using the free version of Unity till now, you will <a id="id63" class="indexterm"></a>not be aware of what a Nav Mesh agent is. Nav Meshes are invisible meshes that are created for your 3D environment at the build time to simplify path finding and navigation for movable entities. Refer to the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849697347/graphics/7347OT_01_13.jpg" /></div><p>You can, of course, create the simplified models for your environment and use them in your scenes; however, every time you change your scene, you need to update your navigation model. Nav Meshes simply remove this overhead. Nav Meshes are crucial, especially in<a id="id64" class="indexterm"></a> larger environments where collision and navigation<a id="id65" class="indexterm"></a> calculations can make the difference between your game running well or not.</p><p>Unity 4.3 has improved this by allowing more runtime changes to the dynamic Nav Mesh, allowing you to destroy parts of your scene that alter the walkable parts of your terrain. Nav Mesh calculations are also now multithreaded to give an even better speed boost to your game. Also, there have been many other under-the-hood fixes and tweaks.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec11"></a>Editor updates</h4></div></div></div><p>The Unity <a id="id66" class="indexterm"></a>editor received a host of updates in Unity 4.3 to improve the<a id="id67" class="indexterm"></a> performance and usability of the editor, as you can see in the following demo screenshot.  Granted most of the improvements are behind the scenes.</p><div class="mediaobject"><img src="/graphics/9781849697347/graphics/7347OT_01_14.jpg" /><div class="caption"><p>The improved Unity Editor GUI with huge improvements</p></div></div><p>The editor refactored a lot of the scripting features on the platform, primarily to reduce the code complexity required for a lot of scripting components, such as unifying parts of the API into single components. For example, the <span class="strong"><strong>LookLikeControls</strong></span> and <span class="strong"><strong>LookLikeInspector</strong></span> options have been unified into a single <code class="literal">LookLike</code> function, which allows<a id="id68" class="indexterm"></a> easier creation of the editor GUI components. Further simplification of the programmable editor interface is an ongoing task and a lot of headway is being made in each release.</p><p>Additionally, the keyboard controls have been tweaked to ensure that the navigation works<a id="id69" class="indexterm"></a> in a uniform way and the sliders/fields work more<a id="id70" class="indexterm"></a> consistently.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec12"></a>MonoDevelop 4.01</h4></div></div></div><p>Besides<a id="id71" class="indexterm"></a> the editor features, one of the biggest enhancements<a id="id72" class="indexterm"></a> has to be the upgrade of the <span class="strong"><strong>MonoDevelop</strong></span> editor (<a class="ulink" href="http://monodevelop.com/" target="_blank">http://monodevelop.com/</a>), which Unity supports and is shipped with. This has been a long <a id="id73" class="indexterm"></a>running complaint for most developers simply due to the brand new features in the later editions. Refer to the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849697347/graphics/7347OT_01_15.jpg" /></div><p>MonoDevelop isn't made by Unity; it's an open source initiative run by Xamarin hosted on <span class="strong"><strong>GitHub</strong></span> (<a class="ulink" href="https://github.com/mono/monodevelop" target="_blank">https://github.com/mono/monodevelop</a>) for all the willing developers to contribute<a id="id74" class="indexterm"></a> and submit fixes to. Although the current stable release is 4.2.1, Unity is not fully up to date. Hopefully, this recent upgrade will mean that Unity can keep more in line with the future versions of this free tool.</p><p>Sadly, this doesn't mean that Unity has yet been upgraded from the modified V2 version of the <span class="strong"><strong>Mono</strong></span><a id="id75" class="indexterm"></a> compiler (<a class="ulink" href="http://www.mono-project.com/" target="_blank">http://www.mono-project.com/</a>) it uses to the current V3 branch, most likely, due<a id="id76" class="indexterm"></a> to the reduced platform<a id="id77" class="indexterm"></a> and the later versions of the Mono support.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec13"></a>Movie textures</h4></div></div></div><p>Movie textures is not exactly a new feature in Unity as it has been available for some time for<a id="id78" class="indexterm"></a> platforms such as Android and iOS. However, in Unity 4.3, it was<a id="id79" class="indexterm"></a> made available for both the new Windows 8 and Windows Phone platforms. This adds even more functionality to these platforms that were missing in the initial Unity 4.2 release where this feature was introduced. Refer to the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849697347/graphics/7347OT_01_16.jpg" /></div><p>With movie textures now added to the platform, other streaming features are also available, for<a id="id80" class="indexterm"></a> example, webcam (or a built-in camera in this case) and <a id="id81" class="indexterm"></a>microphone support were also added.</p></div></div></div>