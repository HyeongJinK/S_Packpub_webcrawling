<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch07lvl2sec91"></a>One last thing</h2></div></div><hr /></div><p>Now that the player has left home, found some nasty goblins, and run away, it would be nice if he didn't encounter anymore until he next leaves home.</p><p>So using the additional flag <code class="literal">PlayerReturningHome</code> we set in the <code class="literal">GameState</code> class, we can set this in the battle manager when the player hits the button. We also then need to unset this when the player leaves home again. So, update the <code class="literal">OnGUI</code> method in the battle manager to set the <code class="literal">PlayerReturningHome</code> flag to <code class="literal">true</code>.</p><p>Then for the home scene, set the flag to <code class="literal">false</code> when the player leaves. This can be achieved by either editing an existing script in the home scene or adding a new one to change the flag state in the <code class="literal">OnDestroy</code> method mentioned earlier, or update the <code class="literal">NavigationManager</code> script to set the flag when the player travels home. It is your choice. In the sample code, I have added this to the <code class="literal">NavigationManager</code> script, as shown in the updated <code class="literal">NavigateTo</code> method here:</p><div class="informalexample"><pre class="programlisting">public static void NavigateTo(string destination)
{
if (destination == "Home")
{
GameState.PlayerReturningHome = false;
}
FadeInOutManager.FadeToLevel(destination); 
}</pre></div><p>Then when the <code class="literal">NavigationManager</code> script detects that the destination is the Home scene, it will update the flag to <code class="literal">false</code> in the <code class="literal">GameState</code> class.</p><p>It is up to you and your game's design whether this is true for all battles or just for the first; it all depends on the style of the game you are building.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note96"></a>Note</h3><p>Don't forget to add the new Battle scene to the <span class="strong"><strong>Build</strong></span> settings if you want to see it in the final project!</p></div></div>