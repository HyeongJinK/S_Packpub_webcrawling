<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec16"></a>Introducing the Unity sprite system</h2></div></div><hr /></div><p>Armed with the data we need for our player character in our game world, let us now turn to the visual side of things<a id="id152" class="indexterm"></a> and get our first 2D visual elements into our game, starting with our hero.</p><p>Before the new 2D system was implemented in Unity 4.3, setting up a 2D-rendering system was a tortuous affair that required importing texture assets, creating a 2D-fixed camera system, implementing 2D lighting and a rendering pipeline, and either constraining a physics system to just two dimensions or building your own. It didn't stop there as there was a lot more to contend with, including an endless Z-order fighting to draw the textures correctly (which the new 2D-sorting layers resolve quite nicely). Most developers just ended up using one of the many 2D asset packages from the store to solve a lot of these issues, but it was still a huge challenge to get them right.</p><p>Now, with Unity's 2D pipeline, things are a lot simpler. I almost envy new developers who come to the platform for the extra free tools they wish to arm themselves with to build their projects. Unity<a id="id153" class="indexterm"></a> doesn't stop there though as there are many more new developments heading our way, such as the new UI system that was introduced at the Unite keynote in Vancouver.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip05"></a>Tip</h3><p>If you haven't done so already, I recommend that you at least watch the keynotes from Unity's Unite conferences<a id="id154" class="indexterm"></a> at <a class="ulink" href="http://Unity3D.com/unite" target="_blank">http://Unity3D.com/unite</a>. Watch more if you can as they will provide you with a keen insight into what is to come and also how to use it in advance in most cases.</p><p>Some sessions will also show you how to better use the existing features as a lot of the sessions are created from the leading issues in the forums.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec21"></a>Importing sprites</h3></div></div></div><p>When a Unity<a id="id155" class="indexterm"></a> project is in 2D mode, the first change you will notice is<a id="id156" class="indexterm"></a> that when new images are imported into the project, they are configured as sprites instead of just normal textures, as shown in the following screenshots:</p><div class="mediaobject"><img src="/graphics/9781849697347/graphics/7347OT_02_16.jpg" /><div class="caption"><p>Imported texture properties</p></div></div><div class="mediaobject"><img src="/graphics/9781849697347/graphics/7347OT_02_17.jpg" /><div class="caption"><p>Imported sprite properties</p></div></div><p>So, let's go into a bit more detail as to what these new properties mean.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl3sec16"></a>Texture type – sprite</h4></div></div></div><p>Setting this option<a id="id157" class="indexterm"></a> changes the import settings for the asset. Note the changes that take place when you click on <span class="strong"><strong>Apply</strong></span> or <span class="strong"><strong>OK</strong></span> on the <span class="strong"><strong>Import Settings</strong></span> change dialog.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl3sec17"></a>Sprite Mode – single/multiple</h4></div></div></div><p>This setting tells Unity<a id="id158" class="indexterm"></a> whether there is a single sprite or multiple<a id="id159" class="indexterm"></a> sprites within the imported image. In Unity 4.3, only after you select <span class="strong"><strong>Multiple</strong></span> will the <span class="strong"><strong>Sprite Editor</strong></span> become available, however in later versions, the Sprite Editor is always available.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl3sec18"></a>Packing tag</h4></div></div></div><p>This is a customizable<a id="id160" class="indexterm"></a> option that lets you set groups to pack sprites into texture atlases. By setting this up, it tells Unity to group all the objects with the same tag under a separate texture atlas/sheet together, thereby overriding the default behavior of placing all the assets on the same atlas. Any assets without a tag will be grouped onto the default atlas.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip06"></a>Tip</h3><p>Texture Atlas packing is a Unity Pro feature<a id="id161" class="indexterm"></a> that will not be covered in this book. You can read more about it at <a class="ulink" href="http://docs.Unity3D.com/Documentation/Manual/SpritePacker.html" target="_blank">http://docs.Unity3D.com/Documentation/Manual/SpritePacker.html</a>.</p><p>If you don't have access to Unity Pro, there are a few texture packing tools out in the wild that prepack the assets for you (such as Nvidia's texture asset tools available at <a class="ulink" href="https://developer.nvidia.com/legacy-texture-tools" target="_blank">https://developer.nvidia.com/legacy-texture-tools</a>). Once there, Unity will automatically split them up for you; more on this later.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl3sec19"></a>Pixels to units</h4></div></div></div><p>This option is just a<a id="id162" class="indexterm"></a> setting that allows you to scale the image asset at import time, the default being 100 pixels per unit (or scaled up to 100 percent).</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note12"></a>Note</h3><p>This setting is important because it sets the relative scale of the assets you will import to your defined game units. This is just as important in 2D as it is in 3D. Your base game unit guides you on how all the assets will scale appropriately to each other, and more importantly, to the camera.</p><p>You can manage the game scale through this setting, or you can handle this scale through the original texture's sizes; the choice is up to you.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl3sec20"></a>The Sprite Editor button</h4></div></div></div><p>When <span class="strong"><strong>Sprite Mode</strong></span> is <a id="id163" class="indexterm"></a>set to <span class="strong"><strong>Multiple</strong></span>, the button to open the editor (<span class="inlinemediaobject"><img src="/graphics/9781849697347/graphics/7347OT_02_18.jpg" /></span>) becomes available.</p><p>Once you click<a id="id164" class="indexterm"></a> on the <span class="strong"><strong>Sprite Editor</strong></span> button, you will be<a id="id165" class="indexterm"></a> presented with the new <span class="strong"><strong>Sprite Editor</strong></span> main window.</p><p>All the other settings under the sprite <span class="strong"><strong>Inspector</strong></span> are pretty much the same with the exception of the texture compression setting.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note13"></a>Note</h3><p>When the sprite texture type is selected, you will get warnings if your image is not using a power of 2 size texture; this means that the height must be a multiple of 2 against the image's width, so W2/H4 is a power of 2 whereas W3/H4 is not. This is not critical as Unity will still make best efforts to compress the image; it just won't be as small as it should be. Unity will warn you about this with the following information box in the inspector:</p><div class="mediaobject"><img src="/graphics/9781849697347/graphics/7347OT_02_19.jpg" /></div></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip07"></a>Tip</h3><p>If your sprites look blocky or blurry on screen, be sure to check your sprite texture's import compression level. If the texture's resolution is higher than your import setting, then<a id="id166" class="indexterm"></a> Unity will do its best to compress the texture (scale it down), which can cause some weird onscreen<a id="id167" class="indexterm"></a> artifacts (especially if the difference is large, for example, a 4KB texture compressed down to 1KB). Make sure this is what you want or resize your original textures.</p></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec22"></a>Sprite Editor</h3></div></div></div><p>Sprite Editor, as the name<a id="id168" class="indexterm"></a> suggests is Unity's new tool to allow the carving up of spritesheets and texture atlases to identify individual sprites for use in<a id="id169" class="indexterm"></a> your game; also, it comes with several simple yet powerful features to control how the individual sprites will be imported, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849697347/graphics/7347OT_02_20.jpg" /></div><p>In the editor, you have two<a id="id170" class="indexterm"></a> sets of functions: the sprite splitter <a id="id171" class="indexterm"></a>and the view controls.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl3sec21"></a>Sprite splitter (slicer)</h4></div></div></div><p>The splitter or slicer<a id="id172" class="indexterm"></a> has two modes, automatic and grid (manual), in which it can carve up your spritesheet to create individual images for use in your game.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="ch02lvl4sec02"></a>Automatic</h5></div></div></div><p>Unity has put some very smart logic into its automatic<a id="id173" class="indexterm"></a> sprite carving system that can quite easily identify regions in your spritesheet where your images are packed. Plus, you have some advanced options to guide the system to make it fit for your game, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849697347/graphics/7347OT_02_21.jpg" /></div><p>The carving is based on the alpha regions within the texture, so bear this in mind. The following are the advanced<a id="id174" class="indexterm"></a> options provided by Unity:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p><span class="strong"><strong>Minimum size</strong></span>: Setting<a id="id175" class="indexterm"></a> the minimum size of the sprite defines the smallest pixel-grouping size on the image to select a single sprite. Setting this to a larger value constrains the selection logic to look for larger groups of sprites. It can also be viewed as the minimum space between the sprites on the sheet.</p></li><li style="list-style-type: disc"><p><span class="strong"><strong>Pivot</strong></span>: As the name<a id="id176" class="indexterm"></a> suggests, it allows you<a id="id177" class="indexterm"></a> to set the default pivot position at import time for the<a id="id178" class="indexterm"></a> sprites that it creates by default.</p></li><li style="list-style-type: disc"><p><span class="strong"><strong>Method</strong></span>: This option<a id="id179" class="indexterm"></a> has the following options to guide the selection logic to identify sprites:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p><span class="strong"><strong>Delete existing</strong></span>: Selecting this option will clear all the existing sprite ranges from the sheet.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note14"></a>Note</h3><p>This is the default option and Sprite Editor will not select any sprites until you select one of the sprite identification methods.</p></div></li><li style="list-style-type: disc"><p><span class="strong"><strong>Smart</strong></span>: This option will try to identify common patterns in the sprites from the sheet meant for selection. In some cases, it is able to identify groups that make up a single sprite together.</p></li><li style="list-style-type: disc"><p><span class="strong"><strong>Safe</strong></span>: This option focuses on tighter regions around each element it identifies<a id="id180" class="indexterm"></a> on the spritesheet, thereby making the edges as close as possible.</p></li></ul></div></li></ul></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="ch02lvl4sec03"></a>Grid (manual)</h5></div></div></div><p>The grid option is a lot<a id="id181" class="indexterm"></a> simpler with no complex logic. It simply allows you to define (as the name suggests) a grid over the spritesheet with defined cell sizes by setting the height and width options, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849697347/graphics/7347OT_02_22.jpg" /></div><p>Unity will then<a id="id182" class="indexterm"></a> automatically identify sprites based on that grid. Note that it will also ignore any blank areas on<a id="id183" class="indexterm"></a> the spritesheet by default, so keep this in mind if you need them.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip08"></a>Tip</h3><p>If you do not see a selection box around your sprites, then check your height and width settings against the original size of the spritesheet. Normally, you will not see anything if the sizes are too big.</p><p>My advice is to start with a smaller size where the grid shows up and alter the width and height settings upwards until you are happy with the selection on the entire sheet, especially if you are unsure of the dimensions of each sprite.</p></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl3sec22"></a>View controls</h4></div></div></div><p>The view controls<a id="id184" class="indexterm"></a> simply change or affect what you are viewing in <span class="strong"><strong>Sprite Editor</strong></span>, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849697347/graphics/7347OT_02_23.jpg" /></div><p>The following are the view controls provided by Unity:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p><span class="strong"><strong>Revert</strong></span>: This control simply resets the texture back to the original settings the editor had when<a id="id185" class="indexterm"></a> it was opened or when the apply option was used to save. Note that this is not simply an undo button as it completely resets the editor back to the beginning.</p></li><li><p><span class="strong"><strong>Apply</strong></span>: As the name<a id="id186" class="indexterm"></a> suggests, this applies any changes you have made in the editor. If you close the editor and keep the changes pending, you will be prompted to apply<a id="id187" class="indexterm"></a> the changes. Note that once you<a id="id188" class="indexterm"></a> apply your changes, these <span class="emphasis"><em>cannot</em></span> be undone, so when you click on apply, be sure that the changes refer to what you actually want.</p></li><li><p><span class="strong"><strong>Alpha/Color</strong></span>: This control simply changes the view between fully textured sprites or just the<a id="id189" class="indexterm"></a> alpha regions. It is useful if you want to see what the automatic splitting options are using to identify individual sprites.</p></li><li><p><span class="strong"><strong>Zoom slider</strong></span>: This<a id="id190" class="indexterm"></a> control is used to zoom in and zoom out. Need I say more?</p></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl3sec23"></a>Sprite region manipulation</h4></div></div></div><p>Once you have your<a id="id191" class="indexterm"></a> individual regions identified on the spritesheet, you can still further change the import <a id="id192" class="indexterm"></a>settings for each sprite as if they were imported individually; this is shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849697347/graphics/7347OT_02_24.jpg" /><div class="caption"><p>The sprite editor zoomed in on a single sprite from the spritesheet shown earlier</p></div></div><p>In the preceding screenshot where a single sprite is selected, you can clearly alter the name, the position of the spritesheet the sprite is picked from, its width and height, and also the pivot point<a id="id193" class="indexterm"></a> using the sprite selection inspector.</p><p>Additionally, you can use the selection box surrounding the sprite to alter the settings graphically using the hook points<a id="id194" class="indexterm"></a> in each corner or by dragging the pivot<a id="id195" class="indexterm"></a> circle to the center to alter the pivot's rotation point.</p><p>The settings you will change with a single sprite selected will only affect that sprite and not the rest that are on the spritesheet, so keep this in mind if the sprite you are editing is part of an animation.</p></div></div></div>