<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch12lvl1sec76"></a>Pushing code from Unity3D</h2></div></div><hr /></div><p>Unity <a id="id1287" class="indexterm"></a>provides several post-processing capabilities that allow <a id="id1288" class="indexterm"></a>you to both intercept and override and also add your own processing to just about anything in the Asset pipeline, anything from assets, scripts, and even the build process itself.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch12lvl2sec149"></a>Processing assets</h3></div></div></div><p>Post- or<a id="id1289" class="indexterm"></a> pre-processing of assets is very useful if you have<a id="id1290" class="indexterm"></a> custom-made or complex assets that need additional work once they are imported in Unity. In most cases, this is not needed as Unity does a lot of work for you by processing assets already.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note155"></a>Note</h3><p>If you do create any asset-processing scripts, remember they need to be placed in <code class="literal">Assets\Editor</code>.</p></div><p>We won't go into too much detail here as it is a very large area; this section is mainly to highlight its existence for those who were not aware. It is well-worth reading and checking up on.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip101"></a>Tip</h3><p>For more information about asset processing, refer to the Unity scripting reference guide at <a class="ulink" href="https://docs.unity3d.com/Documentation/ScriptReference/AssetPostprocessor.html" target="_blank">https://docs.unity3d.com/Documentation/ScriptReference/AssetPostprocessor.html</a>.</p><p>For a <a id="id1291" class="indexterm"></a>nice and clean example of an asset processor, see<a id="id1292" class="indexterm"></a> the post on using Unity to make a simple FBX model post <a id="id1293" class="indexterm"></a>processor at <a class="ulink" href="http://forum.unity3d.com/threads/53179-Simple-AssetPostprocessor-example" target="_blank">http://forum.unity3d.com/threads/53179-Simple-AssetPostprocessor-example</a>.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch12lvl2sec150"></a>Processing the build</h3></div></div></div><p>A more<a id="id1294" class="indexterm"></a> interesting area for study, especially if you are working <a id="id1295" class="indexterm"></a>with many platforms and find yourself doing repetitive tasks on each platform (or when you create your Unity assets and need to copy files to a platform to work), is the ability to extend Unity3D's own project build process.</p><p>Simply create a normal class script in <code class="literal">Asset\Editor</code>, and then create your build action function with the <code class="literal">[PostProcessBuild]</code> attribute and the build function signature, as follows:</p><div class="informalexample"><pre class="programlisting">using UnityEngine;
using UnityEditor;
using UnityEditor.Callbacks;

public class MyBuildPostprocessor
{
  [PostProcessBuild]
  public static void OnPostprocessBuild(BuildTarget target, string pathToBuiltProject) 
  { }
}</pre></div><p>The attributes<a id="id1296" class="indexterm"></a> from the build processing give you the following information:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p><code class="literal">BuildTarget</code>: This<a id="id1297" class="indexterm"></a> tells you which<a id="id1298" class="indexterm"></a> platform is currently being built using the <code class="literal">BuildTarget</code> enumeration.</p></li><li style="list-style-type: disc"><p><code class="literal">Path</code>: This <a id="id1299" class="indexterm"></a>gives you the output path where the <a id="id1300" class="indexterm"></a>build project is being written. This is useful if you want to copy additional files to it.</p></li></ul></div><p>You can also control the order in which this function is processed by adding parameters to the <code class="literal">[PostProcessBuild]</code> attribute as follows:</p><div class="informalexample"><pre class="programlisting">[PostProcessBuild<span class="strong"><strong>(10)]</strong></span>
public static void OnPostprocessBuild(BuildTarget target,
 string pathToBuiltProject) 
{ }</pre></div><p>The order number is a definition of priority: the higher the number, the lower the priority. By default, all scripts have a priority of 1. Scripts with lower numbers are executed first (even negative numbers such as -10 are allowed for ultimate priority), whereas scripts with higher numbers are executed last.</p><p>This is <a id="id1301" class="indexterm"></a>especially useful if you want to have several actions execute <a id="id1302" class="indexterm"></a>on a successful build and want to control the order in which they are executed.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note156"></a>Note</h3><p>You can also copy code files directly to the target solution, if you wish, from your Unity project. If you do not want those files to be read or executed by Unity, then simply suffix them with <code class="literal">.ignore</code>, and Unity will ignore them. Just remember to rename them when copying them to a platform.</p><p>For example:</p><div class="informalexample"><pre class="programlisting">MyPlatformClassFile.cs.ignore</pre></div></div><p>For more<a id="id1303" class="indexterm"></a> information about build processing, see the Unity scripting reference guide at <a class="ulink" href="http://docs.unity3d.com/412/Documentation/ScriptReference/PostProcessBuildAttribute.html" target="_blank">http://docs.unity3d.com/412/Documentation/ScriptReference/PostProcessBuildAttribute.html</a>.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip102"></a>Tip</h3><p>For a very full-featured example of highly customized build processing, check out<a id="id1304" class="indexterm"></a> the AdRotator Unity plugin, which is open source, on GitHub at:</p><p><a class="ulink" href="https://github.com/Adrotator/AdrotatorV2/tree/master/AdRotatorUnityPackage" target="_blank">https://github.com/Adrotator/AdrotatorV2/tree/master/AdRotatorUnityPackage</a></p><p>Just check in the <code class="literal">AdRotatorUnitySDK.Assets\Editor\AdRotatorPostBuild.cs</code> script.</p></div></div></div>