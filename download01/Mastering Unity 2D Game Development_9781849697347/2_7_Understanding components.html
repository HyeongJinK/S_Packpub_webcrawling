<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec12"></a>Understanding components</h2></div></div><hr /></div><p>Components in Unity are the building blocks of any game; almost everything you will use or apply will end up as a component on a <code class="literal">GameObject</code> inspector in a scene.</p><p>Until you build your<a id="id97" class="indexterm"></a> project, Unity doesn't know which components will be in the final game when your code actually runs (there is some magic applied in the editor). So, these components are not actually attached to your <code class="literal">GameObject</code> inspector but rather linked to them.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec14"></a>Accessing components using a shortcut</h3></div></div></div><p>In most Unity examples, you are shown how to access components through scripts <a id="id98" class="indexterm"></a>by using shortcuts to the <code class="literal">MonoBehaviour</code> class<a id="id99" class="indexterm"></a> that the game object inherits from. Accessing the components with the help of the following code:</p><div class="informalexample"><pre class="programlisting">this.renderer.collider.attachedRigidbody.angularDrag = 0.2f;</pre></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip04"></a>Tip</h3><p>If you need any help with this title or have any suggestions on it, join in on the support forum for the book at <a class="ulink" href="http://bit.ly/MasteringUnity2DForums" target="_blank">http://bit.ly/MasteringUnity2DForums</a>. The forum will also keep you updated on any announcements on the title, so check it often.</p></div><p>What Unity then does behind the scenes for you is that it converts the preceding code to the following code:</p><div class="informalexample"><pre class="programlisting">var renderer = this.GetComponent&lt;Renderer&gt;();
var collider = renderer.GetComponent&lt;Collider&gt;();
var rigidBody = collider.GetComponent&lt;Rigidbody&gt;();
rigidBody.angularDrag = 0.2f;</pre></div><p>The preceding code will also be the same as executing the following code:</p><div class="informalexample"><pre class="programlisting">GetComponent&lt;Renderer&gt;().GetComponent&lt;Collider&gt;().GetComponent&lt;Rigidbody&gt;().angularDrag = 0.2f;</pre></div><p>Now, while this is<a id="id100" class="indexterm"></a> functional and working, it isn't very performant or even a best practice as it creates variables and destroys them each time you use them; it also calls <code class="literal">GetComponent</code> for each component every time you access them. Using <code class="literal">GetComponent</code> in the <code class="literal">Start</code> or <code class="literal">Awake</code> methods isn't too bad as they are only called once when the script is loaded; however, if you do this on every frame in the <code class="literal">update</code> method, or even worse, in <code class="literal">FixedUpdate</code> methods, the problem multiplies; not to say you can't, you just need to be aware of the potential cost of doing so.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec15"></a>A better way to use components â€“ referencing</h3></div></div></div><p>Now, every programmer knows that they have to worry about garbage and exactly how much memory <a id="id101" class="indexterm"></a>they should allocate to objects for the entire lifetime of the game.</p><p>To improve things<a id="id102" class="indexterm"></a> based on the preceding shortcut code, we simply need to manually maintain the references to the components we want to change or affect on a particular object. So, instead of the preceding code, we could simply use the following:</p><div class="informalexample"><pre class="programlisting">Rigidbody myScriptRigidBody;
void Awake()
{ 
  var renderer = this.GetComponent&lt;Renderer&gt;();
  var collider = renderer.GetComponent&lt;Collider&gt;();
  myScriptRigidBody = collider.GetComponent&lt;Rigidbody&gt;();
}
void Update()
{
  myScriptRigidBody.angularDrag = 0.2f * Time.deltaTime;
}</pre></div><p>This way the <code class="literal">Rigidbody</code> object<a id="id103" class="indexterm"></a> that we want to affect can simply be discovered once (when the scripts awakes); then, we<a id="id104" class="indexterm"></a> can just<a id="id105" class="indexterm"></a> update the reference each time a value needs to be changed instead of discovering it every time.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec16"></a>An even better way</h3></div></div></div><p>Now, it has been<a id="id106" class="indexterm"></a> pointed out (by those who like to test such things) that even the <code class="literal">GetComponent</code> call isn't as fast as it should be because it uses C# generics to determine what type of component you are asking for (it's a two-step process: first, you determine the type and then get the component).</p><p>However, there is another overload of the <code class="literal">GetComponent</code> function<a id="id107" class="indexterm"></a> in which instead of using generics, you just need to supply the type (therefore removing the need to discover it). To do this, we will simply use the following code instead of the preceding <code class="literal">GetComponent&lt;&gt;</code>:</p><div class="informalexample"><pre class="programlisting">myScriptRigidBody =(Rigidbody2D)GetComponent(typeof(Rigidbody2D));</pre></div><p>The code is slightly longer and arguably only gives you a marginal increase, but if you need to use every byte of the processing power, it is worth keeping in mind.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note06"></a>Note</h3><p>If you are using the "<code class="literal">.</code>" shortcut to access components, I recommend that you change that practice now. In <a id="id108" class="indexterm"></a>
<span class="strong"><strong>Unity 5</strong></span>, they are being removed. There will, however, be a tool built in the project's importer to upgrade any scripts you have using the shortcuts that are available for you. This is not a huge task, just something to be aware of; act now if you can!</p></div></div></div>