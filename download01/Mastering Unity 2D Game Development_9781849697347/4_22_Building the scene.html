<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec25"></a>Building the scene</h2></div></div><hr /></div><p>So, now that <a id="id338" class="indexterm"></a>we have some nice assets to build with, we can start building our first town.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec40"></a>Adding the town background</h3></div></div></div><p>Returning to<a id="id339" class="indexterm"></a> the scene view, you should see the following<a id="id340" class="indexterm"></a>:</p><div class="mediaobject"><img src="/graphics/9781849697347/graphics/7347OT_04_11.jpg" /></div><p>If, however, we add our town background texture (<code class="literal">Assets\Sprites\Backgrounds\Background.png</code>) to the scene by dragging it to either the project hierarchy or the scene view, you will end up with the following:</p><p> </p><div class="mediaobject"><img src="/graphics/9781849697347/graphics/7347OT_04_12.jpg" /></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note29"></a>Note</h3><p>Be sure to set the background texture position appropriately once you add it to the scene; in this case, be sure the position of the transform is centered in the view at <span class="strong"><strong>X</strong></span> = <code class="literal">0</code>, <span class="strong"><strong>Y</strong></span> = <code class="literal">0</code>, <span class="strong"><strong>Z</strong></span> = <code class="literal">0</code>.</p><p>Unity does have a tendency to set the position relative to where your 3D view is at the time of adding itâ€”almost never where you want it.</p></div><p><span class="emphasis"><em>Our player has vanished!</em></span></p><p>The reason<a id="id341" class="indexterm"></a> for this is simple: Unity's sprite system has an<a id="id342" class="indexterm"></a> ordering system that comes in two parts.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec41"></a>Sprite sorting layers</h3></div></div></div><p>Sorting Layers (<span class="strong"><strong>Edit</strong></span> | <span class="strong"><strong>Project Settings </strong></span>| <span class="strong"><strong>Tags and Layers</strong></span>) are a collection of sprites, which are <a id="id343" class="indexterm"></a>bulked together to form a single group. Layers can be configured<a id="id344" class="indexterm"></a> to be drawn in a specific order on the screen as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849697347/graphics/7347OT_04_13.jpg" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec42"></a>Sprite sorting order</h3></div></div></div><p>Sprites<a id="id345" class="indexterm"></a> within an individual layer can be sorted, allowing you to control the <a id="id346" class="indexterm"></a>draw order of sprites within that layer. The sprite <span class="strong"><strong>Inspector</strong></span> is used for this purpose, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849697347/graphics/7347OT_04_14.jpg" /></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note30"></a>Note</h3><p>Sprite's <span class="strong"><strong>Sorting Layers</strong></span> should not be confused with Unity's rendering layers. Layers are a separate functionality used to control whether groups of game objects are drawn or managed together, whereas <span class="strong"><strong>Sorting Layers</strong></span> control the draw order of sprites in a scene.</p></div><p>So the reason our player is no longer seen is that it is behind the background. As they are both in the same layer and have the same sort order, they are simply drawn in the order that they are in the project hierarchy.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec43"></a>Updating the scene Sorting Layers</h3></div></div></div><p>To resolve<a id="id347" class="indexterm"></a> the update of the scene's Sorting Layers, let's <a id="id348" class="indexterm"></a>organize our sprite rendering by adding some sprite Sorting Layers. So, open up the <span class="strong"><strong>Tags and Layers</strong></span> inspector pane as shown in the following screenshot (by navigating to <span class="strong"><strong>Edit</strong></span> | <span class="strong"><strong>Project settings</strong></span> | <span class="strong"><strong>Tags and Layers</strong></span>), and add the following <span class="strong"><strong>Sorting Layers</strong></span>:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p><span class="strong"><strong>Background</strong></span></p></li><li style="list-style-type: disc"><p><span class="strong"><strong>Player</strong></span></p></li><li style="list-style-type: disc"><p><span class="strong"><strong>Foreground</strong></span></p></li><li style="list-style-type: disc"><p><span class="strong"><strong>GUI</strong></span></p></li></ul></div><div class="mediaobject"><img src="/graphics/9781849697347/graphics/7347OT_04_15.jpg" /></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip20"></a>Tip</h3><p>You <a id="id349" class="indexterm"></a>can reorder the layers underneath the default anytime<a id="id350" class="indexterm"></a> by selecting a row and dragging it up and down the sprite's Sorting Layers list.</p></div><p>With the layers set up, we can now configure our game objects accordingly. So, set the <span class="strong"><strong>Sorting Layer</strong></span> on our <span class="strong"><strong>background01</strong></span> sprite to the <span class="strong"><strong>Background</strong></span> layer as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849697347/graphics/7347OT_04_16.jpg" /></div><p>Then, update the <span class="strong"><strong>PlayerSprite</strong></span> GameObject to the <span class="strong"><strong>Player</strong></span> layer; our character will now be displayed in front of the background.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note31"></a>Note</h3><p>You<a id="id351" class="indexterm"></a> can just keep both objects on the same layer <a id="id352" class="indexterm"></a>and set the <span class="strong"><strong>Sort Order</strong></span> value appropriately, keeping the background to a <span class="strong"><strong>Sort Order</strong></span> value of <code class="literal">0</code> and the player to <code class="literal">10</code>, which will draw the player in front. However, as you add more items to the scene, things will get tricky quickly, so it is better to group them in a layer accordingly.</p></div><p>Now when we return to the scene, our hero is happily displayed but he is seen hovering in the middle of our village. So let's fix that next by simply changing its position transform in the <span class="strong"><strong>Inspector</strong></span> window.</p><p>Setting the <span class="strong"><strong>Y</strong></span> position transform to <code class="literal">-2</code> will place our hero nicely in the middle of the street (provided you have set the pivot for the player sprite to <code class="literal">bottom</code>), as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849697347/graphics/7347OT_04_17.jpg" /></div><p>Feel free<a id="id353" class="indexterm"></a> at this point to also add some more background <a id="id354" class="indexterm"></a>elements such as trees and buildings to fill out the scene using the environment assets we imported earlier.</p></div></div>