<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch09lvl1sec81"></a>Advanced animations</h2></div></div><hr /></div><p>Back in <a class="link" href="#" linkend="ch05">Chapter 5</a>, <span class="emphasis"><em>Freeze! Creating an Intergalactic Shooter</em></span>, we saw a small introduction to the Unity Animation system. In this section, we will do a quick recap, and explain a little bit more about the system. Finally, we will implement an Animation State Machine for animating our main character. In fact, this will involve more than one state on the machine, thus it gives us the possibility to learn how to build a more complex state machine than the one we built for explosions.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl2sec106"></a>A short recap of the animation system</h3></div></div></div><p>Once again, feel free to explore the official documentation by visiting the <span>following  link:</span><a class="ulink" href="https://docs.unity3d.com/Manual/AnimationSection.html" target="_blank">https://docs.unity3d.com/Manual/AnimationSection.html</a>. Alternatively, follow the official video tutorial here: <a class="ulink" href="https://unity3d.com/learn/tutorials/s/animation" target="_blank">https://unity3d.com/learn/tutorials/s/animation</a></p><p>When it comes to the animation system in Unity, we can talk about State Machines. Each animation is a node, and the character can change animation according to certain variables of the State Machine. The character can stay only on one state per time and can change animation only to another node that it is linked to it by transitions (there are a few exceptions to this rule when you use nested animation machines, but we won't see them in this book). A transition is represented as an arrow that goes from one node into another. It contains different properties on how to perform the transitions, but more importantly, when to execute the transitions and change state in the animation machine.</p><p>In order to explain the process, let's take, for instance, the example in <a class="link" href="#" linkend="ch05">Chapter 5</a>, <span class="emphasis"><em>Freeze! Creating an Intergalactic Shooter</em></span> (which is similar to the state machine built in the book <span class="emphasis"><em>Getting Started with Unity 5.x 2D Game Development</em></span>: <a class="ulink" href="https://www.packtpub.com/game-development/getting-started-unity-5x-2d-game-development" target="_blank"><span class="emphasis"><em>h</em></span>ttps://www.packtpub.com/game-development/getting-started-unity-5x-2d-game-development</a>). Despite the title, it's a book worth having a look at. In addition, you can also find an in-depth explanation of the animation system in <span class="emphasis"><em>Chapter 4, No Longer Alone – Sweet-Toothed Pandas Strike</em></span>:</p><div class="mediaobject"><img src="/graphics/9781786460271/graphics/81ff60b2-69e4-4357-913b-7c56427e7065.png" /></div><p>The <strong class="userinput"><code>Entry</code></strong> node is special because it indicates where the Animation State Machine starts and its transition fires immediately, leading the animation state machine into the <strong class="userinput"><code>Panda_Walk_Animation</code></strong> state. From this state, there are three transitions going outwards, in particular to <strong class="userinput"><code>Panda_Die_Animation</code></strong>, <strong class="userinput"><code>Panda_Hit_Animation</code></strong>, and <strong class="userinput"><code>Panda_Eat_Animation</code></strong>. These transitions are fired based on triggers that are defined on the left in the <strong class="userinput"><code>Paramete</code></strong><span class="strong"><strong>r</strong></span> panel. Hence, when the script that controls the panda sends a trigger, the animation state machine changes state. This three animation state has only one transition, and it is fired automatically once the animation is finished. In particular, <strong class="userinput"><code>Panda_Die_Animation</code></strong> and <strong class="userinput"><code>Panda_Eat_Animation</code></strong> lead to the <strong class="userinput"><code>Exit</code></strong> state, which is another special state determining the end of the State Machine. On the other hand, the <strong class="userinput"><code>Panda_Hit_Animation</code></strong> state has the transition that goes back to the <strong class="userinput"><code>Panda_Walk_Animation</code></strong> state, in which the animation will loop until another trigger from script arrives.</p><p>Now that you should have a better understanding how state and transitions work, it’s time to try on our own by building the animation for our character for this last project, which will be a… Panda!</p></div></div>