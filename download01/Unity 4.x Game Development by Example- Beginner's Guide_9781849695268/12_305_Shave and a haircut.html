<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch12lvl1sec302"></a>Shave and a haircut</h2></div></div><hr /></div><p>Thanks to the <code class="literal">GetPlayer</code> function, we can shorten up our monstro code quite nicely. Add the following lines to the <code class="literal">CheckForWin</code> function:</p><div class="informalexample"><pre class="programlisting">var theScript:Square = square.GetComponent.&lt;Square&gt;();
<span class="strong"><strong>//Check the squares in the same column:</strong></span>
<span class="strong"><strong>if(GetPlayer(theScript.x,0) == currentPlayer &amp;&amp; GetPlayer(theScript.x,1) == currentPlayer &amp;&amp; GetPlayer(theScript.x,2) == currentPlayer) return true;</strong></span>
<span class="strong"><strong>// Check the squares in the same row:</strong></span>
<span class="strong"><strong>if(GetPlayer(0,theScript.y) == currentPlayer &amp;&amp; GetPlayer(1,theScript.y) == currentPlayer &amp;&amp; GetPlayer(2,theScript.y) == currentPlayer) return true;</strong></span>
</pre></div><p>That reduces our column and row checks to two somewhat long, but still much more manageable lines.</p><p>Finally, we'll hard-code the values in two more statements to check the diagonals, because checking the diagonals in some pithy, clever loop is a more trouble than it's worth:</p><div class="informalexample"><pre class="programlisting">function CheckForWin(square:GameObject):boolean
{
     var theScript:Square = square.GetComponent.&lt;Square&gt;();

    //Check the squares in the same column:
    if(GetPlayer(theScript.x,0) == currentPlayer &amp;&amp; GetPlayer(theScript.x,1) == currentPlayer &amp;&amp; GetPlayer(theScript.x,2) == currentPlayer) return true;
    // Check the squares in the same row:
    if(GetPlayer(0,theScript.y) == currentPlayer &amp;&amp; GetPlayer(1,theScript.y) == currentPlayer &amp;&amp; GetPlayer(2,theScript.y) == currentPlayer) return true;
    <span class="strong"><strong>// Check the diagonals:</strong></span>
<span class="strong"><strong>    if(GetPlayer(0,0) == currentPlayer &amp;&amp; GetPlayer(1,1) == currentPlayer &amp;&amp; GetPlayer(2,2) == currentPlayer) return true;</strong></span>
<span class="strong"><strong>    if(GetPlayer(2,0) == currentPlayer &amp;&amp; GetPlayer(1,1) == currentPlayer &amp;&amp; GetPlayer(0,2) == currentPlayer) return true;</strong></span>
<span class="strong"><strong>    return false; // If we get this far without finding a win, return false to signify "no win".</strong></span>
    }</pre></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch12lvl2sec119"></a>
<span class="emphasis"><em>What just happened â€“ hunting for a win</em></span>
</h3></div></div></div><p>The <code class="literal">CheckForWin</code> function<a id="id940" class="indexterm"></a> accepts <code class="literal">square</code> as its only argument. That <code class="literal">square</code> happens to the be Square the current player just clicked on to place a piece. Hand-in-hand with the <code class="literal">GetPlayer</code> function,<a id="id941" class="indexterm"></a> <code class="literal">CheckForWin</code> first searches for the three Squares in the same column as the Square that was just clicked on.</p><p>If all of the pieces in those Squares are the same, that makes three-in-a-row. The <code class="literal">return</code> keyword spits the good news back to whichever part of the code called this function.</p><p>Failing that, the function<a id="id942" class="indexterm"></a> checks the three Squares in the same row as the Square that was just clicked on. If it finds three-in-a-row, it returns a value of <code class="literal">true</code> and the rest of the code is similarly skipped.</p><p>We repeat the same process to check the two diagonals, regardless of whether the recently-clicked Square was on a diagonal, because to do otherwise is a pain in the butt and requires extraneous code.</p><p>If no wins are found on the diagonals, the function returns a value of <code class="literal">false</code>.</p></div></div>