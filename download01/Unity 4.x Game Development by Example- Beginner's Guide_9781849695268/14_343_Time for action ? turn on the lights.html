<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch14lvl1sec338"></a>Time for action – turn on the lights</h2></div></div><hr /></div><p>This hospital texture is<a id="id1035" class="indexterm"></a> great and all, but our level looks like something straight out of a survival horror game. Every hospital that I've ever visited has been bright and shiny. Let's add some lights to the level to perk it up some.</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Click on the green Y-axis cone in the axis gizmo at the top-right of the <span class="strong"><strong>Scene</strong></span> view. This swings us around to a Top view, looking down on our <span class="strong"><strong>Scene</strong></span>.</p><div class="mediaobject"><img src="/graphics/9781849695268/graphics/5268OT_14_10.jpg" /></div></li><li><p>Pan and zoom<a id="id1036" class="indexterm"></a> the <span class="strong"><strong>Scene</strong></span> view to center the hallway model.</p><div class="mediaobject"><img src="/graphics/9781849695268/graphics/5268OT_14_11.jpg" /></div></li><li><p>In the menu, navigate to <span class="strong"><strong>GameObject</strong></span> | <span class="strong"><strong>Create Other</strong></span> | <span class="strong"><strong>Point Light</strong></span>.</p></li><li><p>Create a new Prefab and call it <code class="literal">hallwayLight</code>.</p></li><li><p>In the <span class="strong"><strong>Hierarchy</strong></span> panel, click to select <span class="strong"><strong>Point Light</strong></span>, and reset its <span class="strong"><strong>Transform</strong></span> in the <span class="strong"><strong>Inspector</strong></span> panel.</p></li><li><p>Drag <span class="strong"><strong>Point Light</strong></span> into the <code class="literal">hallwayLight</code> <span class="strong"><strong>Prefab</strong></span>.</p></li><li><p>Delete <span class="strong"><strong>Point Light</strong></span> from the <span class="strong"><strong>Hierarchy</strong></span> panel.</p></li><li><p>Drag an instance<a id="id1037" class="indexterm"></a> of the <code class="literal">hallwayLight</code> <span class="strong"><strong>Prefab</strong></span> from the <span class="strong"><strong>Project</strong></span> panel into your <span class="strong"><strong>Scene</strong></span>. Position it at the top-right corner of the hallway—around <code class="literal">x: 6.3 y:1 z:-19.7</code>.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip57"></a>Tip</h3><p>Note: We could have kept the <span class="strong"><strong>Point Light</strong></span> in the <span class="strong"><strong>Scene</strong></span>, as it's connected to the <code class="literal">hallwayLight</code> <span class="strong"><strong>Prefab</strong></span>, but I think it's easier to work with the project when <span class="strong"><strong>Prefab</strong></span> instances are named consistently.</p></div><div class="mediaobject"><img src="/graphics/9781849695268/graphics/5268OT_14_12.jpg" /></div></li><li><p>Create an empty <span class="strong"><strong>GameObject</strong></span> and call it <code class="literal">LightingRig</code>. This GameObject will hold all <a id="id1038" class="indexterm"></a>of our lights, so we can keep them organized. Move the lighting rig to <code class="literal">x:0 y:0 z:-25</code>.</p></li><li><p>In the <span class="strong"><strong>Hierarchy</strong></span> panel, click-and-drag the <code class="literal">hallwayLight</code> instance onto the <code class="literal">LightingRig</code> <span class="strong"><strong>GameObject</strong></span>. This makes the light a child of the rig, and we see that familiar gray arrow appear indicating a parent/child relationship.</p></li><li><p>Select and then duplicate the <code class="literal">hallwayLight</code> instance by pressing <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>D</em></span> (<span class="emphasis"><em>command</em></span> + <span class="emphasis"><em>D</em></span> on a Mac). Notice that the second light is also a child of the <code class="literal">LightingRig</code> <span class="strong"><strong>GameObject</strong></span>.</p><div class="mediaobject"><img src="/graphics/9781849695268/graphics/5268OT_14_13.jpg" /></div></li><li><p>Move the<a id="id1039" class="indexterm"></a> duplicated light to the top-middle of the <code class="literal">hallway</code> model.</p></li><li><p>Duplicate a third light, and move it to the top-left corner of the level.</p><div class="mediaobject"><img src="/graphics/9781849695268/graphics/5268OT_14_14.jpg" /></div></li><li><p>Hold down the <span class="emphasis"><em>Shift</em></span> key on your keyboard and click on the other two lights, until all three<a id="id1040" class="indexterm"></a> lights are selected at once. (It may be easier to shift-select the three lights in the <span class="strong"><strong>Hierarchy</strong></span> panel instead of the <span class="strong"><strong>Scene</strong></span> view.)</p></li><li><p>Duplicate the trio of lights, and move them down across the middle of the level. You may need to zoom out slightly to see the transformed gizmo handles.</p><div class="mediaobject"><img src="/graphics/9781849695268/graphics/5268OT_14_15.jpg" /></div></li><li><p>Duplicate the set of three<a id="id1041" class="indexterm"></a> lights again, and move them down to the bottom of the level. You should now have an array of nine lights.</p><div class="mediaobject"><img src="/graphics/9781849695268/graphics/5268OT_14_16.jpg" /></div></li><li><p>Click on a blank area in the <span class="strong"><strong>Scene</strong></span> view to deselect all the lights.</p></li><li><p>Click to select the<a id="id1042" class="indexterm"></a> light in the middle of the level and delete it. Now there's a light in each corner, and a light in the middle of each hallway section.</p><div class="mediaobject"><img src="/graphics/9781849695268/graphics/5268OT_14_17.jpg" /></div><p>Unity 3D supports "expensive" pixel lighting, and less "expensive" vertex lighting. Pixel lighting is<a id="id1043" class="indexterm"></a> more taxing on the player's computer, but it's more believable and it can pull off fancier tricks like cookies (think of the "bat symbol" from the Batman comics) and normal-mapping, which creates the illusion of detail on a flat polygon. In trying to preserve performance, Unity only lets us have two active pixel lights and drops the other lights down to vertex quality, which interpolates (makes a calculated guess) at the light levels on a triangle by calculating light levels at its vertices. The result is a really rough guess that can make your scene look like junk.</p><p>In order for our lighting rig to light the hallway well, we need to tell Unity that it can use all of our lights as pixel lights. This is sort of a lazy solution, but we can get away with it because our geometry is so simple. In more complex games, you may need to employ real ingenuity to present your scene in the best possible "light" with minimal performance trade-off.</p><p>Follow these steps to increase the number of pixel lights that Unity will allow:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>In the menu, navigate to <span class="strong"><strong>Edit</strong></span> | <span class="strong"><strong>Project Settings</strong></span> | <span class="strong"><strong>Quality</strong></span>. Unity allows us to<a id="id1044" class="indexterm"></a> create different quality profiles, and to apply those profiles to different scenarios: playing a game standalone, using the web player, deploying to mobile, and viewing a game in the editor. Note that all of these scenarios default to using the <span class="strong"><strong>Good</strong></span> profile.</p><div class="mediaobject"><img src="/graphics/9781849695268/graphics/5268OT_14_18.jpg" /></div></li><li><p>With the <span class="strong"><strong>Good</strong></span> profile selected, punch in <code class="literal">8</code> to increase the number of pixel lights Unity will allow.</p><div class="mediaobject"><img src="/graphics/9781849695268/graphics/5268OT_14_19.jpg" /></div><p>Once you make this <a id="id1045" class="indexterm"></a>change, you should see the light levels in your scene punch up. Now Unity is rendering proper lighting effects for every pixel on the screen based on all eight lights, rather than calculating only two lights and fudging the others.</p><p>The light!  It bliiiiiiiinds! Luckily, these eight lights are all instances of the same <span class="strong"><strong>Prefab</strong></span>, so by adjusting one of them, we'll affect the rest.</p></li></ol></div></li><li><p>Click to select the <code class="literal">hallwayLight</code> <span class="strong"><strong>Prefab</strong></span><a id="id1046" class="indexterm"></a> in the <span class="strong"><strong>Project</strong></span> panel.</p></li><li><p>In the <span class="strong"><strong>Inspector</strong></span> panel, change the intensity to <code class="literal">0.5</code> and the range to <code class="literal">20</code>.</p><p>That should mute<a id="id1047" class="indexterm"></a> all the lights to the point where they look like they belong in a hospital, and not like a hospital built on the surface of the sun.</p><div class="mediaobject"><img src="/graphics/9781849695268/graphics/5268OT_14_20.jpg" /></div></li></ol></div><p>When you rotate your <span class="strong"><strong>Scene</strong></span> view, you should see all eight lights nestled within the <code class="literal">hallway</code> model. If they ended up<a id="id1048" class="indexterm"></a> far above or below the level, just move the <code class="literal">LightingRig</code> <span class="strong"><strong>GameObject</strong></span><a id="id1049" class="indexterm"></a> around to move all eight lights as a single unit.</p><div class="mediaobject"><img src="/graphics/9781849695268/graphics/5268OT_14_21.jpg" /></div></div>