<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch08lvl1sec219"></a>Time for action â€“ keeping track of the bounces</h2></div></div><hr /></div><p>Let's introduce a few more variables<a id="id667" class="indexterm"></a> to record how many times the player has bounced the heart.</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Change the code to add these three variables at the top:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>var hitCount:GUIText;</strong></span>
<span class="strong"><strong>var numHits:int = 0;</strong></span>
<span class="strong"><strong>var hasLost:boolean = false;</strong></span>
var velocityWasStored = false;
var storedVelocity : Vector3;</pre></div></li><li><p>Save the script and return to Unity.</p></li><li><p>Select the <span class="strong"><strong>Heart</strong></span> in the <span class="strong"><strong>Hierarchy</strong></span> panel.</p></li><li><p>We've created a variable (bucket) to hold a GUIText object. Drag the <span class="strong"><strong>Bounce Count</strong></span> GUIText GameObject from the <span class="strong"><strong>Hierarchy</strong></span> panel into the <span class="strong"><strong>GUIText</strong></span> slot of the heart in<a id="id668" class="indexterm"></a> the <span class="strong"><strong>Inspector</strong></span> panel (or choose it from the pop-up menu). Now, whenever we refer to <code class="literal">hitCount</code> in our script, we'll be talking about our <span class="strong"><strong>GUIText</strong></span> GameObject.</p></li><li><p>Add the following code to the <a id="id669" class="indexterm"></a>
<code class="literal">Update</code> function:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>function Update() {</strong></span>
<span class="strong"><strong>  var str:String = "";</strong></span>

<span class="strong"><strong>  if(!hasLost){</strong></span>
<span class="strong"><strong>    str = numHits.ToString();</strong></span>
<span class="strong"><strong>  } else {</strong></span>
<span class="strong"><strong>    str = "Hits:" + numHits.ToString() + "\nYour best:" +</strong></span>
<span class="strong"><strong>       bestScore;</strong></span>
<span class="strong"><strong>      </strong></span>
<span class="strong"><strong>    if(bestScore &gt; lastBest) str += "\nNEW RECORD!";</strong></span>
<span class="strong"><strong>  }</strong></span>
<span class="strong"><strong>   </strong></span>
<span class="strong"><strong>  hitCount.text = str;</strong></span>
}</pre></div></li></ol></div><p>What this script will do is check the <code class="literal">hasLost</code> flag on every <code class="literal">Update</code>, and change the <code class="literal">hitCount</code> <span class="strong"><strong>GUIText </strong></span>to show either just the bounce count, or a big score recap at the end of the game that will look like this:</p><p>
<span class="strong"><strong>Hits: 32</strong></span>
</p><p>
<span class="strong"><strong>Your Best: 12</strong></span>
</p><p>
<span class="strong"><strong>NEW RECORD!</strong></span>
</p><p>Note that we don't have any logic yet to flip the <code class="literal">hasLost</code> flag, nor do we have any code to increment the <code class="literal">numHits</code> variable.<a id="id670" class="indexterm"></a> Let's <a id="id671" class="indexterm"></a>add those two things next.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip43"></a>Tip</h3><p>
<span class="strong"><strong>\n</strong></span>
</p><p>This code creates a line break. Whenever you see it, you can think of it as if someone has hit the <span class="emphasis"><em>Enter</em></span> key to space out some text. Be aware that it only works inside Strings.</p></div></div>