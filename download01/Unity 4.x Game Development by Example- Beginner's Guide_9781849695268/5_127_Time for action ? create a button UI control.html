<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch05lvl1sec131"></a>Time for action – create a button UI control</h2></div></div><hr /></div><p>We're going to add a button to the title<a id="id392" class="indexterm"></a> screen through code, using Unity's built-in <code class="literal">OnGUI</code> function:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Double-click on the <span class="strong"><strong>TitleGUI</strong></span> script, or switch over to the script editor if it's already open.</p></li><li><p>We won't need the <code class="literal">Update</code> function any longer. Instead, we'll be using the built-in <code class="literal">OnGUI</code> function. Change the word <code class="literal">Update</code> to <code class="literal">OnGUI</code>:</p><div class="informalexample"><pre class="programlisting">var customSkin:GUISkin;
function <span class="strong"><strong>OnGUI</strong></span>() {
}</pre></div></li><li><p>Add a chunk of code that creates a button inside the <code class="literal">OnGUI</code> function:</p><div class="informalexample"><pre class="programlisting">var customSkin:GUISkin;
function OnGUI() {
<span class="strong"><strong>  if(GUI.Button(Rect(0,0,100,50),"Play Game"))</strong></span>
<span class="strong"><strong>  {</strong></span>
<span class="strong"><strong>    print("You clicked me!");</strong></span>
<span class="strong"><strong>  }</strong></span>
}</pre></div></li><li><p>Save the script and press the Unity <span class="strong"><strong>Play</strong></span> button to test your game.</p></li></ol></div><p>A button labeled <span class="strong"><strong>Play Game</strong></span> appears at the top-left of the screen. When you click on it, the message <span class="strong"><strong>You clicked me!</strong></span> appears in the status bar at the bottom of the Unity interface. It will also appear in the <span class="strong"><strong>Console</strong></span> window if you have it open.</p><div class="mediaobject"><img src="/graphics/9781849695268/graphics/5268OT_05_19.jpg" /></div><p>Great! With a very tiny bit of code, we have a working, labeled button up on the screen! It lights up when you roll over it. It goes back to normal when you roll off. Its appearance changes when you press and hold the mouse button on it. The text label is automatically centered inside the button. Somebody spent a bunch of time behind the scenes programming this <a id="id393" class="indexterm"></a>GUI stuff to save us time. Thanks, Unity Team!</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip17"></a>Tip</h3><p>
<span class="strong"><strong>Where it all begins</strong></span>
</p><p>This <span class="strong"><strong>Play Game</strong></span> button is a crucial element of our flip n' match memory game, and every game you'll ever build with Unity, or any other game-building tool for that matter! It's a part of the understood language of the video game medium that games start in a paused state on a title screen and the player takes an action to start the game. In a coin-operated arcade setup, that action is inserting a quarter. In modern console gaming, that action is pressing a button on the controller. In a web game like ours, that action is clicking on a button that says <span class="strong"><strong>Start</strong></span>, <span class="strong"><strong>Play</strong></span>, or <span class="strong"><strong>Play Game</strong></span>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec57"></a>
<span class="emphasis"><em>What just happened?</em></span>
</h3></div></div></div><p>If you've never programmed user interfaces before, this should all seem peachy. But, if you have done some coding, you might be looking at the lines we just wrote with a completely confused look on your face. This may not be like any interface programming that you've ever seen before.</p><p>Unity uses what's called an <span class="emphasis"><em>immediate mode GUI</em></span>. The term is borrowed from graphics programming, and it requires you to program a little differently than you may be used to. Let's break it down line by line.</p><div class="informalexample"><pre class="programlisting">if(GUI.Button(Rect(0,0,100,50),"Play Game"))</pre></div><p>Like the <code class="literal">Update</code> function, the <code class="literal">OnGUI</code> function is called repeatedly as your game runs. This line is called twice per frame: once to create the button, and once to see if the button has been clicked. This code is stateless. On every frame, your entire interface is recreated from scratch based on the code in your <code class="literal">OnGUI</code> function.</p><p>So, if you imagine <a id="id394" class="indexterm"></a> this code as a split second in time, your <code class="literal">if</code> statement asks whether the button that you're creating in this instant is being clicked on. It's kind of a strange thing to get used to, but it makes sense the more you use it. The <code class="literal">if</code> statement in this case is like saying, "if the button was clicked". Without that <code class="literal">if</code>, the button won't respond to input.</p><p>The rest of the line is a bit easier to understand. The <code class="literal">GUI.Button</code> method needs two arguments: a rectangle defining the top-left corner and size of the button, and a label for the button.</p><div class="informalexample"><pre class="programlisting">if(GUI.Button(Rect(0,0,100,50),"Play Game"))</pre></div><p>
<code class="literal">Rect</code> takes four inputs: x position, y position, width, and height. The origin of the two-dimensional screen is at the top-left, so a value of 0,0 places the button at the top-left of the screen. (Note that this is in opposition to the bottom-left origin we just learned about when tracking mouse movement. This is the THIRD co-ordinate system we've encountered so far!) The width and height values of <code class="literal">100</code> and <code class="literal">50</code> make the button 100 pixels wide and 50 pixels tall.</p><div class="informalexample"><pre class="programlisting">print("You clicked me!");</pre></div><p>This line is straightforward. When the button is clicked, the message we typed is printed to the status bar and the Console window's log. Remember that the status bar is the skinny 20 pixel high gray bar at the bottom of the Unity interface. Let's check it out one more time with a big fat arrow to help us out:</p><div class="mediaobject"><img src="/graphics/9781849695268/graphics/5268OT_05_20.jpg" /></div><p>
<code class="literal">print</code> is another <a id="id395" class="indexterm"></a>way to throw messages to the console window or the status bar. I prefer it to <code class="literal">Debug.Log()</code> because it's faster and easier to type, but be aware that it won't work in all situations. If you ever find yourself tearing your hair out because your <code class="literal">print()</code> statements aren't working, try switching back to <code class="literal">Debug.Log()</code>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec58"></a>Have a go hero – no sense sitting around on your button</h3></div></div></div><p>Why stop there? To fully appreciate what this code is doing, try this:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Change the button label, the button position, and the button width and height.</p></li><li style="list-style-type: disc"><p>Change the message that gets printed when you click on the button.</p></li><li style="list-style-type: disc"><p>Try taking the button creation code out of the <code class="literal">if</code> statement. What happens?</p></li></ul></div><p>Fiddling with this code is a sure-fire way to better understand it.</p></div></div>