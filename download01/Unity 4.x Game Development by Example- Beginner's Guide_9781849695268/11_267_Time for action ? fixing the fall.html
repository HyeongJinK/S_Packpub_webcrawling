<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch11lvl1sec265"></a>Time for action – fixing the fall</h2></div></div><hr /></div><p>In The Break-Up, our falling objects were larger, and they fell through a smaller vertical range. Now that there's no ground to hit and the sky's the limit, we should tweak a few lines of <a id="id847" class="indexterm"></a>code in our <span class="strong"><strong>EnemyShip</strong></span> Script (formerly the <span class="strong"><strong>FallingObject</strong></span> Script). Double-click on the <span class="strong"><strong>EnemyShip</strong></span> Script and roll up your sleeves:</p><p>Change:</p><div class="informalexample"><pre class="programlisting">if(transform.position.y &lt; 0)</pre></div><p>to:</p><div class="informalexample"><pre class="programlisting">if(transform.position.y &lt; -4)</pre></div><p>This allows the enemy ship to reposition itself when it moves off the bottom edge of the screen, instead of when it hits the non-existent ground plane at <code class="literal">y:0</code>.</p><p>Change:</p><div class="informalexample"><pre class="programlisting">transform.position.y = 50;</pre></div><p>to:</p><div class="informalexample"><pre class="programlisting">transform.position.y = 71;</pre></div><p>When the <span class="strong"><strong>EnemyShip</strong></span> is repositioned, cranking up its y value will start it just above the top edge of the screen.</p><p>Change:</p><div class="informalexample"><pre class="programlisting">transform.position.x = Random.Range(0, 60);</pre></div><p>to:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>transform.position.x = Random.Range(-11, 68);</strong></span>
</pre></div><p>This gives the <span class="strong"><strong>EnemyShip</strong></span> a corrected horizontal range at which to spawn—somewhere between <code class="literal">-11</code> and <code class="literal">68</code> along the X-axis. You can either delete or comment out these two lines (remember, to turn a line into a comment, you just add a double slash <code class="literal">//</code> to the beginning of the line):</p><div class="informalexample"><pre class="programlisting"> // audio.PlayOneShot(audioClips[Random.Range(0,audioClips.length)]);
  // Instantiate(prefab, transform.position, Quaternion.identity);</pre></div><p>We're <a id="id848" class="indexterm"></a>commenting out/deleting these lines because we don't really want the <span class="strong"><strong>EnemyShip</strong></span> to explode and make a noise when it moves off the bottom of the screen. In space, no one can hear you get all blowed up.</p><p>Change the value in this line:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>transform.position.z = 0;</strong></span>
</pre></div><p>Just below the <code class="literal">position.z</code> line, add this line:</p><div class="informalexample"><pre class="programlisting">transform.position.z = 0;
<span class="strong"><strong>rigidbody.velocity = Vector3.zero;</strong></span>
</pre></div><p>Here's how the complete <code class="literal">Update</code> function should look:</p><div class="informalexample"><pre class="programlisting">function Update(){
    transform.position.y -= speed * Time.deltaTime;
    if(transform.position.y &lt; -4) {
      //audio.PlayOneShot(audioClips[Random.Range(0,audioClips.length)]);
        //Instantiate(prefab, transform.position, Quaternion.identity);
        transform.position.y = 71;
        transform.position.x = Random.Range(-11,68);
        transform.position.z = 0;
        rigidbody.velocity = Vector3.zero;
      }
}</pre></div><p>What's with that <code class="literal">rigidbody.velocity</code> reset? Well, when GameObjects smack into each other, it's possible for them to get knocked out of orbit, or for the physics engine to apply a velocity to the GameObject's <span class="strong"><strong>rigidbody</strong></span>. We'll just use those two lines to flatten everything to zero when the ship starts a new descent down the screen.</p><p>The <span class="strong"><strong>EnemyShip</strong></span> looks like a pretty cool buzzsaw thing. In a single line, we can throw a rotation on there that'll make the ship spin and look all scary-cool.</p><p>Add this line within the <code class="literal">Update</code> function:</p><div class="informalexample"><pre class="programlisting">function Update () {
    transform.position.y -= speed * Time.deltaTime;
<span class="strong"><strong>    transform.Rotate(0,0,Time.deltaTime * -500); // buzzsaw!!</strong></span>
</pre></div><p>You'll remember from earlier chapters that multiplying by <code class="literal">Time.deltaTime</code> sets things to the tempo of time, rather than updates. This way, an enemy ship takes two seconds to travel across the screen, regardless of how fast or slow the player's computer is. It's hardly fair to give players with slow computers a twitch advantage.</p><p>Save<a id="id849" class="indexterm"></a> the <span class="strong"><strong>EnemyShip</strong></span> Script and play your game. The angry-looking enemy ship bent on universal annihilation or some such now makes a complete trip from the top to the bottom of the screen. It respawns properly at the top, at some random X position. And it spins just like a sharp, pointy bad guy should.</p></div>