<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch12lvl1sec307"></a>Nice moves</h2></div></div><hr /></div><p>It seems simple enough to create an <code class="literal">int</code> variable to keep track of the number of moves that have been made, which we'll increment every time a player places a piece. If we're up to the ninth move <a id="id948" class="indexterm"></a>with no winner, that means all of the squares have been filled and we've reached a stalemate.</p><p>At the top of the script, declare a <code class="literal">moves</code> variable:</p><div class="informalexample"><pre class="programlisting">var gameIsOver:boolean;
<span class="strong"><strong>var moves:int;</strong></span>
</pre></div><p>Just above the <code class="literal">Instantiate</code> command in the <code class="literal">ClickSquare</code> function, increment <code class="literal">moves</code>:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>moves ++;</strong></span>
Instantiate(piece, square.transform.position, Quaternion.identity);</pre></div><p>Tack on an <code class="literal">else</code> to the <a id="id949" class="indexterm"></a>
<code class="literal">CheckForWin</code> condition check that ends the game if we've reached 9 moves with no winner:</p><div class="informalexample"><pre class="programlisting">if(CheckForWin(square))
{
  gameIsOver = true;
  ShowWinnerPrompt();
  return;
<span class="strong"><strong>} else if(moves &gt;= 9) {</strong></span>
<span class="strong"><strong>  gameIsOver = true;</strong></span>
<span class="strong"><strong>  ShowStalematePrompt();</strong></span>
<span class="strong"><strong>  return;</strong></span>
<span class="strong"><strong>}</strong></span>
</pre></div><p>Why are we checking if <code class="literal">moves</code> is equal to or greater than 9? Isn't that impossible? Yes it is, but I've adopted the habit of being abundantly confident in my condition checks to cover possible <span class="emphasis"><em>and</em></span> impossible scenarios. It's that extra layer of security that makes programmers so cuddly.</p><p>Since we call it, <a id="id950" class="indexterm"></a>we need to make sure the <code class="literal">ShowStalematePrompt</code> function<a id="id951" class="indexterm"></a> exists. Drop this into the <code class="literal">GameLogic</code> script:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>function ShowStalematePrompt()</strong></span>
<span class="strong"><strong>{</strong></span>
<span class="strong"><strong>  prompt.text = "Stalemate!  Neither player wins.";</strong></span>

<span class="strong"><strong>  yield WaitForSeconds(3);</strong></span>
<span class="strong"><strong>  Application.LoadLevel(0);</strong></span>
<span class="strong"><strong>}</strong></span>
</pre></div></div>