<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch08lvl1sec223"></a>C# Addendum</h2></div></div><hr /></div><p>When converting this script to C#, there was only one small change<a id="id678" class="indexterm"></a> to the <span class="strong"><strong>MouseFollow</strong></span> script, which you can make quite easily.</p><p>There are no surprises whatsoever with the <span class="strong"><strong>HeartBounce</strong></span> script. Here's how the script looks translated to C#:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>using UnityEngine;</strong></span>
<span class="strong"><strong>using System.Collections;</strong></span>

<span class="strong"><strong>public class HeartBounceCSharp : MonoBehaviour {</strong></span>

<span class="strong"><strong>  public GUIText hitCount;</strong></span>
<span class="strong"><strong>  private int numHits = 0;</strong></span>
<span class="strong"><strong>  private bool hasLost = false;</strong></span>
<span class="strong"><strong>  private int bestScore = 0;</strong></span>
<span class="strong"><strong>  private int lastBest = 0;</strong></span>
<span class="strong"><strong>  private bool velocityWasStored = false;</strong></span>
<span class="strong"><strong>  private Vector3 storedVelocity;</strong></span>
<span class="strong"><strong>  </strong></span>
<span class="strong"><strong>  private void OnCollisionEnter(Collision col)</strong></span>
<span class="strong"><strong>  {</strong></span>
<span class="strong"><strong>    if(col.gameObjectCompareTag("tray"))</strong></span>
<span class="strong"><strong>      {</strong></span>
<span class="strong"><strong>         Debug.Log("yes! hit tray!");</strong></span>
<span class="strong"><strong>         if (!velocityWasStored)</strong></span>
<span class="strong"><strong>        {</strong></span>
<span class="strong"><strong>            storedVelocity = rigidbody.velocity;</strong></span>
<span class="strong"><strong>            velocityWasStored = true;</strong></span>
<span class="strong"><strong>        }</strong></span>
<span class="strong"><strong>        </strong></span>
<span class="strong"><strong>        if(rigidbody.velocity.y &gt; 1)</strong></span>
<span class="strong"><strong>        {</strong></span>
<span class="strong"><strong>            numHits ++;</strong></span>
<span class="strong"><strong>        }</strong></span>
<span class="strong"><strong>        </strong></span>
<span class="strong"><strong>        rigidbody.velocity = new Vector3(rigidbody.velocity.x,                    </strong></span>
<span class="strong"><strong>        storedVelocity.y, rigidbody.velocity.z); </strong></span>
<span class="strong"><strong>      }</strong></span>
<span class="strong"><strong>  }</strong></span>
<span class="strong"><strong>  </strong></span>
<span class="strong"><strong>  </strong></span>
<span class="strong"><strong>  void Update ()</strong></span>
<span class="strong"><strong>  {</strong></span>
<span class="strong"><strong>    string str = "";</strong></span>
<span class="strong"><strong>    </strong></span>
<span class="strong"><strong>    if(!hasLost)</strong></span>
<span class="strong"><strong>    {</strong></span>
<span class="strong"><strong>      str = numHits.ToString();</strong></span>
<span class="strong"><strong>    } else {</strong></span>
<span class="strong"><strong>      str = "Hits:" + numHits.ToString() + "\nYour best:" + bestScore;</strong></span>
<span class="strong"><strong>    </strong></span>
<span class="strong"><strong>      if(bestScore &gt; lastBest) str += "\nNEW RECORD!";</strong></span>
<span class="strong"><strong>    }</strong></span>
<span class="strong"><strong>    </strong></span>
<span class="strong"><strong>    hitCount.text = str;</strong></span>
<span class="strong"><strong>    </strong></span>
<span class="strong"><strong>    if(transform.position.y &lt; -3)</strong></span>
<span class="strong"><strong>    {</strong></span>
<span class="strong"><strong>      if(!hasLost)</strong></span>
<span class="strong"><strong>      {</strong></span>
<span class="strong"><strong>        hasLost = true;</strong></span>
<span class="strong"><strong>        lastBest = bestScore;</strong></span>
<span class="strong"><strong>        if(numHits &gt; bestScore)</strong></span>
<span class="strong"><strong>        {</strong></span>
<span class="strong"><strong>          bestScore = numHits;</strong></span>
<span class="strong"><strong>        }</strong></span>
<span class="strong"><strong>      }</strong></span>
<span class="strong"><strong>    }</strong></span>
<span class="strong"><strong>  }</strong></span>
<span class="strong"><strong>  </strong></span>
<span class="strong"><strong>  void OnGUI()</strong></span>
<span class="strong"><strong>  {</strong></span>
<span class="strong"><strong>    if(hasLost)</strong></span>
<span class="strong"><strong>    {</strong></span>
<span class="strong"><strong>      float buttonW = 100; // button width</strong></span>
<span class="strong"><strong>      float buttonH = 50; // button height</strong></span>
<span class="strong"><strong>    </strong></span>
<span class="strong"><strong>      float halfScreenW = Screen.width/2; // half of the Screen width</strong></span>
<span class="strong"><strong>      float halfButtonW = buttonW/2; // half of the button width</strong></span>
<span class="strong"><strong>    </strong></span>
<span class="strong"><strong>      if(GUI.Button(new Rect(halfScreenW-halfButtonW, Screen.height*.8f, buttonW, buttonH), "Play Again"))</strong></span>
<span class="strong"><strong>      {</strong></span>
<span class="strong"><strong>        numHits = 0;</strong></span>
<span class="strong"><strong>        hasLost = false;</strong></span>
<span class="strong"><strong>        velocityWasStored = false;</strong></span>
<span class="strong"><strong>        transform.position = new Vector3(0.5f,2,-0.05f);</strong></span>
<span class="strong"><strong>        rigidbody.velocity = new Vector3(0,0,0);</strong></span>
<span class="strong"><strong>      }</strong></span>
<span class="strong"><strong>    }</strong></span>
<span class="strong"><strong>  }</strong></span>
<span class="strong"><strong>}   </strong></span>
</pre></div></div>