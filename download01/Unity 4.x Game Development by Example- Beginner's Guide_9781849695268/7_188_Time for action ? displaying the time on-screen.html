<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch07lvl1sec190"></a>Time for action – displaying the time on-screen</h2></div></div><hr /></div><p>We know from the <code class="literal">Debug</code> statements that the clock is working, so all we need to do is stick the <code class="literal">timeRemaining</code> value into our <span class="strong"><strong>GUIText</strong></span> to see it on the screen. But, it won't look very clock-like unless we <a id="id554" class="indexterm"></a>perform a tiny bit of math on that<a id="id555" class="indexterm"></a> value to split it into minutes and seconds, so that five seconds displays as 0:05, or 119 seconds displays as 1:59.</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Call the <code class="literal">ShowTime()</code> function from within the <code class="literal">DoCountdown()</code> function<a id="id556" class="indexterm"></a> (you can delete or comment the <code class="literal">Debug.Log()</code> statement):</p><div class="informalexample"><pre class="programlisting">function DoCountdown()
{
  timeRemaining = startTime - Time.time;
  // (other lines omitted for clarity)
<span class="strong"><strong>  ShowTime();</strong></span>
  //Debug.Log("time remaining = " + timeRemaining);
}</pre></div></li><li><p>Create some variables to store the minutes and seconds values in the <code class="literal">ShowTime()</code> function, along with a variable to store the <code class="literal">string</code> (text) version of the time:</p><div class="informalexample"><pre class="programlisting">function ShowTime() {
<span class="strong"><strong>   var minutes : int;</strong></span>
<span class="strong"><strong>   var seconds : int;</strong></span>
<span class="strong"><strong>   var timeStr : String;</strong></span>
}</pre></div></li><li><p>Just below that, divide the <code class="literal">timeRemaining</code> by <code class="literal">60</code> to get the number of minutes that have elapsed:</p><div class="informalexample"><pre class="programlisting">   var timeStr : String;
<span class="strong"><strong>   minutes = timeRemaining/60;</strong></span>
</pre></div></li><li><p>Store the remainder as the number of elapsed seconds:</p><div class="informalexample"><pre class="programlisting">   minutes = timeRemaining/60;
<span class="strong"><strong>   seconds = timeRemaining % 60;</strong></span>
</pre></div></li><li><p>Set the text version of the time to the number of elapsed minutes, followed by a colon:</p><div class="informalexample"><pre class="programlisting">   seconds = timeRemaining % 60;
<span class="strong"><strong>   timeStr = minutes.ToString() + ":";</strong></span>
</pre></div></li><li><p>Append (add) the text version of the elapsed seconds:</p><div class="informalexample"><pre class="programlisting">   timeStr = minutes.ToString() + ":";
<span class="strong"><strong>   timeStr += seconds.ToString("D2");</strong></span>
</pre></div></li><li><p>Finally, push the <code class="literal">timeStr</code> value to the <span class="strong"><strong>GUIText</strong></span> component:</p><div class="informalexample"><pre class="programlisting">   timeStr += seconds.ToString("D2");
<span class="strong"><strong>   guiText.text = timeStr; //display the time to the GUI</strong></span>
</pre></div></li><li><p>To gaze at your clock<a id="id557" class="indexterm"></a> longingly as it counts down every delectable second, crank up the <code class="literal">startTime</code> amount in the <code class="literal">Awake</code> function:</p><div class="informalexample"><pre class="programlisting">   startTime = Time.time + <span class="strong"><strong>120.0</strong></span>;</pre></div></li><li><p>Save and test.</p></li></ol></div><p>Your beautiful new game clock <a id="id558" class="indexterm"></a>whiles away the hours in your own chosen font at your own chosen size, formatted with a colon like any self-respecting game clock should be.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec79"></a>
<span class="emphasis"><em>What just happened – what about that terrifying code?</em></span>
</h3></div></div></div><p>There are a few kooky things going on in the code we just wrote. Let's home in on the new and weird stuff.</p><div class="informalexample"><pre class="programlisting">minutes = timeRemaining/60;</pre></div><p>We set the value of the minutes variable by dividing <code class="literal">timeRemaining</code> by <code class="literal">60</code>. If there were 120 seconds left, dividing by 60 means there are two minutes on the clock. If there were only 11 seconds left on the clock, dividing by 60 gives us 0.183 repeating.</p><p>The reason why we don't see 0.1833333 in the "minutes" portion of our clock is a sneaky data type trick: <code class="literal">timeRemaining</code> is a <code class="literal">float</code> (floating point number), so it can remember decimal places. Our <code class="literal">minutes</code> variable<a id="id559" class="indexterm"></a> is an <code class="literal">int</code> (integer), which <span class="emphasis"><em>can't</em></span> remember decimal places. So, when we feed 0.183333 into an <code class="literal">int</code> variable, it just snips off everything after the decimal. It can't remember that stuff, so why bother? The result is that <code class="literal">minutes</code> is set to 0, which is what we see on the clock.</p><p>I know that earlier, we said it's slightly less processor intensive to multiply than to divide.  So why are we dividing by 60 to get our minutes count?  Because the alternative is to multiply by 0.01666666666666666666666666666667, which frightens me.</p><div class="informalexample"><pre class="programlisting">seconds = timeRemaining % 60;</pre></div><p>This unnerving little percent-symbol beastie performs a <span class="emphasis"><em>modulo</em></span> operation, which is like those exercises you did in grade three math class when you were just about to learn long division. A <span class="emphasis"><em>modulo</em></span> operation is like a<a id="id560" class="indexterm"></a> division, except it results in the remainder of your operation. Here are a few examples:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>4 % 2 = 0, because 2 goes into 4 twice with no remainder</p></li><li style="list-style-type: disc"><p>11 % 10 = 1, because 10 goes into 11 once with 1 as the remainder (10+1 = 11)</p></li><li style="list-style-type: disc"><p>28 % 5 = 3, because 5 goes into 28 five times (5*5=25), with a remainder of 3 (25+3 = 28)</p></li></ul></div><div class="informalexample"><pre class="programlisting">timeStr = minutes.ToString() + ":";</pre></div><p>The <code class="literal">int.ToString()</code> method<a id="id561" class="indexterm"></a> works exactly <a id="id562" class="indexterm"></a>as advertised, converting an integer to a String. All data types have <code class="literal">ToString()</code> methods, though some are more helpful than others. At the end of this line, we're tacking on a colon (<code class="literal">:</code>) to visually separate the minutes from the seconds.</p><div class="informalexample"><pre class="programlisting">timeStr += seconds.ToString("D2");</pre></div><p>The <code class="literal">+=</code> operator, you'll remember, takes what we've already got and adds something new to it—in this case, it's <code class="literal">seconds.ToString();</code>. We're passing the special argument <code class="literal">D2</code> to the <code class="literal">ToString()</code> method to round to the nearest two decimal places so that the clock looks like: 4:02 instead of 4:2.</p><p>Nifty!</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip33"></a>Tip</h3><p>
<span class="strong"><strong>Whatever is the problem?</strong></span>
</p><p>If you still have <span class="strong"><strong>whatever</strong></span> as your placeholder text, now's a good time to consider ditching it. It shows up on-screen for a split-second before the numbers appear. Yuck! Click on the <span class="strong"><strong>Clock</strong></span> GameObject in the <span class="strong"><strong>Hierarchy</strong></span> panel, and clear out the value marked <span class="strong"><strong>Text</strong></span> in the <span class="strong"><strong>GUIText</strong></span> component in the <span class="strong"><strong>Inspector</strong></span> panel.</p></div></div></div>