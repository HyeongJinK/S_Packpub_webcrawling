<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch06lvl1sec171"></a>Time for action – building the card-flipping function</h2></div></div><hr /></div><p>This card-flipping code <a id="id476" class="indexterm"></a>looks pretty good, but there's no<a id="id477" class="indexterm"></a> way to test it without adding some way of flagging that <code class="literal">isFaceUp</code> variable to <code class="literal">true</code>. Let's build a new function to do just that, and call it whenever a card button is clicked. </p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Create a new function called <code class="literal">FlipCardFaceUp</code>. As you did with the <code class="literal">BuildDeck</code> function earlier, write this function outside of and apart from your other functions—make sure it's not trapped inside the curly brackets of one of your other functions.</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>   function FlipCardFaceUp()</strong></span>
<span class="strong"><strong>   {</strong></span>
<span class="strong"><strong>      </strong></span>
<span class="strong"><strong>   }</strong></span>
</pre></div></li><li><p>Call the <code class="literal">FlipCardFaceUp</code> function from inside the card creation code:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>   </strong></span>if(GUILayout.Button(Resources.Load(img), GUILayout.Width(cardW)))
<span class="strong"><strong>   </strong></span>{
<span class="strong"><strong>   </strong></span>
<span class="strong"><strong>   FlipCardFaceUp();</strong></span>
<span class="strong"><strong>   </strong></span>   Debug.Log(card.img);
<span class="strong"><strong>   </strong></span>}</pre></div></li><li><p>We need to tell the <code class="literal">FlipCardFaceUp</code> function <span class="emphasis"><em>which</em></span> card has been flipped. Modify the line to pass a reference to the clicked-on card as an argument:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>   </strong></span>FlipCardFaceUp(<span class="strong"><strong>card</strong></span>);</pre></div></li><li><p>Now, we need to accept that card as an argument in our function definition. Modify your <code class="literal">FlipCardFaceUp</code> definition:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>   </strong></span>function FlipCardFaceUp(<span class="strong"><strong>card:Card</strong></span>){
<span class="strong"><strong>   </strong></span>
<span class="strong"><strong>   </strong></span>}</pre></div></li><li><p>Now that we're passing a reference to the clicked-on card to our <code class="literal">FlipCardFaceUp</code> function, and the function is receiving that reference as an argument, we can do as we please with the card:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>   </strong></span>function FlipCardFaceUp(card:Card)
<span class="strong"><strong>   </strong></span>{
<span class="strong"><strong>   </strong></span>
<span class="strong"><strong>   </strong></span>
<span class="strong"><strong>card.isFaceUp = true;</strong></span>
<span class="strong"><strong>   </strong></span>}</pre></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip30"></a>Tip</h3><p>
<span class="strong"><strong>Mismatched arguments</strong></span>
</p><p>The name of the variable that you pass as an argument to a function does not need to match the name of the argument you receive in that function. For example, we could pass a variable called <code class="literal">monkeyNubs</code> (<code class="literal">FlipCardFaceUp(monkeyNubs)</code>) and we could name the argument <code class="literal">butterFig</code> function (<code class="literal">FlipCardFaceUp(butterFig:Card)</code>). As long as the type of the thing getting passed and received is the same (in this case, an object of type <code class="literal">Card</code>), it'll work. We can't pass a <code class="literal">String</code> and receive an <code class="literal">int</code>, no matter what the variable is called on either end.</p><p>
<span class="strong"><strong>Reference versus value</strong></span>
</p><p>Another picky thing about many programming languages, including UnityScript, is that some data types are passed to functions by <span class="strong"><strong>reference</strong></span>, while some are passed by <span class="strong"><strong>value</strong></span>. Data types like classes and arrays are passed by reference, which means that when we accept them as arguments in our functions and start fiddling around with them, we're making changes to the <span class="strong"><strong>actual</strong></span> structure that was passed in. But when we pass something like an <code class="literal">int</code>, it gets passed by value. It's like we're getting a copy of it, not the original. Any changes we make to something passed by value does not affect the original variable.</p></div></li></ol></div><p>Save the script <a id="id478" class="indexterm"></a>and test your game. Because all of the <a id="id479" class="indexterm"></a>cards default to <code class="literal">isFaceUp = false</code>, the grid is dealt "wrench side up". When you click on each of the cards, the <code class="literal">isFaceUp</code> Boolean for each clicked-on card is flagged to <code class="literal">true</code>. The next time the interface is redrawn <code class="literal">OnGUI</code> (which is fractions of seconds later), Unity sees that <code class="literal">isFaceUp=true</code> for the clicked-on cards, and loads <code class="literal">card.img</code> instead of "wrench".</p><div class="mediaobject"><img src="/graphics/9781849695268/graphics/5268OT_06_06.jpg" /></div><p>What's <a id="id480" class="indexterm"></a>that I smell? Why, it's the stench of a dying<a id="id481" class="indexterm"></a> dragon (or a cuddled kitten). We figured out how to flip over the cards, so let's knock another item off our list:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Make the cards flip over from back to front when you click them.</p></li></ul></div><p>You'll notice, of course, that there's no way to flip the cards back over. Let's take care of that now.</p></div>