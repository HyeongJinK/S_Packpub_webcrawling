<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch05lvl1sec41"></a>Adding a simple turret enemy</h2></div></div><hr /></div><p>To start <a id="id248" class="indexterm"></a>off with, UFPS already comes built in with <a id="id249" class="indexterm"></a>an example enemy that we can work with, that is, a turret that will fire at a player if they get too close. More importantly, the turret is an example of how to damage a player, as well as how the player can damage objects. This will be quite useful once we create enemies. Let's take a look at how it's used in an example level:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>From the Project tab, go to the <code class="literal">UFPS/Base/Content/Levels/SkyCity</code> folder and then-double click on the <code class="literal">UFPS_SkyCity.unity</code> file to open it.</p><div class="mediaobject"><img src="/graphics/9781782174806/graphics/B04317_05_01.jpg" /></div><p>If you haven't gotten a chance to play this demo map yet, give it a try so that you're more familiar with the stuff that we will be talking about.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note48"></a>Note</h3><p>Notice that in certain areas, there will be security cameras on the walls and ceiling that will fire at you if you come close to them in their range. These are the first things that we are going to look into.</p></div></li><li><p>The <a id="id250" class="indexterm"></a>turrets that show up in this level are named <code class="literal">SecurityGun</code>. So, with this information, we can go to the <span class="strong"><strong>Hierarchy</strong></span> tab and then type in the name to be able to find them easily. Double-click on the first name to be taken to the position of it.</p></li><li><p>It is <a id="id251" class="indexterm"></a>very difficult at this point for us to see the turret due to the light that's placed on top of it. To fix this issue, underneath the <span class="strong"><strong>Scene</strong></span> tab, click on the <span class="strong"><strong>Gizmos</strong></span> dropdown and drag the <span class="strong"><strong>3D Gizmos</strong></span> property all the way to the left-hand side of the window to get rid of it. Then, select the object once again if needed.</p><div class="mediaobject"><img src="/graphics/9781782174806/graphics/B04317_05_02.jpg" /></div></li><li><p>Now that we can see the <code class="literal">SecurityGun</code> object, click on the <span class="strong"><strong>X </strong></span>button on the right-hand side of the search bar to once again see everything in <span class="strong"><strong>Hierarchy</strong></span>. Now we can extend the <code class="literal">SecurityGun</code> object to see the objects that are its children.</p></li><li><p>
<code class="literal">WallMount</code> and the <code class="literal">Pole </code>objects are simple meshes and are there for fluff (aside from the security cam that uses the pole to rotate from). The one that we want to <a id="id252" class="indexterm"></a>take a closer look at is the <code class="literal">Gun</code> object. Select it, and then you'll see some important classes in the <span class="strong"><strong>Inspector</strong></span> window: <code class="literal">vp_Shooter</code>, <code class="literal">vp_DamageHandler</code>, <code class="literal">vp_SecurityCamTurret</code>, and<code class="literal"> vp_Respawner</code>.</p><div class="mediaobject"><img src="/graphics/9781782174806/graphics/B04317_05_03.jpg" /></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>vp_Shooter</strong></span>: This <a id="id253" class="indexterm"></a>component<a id="id254" class="indexterm"></a> gives the object that is attached to it the ability to fire projectiles, including <a id="id255" class="indexterm"></a>but not limited to bullets (it's fired by calling the <code class="literal">TryFire</code> function). Here, we can set the properties for what it will shoot, very similar to what we did earlier in the custom weapons chapter.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>vp_DamageHandler</strong></span>: This <a id="id256" class="indexterm"></a>component gives an object the ability to take damage, die, and respawn if needed. This will allow us to set the health of the object as well. We damage this object by calling the <code class="literal">SendMessage</code> function, which we will see later.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>vp_SecurityCamTurret</strong></span>: This <a id="id257" class="indexterm"></a>component gives the object the back and forth movement that looks for a player to fire at. It's a child of the <code class="literal">vp_SimpleAITurret</code> class, which looks for a player (<code class="literal">ScanForLocalPlayer</code>) and attacks them (<code class="literal">AttackTarget</code>) as needed.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>vp_Respawner</strong></span>: This <a id="id258" class="indexterm"></a>script specifies how an object will respawn. This will determine if the object will respawn at the same position as before or at a random spawn point such as (<code class="literal">vp_SpawnPoints</code>).</p></li></ul></div></li><li><p>Now <a id="id259" class="indexterm"></a>that we've <a id="id260" class="indexterm"></a>seen this turret in a professional example, let's put it into our own level. Let's open the level that we created over the course of <a class="link" href="#" linkend="ch03">Chapter 3</a>, <span class="emphasis"><em>Prototyping Levels with Prototype</em></span>.</p><div class="mediaobject"><img src="/graphics/9781782174806/graphics/B04317_05_04.jpg" /></div></li><li><p>
<code class="literal">SecurityGun</code> is already created as a prefab that we can easily place into our levels. With this in mind, go to the <span class="strong"><strong>Project </strong></span>tab, the <code class="literal">UFPS/Base/Content/Prefabs/Misc</code> folder, and then drag the <code class="literal">SecurityGun</code> object into the world.</p></li><li><p>I'm going to <a id="id261" class="indexterm"></a>position the object so that it faces the upward side of the door that we're walking to. Then, from the <span class="strong"><strong>Inspector</strong></span> tab, I'm going to change the <span class="strong"><strong>Rotation's Y</strong></span> axis to <code class="literal">-90</code>. Once I've positioned the object on one side of the door, I'll duplicate the object by hitting <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>D</em></span> and dragging it to the other side.</p><div class="mediaobject"><img src="/graphics/9781782174806/graphics/B04317_05_05.jpg" /></div></li><li><p>In addition to <a id="id262" class="indexterm"></a>a security camera that moves back and forth, there's also a simple AI Turret, which will only look at you and fire if you get too close. Drag and drop the <code class="literal">SimpleAITurret</code> object into the room that the turrets are protecting.</p><div class="mediaobject"><img src="/graphics/9781782174806/graphics/B04317_05_06.jpg" /></div></li><li><p>Now that <a id="id263" class="indexterm"></a>we <a id="id264" class="indexterm"></a>have the turrets inside the game, let's save our level and start the game!</p><div class="mediaobject"><img src="/graphics/9781782174806/graphics/B04317_05_07.jpg" /></div><p>With this, we <a id="id265" class="indexterm"></a>now have <a id="id266" class="indexterm"></a>two security cameras covering a particular area and if we walk into the room, we come up to another turret that has an explosive reaction when it's defeated!</p><div class="mediaobject"><img src="/graphics/9781782174806/graphics/B04317_05_08.jpg" /></div></li></ol></div><p>This is a <a id="id267" class="indexterm"></a>great start! Now <a id="id268" class="indexterm"></a>we know how to place stationary enemies into our level!</p></div>