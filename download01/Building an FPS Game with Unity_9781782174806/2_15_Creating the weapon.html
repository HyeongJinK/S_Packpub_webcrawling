<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec20"></a>Creating the weapon</h2></div></div><hr /></div><p>Next, let's <a id="id44" class="indexterm"></a>add the weapon by performing the following steps so that our player can use it:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>From the <span class="strong"><strong>Hierarchy</strong></span> tab, go to the <span class="strong"><strong>AdvancedPlayer</strong></span> object and expand it. Expand the <span class="strong"><strong>FPSCamera</strong></span> object to show all of the weapons that the player can use. From there, click on the <code class="literal">1Pistol</code> object and press <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>D</em></span> to duplicate the object (alternatively, use <span class="strong"><strong>Edit</strong></span> | <span class="strong"><strong>Duplicate</strong></span>).</p></li><li><p>Move the newly created object below the <code class="literal">4Mace</code> object and rename it to <code class="literal">5CQ Assault Rifle</code>.</p><div class="mediaobject"><img src="/graphics/9781782174806/graphics/B04317_02_11.jpg" /></div><p>If we were to play the game right now, we could press <span class="emphasis"><em>5</em></span> and a second pistol would be displayed. Let's make it so that it will display our new weapon by replacing the weapon that is being rendered in the <span class="strong"><strong>Vp_FP Weapon (Script)</strong></span> component. The <span class="strong"><strong>Vp_FP Weapon (Script)</strong></span> component is used to animate a weapon using its procedural motion properties. This means that the component will manipulate the weapon transform's position and rotation using springs, bob, and perlin noise.</p></li><li><p>With <a id="id45" class="indexterm"></a>the <code class="literal">5CQ Assault Rifle</code> object selected in <span class="strong"><strong>Hierarchy</strong></span>, go to the <span class="strong"><strong>Inspector</strong></span> tab, scroll down to the <span class="strong"><strong>Vp_FP Weapon (Script)</strong></span> component, and extend the <span class="strong"><strong>Rendering</strong></span> options. From there, set <span class="strong"><strong>1st Person Weapon</strong></span> to the <code class="literal">CQAssaultRifle</code> prefab we created earlier in the <code class="literal">Assets/Weapons</code> folder with the hand by dragging and dropping it in the slot. This will replace the mesh to use the model of our rifle instead of the pistol.</p><p>Next, we need to say that this is an Assault Rifle. To do this, we need to modify the <span class="strong"><strong>Vp_ItemIdentifier (Script)</strong></span> class. The item identifier can be slapped onto any game object to basically say that "this is an item of type <span class="emphasis"><em>X</em></span>." It is what allows the weapon handler to associate a particular first-person weapon object with the information from the inventory.</p></li><li><p>Scroll all the <a id="id46" class="indexterm"></a>way down in the <span class="strong"><strong>Inspector</strong></span> tab to the <span class="strong"><strong>Vp_Item Identifier (Script)</strong></span>. Click on <span class="strong"><strong>X </strong></span>to the right of the <code class="literal">Pistol (UnitBank)</code> identifier. Then, go to the <code class="literal">Assets/UFPS/Base/Content/ItemTypes/Weapons </code>folder and drag and drop the <code class="literal">CQAssaultRifle </code>UnitBank in the slot.</p><div class="mediaobject"><img src="/graphics/9781782174806/graphics/B04317_02_21.jpg" /></div><p>Now, if we were to play the game, we would not be able to use the <span class="emphasis"><em>5</em></span> key anymore. This is because even though we created the blueprint of the weapon, the player does not have it in their inventory (it was using the earlier pistol, which is included by default).</p></li><li><p>Next, select the <code class="literal">AdvancedPlayer</code> object, go to the <span class="strong"><strong>Vp_Player Inventory (Script)</strong></span> component, and open <span class="strong"><strong>Item Records</strong></span>. Click on the circle to the right of the <span class="strong"><strong>Drag an ItemType object here</strong></span> selection and select the <span class="strong"><strong>CQAssaultRifle</strong></span>
<code class="literal"> </code>file.</p><div class="mediaobject"><img src="/graphics/9781782174806/graphics/B04317_02_12.jpg" /></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note16"></a>Note</h3><p>For more information on the Inventory class, check out <a class="ulink" href="http://www.visionpunk.com/hub/assets/ufps/manual/inventory" target="_blank">http://www.visionpunk.com/hub/assets/ufps/manual/inventory</a>.</p></div></li><li><p>Now, let's <a id="id47" class="indexterm"></a>play the game and press the <span class="emphasis"><em>5</em></span> key.</p><div class="mediaobject"><img src="/graphics/9781782174806/graphics/B04317_02_13.jpg" /></div></li></ol></div><p>With this, our <a id="id48" class="indexterm"></a>weapon is all set to be used!</p></div>