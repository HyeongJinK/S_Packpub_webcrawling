<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch08lvl1sec63"></a>Creating a main menu: part 3 â€“ button functionality</h2></div></div><hr /></div><p>Now <a id="id562" class="indexterm"></a>that we have the buttons in the scene, let's make it such that, when we click on them, they will both start and quit the games, respectively.</p><p>Our buttons need to have some functionality on clicking them, but we need to provide a function for them to call to go to another level. Let's create a new object with a new component that we will use to do this.</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Go to <span class="strong"><strong>GameObject</strong></span> | <span class="strong"><strong>Create Empty</strong></span>. Rename our newly created object to <code class="literal">MainMenuEvents</code>.</p></li><li><p>From the <span class="strong"><strong>Project</strong></span> tab, open up the <code class="literal">MyGame/Scripts</code> folder and then select <span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>C# Script</strong></span> and call it <code class="literal">MainMenuEvents</code>.</p></li><li><p>Double-click on the script to bring it into MonoDevelop. Once opened, replace what is there with the following code:</p><div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;

public class MainMenuEvents : MonoBehaviour 
{

  public void LoadGameLevel(string level)
  {
    Application.LoadLevel(level);
  }

  public void QuitGame()
  {
    print ("Quit Game");
    Application.Quit();
  }
}</pre></div><p>This class contains two functions for us to work with: <code class="literal">QuitGame</code>, which will have the application quit once it's called, and <code class="literal">LoadGameLevel</code>, which will take in a string and open up the level with that name (if it's part of the build).</p></li><li><p>Attach <a id="id563" class="indexterm"></a>the <span class="strong"><strong>MainMenuEvents</strong></span> component to the <code class="literal">MainMenuEvents</code> game object.</p></li><li><p>Now let's add this to our buttons. Select the <code class="literal">QuitGameButton</code> and from the <span class="strong"><strong>Inspector</strong></span> tab move down to the bottom of the <span class="strong"><strong>Button</strong></span> component. From there click the <span class="strong"><strong>+</strong></span> button at the bottom of the <span class="strong"><strong>On Click ()</strong></span> list.</p></li><li><p>Drag the <code class="literal">MainMenuEvents</code> object from the <span class="strong"><strong>Hierarchy</strong></span> tab to the slot to the left of the newly added item in the list.</p></li><li><p>Then, from the drop-down that currently says <code class="literal">No Function</code>, click and select <span class="strong"><strong>Main Menu Events</strong></span> | <span class="strong"><strong>Quit Game</strong></span>.</p><div class="mediaobject"><img src="/graphics/9781782174806/graphics/B04317_08_11.jpg" /></div></li><li><p>Save the <a id="id564" class="indexterm"></a>scene and play the game!</p><div class="mediaobject"><img src="/graphics/9781782174806/graphics/B04317_08_12.jpg" /></div><p>If you'll <a id="id565" class="indexterm"></a>notice now, when we click the <span class="strong"><strong>Quit Game</strong></span> button, the words Quit Game are displayed on the bottom left where <span class="strong"><strong>Console</strong></span> outputs are displayed! As <code class="literal">Application.Quit</code> doesn't do anything in the editor, this shows us that the function is being called correctly.</p></li><li><p>Now let's do the same thing for the <span class="strong"><strong>Start Game</strong></span> button. Select the object and then click on the <span class="strong"><strong>+</strong></span> below the <span class="strong"><strong>OnClick ()</strong></span> list.</p></li><li><p>Once created, drag-and-drop the <code class="literal">MainMenuEvents</code> object in and then, from the drop-down, select <span class="strong"><strong>MainMenuEvents</strong></span> | <span class="strong"><strong>LoadGameLevel</strong></span>. You'll notice that unlike the last time there's now a new slot placed below the function's name. This is where we will put the game level we want to load (in this case I am going to put <code class="literal">Chapter 7_MeshingYourLevels</code> because that's the name of my final created game level).</p><p>However<a id="id566" class="indexterm"></a> if you were to play the game, you would notice that nothing happens when we click the <span class="strong"><strong>Start Game</strong></span> button; or rather we'd see the Console giving us an error.</p><div class="mediaobject"><img src="/graphics/9781782174806/graphics/B04317_08_13.jpg" /></div></li><li><p>Go into <span class="strong"><strong>File</strong></span> | <span class="strong"><strong>Build Settings</strong></span>. You'll notice there are already a number of levels included, and this is because of defaults in UFPS.</p><div class="mediaobject"><img src="/graphics/9781782174806/graphics/B04317_08_14.jpg" /></div></li><li><p>Select all of the levels currently in the <span class="strong"><strong>Scenes in Build</strong></span> property and delete them by pressing the <span class="emphasis"><em>Del</em></span> key. Next add both the Main Menu and the Game levels with the Main Menu <a id="id567" class="indexterm"></a>being at the top (the top is the level that will start if you export the game). If it is not there, feel free to drag it up there via the mouse.</p><p>You can add levels by either pressing <span class="strong"><strong>Add Current</strong></span> after loading each level or by dragging-and-dropping the levels from the <span class="strong"><strong>Project</strong></span> tab.</p></li><li><p>Once finished, save your work and start the game again!</p><div class="mediaobject"><img src="/graphics/9781782174806/graphics/B04317_08_15.jpg" /></div></li></ol></div><p>At this point, whenever we click on the <span class="strong"><strong>Start Game</strong></span> button it will load our level correctly!</p></div>