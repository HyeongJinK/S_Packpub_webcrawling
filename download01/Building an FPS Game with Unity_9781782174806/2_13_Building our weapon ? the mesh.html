<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec18"></a>Building our weapon â€“ the mesh</h2></div></div><hr /></div><p>Now <a id="id32" class="indexterm"></a>that we have the resources to create the weapon, let's first get the mesh ready with a hand to hold it like in a normal FPS game.</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>To start off, go to the <code class="literal">UFPS/Base/Content/Prefabs/Weapons</code> folder and drag the <span class="strong"><strong>Pistol</strong></span> prefab out into the world. Move the object and camera until you get to the point where you can see it clearly.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note12"></a>Note</h3><p>In case you need a refresher on the camera controls, here are the most commonly used ones:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Zoom In/Out</strong></span>: <span class="emphasis"><em>Alt</em></span> + the right mouse button/scroll the middle mouse button up/down</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Rotate Around Selected Object</strong></span>: <span class="emphasis"><em>Alt</em></span> + the left mouse button</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Panning</strong></span>: <span class="emphasis"><em>Alt</em></span> + the middle mouse button</p></li></ul></div></div><div class="mediaobject"><img src="/graphics/9781782174806/graphics/B04317_02_04.jpg" /></div><p>Now, this<a id="id33" class="indexterm"></a> is the fully created pistol we used previously that is already attached to a hand. We are going to use this pistol as a base to create our very own weapon by placing our new weapon where the old one is.</p></li><li><p>From the <span class="strong"><strong>Project</strong></span> tab, drag out the <span class="strong"><strong>CQAssaultRifle</strong></span> file that we downloaded earlier (<code class="literal">Assets/Close Quarters Assault Rifle/CQAssaultRifle</code>) and bring it into the world.</p><div class="mediaobject"><img src="/graphics/9781782174806/graphics/B04317_02_05.jpg" /></div></li><li><p>If the object <a id="id34" class="indexterm"></a>placed in the scene is not scaled in comparison to the pistol object, look underneath the <span class="strong"><strong>Inspector</strong></span> window. You will be able to increase/decrease the scale values (<span class="strong"><strong>X</strong></span>, <span class="strong"><strong>Y</strong></span>, and <span class="strong"><strong>Z</strong></span>) equally. In the case of the <span class="strong"><strong>CQAssaultRife</strong></span> mesh, it is very tiny, so we first need to scale it to an appropriate size. In this case, we'll go to the <span class="strong"><strong>Inspector</strong></span> tab with the selected object and, from the <span class="strong"><strong>Transform</strong></span> component, we will change the <span class="strong"><strong>Scale</strong></span> value to <code class="literal">3</code>,<code class="literal">3</code>,<code class="literal">3</code>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note13"></a>Note</h3><p>Alternatively, we can press the <span class="emphasis"><em>R</em></span> button and drag it from the center box to scale it up and down as needed.</p></div><p>After this, we have to place the weapon in the player's hand in the exact same position as the trigger hand.</p></li><li><p>To help with this, use the camera gizmo at the top-right of the <span class="strong"><strong>Scene</strong></span> tab. Rotate it to face the hand by clocking on the right or left edges and then clicking on the center cube to switch to toggle to an isometric camera. This will make it really easy to see exactly where it needs to go.</p><div class="mediaobject"><img src="/graphics/9781782174806/graphics/B04317_02_19.jpg" /></div></li><li><p>Once there, move<a id="id35" class="indexterm"></a> the object until it fits your trigger finger, like the following:</p><div class="mediaobject"><img src="/graphics/9781782174806/graphics/B04317_02_06.jpg" /></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note14"></a>Note</h3><p>Alternatively, we can press <span class="emphasis"><em>F</em></span> on the keyboard to focus. We can also hold the right-click to rotate the camera in the direction we want and hold the middle mouse button to move the camera as needed.</p></div></li><li><p>After completing the side view, move on to the <span class="strong"><strong>Top</strong></span> camera view. Let it be centered to the hand as well:</p><div class="mediaobject"><img src="/graphics/9781782174806/graphics/B04317_02_07.jpg" /></div><p>Keep at it, making<a id="id36" class="indexterm"></a> adjustments via the <span class="strong"><strong>Translate</strong></span> tool until it looks perfect to you.</p><div class="mediaobject"><img src="/graphics/9781782174806/graphics/B04317_02_08.jpg" /></div><p>Once you're satisfied with the weapon's placement, you need to remove the original pistol. Thankfully, it's very easy to do this.</p></li><li><p>Open <a id="id37" class="indexterm"></a>the <span class="strong"><strong>Hierarchy</strong></span> of the <span class="strong"><strong>Pistol</strong></span> by clicking on the arrow to the left of its name and select the <span class="strong"><strong>Mesh</strong></span> actor. You'll notice that the mesh has three <span class="strong"><strong>Materials</strong></span> on it, one of which is the hand/arm and the others are the gun. From the <span class="strong"><strong>Mesh Renderer</strong></span> component, expand the <span class="strong"><strong>Materials</strong></span> tab and change the <span class="strong"><strong>Size</strong></span> value to<code class="literal"> 1</code>, eliminating the others and giving us an empty hand to work with.</p></li><li><p>Now, from the <span class="strong"><strong>Hierarchy</strong></span> tab, drag and drop the <code class="literal">CQAssaultRifle</code> object from our level on top of the <code class="literal">Pistol</code> prefab to make it a part of the group.</p></li><li><p>Rename <code class="literal">CQAssaultRifle</code> to <code class="literal">WeaponMesh</code> and the <code class="literal">Pistol</code> object to <code class="literal">CQAssaultRifle</code>.</p></li><li><p>Once this is done, from the <span class="strong"><strong>Project</strong></span> tab, go to the <code class="literal">Assets</code> folder and create a new folder called <code class="literal">Weapons</code>. Drag and drop the <code class="literal">CQAssaultRifle</code> object there, creating a prefab in the process.</p><div class="mediaobject"><img src="/graphics/9781782174806/graphics/B04317_02_09.jpg" /></div></li><li><p>With this, we can delete <code class="literal">CQAssaultRifle</code> inside the <span class="strong"><strong>Hierarchy</strong></span> tab (not the one from the <span class="strong"><strong>Project</strong></span> tab).</p></li></ol></div></div>