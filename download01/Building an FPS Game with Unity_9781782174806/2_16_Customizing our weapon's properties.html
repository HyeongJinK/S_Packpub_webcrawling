<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec21"></a>Customizing our weapon's properties</h2></div></div><hr /></div><p>Now, it's <a id="id49" class="indexterm"></a>great that the weapon looks like our new weapon, but it fires and moves exactly like a pistol. In this section, we are going to modify the properties of our weapon to give it the behavior we want by using the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Now, let's start off by switching over to the <span class="strong"><strong>Game</strong></span> tab and unchecking the <span class="strong"><strong>Maximize on Play</strong></span> option if it is currently enabled so we can still access the Inspector while the game is being played. We will play the game and press <span class="emphasis"><em>5</em></span> to bring out our weapon.</p><p>It's important to note that while the game is being played, any changes we've made would be undone when we exist; but we can get around this by copy/pasting the component values.</p></li><li><p>Press <span class="emphasis"><em>Enter</em></span> to return the control to your mouse. Then, from the <span class="strong"><strong>Hierarchy</strong></span> tab, select the weapon, which can be found in <span class="strong"><strong>AdvancedPlayer</strong></span> | <span class="strong"><strong>FPSCamera</strong></span> | <span class="strong"><strong>5CQ AssaultRifleTransform</strong></span> | <span class="strong"><strong>5CQ Assault Rifle</strong></span>.</p><div class="mediaobject"><img src="/graphics/9781782174806/graphics/B04317_02_14.jpg" /></div></li><li><p>Now, with <a id="id50" class="indexterm"></a>the object selected, move down to the <span class="strong"><strong>Vp_FP Weapon (Script)</strong></span> component and extend the <span class="strong"><strong>Position Springs</strong></span> property. Generally, these heavier weapons tend to be lower and closer to the players. So, click and drag on the <span class="strong"><strong>Offset</strong></span> and set <span class="strong"><strong>X</strong></span>, <span class="strong"><strong>Y</strong></span>, and <span class="strong"><strong>Z</strong></span> properties till you get them to where you want your weapon to be. I, personally, used <code class="literal">0.28</code>, <code class="literal">-0.41</code>, and <code class="literal">-0.09</code>.</p><div class="mediaobject"><img src="/graphics/9781782174806/graphics/B04317_02_15.jpg" /></div><p>This <span class="strong"><strong>Offset</strong></span> property is where the weapon "wants to be" and it will move toward this target position if anything causes it to change, such as recoil.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note17"></a>Note</h3><p>Information on the <a id="id51" class="indexterm"></a>
<span class="strong"><strong>Position Springs</strong></span> properties can be found at <a class="ulink" href="http://www.visionpunk.com/hub/assets/ufps/manual/camera" target="_blank">http://www.visionpunk.com/hub/assets/ufps/manual/camera</a>.</p></div><p>The next<a id="id52" class="indexterm"></a> thing we are going to change is the recoil. Right now, it is reacting very violently to an occurring shot. To alter this, we will need to modify the <code class="literal">Spring2 Stiffness </code>and <code class="literal">Spring 2 Damping</code> variables.</p><p>In layman's terms, stiffness determines how loosely or rigidly the weapon spring will behave. Damping makes the spring velocity wear off as it approaches its rest state.</p><p>In addition to modifying the <span class="strong"><strong>Position Springs</strong></span> properties, we will also need to modify the <span class="strong"><strong>Rotation Springs</strong></span> properties to higher numbers so the gun doesn't fly into the air on being fired.</p></li><li><p>Under <a id="id53" class="indexterm"></a>the <span class="strong"><strong>Positional Springs</strong></span>, set <span class="strong"><strong>Spring2 Stiffn</strong></span> to <code class="literal">.8</code> and <span class="strong"><strong>Spring2 Damp.</strong></span> to <code class="literal">.9</code>.</p></li><li><p>Next, under <span class="strong"><strong>Rotation Springs</strong></span>, change <span class="strong"><strong>Spring2 Stiffn.</strong></span> to <code class="literal">.5</code> and <span class="strong"><strong>Spring2 Damp.</strong></span> to <code class="literal">1</code>.</p></li><li><p>Finally, right-click on the <span class="strong"><strong>Vp_FP Weapon (Script)</strong></span> component and select <span class="strong"><strong>Copy Component</strong></span>. Quit the game; notice that the values have changed to what they were before. Now, right-click on your component and select <span class="strong"><strong>Paste Component Values</strong></span>. Perfect!</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note18"></a>Note</h3><p>Information on the <a id="id54" class="indexterm"></a>
<span class="strong"><strong>Rotation Springs</strong></span> properties can be found at <a class="ulink" href="http://www.visionpunk.com/hub/assets/ufps/manual/weapons" target="_blank">http://www.visionpunk.com/hub/assets/ufps/manual/weapons</a>.</p></div><p>The next thing we are going to adjust is the muzzle flash because, right now, the position doesn't really reflect where the bullets should be coming out.</p><p>To do this, we will need to access the <span class="strong"><strong>Vp_FPWeapon Shooter (Script)</strong></span> component. The <span class="strong"><strong>Vp_FPWeapon Shooter (Script)</strong></span> class adds firearm properties to a weapon, which allows us to manipulate the recoil and manages the firing rate, accuracy, sounds, muzzle flashes, and spawning of projectiles and shell casings. It also has basic ammo and reloading features.</p></li><li><p>Next, go to the <span class="strong"><strong>Vp_FPWeapon Shooter (Script)</strong></span> component and open the <span class="strong"><strong>Muzzle Flash</strong></span> option. Inside <span class="strong"><strong>Prefab</strong></span>, click on the circle and, from the search bar, select the<code class="literal"> </code>
<span class="strong"><strong>MuzzleFlashPistol01</strong></span> prefab to give us a muzzle flash when we shoot.</p></li><li><p>Check the <span class="strong"><strong>Show Muzzle Fl.</strong></span> option that allows us to see the muzzle to easily adjust and modify the position until it's at the correct position.</p><div class="mediaobject"><img src="/graphics/9781782174806/graphics/B04317_02_16.jpg" /></div><p>Now, we can adjust the shell. Currently, it pops out from the top of our gun but, for this one in particular, it comes out from the side.</p></li><li><p>Inside<a id="id55" class="indexterm"></a> the <span class="strong"><strong>Vp_FP Weapon Shooter (Scripts)</strong></span> component, expand the <span class="strong"><strong>Shell</strong></span> property. Then, change <span class="strong"><strong>Eject Position</strong></span> to <code class="literal">.2</code>, <code class="literal">-0.05</code>, <code class="literal">.5</code>.</p></li><li><p>After this, change <span class="strong"><strong>Eject Direction</strong></span> to <code class="literal">5,1,1</code>. This means that it will move five times in the <span class="emphasis"><em>X</em></span> direction and once in the <span class="emphasis"><em>Y</em></span> and <span class="emphasis"><em>Z</em></span> directions modified by <span class="strong"><strong>Eject Velocity</strong></span>.</p><div class="mediaobject"><img src="/graphics/9781782174806/graphics/B04317_02_17.jpg" /></div><p>With this, the shell flies out of our weapon correctly!</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note19"></a>Note</h3><p>More information on the <a id="id56" class="indexterm"></a>
<span class="strong"><strong>Shell</strong></span> and its properties can be found at <a class="ulink" href="http://www.visionpunk.com/hub/assets/ufps/manual/shells" target="_blank">http://www.visionpunk.com/hub/assets/ufps/manual/shells</a>.</p></div><p>The <a id="id57" class="indexterm"></a>weapon currently fires very slowly, because it's using the pistol's speed. Our rifle is going to shoot a lot quicker.</p></li><li><p>Under the <span class="strong"><strong>Vp_FPWeapon Shooter (Scripts)</strong></span> component, open the <span class="strong"><strong>Projectile </strong></span>section and change <span class="strong"><strong>Firing Rate</strong></span> to <code class="literal">.10</code>. This means that the bullets will fire once in every <code class="literal">.10</code> seconds.</p><div class="mediaobject"><img src="/graphics/9781782174806/graphics/B04317_02_18.jpg" /></div><p>I'm sure you can now tell that it's already shooting a lot quicker. Depending on the weapon, you may want it to take a longer or shorter distance. You may also want the player to shoot faster if they are tapping instead of just holding down the mouse button, this is what the <span class="strong"><strong>Tap Firing Rate</strong></span> property is for.</p><p>We can use the current sound for this weapon but, for sake of completion, I'm going to show how we can use our own sound as well.</p></li><li><p>Open the<a id="id58" class="indexterm"></a> <span class="strong"><strong>Sound</strong></span> section and set the <span class="strong"><strong>Fire</strong></span> property to <code class="literal">MachinegunFire</code>. Then, change <span class="strong"><strong>Fire Pitch</strong></span> to <code class="literal">1.5</code>, <code class="literal">1.5</code>.</p><p>Fire is the sound that plays when you fire the weapon, while <span class="strong"><strong>Dry Fire</strong></span> plays when you are out of ammo and try to fire. The <span class="strong"><strong>Fire Pitch </strong></span>property is used to alter the pitch of the sound for some variations, which may be useful to differentiate your weapons.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note20"></a>Note</h3><p>For more information on the <a id="id59" class="indexterm"></a>
<span class="strong"><strong>Sound</strong></span> properties, please visit <a class="ulink" href="http://www.visionpunk.com/hub/assets/ufps/manual/shooters" target="_blank">http://www.visionpunk.com/hub/assets/ufps/manual/shooters</a>.</p></div></li><li><p>Once <a id="id60" class="indexterm"></a>you are finished with the <span class="strong"><strong>Vp_FWeapon Shooter (Script)</strong></span> component, click on the <span class="strong"><strong>Save</strong></span> button at the bottom. Name the file as <code class="literal">CQAssault</code> and continue. Once you exit the game, click on the <span class="strong"><strong>Load</strong></span> button and bring the properties in!</p></li><li><p>Select the <code class="literal">AdvancedPlayer</code> object and, from the <span class="strong"><strong>Inspector</strong></span> tab at the top, click on the <span class="strong"><strong>Apply</strong></span> button in the <span class="strong"><strong>Prefab </strong></span>section. This will save all of the newly created data for any other advanced players we wish to create in the future.</p></li><li><p>Finally, we are going to save our progress and our scene by going to <span class="strong"><strong>File</strong></span> | <span class="strong"><strong>Save Scene</strong></span>.</p></li></ol></div></div>