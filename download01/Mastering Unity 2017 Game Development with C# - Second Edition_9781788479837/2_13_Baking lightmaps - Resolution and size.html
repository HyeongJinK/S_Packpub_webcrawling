<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec19"></a>Baking lightmaps - Resolution and size</h2></div></div><hr /></div><p>Our scene now features marked static objects, complete with Lightmap UVs, and is ready for lightmapping. The default <span>settings</span> for all Unity scenes <span>and</span> projects is not compatible with a full lightmap setup as we require, and so we must access the lighting settings. To do this, display the <strong class="userinput"><code>Lighting</code></strong> window by navigating to <strong class="userinput"><code>Window</code></strong> | <strong class="userinput"><code>Lighting</code></strong> | <strong class="userinput"><code>Settings</code></strong> from the application menu. Once opened, dock the free-floating window into the object Inspector as a separate tab. This is convenient because we can view the lighting settings and inspect the <strong class="userinput"><code>Scene</code></strong> viewport side by side:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/0be43ff2-08c1-4800-a516-1f81476d05b4.png" /></div><p>Accessing the Lighting window</p><p>First, let's disable all precomputed GI settings by removing the check mark from the <strong class="userinput"><code>Realtime Global Illumination</code></strong> checkbox in the <strong class="userinput"><code>Realtime Lighting</code></strong> rollout. This completely deactivates real-time GI for the scene. In addition, specify the night time skybox (created earlier) for the <strong class="userinput"><code>Skybox</code></strong> field. This is important for establishing a base, ambient lighting pervading the scene, even in the darkest and most inaccessible areas. Pixels from the surrounding skybox are projected inward into the scene as minor light sources, which are used for defining the lowest lighting level:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/e8286ced-17d3-49be-885c-f08f9715bbee.png" /></div><p>Deactivating precomputed Realtime GI and establishing an ambient light source</p><p>Next, I recommend deactivating the <strong class="userinput"><code>Auto Generate</code></strong> checkbox next to the <strong class="userinput"><code>Build</code></strong> button as soon as possible. This step is optional. When enabled, Unity continually rebuilds scene lighting automatically, whenever light-relevant changes are detected in the scene (for example, when static objects are moved, light colors change, and so on). This saves us from initiating a build manually, and for simpler scenes, it's both quick and effective, but it can slow down the editor speed while building, invalidates the scene lighting temporarily, and is associated with some bugs:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/3c750e4f-4830-4de1-b328-d93ffae59bce.png" /></div><p>Disabling auto build for lighting</p><p>Now, let's establish texel density for the lightmaps to be generated. This is an important process. For lightmapping to be effective, the surface area of the scene must map the lightmap texture, each face of each static mesh mapping to a unique set of pixels for its lighting information. Unity gives you control over how many pixels in the lightmap texture map to a square unit in the scene. The ratio between pixels to world units is defined by the resolution setting for the baked GI rollout. This defines how one pixel in the lightmap relates to a world unit. Lower values produce smaller and fewer lightmap textures at the expense of lightmap quality. Higher values improve quality, but at the expense of texture size. We need to arrive at a balance appropriate for our scene. To start, let's visualize the lightmap density. To do this, change the viewport shading mode to <strong class="userinput"><code>Baked</code></strong><strong class="userinput"><code>Lightmap</code></strong>, which is achieved via the <strong class="userinput"><code>Shading Mode</code></strong> dropdown in the <strong class="userinput"><code>Scene</code></strong> tab:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/559681e1-fc53-402c-839b-449fb93209c4.png" /></div><p>Enabling baked resolution display</p><p>When baked shading is activated, the <strong class="userinput"><code>Scene</code></strong> viewport flood fills a checker pattern across all meshes in the scene. Each square in the pattern represents one pixel in the lightmap. Thus, the scene view expresses how densely packed texture pixels are from the lightmap to the mesh. You can control texel density using the <strong class="userinput"><code>Lightmap Resolution</code></strong> field. Lower values decrease quality, and thus the size of each square increases, as fewer pixels are packed onto the mesh:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/3ef174f5-9278-49e9-ab37-d8b596949e74.png" /></div><p>Configuring lightmap resolution</p><p>Now, specify aÂ <strong class="userinput"><code>Lightmap Size</code></strong>. This defines the maximum size in pixels for each square lightmap texture. The number of lightmap textures generated depends on the <strong class="userinput"><code>Lightmap Resolution</code></strong> and <strong class="userinput"><code>Lightmap Size</code></strong>. If the scene surface area cannot fit into one texture, based on the lightmap resolution, then additional textures are generated. The ideal is to keep lightmap textures as few in number as possible. It's generally better, for performance, to have one large lightmap rather than many smaller ones:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/ba18fc6d-5b4a-452d-b21e-c6fddefef11a.png" /></div><p>Configuring Lightmap Size</p><p>Before tweaking further lightmapping details, let's test the existing settings to see how many lightmaps are generated for the scene. Simply <span>click</span> on the <strong class="userinput"><code>Build</code></strong> button, and then repeat this process (while refining Baked Resolution and Lightmap Size) until you <span>arrive</span> at lightmap textures sized as needed, avoiding pixel wastage. You can view the generated lightmap textures from the preview pane of the <strong class="userinput"><code>Global Maps</code></strong> tab:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/d20f3a60-7287-48b6-8b03-5d94d64f49a7.png" /></div><p>Previewing generated lightmaps</p><p>The generated lightmap textures themselves also live in the Project panel as a texture asset of the project. These are textures marked with the <strong class="userinput"><code>Lightmap</code></strong> type from the object <strong class="userinput"><code>Inspector</code></strong>. These are found in a subfolder alongside the saved scene asset:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/38495afe-2be6-49b7-9021-d00ced0eb362.png" /></div><p>Lightmaps are generated as texture assets</p><p>You can often identify pixel wastage in a <span>lightmap</span> texture. This happens when your <strong class="userinput"><code>Lightmap Size</code></strong> is too high and/or <strong class="userinput"><code>Lightmap Resolution</code></strong> is too low, resulting in textures that cannot be filled or maximized with pixels. This leads to redundant pixels, which are not assigned to any meshes. You'll want to avoid this. Aim to fill lightmaps as much as possible; this gives you the best quality attainable for your settings:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/c9aa581f-333b-484a-a048-d9ecb09e9df7.png" /></div><p>Tweaking lightmap size</p></div>