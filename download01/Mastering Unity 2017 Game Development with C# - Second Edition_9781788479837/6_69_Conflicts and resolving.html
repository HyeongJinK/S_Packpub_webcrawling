<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch06lvl1sec71"></a>Conflicts and resolving</h2></div></div><hr /></div><p>Branches in Git are especially useful whenever two <span>coders</span> need to work from the same <span class="emphasis"><em>base</em></span> or <span class="emphasis"><em>core</em></span> code, but they must take the project in new directions by adding specific features to the original work or by amending the existing work. To do this, each coder works on a separate branch, and their changes are merged back into the main branch to integrate their work together later. This workflow is very powerful because it means different <span>coders</span> can work in isolation on their own branch, without affecting each other. However, a problem arises with this approach logistically. Specifically, what happens if the coders take the project in different and contradictory directions and then try to merge those changes together? What happens if both programmers open the same source file and change code differently on the same line? What happens if one uses a <code class="literal">print</code> statement where another uses <code class="literal">Debug.Log</code>? What should Git do when these two divergent branches merge? In these cases, a conflict occurs, and we must resolve it.</p><p>Let's consider the relatively simple case of an HTML file added to the master branch in a new Commit, as follows. The text file is as shown in the following figure, and in later branches, the person's name will be changed in a conflicting way:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/930a7230-48bf-4f2f-91b6-7e4917a67b1e.png" /></div><p>Creating a text file for version control</p><p>Now add the newly created text file to the master branch as a new Commit, and then create two new branches from the latest Commit. This effectively forks the master branch in two new directions:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/35778cdb-150a-4776-b108-856c94e1d5aa.png" /></div><p>Creating new and divergent branches</p><p>Now, double-click on each new branch in the branches list to activate the branch, changing the contents of the project folder to the branch files. Then, for each branch, open the text file and change its contents to create a conflict. For my example, I am changing the person's name. For one branch, the name becomes John Doe, and for the other Jane Doodle. After making the change, ensure that you Commit the changes to each branch:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/b510caec-3f89-4319-9313-cb3ff9c5a3a9.png" /></div><p>Changing a text file on separate branches in preparation for a merge</p><p>Now, let's try merging these <span>two</span> branches (<strong class="userinput"><code>Name_01</code></strong> and <strong class="userinput"><code>Name_02</code></strong>) with contradictory changes back into the master branch. Start by activating the <span>master</span> branch, double-clicking on it from the branches List:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/a6dbbd5f-f6f6-469e-b0b4-a1cb424d5d55.png" /></div><p>Activating the Master Branch</p><p>Right-click on the first branch, and then choose <strong class="userinput"><code>Merge</code></strong> to merge the selected branch into the active branch (the master). When you do this, the master branch updates with the new changes. You can confirm this by opening the changed text file and viewing the new text. That's good:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/90783274-810d-4273-a420-9ef676d35a3a.png" /></div><p>Merging</p><p>Now, let's try merging the second branch with conflicting changes into the Master! Activate the master branch, if it's not already activated, and then right-click on the second branch, choosing <strong class="userinput"><code>Merge</code></strong> from the context menu:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/190f9d63-8bd4-4078-8dd3-cc5c1f57a069.png" /></div><p>Merging the Second Branch into the Master</p><p>After merging the second <span>branch</span> into the Master, a conflict occurs. This conflict is caused by the discrepancy in the text file, where the same line differs across Commits; one uses the name John Doe, and the other Jane Doodle. A warning <span>message</span> is printed in orange at the top of the branch history, indicating the conflict problem. At this point, the merge is suspended until you provide input about how to resolve the conflict:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/4105d69c-8666-4361-ae2b-e5258a6671c5.png" /></div><p>Merging the Second Branch into the Master</p><p>To resolve the conflict, select the Conflict message in the branch history. On selecting the conflict message, additional properties about the conflict are shown in <span>the</span><strong class="userinput"><code>Properties</code></strong> panel:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/36056a99-320a-46b0-81ff-6efbba31c38e.png" /></div><p>Viewing merge conflict details</p><p>From the <strong class="userinput"><code>Properties</code></strong> panel, two conflicts are highlighted. The first conflict is a metadata file generated for the Mac platform (<code class="literal">DS_Store</code>). You may not have this conflict on Windows. For me, this conflict can be resolved by selecting the file in the <strong class="userinput"><code>Properties</code></strong> panel. On clicking on the file, a Conflict Resolution Editor is presented. The top two <span>panels</span> show the two conflicting files, presented side by side, and the bottom <span>pane</span> displays how the conflict should be resolved:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/c412e9be-50e0-403a-a509-b6ac000751c1.png" /></div><p>Merge Conflict Resolution Editor</p><p>Resolving a Conflict in Git is about choosing what the output should be from two divergent branches, <strong class="userinput"><code>A</code></strong> and <strong class="userinput"><code>B</code></strong>. One resolution is to choose branch <strong class="userinput"><code>A</code></strong> as the output; and another is to choose branch <strong class="userinput"><code>B</code></strong>. A third possibility is to develop a custom solution where you manually edit the resultant text file, defining what the outcome is. For the <code class="literal">DS_Store</code>Â metafile, I'll just choose option <strong class="userinput"><code>B</code></strong>, that is, the file included in the merging branch. This will be the output and resolution for this specific conflict. To do this, just check the option <strong class="userinput"><code>B</code></strong> box from the GitKraken interface:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/23089534-8ad0-4aef-8f6a-2132cdd302d9.png" /></div><p>Choosing option B to resolve a Binary Conflict</p><p>After choosing option <strong class="userinput"><code>B</code></strong>, click on the <strong class="userinput"><code>Save</code></strong> button to finalize the resolution. This <span>returns</span> us to the main GitKraken interface:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/f85f33d4-fc13-45ee-a129-ccd5871698dd.png" /></div><p>Resolving a Merge conflict</p><p>After resolving the conflict, the file is marked as Resolved in the Commit and is also added to the Staged list, ready for Committing to the master branch:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/a8a57819-6e38-47c9-abf9-fbbf8a4ac9e9.png" /></div><p>Resolved Conflicts are added to the Staged list of the Commit</p><p>Now, let's resolve the outstanding <span>text</span> file conflict, which <span>still</span> remains in the <strong class="userinput"><code>Conflicted Files</code></strong> list. To do this, select the conflicting file by clicking on it:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/35779449-c7ef-40f0-a9c4-060ef7429c66.png" /></div><p>Selecting an outstanding text file conflict</p><p>Again, the conflict opens inside the Conflict Resolution Editor. We can see from the top two panels, in HTML form, where the conflict occurs between the Commits. GitKraken highlights the conflict area for us:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/1fac0b55-8a63-4165-a256-413f1c416a77.png" /></div><p>Exploring the Merge Conflict indepth</p><p>The <strong class="userinput"><code>Output</code></strong> panel displays the default solution that will be used if the Conflict is saved now. If you have GitKraken Pro, you can edit the <strong class="userinput"><code>Output</code></strong> solution with custom text, refining the resolution but with the free version, you must select between conflicts: option <strong class="userinput"><code>A</code></strong> or <strong class="userinput"><code>B</code></strong> only, or a combination of both. Here, I'll select option <strong class="userinput"><code>B</code></strong> again to update the conflict, then choose <strong class="userinput"><code>Save</code></strong> to confirm the solution:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/e4862543-d716-4ad0-b6d4-c3f5a8e69890.png" /></div><p>Resolving a Merge conflict</p><p>Both conflicts have been resolved and can now be added to the master branch as a Commit. To do this, click on the <strong class="userinput"><code>Commit</code></strong> and <strong class="userinput"><code>Merge</code></strong> button. This now updates the master branch with the new changes, integrating both branches. In our example, the conflict mostly applied to just one text file, and the conflict existed on just one line in that file. For more complex projects, there are likely to be many more conflicts, both within a single file and across multiple files, and these should all be resolved carefully, on an individual basis:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/2ed67dea-cbc3-469d-a4c8-7ecebf8a5135.png" /></div><p>Updating the Master Branch using Commit and Merge</p><p>Voila! Great work. We've now resolved all conflicts and staged them to a new Commit added to the master branch. In reaching this far, we've seen how to create commits on branches, how to create new branches, and how to resolve conflicts between branches during a merge process. Next, we'll see how to enhance collaboration by working with Git Repos on a web server.</p></div>