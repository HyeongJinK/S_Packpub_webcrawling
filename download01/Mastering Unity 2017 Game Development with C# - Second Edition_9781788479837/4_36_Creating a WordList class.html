<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec40"></a>Creating a WordList class</h2></div></div><hr /></div><p>Now we must build a class to process the <span>word</span> list asset. This involves a class that can open and read the word list itself, select a word at random from the list, and compare two words for a match. The latter is needed to compare the typed word with the selected word from the dictionary. To start with, a new Singleton called <code class="literal">classWordList.cs</code> should <span>be</span> created. The basic skeleton is as <span>follows</span>:</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note30"></a>Note</h3><p>For more information on Singleton objects, refer to <a class="link" href="#" linkend="ch03">Chapter 3</a>, <span class="emphasis"><em>Player Controls - Movement</em></span>. In addition, you can view the Unity online Wiki at <a class="ulink" href="http://wiki.unity3d.com/index.php/Singleton" target="_blank">http://wiki.unity3d.com/index.php/Singleton</a>.</p></div><pre class="programlisting">using UnityEngine;
using System.Collections;
using System.Collections.Generic;
//------------------------------------
public class WordList : MonoBehaviour
{
    //------------------------------------
   //Members for Singleton
   public static WordList ThisInstance
   {

           get
           {
                   //Get or create singleton instance
                   if (m_WL == null)
                   {
                          GameObject GO = new GameObject ("WordList");
                          ThisInstance = GO.AddComponent&lt;WordList&gt; ();
                }
                return m_WL;
            }
            set
            {
                 //If not null then we already have instance
                 if (m_WL != null)
                  {
                       //If different, then remove duplicate 
                       immediately
                       if(m_WL.GetInstanceID() != 
                       value.GetInstanceID())
                       DestroyImmediate (value.gameObject);
                       return;
               }
               //If new, then create new singleton instance
               m_WL = value;
               DontDestroyOnLoad (m_WL.gameObject);
           }
    }
     private static WordList m_WL = null;
 }
 //------------------------------------</pre><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec45"></a>Comments</h3></div></div></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><span>The</span><code class="literal">WordList</code> class features the <code class="literal">Get</code> and <code class="literal">Set</code> properties to control class instantiation, making it a Singleton.</li><li style="list-style-type: disc">In addition to being a Singleton, <code class="literal">WordList</code> also calls the <code class="literal">DontDestroyOnLoad</code> function. This prevents the object from being destroyed when the scene ends, allowing it to carry over to the next scene.
</li><li style="list-style-type: disc">Take care when using <code class="literal">DontDestroyOnLoad</code>, as all child objects and associated texture and mesh resources on the object will also survive and continue to the next scene.</li></ul></div><p>The first programmatic step in working with the <code class="literal">WordList</code> is to tokenize the text file. This means we need to generate a complete array of all <span>words</span> in the file, separating the words as distinct units, as opposed to being part of a long string spanning the length of the file. For our word list, each word is separated by a new line, or rather, there is one word or phrase per line. Each line should, therefore, become its own entry in the word array. We can achieve the tokenization process simply in the <code class="literal">Awake</code> function:</p><pre class="programlisting">    //------------------------------------
   // Use this for initialization
<span class="strong"><strong>   void</strong></span> Awake ()
   {
       //Set singleton instance
       ThisInstance = <span class="strong"><strong>this</strong></span>;
       //Now load word list, if available
<span class="strong"><strong>       if</strong></span> (FileWordList == <span class="strong"><strong>null</strong></span>)
           FileWordList = (TextAsset) Resources.Load("WordList");
          Words = FileWordList.text.Split (<span class="strong"><strong>new</strong></span>[] {"\r\n"},  
System.StringSplitOptions.None);

     }
    //------------------------------------</pre></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec46"></a>Comments</h3></div></div></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><span>Two</span> variables should be added to the class to support the <code class="literal">Awake</code> function: firstly, <code class="literal">FileWordList</code> (declared as <code class="literal">TextAsset</code><code class="literal">FileWordList</code>), which references the Word List text asset, as loaded from the <code class="literal">Resources</code> folder, and secondly, <code class="literal">Words</code>, which is an array of strings (<code class="literal">string[] Words</code>). This represents the tokenized file (the words from the file separated into unique elements).</li><li style="list-style-type: disc">The <code class="literal">Resources.Load</code> function is called to load the text asset resource at runtime from the file, loading the resultant string into <code class="literal">FileWordList</code>.</li><li style="list-style-type: disc">After <code class="literal">FileWordList</code> has been created and populated with string data from the word list file, the <code class="literal">Split</code> function is called with the <code class="literal">"\r\n"</code> string argument, indicating that words should be separated by new lines. This returns an array in which each element is a separate word.</li></ul></div><p>Next, a random word can be <span>selected</span> from the <code class="literal">Words</code> array using the <code class="literal">Random.Range</code> function. This function generates a random number between a minimum and a maximum, and this can be passed as an index for the <code class="literal">Words</code> array. Here's a new method for the <code class="literal">WordList</code> class, which selects a random word:</p><pre class="programlisting">    //Returns a random word from the word list
<span class="strong"><strong>    public string</strong></span> GetRandomWord()
    {
<span class="strong"><strong>        return</strong></span> Words[Random.Range(0, Words.Length)].ToLower();
    }
    //------------------------------------</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note31"></a>Note</h3><p>All returned words are converted to lowercase, if needed, preventing case sensitivity issues from disrupting gameplay. You can use a text editor to convert case, but it's useful to safeguard against this in code too. For <span class="emphasis"><em>Dead Keys</em></span>, the player should not have to worry about whether uppercase or lowercase is used, so either case is acceptable.</p></div></div></div>