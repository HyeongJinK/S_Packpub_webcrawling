<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch08lvl1sec86"></a>Profiler and performance assessment</h2></div></div><hr /></div><p>The <span class="strong"><strong>Rendering Statistics Window</strong></span> (<strong class="userinput"><code>Stats</code></strong> panel) can help <span>confirm</span> whether your game is suffering from performance issues. In the <span>first</span> instance, your judgment about performance is normally based on whether you see a tangible problem in-game during testing. Afterward, the Stats panel (such as the FPS statistic) can help confirm whether <span>the</span> identified problem really is related to game performance, as opposed to a scripting bug, or a software conflict. Nevertheless, the Stats panel can't tell you exactly what or where the problem is. To help track down the issue, you can use the <strong class="userinput"><code>Profiler</code></strong> window, which is accessible from the Unity editor menu by navigating to <strong class="userinput"><code>Window</code></strong> | <strong class="userinput"><code>Profiler</code></strong>. Like the <strong class="userinput"><code>Stats</code></strong> panel, the <strong class="userinput"><code>Profiler</code></strong> measures game performance on the current hardware, that is, the system on which the editor is running:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/4f00e0e6-db57-42da-955f-38276a0bd38f.png" /></div><p>Accessing the Unity Profiler from the application menu</p><p>The <strong class="userinput"><code>Profiler</code></strong> window initially appears as a free-floating window. For best results, consider docking this window side by side with the <strong class="userinput"><code>Game</code></strong> tab, or using a separate monitor for a multi-monitor setup:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/816eb259-5568-459f-b6f3-9c2452b22125.png" /></div><p>Viewing the Profiler window alongside the Game tab</p><p>Now take your game for a test run and observe the <strong class="userinput"><code>Profiler</code></strong> window, which fills instantly with performance data in a graph. The <strong class="userinput"><code>Profiler</code></strong> collects information, frame by frame, for as long as the <strong class="userinput"><code>Record</code></strong> button is active, and will add its information to the graph in real time. Data is populated on various axes: CPU usage, rendering, memory, audio, physics, and more:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/e1655ca3-fbd8-4f9b-b4e5-4ba3fdf7877b.png" /></div><p>Recording frame data with the Profiler during Play mode</p><p>In the <strong class="userinput"><code>CPU Usage</code></strong> category, we learn a lot about frame computation time, which is important for overall performance and FPS. The horizontal axis (left-to-right) represents frames (with the most recent frame being on the right-hand side), and <span>the</span> vertical axis (up and down) represents the frame computation time in milliseconds (thus, higher values represent lower frame rates). For this reason, high peaks or sudden mountains in <span>the</span> graph (excepting loading screens) may represent problem areas, as they coincide with unusually high activity and performance intensity. To find out more information about a specific frame in the graph (such as a high mountain frame), simply click and drag your mouse anywhere in the graph to pick that frame:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/e5c9155a-3f6d-4a97-90b5-0cd8a270f035.png" /></div><p>Selecting frames for investigation in the Profiler</p><p>By selecting a frame for further investigation, exploring why the FPS is as low as it is, you can view more information in the <strong class="userinput"><code>Overview</code></strong> panel. This breaks down the computational workload for the frame into distinct categories, allowing you to view the expense of each to further narrow down the areas of performance intensity. Tasks are ordered by expense in the list, with the most intensive processes listed at the top. On identifying the most expensive, click on the expand arrow to reveal further related processes. Unity lists the most important scripts, functions, or resources associated with the selected frame and process. This helps you trace performance spikes to specific functions in the code and specific assets:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/f22b8a30-c02d-4deb-ba3d-6e081e785aca.png" /></div><p>Investigating performance spikes</p><p>You can also view specific categories of performance in the graph, such as Rendering or Physics, by toggling category visibility using the visibility buttons. This doesn't affect the data recorded or collected by the <strong class="userinput"><code>Profiler</code></strong>, but only changes how the data is presented, helping you visualize the performance more clearly:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/916fab88-1fe6-4126-b155-9aeb7314bbc7.png" /></div><p>Toggling performance viewing using the graph visibility buttons</p><p>Like the <strong class="userinput"><code>Rendering Statistics</code></strong> window, the <strong class="userinput"><code><span>Profiler</span></code></strong> cannot always identify the causes of performance problems with certainty, and <span>even</span> when it does identify them, it <span class="emphasis"><em>cannot</em></span> propose a solution for them. Nonetheless, the <strong class="userinput"><code>Profiler</code></strong> can be valuable in tracking down problems in code to specific classes and functions, which saves you the time of <span class="strong"><strong>tracing</strong></span> the problems manually. In addition to the standard <strong class="userinput"><code>Profiler</code></strong> modes, you can also enable a <strong class="userinput"><code>Deep Profile</code></strong> from the <strong class="userinput"><code>Profiler</code></strong> toolbar. This mode increases the range of calls, functions, and resources in scripts that can be monitored for even greater detail, but this option is resource heavy and should only be used where essential. More information on the <strong class="userinput"><code>Profiler</code></strong><span>can</span> be found online at <a class="ulink" href="https://docs.unity3d.com/Manual/RenderingStatistics.html" target="_blank">https://docs.unity3d.com/Manual/Profiler.html</a>:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/96ba6f90-230e-4923-bc1a-8b453dd375b1.png" /></div><p>Enabling a Deep Profile</p></div>