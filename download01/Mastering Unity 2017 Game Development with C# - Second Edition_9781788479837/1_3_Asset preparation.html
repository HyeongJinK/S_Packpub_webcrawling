<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch01lvl1sec10"></a>Asset preparation</h2></div></div><hr /></div><p>When you've reached a clear decision on the <span>initial</span> concept and design, you're ready to prototype! This means building a Unity project demonstrating the core mechanic and game rules in action as a playable sample. After this, you typically refine the design more, and repeat prototyping until arriving at an artifact you want to pursue. From here, the art team must produce assets (meshes and textures) based on the concept art, the game design, and photographic references. When producing meshes and textures for Unity, some important guidelines should be followed to achieve optimal graphical performance in-game. This is about structuring and building assets in a smart way so that they export cleanly and easily from their originating software and can then be imported with minimal fuss, performing as best as they can at runtime. Let's take a look at some of these guidelines for meshes and textures.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec11"></a>Meshes - Work only with good topology</h3></div></div></div><p>A good mesh <span>topology</span> consists of all polygons having only three or four sides in the model (not more). Additionally, edge loops should flow in an ordered, regular way along the contours of the model, defining its shape and form:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/6170c0c3-6094-4fd6-b845-8d814faa2ed6.jpg" /></div><p>Clean topology</p><p>On import, Unity automatically <span>converts</span> any <span class="strong"><strong>NGons</strong></span> (polygons with more than four sides) into triangles, if the mesh has any. However, it's better to build meshes without NGons as opposed to relying on Unity's automated methods. Not only does this cultivate good habits at the modeling phase, it also avoids any automatic and unpredictable re-topology of the mesh, which affects how it's shaded and animated.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec12"></a>Meshes - Minimize polygon count</h3></div></div></div><p>Every polygon in a mesh <span>entails</span> a rendering performance hit insofar as a GPU needs time to process and render each polygon. Consequently, it's sensible to minimize the number of a polygons in a mesh, even though modern graphics hardware is adept at working with many polygons. It's a good practice to minimize polygons wherever possible and to the degree that it doesn't detract from your central artistic vision and style:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/51dd7e45-c9f9-457a-b04a-88ac8ef321ea.png" /></div><p>High-poly meshes! (try reducing polygons where possible)</p><p>There are many techniques available to reduce polygon counts. Most 3D applications (such as 3Ds Max, Maya, and Blender) offer automated tools that decimate polygons in a mesh while retaining their basic shape and outline. However, these methods frequently make a mess of topology, leaving you with <span>faces</span> and edge loops leading in all directions. Even so, this can still be useful for reducing polygons in <span class="strong"><strong>static meshes</strong></span> (meshes that never animate), such as statues, houses, or chairs. However, it's typically bad for animated meshes where topology is especially important:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/c5327c2d-858a-4124-9d4e-772555958be4.png" /></div><p>Reducing mesh polygons with automated methods can produce messy topology</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note5"></a>Note</h3><p>If you want to know the total vertex and face count of a mesh, you can use your 3D software statistics. Blender, Maya, 3Ds Max, and most 3D software lets you see vertex and face counts of selected meshes directly from the viewport. However, this information should only be considered a rough guide! This is because after importing a mesh into Unity, the vertex count frequently turns out higher than expected! There are many reasons for this, which is explained in more depth online at: <a class="ulink" href="http://docs.unity3d.com/Manual/OptimizingGraphicsPerformance.html" target="_blank">http://docs.unity3d.com/Manual/OptimizingGraphicsPerformance.html</a>.</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note6"></a>Note</h3><p>In short, use the Unity vertex count as the final word on the actual vertex count of your mesh. To view the vertex count for an imported mesh in Unity, click on the right-arrow on the mesh thumbnail in the Project panel; this shows the internal mesh asset. Select this asset, and then view the vertex count from the preview pane in the <strong class="userinput"><code>Inspector</code></strong> object.</p></div><div class="mediaobject"><img src="/graphics/9781788479837/graphics/1a90b54c-364c-4c72-9da2-a5c9fc84306f.png" /></div><p>Viewing the vertex and face count for meshes in Unity</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec13"></a>Meshes - Simulating bump details without geometry</h3></div></div></div><p>As mentioned, try keeping meshes as low-poly as possible. Low-poly meshes are, however, of lower quality than higher-resolution meshes. They have fewer polygons and thereby hold fewer details. Yet, this need not be problematic. Techniques exist for simulating detail in low-poly meshes, making them appear at a higher resolution <span>than</span> they really are. <span class="strong"><strong>Normal Mapping</strong></span> is one example of this. Normal Maps are special textures that define the orientation and roughness of a mesh surface across its polygons and how those polygons interact <span>with</span> lighting. In short, a Normal Map specifies how lighting interacts over a mesh and ultimately effects how the mesh is shaded in game. This influences how we perceive the details--how bumpy and rough a surface is. The extent of bump and detail is controlled by pixels in the Normal Map. You can produce Normal Maps in many ways, for example, typically using 3D modeling software. By producing two mesh versions in 3D Modelling Software (namely, a high-poly version containing all the required details sculpted into the model, and a low-poly version to receive the details), you can bake normal information from the high-poly mesh to the low-poly mesh via a texture file. That is, you can sculpt a high-resolution mesh and then transfer the details from the high-res to the low-res version by saving the detail to a Normal Map. This approach (known as Normal Map Baking) can lead to stunningly accurate and believable results, as follows:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/bf7e818b-0246-4ce1-b3a7-049ebc27c168.png" /></div><p>Simulating high-poly detail with Normal Maps</p><p>However, if you don't have any Normal Map for an imported mesh, Unity can generate them from a standard, diffuse texture via the <strong class="userinput"><code>Normal Import Settings</code></strong>. This may not produce the most believable and physically accurate results, like Normal Map Baking, but it's useful to quickly and easily generate displacement details, enhancing the mood and realism of a scene. To create a <strong class="userinput"><code>Normal map</code></strong> from a diffuse texture, first select the imported texture from the <strong class="userinput"><code>Project</code></strong> panel and duplicate it; ensure that the original version is not invalidated or affected. Then, from the object <strong class="userinput"><code>Inspector</code></strong>, change the <strong class="userinput"><code>Texture Type</code></strong> (for the duplicate texture) from texture to <strong class="userinput"><code>Normal map</code></strong>. This changes how Unity understands and works with the texture:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/66e14002-80ec-4291-bfb6-d963bf250b16.png" /></div><p>Configuring texture as a Normal map</p><p>Specifying Normal Map for a texture configures Unity to use and work with that texture in a specialized, optimized way for generating bump details on your model. However, when creating a Normal Map from a diffuse texture, you'll also need to enable the <strong class="userinput"><code>Create from Grayscale</code></strong> checkbox. When enabled, Unity generates a Normal Map from a grayscale version of the diffuse texture, using the <strong class="userinput"><code>Bumpiness</code></strong> and <strong class="userinput"><code>Filtering</code></strong> settings, as follows:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/d3586889-455a-4c6c-8b53-a8edaea44c2b.png" /></div><p>Enable Create from Grayscale for Normal maps</p><p>With <strong class="userinput"><code>Create from Grayscale</code></strong> enabled, you can use the <strong class="userinput"><code>Bumpiness</code></strong> slider to intensify and weaken the bump effect and the <strong class="userinput"><code>Filtering</code></strong> setting to control the roughness or smoothness of the bump. When you've adjusted the settings as needed, confirm the changes and preview the result by clicking on the <strong class="userinput"><code>Apply</code></strong> button from the <strong class="userinput"><code>Inspector</code></strong> object:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/16ec451c-cc90-4d19-9c48-7c6b44ecab6f.png" /></div><p>Customizing an imported Normal Map</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec14"></a>Meshes - Minimize UV seams</h3></div></div></div><p><span class="strong"><strong>Seams</strong></span> are edge cuts inserted into a <span>mesh</span> during UV mapping to help it unfold, flattening out into a 2D space for <span>the</span> purpose of texture assignment. This process is achieved in 3D modeling software, but the cuts it makes are highly important <span>for</span> properly unfolding a model and getting it to look as intended inside Unity. An edge is classified as a seam in UV space when it has only one neighboring face, as opposed to two. Essentially, the seams determine how a mesh's UVs are cut apart into separate UV shells or UV islands, which are arranged into a final UV layout. This layout maps a texture onto the mesh surface, as follows:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/79d593a5-e608-4841-8fa5-0e8852951e5d.png" /></div><p>Creating a UV layout</p><p>Always minimize UV seams where feasible by joining together disparate edges, shells, or islands, forming larger units. This is not something you do in Unity, but in your 3D modeling software. Even so, by doing this, you potentially reduce the vertex count and complexity of your mesh. This leads to improved runtime performance in Unity. This is because Unity must duplicate all vertices along the seams to accommodate the rendering standards for most real-time graphics hardware. Thus, wherever there are seams, there will be a doubling up of vertices, as shown here:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/8df9b8f5-480c-45a9-9f4f-3e56d5edec36.png" /></div><p>Binding together edges and islands to reduce UV seams</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec15"></a>Meshes - Export as FBX</h3></div></div></div><p>Unity officially supports many <span>mesh</span> import formats, including <code class="literal">.ma</code>, <code class="literal">.mb</code>, <code class="literal">.max</code>, <code class="literal">.blend</code>, and others. Details and comparisons of these are found online at: <a class="ulink" href="http://docs.unity3d.com/Manual/3D-formats.html" target="_blank">http://docs.unity3d.com/Manual/3D-formats.html</a>. Unity divides <span>mesh</span> formats into two main groups: <span class="strong"><strong>exported</strong></span> and <span class="strong"><strong>proprietary</strong></span>. The <span class="strong"><strong>exported formats</strong></span> include <code class="literal">.fbx</code> and <code class="literal">.dae</code>. These are meshes exported manually from 3D modeling software into an independent data-interchange format, which is <span>industry</span> recognized. It's feature limited, but widely supported. The <span class="strong"><strong>proprietary formats</strong></span>, in contrast, are application-specific formats that support a wider range of features, but at the cost of compatibility. In short, you should almost always use the exported FBX file format. This is the <span>most</span> widely supported, used, and tested format within the Unity community and supports imported meshes of all types, both static and animated; it gives the best results. If you choose a proprietary format, you'll frequently end up importing additional 3D objects that you'll never use in your game, and your Unity project is automatically tied to the 3D software itself. That is, you'll need a fully licensed copy of your 3D software on every machine for which you intend to open your Unity project; this is annoying:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/45faa80b-05cb-4f2b-a35d-a9cb8a5cd29b.png" /></div><p><span>Exporting</span> meshes to an FBX file, works best with Unity</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec16"></a>Meshes - Use meters scale (metric)</h3></div></div></div><p>Unity measures 3D space using the metric system, and 1 world unit is understood, by the physics system, to mean 1 meter. Unity is configured to <span>work</span> with models from most 3D applications using their default settings. However, sometimes your models will appear too big or small when imported. This usually happens when your world units are not configured to metric in your 3D modeling software. The details of how to change units varies for each piece of software, such as Blender, Maya, or 3Ds Max. Each program allows unit customization from the <strong class="userinput"><code>Preferences</code></strong> menu:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/f00686a8-62e5-43c3-a321-0662bb424794.png" /></div><p>Configuring 3D software to metric units</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec17"></a>Textures - Never use lossy compression</h3></div></div></div><p>Always save your textures in lossless formats, such as PNG, TGA, or PSD; avoid lossy formats such as JPG, even though they're typically smaller in file size. JPG may be ideal for website images or for sending holiday snaps to your friends and <span>family</span> but for creating video game textures, they are problematic--they lose quality exponentially with each successive save operation. By using lossless formats and removing JPG from every step of your workflow (including the intermediary steps), your textures can remain crisp and sharp:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/a361c6a8-f77e-4188-b42e-406cb09b8934.png" /></div><p>Saving textures to PNG files</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec18"></a>Textures - Power of 2 sizes</h3></div></div></div><p>If your textures are for 3D models and meshes (not sprites or GUI elements), then make their dimensions power-2 size for <span>best</span> results. The textures needn't be square (equal in width and height), but each dimension should be from a range of power-2 sizes--though some target platforms and situations make this a requirement. Valid sizes include 32, 64, 128, 256, <strong class="userinput"><code>512</code></strong>, 1024, 2048, 4096, and 8192. Sizing textures to a power-2 dimension helps Unity scale textures up and down as well as copy pixels between textures as needed, across the widest range of graphical hardware:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/1736ed7e-2463-4f97-b06d-e771b2f1ee09.png" /></div><p>Creating textures at power-2 sizes</p><p>When creating textures, it's always best to design for the largest possible power-2 size you'll need (as opposed to the largest possible size allowed), and then to downscale wherever appropriate to smaller power-2 sizes for older hardware and weaker systems, such as mobile devices. For each imported texture, you can use the Unity platform tabs from the Inspector object to specify an appropriate maximum size for each texture on a specific platform: one for desktop systems, one for Android, one for iOS, and so on. This caps the maximum size allowed for the selected target on a per-platform basis. This value should be the smallest size that is compatible with your artistic intentions and intended quality:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/17deaea4-fe3c-4982-939a-0836b00985b8.png" /></div><p>Overriding texture sizes for other platforms</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec19"></a>Textures - Alpha textures</h3></div></div></div><p><span class="strong"><strong>Alpha textures</strong></span> are textures with transparency. When applied to 3D models, they make areas of the model transparent, allowing objects <span>behind</span> it to show through. Alpha textures can be either TGA files with dedicated <span>alpha</span> channels or PNG files with transparent pixels. In either case, alpha textures can render with artifacts in Unity if they're not created and imported correctly:</p><div class="mediaobject"><img src="/graphics/9781788479837/graphics/f244618a-6bd1-4843-a28e-7d46b9ac14da.png" /></div><p>Creating alpha textures</p><p>If you need to use <span>alpha</span> textures, ensure that you check out the official Unity documentation on how to export them for optimal results at: <a class="ulink" href="http://docs.unity3d.com/Manual/HOWTO-alphamaps.html" target="_blank">http://docs.unity3d.com/Manual/HOWTO-alphamaps.html</a>.</p></div></div>