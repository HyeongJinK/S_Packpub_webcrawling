<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch06lvl1sec42"></a>Understanding the Unity characters</h2></div></div><hr /></div><p>A first-person<a id="id306" class="indexterm"></a> character is such a key asset in a VR project that we really should understand its components inside out. So, before we go about building one for our project, it would be a good idea to take a close look at the built-in components and standard assets that Unity provides.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec63"></a>Unity components</h3></div></div></div><p>As you<a id="id307" class="indexterm"></a> probably know, each Unity game object <a id="id308" class="indexterm"></a>contains a set of associated <span class="strong"><strong>components</strong></span>. Unity includes many<a id="id309" class="indexterm"></a> types of built-in components, which you can see by browsing the <span class="strong"><strong>Component</strong></span> menu in the main menu bar. Each component adds properties and behaviors to the object that it belongs to. A component's properties are accessible via the Unity editor's <span class="strong"><strong>Inspector</strong></span> panel and scripts. A script attached to a game object is also a type of component, and may have properties that you can set in the <span class="strong"><strong>Inspector</strong></span> panel.</p><p>The component <a id="id310" class="indexterm"></a>types used to implement first-person <a id="id311" class="indexterm"></a>characters include the <span class="strong"><strong>Camera</strong></span>, <span class="strong"><strong>Character Controller</strong></span>, and/or <span class="strong"><strong>Rigidbody</strong></span>, and various scripts. Let's review each of these standard components.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch06lvl3sec01"></a>The Camera component</h4></div></div></div><p>The Camera<a id="id312" class="indexterm"></a> component specifies the viewing parameters that are used to render the scene on each frame update. Any object with a Camera component is considered a <span class="emphasis"><em>camera object</em></span>. Naturally, we've been using a camera in our scenes since we started, and we've been accessing it in the scripts that we've written.</p><p>A stereographic VR camera object renders two views, one for each eye. In VR, the camera controller scripts read data from the headset's motion sensors to determine the current head pose (position, direction, and rotation) and set the cameras' transform appropriately.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch06lvl3sec02"></a>The Rigidbody component</h4></div></div></div><p>When you <a id="id313" class="indexterm"></a>add a Rigidbody component to any Unity game object, it will benefit from the calculations that are performed by the <span class="strong"><strong>physics engine</strong></span>. Rigidbodies <a id="id314" class="indexterm"></a>have parameters for gravity, mass, and drag, among others. During game play, the physics engine calculates each rigid object's <span class="emphasis"><em>momentum</em></span> (mass, speed, and direction).</p><p>Rigid objects interact with other rigid objects. For example, if they collide, they'll bounce off each other and the parameters of the interaction can be controlled using a <span class="strong"><strong>physic material</strong></span> with <a id="id315" class="indexterm"></a>properties, such as friction and bounce factor.</p><p>Rigidbodies can be flagged as <span class="emphasis"><em>kinematic</em></span>, which is usually only used when the object is driven by animation or scripts. Collisions will not affect kinematic objects, but they will still affect the motion of other Rigidbodies. It's mostly used when objects are chained together with <span class="emphasis"><em>joints</em></span>, like the ones connecting a humanoid's bones or a swinging pendulum.</p><p>Any rigid object, given a child camera object, becomes a rigid first-person character. Then, you can add scripts to handle user input to move, jump, look around, and so on.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch06lvl3sec03"></a>The Character Controller component</h4></div></div></div><p>Like a Rigidbody, the <span class="strong"><strong>Character Controller</strong></span> (<span class="strong"><strong>CC</strong></span>) component is used for collision detection and character <a id="id316" class="indexterm"></a>movement. It needs scripts <a id="id317" class="indexterm"></a>to handle the user input to move, jump, and look around, too. However, it doesn't automatically have the physics built in.</p><p>The CC component is specifically designed for character objects because characters in a game often are not really expected to behave the same as other physics-based objects. It can be used instead of, or in addition to, a Rigidbody.</p><p>The CC<a id="id318" class="indexterm"></a> component has a built-in <span class="strong"><strong>Capsule Collider</strong></span> behavior to detect collisions. However, it doesn't automatically use the physics engine to <span class="emphasis"><em>respond</em></span> to the collision.</p><p>For example, if a CC object hits a rigid object, such as a wall, it will just stop. It won't bounce. If a rigid object, such as a flying brick hits a CC object, the brick will get deflected (bounce) based on its own properties, but the CC object will not be affected. Of course, if you want to include behavior like this on the CC object, you can program that in your own scripts.</p><p>The CC component does have an especially good support for one force in its scripting APIâ€”<span class="emphasis"><em>gravity</em></span>. Built-in parameters are specifically related to keeping the object's feet on the ground. For example, the <span class="strong"><strong>Step Offset</strong></span> parameter defines how high a step the character can hop onto rather than being an obstacle that blocks his way. Similarly, the <span class="strong"><strong>Slope Limit</strong></span> parameter says how big an incline is too steep and whether it should be treated like a wall. In your scripts, you can use the <code class="literal">Move()</code> method and the <code class="literal">IsGrounded</code> variable to implement character behavior.</p><p>Unless you script it, a CC object has no momentum and can stop on a dime. It feels very precise, but this could also lead to a jerky movement. The opposite is so for Rigidbody objects, which feel more fluid because they have momentum, acceleration and deceleration, and obey the laws of physics. In VR, we'd ideally like some combination of the two.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec64"></a>Unity Standard Assets</h3></div></div></div><p>The <span class="strong"><strong>Characters</strong></span> package<a id="id319" class="indexterm"></a> in Unity <span class="strong"><strong>Standard Assets</strong></span> comes <a id="id320" class="indexterm"></a>with a number of third- and first-person character prefab objects. These prefab objects are compared in the following tables:</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; "><colgroup><col align="left" /><col align="left" /></colgroup><thead><tr><th style="border-bottom: 0.5pt solid ; " align="left" valign="bottom">
<p>Prefab</p>
</th><th style="border-bottom: 0.5pt solid ; " align="left" valign="bottom">
<p>Components</p>
</th></tr></thead><tbody><tr><td style="" align="left" valign="top">
<div class="mediaobject"><img src="/graphics/9781783988556/graphics/B04781_06_02.jpg" /></div>
</td><td style="" align="left" valign="top">
<div class="mediaobject"><img src="/graphics/9781783988556/graphics/B04781_06_03.jpg" /></div>
</td></tr><tr><td style="" align="left" valign="top">
<div class="mediaobject"><img src="/graphics/9781783988556/graphics/B04781_06_04.jpg" /></div>
</td><td style="" align="left" valign="top">
<div class="mediaobject"><img src="/graphics/9781783988556/graphics/B04781_06_05.jpg" /></div>
</td></tr><tr><td style="" align="left" valign="top">
<div class="mediaobject"><img src="/graphics/9781783988556/graphics/B04781_06_06.jpg" /></div>
</td><td style="" align="left" valign="top">
<div class="mediaobject"><img src="/graphics/9781783988556/graphics/B04781_06_07.jpg" /></div>
</td></tr><tr><td style="" align="left" valign="top">
<div class="mediaobject"><img src="/graphics/9781783988556/graphics/B04781_06_08.jpg" /></div>
</td><td style="" align="left" valign="top">
<div class="mediaobject"><img src="/graphics/9781783988556/graphics/B04781_06_09.jpg" /></div>
</td></tr><tr><td style="" align="left" valign="top">
<div class="mediaobject"><img src="/graphics/9781783988556/graphics/B04781_06_10.jpg" /></div>
</td><td style="" align="left" valign="top">
<div class="mediaobject"><img src="/graphics/9781783988556/graphics/B04781_06_11.jpg" /></div>
</td></tr></tbody></table></div><p>Let's <a id="id321" class="indexterm"></a>discuss this in more detail.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch06lvl3sec04"></a>ThirdPersonController</h4></div></div></div><p>We've<a id="id322" class="indexterm"></a> already used both of the third-person prefabs, <code class="literal">ThirdPersonController</code> and <code class="literal">AIThirdPersonController</code>, in <a class="link" href="#" linkend="ch02">Chapter 2</a>, <span class="emphasis"><em>Objects and Scale</em></span>, and <a class="link" href="#" linkend="ch04">Chapter 4</a>, <span class="emphasis"><em>Gaze-based Control</em></span>, respectively.</p><p>The <code class="literal">ThirdPersonController</code> prefab has child objects that define the character's body, namely, our friend Ethan. He is a rigged avatar (from the <code class="literal">.fbx</code> file), which means that humanoid animations can be applied to make him walk, run, jump, and so on.</p><p>The <code class="literal">ThirdPersonController</code> prefab uses a Rigidbody for physics and Capsule Collider for collision detection.</p><p>It has two scripts. A <code class="literal">ThirdPersonUserControl</code> script takes user input, such as keyboard presses, and tells the character to move, jump, and so on. A <code class="literal">ThirdPersonCharacter</code> script implements physics behind movements and calls the animations that are needed for running, crouching, and so on.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch06lvl3sec05"></a>AIThirdPersonController</h4></div></div></div><p>The <code class="literal">AIThirdPersonController</code> prefab is identical to the <code class="literal">ThirdPersonController</code> prefab, but<a id="id323" class="indexterm"></a> the former adds a <code class="literal">NavMeshAgent</code> and an <code class="literal">AICharacterControl</code> script, which constrains where and how the character can move around the scene. If you recall, in <a class="link" href="#" linkend="ch04">Chapter 4</a>, <span class="emphasis"><em>Gaze-based Control</em></span>, we used the <code class="literal">AICharacterController</code> to make Ethan walk around the scene and avoid bumping into objects.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch06lvl3sec06"></a>FirstPersonController</h4></div></div></div><p>The <code class="literal">FPSController</code> prefab is a first-person controller that uses both a CC component and a <a id="id324" class="indexterm"></a>Rigidbody. It has a child camera attached to it. When the character moves, the camera moves with it.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip19"></a>Note</h3><p>The core distinction between third-person controller prefabs and first-person controller prefabs is the child object. Third-person controller prefabs have a rigged humanoid child object, while first-person controller prefabs have a camera child object.</p></div><p>Its body mass is set to a low value (<code class="literal">1</code>) and <code class="literal">IsKinematic</code> is enabled. This means that it will have limited momentum and does not react to other rigid objects, but it can be driven by animations.</p><p>Its <code class="literal">FirstPersonController</code> script offers a plethora of parameters for running, jumping, audible footsteps, and more. The script also includes parameters and animations for a <span class="emphasis"><em>head bob</em></span>, which bounces the camera in a natural way when the character is moving. If you use the <code class="literal">FPSController</code> script in your VR project, <span class="emphasis"><em>be sure to disable any head bob features</em></span> or you might need to clean the puke off your keyboard!</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch06lvl3sec07"></a>RigidBodyFPSController</h4></div></div></div><p>The <code class="literal">RigidBodyFPSController</code> prefab is a first-person controller with a Rigidbody but no CC <a id="id325" class="indexterm"></a>component. Like <code class="literal">FPSController</code>, it has a child camera object. When the character moves, the camera moves with it.</p><p>A <code class="literal">RigidBodyFPSController</code> prefab's body mass is more substantial, set to 10, and is not kinematic. That is, it <span class="emphasis"><em>can</em></span> get bounced around when it collides with other objects. It has a separate Capsule Collider component with <code class="literal">ZeroFriction</code> physic material. The <code class="literal">RigidBodyFirstPersonController</code> script is different from the <code class="literal">FPSController</code> one, but the former has a lot of similar parameters.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note15"></a>Note</h3><p>
<span class="strong"><strong>Why am I going through all of this detail here?</strong></span>
</p><p>If you've built any non-VR projects in Unity, then you've most likely used these prefabs. However, you might not have paid much attention to how they're assembled. Virtual reality is experienced from the first-person perspective. Our implementation toolbox is Unity. It is critical that you really understand Unity's tools to<a id="id326" class="indexterm"></a> manage and control this first-person experience.</p></div></div></div></div>