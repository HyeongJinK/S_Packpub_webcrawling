<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch10lvl1sec76"></a>Setting up a simple scene</h2></div></div><hr /></div><p>Let's jump<a id="id577" class="indexterm"></a> right in and make our own multiplayer demo project.</p><p>For instructional purposes, we'll start out with a very simple scene with a standard first-person camera to get the networking implemented. Then, we'll adapt it to VR.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec101"></a>Creating a scene environment</h3></div></div></div><p>To get <a id="id578" class="indexterm"></a>set up, we will make a new scene with a ground plane and a cube, then we'll create a basic first-person character.</p><p>Create a new scene by navigating to <span class="strong"><strong>File</strong></span> | <span class="strong"><strong>New Scene</strong></span>. Then, <span class="strong"><strong>File</strong></span> | <span class="strong"><strong>Save Scene As...</strong></span> and name the scene <code class="literal">MultiPlayer</code>.</p><p>Create a new <a id="id579" class="indexterm"></a>plane by navigating to <span class="strong"><strong>GameObject</strong></span> | <span class="strong"><strong>3D Object</strong></span> | <span class="strong"><strong>Plane</strong></span>, rename it <code class="literal">GroundPlane</code>, and reset its <span class="strong"><strong>Transform</strong></span> using the <span class="strong"><strong>Transform</strong></span> component's <span class="emphasis"><em>gear</em></span> icon | <span class="strong"><strong>Reset</strong></span>. Make the plane bigger by setting <span class="strong"><strong>Scale</strong></span> to (<code class="literal">10, 1, 10</code>). Perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Make <code class="literal">GroundPlane</code> easier on the eyes with a gray material. Navigate to <span class="strong"><strong>Assets</strong></span> | <span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>Material</strong></span>, name it <code class="literal">Gray</code>, click on its <span class="strong"><strong>Albedo</strong></span> color chip, and select a neutral gray, such as RGB (150, 150, 150). Drag the <code class="literal">Gray</code> material onto <code class="literal">GroundPlane</code>.</p></li><li><p>To provide some context and orientation, we'll just add a cube. Navigate to <span class="strong"><strong>GameObject</strong></span> | <span class="strong"><strong>3D Object</strong></span> | <span class="strong"><strong>Cube</strong></span>, reset its <span class="strong"><strong>Transform</strong></span> using the <span class="strong"><strong>Transform</strong></span> component's <span class="emphasis"><em>gear</em></span> icon | <span class="strong"><strong>Reset</strong></span>. Set its <span class="strong"><strong>Position</strong></span> a bit to the side to something like (<code class="literal">-2, 0.75, 1</code>).</p></li><li><p>Give the cube some color. Navigate to <span class="strong"><strong>Assets</strong></span> | <span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>Material</strong></span>, name it <code class="literal">Red</code>, click on its <span class="strong"><strong>Albedo</strong></span> color chip, and select a nice red, such as RGB (<code class="literal">240, 115, 115</code>). Drag the <code class="literal">Red</code> material onto the cube.</p></li></ol></div><p>Next, we'll add a standard first-person character, <code class="literal">FPSController</code>, as follows:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>If you do not have the standard <span class="strong"><strong>Characters</strong></span> assets package loaded, navigate to <span class="strong"><strong>Assets</strong></span> | <span class="strong"><strong>Import Package</strong></span> | <span class="strong"><strong>Characters</strong></span> and choose <span class="strong"><strong>Import</strong></span>.</p></li><li><p>Find the <code class="literal">FPSController</code> in <span class="strong"><strong>Project Assets / Standard Assets / Characters / FirstPersonCharacter / Prefabs / FPSController</strong></span> and drag it into the scene.</p></li><li><p>Reset its <span class="strong"><strong>Transform</strong></span> using the <span class="strong"><strong>Transform</strong></span> component's <span class="emphasis"><em>gear</em></span> icon | <span class="strong"><strong>Reset</strong></span>. Set it looking at the front of objects. Set <span class="strong"><strong>Position</strong></span> to (<code class="literal">5, 1.4, 3</code>) and <span class="strong"><strong>Rotation</strong></span> to (<code class="literal">0, 225, 0</code>).</p></li><li><p>With <code class="literal">FPSController</code> selected, in the <span class="strong"><strong>Inspector</strong></span>, on the <span class="strong"><strong>First Person Controller</strong></span> component, check off the <span class="strong"><strong>Is Walking</strong></span> checkbox and set <span class="strong"><strong>Walk Speed</strong></span> to <code class="literal">1</code>.</p></li></ol></div><p>If you're currently using a project with VR enabled in <span class="strong"><strong>Player Settings</strong></span>, please disable it for the time being:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Navigate to <span class="strong"><strong>File</strong></span> | <span class="strong"><strong>Build Settings...</strong></span>. In the <span class="strong"><strong>Build Settings</strong></span> dialog box, select <span class="strong"><strong>Player Settings...</strong></span> and then, under <span class="strong"><strong>Other Settings</strong></span>, uncheck the <span class="strong"><strong>Virtual Reality Supported</strong></span> checkbox.</p></li><li><p>Save the scene. Click on the <span class="emphasis"><em>Play</em></span> mode and verify that you can move and look around as usual using a keyboard (<span class="emphasis"><em>WASD</em></span>), arrows, and a mouse.</p></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec102"></a>Creating an avatar head</h3></div></div></div><p>Next, you'll need<a id="id580" class="indexterm"></a> an avatar to represent yourself and your friends. Again, I'm going to keep this super simple so that we can focus on the fundamentals. Forget about a body for now. Just make a floating head with a face. Here's what I did. Your mileage may vary. Just be sure that it's facing forward (the positive Z direction):</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Create an avatar container. Navigate to <span class="strong"><strong>GameObject</strong></span> | <span class="strong"><strong>Create Empty</strong></span>, rename it <code class="literal">Avatar</code>, reset its transformation using the <span class="strong"><strong>Transform</strong></span> component's <span class="emphasis"><em>gear</em></span> icon | <code class="literal">Reset</code>. Set its <code class="literal">Position</code> to eye level, such as (<code class="literal">0, 1.4, 0</code>).</p></li><li><p>Create a sphere under the <code class="literal">Avatar</code> for the head. Navigate to <span class="strong"><strong>GameObject</strong></span> | <span class="strong"><strong>3D Object</strong></span> | <span class="strong"><strong>Sphere</strong></span>, rename it <code class="literal">Head</code>, reset its transformation using the <span class="strong"><strong>Transform</strong></span> component's <span class="emphasis"><em>gear</em></span> icon | <span class="strong"><strong>Reset</strong></span>, and set <span class="strong"><strong>Scale</strong></span> to (<code class="literal">0.5, 0.5, 0.5</code>).</p></li><li><p>Give the head some color. Navigate to <span class="strong"><strong>Assets</strong></span> | <span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>Material</strong></span>, name it <code class="literal">Blue</code>, click on its <span class="strong"><strong>Albedo</strong></span> color chip, and select a nice blue, such as RGB (<code class="literal">115, 115, 240</code>). Drag the <code class="literal">Blue</code> material onto the <code class="literal">Head</code>.</p></li><li><p>The dude has got to be cool (albeit bald headed). We'll borrow a pair of Ethan's glasses and put them on the head. Navigate to <span class="strong"><strong>GameObject</strong></span> | <span class="strong"><strong>Create Empty</strong></span>, rename it <code class="literal">Glasses</code>, reset its transformation using the <span class="strong"><strong>Transform</strong></span> component's <span class="emphasis"><em>gear</em></span> icon | <span class="strong"><strong>Reset</strong></span>, and set its <span class="strong"><strong>Position</strong></span> to (<code class="literal">0, -5.6, 0.1</code>) and <span class="strong"><strong>Scale</strong></span> to (<code class="literal">4, 4, 4</code>).</p></li><li><p>Then, while <code class="literal">Glasses</code> is selected, go to the <code class="literal">Project</code> pane, find <code class="literal">Assets / Standard Assets / Characters / ThirdPersonCharacter / Models / Ethan / EthanGlasses.fbx</code> (the mesh file), and drag it into the <span class="strong"><strong>Inspector</strong></span> panel<span class="emphasis"><em>. Be sure to select the fbx</em></span> version of <code class="literal">EthanGlasses</code>, not the prefab.</p></li><li><p>It has a mesh, but it needs a material. While <code class="literal">Glasses</code> is selected, go to the <span class="strong"><strong>Project</strong></span> pane, find <code class="literal">Assets / Standard Assets / Characters / ThirdPersonCharacter / Materials / EthanWhite</code>, and drag it into the <span class="strong"><strong>Inspector</strong></span> panel.</p></li></ol></div><p>The following screenshot shows a version of mine (which also includes a mouth):</p><div class="mediaobject"><img src="/graphics/9781783988556/graphics/B04781_10_03.jpg" /></div><p>When <a id="id581" class="indexterm"></a>running as multiplayer, an instance of the avatar will get spawned for each connected player. So, we must first save the object as a prefab and remove it from the scene, as follows:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>With <code class="literal">Avatar</code> selected in the <span class="strong"><strong>Hierarchy</strong></span> panel, drag it into <span class="strong"><strong>Project Assets</strong></span>.</p></li><li><p>Select <code class="literal">Avatar</code> again from the <span class="strong"><strong>Hierarchy</strong></span> panel and delete it.</p></li><li><p>Save the scene.</p></li></ol></div><p>OK. Now, we should be ready to add multiplayer networking.</p></div></div>