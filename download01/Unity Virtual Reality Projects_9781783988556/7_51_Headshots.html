<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch07lvl1sec51"></a>Headshots</h2></div></div><hr /></div><p>Wouldn't it be<a id="id411" class="indexterm"></a> fun to actually play with these bouncy balls? Let's make a game â€“ try to aim the ball at a target using headshots. For this game, balls drop one at a time from above and bounce off your forehead (face), aiming for a target.</p><p>
<span class="strong"><strong>Feature</strong></span>: <span class="emphasis"><em>When a ball drops from above your head, you bounce it off your face and aim for a target.</em></span>
</p><p>To implement this, place a cube collider on the <code class="literal">MeMyselfEye</code> head, parented by the VR camera, so our head pose will move the face of the cube. I decided a cube shaped collider will be better for this game than a sphere or capsule, because it provides a flat face (like a paddle) that will make the bounce direction more predictable. Balls will drop out of the sky. For a target, we'll use a flattened cylinder. We'll add audio cues to indicate when a new ball has been released, and when a ball hits the target.</p><p>Create a new scene and implement the head as follows:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Navigate to <span class="strong"><strong>File</strong></span> | <span class="strong"><strong>Save Scene As</strong></span> and name it <code class="literal">BallGame</code>.</p></li><li><p>Delete the <code class="literal">BallsFromHeaven</code> script component attached to <code class="literal">GameController</code> using <span class="emphasis"><em>gear</em></span> icon <span class="strong"><strong>Remove Component</strong></span>. We won't need it.</p></li><li><p>In <span class="strong"><strong>Hierarchy</strong></span>, unfold <code class="literal">MeMyselfEye</code> drilling down to the <span class="strong"><strong>Main Camera</strong></span> object and select it.</p></li><li><p>In <span class="strong"><strong>Inspector</strong></span>, navigate to <span class="strong"><strong>Add Component</strong></span> | <span class="strong"><strong>Physics</strong></span> | <span class="strong"><strong>Box Collider</strong></span>.</p></li><li><p>With <code class="literal">GameController</code> selected, navigate to <span class="strong"><strong>Add Component</strong></span> | <span class="strong"><strong>Audio</strong></span> | <span class="strong"><strong>Audio Source</strong></span>.</p></li><li><p>Click on the small <span class="emphasis"><em>circle-shaped</em></span> icon on the far right of the <span class="strong"><strong>AudioClip</strong></span> field of <span class="strong"><strong>Audio Source</strong></span> to open the <span class="strong"><strong>Select AudioClip</strong></span> dialog box and choose the clip named <code class="literal">Jump</code>.</p></li><li><p>With <code class="literal">GameController</code> selected, navigate to <span class="strong"><strong>Add Component</strong></span> | <span class="strong"><strong>New Script</strong></span>, name it <code class="literal">BallGame</code>, and open it in MonoDevelop.</p></li></ol></div><p>Note the box collider in the <span class="strong"><strong>Scene</strong></span> view; it encases the head/camera of your first-person character (as shown in following image). We'll play the <code class="literal">Jump</code> sound clip (provided with the <span class="strong"><strong>Characters</strong></span> package of Unity's <span class="strong"><strong>Standard Assets</strong></span>) to indicate when a new ball is dropped.</p><p>Here's the <code class="literal">BallGame.cs</code> script:</p><div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;

public class BallGame : MonoBehaviour {
  public GameObject ball;
  public float startHeight = 10f;
  public float fireInterval = 5f;

  private float nextBallTime = 0.0f;
  private GameObject activeBall;
  private Transform head;
  private AudioSource audio;

  void Start () {
    head = Camera.main.transform;
    audio = GetComponent&lt;AudioSource&gt; ();
  }

  void Update () {
    if (Time.time &gt; nextBallTime) {
      nextBallTime = Time.time + fireInterval;
      audio.Play ();
      Vector3 position = new Vector3( head.position.x, startHeight, head.position.z + 0.2f );
      activeBall = Instantiate( ball, position, Quaternion.identity ) as GameObject;
    }
  }
}</pre></div><p>We instantiate<a id="id412" class="indexterm"></a> a new ball every <code class="literal">fireInterval</code> seconds from a <code class="literal">startHeight</code> position above the current head position and a small amount in front (<code class="literal">0.2f</code>) so that it doesn't land directly at the top of our head. No rotation is applied to the ball (<code class="literal">Quaternion.identity</code>).</p><p>Populate the public variables in Unity editor, as follows:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>With <code class="literal">GameController</code> selected, drag the <code class="literal">BouncyBall</code> from <span class="strong"><strong>Project Assets</strong></span> onto the <span class="strong"><strong>Ball</strong></span> field of the <span class="strong"><strong>Ball Game</strong></span> panel in <span class="strong"><strong>Inspector</strong></span>.</p></li><li><p>Try it in VR.</p></li></ol></div><p>When you hear the ball, look up and aim the angle of your face to direct the bounce of the ball. <span class="emphasis"><em>COOOL!</em></span>
</p><p>Now, we need the target. Perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Create a flat cylinder for the target, navigate to <span class="strong"><strong>Game Object</strong></span> | <span class="strong"><strong>3D Object</strong></span> | <span class="strong"><strong>Cylinder</strong></span>, and name it <code class="literal">Target</code>.</p></li><li><p>Set its <span class="strong"><strong>Scale</strong></span> to (<code class="literal">3</code>, <code class="literal">0.1</code>, <code class="literal">3</code>) and <span class="strong"><strong>Position</strong></span> to (<code class="literal">1</code>, <code class="literal">0.2</code>, <code class="literal">2.5</code>) so that it's out in front of you on the ground.</p></li><li><p>Drag the <code class="literal">Blue</code> material from the <code class="literal">Project Assets/Materials</code> folder (created in <a class="link" href="#" linkend="ch02">Chapter 2</a>, <span class="emphasis"><em>Objects and Scale</em></span>) onto it.</p></li><li><p>Note that its default Capsule Collider is domed, and it really won't do. On the Capsule Collider, select its <span class="emphasis"><em>gear</em></span> icon | <span class="strong"><strong>Remove Component</strong></span>.</p></li><li><p>Then, navigate to <span class="strong"><strong>Add Component</strong></span> | <span class="strong"><strong>Physics</strong></span> | <span class="strong"><strong>Mesh Collider</strong></span>.</p></li><li><p>In the new <span class="strong"><strong>Mesh Collider</strong></span>, check off the <span class="strong"><strong>Convex</strong></span> checkbox and the <span class="strong"><strong>Is Trigger</strong></span> checkbox.</p></li><li><p>Add an audio source by navigating to <span class="strong"><strong>Add Component</strong></span> | <span class="strong"><strong>Audio</strong></span> | <span class="strong"><strong>Audio Source</strong></span>.</p></li><li><p>With the <code class="literal">Target</code> selected, click on the small <span class="emphasis"><em>circle</em></span> icon on the far right of the <span class="strong"><strong>AudioClip</strong></span> field to open the <span class="strong"><strong>Select AudioClip</strong></span> dialog box, and choose the clip named <code class="literal">Land</code>.</p></li><li><p>And a new script, navigate to <span class="strong"><strong>Add Component</strong></span> | <span class="strong"><strong>New Script</strong></span>, name it <code class="literal">TriggerSound</code>, and open it in MonoDevelop.</p></li></ol></div><p>The <a id="id413" class="indexterm"></a>following <code class="literal">TriggerSound.cs</code> script will play a sound clip when you hit the target:</p><div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;

public class TriggerSound : MonoBehaviour {
  public AudioClip hitSound;

  void Start() {
    audio = GetComponent&lt;AudioSource&gt; ();
  }

  void OnTriggerEnter(Collider other) {
    audio.Play ();
  }
}</pre></div><p>The script uses the <code class="literal">OnTriggerEnter()</code> message handler to know when to play the audio clip. We're repurposing the <code class="literal">Land</code> clip that was provided with the <span class="strong"><strong>Characters</strong></span> package under Unity's <span class="strong"><strong>Standard Assets</strong></span>.</p><p>Try it in VR. It's a <a id="id414" class="indexterm"></a>VR game! The following image shows the scene with the first-person's colliders and a ball bouncing off the cube collider towards the target:</p><div class="mediaobject"><img src="/graphics/9781783988556/graphics/B04781_07_03.jpg" /></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note18"></a>Note</h3><p>
<span class="strong"><strong>Extra challenge</strong></span>: Keep score. Provide an aiming reticle. Add a backboard. Add other features to make the game more challenging. For instance, you can vary the fire interval or increase the initial ball velocity.</p></div><p>Up to this point, we assigned <span class="strong"><strong>Bounciness</strong></span> through a Physic Material attached to a sphere object. When the ball collides with another object, the Unity physics engine considers this bounciness to determine the ball's new velocity and direction. In the following section, we'll look at how <a id="id415" class="indexterm"></a>one can transfer a bounce force from one object to another.</p></div>