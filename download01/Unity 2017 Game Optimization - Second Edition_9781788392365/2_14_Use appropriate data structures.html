<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec14"></a>Use appropriate data structures</h2></div></div><hr /></div><p>C# offers many different data structures in the <code class="literal">System.Collections</code> namespace and we shouldn't become too accustomed with using the same ones over and over again. A common performance problem in software development is making use of an inappropriate data structure for the problem we're trying to solve simply because its convenient. The two most commonly used are perhaps lists (<code class="literal">List&lt;T&gt;</code>), and dictionaries (<code class="literal">Dictionary&lt;K,V&gt;</code>).</p><p>If we want to iterate through a set of objects then a list is preferred, since it is effectively a dynamic array where the objects and/or references reside next to one another in memory, and therefore iteration causes minimal cache misses. Dictionaries are best used if two objects are associated with one-another and we wish to acquire, insert, or remove these associations quickly. For example, we might associate a level number with a particular Scene file, or an <code class="literal">enum</code> representing different body parts on a character, with <code class="literal">Collider</code> Components for those body parts.</p><p>However, it's fairly common where we want a data structure that handles both scenarios; we want to quickly figure out which object maps to another, while also being able to iterate through the group. Typically, the developer of this system will use a dictionary, and then iterate over it. However, this process is unfortunately very slow compared to iterating over a list since it must check every potential hash in the dictionary in order to iterate over it fully.</p><p>In these cases, its often better to store data in both a list and a dictionary to better support this behaviour. This will cost additional memory overhead to maintain multiple data structures, and insertion and deletion will require adding and removing objects from both data structures each time, but the benefits on iteration on the list (which tend to happen way more often) will be a stark contrast compared to iterating over a dictionary.</p></div>