<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch09lvl1sec59"></a>Parallel</h2></div></div><hr /></div><p>The parallel node ticks all of its <a id="id431" class="indexterm"></a>children each time it is ticked from left to right. There are two important settings for the parallel node called child completion and component completion. The child completion parameter determines how the child's return values are handled as follows:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>If set to <code class="literal">SuccessOrFailure</code>, a child output is marked as done whenever that child returns success or failure</p></li><li style="list-style-type: disc"><p>If set to <code class="literal">Success</code>, that child will only get the done stamp if it returns <code class="literal">Success</code>. A return of <code class="literal">Failure</code> will result in the parallel component returning <code class="literal">Failure</code> after having ticked all the children</p></li><li style="list-style-type: disc"><p>The <code class="literal">Failure</code> setting works in the same way. The child will only get the done stamp if it returns <code class="literal">Failure</code></p></li></ul></div><p>The component completion parameter determines when the parallel node returns <code class="literal">Success</code> based on the child node's done stamp as follows:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>If set to <code class="literal">One</code>, the parallel component will return <code class="literal">Success</code> at the end of the first tick where one child's output has been marked as done</p></li><li style="list-style-type: disc"><p>If it is set to <code class="literal">All</code>, the parallel component will continue running until all children have been marked as done</p></li><li style="list-style-type: disc"><p>Until the parallel node can return either <code class="literal">Success</code> or <code class="literal">Failure</code>, each tick on it will result in <code class="literal">Running</code></p></li></ul></div><p>It'd be easier to understand if we look through an example. So, let's set up a tree with a sequence node at the root, a parallel node with two actions, and another action connected to the sequence node. It should look something similar to the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849693400/graphics/3400OT_09_22.jpg" /><div class="caption"><p>Parallel node</p></div></div><p>We'll set the <code class="literal">Component completion</code> <a id="id432" class="indexterm"></a>variable on the parallel node to <code class="literal">All</code> and the <code class="literal">Child completion</code> variable to <code class="literal">Success</code>. So, that means if all the actions, <code class="literal">CheckEmail</code> and <code class="literal">ListenMusic</code>, return <code class="literal">Success</code>, they'll be marked as done and the parallel node will return <code class="literal">Success</code>. Otherwise, it'll return <code class="literal">Failure</code>, and thus the parent sequence node will also return <code class="literal">Failure</code> from that point, <a id="id433" class="indexterm"></a>resulting in the work action, which never gets called.</p><p>So, let's implement the action handlers for <code class="literal">CheckEmail</code> and <code class="literal">ListenMusic</code>. We'll return <code class="literal">Failure</code> from the <code class="literal">ListenMusic</code> action as given in the following code and see what happens:</p><div class="informalexample"><pre class="programlisting">  public BehaveResult TickCheckEmailAction (Tree sender) {
    Debug.Log("Checking email");
    return BehaveResult.Success;
  }

  public BehaveResult TickListenMusicAction (Tree sender) {
    Debug.Log("While listening music!");
    return BehaveResult.Failure;
  }</pre></div><p>You'll notice that the work action was never called. Then change the <code class="literal">ListenMusic</code> action code to return <code class="literal">Success</code>. Now all the actions under the parallel node return <code class="literal">Success</code>, so it'll also return <code class="literal">Success</code> and the sequence will continue to the work action.</p></div>