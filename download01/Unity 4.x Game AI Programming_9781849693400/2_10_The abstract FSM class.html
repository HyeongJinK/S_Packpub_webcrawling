<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec15"></a>The abstract FSM class</h2></div></div><hr /></div><p>Next, we'll implement a generic <a id="id81" class="indexterm"></a>abstract class that defines the methods which our enemy tank AI class has to implement.</p><p>The code in the <code class="literal">FSM.cs</code> file is as follows:</p><div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;

public class FSM : MonoBehaviour 
{
    //Player Transform
    protected Transform playerTransform;

    //Next destination position of the NPC Tank
    protected Vector3 destPos;

    //List of points for patrolling
    protected GameObject[] pointList;

    //Bullet shooting rate
    protected float shootRate;
    protected float elapsedTime;

    //Tank Turret
    public Transform turret { get; set; }
    public Transform bulletSpawnPoint { get; set; }

    protected virtual void Initialize() { }
    protected virtual void FSMUpdate() { }
    protected virtual void FSMFixedUpdate() { }

    // Use this for initialization
    void Start () 
    {
      Initialize();
    }
    
    // Update is called once per frame
    void Update () 
    {
      FSMUpdate();
    }

    void FixedUpdate()
    {
      FSMFixedUpdate();
    }
}</pre></div><p>All that the enemy tanks need to know is the position of player tank, their next destination point, and the list of waypoints to choose, while they're patrolling. Once the player tank is in range, they will <a id="id82" class="indexterm"></a>rotate their <code class="literal">turret</code> object and then start shooting from the bullet spawn point at their fire rate.</p><p>The inherited classes will also need to implement the three methods: <code class="literal">Initialize</code>, <code class="literal">FSMUpdate</code>, and <code class="literal">FSMFixedUpdate</code>. So, this is the abstract class, which our tank AI will be implementing.</p></div>