<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch09lvl1sec53"></a>Decorator</h2></div></div><hr /></div><p>Decorators allow for a conditional entry <a id="id412" class="indexterm"></a>before executing any node connected to it. Custom handlers for decorators can be implemented in the same way we did for actions previously, but following the naming pattern of <code class="literal">BehaveResult Tick{Name}Decorator (Tree sender)</code>. If none is defined, the default <code class="literal">Tick</code> method defined in <code class="literal">IAgent</code> will be used. So, let's set up our behavior in a new tree or replace the tree we had before with a decorator node as shown in the following screenshot. If you create a new tree, make sure to update the <a id="id413" class="indexterm"></a>
<code class="literal">BLAgentBehaveLib.TreeType</code> variable in our <code class="literal">Start</code> function to point to whichever tree you are using. What we want to do is if our new decoration, <code class="literal">ShouldDoMyAction</code>, returns success, we'll execute the <span class="strong"><strong>MyAction</strong></span> action. Otherwise, we'll not run <span class="strong"><strong>MyAction</strong></span>.</p><div class="mediaobject"><img src="/graphics/9781849693400/graphics/3400OT_09_19.jpg" /><div class="caption"><p>Decorator</p></div></div><p>The handler method is defined based on the following procedures:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>If <code class="literal">TickDecorator</code> returns <code class="literal">Success</code>, the child of the decorator will be ticked and the decorator will return the result of that tick</p></li><li style="list-style-type: disc"><p>If <code class="literal">TickDecorator</code> returns <code class="literal">Failure</code>, the child of the decorator will not be ticked and the decorator will return <code class="literal">Success</code>, which means task completed</p></li><li style="list-style-type: disc"><p>If <code class="literal">TickDecorator</code> returns <code class="literal">Running</code>, the child will be ticked and regardless of the result of this tick, the decorator will return <code class="literal">Running</code></p></li></ul></div><p>Now, we'll write our own handler method for the <a id="id414" class="indexterm"></a>
<code class="literal">ShouldDoMyAction</code> decorator. Please note that the method name must be <code class="literal">TickShouldDoMyActionDecorator</code> as follows:</p><div class="informalexample"><pre class="programlisting">  private bool shouldDo = true;

  public BehaveResult TickShouldDoMyActionDecorator (Tree sender) {
    shouldDo = !shouldDo;
    if (shouldDo) {
      Debug.Log ("Should Do!");
      return BehaveResult.Success;
    }
    else {
      Debug.Log ("Shouldn't Do!");
      return BehaveResult.Failure;
    }
  }</pre></div><p>If you run this script, you'll see if the decorator returns <code class="literal">Success</code> the child node is also called and you'll see the log message <a id="id415" class="indexterm"></a>printed by the <code class="literal">TickMyActionAction</code> handler method, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849693400/graphics/3400OT_09_18.jpg" /><div class="caption"><p>Decorator results</p></div></div></div>