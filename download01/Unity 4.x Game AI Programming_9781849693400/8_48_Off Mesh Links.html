<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch08lvl1sec47"></a>Off Mesh Links</h2></div></div><hr /></div><p>Sometimes there could be some gaps <a id="id379" class="indexterm"></a>inside the scene that can make the navigation meshes disconnected. For example, our agents will not be able to find the path if our slopes are not connected to the walls in our previous examples. Or we could have set up points where our agents could jump off the wall and onto the plane below. Unity has a feature called <span class="strong"><strong>Off Mesh Links</strong></span> to connect such gaps. Off Mesh Links can either be set up manually, or generated automatically by Unity's navmesh generator.</p><p>Here's the example scene that we're going to build in this example. As you can see, there's a small gap between the two <a id="id380" class="indexterm"></a>planes. Let's see how to connect these two planes using Off Mesh Links.</p><div class="mediaobject"><img src="/graphics/9781849693400/graphics/3400_08_15.jpg" /><div class="caption"><p>Scene with off mesh linksâ€”NavMesh04-OffMeshLinks.scene</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec53"></a>Generated Off Mesh Links</h3></div></div></div><p>Firstly, we'll use autogenerated Off <a id="id381" class="indexterm"></a>Mesh Links to connect the two planes. The first thing to do is to mark these two planes as <code class="literal">Off Mesh Link Generation</code> static in the property inspector, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849693400/graphics/3400_08_16.jpg" /><div class="caption"><p>Off Mesh Link Generation static</p></div></div><p>Go to the <span class="strong"><strong>Navigation</strong></span> window, and <a id="id382" class="indexterm"></a>notice the following properties under the <span class="strong"><strong>Bake</strong></span> tab. You can set the distance threshold to autogenerate Off Mesh Links.</p><div class="mediaobject"><img src="/graphics/9781849693400/graphics/3400_08_17.jpg" /><div class="caption"><p>Generated Off Mesh Links properties</p></div></div><p>Click on <span class="strong"><strong>Bake</strong></span>, and you should have Off Mesh Links connecting two planes like this:</p><div class="mediaobject"><img src="/graphics/9781849693400/graphics/3400_08_18.jpg" /><div class="caption"><p>Generated Off Mesh Links</p></div></div><p>Now our AI agents can traverse and find the path across both planes. Agents will be essentially teleported to the other plane, once they have reached the edge of the plane and found the Off Mesh Link. Of course, <a id="id383" class="indexterm"></a>if teleporting agents are not what we want, we had better put a bridge in for the agents to cross.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec54"></a>Manual Off Mesh Links</h3></div></div></div><p>If we don't want to generate Off Mesh <a id="id384" class="indexterm"></a>Links along the edge, and we want to force the agents to come to a certain point to be teleported to another plane, we can also manually set up the Off Mesh Links. Here's how:</p><div class="mediaobject"><img src="/graphics/9781849693400/graphics/3400_08_19.jpg" /><div class="caption"><p>Manual Off Mesh Links setup</p></div></div><p>This is our scene with a significant gap between two planes. We placed two pairs of sphere entities on both sides of the plane. <a id="id385" class="indexterm"></a>Choose a sphere, and add an Off Mesh Link by navigating to <span class="strong"><strong>Component</strong></span> | <span class="strong"><strong>Navigation</strong></span> | <span class="strong"><strong>Off Mesh Link</strong></span>. We only need to add this component on one sphere. Next, drag-and-drop the first sphere to the <code class="literal">Start</code> property, and the other sphere to the <code class="literal">End</code> property.</p><div class="mediaobject"><img src="/graphics/9781849693400/graphics/3400_08_20.jpg" /><div class="caption"><p>Off Mesh Link component</p></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note10"></a>Note</h3><p>Unity reference for <a id="id386" class="indexterm"></a>Off Mesh Links can be found at <a class="ulink" href="http://docs.unity3d.com/Documentation/Components/class-OffMeshLink.html" target="_blank">http://docs.unity3d.com/Documentation/Components/class-OffMeshLink.html</a>.</p></div><div class="mediaobject"><img src="/graphics/9781849693400/graphics/3400_08_21.jpg" /><div class="caption"><p>Manual Off Mesh Links generated</p></div></div><p>Go to the <span class="strong"><strong>Navigation</strong></span> window and bake the scene. The planes are now connected with the manual Off Mesh Links that can be used by AI agents to traverse even though there's a gap.</p></div></div>