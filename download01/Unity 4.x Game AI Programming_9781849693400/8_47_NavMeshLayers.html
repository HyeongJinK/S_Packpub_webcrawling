<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch08lvl1sec46"></a>NavMeshLayers</h2></div></div><hr /></div><p>In games with complex environments, <a id="id375" class="indexterm"></a>we usually have some areas that are harder to travel in than others, such as a pond or a lake compared to crossing a bridge. Even though it could be the shortest path to target by crossing the pond directly, we would want our agents to choose the bridge as it makes more sense. In other words, we want to make crossing the pond to be more navigationally expensive than using the bridge. In this section, we'll look at NavMeshLayers, a way to define different layers with different navigation cost values.</p><p>We're going to build a scene as shown in the following figure. There'll be three planes to represent two ground planes connected with a bridge-like structure and a water plane between them. As you can see, it's the shortest path for our tank to cross over the water plane to reach our cube target. But we want our AI agents to choose the bridge if possible and to cross the water plane only if absolutely necessary, such as when the target object is on the water plane.</p><div class="mediaobject"><img src="/graphics/9781849693400/graphics/3400_08_11.jpg" /><div class="caption"><p>Scene with layersâ€”NavMesh03-Layers.scene</p></div></div><p>The scene hierarchy can be seen in the following screenshot. Our game level is composed of planes, slopes, and walls. We've <a id="id376" class="indexterm"></a>a tank entity and a destination cube with the <code class="literal">Target.cs</code> script attached.</p><div class="mediaobject"><img src="/graphics/9781849693400/graphics/3400_08_12.jpg" /><div class="caption"><p>Scene hierarchy</p></div></div><p>To create your own <a id="id377" class="indexterm"></a>NavMeshLayer, navigate to <span class="strong"><strong>Edit</strong></span> | <span class="strong"><strong>Project Settings</strong></span> | <span class="strong"><strong>NavMeshLayers</strong></span>.</p><div class="mediaobject"><img src="/graphics/9781849693400/graphics/3400_08_13.jpg" /><div class="caption"><p>NavMeshLayers</p></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note09"></a>Note</h3><p>Unity reference for Nav Mesh Layers can be found at <a class="ulink" href="http://docs.unity3d.com/Documentation/Components/class-NavMeshLayers.html" target="_blank">http://docs.unity3d.com/Documentation/Components/class-NavMeshLayers.html</a></p></div><p>Unity comes with three default layers: <code class="literal">Default</code>, <code class="literal">Not Walkable</code>, and <code class="literal">Jump</code>, each with potentially different cost values. Let's <a id="id378" class="indexterm"></a>add a new layer called <code class="literal">Water</code> and give it a cost of <code class="literal">5</code>.</p><p>Next, select the water plane. Go to the <span class="strong"><strong>Navigation</strong></span> window and under the <span class="strong"><strong>Object</strong></span> tab, set <span class="strong"><strong>Navigation Layer</strong></span> to <code class="literal">Water</code>.</p><div class="mediaobject"><img src="/graphics/9781849693400/graphics/3400_08_14.jpg" /><div class="caption"><p>Water layer</p></div></div><p>Bake the navmesh for the scene, and run it to test it. You should see that the AI agents now choose the slope rather than going through the plane marked as the water layer because it's more expensive to choose that path. Try experimenting with placing the target object at different points in the water plane. You will see that the AI agents will sometimes swim back to the shore and take the bridge, rather than trying to swim all the way across the water.</p></div>