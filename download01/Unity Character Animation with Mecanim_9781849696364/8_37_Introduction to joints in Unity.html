<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch08lvl1sec38"></a>Introduction to joints in Unity</h2></div></div><hr /></div><p>Creating a ragdoll game<a id="id472" class="indexterm"></a> object in Unity requires some basic knowledge of the<a id="id473" class="indexterm"></a> different joints and how these can be added to game objects.</p><p>Unlike the joints or bones that are imported in the FBX file as part of the rigged model, Unity's joints can be used to connect game objects that respond to physics within the game.</p><p>There are several <a id="id474" class="indexterm"></a>different joints that we can choose from, which suit different situations within a game, and different joints in a human body.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec66"></a>Creating a test scene</h3></div></div></div><p>We will start with a blank<a id="id475" class="indexterm"></a> scene and some simple geometry to test our physics objects:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Create a new scene by navigating to <span class="strong"><strong>File</strong></span> | <span class="strong"><strong>New Scene...</strong></span>.</p></li><li><p>Add a plane game object using the menu bar by navigating to <span class="strong"><strong>GameObject</strong></span> | <span class="strong"><strong>3D Object</strong></span> | <span class="strong"><strong>Plane</strong></span>.</p></li><li><p>Click on the <span class="strong"><strong>Plane </strong></span>in the<span class="strong"><strong> Scene</strong></span> view or <span class="strong"><strong>Project</strong></span> panel to adjust its parameters in the <span class="strong"><strong>Inspector </strong></span>panel.</p><p>The plane game object should be centered within the scene by default.</p></li><li><p>Rename the plane <code class="literal">groundPlane</code> by typing this into the field at the top of the <span class="strong"><strong>Inspector</strong></span> panel.</p></li><li><p>In the <span class="strong"><strong>Transform Scale</strong></span> fields, set the position <span class="strong"><strong>X</strong></span> and <span class="strong"><strong>Z</strong></span> values both to <code class="literal">0.25</code>.</p><p>This will make the plane large enough that it will catch the ragdoll as it falls, allowing us to test the effect as it hits the ground.</p><p>Next, we will create two more game objects with which we will test the joints.</p></li><li><p>Create a sphere game object from the menu bar by navigating to <span class="strong"><strong>GameObject</strong></span> | <span class="strong"><strong>3D Object</strong></span> | <span class="strong"><strong>Sphere</strong></span>.</p></li><li><p>Select the object to access its parameters in the <span class="strong"><strong>Inspector</strong></span> panel.</p></li><li><p>Set its <span class="strong"><strong>Transform Scale</strong></span> values to <code class="literal">0.5</code>.</p></li><li><p>Create a cube game object by navigating to <span class="strong"><strong>GameObject</strong></span> | <span class="strong"><strong>3D Object</strong></span> | <span class="strong"><strong>Cube</strong></span>.</p></li><li><p>In the <span class="strong"><strong>Inspector</strong></span> panel, set its <span class="strong"><strong>Transform Scale</strong></span> values to <code class="literal">0.5</code>.</p></li><li><p>Position the cube and sphere close together somewhere above the <code class="literal">groundPlane</code> object:</p><div class="mediaobject"><img src="/graphics/9781849696364/graphics/6364OT_08_01.jpg" /></div><p>Our test objects will have colliders as components by default, but we will need to<a id="id476" class="indexterm"></a> add a <span class="strong"><strong>Rigidbody</strong></span> component to the sphere and cube to allow them to respond to physics.</p></li><li><p>From the menu bar, add a <span class="strong"><strong>Rigidbody</strong></span> component to the cube by navigating to <span class="strong"><strong>Components</strong></span> | <span class="strong"><strong>Physics</strong></span> | <span class="strong"><strong>Rigidbody</strong></span>.</p></li><li><p>Add a <span class="strong"><strong>Rigidbody</strong></span> component to the sphere.</p><p>By default the rigidbodies' <span class="strong"><strong>Use Gravity</strong></span> parameter will be checked, enabling it, and <span class="strong"><strong>Mass</strong></span> will be set to <code class="literal">1</code>.</p></li><li><p>Point the default scene camera at the group of objects, so we can see them in the <span class="strong"><strong>Game</strong></span> view.</p></li><li><p>Test the game by pressing the <span class="strong"><strong>Play</strong></span> button.</p></li></ol></div><p>The two objects should fall onto <code class="literal">groundPlane</code>:</p><div class="mediaobject"><img src="/graphics/9781849696364/graphics/6364OT_08_02.jpg" /></div><p>Our next step will involve connecting the sphere and cube with a joint.</p><p>The objects are not<a id="id477" class="indexterm"></a> connected at this point, and will fall at the same rate.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec67"></a>Adding a hinge joint</h3></div></div></div><p>Now that we have <a id="id478" class="indexterm"></a>a scene with some simple geometry set up <a id="id479" class="indexterm"></a>with <span class="strong"><strong>Rigidbody</strong></span> components, we can test one of Unity's joints to see what it can do:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select the sphere.</p></li><li><p>Add a <span class="strong"><strong>Hinge Joint</strong></span> component from the menu bar by navigating to <span class="strong"><strong>Components</strong></span> | <span class="strong"><strong>Physics</strong></span> | <span class="strong"><strong>Hinge Joint</strong></span>.</p><p>The component's parameters will become visible in the <span class="strong"><strong>Inspector</strong></span> panel.</p><p>The <span class="strong"><strong>Hinge Joint</strong></span> component's first parameter, <span class="strong"><strong>Connected Body</strong></span>, has a field where we can drag another object.</p></li><li><p>Drag the <span class="strong"><strong>Cube</strong></span> game object from the <span class="strong"><strong>Hierarchy</strong></span> panel into the <span class="strong"><strong>Connected Body</strong></span> field in the <span class="strong"><strong>Inspector</strong></span> panel.</p></li><li><p>Set the <span class="strong"><strong>Anchor</strong></span> and <span class="strong"><strong>Axis</strong></span> values in the <span class="strong"><strong>X</strong></span> field to <code class="literal">1</code>.</p></li><li><p>Set the <span class="strong"><strong>Anchor</strong></span> and <span class="strong"><strong>Axis</strong></span> values in the <span class="strong"><strong>Y</strong></span> and <span class="strong"><strong>Z</strong></span> fields to <code class="literal">0</code>.</p></li><li><p>Uncheck the <span class="strong"><strong>Auto Configure Connected</strong></span> checkbox.</p></li><li><p>Enter the value <code class="literal">2.5</code> for <span class="strong"><strong>X</strong></span> in the <span class="strong"><strong>Connected Anchor</strong></span> field.</p></li><li><p>Zero out the other <span class="strong"><strong>Y</strong></span> and <span class="strong"><strong>Z</strong></span> for <span class="strong"><strong>Connected Anchor</strong></span> fields.</p></li><li><p>Check the <span class="strong"><strong>Use Spring</strong></span> checkbox.</p></li><li><p>Set the<a id="id480" class="indexterm"></a> <span class="strong"><strong>Spring</strong></span> value to <code class="literal">0.4</code> and the <span class="strong"><strong>Damper</strong></span> value<a id="id481" class="indexterm"></a> to <code class="literal">0.25</code>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note31"></a>Note</h3><p>Spring effects are not always used in ragdoll simulations, but adding it here will help us to exaggerate the function of the hinge.</p></div><p>The resulting <span class="strong"><strong>Hinge Joint</strong></span> component should match the illustration here:</p><div class="mediaobject"><img src="/graphics/9781849696364/graphics/6364OT_08_03.jpg" /></div><p>In order to properly test the hinge, we will need to ensure that the objects are weighted differently.</p></li><li><p>Select the cube and under its <span class="strong"><strong>Rigidbody</strong></span> component, change the <span class="strong"><strong>Mass</strong></span> value to <code class="literal">5</code>.</p></li><li><p>Test the game by pressing the <span class="strong"><strong>Play</strong></span> button:</p><div class="mediaobject"><img src="/graphics/9781849696364/graphics/6364OT_08_04.jpg" /></div></li></ol></div><p>At this point, the cube and sphere will fall at different rates, because they are connected with the hinge joint the heavier cube will appear to drag the sphere with it.</p><p>When it<a id="id482" class="indexterm"></a> contacts the <code class="literal">groundPlane</code> object, sphere will bounce slightly due to the spring.</p><p>Now that we<a id="id483" class="indexterm"></a> have demonstrated the basics of joint components in Unity, we can move on to creating the ragdoll.</p><p>It would be tedious and time consuming to set up each joint connecting each of the character's bones, but luckily Unity has a tool, the Ragdoll Wizard, which automates the process.</p></div></div>