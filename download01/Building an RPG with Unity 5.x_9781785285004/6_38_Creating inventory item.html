<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch06lvl1sec38"></a>Creating inventory item</h2></div></div><hr /></div><p>It is now time to actually create the items we are going to use for our inventory system. I will be creating one item type from each item category to keep things simple. This section will really be again highly dependent on how you have modeled your character models. In my particular model, as discussed earlier in the book, all of the character's essential parts are embedded within the <span class="strong"><strong>fbx</strong></span>. In this case, you will need to navigate down your model's hierarchy and extract the mesh for the specific armour or weapon or anything else that you are going to be using for the inventory:</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note40"></a>Note</h3><p>You can also use independent models representing your inventory items that may or may not be related to your character model's mesh. These items are just used for visual representation within the world, so that the player can pick them up.</p></div><p>
</p><div class="mediaobject"><img src="/graphics/9781785285004/graphics/image_06_003.jpg" /></div><p>
</p><p>If you recall from the character customization scene, we have already gone through the model and identified the parts we want to have the player be able to enable or disable based on the selection they make through the interface.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec41"></a>Creating the Prefab</h3></div></div></div><p>If you have not already done so, go ahead and create a folder in your <span class="strong"><strong>Project Window</strong></span> named <span class="strong"><strong>Prefabs</strong></span>. Within this folder, go ahead and create a new folder and name it <span class="strong"><strong>InventoryItems</strong></span>, and then a subfolder named <span class="strong"><strong>ShoulderPads</strong></span>. You are welcome to use a different naming and folder structure if you choose, as long as you are comfortable with it and it is organized for you to work with.</p><p>To create a prefab, you simply need to take an existing GameObject that is present in the <span class="strong"><strong>Scene Window</strong></span> and drag it into the <span class="strong"><strong>Project Window</strong></span>. To keep things organized, we will be using the structure defined in the previous paragraph. So you will need to navigate to the <span class="strong"><strong>ShoulderPads</strong></span> folder in the Project Window and then perform the following: simply drag one of the shoulder pad meshes from your model and drop it into the <span class="strong"><strong>ShoulderPads</strong></span> folder:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781785285004/graphics/image_06_004.jpg" /></div><p>
</p><p>Observe, when you create a prefab, the prefab will be an exact copy of the GameObject in the active scene! In this case, my mesh is disabled in the scene, therefore when I create a prefab of the mesh, it will also be disabled! Since it is disabled, when you drag the newly created prefab into the scene as a new GameObject, it will be invisible; you will need to enable it.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec42"></a>Adding Inventory Item Agent</h3></div></div></div><p>We need a means to interact with our inventory items. In order to do this, we will need to create a new script that will handle our interaction with the inventory items during game play. This will be coded in the <code class="literal">InventoryItemAgent.cs</code> script. At the moment, the script will just enable us to interact with the <code class="literal">InventoryItem</code> object through the IDE.</p><p>Here is the listing of the script:</p><pre class="programlisting">using UnityEngine; &#13;
using System.Collections; &#13;
 &#13;
public class InventoryItemAgent : MonoBehaviour &#13;
{ &#13;
  public InventoryItem ItemDescription; &#13;
} &#13;
</pre><p>Very simply, in order for us to be able to interact with the GameObject, we would need to use a script that inherits <span class="emphasis"><em>MonoBehaviour</em></span>. Go ahead and attach this script to your prefab. Now you can easily set up your inventory items visually:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781785285004/graphics/image_06_005.jpg" /></div><p>
</p><p>In the preceding screenshot, you can see that we have created a GameObject from the prefab and using the <span class="strong"><strong>InventoryItemAgent</strong></span> component, we have access to the properties of the <span class="strong"><strong>InventoryItem</strong></span> object. Utilizing this concept, you can now create your prefabs for the different types of inventory items.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip41"></a>Tip</h3><p>If you are applying your changes in the scene window, make sure you apply them to the original prefab so that it keeps it in memory.
Caution: When you apply changes to a prefab, all instances of the prefab get updated with the new attributes.</p></div><p>At the moment, we have implemented an easy way to define our inventory items, but we still need to implement use interaction with the items. The logic for the interaction will be implemented in the <code class="literal">InventoryItemAgent.cs</code> script. First, we need to identify who we are colliding with; in this case, we want to make sure it is the player that is going to collect the item. Second, we need to store the data into the <code class="literal">GameMaster</code> and also remove the <code class="literal">GameObject</code> from the active scene. The last two parts will be handled by the <code class="literal">GameMaster</code>, as you will see.</p><p>Here is the new code listing for <code class="literal">InventoryItemAgent.cs</code>:</p><pre class="programlisting">using UnityEngine; &#13;
using System.Collections; &#13;
 &#13;
public class InventoryItemAgent : MonoBehaviour &#13;
{ &#13;
  public InventoryItem ItemDescription; &#13;
 &#13;
  public void OnTriggerEnter(Collider c) &#13;
  { &#13;
    // make sure we are colliding with the player &#13;
    if(c.gameObject.tag.Equals("Player")) &#13;
    { &#13;
      // Make a copy of the Inventory Item Object &#13;
      InventoryItem myItem = new InventoryItem(); &#13;
      myItem.CopyInventoryItem(this.ItemDescription); &#13;
 &#13;
      // Add the item to our inventory &#13;
      GameMaster.instance.INVENTORY.AddItem(myItem); &#13;
 &#13;
      // Destroy the GameObject from the scene &#13;
      GameMaster.instance.RPG_Destroy(this.gameObject); &#13;
    } &#13;
  } &#13;
 &#13;
} &#13;
</pre><p>I have created a new function in the <code class="literal">InventoryItem.cs </code>script called <code class="literal">CoptInventoryItem()</code>. This function is used to make a copy of one <code class="literal">InventoryItem</code> object into another one. Here is the code for the newly added function in the <code class="literal">InventoryItem</code> class:</p><pre class="programlisting">  public void CopyInventoryItem(InventoryItem item) &#13;
  { &#13;
    this.CATEGORY = item.CATEGORY; &#13;
    this.DESCRIPTION = item.DESCRIPTION; &#13;
    this.NAME = item.NAME; &#13;
    this.STRENGTH = item.STRENGTH; &#13;
    this.WEIGHT = item.WEIGHT; &#13;
  } &#13;
</pre><p>We already saw how to add an item to the inventory using the <code class="literal">GameMaster</code>. However, we needed to add a new function that would handle the destruction of <code class="literal">GameObjects</code> in our game. This is done by the <code class="literal">RPG_Destroy()</code> function.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip42"></a>Tip</h3><p>You cannot use <code class="literal">Destroy()</code>, <code class="literal">DestroyImmediate()</code>, or <code class="literal">DestroyObject()</code> since they are part of all <code class="literal">GameObjects</code> in Unity. Therefore, be cautious with your naming convention within your own classes.</p></div><p>Here is the listing of the new function:</p><pre class="programlisting">  public void RPG_Destroy(GameObject obj) &#13;
  { &#13;
    Destroy(obj); &#13;
  } &#13;
</pre><p>One final component that needs to be added to your prefabs representing the inventory items is a <span class="emphasis"><em>Collider</em></span>:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781785285004/graphics/image_06_006.jpg" /></div><p>
</p><p>I used a <span class="strong"><strong>Box Collider</strong></span> to keep things simple. A collider can be added by selecting <span class="strong"><strong>Add Component | Physics | Box Collider</strong></span> from the <span class="strong"><strong>Inspector Window</strong></span>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec43"></a>Inventory Items Defined as Prefabs</h3></div></div></div><p>The following screenshot will demonstrate some of the inventory item prefabs I have created for demonstration:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781785285004/graphics/image_06_007.jpg" /></div><p>
</p><p>The key for all of this to work is to make sure that your prefabs have the <code class="literal">InventoryItemAgent.cs</code> script as well as a <code class="literal">Collider</code> component attached to the prefabs. Then you will need to provide the Inventory Item data through the IDE, uniquely identifying each one.</p><p>The following table lists the data for each inventory item defined:</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; "><colgroup><col /><col /><col /><col /><col /><col /></colgroup><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>
<span class="strong"><strong>Prefab</strong></span>
</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>
<span class="strong"><strong>Name</strong></span>
</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>
<span class="strong"><strong>Description</strong></span>
</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>
<span class="strong"><strong>Category</strong></span>
</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>
<span class="strong"><strong>Strength</strong></span>
</p>
</td><td style="border-bottom: 0.5pt solid ; ">
<p>
<span class="strong"><strong>Weight</strong></span>
</p>
</td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>Helmet</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>HL01</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>Brass Helmet with Two Horns</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>ARMOUR</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>0.2</p>
</td><td style="border-bottom: 0.5pt solid ; ">
<p>0.2</p>
</td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>HL02</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>Brass Helmet Face Protection</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>ARMOUR</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>0.3</p>
</td><td style="border-bottom: 0.5pt solid ; ">
<p>0.25</p>
</td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>HL03</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>Bronze Helmet Protecting Face</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>ARMOUR</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>0.3</p>
</td><td style="border-bottom: 0.5pt solid ; ">
<p>0.3</p>
</td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>HL04</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>Bronze Helmet</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>ARMOUR</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>0.2</p>
</td><td style="border-bottom: 0.5pt solid ; ">
<p>0.25</p>
</td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>Shield</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>SL01</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>Iron Shield</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>ARMOUR</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>0.3</p>
</td><td style="border-bottom: 0.5pt solid ; ">
<p>0.3</p>
</td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>SL02</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>Wooden Shield</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>ARMOUR</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>0.2</p>
</td><td style="border-bottom: 0.5pt solid ; ">
<p>0.2</p>
</td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>Shoulder Pads</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>SP01</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>Shoulder Pad 01</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>ARMOUR</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>0.1</p>
</td><td style="border-bottom: 0.5pt solid ; ">
<p>0.2</p>
</td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>SP02</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>Shoulder Pad 02</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>ARMOUR</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>0.1</p>
</td><td style="border-bottom: 0.5pt solid ; ">
<p>0.2</p>
</td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>SP03</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>Shoulder Pad 03</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>ARMOUR</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>0.15</p>
</td><td style="border-bottom: 0.5pt solid ; ">
<p>0.25</p>
</td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>SP04</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>Shoulder Pad 04</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>ARMOUR</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>0.2</p>
</td><td style="border-bottom: 0.5pt solid ; ">
<p>0.25</p>
</td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>Weapons</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>Axe1</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>Single Head</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>WEAPON</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>0.2</p>
</td><td style="border-bottom: 0.5pt solid ; ">
<p>0.1</p>
</td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>Axe2</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>Double Head</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>WEAPON</p>
</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
<p>0.25</p>
</td><td style="border-bottom: 0.5pt solid ; ">
<p>0.2</p>
</td></tr><tr><td style="border-right: 0.5pt solid ; ">
</td><td style="border-right: 0.5pt solid ; ">
<p>Club1</p>
</td><td style="border-right: 0.5pt solid ; ">
<p>Wooden Club</p>
</td><td style="border-right: 0.5pt solid ; ">
<p>WEAPON</p>
</td><td style="border-right: 0.5pt solid ; ">
<p>0.2</p>
</td><td style="">
<p>0.1</p>
</td></tr></tbody></table></div><p>The data again is arbitrary; you decide what best suits your game and game design.</p></div></div>