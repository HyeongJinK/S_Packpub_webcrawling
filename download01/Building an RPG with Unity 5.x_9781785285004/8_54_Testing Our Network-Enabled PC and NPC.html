<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch08lvl1sec52"></a>Testing Our Network-Enabled PC and NPC</h2></div></div><hr /></div><p>At this point, we have all of the assets needed to test out our network-enabled PRG characters. There is one final step that you need to perform, if you have not done so already.</p><p>Select the <span class="strong"><strong>NetworkManager</strong></span> GameObject in the <span class="strong"><strong>Hierarchy Window</strong></span>, and from the <span class="strong"><strong>Inspector</strong></span> Window, you will need to make sure the following have been assigned in the <span class="emphasis"><em>Spawn Info</em></span> section:</p><p>
<span class="emphasis"><em>Player Prefab</em></span> should be assigned to your player character prefab, mine is named <span class="emphasis"><em>PC-CC-Network-1</em></span>. Make sure <span class="strong"><strong>Auto Create Player</strong></span> is set <span class="strong"><strong>True</strong></span>.</p><p>You will also register your NPC prefabs and other network-enabled non-character prefabs in the <span class="emphasis"><em>Registered Spawnable Prefabs</em></span>. I have the barbarian prefab named <span class="emphasis"><em>B1-Network-1</em></span> assigned, <span class="emphasis"><em>barbarian_helmet_01_LOD0_Network</em></span> and <span class="emphasis"><em>shield_01_LOD0_Network</em></span>.</p><p>
</p><div class="mediaobject"><img src="/graphics/9781785285004/graphics/image_08_018.jpg" /></div><p>
</p><p>Alright, at last we can do a build. Let's go ahead and make a standalone build of our game. Make sure that the current scene is in the build configuration.</p><p>
</p><div class="mediaobject"><img src="/graphics/9781785285004/graphics/image_08_019.jpg" /></div><p>
</p><p>Go ahead and launch two instances of the build. Make one of them the host and the other the client.</p><p>
</p><div class="mediaobject"><img src="/graphics/9781785285004/graphics/image_08_020.jpg" /></div><p>
</p><p>In the preceding figure, we have started a client as a server and the player character has picked up one of the inventory items, a shield. When we connect the second client, it should correctly take into consideration the current state of all PC and NPC active in the game.</p><p>
</p><div class="mediaobject"><img src="/graphics/9781785285004/graphics/image_08_021.jpg" /></div><p>
</p><p>Keeping both of the instances running, use the Unity IDE to connect the third client. You can use the client to perform debugging on the client end and also seeing what is going on.</p><p>
</p><div class="mediaobject"><img src="/graphics/9781785285004/graphics/image_08_022.jpg" /></div><p>
</p><p>In the preceding figure, you can see all of the player characters and how they have been accurately synchronized with one another. Select <span class="strong"><strong>B1-Network-1</strong></span> GameObject from the Hierarchy Window, and use one of the client instances to take the player character and attack the NPC.</p><p>We are going to pause the editor and inspect the variables and how they have been properly synchronized.</p><p>
</p><div class="mediaobject"><img src="/graphics/9781785285004/graphics/image_08_023.jpg" /></div><p>
</p></div>