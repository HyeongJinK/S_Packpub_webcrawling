<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="08lvl1sec53"></a>Audio-driven lighting</h2></div></div><hr /></div><p>After having seen a <span>working</span> example of how the technical parts of audio visualization come together, you should be well on your way to becoming an AV master. One of things that is predominant in the area of audio graphic visualizations is the use of lighting. Being able to add dramatic and dynamic lighting to a scene can take your visualizations to the next level. In this section, we will look at adding some audio-driven lighting. Follow the instructions, to add some audio-driven lights to our scene:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Open up Unity and the <strong class="userinput"><code>Chapter_8_Start</code></strong> scene. From the menu, select <strong class="userinput"><code>File</code></strong> | <strong class="userinput"><code>Save Scene As</code></strong> and then use the <strong class="userinput"><code>Save</code></strong> dialog to save the scene as <code class="literal">Chapter_8_Lights</code> to the <code class="literal">Assets/GameAudio/Scenes</code> folder.</li><li>Locate the <strong class="userinput"><code>Directional Light</code></strong> in the <strong class="userinput"><code>Hierarchy</code></strong> window (at the top) and disable it in the <strong class="userinput"><code>Inspector</code></strong> window by unchecking the game object checkbox.
</li></ol></div><p>Â </p><div class="orderedlist"><ol class="orderedlist arabic" start="3" type="1"><li>From the menu, select <strong class="userinput"><code>GameObject</code></strong> | <strong class="userinput"><code>Create Empty</code></strong>. Rename the new object <code class="literal">Lights</code> in the <strong class="userinput"><code>Inspector</code></strong> window and then use the <strong class="userinput"><code>Add Component</code></strong> button to add the <strong class="userinput"><code>Light Controller</code></strong> component. Set the properties on the object to match those in the following screenshot:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787286450/graphics/06423363-b653-4028-a7ed-c442cc7ea418.png" /></div><p>Setting the properties on the Lights game object</p><div class="orderedlist"><ol class="orderedlist arabic" start="4" type="1"><li>If you are unable to see the shown colors or dislike the current color choice, you can use the Color dialog to choose different values. The important thing to note is that you are selecting a range of colors and not just two colors. Thus, your <strong class="userinput"><code>Min Color</code></strong> should be at the top of the color spectrum and the <strong class="userinput"><code>Max Color</code></strong> at the bottom as shown in the following screenshot:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787286450/graphics/77d12d07-c89a-45b4-9d49-b6c3e18b6813.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="5" type="1"><li>Right-click (<span class="emphasis"><em>Ctrl</em></span> + click on Mac) on the <strong class="userinput"><code>Lights</code></strong> object and <span>from</span> the context menu select <strong class="userinput"><code>Create Empty</code></strong>. Rename the new object <code class="literal">Light_1</code> and then use the <strong class="userinput"><code>Add Component</code></strong> button to add a <strong class="userinput"><code>Light</code></strong> component. Set the properties of the object to what is shown in the following screenshot:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787286450/graphics/cfdb8e53-0441-4837-96c9-e9c5acd35869.png" /></div><p>Setting the parameters for the Light_1 object</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note142"></a>Note</h3><p>There is huge amount of options you can modify in order to explore different lighting techniques. If you are unfamiliar with Unity lighting, then take some time to modify and play with those options on your own. It will also be very helpful to view the changes to the lights within the <strong class="userinput"><code>Scene</code></strong> and <strong class="userinput"><code>Game</code></strong> views. Here is a link to a great Unity tutorial series on lighting: <a class="ulink" href="https://unity3d.com/learn/tutorials/topics/graphics/introduction-lighting-and-rendering" target="_blank">https://unity3d.com/learn/tutorials/topics/graphics/introduction-lighting-and-rendering</a></p></div><div class="orderedlist"><ol class="orderedlist arabic" start="6" type="1"><li>Select the the <code class="literal">Light_1</code> object in the <strong class="userinput"><code>Hierarchy</code></strong> window and type <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>D</em></span> to copy the object. Do this eight more times so that you have 10 children objects attached to the <strong class="userinput"><code>Lights</code></strong> object. Use the following table to name the objects and adjust some of the required parameters:
<div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; "><colgroup><col /><col /><col /></colgroup><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Name</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Parameter</p></td><td style="border-bottom: 0.5pt solid ; "><p>Value</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Light_2</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Transform.Rotation.X</p><p>Transform.Rotation.Y</p><p>Transform.Rotation.Z</p></td><td style="border-bottom: 0.5pt solid ; "><p>45</p><p>0</p><p>45</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Light_3</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Transform.Rotation.X</p><p>Transform.Rotation.Y</p><p>Transform.Rotation.Z</p></td><td style="border-bottom: 0.5pt solid ; "><p>45</p><p>45</p><p>0</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Light_4</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Transform.Rotation.X</p><p>Transform.Rotation.Y</p><p>Transform.Rotation.Z</p></td><td style="border-bottom: 0.5pt solid ; "><p>-45</p><p>45</p><p>0</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Light_5</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Transform.Rotation.X</p><p>Transform.Rotation.Y</p><p>Transform.Rotation.Z</p></td><td style="border-bottom: 0.5pt solid ; "><p>0</p><p>-45</p><p>0</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Light_6</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Transform.Rotation.X</p><p>Transform.Rotation.Y</p><p>Transform.Rotation.Z</p></td><td style="border-bottom: 0.5pt solid ; "><p>0</p><p>45</p><p>0</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Light_7</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Transform.Rotation.X</p><p>Transform.Rotation.Y</p><p>Transform.Rotation.Z</p></td><td style="border-bottom: 0.5pt solid ; "><p>45</p><p>-45</p><p>0</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Light_8</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Transform.Rotation.X</p><p>Transform.Rotation.Y</p><p>Transform.Rotation.Z</p></td><td style="border-bottom: 0.5pt solid ; "><p>0</p><p>-45</p><p>45</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Light_9</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Transform.Rotation.X</p><p>Transform.Rotation.Y</p><p>Transform.Rotation.Z</p></td><td style="border-bottom: 0.5pt solid ; "><p>-45</p><p>-45</p><p>0</p></td></tr><tr><td style="border-right: 0.5pt solid ; "><p>Light_10</p></td><td style="border-right: 0.5pt solid ; "><p>Transform.Rotation.X</p><p>Transform.Rotation.Y</p><p>Transform.Rotation.Z</p></td><td style=""><p>0</p><p>45</p><p>0</p></td></tr></tbody></table></div></li><li>Open up the <strong class="userinput"><code>Audio Visualization Manager</code></strong> component in the <strong class="userinput"><code>Inspector</code></strong> window and adjust the <strong class="userinput"><code>Decay</code></strong> parameter to a value of <code class="literal">.005</code>. The <span>parameter</span> is at the bottom of the component.
</li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note143"></a>Note</h3><p>The <code class="literal">Decay</code> parameter sets or influences the amount of time a visualization will display the measured values for. A low value will show very quick bouncy changes, while higher values will show very slow changes that will degrade over longer periods of time. Determining the best value to set this parameter will again come down to personal preference or style.</p></div><div class="orderedlist"><ol class="orderedlist arabic" start="8" type="1"><li>Before you run the scene, consult with you doctor. Just a word of caution to readers that suffer from photosensitive epilepsy or are just photosensitive. This scene uses flashing lights, and if you are sensitive to this, you should NOT run this exercise.</li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note144"></a>Note</h3><p>Notice that we have omitted the use of shadows for the lights. This is because adding shadows can have a significant impact on performance. If you have a system you think is powerful enough, then enable shadows for all the lights and run the scene again.</p></div><div class="orderedlist"><ol class="orderedlist arabic" start="9" type="1"><li>Run the scene, and now you will see a series of bright lights flashing and keeping rhythm with the music. You can of course alter this scene as much as you like. When you are done testing, stop the scene and save your changes.</li></ol></div><p>As you can see, we were quickly able to enhance the visualization using just some very basic lighting tricks. We will leave it up to the reader to review the <code class="literal">LightController</code> script on their own. This script is similar to other scripts we have already looked at so adding to it or deriving from it should be easy for those developers out there.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note145"></a>Note</h3><p><strong class="userinput"><code>QUIZ TIME</code></strong>
Answer the following questions:
What frequency range do we typical humans hear in?
a) 10 000 - 20,000 Hz
b) 20 - 20,000 Hz
c) 20 - 2,000 Hz
d) 300 - 9,000 Hz
What range would a frequency of 254 Hz fall in?
a) Sub-bass
b) Opulence
c) Brilliance
d) Low mid-range
What does FFT stand for?
a) Fast Frequency Transformation
b) Fast Fast Transform
c) Fast Fourier Transform
d) Fourier Frequency Transform
As always, the answers will be provided at the end of the chapter.</p></div><p>Feel free to modify the scene to create your own lighting visualizations. Another completed example of an audio visualization has been provided in the scene <code class="literal">Chapter_8_AV_End</code>. Be sure to open it up and take a look at it. It provides for two audio channel visualizations with the cubes being on channel 0 and the lights on channel 1. Hopefully, this will give you further ideas on how to extend with your own ideas. In the next section, we are going to extend our base scene again but this time using a different audio source.</p></div>