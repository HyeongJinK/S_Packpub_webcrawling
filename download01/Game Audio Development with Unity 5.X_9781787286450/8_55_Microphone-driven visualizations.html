<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="08lvl1sec54"></a>Microphone-driven visualizations</h2></div></div><hr /></div><p>In just over the last decade, our <span>interaction</span> with computers and games has progressed substantially. Starting in 2006 with the release of the revolutionary Wii, mainstream gaming changed overnight from being entirely controller/keyboard driven to physical human interaction. This evolution further continued with the Kinect and later multi-sensor mobile devices. Now, there appears to a new trend in gaming and that is mobile games controlled by voice or microphone. For this section, we will look at how to convert our previous light visualization sample to use a microphone as an audio source.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip146"></a>Note</h3><p>If you don't have a microphone, you could also try using a speaker or headphone jacks as a microphone. Just plug your speaker into the microphone jack. You will need to shout to see any form of signal, but it will work if you don't want to go out and buy a microphone for just this book.</p></div><p>Follow the instructions, to add the microphone as an audio source to our visualization scene:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Locate and open up the <strong class="userinput"><code>Chapter_8_Start.scene</code></strong> in the Unity editor.</li><li>From the menu, select <strong class="userinput"><code>Window</code></strong> | <strong class="userinput"><code>Audio Mixer</code></strong> to open the mixer window. Click on the <strong class="userinput"><code>+</code></strong> button beside the <strong class="userinput"><code>Mixers</code></strong> list to create a new mixer. Name the new mixer <code class="literal">Master</code>. Select the new <strong class="userinput"><code>Master</code></strong> group and then click on the <strong class="userinput"><code>+</code></strong> beside the <strong class="userinput"><code>Groups</code></strong> to create a new group and rename it <code class="literal">microphone</code>. When you are done, the <strong class="userinput"><code>Audio Mixer</code></strong> window should look like the following screenshot:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787286450/graphics/ab15befd-6ba4-429c-bf8e-e7ff22011250.png" /></div><p>Creating a Master mixer and child group called microphone
</p><div class="orderedlist"><ol class="orderedlist arabic" start="3" type="1"><li>Select the <strong class="userinput"><code>microphone</code></strong> group, and <span>then</span> in the <strong class="userinput"><code>Inspector</code></strong> window right-click (<span class="emphasis"><em>Ctrl</em></span> + click on Mac) on the <strong class="userinput"><code>Volume</code></strong> parameter and from the menu select <strong class="userinput"><code>Expose 'Volume (of microphone)' to script</code></strong> as shown in the following screenshot:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787286450/graphics/461ae80d-2c00-4f38-b5cf-709350da0413.png" /></div><p>Exposing the Volume parameter to scripting</p><div class="orderedlist"><ol class="orderedlist arabic" start="4" type="1"><li>Click to open the <strong class="userinput"><code>Exposed Parameters</code></strong> drop-down on the <strong class="userinput"><code>Audio Mixer</code></strong> window and then double-click on the <strong class="userinput"><code>MyExposedParam</code></strong> text to rename it. Rename the parameter <code class="literal">MasterVolume</code> as shown in the following screenshot:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787286450/graphics/943ee8db-a25e-4770-a30b-c2b3b2d77557.png" /></div><p>Renaming the MyExposedParam to MasterVolume
</p><div class="orderedlist"><ol class="orderedlist arabic" start="5" type="1"><li>Find and select the <strong class="userinput"><code>Visualizer</code></strong> object in the <strong class="userinput"><code>Hierarchy</code></strong> window. Then, use the <strong class="userinput"><code>Add Component</code></strong> button to find and add the <strong class="userinput"><code>MicrophoneListener</code></strong> script to the object. Set the component parameters on the <strong class="userinput"><code>Audio Source</code></strong> and new <strong class="userinput"><code>Microphone Listener</code></strong> to what is shown in the <span>following</span> screenshot:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787286450/graphics/06754c8f-77e2-40b5-8a26-2db250aac9da.png" /></div><p>Setting the Audio Source and Microphone Listener component parameters</p><div class="orderedlist"><ol class="orderedlist arabic" start="6" type="1"><li>When you are done making changes, save the scene using a new name. Start the scene by pressing play. You can talk or yell into the microphone and watch the visualization your voice makes. Are you able to get all the colored cubes to move using your voice or are you speaking in the range you expect?
</li></ol></div><p> </p><div class="orderedlist"><ol class="orderedlist arabic" start="7" type="1"><li>When you are done testing, go ahead and stop the scene.</li></ol></div><p>So all we did here was to convert the audio source using a new component script called <code class="literal">MicrophoneListener</code>. Essentially, the <code class="literal">MicrophoneListener</code> script just uses the Unity <code class="literal">Microphone</code> object and routes it through the Audio Mixer in real time. We won't go into the details of that script here, but if you are interested feel free to review it in your own time. The end result is for us to be able to analyze the microphone input in real time to perform visualizations but surely you can see how this could easily be extended to control a game in some fashion?
We won't go into any further details to build a complete game but having the ability to read the range of a voice could be quite powerful. In the next chapter of this book we will go into more details about vocal processing and visualizations.</p><p> </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note147"></a>Note</h3><p><strong class="userinput"><code>QUIZ TIME ANSWERS</code></strong>
Answers have been shown in bold.
What frequency range do we typical humans hear in?
a) 10,000 - 20,000 Hz<span class="strong"><strong>b) 20 - 20,000 Hz</strong></span>
c) 20 - 2,000 Hz
d) 300 - 9,000 Hz
What range would a frequency of 254 Hz fall in?
a) Sub-bass
b) Opulence
c) Brilliance<span class="strong"><strong>d) Low mid-range</strong></span>
What does FFT stand for?
a) Fast Frequency Transformation
b) Fast Fast Transform<span class="strong"><strong>c) Fast Fourier Transform</strong></span>
d) Fourier Frequency Transform</p></div></div>