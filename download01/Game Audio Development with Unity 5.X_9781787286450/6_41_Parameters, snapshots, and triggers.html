<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="06lvl1sec42"></a>Parameters, snapshots, and triggers</h2></div></div><hr /></div><p>Like Unity, <span>FMOD</span> provides the ability to <span>control</span> audio with parameters, snapshots, and triggers. However, unlike Unity, you actually get more control with <span>FMOD</span> out of the box, and it is possible to develop advanced audio handling without any scripting. In order to demonstrate this capability, we are going to replicate some of the functionality of one of our more advanced examples without writing a single line of script.</p><p>We are going to partially replicate the wind zone effect in order to demonstrate how we can automate or control audio playback within Unity. There isn't enough time to cover the entire example and really we just want to demonstrate the concepts here. Follow the directions here to start building this new version of a dynamic wind effect:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Open up the FMOD event editor, and from the menu, select <strong class="userinput"><code>File</code></strong> | <strong class="userinput"><code>Import Audio Files</code></strong>. Use the dialog to locate the <code class="literal">Chapter_6_Audio</code> folder in the book's downloaded source code. Select the <code class="literal">wind.wav</code> file and click on <strong class="userinput"><code>Open</code></strong> to import the file. When prompted by the <strong class="userinput"><code>Create Event</code></strong> dialog, this time choose 2D, not 3D, and then click on <strong class="userinput"><code>Create</code></strong>.</li><li>Right-click [<span class="emphasis"><em>Ctrl</em></span> + click on Mac] on the new <code class="literal">wind</code> event in the <strong class="userinput"><code>Events</code></strong> tab and select <strong class="userinput"><code>Assign to Bank</code></strong> | <strong class="userinput"><code>Master Bank</code></strong> from the menu. Then, right click [<span class="emphasis"><em>Ctrl</em></span> + click on Mac] on the audio clip in the <strong class="userinput"><code>Audio 1</code></strong> track and select <strong class="userinput"><code>New Loop Region</code></strong> from the menu. Right-click [<span class="emphasis"><em>Ctrl</em></span> + click on Mac] the <strong class="userinput"><code>Audio 1</code></strong> track and select <strong class="userinput"><code>Add Audio Track</code></strong> from the menu. You will now have <strong class="userinput"><code>Audio 1</code></strong> and <strong class="userinput"><code>Audio 2</code></strong> tracks.</li><li>From the menu, select <strong class="userinput"><code>Window</code></strong> | <strong class="userinput"><code>Mixer</code></strong> to open the <strong class="userinput"><code>Mixer</code></strong> window. Right-click [<span class="emphasis"><em>Ctrl</em></span> + click on Mac] on the <strong class="userinput"><code>wind</code></strong> event in the <strong class="userinput"><code>Routing</code></strong> tab and select <strong class="userinput"><code>Reroute to New Group</code></strong> from the menu. Rename the new group <code class="literal">WIND</code> and then turn the resting volume up to max at <code class="literal">10 dB</code>.
</li></ol></div><p> </p><p> </p><div class="orderedlist"><ol class="orderedlist arabic" start="4" type="1"><li>Select the <strong class="userinput"><code>Snapshots</code></strong> tab. This <span>should</span> be empty since we have not created any snapshots. Right-click [<span class="emphasis"><em>Ctrl</em></span> + click on Mac] on the empty area, and from the menu, select <strong class="userinput"><code>New Blending Snapshot</code></strong>. Rename the snapshot <code class="literal">wind_snapshot</code>. Then, click within the green dotted region that represents the <code class="literal">WIND</code> groups, volume and turn it down to <code class="literal">-50 dB</code> as shown in the following screenshot:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787286450/graphics/ffa8d709-062b-41ab-9b05-7edc25cfb43c.png" /></div><p>Adjusting the volume setting of the Wind group in the wind_snapshot</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note108"></a>Note</h3><p>What we just did was create a blending snapshot. This is a little different than in Unity since FMOD actually allows us to control the blending within FMOD, instead of having to write code to do it. However, the procedure to control a snapshot is a little counter-intuitive, especially after all our discussions about routing.</p></div><div class="orderedlist"><ol class="orderedlist arabic" start="5" type="1"><li>As soon as you <span>click</span> on the volume knob, it will turn into the standard looking control, which will allow you to adjust the volume. Next, select and then drag the <code class="literal">wind_snapshot</code> from the <strong class="userinput"><code>Mixer</code></strong> into the event editor and drop it on the <code class="literal">Audio 2</code> track as shown in the following screenshot:
</li></ol></div><div class="mediaobject"><img src="/graphics/9781787286450/graphics/86c60a14-79be-48b8-9959-f671cd96389b.png" /></div><p>Dragging the wind_snapshot into the Audio 2 track on the wind event</p><div class="orderedlist"><ol class="orderedlist arabic" start="6" type="1"><li>Move to the event editor window <span>now</span> and use your mouse to select and adjust the snapshot so that it fills the track in the same area as the <code class="literal">wind</code> clip does. This is shown in the following screenshot:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787286450/graphics/446a7d65-c93f-484a-a860-799959f8ed32.png" /></div><p>Setting the wind_snapshot to fill the audio track
</p><div class="orderedlist"><ol class="orderedlist arabic" start="7" type="1"><li>Next, select the <code class="literal">wind_snapshot</code> in the track and look below to the <strong class="userinput"><code>Deck</code></strong> region. Right-click [<span class="emphasis"><em>Ctrl</em></span> + click on Mac] on the <strong class="userinput"><code>Intensity</code></strong> knob and select <strong class="userinput"><code>Add Automation</code></strong> from the menu. After you do this, you will notice a new track gets added to the <strong class="userinput"><code>Tracks</code></strong> region called <strong class="userinput"><code>Intensity</code></strong>.</li><li>Click on the <strong class="userinput"><code>+</code></strong> button beside the <strong class="userinput"><code>Timeline</code></strong> tab at the top of the <strong class="userinput"><code>Tracks</code></strong> region. Select <strong class="userinput"><code>Add Builtin Parameter</code></strong> | <strong class="userinput"><code>Distance</code></strong> from the menu that opens. This will prompt you with a <strong class="userinput"><code>Parameter</code></strong> dialog; enter in a range of [0,20]. With this new parameter tab open, use your mouse to select the gray line in the <strong class="userinput"><code>Intensity</code></strong> track and adjust it so that it matches the screenshot here:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787286450/graphics/c1b50c76-7209-4407-a9a4-77d9c2b8d7e9.png" /></div><p>Adjusting the wind_snapshot intensity in the parameter</p><div class="orderedlist"><ol class="orderedlist arabic" start="9" type="1"><li>Press play, to play the event and then use your mouse to drag the input parameter control left to right in the track. Notice how the wind audio becomes louder when the distance is small and softer when the distance increases. This may seem a bit backwards but remember we set our snapshot base to <span class="strong"><strong>-50 dB</strong></span> on the <code class="literal">Wind</code> group. So as the <strong class="userinput"><code>Intensity</code></strong> of the snapshot increases, it actually turns the volume down. After you are done testing, stop the event and then save and build the project.
</li></ol></div><p>We just created a new parameter called distance that controls the intensity of the <code class="literal">wind_snapshot</code>, depending on how close the listener is to the event target. Take your time and think about that. It isn't the most intuitive way you may think of doing this, but let's see how it works in Unity.</p><p>Open up Unity and follow the <span>directions</span> here to connect to the new event:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Open up Unity and make sure the Viking Village scene is loaded from before. From the menu, select <strong class="userinput"><code>GameObject</code></strong><span>|</span><strong class="userinput"><code>Create Empty</code></strong> to create a new object in the scene. Rename the object <code class="literal">AudioZones</code> and reset its <strong class="userinput"><code>Transform Position</code></strong> to <code class="literal">0</code>.</li><li>Right-click [<span class="emphasis"><em>Ctrl</em></span> + click on Mac] on the new <code class="literal">AudioZones</code> object and from the menu, select <strong class="userinput"><code>3D Object</code></strong> | <strong class="userinput"><code>Cube</code></strong>. Rename the object, add or remove components, and set the parameters to match the screenshot here:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787286450/graphics/e7c7ac64-2bff-4e35-a6e2-27525a2ab9c9.png" /></div><p>Setting the Audio_Zone_1 components and parameters
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip109"></a>Note</h3><p>You will need to remove one of the components to complete the task. If you need help, just review earlier sections in this chapter or others.</p></div><div class="orderedlist"><ol class="orderedlist arabic" start="3" type="1"><li>After you are done editing, press play to start the scene. Move around the scene and notice that as you get farther away or closer the way the wind audio decreases and increases, respectively. When you are finished testing, stop the scene and save your changes in Unity and FMOD.</li></ol></div><p>Essentially what we have just demonstrated is being able to replicate the environmental audio zones controlled by a snapshot from the dynamic wind zone example. Keep in mind that although we only adjusted the wind volume, we also could have controlled numerous other settings in the mixer. Furthermore, while we only demonstrated controlling one snapshot, we could have controlled multiple snapshots all on the same or different tracks within the same event. In the next chapter, we will continue to replicate the functionality of the previous dynamic wind effect by upgrading some scripts to work with FMOD.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note110"></a>Note</h3><p><span class="strong"><strong>QUIZ TIME ANSWERS</strong></span></p><p>Which of the following are classified as delay effects? <span class="emphasis"><em>Correct answers are marked in bold</em></span>
a) <span class="strong"><strong>Reverb</strong></span>
b) <span class="strong"><strong>Echo</strong></span>
c) <span class="strong"><strong>Flange</strong></span>
d) Equalization
e) 3D Panner</p><p>Which of the following effects is it standard to use through a return or sidechain? <span class="emphasis"><em>Correct answers are marked in bold</em></span>
a) <span class="strong"><strong>Reverb</strong></span>
b) <span class="strong"><strong>Duck Volume</strong></span>
c) Modulation
d) 3D Panner
e) Equalization</p><p>Which of the following is a valid signal routing path in FMOD?
a) <span class="strong"><strong>Sound file -&gt; Audio Track -&gt; Master Track - is the only correct answer</strong></span>
b) Master Track -&gt; Audio Track -&gt; Sound file
c) Input bus -&gt; Sound file -&gt; Master Track
d) Audio Track -&gt; Input bus -&gt; Master Track</p></div></div>