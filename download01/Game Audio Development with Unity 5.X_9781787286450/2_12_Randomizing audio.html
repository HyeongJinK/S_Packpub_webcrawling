<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="02lvl1sec17"></a>Randomizing audio</h2></div></div><hr /></div><p>Randomizing <span>audio</span> is the practice of tuning an audio source playback in a random manner to avoid exact repetition in your games audio. Of course, another way to avoid audio repetition is create multiple sound effects for the same noise, music or dialog, and then randomly select one each time the audio needs to be played. While using multiple variations of the same audio clip is preferred it does increase memory resource usage and asset management.</p><p>For this section, we are going to borrow a couple techniques we already used to slightly alter or randomize the playback of our audio without needing to provide multiple variations. Open up Unity and follow the following exercise to randomize the scene audio:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Locate the <code class="literal">axController</code> script in the <strong class="userinput"><code>Project</code></strong> window and then double-click on the script to open it in your editor.</li><li>Scroll down to around line 21 as shown here:</li></ol></div><pre class="programlisting"> if (audioSource.isPlaying) return; </pre><div class="orderedlist"><ol class="orderedlist arabic" start="3" type="1"><li>After that line, enter the following lines of code:</li></ol></div><pre class="programlisting">audioSource.pitch = 1.0f + Random.Range(-.1f, .1f);
audioSource.volume = 1.0f - Random.Range(0.0f, .25f);</pre><div class="orderedlist"><ol class="orderedlist arabic" start="4" type="1"><li>Be sure the <span>preceding</span> code is entered before the <code class="literal">Play()</code> method is called. Those two lines of code alter the <code class="literal">pitch</code> and <code class="literal">volume</code> by a random amount determined by the <code class="literal">Range</code> method of the <code class="literal">Random</code> static object.</li><li>When you are done editing the script save the file and return to Unity. Be sure to wait for the script to compile and be sure there are no compilation errors. If there is you will need to fix them by correcting the errors in the script before proceeding.</li><li>Press the play button in Unity to test the scene. Move around and throw some axs, notice the slight variation in the audio now makes those sounds much less repetitive. Stop the scene when you are done testing.</li></ol></div><p>As you can see with just a couple lines of scripting, we added variation to our audio effects. Providing your players with variation in audio and other effects reduces the repetitive nature of gameplay and extends their interest.</p><p>If you are interested, feel free to add variation to the other audio effects we currently have in the scene. With the <code class="literal">axAudioCollider</code> you could add a similar adjustment to the volume and pitch as we did with the preceding example. We will leave this exercise up to the reader to do on their own.</p><p>There is one other audio effect in the scene, which certainly benefit from some randomization and that is the torch audio. Follow the directions here to randomize the torch audio:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Get back into Unity and type <code class="literal">prop_torch</code> in the <strong class="userinput"><code>Hierarchy</code></strong> window search field. This will filter the list to just the torch props. Select all the torches in the window by selecting <strong class="userinput"><code>Edit</code></strong> | <strong class="userinput"><code>Select All</code></strong> from the menu. This will also select the scene but that is of no consequence. Your selection should match the following screenshot:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787286450/graphics/25d7a4fc-1bb2-4847-8a8e-ea940e5d5ab1.png" /></div><p>Selecting all objects in the Hierarchy window</p><div class="orderedlist"><ol class="orderedlist arabic" start="2" type="1"><li>Click on the <strong class="userinput"><code>Add Component</code></strong> button in the <strong class="userinput"><code>Inspector</code></strong> window and type <code class="literal">random</code> in the component search field. Select the <strong class="userinput"><code>Random Audio Controlle</code></strong><strong class="userinput"><code>r</code></strong><span>component</span> from the list to add it to torch objects.</li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip32"></a>Note</h3><p>The <code class="literal">RandomAudioController</code> script is essentially the same piece of randomization code, we used but in the <code class="literal">Start</code> method. Feel free to attach this script to any audio source you want to vary across multiple sources.</p></div><div class="orderedlist"><ol class="orderedlist arabic" start="3" type="1"><li>Press play to run the scene again. Are you blown away by the depth that one effect added to the scene? Now, you can hear multiple distinct torch sounds all around your character in the scene. Those minimal differences coupled with the 3D sound give the scene more depth or volume. You as the player, now feel as if you are in a much larger area which is a good thing.
</li><li>Stop the scene and disable the <strong class="userinput"><code>Random Audio Controller</code></strong> then play the scene again. Note how the lack of audio variation makes the scene appear dull now.</li><li>When you are done testing, be sure the <strong class="userinput"><code>Random Audio Controller</code></strong> is enabled again and then save the scene and project.</li></ol></div><p>Certainly, you can appreciate the value of giving your audio variation now. As you have seen the effects of audio randomization or variability can be quite astounding. Not to mention the effect it has on reducing game play repetitiveness. In the next section, we will look at one last example, scripting music.</p></div>