<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="09lvl1sec58"></a>Blend shape animation</h2></div></div><hr /></div><p>During the first exercise in this chapter, we <span>animated</span> the character's jaw transform or what is often called a bone in animation speak. While animating this bone worked for our first pass at a simple lip sync animation, it lacked the authenticity of real speech facial expressions we now understand as phonemes. What we really need is a way to control and animate the character's facial muscles to produce the appropriate speech phoneme animations. Fortunately, animators have solved this problem with the use of what is called blend shapes. In order for us to produce a realistic looking lip sync animation, we are going to have a learn a little bit about blend shapes.</p><p>Blend shapes or per-vertex morphs are an animation tool that allows for the warping or altering of the vertexes of a mesh at runtime. They are almost always constructed by the modeler building the model but there are third-party tools that allow for them to be added after the fact. Here is a combined screenshot showing the bones of the character beside a wire-frame model showing the vertexes and connections:</p><div class="mediaobject"><img src="/graphics/9781787286450/graphics/f3186aa1-8051-41cb-9e4f-229fea0d3e1e.png" /></div><p>
Comparison of character bone setup and vertex wire frame</p><p>Explained simply, the difference between bone and per-vertex (blend shapes) animation is the location of the control point. In bone animation, not unlike our own bones, the bone controls an entire wrapped area of vertices, where per-vertex (blend shapes) animation allows for finer control of the vertices in an area controlled by a bone. Another way to think of this is that bones are similar to real bones and per-vertex (blend shapes) are akin to muscles.</p><p>So, let's take a look at how this is <span>controlled</span> on our character by following the directions here:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Jump back to Unity and locate the <code class="literal">RL_G6_Body</code> object in the <strong class="userinput"><code>Hierarchy</code></strong> window and select it.
</li></ol></div><p>Â </p><div class="orderedlist"><ol class="orderedlist arabic" start="2" type="1"><li>Go to the <strong class="userinput"><code>Inspector</code></strong> window and expand the <strong class="userinput"><code>BlendShapes</code></strong> list and then scroll through the items. As you can see, several blend shapes have been added to our character. A cut-off view of the <strong class="userinput"><code>Inspector</code></strong> window screenshot is shown here:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787286450/graphics/9d0e913d-2971-4e9d-b655-d5c24f993c38.png" /></div><p>Inspector window showing an abbreviated list of blend shapes
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note152"></a>Note</h3><p>That is quite a list, and for our iClone character there are 46 blend shapes. The list shows more than that, but there are only 46 blend shapes that we modify at runtime.</p></div><div class="orderedlist"><ol class="orderedlist arabic" start="3" type="1"><li>Increase the values of the highlighted blend shape from [0,100] in the <strong class="userinput"><code>Inspector</code></strong> window and as you do watch the character's lips also change. Do the same thing to some of the other blend shapes in the list and see what effect it has on the character. The following is an image of our character with numerous blend shapes set to 100:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787286450/graphics/55a4d167-2965-4f72-aa85-bf295a5e9c08.png" /></div><p>Side-by-side comparison without blend shapes applied and with multiple blend shapes applied</p><div class="orderedlist"><ol class="orderedlist arabic" start="4" type="1"><li>Now use the various blend <span>shapes</span> and start modeling each of the phonemes we reviewed earlier. As you do so, write down the blend shapes you used to mimic the phoneme in the table here:<div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; "><colgroup><col /><col /><col /></colgroup><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Phoneme</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Sound</p></td><td style="border-bottom: 0.5pt solid ; "><p>Blend shape (name/setting)</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><div class="mediaobject"><img src="/graphics/9781787286450/graphics/084f31cd-2842-4230-ad19-a260eaad7d17.png" /></div></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>AAAAAH, A</p></td><td style="border-bottom: 0.5pt solid ; "><p></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><div class="mediaobject"><img src="/graphics/9781787286450/graphics/082ba37d-5ec6-4359-867d-c8065a5b958a.png" /></div></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>EEE</p></td><td style="border-bottom: 0.5pt solid ; "><p></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><div class="mediaobject"><img src="/graphics/9781787286450/graphics/084f31cd-2842-4230-ad19-a260eaad7d17.png" /></div></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>I</p></td><td style="border-bottom: 0.5pt solid ; "><p></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><div class="mediaobject"><img src="/graphics/9781787286450/graphics/ae7811e4-c9b1-41c8-aa9d-7a7815678990.png" /></div></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>OH!</p></td><td style="border-bottom: 0.5pt solid ; "><p></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><div class="mediaobject"><img src="/graphics/9781787286450/graphics/1dbe6f6b-248b-4bdd-a9a4-31ae7273f433.png" /></div></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>U AND W</p></td><td style="border-bottom: 0.5pt solid ; "><p></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><div class="mediaobject"><img src="/graphics/9781787286450/graphics/579bbdbb-53c1-428b-9f46-ea35bd89fe5e.png" /></div></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>FUH, VUH</p></td><td style="border-bottom: 0.5pt solid ; "><p></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><div class="mediaobject"><img src="/graphics/9781787286450/graphics/72bff0ba-e3ee-40cd-99cf-433a44ca9bc2.png" /></div></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>MMM, PEE, BEE</p></td><td style="border-bottom: 0.5pt solid ; "><p></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><div class="mediaobject"><img src="/graphics/9781787286450/graphics/402901e9-cd6b-4cca-a44f-7d954c956d29.png" /></div></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>LUH, LAH*</p></td><td style="border-bottom: 0.5pt solid ; "><p></p></td></tr><tr><td style="border-right: 0.5pt solid ; "><div class="mediaobject"><img src="/graphics/9781787286450/graphics/63ca2642-1892-4658-a53e-5750864b0819.png" /></div></td><td style="border-right: 0.5pt solid ; "><p>ESS, SSSS, DEE, GEE, EEEEH</p></td><td style=""><p></p></td></tr></tbody></table></div></li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note153"></a>Note</h3><p>* Do not worry about getting the tongue to stick out in this exercise. The tongue actually uses it's own separate mesh with a different set of blend shapes.</p></div><div class="orderedlist"><ol class="orderedlist arabic" start="5" type="1"><li>In some cases, you may need to use more than a single blend shape to mimic the phoneme. After you work through each item in the table, be sure to reset the values back to <code class="literal">0</code>. When you are done mimicking all the phonemes, reset everything back to <code class="literal">0</code>.</li></ol></div><p>After completing that exercise, you will <span>certainly</span> understand how phonemes can be added and a better appreciation for how we speak and vocalize sounds. In the next section, we are going to use all the previous work you did in the previous couple exercises and build a better real-time lip sync.</p></div>