<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch07lvl1sec61"></a>Adding NpcRacers to the mission</h2></div></div><hr /></div><p>To make<a id="id351" class="indexterm"></a> the race compelling and interesting, we <a id="id352" class="indexterm"></a>will create two NPC racers to challenge the player. If it turns out well, we can build most of these with the technology we have already developed.</p><p>Each racer will need a spline to follow. Recall from the previous chapter that we developed a system for<a id="id353" class="indexterm"></a> placing waypoints in the scene and using the <code class="literal">SplineMgr</code> script to generate a smooth curve for an NPC to follow. This will define the smooth path they traverse from start to finish. To implement the other racers in the level, carry out the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Create an empty GameObject, and name it <span class="strong"><strong>_splineDataA</strong></span>. Create a series of sphere game objects, and place them in a path from start to finish. Disable the mesh renderer of these objects, and then parent them all to <span class="strong"><strong>_splineDataA</strong></span>.</p></li><li><p>Create a second <span class="strong"><strong>_splineData</strong></span> object with different path nodes so that the second racer will follow a similar but not identical route through the course. Name it <span class="strong"><strong>_splineDataB</strong></span>.</p></li><li><p>Parent these two <span class="strong"><strong>_splineData</strong></span> objects to the <span class="strong"><strong>_level2</strong></span> root level object's container to ensure our level loading strategy remains simple and elegant.</p></li><li><p>As with the player, create a placeholder model for the racers, which is composed of a capsule with a rectangular hat parented to the top. Name them <span class="strong"><strong>RacerA</strong></span> and <span class="strong"><strong>RacerB</strong></span> respectively.</p></li><li><p>To <span class="strong"><strong>RacerA</strong></span>, add an instance of <code class="literal">npcScript</code> (created in <a class="link" href="#" linkend="ch06">Chapter 6</a>, <span class="emphasis"><em>NPCs and Associated Technology</em></span>). Associate <span class="strong"><strong>_splineDataA</strong></span> to the path reference on this script. Make sure the <code class="literal">DecisionMgr</code> member is empty; we won't be using it for the racers' logic. The structure of <span class="strong"><strong>RacerA</strong></span> should then resemble the following figure:</p><div class="mediaobject"><img src="/graphics/9781849693424/graphics/3424OS_07_03.jpg" /></div></li><li><p>To <span class="strong"><strong>RacerA</strong></span>, add an instance of the <code class="literal">SplineMgr</code> script. Set the <span class="strong"><strong>splineNodeRoot</strong></span> to <span class="strong"><strong>_splineDataA</strong></span> to install these control points into the manager class. Set the <span class="strong"><strong>playbackMode</strong></span> to <span class="strong"><strong>paused</strong></span> and the <span class="strong"><strong>playback type</strong></span> to <span class="strong"><strong>const_dt</strong></span> so<a id="id354" class="indexterm"></a> that the <code class="literal">splineObject</code> starts <a id="id355" class="indexterm"></a>stationary, but will move along the path with some natural looking acceleration and deceleration.</p></li><li><p>Follow steps 6 and 7 for <span class="strong"><strong>RacerB</strong></span>, but associate <span class="strong"><strong>_splineDataB</strong></span> instead of <span class="strong"><strong>_splineDataA</strong></span>.</p></li><li><p>Set the speeds of racers (<span class="strong"><strong>dt</strong></span> value) to <span class="strong"><strong>0.0015</strong></span> and <span class="strong"><strong>0.001</strong></span> respectively. This will set the racers' speeds to sufficiently similar values to make the race competitive.</p></li><li><p>Congratulations! You have implemented two racer NPCs that will compete with the player for first place in the race. Note that they don't have to wait to answer the quiz questions as the player does.</p></li></ol></div></div>