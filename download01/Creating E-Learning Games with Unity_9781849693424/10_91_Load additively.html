<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch10lvl1sec88"></a>Load additively</h2></div></div><hr /></div><p>Recall<a id="id496" class="indexterm"></a> from <a class="link" href="#" linkend="ch04">Chapter 4</a>, <span class="emphasis"><em>Mission One – Future Proofing the Code</em></span>, that Unity3D supports the development of games that span multiple scene files. One benefit of splitting a game up into multiple scene files is that we (as programmers) can assign different lifespans to objects based on the scene file they belong to.</p><div class="mediaobject"><img src="/graphics/9781849693424/graphics/3424OS_10_50.jpg" /></div><p>The <code class="literal">MAIN</code> scene file is designed to not only be the entry point of our game, but it also contains the <code class="literal">_global</code> GameObject. <a id="id497" class="indexterm"></a>This GameObject acts as the parent of a hierarchy of objects that have persistent scope throughout the game. The following GameObjects should have global scope:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p><code class="literal">MainCamera</code>: This is the camera to which the scene will be rendered</p></li><li style="list-style-type: disc"><p><code class="literal">Player1</code>: This is the name of the GameObject that is the playable character or the hero of the game</p></li><li style="list-style-type: disc"><p><code class="literal">Score</code>: This is a  <code class="literal">GUIText</code> element that displays the number of points the player has acquired so far</p></li></ul></div><p>Every other GameObject will exist in one of the three scene files for the game—<code class="literal">LEVEL1</code>, <code class="literal">LEVEL2</code>, or <code class="literal">LEVEL3</code>. Using the <code class="literal">Application.LoadLevelAdditive()</code> method<a id="id498" class="indexterm"></a>, we can make sure each playable level has both the objects from the persistent <code class="literal">_global</code> scene file and the level-specific objects from the scene. This is because <code class="literal">Application.LoadLevelAdditive()</code> combines the GameObjects from the loaded scene with the GameObjects that are already loaded. Contrast this with <code class="literal">Application.LoadLevel()</code>, which will destroy the previously instantiated scene file and all of its GameObjects before loading the new scene, and the reason for loading additively is clear; we want both sets of GameObjects to be loaded so we use the additive load!</p><p>Of course, we need to be absolutely sure that there are no duplicate objects in the <code class="literal">_global</code> scene file and <a id="id499" class="indexterm"></a>the level-specific scene, or else logical errors will ensue. Let's ensure we can do this now by updating the <code class="literal">GameMgr</code> script as follows:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>In <code class="literal">GameMgr.cs</code>, ensure that the <code class="literal">eGameState</code> enumeration has entries for <code class="literal">Invalid</code>, <code class="literal">MainMenu</code>, <code class="literal">Level1</code>, <code class="literal">Level2</code>, and <code class="literal">Level3</code>. We will delegate responsibility for switching levels to this class instance. Each of these enumerated values will correspond to the scene file with the same name. Through this enumeration, we will inform the <code class="literal">GameMgr</code> script which scene file to load:</p><div class="informalexample"><pre class="programlisting">public enum eGameState
{
  eGS_Invalid = -1, //enum for error case
  eGS_MainMenu = 0,
  eGS_Level1 = 1,
  eGS_Level2 = 2,
  eGS_Level3 = 3
};</pre></div></li><li><p>In the <code class="literal">Update()</code> loop, we ensure that there is no longer any auto state-changing code. This method should be empty at this point. For the most prompt level, change the signal rather than letting this system update the level when it detects a change. We will call <code class="literal">ChangeLevel()</code> directly from the level complete pop ups when a change is required.</p></li></ol></div></div>