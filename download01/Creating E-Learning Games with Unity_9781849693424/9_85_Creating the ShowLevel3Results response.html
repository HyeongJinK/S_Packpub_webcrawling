<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch09lvl1sec83"></a>Creating the ShowLevel3Results response</h2></div></div><hr /></div><p>The <code class="literal">ShowLevel3Results</code> class<a id="id487" class="indexterm"></a> will be used to show the success pop up (and some associated cleanup) if the user achieves enough points. It will be dispatched by <code class="literal">npcDecisionMgr</code> of <code class="literal">LevelLogicObj</code> in this level. Perform the following steps to create the <code class="literal">ShowLevel3Results</code> response:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Create a new <code class="literal">npcResponse</code> class named <code class="literal">response_ShowLevel3Results</code>. Change the parent class from <code class="literal">MonoBehavior</code> to <code class="literal">npcResponse</code>.</p></li><li><p>Open the scene file from the last gameplay level <code class="literal">TESTBED1</code>.</p></li><li><p> Copy the <code class="literal">popup_Level1Finished</code> Prefab by pressing <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>C</em></span>.</p></li><li><p>Open the scene file from the last gameplay level <code class="literal">TESTBED3</code>.</p></li><li><p>Paste this GameObject beneath the hierarchy of <span class="strong"><strong>MainCamera</strong></span>. Rename the <code class="literal">popup_Level3Finish</code> object as shown in the following code:</p><div class="mediaobject"><img src="/graphics/9781849693424/graphics/3424OS_09_10.jpg" /></div></li><li><p>Add an instance of the <code class="literal">response_ShowLevel3Results</code> script to <code class="literal">LevelLogicObj</code>.</p></li><li><p>Drag-and-drop a reference to this script into the <span class="strong"><strong>Response</strong></span> field beside <code class="literal">condition_addScore</code> in <code class="literal">decisionMgr</code> for <code class="literal">LevelLogicObj</code>.</p></li><li><p>Drag-and-drop<a id="id488" class="indexterm"></a> a reference from <code class="literal">popup_Level3Finish</code> (inside the <span class="strong"><strong>MainCamera</strong></span> hierarchy) into the <code class="literal">passPopup</code> field of the <code class="literal">response_ShowLevel3Results</code> script instance. In the <code class="literal">dispatch()</code> method of this script, enable the <code class="literal">passPopup</code> if it is valid, as shown in the following code:</p><div class="informalexample"><pre class="programlisting">if (passPopup != null)
passPopup.SetActive(true);</pre></div></li><li><p>Then, on the <span class="strong"><strong>MainCamera</strong></span>, invoke the <code class="literal">lookup()</code> method, to make sure the pop up is presented in a visually pleasing way, as follows:</p><div class="informalexample"><pre class="programlisting">GameObject camObj = Camera.main.gameObject
if ( camObj )
{
  camObj.GetComponent&lt;GameCam&gt;().LookUp();
}</pre></div></li><li><p>Lastly, find the <code class="literal">clock</code> object named <code class="literal">Time</code>, and disable it with the following code. This is done to make sure the game doesn't show the out-of-time pop up while waiting for the success pop up:</p><div class="informalexample"><pre class="programlisting">GameObject clock = GameObject.Find("Time");
if (clock)
{
  clock.SetActive(false);
}</pre></div></li></ol></div></div>