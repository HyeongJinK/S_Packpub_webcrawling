<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch07lvl1sec63"></a>Creating the LevelStart and LevelFinished pop ups</h2></div></div><hr /></div><p>Our level will use<a id="id368" class="indexterm"></a> three<a id="id369" class="indexterm"></a> pop-up windows to communicate<a id="id370" class="indexterm"></a> with the start and finish scenarios of the level. One of them will show the start details, and the other one will explain whether you have passed or failed<a id="id371" class="indexterm"></a> the objectives.<a id="id372" class="indexterm"></a> We will use the Prefabs <a id="id373" class="indexterm"></a>from <a class="link" href="#" linkend="ch05">Chapter 5</a>, <span class="emphasis"><em>User Interfaces in Unity</em></span>, as a basis for these pop ups. In order to create these pop ups, let's perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Create a new Prefab named <span class="strong"><strong>popup_Level2Start</strong></span> from the <span class="strong"><strong>popup_info</strong></span> Prefab, which we created in <a class="link" href="#" linkend="ch05">Chapter 5</a>, <span class="emphasis"><em>User Interfaces in Unity</em></span>.</p><div class="mediaobject"><img src="/graphics/9781849693424/graphics/3424OS_07_07.jpg" /></div></li><li><p>Change the five lines of text on the Prefab to detail the instructions for the level: "<span class="strong"><strong>You are in a trivia race against two other racers. Run from start to finish and answer the trivia questions. You must achieve 100 percent accuracy and place first in the race to move on to level 3. Good Luck.</strong></span>".</p></li><li><p>On <span class="strong"><strong>Popup Button Script</strong></span>, add three actions in the editor as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849693424/graphics/3424OS_07_08.png.jpg" /></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>On the first element of the actions array, set the action to <span class="strong"><strong>EnableObject</strong></span> and the object reference to <span class="strong"><strong>setupLevel2</strong></span> (a new GameObject parented to <span class="strong"><strong>_level2</strong></span>). This object will set up the mission once it is instantiated.</p></li><li style="list-style-type: disc"><p>On the <a id="id374" class="indexterm"></a>second element of the actions array, set the action to <span class="strong"><strong>EnableObject</strong></span> and the object reference to <span class="strong"><strong>raceStarter</strong></span> (a new GameObject parented to <span class="strong"><strong>_level2</strong></span>). This object <a id="id375" class="indexterm"></a>will commence the start-up of the racers themselves, resulting in their starting to run.</p></li><li style="list-style-type: disc"><p>On the third element of the actions array, add a <span class="strong"><strong>SelfDestruct</strong></span> action so that the last task the button does is to destroy the panel itself.</p></li></ul></div></li><li><p>Create<a id="id376" class="indexterm"></a> a<a id="id377" class="indexterm"></a> new Prefab named <span class="strong"><strong>popup_Level2Finish</strong></span> from the <span class="strong"><strong>popup_info</strong></span> Prefab, which we created in <a class="link" href="#" linkend="ch05">Chapter 5</a>, <span class="emphasis"><em>User Interfaces in Unity</em></span>.</p></li><li><p>Change the five lines of text on the Prefab to present a nice message to the user for winning the game. This panel will be enabled when the user wins the race with 100 percent accuracy.</p></li><li><p>Give the <span class="strong"><strong>confirm</strong></span> button two actions: <span class="strong"><strong>LoadLevel3</strong></span> and <span class="strong"><strong>SelfDestruct</strong></span>. This will result in the button loading the next level and then destroying itself. In <a class="link" href="#" linkend="ch10">Chapter 10</a>, <span class="emphasis"><em>An Extensible Game Framework Pattern in Unity</em></span>, we will connect this pop-up window to the <code class="literal">GameMgr</code> class when we integrate the level transitions together.</p></li><li><p>Create a new Prefab named <span class="strong"><strong>popup_Level2Repeat</strong></span> from the <span class="strong"><strong>popup_info</strong></span> Prefab, which we created in <a class="link" href="#" linkend="ch05">Chapter 5</a>, <span class="emphasis"><em>User Interfaces in Unity</em></span>.</p></li><li><p>Change the<a id="id378" class="indexterm"></a> five lines of text <a id="id379" class="indexterm"></a>on the Prefab to present a message to the user for not winning the game. This panel will be enabled when the user doesn't win.</p></li><li><p>Give the <span class="strong"><strong>confirm</strong></span> button <a id="id380" class="indexterm"></a>two actions: <span class="strong"><strong>LoadLevel2</strong></span> and <span class="strong"><strong>SelfDestruct</strong></span>. <span class="strong"><strong>LoadLevel2</strong></span> will have the effect of reloading the level once we integrate the level transitions together.</p></li><li><p>Set the <span class="strong"><strong>popup_Level2Repeat</strong></span> and <span class="strong"><strong>popup_Level2Finish</strong></span> pop ups to <span class="strong"><strong>disabled</strong></span> in the editor, and keep the <span class="strong"><strong>popup_Level2Start</strong></span> pop up enabled when the level starts.</p></li></ol></div><p>Congratulations! The pop-up <a id="id381" class="indexterm"></a>communication system for this mission is complete. Let's implement the Prefab that initializes the mission on start.</p></div>