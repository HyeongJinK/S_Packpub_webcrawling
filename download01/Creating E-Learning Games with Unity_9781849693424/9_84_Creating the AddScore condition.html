<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch09lvl1sec82"></a>Creating the AddScore condition</h2></div></div><hr /></div><p>The <code class="literal">AddScore</code> condition <a id="id485" class="indexterm"></a>will be used by <code class="literal">levelLogicObj</code> to track the points earned in this mission. Once the requisite number of points have been earned, this script will return <code class="literal">true</code>. This, in turn, will dispatch the response of showing the <code class="literal">Success</code> pop up via the <code class="literal">ShowLevel3Results</code> response script. Writing this script requires the following steps to be performed:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Create a new script named <code class="literal">condition_scoreAdded</code>. Change the base class from <code class="literal">MonoBehavior</code> to <code class="literal">npcCondition</code> as done with the other condition classes.</p></li><li><p>Add an instance of this script to <code class="literal">LevelLogicObj</code>.</p></li><li><p>Drag-and-drop this script instance into the second slot of <code class="literal">decisionMgr</code> on <code class="literal">LevelLogicObj</code> as shown in the following code:</p><div class="mediaobject"><img src="/graphics/9781849693424/graphics/3424OS_09_11.jpg" /></div></li><li><p>Inside the script, add an <code class="literal">int</code> datatype for <code class="literal">scoreAdded</code>; this is the number of points necessary for the condition to return <code class="literal">true</code>:</p><div class="informalexample"><pre class="programlisting">public int scoreAdd;</pre></div></li><li><p>Add an <code class="literal">npcCondition</code> called <code class="literal">initialScore</code>. Drag-and-drop the instance of this script <a id="id486" class="indexterm"></a>from <code class="literal">setupLevel3</code> (remember the object that first stored the score on level start) into this reference as shown in the following code:</p><div class="informalexample"><pre class="programlisting">public npcCondition initialScore {</pre></div></li><li><p>If there is a <code class="literal">playerData</code> component on the player, then compute the score delta as the absolute value of the score minus the original score as shown in the following code:</p><div class="informalexample"><pre class="programlisting">if (p != null)
{
  float playerScore = Mathf.Abs (p.GetComponent&lt;playerData&gt;().score - (initialScore as floatData)._floatData);
  if ((int)playerScore &gt;= scoreAdded )
    rval = true;
}</pre></div></li></ol></div><p>Congratulations! You have now created the condition for <code class="literal">npcDecisionMgr</code>, which will check for the number of points that have been earned in a given level.</p></div>