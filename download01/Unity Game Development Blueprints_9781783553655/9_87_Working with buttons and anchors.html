<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch09lvl1sec85"></a>Working with buttons and anchors</h2></div></div><hr /></div><p>Now that we have the <a id="id711" class="indexterm"></a>health bars working, let's tackle something <a id="id712" class="indexterm"></a>similar to what we did before, in creating a simple HUD with a reset button. We'll also learn how to make our things look great at any resolution. We will need to perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Let's start off with creating yet another canvas by navigating to <span class="strong"><strong>GameObject</strong></span> | <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Canvas</strong></span>. In this case, we want this canvas to cover our entire screen no matter which camera we are using, so this time we will keep the <span class="strong"><strong>Render Mode</strong></span> property at <span class="strong"><strong>Screen Space â€“ Overlay</strong></span>. In order to differentiate from our last one, I will rename the canvas game object to <code class="literal">HUD</code>.</p></li><li><p>With the <span class="strong"><strong>HUD</strong></span> object selected, next we will create a button by navigating to <span class="strong"><strong>GameObject</strong></span> | <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Button</strong></span>.</p><p>If we just play the game now, you'll notice that the button will appear, but it will seem like it's not anywhere in particular.</p><div class="mediaobject"><img src="/graphics/9781783553655/graphics/3655OT_09_16.jpg" /></div></li><li><p>For this example, I <a id="id713" class="indexterm"></a>want to place this button in the <a id="id714" class="indexterm"></a>top-left corner of my screen. Double-click on the <span class="strong"><strong>Button</strong></span> object to center the camera on it. Once you've done that, right-click on the camera gizmo in the top-right corner, and set it to use the <span class="strong"><strong>Back</strong></span> camera option. Have a look at the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553655/graphics/3655OT_09_17.jpg" /></div></li><li><p>With that done, to the right <a id="id715" class="indexterm"></a>of the scale tool on the<a id="id716" class="indexterm"></a> toolbar, you'll see a new option of the <span class="strong"><strong>Rect</strong></span> tool. With it selected, click inside the button (but not on the blue circle), and drag it over to the top-left corner. Have a look at the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553655/graphics/3655OT_09_18.jpg" /></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note99"></a>Note</h3><p>The <span class="strong"><strong>Rect</strong></span> tool<a id="id717" class="indexterm"></a> works almost exactly like 2D tools, so you can scale, move, and rotate the elements all in one tool instead of moving through others.</p></div><p>The following <a id="id718" class="indexterm"></a>screenshot shows the working<a id="id719" class="indexterm"></a> of the <span class="strong"><strong>Rect</strong></span> tool:</p><div class="mediaobject"><img src="/graphics/9781783553655/graphics/3655OT_09_19.jpg" /></div></li><li><p>This shows that you want the button there, and if you switch to the <span class="strong"><strong>Game</strong></span> tab, it will look like it's working correctly. But if you click on the play button and change the resolution, you'll see that the button doesn't move. Have a look at the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553655/graphics/3655OT_09_20.jpg" /></div></li><li><p>To fix this, we will <a id="id720" class="indexterm"></a>need to use anchors. Anchors work<a id="id721" class="indexterm"></a> similarly to how we moved the older GUI system's elements, except that if you click on the little box in the center, you'll have some helpful graphics to help you see what values to set the pivots and anchors to. So, click on the anchor box, and select the top-left corner anchor. Have a look at the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553655/graphics/3655OT_09_21.jpg" /></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note100"></a>Note</h3><p>If you hold down the <span class="emphasis"><em>Alt</em></span> key while selecting an anchor, it will automatically move your object as well.</p></div></li><li><p>Now, let's change<a id="id722" class="indexterm"></a> the button's text by expanding the<a id="id723" class="indexterm"></a> <span class="strong"><strong>Button</strong></span> object and selecting the <span class="strong"><strong>Text</strong></span> object inside. Once inside, change the <span class="strong"><strong>Text</strong></span> value to <code class="literal">Restart Level</code>. Have a look at the screenshot following the next information box:</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note101"></a>Note</h3><p>You do not have to have the <span class="strong"><strong>Text</strong></span> object if your button doesn't need it. In fact, you can also include images or any other UI element to be part of your image.</p></div><div class="mediaobject"><img src="/graphics/9781783553655/graphics/3655OT_09_22.jpg" /></div></li></ol></div><p>Finally, we need to<a id="id724" class="indexterm"></a> actually implement the action.</p><p>As you may have <a id="id725" class="indexterm"></a>noticed, when we created a canvas, there was another game object that was created called <span class="strong"><strong>EventSystem</strong></span>. When the game starts, it will look at these input modules and decide how to handle different types of inputs.</p><p>The <span class="strong"><strong>EventSystem</strong></span> game object will determine when events are triggered, such as the <code class="literal">OnClick</code> event, which is called when we press and release our mouse over the button we just created (which is different from how the old GUI system worked).</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note102"></a>Note</h3><p>For more information on the <a id="id726" class="indexterm"></a>
<span class="strong"><strong>EventSystem</strong></span> game object, check out <a class="ulink" href="http://unity3d.com/learn/tutorials/modules/beginner/ui/ui-events-and-event-triggers" target="_blank">http://unity3d.com/learn/tutorials/modules/beginner/ui/ui-events-and-event-triggers</a>.</p></div><p>If you select our <span class="strong"><strong>Button</strong></span> object, you'll see a list of actions at the bottom that will be executed when the button is clicked on, without having to write any additional code to do so.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note103"></a>Note</h3><p>You can add additional events to be triggered from the UI by adding an Event Trigger component.</p></div><p>We perform<a id="id727" class="indexterm"></a> the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Click on the <span class="strong"><strong>+</strong></span> button <a id="id728" class="indexterm"></a>on the <span class="strong"><strong>OnClick</strong></span> section of the <span class="strong"><strong>Button</strong></span> component to add a new action to be called when the button is clicked on. Here, we'll see some options allowing us to pick an object and then call a function that is on that object.</p></li><li><p>We currently don't have a reset function to call, so let's add that in really quickly. Go to the <code class="literal">Scripts</code> folder, and create a new C# script called <code class="literal">Events</code>. Then open it up in <code class="literal">MonoDevelop</code>.</p></li><li><p>Once in <code class="literal">MonoDevelop</code>, replace the file with the following code:</p><div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;

public class Events : MonoBehaviour 
{

  // Restarts the current level
  public void RestartLevel () 
  {
    Application.LoadLevel(Application.loadedLevel);
  }

}</pre></div></li><li><p>Save the file, and attach the script onto the <span class="strong"><strong>FlashlightController</strong></span> object.</p></li><li><p>After this, go back to the <span class="strong"><strong>Button</strong></span> object, and drag-and-drop the <span class="strong"><strong>FlashlightController</strong></span> object into the left-hand side of the <span class="strong"><strong>OnClick</strong></span> section. Once there, click on the right-hand side, and navigate to <span class="strong"><strong>Events</strong></span> | <span class="strong"><strong>RestartLevel</strong></span>. Have a look at the screenshot following the next information box:</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note104"></a>Note</h3><p>In addition to calling functions, you can also modify properties in this way as long as they are of the basic types.</p></div><div class="mediaobject"><img src="/graphics/9781783553655/graphics/3655OT_09_23.jpg" /></div></li><li><p>Save your<a id="id729" class="indexterm"></a> scene, and then hit play to take a look <a id="id730" class="indexterm"></a>at what we've done:</p><div class="mediaobject"><img src="/graphics/9781783553655/graphics/3655OT_09_24.jpg" /></div><p>Now, when we hit the <span class="strong"><strong>Restart Level</strong></span> button, the level will restart! Excellent!</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note105"></a>Note</h3><p>For more information on the UI buttons, such as how to add animations between states, please visit <a class="ulink" href="http://unity3d.com/learn/tutorials/modules/beginner/ui/ui-button" target="_blank">http://unity3d.com/learn/tutorials/modules/beginner/ui/ui-button</a>.</p></div><p>We still <a id="id731" class="indexterm"></a>have a bit left to do. You see, this<a id="id732" class="indexterm"></a> looks nice now; but if we were to use a really large screen (or a retina display), the button will be extremely small. Have a look at the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553655/graphics/3655OT_09_25.jpg" /></div><p>To solve this, we can use the <span class="strong"><strong>ReferenceResolution</strong></span> component for the canvas we'd like to scale.</p></li><li><p>With the <span class="strong"><strong>HUD</strong></span> canvas selected, add in a reference resolution by navigating to <span class="strong"><strong>Component</strong></span> | <span class="strong"><strong>Layout</strong></span> | <span class="strong"><strong>Reference Resolution</strong></span>.</p></li><li><p>Save your scene once more, and play the game again! The following screenshot shows the game screen:</p><div class="mediaobject"><img src="/graphics/9781783553655/graphics/3655OT_09_26.jpg" /></div></li></ol></div><p>Now, the <a id="id733" class="indexterm"></a>canvas will scale appropriately based on the<a id="id734" class="indexterm"></a> resolution provided!</p></div>