<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch05lvl1sec51"></a>Creating tiles</h2></div></div><hr /></div><p>Before we get started, it's a good idea to see how the object looks to us, so let's add in a temporary controller to give us an idea of what it looks like:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Go to the <code class="literal">Prefabs</code> folder, and drag-and-drop one of the modified <span class="strong"><strong>First Person Controller</strong></span> prefabs that we made in the previous chapter into the <span class="strong"><strong>Scene</strong></span> view. Once done, set <span class="strong"><strong>Position</strong></span> to (<code class="literal">0</code>, <code class="literal">1</code>, <code class="literal">0</code>). Rather than setting each of the properties, we can easily do this by right-clicking on <span class="strong"><strong>Transform</strong></span> and selecting <span class="strong"><strong>Reset Position</strong></span> and then setting the <span class="strong"><strong>Y</strong></span> position to <code class="literal">1</code>. After this, in the <span class="strong"><strong>Character Motor</strong></span> component, under the <span class="strong"><strong>Movement</strong></span> section, set <span class="strong"><strong>Gravity</strong></span> to <code class="literal">0</code> so that we do not fall for the time being (we will replace this controller later):</p><div class="mediaobject"><img src="/graphics/9781783553655/graphics/3655OT_05_05.jpg" /></div></li><li><p>Right now, if you play the game, there will be a warning about having two audio listeners in the scene. This is due to having two main camera objects in our scene that contain audio listener components. Delete the one that is not part of our <span class="strong"><strong>First Person Controller</strong></span> prefab by selecting the <span class="strong"><strong>Main Camera</strong></span> object and then pressing the <span class="emphasis"><em>Delete</em></span> key.</p><p>Now, in the upper-right corner of the scene view is the scene gizmo. This will display our current camera orientation, allow us to quickly modify the viewing angle, and switch from <span class="strong"><strong>Perspective</strong></span> to <span class="strong"><strong>Isometric</strong></span> mode easily, which will be great for us when placing objects in the world. (Note that in 2D mode, this gizmo won't be shown, so untoggle the 2D button on the <span class="strong"><strong>Scene</strong></span> toolbar if that is the case.)</p></li><li><p>Click on the <span class="strong"><strong>Y</strong></span> axis on the scene gizmo to switch our camera to an overhead view. Once there, go to the <span class="strong"><strong>Modular Pieces</strong></span> folder, and then drag-and-drop the <span class="strong"><strong>Floor 01</strong></span> object into our world, and change <span class="strong"><strong>Position</strong></span> to (<code class="literal">0</code>, <code class="literal">0</code>, <code class="literal">0</code>) from the <span class="strong"><strong>Transform</strong></span> section. Have a look at the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553655/graphics/3655OT_05_06.jpg" /></div><p>You'll notice<a id="id343" class="indexterm"></a> that instead of the <a id="id344" class="indexterm"></a>floor tile being in the center of the world when the position is reset, the bed is off on the Z axis. This is because the art files that the artist provided to us placed the pivot there, which you will see if the Gizmo Display Toggles are set to <span class="strong"><strong>Pivot</strong></span>. Now, since we're going to be placing these objects as tiles, we want them to snap together as easily as possible. Generally, we want to place these pivots along one of the edges of the object. Some people prefer to place it on the center of the mesh, which you can easily do by changing the pivot toggle to <span class="strong"><strong>Center</strong></span> by clicking on <span class="strong"><strong>Gizmo Display Toggle</strong></span> to the right-hand side of the <span class="strong"><strong>Transform</strong></span> widgets, but I don't like it, as it makes rotations and scaling more of a pain.</p></li><li><p>After this, open the <span class="strong"><strong>Floor 01</strong></span> object to see the <code class="literal">Floor_01_Modular_pieces_grp</code> object and select it. This is the actual mesh we want to work with. With it selected, go to the <span class="strong"><strong>Mesh Renderer</strong></span> component, and expand the <span class="strong"><strong>Materials</strong></span> section. Then change <span class="strong"><strong>Element 0</strong></span> to our house material either by dragging-and-dropping or clicking on the right-hand side circle button and then selecting it from the list shown. Finally, let's add in a box collider by going to <span class="strong"><strong>Component</strong></span> | <span class="strong"><strong>Physics</strong></span> | <span class="strong"><strong>Box Collider</strong></span>.</p><p>This collider is what the player will collide with in the world, so what you see will be what they will be walking into.</p></li><li><p>Now that we<a id="id345" class="indexterm"></a> have the revised version <a id="id346" class="indexterm"></a>created, rename the <span class="strong"><strong>Floor_01_Modular_pieces_grp</strong></span> game object to <code class="literal">Floor</code>, and then drag-and-drop just that object as a prefab in the <code class="literal">Prefabs</code> folder; optionally, you can place the object in a new folder called <code class="literal">Modular Pieces</code>.</p></li><li><p>The floor may change to a really black color; this is because the material provided is a bit on the dark side. Let's create a new directional light to get a better view of the models by selecting <span class="strong"><strong>GameObject</strong></span> | <span class="strong"><strong>Create Other</strong></span> | <span class="strong"><strong>Directional Light</strong></span>. Once it's created, set <span class="strong"><strong>Intensity</strong></span> up to <code class="literal">2</code> and <span class="strong"><strong>X Rotation</strong></span> to <code class="literal">130</code>. Have a look at the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553655/graphics/3655OT_05_07.jpg" /></div></li><li><p>Now repeat steps 3-5 for the <span class="strong"><strong>Wall Plain</strong></span> object. Next, move our player up in the <span class="strong"><strong>Z</strong></span> axis to <code class="literal">1</code> so that it doesn't collide with the walls:</p><div class="mediaobject"><img src="/graphics/9781783553655/graphics/3655OT_05_08.jpg" /></div><p>As you can <a id="id347" class="indexterm"></a>see, the two pieces <a id="id348" class="indexterm"></a>together are already starting to look like a room. Not too hard, right?</p></li><li><p>Delete those two prefabs, and now do the same steps for the other models in the <code class="literal">Modular Pieces</code> folders, thereby deleting them as they go on, using <span class="strong"><strong>Mesh Colliders</strong></span> on the <span class="strong"><strong>Door Wall</strong></span> and <span class="strong"><strong>Stairs</strong></span> aspects.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note63"></a>Note</h3><p>Everything besides the renaming and moving to the <code class="literal">Prefabs</code> folder can be done to all the objects by shift-clicking on them all to do each of the steps.</p></div></li><li><p>Now that we have the models for our environment fixed, let's assemble them into some tiles that we can place in the world. Create an empty game object, name it <code class="literal">Hallway</code>, and reset its position.</p><p>The pivot of an object is extremely important when doing modular level design. We want to make it extremely easy for us to duplicate objects and snap them together, so picking a part of the object that will tile well can save you a lot of time in the future.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note64"></a>Note</h3><p>For those interested in learning more about creating good <a id="id349" class="indexterm"></a>modular game art, check out <a class="ulink" href="http://www.gamasutra.com/view/feature/130885/creating_modular_game_art_for_fast_.php" target="_blank">http://www.gamasutra.com/view/feature/130885/creating_modular_game_art_for_fast_.php</a>.</p></div></li><li><p>Add a <span class="strong"><strong>Floor</strong></span>, <span class="strong"><strong>Ceiling</strong></span>, and <span class="strong"><strong>Wall</strong></span> <a id="id350" class="indexterm"></a>prefab <a id="id351" class="indexterm"></a>to the object as children.</p></li><li><p>Duplicate the wall by pressing <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>D</em></span>, and then change <span class="strong"><strong>Position</strong></span> of <span class="strong"><strong>Z</strong></span> axis to <code class="literal">3.2</code> and <span class="strong"><strong>Rotation</strong></span> of <span class="strong"><strong>Y</strong></span> axis to <code class="literal">180</code>. Have a look at the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553655/graphics/3655OT_05_09.jpg" /></div><p>This will act as our first building block, which we can use to create hallways by merely duplicating these <span class="strong"><strong>Hallway</strong></span> objects.</p></li><li><p>Now, inside the project, add a folder to the <code class="literal">Prefabs</code> folder called <code class="literal">Tiles</code>. Make <span class="strong"><strong>Hallway</strong></span> a prefab by dragging-and-dropping it in the <code class="literal">Tiles</code> folder. Have a look at the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553655/graphics/3655OT_05_10.jpg" /></div></li><li><p>Delete<a id="id352" class="indexterm"></a> one of the wall objects, and <a id="id353" class="indexterm"></a>you'll notice that the object is no longer a prefab, as it's no longer colored blue. That is fine, because now we're going to create a doorway. Rename <span class="strong"><strong>Hallway</strong></span> to <code class="literal">Hall Door</code>. Then add a <span class="strong"><strong>Door</strong></span> object and a <span class="strong"><strong>Door Wall</strong></span> object as children to the new <span class="strong"><strong>Hall Door</strong></span> on the side that your wall object was previously at. Then, add <span class="strong"><strong>Hall Door</strong></span> as a prefab in the <code class="literal">Tiles</code> folder.</p><p>You can make these doors functional later on, but for now, we are just building the environment.</p></li><li><p>Apart from these very simple tiles that we just made, we also want to create some rooms that are larger than one big tile, so next, we need to create nine additional prefab tiles that will look like the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553655/graphics/3655OT_05_11.jpg" /></div><p>To <a id="id354" class="indexterm"></a>name the objects, I went with<a id="id355" class="indexterm"></a> the following convention:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Room Top-Left</p></li><li style="list-style-type: disc"><p>Room Top-Middle</p></li><li style="list-style-type: disc"><p>Room Top-Right</p></li><li style="list-style-type: disc"><p>Room Middle-Left</p></li><li style="list-style-type: disc"><p>Room Middle</p></li><li style="list-style-type: disc"><p>Room Middle-Right</p></li><li style="list-style-type: disc"><p>Room Bottom-Left</p></li><li style="list-style-type: disc"><p>Room Bottom-Middle</p></li><li style="list-style-type: disc"><p>Room Bottom-Right</p></li></ul></div></li><li><p>With these pieces, we can make rooms of whatever size we want! Delete the newly created prefabs from the hierarchy.</p></li><li><p>Finally, let's get the staircase built! Place two floors next to each other, one at <span class="strong"><strong>Position</strong></span> (<code class="literal">0</code>, <code class="literal">0</code>, <code class="literal">0</code>) and the other at (<code class="literal">-3.2</code>, <code class="literal">0</code>, <code class="literal">0</code>). Next, add <span class="strong"><strong>Stairs 1</strong></span>, <span class="strong"><strong>Stairs Floor 1</strong></span>, and objects together, all at <span class="strong"><strong>Position</strong></span> (<code class="literal">0</code>, <code class="literal">0</code>, <code class="literal">0</code>). Add <span class="strong"><strong>Stairs Floor 2</strong></span> at <span class="strong"><strong>Position</strong></span> (<code class="literal">-3.2</code>, <code class="literal">0</code>, <code class="literal">0</code>). Finally, add two walls on the first floor (one with <code class="literal">0.0</code> on <span class="strong"><strong>X</strong></span> and one with <code class="literal">-3.2</code>) and two on the second floor (<span class="strong"><strong>Y</strong></span> at <code class="literal">3.2</code>). Once completed, you should have a staircase built, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553655/graphics/3655OT_05_12.jpg" /></div></li><li><p>Create <a id="id356" class="indexterm"></a>
<span class="strong"><strong>GameObject</strong></span> (empty), name<a id="id357" class="indexterm"></a> it <code class="literal">LeftStairs</code>, and add all of those items as children of that top object. Then make the object a prefab inside the <code class="literal">Prefabs\Tiles</code> folder. Be sure to reset the position of <span class="strong"><strong>GameObject</strong></span> by right-clicking on its <span class="strong"><strong>Transform</strong></span> component and by selecting <span class="strong"><strong>Reset Position</strong></span>.</p></li><li><p>Finally, the character controller by default won't be able to go upstairs like that correctly, as the stairs aren't a smooth surface. You will need to create another empty game object with a box collider (<span class="strong"><strong>Component</strong></span> | <span class="strong"><strong>Physics</strong></span> | <span class="strong"><strong>Box Collider</strong></span>) to act as our stairs, so the player will glide above everything. This will require tweaking with the <span class="strong"><strong>Transform</strong></span>, <span class="strong"><strong>Rotation</strong></span>, and <span class="strong"><strong>Scale</strong></span> tools to get them just right, but my options are set up in the following screenshot. Once you're finished, apply your changes to the prefab so that you can use it for others by clicking on <span class="strong"><strong>Apply</strong></span> in the <span class="strong"><strong>Prefab</strong></span> menu under the <span class="strong"><strong>Inspector</strong></span> tab. Have a look at the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553655/graphics/3655OT_05_13.jpg" /></div></li></ol></div><p>And with that <a id="id358" class="indexterm"></a>we <a id="id359" class="indexterm"></a>now have our tiles all set!</p></div>