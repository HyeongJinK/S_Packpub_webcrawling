<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec40"></a>Exterior environment â€“ terrain</h2></div></div><hr /></div><p>When creating <a id="id262" class="indexterm"></a>exterior environments, we cannot <a id="id263" class="indexterm"></a>use straight floors for the most part, unless you're creating a highly urbanized area. Our game takes place in a haunted house in the middle of nowhere, so we're going to create a natural landscape. In Unity, the best tool to use to create a natural landscape is the <span class="strong"><strong>Terrain</strong></span> tool. Unity's terrain system lets us add landscapes, complete with bushes, trees, and fading materials to our game.</p><p>To show how easy it is to use the terrain tool, let's get started.</p><p>The first thing that we're going to want to do is actually create the terrain we'll be placing for the world. Let's first create a terrain by navigating to <span class="strong"><strong>GameObject</strong></span> | <span class="strong"><strong>Create Other</strong></span> | <span class="strong"><strong>Terrain</strong></span>:</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note47"></a>Note</h3><p>If you are using Unity 4.6 or later, navigate to <span class="strong"><strong>GameObject</strong></span> | <span class="strong"><strong>Create  General</strong></span> | <span class="strong"><strong>Terrain</strong></span> to create the Terrain.</p></div><div class="mediaobject"><img src="/graphics/9781783553655/graphics/3655OT_04_1.jpg" /></div><p>At this point, you should see the terrain. Right now, it's just a flat plane, but we'll be adding a lot to it to make it shine. If you look to the right with the <span class="strong"><strong>Terrain</strong></span> object selected, you'll see the Terrain Editing tools, which can do the following (from left to right):</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Raise/Lower Height</strong></span>: This <a id="id264" class="indexterm"></a>option will allow us to raise or lower the height of our terrain up to a certain radius to create hills, rivers, and more.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Paint Height</strong></span>: If <a id="id265" class="indexterm"></a>you already know the exact height that a part of your terrain needs to be, this option will allow you to paint a spot on that location.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Smooth Height</strong></span>: This <a id="id266" class="indexterm"></a>option averages out the area that it is in, and then attempts to smooth out areas and reduce the appearance of abrupt changes.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Paint Texture</strong></span>: This <a id="id267" class="indexterm"></a>option allows us to add textures to the surface of our terrain. One of the nice features of this is the ability to lay multiple textures on top of each other.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Place Trees</strong></span>: This <a id="id268" class="indexterm"></a>option allows us to paint objects in our environment, which will appear on the surface. Unity attempts to optimize these objects by billboarding distant trees so that we can have dense forests without a horrible frame rate.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Paint Details</strong></span>: In<a id="id269" class="indexterm"></a> addition to trees, we can also have small things such as rocks or grass covering the surface of our environment. We can use 2D images to represent individual clumps using bits of randomization to make it appear more natural.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Terrain Settings</strong></span>: These <a id="id270" class="indexterm"></a>are settings that will affect the overall properties of a particular terrain; options such as the size of the terrain and wind can be found here.</p></li></ul></div><p>By default, the <a id="id271" class="indexterm"></a>entire terrain is set to <a id="id272" class="indexterm"></a>be at the bottom, but we want to have some ground above and below us; so first, with the terrain object selected, click on the second button to the left of the terrain component (the <span class="strong"><strong>Paint Height</strong></span> mode). From here, set the <span class="strong"><strong>Height</strong></span> value under <span class="strong"><strong>Settings</strong></span> to <code class="literal">100</code> and then click on the <span class="strong"><strong>Flatten</strong></span> button. At this point, you should notice the plane moving up, so now everything is above by default.</p><p>Next, we are going to add some interesting shapes to our world with some hills by <span class="emphasis"><em>painting</em></span> on the surface. With the <span class="strong"><strong>Terrain</strong></span> object selected, click on the first button to the left of our <span class="strong"><strong>Terrain</strong></span> component (the <span class="strong"><strong>Raise/Lower Terrain</strong></span> mode). Once this is completed, you should see a number of different brushes and shapes that you can select from.</p><p>Our use of terrain is to create hills in the background of our scene so that it does not seem like the world is completely flat.</p><p>Under the <span class="strong"><strong>Settings</strong></span> area, change the <span class="strong"><strong>Brush Size</strong></span> and <span class="strong"><strong>Opacity</strong></span> values of your brush to <span class="strong"><strong>100</strong></span> and left-click around the edges of the world to create some hills. You can increase the height of the current hills if you click on top of the previous hill. This is shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553655/graphics/3655OT_04_2.jpg" /></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note48"></a>Note</h3><p>When<a id="id273" class="indexterm"></a> creating hills, it's a<a id="id274" class="indexterm"></a> good idea to look at multiple angles while you're building them, so you can make sure that none are too high or too short. Generally, you want to have taller hills as you go further back, otherwise you cannot see the smaller ones since they would be blocked.</p><p>In the <span class="strong"><strong>Scene</strong></span> view, to move your camera around, you can use the toolbar in the top right corner or hold down the right mouse button and drag it in the direction you want the camera to move around in, pressing the <span class="emphasis"><em>W</em></span>, <span class="emphasis"><em>A</em></span>, <span class="emphasis"><em>S</em></span>, and <span class="emphasis"><em>D</em></span> keys to pan. In addition, you can hold down the middle mouse button and drag it to move the camera around. The mouse wheel can be scrolled to zoom in and out from where the camera is.</p><p>Even though you should plan out the level ahead of time on something like a piece of graph paper to plan out encounters, you will want to avoid making the level entirely from the preceding section, as the player will not actually see the game with a bird's eye view in the game at all (most likely). Referencing the map from the same perspective of your character will help ensure that the map looks great.</p><p>To see many different angles at one time, you can use a layout with multiple views of the scene, such as the 4 Split.</p></div><p>Once we <a id="id275" class="indexterm"></a>have our land done, we now <a id="id276" class="indexterm"></a>want to create some holes in the ground, which we will fill in with water later. This will provide a natural barrier to our world that players will know they cannot pass, so we will create a moat by first changing the <span class="strong"><strong>Brush Size</strong></span> value to <span class="strong"><strong>50</strong></span> and then holding down the <span class="emphasis"><em>Shift</em></span> key, and left-clicking around the middle of our texture. In this case, it's okay to use the <span class="strong"><strong>Top</strong></span> view; remember this will eventually be water to fill in lakes, rivers, and so on, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553655/graphics/3655OT_04_3.jpg" /></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note49"></a>Note</h3><p>At this point, we have done what is referred to in the industry as "greyboxing", making the level in the engine in the simplest way possible but without artwork (also known as "whiteboxing" or "orangeboxing" depending on the company you're working for).</p><p>At this point in a traditional studio, you'd spend time playtesting the level and iterating on it before an artist or you takes the time to make it look great. However, for our purposes, we want to create a finished project as soon as possible. When doing your own games, be sure to play your level and have others play your level before you polish it.</p><p>For more information on <a id="id277" class="indexterm"></a>greyboxing, check out <a class="ulink" href="http://www.worldofleveldesign.com/categories/level_design_tutorials/art_of_blocking_in_your_map.php" target="_blank">http://www.worldofleveldesign.com/categories/level_design_tutorials/art_of_blocking_in_your_map.php</a>.</p><p>For an example with images of a greybox to the final level, PC Gamer has a nice article available at <a class="ulink" href="http://www.pcgamer.com/2014/03/18/building-crown-part-two-layout-design-textures-and-the-hammer-editor/" target="_blank">http://www.pcgamer.com/2014/03/18/building-crown-part-two-layout-design-textures-and-the-hammer-editor/</a>.</p></div><p>This is<a id="id278" class="indexterm"></a> interesting enough, but <a id="id279" class="indexterm"></a>being in an all-white world would be quite boring. Thankfully, it's very easy to add textures to everything. However, first we need to have some textures to paint onto the world and for this instance, we will make use of some of the free assets that Unity provides us with. </p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>So, with that in mind, navigate to <span class="strong"><strong>Window</strong></span> | <span class="strong"><strong>Asset Store</strong></span>.</p><p>The <span class="strong"><strong>Asset Store</strong></span> option is home to a number of free and commercial assets that can be used with Unity to help you create your own projects created by both Unity and the community. While we will not be using any unofficial assets, the <span class="strong"><strong>Asset Store</strong></span> option may help you in the future to save your time in programming or art asset creation.</p></li><li><p>An the top right corner, you'll see a search bar; type <code class="literal">terrain assets</code> and press <span class="emphasis"><em>Enter</em></span>. Once there, the first asset you'll see is <span class="strong"><strong>Terrain Assets</strong></span>, which is released by Unity Technologies for free. Left-click on it and then once at the menu, click on the <span class="strong"><strong>Download</strong></span> button:</p><div class="mediaobject"><img src="/graphics/9781783553655/graphics/3655OT_04_4.jpg" /></div></li><li><p>Once it finishes <a id="id280" class="indexterm"></a>downloading, you<a id="id281" class="indexterm"></a> should see the <span class="strong"><strong>Importing Package</strong></span> dialog box pop up. If it doesn't pop up, click on the <span class="strong"><strong>Import</strong></span> button where the <span class="strong"><strong>Download</strong></span> button used to be:</p><div class="mediaobject"><img src="/graphics/9781783553655/graphics/3655OT_04_5.jpg" /></div><p>Generally, you'll <a id="id282" class="indexterm"></a>only want to select the<a id="id283" class="indexterm"></a> assets that you want to use and uncheck the others. However, since you're exploring the tools, we'll just click on the <span class="strong"><strong>Import</strong></span> button to place them all.</p></li><li><p>Close the <span class="strong"><strong>Asset Store</strong></span> screen; if it's still open, go back into our game view. You should notice the new <span class="strong"><strong>Terrain Assets</strong></span> folder placed in our <span class="strong"><strong>Assets</strong></span> folder. Double-click on it and then enter the <span class="strong"><strong>Textures</strong></span> folder:</p><div class="mediaobject"><img src="/graphics/9781783553655/graphics/3655OT_04_6.jpg" /></div><p>These will be the<a id="id284" class="indexterm"></a> textures we will be<a id="id285" class="indexterm"></a> placing in our environment.</p></li><li><p>Select the <span class="strong"><strong>Terrain</strong></span> object and then click on the fourth button from the left to select the <span class="strong"><strong>Paint Texture</strong></span> button. Here, you'll notice that it looks quite similar to the previous sections we've seen. However, there is a <span class="strong"><strong>Textures</strong></span> section as well, but as of now, there is the information <span class="strong"><strong>No terrain textures defined</strong></span> in this section. So let's fix that. Click on the <span class="strong"><strong>Edit Textures</strong></span> button and then select <span class="strong"><strong>Add Texture</strong></span>.</p></li><li><p>You'll see an <span class="strong"><strong>Add Terrain Texture</strong></span> dialog pop up. Under the <span class="strong"><strong>Texture</strong></span> variable, place the <span class="strong"><strong>Grass (Hill)</strong></span> texture and then click on the <span class="strong"><strong>Add</strong></span> button:</p><div class="mediaobject"><img src="/graphics/9781783553655/graphics/3655OT_04_7.jpg" /></div></li><li><p>At this point, you<a id="id286" class="indexterm"></a> should<a id="id287" class="indexterm"></a> see the entire world change to green if you're far away. If you zoom in, you'll see that the entire terrain uses the <span class="strong"><strong>Grass (Hill)</strong></span> texture now:</p><div class="mediaobject"><img src="/graphics/9781783553655/graphics/3655OT_04_8.jpg" /></div></li><li><p>Now, we don't<a id="id288" class="indexterm"></a> want the <a id="id289" class="indexterm"></a>entire world to have grass. Next, we will add cliffs around the edges where the water is. To do this, add an additional texture by navigating to <span class="strong"><strong>Edit Textures...</strong></span> | <span class="strong"><strong>Add Texture</strong></span>. Select <span class="strong"><strong>Cliff (Layered Rock)</strong></span> as the texture and then select <span class="strong"><strong>Add</strong></span>. Now if you select the terrain, you should see two textures. With the <span class="strong"><strong>Cliff (Layered Rock)</strong></span> texture selected, paint the edges of the water by clicking and holding the mouse, and modifying the <span class="strong"><strong>Brush Size</strong></span> value as needed:</p><div class="mediaobject"><img src="/graphics/9781783553655/graphics/3655OT_04_9.jpg" /></div></li><li><p>We now want to<a id="id290" class="indexterm"></a> create a<a id="id291" class="indexterm"></a> path for our player to follow, so we're going to create yet another texture this time using the <span class="strong"><strong>GoodDirt</strong></span> material. Since this is a path the player may take, I'm going to change the <span class="strong"><strong>Brush Size</strong></span> value to <span class="strong"><strong>8</strong></span> and the <span class="strong"><strong>Opacity</strong></span> value to <span class="strong"><strong>30</strong></span>, and use the second brush from the left, which is slightly less faded. Once finished, I'm going to paint in some trails that the player can follow. One thing that you will want to try to do is make sure that the player shouldn't go too far before having to backtrack and reward the player for exploration. The following screenshot shows the path:</p><div class="mediaobject"><img src="/graphics/9781783553655/graphics/3655OT_04_10.jpg" /></div><p>However, you'll notice that there are two problems with it currently. Firstly, it is too big to fit in with the world, and you can tell that it repeats.</p></li><li><p>To reduce the <a id="id292" class="indexterm"></a>appearance<a id="id293" class="indexterm"></a> of texture duplication, we can introduce new materials with a very soft opacity, which we place in patches in areas where there is just plain ground. For example, let's create a new texture with the <span class="strong"><strong>Grass (Meadow)</strong></span> texture. Change the <span class="strong"><strong>Brush Size</strong></span> value to <span class="strong"><strong>16</strong></span> and the <span class="strong"><strong>Opacity</strong></span> value to something really low, such as <span class="strong"><strong>6</strong></span>, and then start painting the areas that look too static. Feel free to select the first brush again to have a smoother touch up.</p></li><li><p>Now, if we zoom into the world as if we were a character there, I can tell that the first grass texture is way too big for the environment but we can actually change that very easily. Double-click on the texture to change the <span class="strong"><strong>Size</strong></span> value to (<code class="literal">8</code>,<code class="literal">8</code>). This will make the texture smaller before it duplicates. It's a good idea to have different textures with different sizes so that the seams of each texture aren't visible to others. The following screenshot shows the size options:</p><div class="mediaobject"><img src="/graphics/9781783553655/graphics/3655OT_04_11.jpg" /></div></li><li><p>Do the same <a id="id294" class="indexterm"></a>changes as in<a id="id295" class="indexterm"></a> the preceding step for our <span class="strong"><strong>Dirt</strong></span> texture as well, changing the <span class="strong"><strong>Size</strong></span> option to <code class="literal">(8,8)</code>:</p><div class="mediaobject"><img src="/graphics/9781783553655/graphics/3655OT_04_12.jpg" /></div></li></ol></div><p>With this, we already<a id="id296" class="indexterm"></a> have a level <a id="id297" class="indexterm"></a>that looks pretty nice! However, that being said, it's just some hills. To really have a quality-looking title, we are going to need to do some additional work to beautify the environment.</p></div>