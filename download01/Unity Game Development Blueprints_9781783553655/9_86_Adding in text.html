<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch09lvl1sec84"></a>Adding in text</h2></div></div><hr /></div><p>In addition to placing the health bar, to <a id="id705" class="indexterm"></a>get some experience using text, let's use that as well:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>With the <span class="strong"><strong>Canvas</strong></span> object selected, create a text object by navigating to <span class="strong"><strong>GameObject</strong></span> | <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Text</strong></span>.</p></li><li><p>Now, it may be hard to see it being added at first, so let's first change the color of the text. Select the <span class="strong"><strong>Text</strong></span> object, and go to its <span class="strong"><strong>Text</strong></span> component. Once there, change the <span class="strong"><strong>Color</strong></span> property to white:</p><div class="mediaobject"><img src="/graphics/9781783553655/graphics/3655OT_09_12.jpg" /></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note95"></a>Note</h3><p>In the new UI system, objects are drawn in order, which means that if the text object was before the slider, the slider would cover the text. However, you can drag objects into whichever order you want.</p></div></li><li><p>At this point, you'll notice <a id="id706" class="indexterm"></a>that the text is actually backwards. Fixing this is very simple; just change the <span class="strong"><strong>Rect Transform</strong></span> module on it to have a <span class="strong"><strong>Y Rotation</strong></span> value of <code class="literal">180</code>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note96"></a>Note</h3><p>Make sure this is done on the <span class="strong"><strong>Text</strong></span> object, or your health will go down from right to left rather than left to right.</p></div></li><li><p>For our purposes, we will have this be displayed in the center of our object. To do this, we can just set the <span class="strong"><strong>Alignment</strong></span> property to the center, both vertically and horizontally, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553655/graphics/3655OT_09_13.jpg" /></div></li><li><p>You can modify the <a id="id707" class="indexterm"></a>
<span class="strong"><strong>Text</strong></span> property of the <span class="strong"><strong>Text</strong></span> component, and it will change what is being displayed, which is great to prototype things out before we set them in the code. For example, right now, I can change the value to <code class="literal">100/100</code>, as shown in the screenshot following the next paragraph of text.</p><p>This is a great start, but there are still two problems that we will need to solve. First, the text isn't being updated when the health changes. Secondly, when we start the game and go towards the enemy, the health shows up backwards, and when the character moves, we have to watch the UI turn with the enemy.</p><div class="mediaobject"><img src="/graphics/9781783553655/graphics/3655OT_09_14.jpg" /></div><p>Thankfully, we can fix this by turning the canvas to always face the player, which is similar to how a billboard works in the particle and terrain placement systems.</p></li><li><p>Open up our <code class="literal">EnemyBehaviour</code> script <a id="id708" class="indexterm"></a>once again in <code class="literal">MonoDevelop</code>. First, we need to create a new variable for our text:</p><div class="informalexample"><pre class="programlisting">// Reference to the textbox
  public Text healthText;</pre></div></li><li><p>Now, add the following line to the end of the <code class="literal">TakeDamage</code> function:</p><div class="informalexample"><pre class="programlisting">healthText.text = ((int)currentHealth).ToString() + "/" + 
  health.ToString();</pre></div></li><li><p>Finally, we need to have the canvas always face us. To do that, we will add in the <code class="literal">Update</code> function, as follows:</p><div class="informalexample"><pre class="programlisting">public void Update()
{
// Going to move the Canvas so that it moves both the
//slider and the text
healthBar.transform.parent.GetComponent&lt;RectTransform&gt;().LookAt(
Camera.main.gameObject.transform
);
}</pre></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note97"></a>Note</h3><p>To use the <span class="strong"><strong>Rect Transform</strong></span> component, you can cast the transform, as shown in the following information box:</p><div class="informalexample"><pre class="programlisting">(RectTransform)transform;</pre></div><p>Or you can call <code class="literal">GetComponent</code> for the relevant component, as follows:</p><div class="informalexample"><pre class="programlisting">GetComponent&lt;RectTransform&gt;;</pre></div></div></li><li><p>Save your script, and <a id="id709" class="indexterm"></a>go back to the Unity editor. Once there, assign the <span class="strong"><strong>Health Text</strong></span> property to the <code class="literal">Text</code> object. Finally, hit the <span class="strong"><strong>Apply</strong></span> button under <span class="strong"><strong>Prefab</strong></span> so that our other ghosts can have this added functionality as well.</p></li><li><p>Save your scene, and play the game! The following screenshot comes up:</p><div class="mediaobject"><img src="/graphics/9781783553655/graphics/3655OT_09_15.jpg" /></div></li></ol></div><p>At this point, we now <a id="id710" class="indexterm"></a>have the health bar working exactly the way we want to and can see that setting the text object is almost exactly the same as doing it with the old GUI tools!</p></div>