<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec22"></a>Project setup</h2></div></div><hr /></div><p>At this point, I have assumed <a id="id87" class="indexterm"></a>that you have a fresh installation of Unity, and have <a id="id88" class="indexterm"></a>started it up. You need to perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Open the previous project. Now, let's first create a new scene by navigating to <span class="strong"><strong>File</strong></span> | <span class="strong"><strong>New Scene</strong></span>. With the new scene created, save it by navigating to <span class="strong"><strong>File</strong></span> | <span class="strong"><strong>Save Scene</strong></span>. Name it <code class="literal">Main_Menu.unity</code> and save it inside your <code class="literal">Scenes</code> folder.</p></li><li><p>Let's first grab the background from our previous level so that we do not need to create it once again. To do that, double-click on the scene you created in the first chapter. Left-click on the <span class="strong"><strong>Background</strong></span> object in the <span class="strong"><strong>Hierarchy</strong></span> view and navigate to <span class="strong"><strong>Edit</strong></span> | <span class="strong"><strong>Copy</strong></span>. Go back to your <code class="literal">Main_Menu</code> scene and paste it into the world by navigating to <span class="strong"><strong>Edit</strong></span> | <span class="strong"><strong>Paste</strong></span>:</p><div class="mediaobject"><img src="/graphics/9781783553655/graphics/3655OT_02_1.jpg" /></div><p>Unity has an inbuilt <a id="id89" class="indexterm"></a>GUI functionality through the <a id="id90" class="indexterm"></a>UnityGUI system<a id="id91" class="indexterm"></a> that allows us to create interfaces through scripts.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note25"></a>Note</h3><p>Unless you are using Unity 4.6 or later, Unity doesn't have an included visual GUI development system, but you can find tools on the Unity Asset Store that can be used to create your GUI in a <span class="strong"><strong>What You See Is What You Get</strong></span> (<span class="strong"><strong>WYSIWYG</strong></span>) fashion. Otherwise, you can also use Autodesk's popular Scaleform system, which allows you to create your GUIs in Adobe Flash for an additional cost.</p></div><p>This system uses a function <a id="id92" class="indexterm"></a>called <code class="literal">OnGUI</code>, which is similar to the <code class="literal">Update</code> function we used previously in the way that it gets called every frame that the component is enabled on a game object within the scene. All of your rendering of the GUI controls should be performed inside this function or in a function called inside of the <code class="literal">OnGUI</code> function.</p></li><li><p>The first thing we're<a id="id93" class="indexterm"></a> going to do is add a start button to our <a id="id94" class="indexterm"></a>game. Right-click on the <span class="strong"><strong>Scripts</strong></span> folder you created earlier, and then click on <span class="strong"><strong>Create</strong></span> and select the <span class="strong"><strong>C# Script</strong></span> label. Call this new script <code class="literal">MainMenuGUI</code>. Open MonoDevelop and use the following code:</p><div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;

public class MainMenuGUI : MonoBehaviour {
  public int buttonWidth = 100;
  public int buttonHeight = 30;
  void OnGUI() 
  {
    //Get the center of our screen
    float buttonX = ( Screen.width - buttonWidth ) / 2.0f;
    float buttonY = ( Screen.height - buttonHeight ) / 2.0f;

    //Show button on the screen and check if clicked
    if ( GUI.Button( new Rect( buttonX, buttonY, 
                              buttonWidth, buttonHeight ), 
                     "Start Game" ) )
    {
      // If button clicked, load the game level
      Application.LoadLevel("Chapter_1");
    }

    // Add game's title to the screen, above our button
    GUI.Label( new Rect(buttonX + 2.5f , buttonY - 50, 
                        110.0f, 20.0f), 
               "Twinstick Shooter" );
  }

}</pre></div><p>What this code basically does is place a title and button on our screen. Whenever we click on the button, the next level will be loaded. Now, this code may look quite different from what we've done before, so I will explain it after we see exactly what this code does.</p></li><li><p>After saving the code, attach the <code class="literal">MainMenuGUI</code> script to the <span class="strong"><strong>Main Camera</strong></span> object by dragging the script onto<a id="id95" class="indexterm"></a> the object in the <span class="strong"><strong>Hierarchy</strong></span> view. Once you complete that, save everything and start up the game! The following screenshot shows what we've created:</p><div class="mediaobject"><img src="/graphics/9781783553655/graphics/3655OT_02_2.jpg" /></div><p>At this point, you<a id="id96" class="indexterm"></a> should have a very simple main menu screen. Now when we click on the <span class="strong"><strong>Start Game</strong></span> button, we will move on to our game!</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip03"></a>Tip</h3><p>If you are not able to load the game level, make sure that your <span class="strong"><strong>Scene</strong></span> from the last chapter is named <code class="literal">Chapter_1</code> and it is included in the <span class="strong"><strong>Build Settings</strong></span>.</p></div></li></ol></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec13"></a>The anatomy of a GUI control</h3></div></div></div><p>The most important concepts to grasp first are the <code class="literal">GUI.Button</code> and <code class="literal">GUI.Label</code> functions. Both of these functions are what we refer to as a <span class="strong"><strong>GUI control</strong></span>, and there are many others which we will be using in the future. So, to clear up any confusion, let's talk about them now.</p><p>Creating any <a id="id97" class="indexterm"></a>GUI control <a id="id98" class="indexterm"></a>consists of the <a id="id99" class="indexterm"></a>following:</p><div class="informalexample"><pre class="programlisting">ControlType(Position, Content)</pre></div><p>The parts of the preceding line of code are explained in the following sections.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl3sec01"></a>ControlType</h4></div></div></div><p>The <code class="literal">ControlType</code> function<a id="id100" class="indexterm"></a> is a function that exists in Unity's <a id="id101" class="indexterm"></a>GUI class, and is the name of the element that you want to create in the world. In the preceding code, we used <code class="literal">GUI.Button</code> and <code class="literal">GUI.Label</code>, but there are many more.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note26"></a>Note</h3><p>For more information on all the different kinds of controls, there are additional definitions for the functions. You can<a id="id102" class="indexterm"></a> check them out at <a class="ulink" href="https://docs.unity3d.com/Documentation/Components/gui-Controls.html" target="_blank">https://docs.unity3d.com/Documentation/Components/gui-Controls.html</a>.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl3sec02"></a>Position</h4></div></div></div><p>The <code class="literal">Position</code> parameter<a id="id103" class="indexterm"></a> is where you want to place the object in the <a id="id104" class="indexterm"></a>screen space. In the previous chapter, we talked about viewport and screen space (pixel space). When working with the GUI class like we are in this example, we have to manually position each element that we place on the screen based on the screen space in pixels. To do that, we want to know the position (x, y) that we want to place the object at, and the size (width, height) of that object. These are the four parameters of the <code class="literal">Rect</code> structure, which itself is the first parameter that we provide to many of the GUI class functions.</p><p>Since we want this code to work on as many projects as possible, I don't want to hardcode what the middle of the screen is. Thankfully, the <code class="literal">Screen.width</code> and <code class="literal">Screen.height</code> properties can be used to let me know the current dimensions of the screen in pixels, no matter what screen size the game is on.</p><p>The first thing I need to know is how large I want my displayed objects to be. The constructor of the <code class="literal">Rect</code> class takes in four floats, so I need to use floating point numbers (add <code class="literal">.0f</code> to whole number values to use them as floats).</p><p>For my button, I'm creating two<a id="id105" class="indexterm"></a> variables, <code class="literal">buttonWidth</code> and <code class="literal">buttonHeight</code>, to fill in values for the third and fourth parameters of the <code class="literal">Rect</code> variable.</p><p>By setting the <code class="literal">buttonX</code> and <code class="literal">buttonY</code> values inside the <code class="literal">OnGUI</code> function, if at any time during the game <a id="id106" class="indexterm"></a>we change the resolution of the game or port our game to other places, the GUI will work without any modifications, which is pretty great. For the title of our screen, I'll just put in some values to show that we do not need to create variables for this.</p><p>The X and the Y position set the top-left of our object, which is great if we're putting something on the top-left. However, if we just set the middle of the screen, it will be a tad offset. So, we'll need to move our position to fit the size of our buttons as well.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl3sec03"></a>Content</h4></div></div></div><p>The second and final argument for the control is the actual content that we want to display with the ControlType we are using. Right now, we're <a id="id107" class="indexterm"></a>just passing in a string to display, but we can also display images and other content as well, including other controls. We will talk about other pieces of content that we can add in later.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec14"></a>GUI.Button</h3></div></div></div><p>One of the most common UI elements<a id="id108" class="indexterm"></a> is the <code class="literal">Button</code> control. This function is used to render a <a id="id109" class="indexterm"></a>clickable object. If you look at the code from the <code class="literal">MainMenuGUI</code> script, you'll notice that the button is cased inside of an <code class="literal">if</code> statement. This is because if the button is clicked on, then the function will return <code class="literal">true</code> when the button is released. If this is true, we will load the level we created in the previous chapter.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec15"></a>GUI.Label</h3></div></div></div><p>The <code class="literal">Label</code> control is used to<a id="id110" class="indexterm"></a> display static <a id="id111" class="indexterm"></a>data on the screen that the player will not be able to interact with. This is quite similar to the <code class="literal">GUIText</code> objects that we created in the previous chapter. Labels can contain text, textures, or both. In our case, we are just displaying some text.</p></div></div>