<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch01lvl1sec15"></a>Particle systems for enemy explosion</h2></div></div><hr /></div><p>Now that<a id="id53" class="indexterm"></a> we have the basis for our game, let's spend some time to make the project look nicer. Particle systems are one of my go-to things to add juiciness to a game project and helps to set your project apart from others. Particles systems are composed of two separate parts: a particle and the thing that emits it. A particle is a small object that stores properties; generally we try to make these objects as simple as possible, as we want to spawn a large number of them. The emitter's job is to spawn a number of these and initialize their properties. Thankfully, Unity has a fully featured particle editor that's included with the engine, and we're going to use it in this section. Perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Create a new particle system by going to <span class="strong"><strong>GameObject</strong></span> | <span class="strong"><strong>Create Other</strong></span> | <span class="strong"><strong>Particle System</strong></span>. Have a look at the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553655/graphics/3655OT_01_21.jpg" /></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note18"></a>Note</h3><p>If you are using Unity 4.6 use <span class="strong"><strong>GameObject</strong></span> | <span class="strong"><strong>Particle System</strong></span> to create the particle system.</p></div><p>Once you do this, you should see a default particle system show up. Do note that the system will only animate if it is the object selected and Unity is the active window.</p></li><li><p>Change the object's name to <code class="literal">Explosion</code>. First, under the <span class="strong"><strong>Particle System</strong></span> tab, change <span class="strong"><strong>Duration</strong></span> to <code class="literal">1.00</code>, and then uncheck <span class="strong"><strong>Looping</strong></span>.</p></li><li><p>Click on the downwards-facing arrow on the right-hand side of <span class="strong"><strong>Start Lifetime</strong></span>, and change the values to be <span class="strong"><strong>Random Between Two Constants</strong></span>. Change those values to <code class="literal">0</code> and <code class="literal">1</code>. Do the same with <span class="strong"><strong>Start Speed</strong></span>. Make <span class="strong"><strong>Start Size</strong></span> use random values between <code class="literal">0</code> and <code class="literal">.5</code>.</p></li><li><p>Next, we will set the object's <span class="strong"><strong>Start Color</strong></span> value to the same color as the UFO ship (you can use the eyedropper tool or set it to <code class="literal">210</code>, <code class="literal">224</code>, <code class="literal">230</code>) and an <span class="strong"><strong>Alpha</strong></span> value of <code class="literal">125</code>. Have a look at the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553655/graphics/3655OT_01_22.jpg" /></div></li><li><p>Open <a id="id54" class="indexterm"></a>the <span class="strong"><strong>Emission</strong></span> tab, and change <span class="strong"><strong>Rate</strong></span> to <code class="literal">200</code>. This is how many particles are spawned at a time.</p></li><li><p>Open the <span class="strong"><strong>Shape</strong></span> tab, change the <span class="strong"><strong>Shape</strong></span> property to <span class="strong"><strong>Sphere</strong></span>, and then set <span class="strong"><strong>Radius</strong></span> to <code class="literal">.35</code> to fit the rim of the ship. Enable the <span class="strong"><strong>Random Direction</strong></span> option.</p></li><li><p>Back in the <span class="strong"><strong>Explosion</strong></span> section, change the <span class="strong"><strong>Simulation Space</strong></span> to <span class="strong"><strong>World</strong></span>; that way, if this object moves, the already-spawned particles will not move.</p></li><li><p>Now, make this object a prefab by dragging-and-dropping it into the <code class="literal">Prefabs</code> folder. After that, delete the <code class="literal">Explosion</code> object in your <span class="strong"><strong>Hierarchy</strong></span> object.</p></li><li><p>Go back to your <code class="literal">EnemyBehaviour</code> script file. We will first want to add in a new variable for us to use to spawn this explosion when it dies:</p><div class="informalexample"><pre class="programlisting">// When the enemy dies, we play an explosion
public Transform explosion;</pre></div></li><li><p>Back in <span class="strong"><strong>Inspector</strong></span>, drag-and-drop your new explosion prefab to fill in the explosion variable slot in our enemy prefab.</p></li><li><p>Coming back to the <code class="literal">EnemyBehaviour</code> script, let's spawn an explosion whenever we die. Inside your <code class="literal">if(health &lt;= 0)</code> section of <code class="literal">CollisionEnter2D</code>, add in the following lines:</p><div class="informalexample"><pre class="programlisting">// Check if explosion was set
if(explosion)
{
  GameObject exploder = ((Transform)Instantiate(explosion, this.transform.position, this.transform.rotation)).gameObject;
  Destroy(exploder, 2.0f);
}</pre></div></li><li><p>Save <a id="id55" class="indexterm"></a>your script and scene files, and run your project! Have a look at the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553655/graphics/3655OT_01_23.jpg" /></div></li></ol></div><p>And now, whenever <a id="id56" class="indexterm"></a>an enemy dies, it will spawn an explosion for us to see!</p></div>