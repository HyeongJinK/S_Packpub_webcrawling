<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch07lvl1sec47"></a>Creating our game's map</h2></div></div><hr /></div><p>Moving on from theory, we need to look at something to put on our map of the world, such as somewhere for our player to travel to and explore.</p><p>We not only need to provide graphical support in the game to open up areas on the map or just show the journey between two points, but we also need to connect these points with scenes in our game.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec85"></a>Adding the world map</h3></div></div></div><p>Start off by copying the following <code class="literal">map</code> image into your project in the <code class="literal">Assets\Sprites\Environment</code> folder:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_07_002.jpg" /></div><p>
</p><p>I created the preceding map image very quickly using the <span class="strong"><strong>Hexagon Pack</strong></span> provided by Kenny on opengameart.org found at <a class="ulink" href="http://opengameart.org/content/hexagon-pack-310x" target="_blank">http://opengameart.org/content/hexagon-pack-310x</a>. You can find the full set in the code bundle that accompanies the book. I thought these tiles were incredibly well made and, dare I say, adorable. You can easily combine these assets in some photo-editing software to create a map of your choice.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note79"></a>Note</h3><p>If you are interested in a free photo-editing program to help with game art creation, check out the program called GIMP found at <a class="ulink" href="http://www.gimp.org/" target="_blank">http://www.gimp.org/</a>.</p><p>I highly suggest you check out the other art provided by this artist at <a class="ulink" href="http://opengameart.org/users/kenney" target="_blank">http://opengameart.org/users/kenney</a>. He has provided many free high-quality art assets that can assist you in making 2D games of various genres.</p></div><p>With that imported into your project, open the scene named <code class="literal">Overworld</code> that you created in <a class="link" href="#" linkend="ch02">Chapter 2</a>, <span class="emphasis"><em>Building Your Project and Character</em></span>. Drag your <code class="literal">map</code> image to the scene. Increase the size of the <code class="literal">MainCamera</code> to <code class="literal">6</code> and position the <code class="literal">map</code> sprite so that you your scene appears as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_07_003.jpg" /></div><p>
</p><p>Remember that the size of the camera simply determines the size of the rectangular area the camera will display.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec86"></a>Adding a player prefab to the overworld</h3></div></div></div><p>Let's add the player to the scene. Instead of creating the player sprite and adding all of the appropriate components, let's create a prefab for the player to save ourselves some time. Navigate back to your <code class="literal">Town</code> scene.</p><p>Select <span class="strong"><strong>Player</strong></span> from the Hierarchy and drag it to the <code class="literal">Assets/Prefabs/Characters</code> folder. Upon doing so, you should now see the following in your Project view:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_07_004.jpg" /></div><p>
</p><p>Also, <span class="strong"><strong>Player</strong></span> should now be represented by blue text instead of black in the Hierarchy. Select the prefab and set its <span class="strong"><strong>Transform</strong></span> coordinates to 0.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip80"></a>Tip</h3><p>It's a good practice to reset the position transform for prefabs to 0; this makes reusing them a whole lot easier.</p></div><p>When you create a prefab, you essentially create an object that you can reuse that contains all of the same properties. This is really helpful when you have an object in one scene that you want to duplicate to another.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note81"></a>Note</h3><p>When you create a prefab and use it in your scene, any changes to the prefab will be automatically updated on all the objects you created with that prefab. However, changes to those objects do not update the prefab or any other copies. All changes are one way from the prefab.</p><p>If you want to update the prefab, select the <span class="strong"><strong>Prefab</strong></span> option in the editor and change it. Alternatively, select an instance in the scene, change the required properties, and then click on <span class="strong"><strong>Apply</strong></span> to save the changes back to the prefab, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_07_005.jpg" /></div><p>
</p><p>This will only affect existing components and properties that were already on the prefab. To add new components or scripts to the prefab, you must edit the prefab itself.</p></div><p>Now that we have a <code class="literal">Player</code> prefab, navigate back to your <code class="literal">Overworld</code> scene. Drag the <code class="literal">Player</code> prefab into your scene, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_07_006.jpg" /></div><p>
</p><p>Because we used the prefab, the player's ability to walk around and animate is already included!</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec87"></a>Adding places of interest</h3></div></div></div><p>Now that we have a general map in place, let's add some places for the player to go. We will start by adding a sprite to represent the town that we have been working with in the last few chapters. I chose the <code class="literal">hexagon-pack/PNG/Tiles/Modern/modern_oldBuilding.png</code> sprite from the Hexagon Pack to represent my town (the following figure), since it looks similar to the town hall in the <code class="literal">Town</code> scene. Feel free to peruse the other premade tiles provided or make your own tiles with the images in the <code class="literal">hexagon-pack/PNG/Tiles/Terrain</code> and <code class="literal">hexagon-pack/PNG/Objects</code> folders.</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_07_007.jpg" /></div><p>
</p><p>Import the image into your project by placing it in the <code class="literal">Assets\Sprites\Environment</code> folder. Then place it in your scene wherever you want your town to be located. Place the character near the town so that, when the scene starts, it looks as if she had just exited the town, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_07_008.jpg" /></div><p>
</p><p>Rename the object <code class="literal">MapPoint</code> and add a <code class="literal">Box Collider 2D</code> component to it. Set the <span class="strong"><strong>Box Collider 2D</strong></span> to <code class="literal">Is Trigger</code>. Also, set the <span class="strong"><strong>Sprite Renderer</strong></span> component's <span class="strong"><strong>Order in Layer</strong></span> to <code class="literal">1</code>. That way, these objects will always appear above the map, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_07_009.jpg" /></div><p>
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note82"></a>Note</h3><p>With a collider set as a trigger, it will cause the <code class="literal">OnTrigger</code> functions (<code class="literal">OnTriggerEnter2D</code> and <code class="literal">OnTriggerExit2D</code>) to be called in scripts as opposed to the normal <code class="literal">OnCollision</code> functions (<code class="literal">OnCollisionEnter2D</code> and <code class="literal">OnCollisionExit2D</code>). Bear this in mind when applying scripts that rely on a collider.</p></div><p>Now drag the town object to the <code class="literal">Assets\Prefabs\Environment</code> folder to create a prefab of the object.</p><p>Once the prefab is created, we can start to use it since this game object has now become the first instance of our <code class="literal">MapPoint</code> prefab. So, rename the instance on the scene <code class="literal">Town</code>, and then create a new tag called <code class="literal">Town</code>. Assign the tag to the object, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_07_010.jpg" /></div><p>
</p><p>We will create a second place on the map that will represent a camp site. Add the following image, <code class="literal">hexagon-pack/PNG/Tiles/Modern/modern_campsite.png</code>, to your project by placing it in the <code class="literal">Assets\Sprites\Environment</code> folder:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_07_011.jpg" /></div><p>
</p><p>Next, create a new instance of our <code class="literal">MapPoint</code> prefab by dragging the prefab on to the scene, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_07_012.jpg" /></div><p>
</p><p>Rename it <code class="literal">Campsite</code> and create/set a tag with the same name. Now, replace its image with the <code class="literal">modern_campsite.png</code> image by dragging the new image to the <code class="literal">Sprite</code> slot of the <code class="literal">Sprite Renderer </code>component, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_07_013.jpg" /></div><p>
</p><p>Due to the scope of this book, we are going to limit the character's movement on the map to the area visible by the camera. We could easily allow the character to walk further by removing the blockades we are about to include and adding a script to the camera that follows the player. In the same manner that we added borders to our town, we will now add them to our overworld, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_07_014.jpg" /></div><p>
</p><p>As you can see from the preceding screenshot, I made the box colliders overlap slightly with the bounds of the camera. That way, the player stops before she reaches the absolute edge of the screen.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note83"></a>Note</h3><p>Do not let these colliders overlap with the colliders of the town or campsite. Doing so will make the scene transition code trigger instantly.</p></div></div></div>