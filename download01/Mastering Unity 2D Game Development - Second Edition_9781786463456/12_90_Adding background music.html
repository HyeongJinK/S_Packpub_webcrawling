<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch12lvl1sec85"></a>Adding background music</h2></div></div><hr /></div><p>To begin, I grabbed the song <span class="strong"><strong>Bit Shift</strong></span> by Kevin MacLeod over at incompetech.com. If you go to the site, select <span class="strong"><strong>Get Started with Music</strong></span> and you can search by mood, genre, and other properties. You can also search for the name of the song to download the one I am using. I chose this song because it reminds me a lot of <span class="strong"><strong>Phantasy Star</strong></span> on the <span class="strong"><strong>Sega Master System</strong></span>, which is one of my all-time-favorite games. But I digress. Add whichever song you choose to the <code class="literal">Assets/Audio/Music</code> folder.</p><p>We are going to just have this one song play throughout all of our scenes. This means that we need to create an object that starts playing the music at our initial scene and then doesn't destroy when a new scene loads. Placing this object in a scene and telling it not to destroy when we go to new scenes works great, except for one problem; if you return back to the initial scene, the sound will duplicate and each time you return to the scene it will add a new instance of the song. We could accomplish this with code, but I want to show you another way to handle it, and that's by adding a splash screen to our project.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch12lvl2sec146"></a>Creating a splash screen</h3></div></div></div><p>A splash screen is the initial screen that displays before all others in a video game. It usually contains a logo, credits, copyright, and so on. When you build a game in Unity, a Unity splash screen will initially play. We will customize this screen in <a class="link" href="#" linkend="ch13">Chapter 13</a>, <span class="emphasis"><em>Putting a Bow on it</em></span>, but for now we will just have a blank splash screen that loads our audio sources.</p><p>The splash screen is a great place to load your objects that you want to carry on throughout the entire game because:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Everyone sees this screen when they first start playing.</p></li><li><p>You never return to this screen, so items will not duplicate.</p></li></ol></div><p>To begin, create a new scene by navigating to the <code class="literal">Assets/Scenes</code> folder, right-clicking within the folder, and selecting <span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>Scene</strong></span>. Name this new scene <code class="literal">SplashScreen</code>. Double-click on the scene to load it.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch12lvl2sec147"></a>Adding the audio source</h3></div></div></div><p>Now, within the <span class="strong"><strong>Hierarchy</strong></span>, select <span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>Audio</strong></span> | <span class="strong"><strong>Audio Source</strong></span>. Position it at 0,0,0 and rename it <code class="literal">Music</code>. Now, drag the song you downloaded into the <span class="strong"><strong>AudioClip</strong></span> slot of the <span class="strong"><strong>Audio Source</strong></span>. Also, make sure <span class="strong"><strong>Loop</strong></span> is selected in the <span class="strong"><strong>Audio Source</strong></span> component. As shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_12_002.jpg" /></div><p>
</p><p>When you play the scene, the music should immediately begin playing.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch12lvl2sec148"></a>Transitioning to the next scene</h3></div></div></div><p>We are going to write two small scripts: one that automatically transitions from this scene to the next and one that keeps the music from destroying when the next scene loads.</p><p>Before we begin writing these scripts, let's go ahead and add this scene to the <span class="strong"><strong>Build Settings</strong></span>; otherwise, none of the code we are about to write will work. When you add it to the <span class="strong"><strong>Build Settings</strong></span>, make sure it is the first scene in the list. This will cause this to be the first scene that loads when the game begins. As shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_12_003.jpg" /></div><p>
</p><p>The first script we will write will make sure the game automatically transitions to the next scene. As you can see from the <span class="strong"><strong>Build Settings</strong></span> dialog, the next scene is the <code class="literal">Town</code>. Create the following C# script in the <code class="literal">Assets/Scripts</code> folder and call it <code class="literal">SplashScreen.cs</code>:</p><pre class="programlisting">using UnityEngine; &#13;
using System.Collections; &#13;
using UnityEngine.SceneManagement; &#13;
 &#13;
public class SplashScreen : MonoBehaviour { &#13;
    public string sceneToLoadName; &#13;
    public int timeToLoad; &#13;
 &#13;
 &#13;
    void Start () {     &#13;
        Invoke("NextScene", timeToLoad); &#13;
    } &#13;
     &#13;
    void NextScene () { &#13;
        SceneManager.LoadScene(sceneToLoadName); &#13;
    } &#13;
} &#13;
</pre><p>This code simply loads a scene by name after a specified amount of time.</p><p>To get this code to work, we need to attach it to something. We don't want to attach it to the <code class="literal">Music</code> object, because that will be transferring to the next scene, so let's just add it to the <code class="literal">Main Camera</code>. Give the <span class="strong"><strong>Scene To Load Name</strong></span> variable the value of <code class="literal">Town</code> and the <span class="strong"><strong>Time To Load</strong></span> variable the value of <code class="literal">1</code>. As shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_12_004.jpg" /></div><p>
</p><p>Play the scene, and after one second the <code class="literal">Town</code> scene will load. However, the music instantly stops playing, as it is not carried over to the <code class="literal">Town</code> scene.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch12lvl2sec149"></a>Keeping the music after the scene transition</h3></div></div></div><p>Now that the scene automatically transitions, let's make our music come along for the ride.</p><p>Create the following C# script in the <code class="literal">Assets/Scripts</code> folder and call it <code class="literal">KeepAround.cs</code>:</p><pre class="programlisting">using UnityEngine; &#13;
using System.Collections; &#13;
 &#13;
public class KeepAround : MonoBehaviour { &#13;
     &#13;
    void Update (){  &#13;
 &#13;
        DontDestroyOnLoad(gameObject); &#13;
 &#13;
    }     &#13;
     &#13;
}  &#13;
</pre><p>This script simply states: when a new scene loads, don't destroy whatever GameObject to this script is attached to. Now attach this script to the <code class="literal">Music</code> GameObject.</p><p>Now, when you play the scene, the music will continue to play in the <code class="literal">Town</code>. It will also play in the <code class="literal">Shop</code>, <code class="literal">Overworld</code>, and any other scene you feel like having your character travel to.</p></div></div>