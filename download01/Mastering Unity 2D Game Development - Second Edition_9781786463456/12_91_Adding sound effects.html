<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch12lvl1sec86"></a>Adding sound effects</h2></div></div><hr /></div><p>We will create another <code class="literal">AudioSource</code> to play all sound effects. The way in which we have the sound effect play will be handled through code instead of having it play instantly and continuously.</p><p>Now, within the <span class="strong"><strong>Hierarchy</strong></span>, select <span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>Audio</strong></span> | <span class="strong"><strong>Audio Source</strong></span>. Position it at 0,0,0 and rename it <code class="literal">Sound</code>, as shown in the following screenshot. Since we don't want a sound to play the moment the game starts, deselect <span class="strong"><strong>Play On Awake</strong></span>. Also drag and drop the <code class="literal">KeepAround.cs</code> script into the <span class="strong"><strong>Inspector</strong></span>:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_12_005.jpg" /></div><p>
</p><p>I chose to have this single audio source for my sound effects and to have it continue through each scene to make muting and unmuting the sound easier.</p><p>To easily access the <code class="literal">Sound</code> GameObject through code, we will use a <span class="strong"><strong>Tag</strong></span>. Select the <code class="literal">Sound</code> GameObject and add the new tag <code class="literal">Sound</code>. As shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_12_006.jpg" /></div><p>
</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch12lvl2sec150"></a>Adding a sound to the buy button</h3></div></div></div><p>We can add all sorts of sounds to our game and the process will be the same throughout. For this text, to preserve theÂ  page count, we will only add one sound. We will add a nice coin sound that will play whenever the <code class="literal">Buy Button</code> in the shop is selected. I toyed with the idea of using a sound effect that was simply me saying <span class="emphasis"><em>cha-ching</em></span>, because I thought it would be funny in a terrible way, but I decided against it. Instead, I went over to freesound.org and got the sound of coins being shaken in a bag, found here: <a class="ulink" href="http://freesound.org/people/D%20W/sounds/140382/" target="_blank">http://freesound.org/people/D%20W/sounds/140382/</a>. Place the sound in the <code class="literal">Assets/Audio/FX</code> folder.</p><p>Return to the <code class="literal">Shop</code> scene. If you recall, the functionality for the <code class="literal">Buy Button</code> was in the <code class="literal">ShopMananger</code> script attached to the <code class="literal">Inventory</code> GameObject. So, open the <code class="literal">ShopManager</code> script from the <code class="literal">Assets/Scripts/Shop</code> folder.</p><p>Create two new variables at the top of the script as follows:</p><pre class="programlisting">GameObject soundEffectsSource; &#13;
public AudioClip buySound;  &#13;
</pre><p>Now create a new <code class="literal">Awake()</code> function before the <code class="literal">Start()</code> function as follows:</p><pre class="programlisting">void Awake(){ &#13;
        soundEffectsSource= GameObject.FindGameObjectWithTag("Sound"); &#13;
}  &#13;
</pre><p>Now we just need to update the <code class="literal">ConfirmPurchase()</code> function by adding the following <code class="literal">if</code> statement:</p><pre class="programlisting">if(soundEffectsSource!=null){ &#13;
            soundEffectsSource.GetComponent&lt;AudioSource&gt;().PlayOneShot(buySound); &#13;
        }  &#13;
</pre><p>I made the <code class="literal">buySound</code> a public variable so that we could easily assign it through the <span class="strong"><strong>Inspector</strong></span>. So, select Inventory from the <span class="strong"><strong>Hierarchy</strong></span>, and drag the coin sound to the <span class="strong"><strong>Buy Sound</strong></span> slot in the <code class="literal">ShopMananger</code>, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_12_007.jpg" /></div><p>
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note124"></a>Note</h3><p>If we neglected to place the <code class="literal">if(soundEffectsSource!=null){}</code> condition in our function, we would be unable to buy objects unless we started playing our game at the splash screen, because we would get an error if we tried to buy something.</p></div><p>Now, since our sound effect source is created on the splash screen, the only way we can check to see if our sound effect works is by playing the game from the splash screen. Reload the splash screen, play the game, navigate to the <code class="literal">Shop</code> scene, and buy something. The sound should play whenever the <code class="literal">Buy Button</code> is pressed.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip125"></a>Tip</h3><p>Having to always play from the splash screen is quite annoying when you are testing your game. I recommend adding an audio source with the <code class="literal">Sound</code> tag to each scene just for sound-testing purposes, but disabling them before building the final version of your game.</p></div></div></div>