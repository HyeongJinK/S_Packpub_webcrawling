<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec29"></a>Transitioning and bounds</h2></div></div><hr /></div><p>Our camera follows our player, but our hero can still walk off the screen and keep going forever, so let's stop that from happening.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec52"></a>Towns with borders</h3></div></div></div><p>As you saw in the preceding section, you can use Unity's camera logic to figure out where things are on the screen. You can also do more complex ray testing to check where things are, but I find these are overly complex unless you depend on that level of interaction.</p><p>The simpler answer is just to use the native <span class="strong"><strong>Box2D</strong></span> physics system to keep things in the scene. This might seem like overkill, but the 2D physics system is very fast and fluid, and it is simple to use.</p><p>We already added the physics components, <code class="literal">Rigidbody 2D</code> (to apply physics) and a <code class="literal">Box Collider 2D</code> (to detect collisions), to the player in <a class="link" href="#" linkend="ch02">Chapter 2</a>, <span class="emphasis"><em>Building your Project and Character</em></span>. Now we can make use of these components by adding some additional collision objects to stop the player from running off.</p><p>To accomplish this and to keep things organized, we will add three empty GameObjects (either by navigating to <span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>Create Empty</strong></span> or by pressing <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>N</em></span>) to the scene (one parent and two children) to manage these collision points. We will initially place each of them at position (0,0,0). I've named them <span class="strong"><strong>WorldBounds</strong></span> (parent), and <span class="strong"><strong>LeftBorder</strong></span> and <span class="strong"><strong>RightBorder</strong></span> (children), as the shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_04_040.jpg" /></div><p>
</p><p>To make these objects slightly easier to see, we will change their icons. Select the <span class="strong"><strong>LeftBorder</strong></span>, and in the <span class="strong"><strong>Inspector</strong></span>, expand the icon selection drop-down menu. Select the blue oval. Do the same for the <span class="strong"><strong>RightBorder</strong></span>, shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_04_041.jpg" /></div><p>
</p><p>Next, we will position each of the child GameObjects to the left and right-hand sides of the screen, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_04_042.jpg" /></div><p>
</p><p>Next, we will add a <span class="strong"><strong>Box Collider 2D</strong></span> to each border game object and increase its height just to ensure that it works for the entire height of the scene. I've set the <span class="strong"><strong>Y</strong></span> value to <code class="literal">15</code> for effect, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_04_043.jpg" /></div><p>
</p><p>Move the <span class="strong"><strong>LeftBorder</strong></span> and <span class="strong"><strong>RightBorder</strong></span> so that their <code class="literal">x</code> positions are <code class="literal">-14</code> and <code class="literal">14</code>, respectively. The end result should look like the following screenshot with the two new colliders highlighted in green:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_04_044.jpg" /></div><p>
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note45"></a>Note</h3><p>Alternatively, you could have just created one of the children, added the <span class="strong"><strong>Box Collider</strong></span>, duplicated it (by navigating to <span class="strong"><strong>Edit</strong></span> | <span class="strong"><strong>Duplicate</strong></span> or by pressing <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>D</em></span>), and moved it. If you have to create multiples of the same thing, this is a handy tip to remember.</p></div><p>If we run the project, our character can still walk past the borders!! That is because the character only has a <span class="strong"><strong>Box Collider</strong></span> with a <span class="strong"><strong>Trigger</strong></span> Component. That will check if she collides with things, but won't stop her from passing through things. Let's give her a collider that will stop her from passing through things.</p><p>Select the options drop-down on her <span class="strong"><strong>Box Collider 2D</strong></span> component (represented by the little cog on the right side of the component). Then select <span class="strong"><strong>Copy Component</strong></span>, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_04_045.jpg" /></div><p>
</p><p>Now select the options drop-down again and select <span class="strong"><strong>Paste Component As New</strong></span>, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_04_046.jpg" /></div><p>
</p><p>You should now see a second <span class="strong"><strong>Box Collider 2D</strong></span> component at the bottom of the <span class="strong"><strong>Inspector</strong></span> list. For the new <span class="strong"><strong>Box Collider 2D</strong></span>, deselect <span class="strong"><strong>Is Trigger</strong></span>, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_04_047.jpg" /></div><p>
</p><p>If you run the project now, you will see that our hero can no longer escape this town, but we can see the edge of the background, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_04_048.jpg" /></div><p>
</p><p>Add two more background images to deal with this issue:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_04_049.jpg" /></div><p>
</p><p>Right now, she can walk in the sky. We can fix this is the same way we stopped her from walking too far left or right. Create two more empty GameObjects and make them children of the <code class="literal">WorldBounds</code>. Name them <code class="literal">Upperbound</code> and <code class="literal">Lowerbound</code>. Give them red oval icons. Add the <span class="strong"><strong>Box Collider 2D</strong></span> component to each with an <code class="literal">X</code> size of <code class="literal">30</code>. Move the player on to the road and position the upper and lower bounds, as shown in the following:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_04_050.jpg" /></div><p>
</p><p>Now she walks where she should! However, as we want to let her leave, we can add a script to the new <code class="literal">Boundary</code> GameObject so that when the hero reaches the end of the town, she can leave.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec53"></a>Journeying onward</h3></div></div></div><p>Now that we have collision zones on our town's borders, we can hook into this by using a script to activate when the hero approaches.</p><p>Before we can do that, let's give our left and right borders a tag to make them easily accessible through script. Select <span class="strong"><strong>LeftBorder</strong></span> and expand the <span class="strong"><strong>Tag</strong></span> drop-down menu. Then select <span class="strong"><strong>Add Tag...</strong></span>, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_04_051.jpg" /></div><p>
</p><p>Select the <span class="emphasis"><em>+</em></span> sign on the empty list:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_04_052.jpg" /></div><p>
</p><p>And create a tag called <span class="strong"><strong>Borders</strong></span>:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_04_053.jpg" /></div><p>
</p><p>Reselect <span class="strong"><strong>LeftBorder</strong></span>, and now <span class="strong"><strong>Borders</strong></span> will be available from the <span class="strong"><strong>Tag</strong></span> drop-down menu. Select it to give the <span class="strong"><strong>LeftBorder the Borders tag</strong></span>:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_04_054.jpg" /></div><p>
</p><p>Tag the <span class="strong"><strong>RightBorder</strong></span> with the <span class="strong"><strong>Borders</strong></span> tag as well. Now that our borders are tagged, we can create a script that will trigger an event when the player reaches the borders.</p><p>Since we don't have anything set up to happen when she reaches the edges, we will just have a message displayed in the Console.</p><p>Create a new C# script called <code class="literal">NavigationPrompt</code>, clear its contents, and populate it with the following code:</p><pre class="programlisting">using UnityEngine; 
using System.Collections; 
 
public class NavigationPrompt : MonoBehaviour { 
 
  void OnCollisionEnter2D(Collision2D col){ 
      if(col.gameObject.CompareTag("Borders")){ 
          Debug.Log("leave town"); 
      } 
  } 
 
}  
</pre><p>Attach the <code class="literal">NavigationPrompt</code> script to the player character to view the Console prompt "leave town" when she collides with a border. It's not terribly interesting right now, but we will update the script to make something actually happen when the character hits the border in <a class="link" href="#" linkend="ch06">Chapter 6</a>, <span class="emphasis"><em>NPCs and Interactions</em></span>.</p></div></div>