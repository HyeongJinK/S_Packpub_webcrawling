<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec27"></a>Building the scene</h2></div></div><hr /></div><p>Now that we have some assets to build with, we can start building our first town, by placing images within the scene.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec43"></a>Adding the town background</h3></div></div></div><p>Returning to the scene view, you should see the following:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_04_018.jpg" /></div><p>
</p><p>If, however, we add our town background texture to the scene by dragging it to either the project Hierarchy or the scene view, you will end up with the following:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_04_019.jpg" /></div><p>
</p><p>
<span class="emphasis"><em>Our player has vanished!</em></span> The reason for this is simple: Unity's sprite system has an ordering system that comes in two parts.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec44"></a>Sprite sorting layers</h3></div></div></div><p>
<span class="strong"><strong>Sorting Layers</strong></span> (<span class="strong"><strong>Edit</strong></span> | <span class="strong"><strong>Project Settings</strong></span> | <span class="strong"><strong>Tags and Layers</strong></span>) are a collection of Sprites, which are bulked together to form a single group. Layers can be configured to be drawn in a specific order on the screen, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_04_020.jpg" /></div><p>
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec45"></a>Sprite Sorting Order</h3></div></div></div><p>Sprites within an individual layer can be sorted, allowing you to control the draw order of sprites within that layer. The sprite <span class="strong"><strong>Inspector</strong></span> is used for this purpose, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_04_021.jpg" /></div><p>
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note40"></a>Note</h3><p>Sprite's <span class="strong"><strong>Sorting Layers</strong></span> should not be confused with Unity's rendering layers. Layers are a separate functionality used to control whether groups of GameObjects are drawn or managed together, whereas <span class="strong"><strong>Sorting Layers</strong></span> control the draw order of Sprites in a scene.</p></div><p>The reason our player is no longer visible is she is behind the background. As the two sprites are in the same layer and have the same sort order, they are simply drawn in the order that they are in the project Hierarchy.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec46"></a>Updating the scene sorting layers</h3></div></div></div><p>To resolve the update of the scene's sorting layers, let's organize our Sprite rendering by adding some Sprite sorting layers. Open up the <span class="strong"><strong>Tags and Layers</strong></span> Inspector pane, as shown in the following screenshot (by navigating to <span class="strong"><strong>Edit</strong></span> | <span class="strong"><strong>Project Settings</strong></span> | <span class="strong"><strong>Tags and Layers</strong></span>) and expand the <span class="strong"><strong>Sorting Layers</strong></span> menu:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_04_022.jpg" /></div><p>
</p><p>You can add new sorting layers by selecting the plus sign. Add the following <span class="strong"><strong>Sorting Layers</strong></span>:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Background</strong></span>
</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Middleground</strong></span>
</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Foreground</strong></span>
</p></li></ul></div><p>These layers need to be listed in the ordered they are bulleted. Images in the sorting layer on the top of the list will appear to be the furthest back and images in the sorting layer on the bottom of the list will appear to be the closest. You should see the following:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_04_023.jpg" /></div><p>
</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip41"></a>Tip</h3><p>You can reorder the layers underneath the default anytime by selecting a row and dragging it up and down the sprite's <span class="strong"><strong>Sorting Layers</strong></span> list.</p></div><p>With the layers set up, we can now configure our GameObjects accordingly. Select the background to view its <span class="strong"><strong>Inspector</strong></span>. In the <span class="strong"><strong>Sprite Renderer</strong></span> component, <span class="strong"><strong>Background</strong></span> will now be available in the drop-down menu for <span class="strong"><strong>Sorting Layer</strong></span>, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_04_024.jpg" /></div><p>
</p><p>Now, set the <span class="strong"><strong>Sorting Layer</strong></span> on our <span class="strong"><strong>background</strong></span> Sprite to the <span class="strong"><strong>Background</strong></span> layer, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_04_025.jpg" /></div><p>
</p><p>Now, select the player GameObject and set its <span class="strong"><strong>Sorting Layer</strong></span> to <span class="strong"><strong>Middleground</strong></span>. You should now see the player in front of the background, as follows:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_04_026.jpg" /></div><p>
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec47"></a>Building out the scene</h3></div></div></div><p>Before we add more objects to the scene, let's add a few more background images to expand the size of the scene. First, set the background's <span class="strong"><strong>Transform</strong></span> position to (0,0,0). Now, duplicate the background twice by selecting the image and pressing <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>D</em></span> two times. Using the move controls (or by adjusting the transform <code class="literal">x</code> position) move <code class="literal">background (1)</code> to the right of <code class="literal">background</code> and <code class="literal">background (2)</code> to the left of <code class="literal">background</code>. Make sure you do not see spaces between the background images. You should now have the following:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_04_027.jpg" /></div><p>
</p><p>It can be rather cumbersome to have a bunch of objects in your hierarchy. Also, sometimes you want objects to be grouped together so that you can move them as a single object. You can create empty objects in your scene and use them in a similar fashion as folders to group objects together.</p><p>From the <span class="strong"><strong>Create</strong></span> drop-down menu, select <span class="strong"><strong>Create Empty</strong></span>, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_04_028.jpg" /></div><p>
</p><p>Rename the new GameObject <span class="strong"><strong>Backgrounds</strong></span> and set its <span class="strong"><strong>Transform</strong></span> position to (0,0,0). Now, select the three background images and drag them until you are hovering over the <span class="strong"><strong>Backgrounds</strong></span> GameObject in the Hierarchy. This will make the background images children of the <span class="strong"><strong>Backgrounds</strong></span> GameObject. Now, you can move all of the background images at once. You can also minimize the arrow next to <span class="strong"><strong>Backgrounds</strong></span> to declutter your Hierarchy, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_04_029.jpg" /></div><p>
</p><p>Now add the sidewalk and road sprites to the scene. When you do so, you will notice they appear behind the background. Change their GameObject names to <code class="literal">sidewalk</code> and <code class="literal">road</code>, respectively. For the <code class="literal">road</code>, change its <span class="strong"><strong>Sorting Layer</strong></span> to <code class="literal">Background</code> and its <span class="strong"><strong>Order in Layer</strong></span> to <code class="literal">1</code>, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_04_030.jpg" /></div><p>
</p><p>For the sidewalk, change its <span class="strong"><strong>Sorting Layer</strong></span> to <code class="literal">Background</code> and its <span class="strong"><strong>Order in Layer</strong></span> to <code class="literal">2</code>, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_04_031.jpg" /></div><p>
</p><p>Duplicate each of them once. Create an empty GameObject named <code class="literal">Roads</code> and an empty GameObject named <code class="literal">Sidewalks</code> to contain the groups. Make sure you set each of these empty GameObjects' <span class="strong"><strong>Transform</strong></span> position to (0,0,0) before making the Sprites children of the empty GameObjects. Move the sidewalks and roads into position so that your scene looks like the following:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_04_032.jpg" /></div><p>
</p><p>Right now our character is floating in the air and can walk places other than the road and sidewalk, but we will fix that shortly.</p></div></div>