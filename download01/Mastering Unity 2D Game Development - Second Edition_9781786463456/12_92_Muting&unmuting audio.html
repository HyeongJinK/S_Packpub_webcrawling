<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch12lvl1sec87"></a>Muting/unmuting audio</h2></div></div><hr /></div><p>Before we proceed, we need to create a <code class="literal">Music</code> tag similar to the way we created a <code class="literal">Sound</code> tag. Return to the splash scene and select the <code class="literal">Music</code> GameObject in the <span class="strong"><strong>Hierarchy</strong></span>. Create a <code class="literal">Music</code> tag and assign it to the <code class="literal">Music</code> GameObject, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_12_008.jpg" /></div><p>
</p><p>We need to add a few little UI elements to mute and unmute our audio. We'll add two buttons to our <code class="literal">Town</code> scene that will turn the sound and music on and off. We're going to use the image on the button to indicate to the player if the sound and music channels are on or off.</p><p>Add the following <code class="literal">soundUI.png</code> image to the <code class="literal">Assets/Sprites/UI</code> folder. Import it under <span class="strong"><strong>Multiple Sprite Mode</strong></span> and slice it automatically:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_12_009.jpg" /></div><p>
</p><p>Navigate to the <code class="literal">Town</code> scene and select the <code class="literal">PopUp</code> canvas from the <span class="strong"><strong>Hierarchy</strong></span>. Add two buttons to the bottom left part of the screen, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781786463456/graphics/image_12_010.jpg" /></div><p>
</p><p>Name the first button <code class="literal">Music</code> and the second button <code class="literal">Sound</code>.</p><p>Now, create a C# script named <code class="literal">MuteUnMute</code> within the <code class="literal">Assets/Scripts</code> folder , and replace its code with the following:</p><pre class="programlisting">using UnityEngine; &#13;
using System.Collections; &#13;
using UnityEngine.UI; &#13;
 &#13;
public class MuteUnMute : MonoBehaviour { &#13;
    public Button musicButton; &#13;
    public Button soundButton; &#13;
     &#13;
    Image musicImage; &#13;
    Image soundImage; &#13;
     &#13;
    public Sprite MusicOn; &#13;
    public Sprite MusicOff; &#13;
     &#13;
    public Sprite SoundOn; &#13;
    public Sprite SoundOff; &#13;
 &#13;
    GameObject soundEffectsSource; &#13;
    GameObject musicSource; &#13;
    AudioSource musicPlaying; &#13;
    AudioSource soundPlaying; &#13;
     &#13;
    void Awake(){ &#13;
        soundEffectsSource=GameObject.FindGameObjectWithTag("Sound"); &#13;
        musicSource=GameObject.FindGameObjectWithTag("Music"); &#13;
         &#13;
        if(musicSource!=null){ &#13;
            musicPlaying=musicSource.GetComponent&lt;AudioSource&gt;(); &#13;
        } &#13;
         &#13;
        if(soundEffectsSource!=null){ &#13;
            soundPlaying=soundEffectsSource.GetComponent&lt;AudioSource&gt;(); &#13;
        } &#13;
 &#13;
        musicImage=musicButton.GetComponent&lt;Image&gt;(); &#13;
        soundImage=soundButton.GetComponent&lt;Image&gt;(); &#13;
 &#13;
        //show correct music image when starting scene &#13;
        //music is off &#13;
        if (musicPlaying.mute==false) { &#13;
            musicImage.sprite=MusicOn; &#13;
        //music is on &#13;
        }else{ &#13;
            musicImage.sprite=MusicOff; &#13;
        } &#13;
 &#13;
        //show correct sound image when starting scene &#13;
        //sound is off &#13;
        if (soundPlaying.mute==false) { &#13;
            soundImage.sprite=SoundOn; &#13;
        //sound is on &#13;
        }else{ &#13;
            soundImage.sprite=SoundOff; &#13;
        } &#13;
 &#13;
    } &#13;
     &#13;
    public void MuteAndUnMuteMusic(){ &#13;
        //mute music if off &#13;
        if (musicPlaying.mute==false) { &#13;
            musicImage.sprite=MusicOff; &#13;
            if(musicPlaying!=null){ &#13;
                musicPlaying.mute=true; &#13;
            } &#13;
         &#13;
        //unmute music if off &#13;
        } else { &#13;
            musicImage.sprite=MusicOn; &#13;
            if(musicPlaying !=null){ &#13;
                musicPlaying.mute=false; &#13;
            } &#13;
 &#13;
        } &#13;
         &#13;
    } &#13;
     &#13;
    public void MuteAndUnMuteSound(){ &#13;
        //mute sound if on &#13;
        if (soundPlaying.mute==false) { &#13;
            soundImage.sprite=SoundOff; &#13;
            if(soundPlaying !=null){ &#13;
                soundPlaying.mute=true; &#13;
            } &#13;
             &#13;
        //unmute sound if off &#13;
        } else { &#13;
            soundImage.sprite=SoundOn; &#13;
            if(soundPlaying !=null){ &#13;
                soundPlaying.mute=false; &#13;
            } &#13;
        } &#13;
         &#13;
    } &#13;
}  &#13;
</pre><p>The preceding code does the following:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Finds the audio sources and assigns them to the variables <code class="literal">soundEffectsSource</code> and <code class="literal">musicSource</code> based on their tags.</p></li><li style="list-style-type: disc"><p>Assigns the correct image to the button that controls music and the button that controls sound when the level starts. For example, if the music is muted when the player enters the scene, the muted music image will display.</p></li><li style="list-style-type: disc"><p>The <code class="literal">MuteAndUnMuteMusic()</code> function will be called when a button is clicked. It will turn the music on and off and change the button image depending on whether or not the music is already on or off.</p></li><li style="list-style-type: disc"><p>The <code class="literal">MuteAndUnMuteSound()</code> function performs similarly to the <code class="literal">MuteAndUnMuteMusic()</code> function.</p></li></ul></div><p>Now, begin playing the game from the <code class="literal">SplashScreen</code> scene and you should have full control of your music and sound through these two buttons.</p></div>