<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch10lvl1sec70"></a>Attack! Attack!</h2></div></div><hr /></div><p>Now that the player has committed themselves into the fray, we can play through their selected action.</p><p>The attack phase will simply run for 1 second and then it will be the enemies' turn. To accomplish this, we use a simple coroutine to perform the attack itself. So, let's add the following function to the <code class="literal">BattleManager</code> script:</p><pre class="programlisting">IEnumerator AttackTarget(){ &#13;
   attacking=true; &#13;
   selectedTarget.EnemyProfile.health-=GetComponent&lt;Attack&gt;().hitAmount; &#13;
   yield return new WaitForSeconds(1); &#13;
   attacking=false; &#13;
   GetComponent&lt;Attack&gt;().hitAmount=0; &#13;
   battleStateManager.SetBool("PlayerReady", false); &#13;
 &#13;
}  &#13;
</pre><p>The following is what the preceding code is doing:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Sets a variable that states the player is attacking.</p></li><li><p>Decreases the selected enemy's health based on the chosen attack.</p></li><li><p>Waits for 1 second to reset the values.</p></li><li><p>Changes over to the next state.</p></li></ol></div><p>All that is left is to call this function now when the <code class="literal">Player_Attack</code> state is begun. In the <code class="literal">Update</code> function, update the <code class="literal">case BattleState.Player_Attack</code> section as follows:</p><pre class="programlisting">case BattleState.Player_Attack: &#13;
    canSelectEnemy=false; &#13;
    if(!attacking){ &#13;
        StartCoroutine(AttackTarget()); &#13;
    } &#13;
    break;  &#13;
</pre><p>Now that the attack has commenced and no doubt some Dragons were at least hurt in the ensuing battle, let us provide the player with some visual feedback.</p></div>