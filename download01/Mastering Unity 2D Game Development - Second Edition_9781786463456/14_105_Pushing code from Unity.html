<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch14lvl1sec98"></a>Pushing code from Unity</h2></div></div><hr /></div><p>Unity provides several post-processing capabilities that allow you to both intercept and override and also add your own processing to just about anything in the asset pipeline: assets, scripts, and even the build process itself.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch14lvl2sec164"></a>Processing assets</h3></div></div></div><p>Post or pre-processing of assets is very useful if you have custom-made or complex assets that need additional work once they are imported in Unity. In most cases, this is not needed as Unity already does a lot of work for you by processing assets.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note158"></a>Note</h3><p>If you do create any asset-processing scripts, remember they need to be placed in <code class="literal">Assets\Editor</code>.</p></div><p>We won't go into too much detail here as it is a very large area; this section is mainly to highlight its existence for those who were not aware. It is well-worth reading and checking up on.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip159"></a>Tip</h3><p>For more information about asset processing, refer to the Unity scripting reference guide at <a class="ulink" href="https://docs.unity3d.com/Documentation/ScriptReference/AssetPostprocessor.html" target="_blank">https://docs.unity3d.com/Documentation/ScriptReference/AssetPostprocessor.html</a>.</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note160"></a>Note</h3><p>For a nice, clean example of an asset processor, see the post on using Unity to make a simple FBX model post processor at <a class="ulink" href="http://forum.unity3d.com/threads/53179-Simple-AssetPostprocessor-example" target="_blank">http://forum.unity3d.com/threads/53179-Simple-AssetPostprocessor-example</a>.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch14lvl2sec165"></a>Processing the build</h3></div></div></div><p>A more interesting area for study, especially if you are working with many platforms and find yourself doing repetitive tasks on each platform (or when you create your Unity assets and need to copy files to a platform), is the ability to extend Unity3D's own project build process.</p><p>Simply create a normal class script in <code class="literal">Asset\Editor</code>, and then create your build action function with the <code class="literal">[PostProcessBuild]</code> attribute and the build function signature, as follows:</p><pre class="programlisting">using UnityEngine; &#13;
using UnityEditor; &#13;
using UnityEditor.Callbacks; &#13;
 &#13;
public class MyBuildPostprocessor &#13;
{ &#13;
  [PostProcessBuild] &#13;
  public static void OnPostprocessBuild(BuildTarget target, string      pathToBuiltProject)  &#13;
  { } &#13;
} &#13;
</pre><p>The attributes from the build processing give you the following information:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<code class="literal">BuildTarget</code>: This tells you which platform is currently being built using the <code class="literal">BuildTarget</code> enumeration.</p></li><li style="list-style-type: disc"><p>
<code class="literal">Path</code>: This gives you the output path where the build project is being written. This is useful if you want to copy additional files to it.</p></li></ul></div><p>You can also control the order in which this function is processed by adding parameters to the <code class="literal">[PostProcessBuild]</code> attribute as follows:</p><pre class="programlisting">[PostProcessBuild(10)] &#13;
public static void OnPostprocessBuild(BuildTarget target, &#13;
  string pathToBuiltProject)  &#13;
{ } &#13;
</pre><p>The order number is a definition of priority: the higher the number, the lower the priority. By default, all scripts have a priority of <code class="literal">1</code>. Scripts with lower numbers are executed first (even negative numbers such as <code class="literal">-10</code> are allowed for ultimate priority), whereas scripts with higher numbers are executed last.</p><p>This is especially useful if you want to have several actions execute on a successful build and want to control the order in which they are executed.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note161"></a>Note</h3><p>You can also copy code files directly to the target solution, if you wish, from your Unity project. If you do not want those files to be read or executed by Unity, then simply suffix them with <code class="literal">.ignore</code>, and Unity will ignore them. Just remember to rename them when copying them to a platform.</p><p>For example:</p><p>
<code class="literal">MyPlatformClassFile.cs.ignore</code>
</p></div><p>For more information about build processing, see the Unity scripting reference guide at <a class="ulink" href="http://docs.unity3d.com/412/Documentation/ScriptReference/PostProcessBuildAttribute.html" target="_blank">http://docs.unity3d.com/412/Documentation/ScriptReference/PostProcessBuildAttribute.html</a>.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip162"></a>Tip</h3><p>For a very full-featured example of highly customized build processing, check out the <code class="literal">AdRotator</code> Unity plugin, which is open source, on GitHub at: <a class="ulink" href="https://github.com/Adrotator/AdrotatorV2/tree/master/AdRotatorUnityPackage" target="_blank">https://github.com/Adrotator/AdrotatorV2/tree/master/AdRotatorUnityPackage</a>
</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note163"></a>Note</h3><p>Just check in the <code class="literal">AdRotatorUnitySDK.Assets\Editor\AdRotatorPostBuild.cs</code> script.</p></div></div></div>