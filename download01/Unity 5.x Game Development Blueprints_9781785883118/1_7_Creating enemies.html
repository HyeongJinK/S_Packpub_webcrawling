<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch01lvl1sec13"></a>Creating enemies</h2></div></div><hr /></div><p>Now, it's <a id="id48" class="indexterm"></a>really cool that we have a player, but it'll get really boring if all we can do is move around and shoot some lasers in the dark. Next, we'll introduce some simple enemies that will move toward the player that we'll be able to shoot later. Perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Leave the game by pressing the Play button again and then access our example code's <code class="literal">Assets</code> folder; move the <code class="literal">enemy.png</code> file into our <code class="literal">Sprites</code> folder.</p></li><li><p>Following that, drag and drop it into your scene from the <span class="strong"><strong>Scene</strong></span> tab to place it in the level.</p></li><li><p>Right-click<a id="id49" class="indexterm"></a> on the <span class="strong"><strong>Scripts</strong></span> folder you created earlier, click on <span class="strong"><strong>Create</strong></span>, and select the <span class="strong"><strong>C# Script</strong></span> label. Call this new script <code class="literal">MoveTowardsPlayer</code>. Go to <code class="literal">MonoDevelop</code> and use the following code:</p><div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;

public class MoveTowardsPlayer : MonoBehaviour 
{
  private Transform player;
  public float speed = 2.0f;

  // Use this for initialization
  void Start () 
  {
    player = GameObject.Find("playerShip").transform;
  }
  
  // Update is called once per frame
  void Update () 
  {
    Vector3 delta = player.position - transform.position;
    delta.Normalize();
    float moveSpeed = speed * Time.deltaTime;
    transform.position = transform.position + (delta * moveSpeed);
  }
}</pre></div><p>In the beginning of the game, I find the player ship and get his <code class="literal">Transform</code> component. Then, in every frame of the project, we move the enemy from where it currently is to the direction where the player is at.</p><p>The <code class="literal">GameObject.Find</code> function is very useful as it allows us to access objects at any time, but is computationally expensive, so don't put it in a function that gets called often (such as Update) when you can just save a reference to it. It's also important to note that the spelling of the parameter has to be exactly the same as the object's name in the hierarchy; so be sure to double check when you use it.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note13"></a>Note</h3><p>If you ever want to have objects run away from the player, use a negative speed.</p></div></li><li><p>Drag <a id="id50" class="indexterm"></a>and drop this newly added behavior onto our enemy object and rename it to <code class="literal">Enemy</code>.</p></li><li><p>Next, add a circle collider to our enemy by going to <span class="strong"><strong>Component</strong></span> | <span class="strong"><strong>Physics 2D</strong></span> | <span class="strong"><strong>Circle Collider 2D</strong></span>. Change the <span class="strong"><strong>Radius</strong></span> property to <code class="literal">.455</code>, and run the game. Have a look at the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781785883118/graphics/B05212_01_20.jpg" /></div></li></ol></div><p>Now, you'll see that the enemy will always move toward you! But if we shoot it, nothing happens. Let's fix that as follows:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Right-click on the <span class="strong"><strong>Scripts</strong></span> folder you created earlier, click on <span class="strong"><strong>Create</strong></span>, and select the <span class="strong"><strong>C# Script</strong></span> label. Call this new script <code class="literal">EnemyBehaviour</code>. Go to <code class="literal">MonoDevelop</code> (your IDE of choice,), and use the following code:</p><div class="informalexample"><pre class="programlisting">using UnityEngine; // MonoBehaviour

public class EnemyBehaviour : MonoBehaviour 
{

  // How many times should I be hit before I die
  public int health = 2;

  void OnCollisionEnter2D(Collision2D theCollision)
  {
    // Uncomment this line to check for collision
    //Debug.Log("Hit"+ theCollision.gameObject.name);

    // this line looks for "laser" in the names of 
    // anything collided.
    if(theCollision.gameObject.name.Contains("laser"))
    {
      LaserBehaviour laser = theCollision.gameObject.GetComponent("LaserBehaviour") as       LaserBehaviour;
      health -= laser.damage;
      Destroy (theCollision.gameObject);
    }
    
    if (health &lt;= 0) 
    {
      Destroy (this.gameObject);
    }
  }
}</pre></div><p>Now, you will notice that we have commented a line of code calling the function <code class="literal">Debug.Log</code>. This function when called will print something onto your console (in this case, name the object that we collided with), which may help you when debugging your own code in the future.</p><p>It's also important to note the reason we ask if the name contains Laser instead of is equal to is because when you create an object using Instantiate, by default it will add " (Clone)" to the end of the name of the object.</p></li><li><p>We also<a id="id51" class="indexterm"></a> want to tell the objects to actually react to collision events so we will need to add <a id="id52" class="indexterm"></a>
<span class="strong"><strong>Rigidbody 2D</strong></span> physics to the object, which is required one of the two objects involved in a collision in order for <code class="literal">OnCollisionEnter2D </code>to be called.</p></li><li><p>Select the <code class="literal">Enemy</code> object and then select <span class="strong"><strong>Component | 2D Physics | Rigidbody 2D</strong></span>. From there, change the <span class="strong"><strong>GravityScale</strong></span> value to 0 so that the object will not fall down by default due to gravity.</p></li><li><p>Save<a id="id53" class="indexterm"></a> your script, and then go back into Unity. Attach the <code class="literal">EnemyBehaviour</code> behavior to your enemy object, save your project, and run the game. If all went well, we should have something like the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781785883118/graphics/B05212_01_21.jpg" /></div></li></ol></div><p>Now, whenever we hit the enemy with our bullets twice, it will die. Nice!</p></div>