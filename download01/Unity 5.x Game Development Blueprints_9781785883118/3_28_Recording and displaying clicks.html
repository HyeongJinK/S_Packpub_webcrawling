<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec32"></a>Recording and displaying clicks</h2></div></div><hr /></div><p>Now that we<a id="id158" class="indexterm"></a> have this foundational button working, let's add some<a id="id159" class="indexterm"></a> text to display information to the player.</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Go to <span class="strong"><strong>GameObject | UI |Text</strong></span>. From there, use the <span class="strong"><strong>Anchor Presets</strong></span> tool, hold down <span class="emphasis"><em>Alt</em></span> + <span class="emphasis"><em>Shift, </em></span>and click on the top-center option. It may be hard to see, so let's fix that up next. Change the <span class="strong"><strong>Width</strong></span> to <code class="literal">1920</code> and <span class="strong"><strong>Height</strong></span> to <code class="literal">100</code>. You will remember that <code class="literal">1920</code> is what we used in our <span class="strong"><strong>Reference Resolution</strong></span>, so this will take up the entire size.</p></li><li><p>Then, change the <span class="strong"><strong>Font Size</strong></span> to <span class="strong"><strong>75</strong></span> and then change the <span class="strong"><strong>Paragraph Alignment</strong></span> to be centered horizontally, change the <span class="strong"><strong>Text Color</strong></span> to white, change the <span class="strong"><strong>Text</strong></span> to <code class="literal">You have: $0</code>, and rename the <code class="literal">Text</code> object to <code class="literal">CashText</code>:</p><div class="mediaobject"><img src="/graphics/9781785883118/graphics/B05212_03_09.jpg" /></div></li><li><p>Now select the <code class="literal">CashText</code> object and duplicate it (<span class="emphasis"><em>Ctrl</em></span>+<span class="emphasis"><em>D</em></span>) and give it a name of <code class="literal">RateText</code>. Change the <span class="strong"><strong>Pos Y</strong></span> to
<code class="literal">-75</code>, the text to <code class="literal">per second: 0.0</code> and change the <span class="strong"><strong>Font Size</strong></span> to
<code class="literal">50</code>.</p></li><li><p>Next, let's write <a id="id160" class="indexterm"></a>some code. Go to the <span class="strong"><strong>Project</strong></span> tab, move to<a id="id161" class="indexterm"></a> the <code class="literal">Assets</code> folder, and create a new folder named <code class="literal">Scripts</code>. From there, create a new script by selecting <span class="strong"><strong>Create | C# Script</strong></span>, and once it's created, name it <span class="strong"><strong>GameController</strong></span>. Once named, double-click on it to open up your IDE.</p></li><li><p>Use the following code:</p><div class="informalexample"><pre class="programlisting">using UnityEngine;
using UnityEngine.UI; // Text

public class GameController : MonoBehaviour {

    /// &lt;summary&gt;
    /// How much cash the player has
    /// &lt;/summary&gt;
    private float _cash;
    public float Cash
    {
        get
        {
            return _cash;
        }
        set
        {
            _cash = value;
            cashText.text = "You have: $" + _cash.ToString("0.00");
        }
    }

    /// &lt;summary&gt;
    /// How much cash is automatically earned per second
    /// &lt;/summary&gt;
    private float _cashPerSecond;
    public float CashPerSecond
    {
        get
        {
            return _cashPerSecond;
        }
        set
        {
            _cashPerSecond = value;
            rateText.text = "per second: " + _cashPerSecond.ToString("0.0");
        }
    }

    [Tooltip("How much cash players will make when they hit the button.")]
    public float cashPerClick = 1;

    [Header("Object References")]
    public Text cashText;
    public Text rateText;

    // Use this for initialization
    void Start ()
    {
        Cash = 0;
        CashPerSecond = 0;
    }
    
    // Update is called once per frame
    void Update ()
    {
        Cash += CashPerSecond * Time.deltaTime;
    }

public void ClickedButton()
    {
        Cash += cashPerClick;
    }</pre></div></li></ol></div><p>There is a lot of stuff <a id="id162" class="indexterm"></a>going on in the previous code, so we will start off talking<a id="id163" class="indexterm"></a> about the new aspects of code we used and then explain the overall content and meaning.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec14"></a>Working with accessors (get/set functions)</h3></div></div></div><p>One of the things you<a id="id164" class="indexterm"></a> may have noted is the addition of the <code class="literal">get</code> and <code class="literal">set </code>functions for the two properties. This is referred to as <span class="strong"><strong>accessors</strong></span> and is <a id="id165" class="indexterm"></a>a way for us to protect data or do something whenever a certain value changes. In this case, anytime the value changes, we will change the text displayed from our text objects.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note30"></a>Note</h3><p>For more information on<a id="id166" class="indexterm"></a> that check out <a class="ulink" href="https://msdn.microsoft.com/en-sg/library/aa287786(v=vs.71).aspx" target="_blank">https://msdn.microsoft.com/en-sg/library/aa287786(v=vs.71).aspx</a>.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec15"></a>Tooltip and Header attributes</h3></div></div></div><p>You may have noticed <a id="id167" class="indexterm"></a>the Header being used briefly in <a class="link" href="#" linkend="ch01">Chapter 1</a>. These allow <a id="id168" class="indexterm"></a>users to have additional behavior from the <span class="strong"><strong>Inspector</strong></span> tab in the Unity editor. In this case, <span class="strong"><strong>Tooltip</strong></span> will display a comment when you highlight the property in the <span class="strong"><strong>Inspector</strong></span> tab, and <span class="strong"><strong>Header</strong></span> will display a header before the next variable displayed.</p><p>Unity 5.3 has added a whole bunch of new attributes for people to use that still aren't put together easily within Unity's documentation yet, but Lior Tal put together a list of them with links to their <a id="id169" class="indexterm"></a>documentation at <a class="ulink" href="http://www.tallior.com/unity-attributes/" target="_blank">http://www.tallior.com/unity-attributes/</a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec16"></a>Explaining GameController's functionality</h3></div></div></div><p>In the previously<a id="id170" class="indexterm"></a> mentioned code, we have a number of new variables that we are going to be working with. <code class="literal">cashText</code> and <code class="literal">rateText</code> are references to the <span class="strong"><strong>Text</strong></span> components of the two text objects we created earlier and will change their text whenever the value of <code class="literal">Cash</code> or <code class="literal">CashPerSecond</code> changes due to the set functions. To be as efficient as possible, we only want to change the text when the value changes so that this works perfectly.</p><p>In our <code class="literal">Update</code> function, we are changing the value of <code class="literal">Cash</code> by increasing it by the current value of <code class="literal">CashPerSecond</code>. Note that we also use <code class="literal">Time.deltaTime</code> as we did in <a class="link" href="#" linkend="ch01">Chapter 1</a>, <span class="emphasis"><em>2D Twin-stick Shooter</em></span> to make it so that it will increase by the amount of time that elapsed in seconds since the previous frame.</p><p>Finally, we added a function that we will call whenever we click on the button to increase cash by whatever amount we set <code class="literal">CashPerClick</code> to.</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Next, create an empty game object by going to <span class="strong"><strong>GameObject | Create Empty</strong></span>. Rename it to <code class="literal">GameController</code>. Then, drag and drop the object to the top of the <span class="strong"><strong>Hierarchy</strong></span>. Next, drag and drop the <span class="strong"><strong>GameController</strong></span> script onto the object. Then, drag and drop the <span class="strong"><strong>CashText</strong></span> and <span class="strong"><strong>RateText</strong></span> objects to the respective properties in the newly added <span class="strong"><strong>GameController</strong></span> component:</p><div class="mediaobject"><img src="/graphics/9781785883118/graphics/B05212_03_10.jpg" /></div></li><li><p>Now we <a id="id171" class="indexterm"></a>need to call <code class="literal">ClickedButton</code> whenever the button is clicked, so from the <span class="strong"><strong>Hierarchy</strong></span> tab, click on the <code class="literal">Button</code> object. From the <code class="literal">On Click ()</code> section, press the <span class="strong"><strong>+</strong></span> button and then drag and drop the <code class="literal">GameController </code>game object into the slot (drag it from the <span class="strong"><strong>Hierarchy</strong></span> tab). Then, from the function bar, call <span class="strong"><strong>GameController | ClickedButton</strong></span>:</p><div class="mediaobject"><img src="/graphics/9781785883118/graphics/B05212_03_11.jpg" /></div></li><li><p>Save the<a id="id172" class="indexterm"></a> scene and play the game!</p><div class="mediaobject"><img src="/graphics/9781785883118/graphics/B05212_03_12.jpg" /></div></li></ol></div><p>Now we have a way to<a id="id173" class="indexterm"></a> increase the amount of cash we have by clicking on the button!</p></div></div>