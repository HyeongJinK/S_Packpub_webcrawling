<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec46"></a>Creating obstacles</h2></div></div><hr /></div><p>Of course, the <a id="id234" class="indexterm"></a>game wouldn't be fun without any challenges so we're going to add in the pipe-like obstacles that the player will also need to avoid.</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>From the <span class="strong"><strong>Art Assets</strong></span> folder, bring in the <code class="literal">rockGrass</code> and <code class="literal">rockGrassDown</code> sprite and place it into the <code class="literal">Assets/Sprites</code> folder from the <span class="strong"><strong>Project</strong></span> tab.</p></li><li><p>Drag <a id="id235" class="indexterm"></a>and drop the <code class="literal">rockGrass</code> object into the world. Change its position to <code class="literal">0, -2.5, 0</code>. Then, add a <span class="strong"><strong>Polygon Collider 2D</strong></span> component to it.</p></li><li><p>Afterwards, drag and drop the <code class="literal">rockGrassDown</code> object into the world. Change its position to <code class="literal">0, 2.5, 0</code>. Then, add a <span class="strong"><strong>Polygon Collider 2D</strong></span> component to it.</p></li><li><p>Next, create an empty game object by selecting <span class="strong"><strong>GameObject | Create Empty</strong></span>. Reset its position to <code class="literal">0,0,0</code> and then rename it to <code class="literal">Obstacle</code>. Afterwards, drag and drop the two <code class="literal">rockGrass</code> objects to it to become the<code class="literal"> Obstacle</code> object's children:</p><div class="mediaobject"><img src="/graphics/9781785883118/graphics/B05212_04_13.jpg" /></div></li><li><p>Now, we want the obstacle to move like the <code class="literal">RepeatingBehaviour</code> script does, except instead of repeating, we want to remove it so we can respawn. Create a new C# Script named <code class="literal">ObstacleBehaviour</code> and use the following code for it:</p><div class="informalexample"><pre class="programlisting">using UnityEngine;

public class ObstacleBehaviour : RepeatingBackground {

    protected override void Offscreen(ref Vector3 pos)
    {
        Destroy(this.gameObject);
    }
}</pre></div></li></ol></div><p>While it may not<a id="id236" class="indexterm"></a> look like a lot, quite a lot is going on here. Note that instead of <code class="literal">MonoBehaviour</code> to the right of the <code class="literal">:</code>, we now have <code class="literal">RepeatingBehaviour</code>. What this does effectively is have <code class="literal">ObstacleBehaviour</code> inherit everything that the <code class="literal">RepeatingBehaviour</code> class has. This means that all of the properties and functionality are included from the previous script. This will allow us to only write code to extend or override the behavior from the original. In this case, we want to destroy the obstacle when it goes off screen, so all we do is override the <code class="literal">Offscreen</code> function (which we can only do if we made the function virtual earlier) to now destroy the game object this was attached to before.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note36"></a>Note</h3><p>For more information on inheritance and derived classes, check out <a class="ulink" href="https://msdn.microsoft.com/en-us/library/ms228387(v=vs.90).aspx" target="_blank">https://msdn.microsoft.com/en-us/library/ms228387(v=vs.90).aspx</a>.</p></div><p>Save the script, then attach the newly created script to the <code class="literal">Obstacle</code> object, and set the <span class="strong"><strong>Scroll Speed</strong></span> property to <code class="literal">5</code>.</p><p>At this point, the obstacle will now go off screen, and afterwards, it'll destroy itself automatically!</p></div>