<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec39"></a>Code fundamentals</h2></div></div><hr /></div><p>In order to create our own code, we need to understand the foundations of programming so that we can build upon it.</p><p>Code is made up of the<a id="id264" class="indexterm"></a> following main components:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Variables</p></li><li style="list-style-type: disc"><p>Data types</p></li><li style="list-style-type: disc"><p>Operators (also known as expressions)</p></li><li style="list-style-type: disc"><p>Functions (also known as methods)</p></li><li style="list-style-type: disc"><p>Comments</p></li><li style="list-style-type: disc"><p>Library import variables</p></li></ul></div><p>When programming, we make use of variables to store both known and unknown information in the form of values and identifiers in named locations in memory.</p><p>For instance, we could store the name of the main character in our game in a variable, as shown in the following line of code:</p><div class="informalexample"><pre class="programlisting">Name = Hercules</pre></div><p>
<code class="literal">Name</code> is the variable's identifier, and <code class="literal">Hercules</code> is the stored value assigned to the variable <code class="literal">Name</code>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec40"></a>Data types</h3></div></div></div><p>Variables are <a id="id265" class="indexterm"></a>used in programming to store different types of data. Setting the variable type is known as <a id="id266" class="indexterm"></a>
<span class="strong"><strong>Typing</strong></span>. The reason to use types and type<a id="id267" class="indexterm"></a> checking is that expressions involving incompatible types can be detected right away rather than becoming hidden bugs (errors in code). For instance, if we are attempting to perform calculations and we accidentally assign a <code class="literal">string</code> (text) value to a variable of type <code class="literal">int</code> (integer number), then an error will appear as soon as we try to build our script, whereas if we did not use types and type checking, then the script would have attempted to do a calculation with the text, which would produce nonsensical output.</p><p>There are many data types in <a id="id268" class="indexterm"></a>Unity. The most commonly used variable types in UnityScript are:</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; "><colgroup><col align="left" /><col align="left" /></colgroup><thead><tr><th style="border-bottom: 0.5pt solid ; " align="left" valign="bottom">
<p>Data type</p>
</th><th style="border-bottom: 0.5pt solid ; " align="left" valign="bottom">
<p>Variable data</p>
</th></tr></thead><tbody><tr><td style="" align="left" valign="top">
<p>String</p>
</td><td style="" align="left" valign="top">
<p>Text <a id="id269" class="indexterm"></a>within double quotes<a id="id270" class="indexterm"></a> such as "Press start to play." </p>
</td></tr><tr><td style="" align="left" valign="top">
<p>Integer (written as <code class="literal">int</code>)</p>
</td><td style="" align="left" valign="top">
<p>A <a id="id271" class="indexterm"></a>whole number such<a id="id272" class="indexterm"></a> as 3.</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>Float</p>
</td><td style="" align="left" valign="top">
<p>A<a id="id273" class="indexterm"></a> number with a decimal <a id="id274" class="indexterm"></a>point such as 3.14159.</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>Boolean</p>
</td><td style="" align="left" valign="top">
<p>True<a id="id275" class="indexterm"></a> or <a id="id276" class="indexterm"></a>False.</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>GameObject</p>
</td><td style="" align="left" valign="top">
<p>An<a id="id277" class="indexterm"></a> object in a Unity <a id="id278" class="indexterm"></a>scene. It contains all the data that makes up an object, such as its name, position, and so on.</p>
</td></tr></tbody></table></div><p>To declare and initialize a variable, we use the following syntax:</p><div class="informalexample"><pre class="programlisting">var varName:DataType  //assignment operator value</pre></div><p>The following is an example of the preceding syntax:</p><div class="informalexample"><pre class="programlisting">var playerAmmo:Int = 3;</pre></div><p>Declaring a variable simply means that we are announcing the existence of an element, be it an object, piece of text, number, and so on, by typing out what it is, which, in this case, is a variable with its name, type, and value.</p><p>Initializing means that we are assigning a value to the variable from the start—its initial value.</p><p>The preceding code creates a variable of type integer that stores the amount of player ammunition and in this case has an initial amount of <code class="literal">3</code>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec41"></a>Operators</h3></div></div></div><p>Operators <a id="id279" class="indexterm"></a>are symbols which operate on variables. There are several kinds of operators. The most<a id="id280" class="indexterm"></a> commonly used operators are assignment, arithmetic, relational, and logical operators.</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; "><colgroup><col align="left" /><col align="left" /><col align="left" /></colgroup><tbody><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Assignment operator</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Meaning</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Example</strong></span>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>=</p>
</td><td style="" align="left" valign="top">
<p>Stores a value into a variable</p>
</td><td style="" align="left" valign="top">
<p>A = 72</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Arithmetic operators</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Meaning</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Example</strong></span>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>+</p>
</td><td style="" align="left" valign="top">
<p>Addition</p>
</td><td style="" align="left" valign="top">
<p>A = 5 + 4 (A=9)</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>-</p>
</td><td style="" align="left" valign="top">
<p>Subtraction</p>
</td><td style="" align="left" valign="top">
<p>A = 10-5 (A=5)</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>*</p>
</td><td style="" align="left" valign="top">
<p>Multiplication</p>
</td><td style="" align="left" valign="top">
<p>A = 5*2 (A=10)</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>/</p>
</td><td style="" align="left" valign="top">
<p>Division</p>
</td><td style="" align="left" valign="top">
<p>A = 10/2 (A=5)</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>%</p>
</td><td style="" align="left" valign="top">
<p>Remainder <a id="id281" class="indexterm"></a>after division</p>
</td><td style="" align="left" valign="top">
<p>A = 10%3 (A=1)</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Relational operators</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Meaning</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Example</strong></span>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>&gt;</p>
</td><td style="" align="left" valign="top">
<p>Greater<a id="id282" class="indexterm"></a> than</p>
</td><td style="" align="left" valign="top">
<p>7&gt;3 True</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>&lt;</p>
</td><td style="" align="left" valign="top">
<p>Smaller than</p>
</td><td style="" align="left" valign="top">
<p>7&lt;3 False</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>&gt;=</p>
</td><td style="" align="left" valign="top">
<p>Greater than or equal to</p>
</td><td style="" align="left" valign="top">
<p>7&gt;=3 True</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>&lt;=</p>
</td><td style="" align="left" valign="top">
<p>Smaller<a id="id283" class="indexterm"></a> than or equal to</p>
</td><td style="" align="left" valign="top">
<p>3&lt;=3 True</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>==</p>
</td><td style="" align="left" valign="top">
<p>Equal to</p>
</td><td style="" align="left" valign="top">
<p>7==3 False</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>!=</p>
</td><td style="" align="left" valign="top">
<p>Not equal to</p>
</td><td style="" align="left" valign="top">
<p>3!=7 True</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Logical operators</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Meaning</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Example</strong></span>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>||</p>
</td><td style="" align="left" valign="top">
<p>Logical<a id="id284" class="indexterm"></a> OR</p>
</td><td style="" align="left" valign="top">
<p>a=1 and b=2</p>
<p>If ((a==1)||(b&lt;1)) returns true</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>&amp;&amp;</p>
</td><td style="" align="left" valign="top">
<p>Logical AND</p>
</td><td style="" align="left" valign="top">
<p>a=1 and b=2</p>
<p>If ((a==1)&amp;&amp;(b&lt;1)) returns false</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>!</p>
</td><td style="" align="left" valign="top">
<p>Logical NOT</p>
</td><td style="" align="left" valign="top">
<p>a=1</p>
<p>If  !(a==1) returns false</p>
</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec42"></a>Functions</h3></div></div></div><p>Functions<a id="id285" class="indexterm"></a> accomplish<a id="id286" class="indexterm"></a> a specific task combining multiple instructions into a single line of code. They are called by their name and can be reused as many times as required. Functions are triggered by certain events that we specify.</p><p>UnityScript comes with many built-in functions that help make coding many common tasks quicker. UnityScript files come with two required functions by default: <code class="literal">Start()</code> and <code class="literal">Update()</code>. The <code class="literal">Start</code> function has the following syntax:</p><div class="informalexample"><pre class="programlisting">Function Start()
{
}</pre></div><p>The <code class="literal">Start</code> function<a id="id287" class="indexterm"></a> gets called only once when the script is first enabled on the very first frame. Games and computer programs in general run at a certain number of frames per second. Thus, the <code class="literal">Start</code> function gets called on the very first frame during runtime.</p><p>This function is useful when we want to initialize—set values to variables at the very start of the game, for example, how many lives the player will start with.</p><p>Curly braces/brackets are used to mark when a function begins and when it ends. Every function has to have a start and an end; otherwise, if one is missing, then the code will not work, and it will throw an error on the console when we try to build our code.</p><p>The following is the syntax for the <code class="literal">Update</code> function:</p><div class="informalexample"><pre class="programlisting">function Update()
{
}</pre></div><p>Unlike the <code class="literal">Start</code> function, the <code class="literal">Update</code> function<a id="id288" class="indexterm"></a> gets called every frame (thus, it will be called several times within a second) and is useful to call functions that we would like to continuously occur, for example, an enemy moving.</p><p>To declare a<a id="id289" class="indexterm"></a> function, we do the following:</p><div class="informalexample"><pre class="programlisting">function FunctionName()
{
}</pre></div><p>To call a <a id="id290" class="indexterm"></a>function, we do the following:</p><div class="informalexample"><pre class="programlisting">FunctionName( );</pre></div><p>To pass a <a id="id291" class="indexterm"></a>variable <a id="id292" class="indexterm"></a>to a function to be used with a function, we do the following:</p><div class="informalexample"><pre class="programlisting">function FunctionName(variableName:Int)
{
}

FunctionName(variableName);</pre></div><p>To pass multiple variables<a id="id293" class="indexterm"></a> to a <a id="id294" class="indexterm"></a>function to be used with a function, we do the following:</p><div class="informalexample"><pre class="programlisting">function FunctionName(var1:Int, var2:String)
{
}

FunctionName(var1, var2);</pre></div><p>To return a <a id="id295" class="indexterm"></a>variable<a id="id296" class="indexterm"></a> from a function, we do the following:</p><div class="informalexample"><pre class="programlisting">function FunctionName():Int
{
return variableName;
}

variableName = FunctionName();</pre></div><p>In UnityScript, variables declared outside a function become member (function) instance variables of the script with a per-instance state, which typically means a per-game-object state; for example:</p><div class="informalexample"><pre class="programlisting">var playerAmmo:Int = 10;
function LevelAmmo ()
{
}</pre></div><p>If we want all functions in our code to be able to access a variable, then we declare a global variable. To do this, we simply use the <code class="literal">static</code> keyword when declaring the variable as shown in the following line of code:</p><div class="informalexample"><pre class="programlisting">static var playerAmmo:Int;</pre></div><p>And then, to access it in the same script, we simply call it:</p><div class="informalexample"><pre class="programlisting">playerAmmo = 1;</pre></div><p>If we want to use it in another script, we include the name of the script as shown in the following line of code:</p><div class="informalexample"><pre class="programlisting">Scriptname.playerAmmo = 10;</pre></div><p>However, if we <a id="id297" class="indexterm"></a>want a variable to only be available to a certain function, then we declare it as a local variable. To do this, we simply declare it within the function like the following code snippet:</p><div class="informalexample"><pre class="programlisting">function LevelAmmo ()
{
var playerAmmo:Int = 10;
}</pre></div><p>Now, if we scripted another function calling the preceding <code class="literal">playerAmmo</code> variable, then an error would result since the variable is not within scope, and therefore, the function does not know about it. For example:</p><div class="informalexample"><pre class="programlisting">function CountAmmo()
{
ammoCount = playerAmmo + 1; //error would occur
}</pre></div><p>When naming functions or variables, we can use alphanumeric characters of upper or lowercase. However, they cannot start with a number. We must remember to use the same case when calling a declared function or variable, else it will not match and we will get an error. This is due to the fact that the same word with a different case is seen as a new and different (unique) variable or function.</p><p>We can also use underscores to separate words in a function or variable name, such as <code class="literal">player_Health</code>. We should not use existing syntax as our function or variable name as it will produce an error, for example, naming a function or variable <code class="literal">function</code> as shown in the following code:</p><div class="informalexample"><pre class="programlisting">function function()
{
}</pre></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec43"></a>Conditional statements</h3></div></div></div><p>When programming, we use a <a id="id298" class="indexterm"></a>conditional statement<a id="id299" class="indexterm"></a> to check variables so that we can control the flow of the game and decide on what code to execute at certain points.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl3sec29"></a>If...else</h4></div></div></div><p>We use the<a id="id300" class="indexterm"></a> <code class="literal">if...else</code> conditional <a id="id301" class="indexterm"></a>statement as follows:</p><div class="informalexample"><pre class="programlisting">if (condition)
{
  //do a certain action
}
else
{
  //otherwise do a different action
}</pre></div><p>We don't have to always use <code class="literal">else</code>. For instance, have a look at the following statement:</p><div class="informalexample"><pre class="programlisting">if (playerHealth = = 0)
{
  gameOver = true;
}</pre></div><p>As the game will continue when <code class="literal">playerHealth</code> is not equal to zero, we need not add the <code class="literal">else</code> statement.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec44"></a>Using comments</h3></div></div></div><p>We add comments to our <a id="id302" class="indexterm"></a>code to <a id="id303" class="indexterm"></a>make it clearer and much easier to understand when we return to it, to remind ourselves. Comments are also used when working with other people in a team as they will need to understand our code and we, theirs.</p><p>To add a comment to our code, we add double forward slashes before our comment as shown in the following syntax:</p><div class="informalexample"><pre class="programlisting">//This is a comment</pre></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec45"></a>Classes</h3></div></div></div><p>A class<a id="id304" class="indexterm"></a> is a template<a id="id305" class="indexterm"></a> to create objects by specifying a set of variables and functions. The objects are instances of a class.</p><p>Think of a class as a template, blueprint, or factory (not to be confused with the advanced object-oriented design pattern used in programming) that creates objects.</p><p>You could have a class bicycle, and the objects based on that class would be the different types of bicycles, such as a racing bike, dirt bike, and hybrid bike.</p><p>The following is an example of a class in UnityScript:</p><div class="informalexample"><pre class="programlisting">class Bicycle {

// fields are public by default
var type : String;

function Bicycle(x : int) {
      this.type = ["racing bike", "dirt bike", "hybrid bike"][x];
   }
   function announce() {
      print("I am a "+this.type+".");
   }
}
var object = new Bicycle(1);

// prints  "I am a dirt bike." because code lists usually start at 0.
object.announce();</pre></div><p>In fact, the functions that we went through earlier in the chapter, if simply placed in a UnityScript file, are part of an implicit class that Unity creates for us. The class name is taken automatically from the name of the UnityScript file.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl3sec30"></a>Private versus public</h4></div></div></div><p>Variables and <a id="id306" class="indexterm"></a>functions within classes have two levels of scope and <a id="id307" class="indexterm"></a>accessibility:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Private</p></li><li style="list-style-type: disc"><p>Public</p></li></ul></div><p>Private functions<a id="id308" class="indexterm"></a> and variables can only be accessed by other functions within the same class. Public functions<a id="id309" class="indexterm"></a> and variables can be accessed by functions within the same class as well as other classes.</p><p>To declare <a id="id310" class="indexterm"></a>a variable or <a id="id311" class="indexterm"></a>function, either private or public, we use the following syntax:</p><div class="informalexample"><pre class="programlisting">Public var varName:DataType = value;
Private var varName:DataType = value;

Public function FunctionName( )
{
}

Private function FunctionName( )
{
}</pre></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec46"></a>Importing external libraries</h3></div></div></div><p>When we want to <a id="id312" class="indexterm"></a>make use of external libraries (for instance, third-party tools, classes, <span class="strong"><strong>Software Development Kits</strong></span> (<span class="strong"><strong>SDKs</strong></span>)<a id="id313" class="indexterm"></a>, and<a id="id314" class="indexterm"></a> <span class="strong"><strong>Application Programming Interfaces</strong></span> (<span class="strong"><strong>APIs</strong></span>)), we first need to import them by adding the word <code class="literal">import</code> followed by the name of the external library that we would like to import, as shown in the following code statement:</p><div class="informalexample"><pre class="programlisting">import LibraryName;</pre></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec47"></a>Code editor</h3></div></div></div><p>To create code, we can <a id="id315" class="indexterm"></a>simply use a text editor, such as <a id="id316" class="indexterm"></a>Notepad. However, its simplicity and lack of features makes it much harder and slower to code as well as more error prone. For example, it does not highlight the different entities nor does it provide line numbers.</p><p>An integrated development environment (also known as an IDE) is an application that facilitates coding and usually comprises a code editor together with debugging and automation tools.</p><p>There are many IDEs available with varying features. Fortunately, Unity comes with the MonoDevelop IDE. MonoDevelop<a id="id317" class="indexterm"></a> is a feature-rich, cross-platform IDE that makes it easier to port code from one language into another. Thus, we will be using MonoDevelop throughout the book when creating our code.</p><p>To open<a id="id318" class="indexterm"></a> MonoDevelop, we will need to do the following within Unity:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Create a new folder by going to the Project Browser and clicking on <span class="strong"><strong>Assets</strong></span> and right-clicking on <span class="strong"><strong>Assets</strong></span>.</p></li><li><p>Then, go to <span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>Folder</strong></span>.</p></li><li><p>Name the folder <code class="literal">Code</code>.</p></li><li><p>Now click on the folder to select it. It should be highlighted and empty.</p></li><li><p>Right-click on the empty folder and go to <span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>Javascript</strong></span>.</p></li><li><p>Name the new file <code class="literal">HelloWorld</code>.</p></li><li><p>Double-click on the <code class="literal">HelloWorld</code> file. This should open the MonoDevelop IDE and should look similar to the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783559046/graphics/9046_04_08.jpg" /></div></li></ol></div><p>The first line, <code class="literal">#pragma strict</code>, means that we are enforcing typing where we need to explicitly state what type a variable is. We can remove it if we do not want to have to state each variable type; however, that <a id="id319" class="indexterm"></a>would be risky as it will be more easily prone to error.</p></div></div>