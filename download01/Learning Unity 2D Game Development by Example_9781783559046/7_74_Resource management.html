<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch07lvl1sec74"></a>Resource management</h2></div></div><hr /></div><p>When developing games, it is vital that we are wise at resource management and reuse the resources available to us. We should not waste resources since devices do not have an infinite <a id="id502" class="indexterm"></a>amount of resources available.</p><p>Thus, by wasting resources, we are increasing the overhead on the device's memory and processor, impacting performance. For instance, if we keep creating many new objects in a scene, there is a huge amount of information to store, calculate, and handle. This will slow down the game and could potentially crash the game due to it running out of memory or an overload of calculations.</p><p>It is therefore best practice to reuse or destroy (remove) objects once they are no longer needed, particularly when they are no longer on screen.</p><p>Garbage collection<a id="id503" class="indexterm"></a> is a type of memory management whereby the garbage collector tries to reclaim memory that is no longer being used by the game. Unity performs garbage collection automatically; however, based on the game's design, we need to decide when objects need to be created and destroyed.</p><p>In order to delete all the grime objects in the scene (both on screen and off screen) at the end of the game, we need to group the objects.</p><p>In Unity, we use tags to group objects.</p><p>To create<a id="id504" class="indexterm"></a> a tag, we have to execute the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>We select <span class="strong"><strong>Acid</strong></span> in the hierarchy and then within the Inspector, we click on the <span class="strong"><strong>Tag</strong></span> drop-down menu and select <span class="strong"><strong>Add Tagâ€¦</strong></span>.</p></li><li><p>Within the <span class="strong"><strong>Element 0</strong></span> field under <span class="strong"><strong>Tags &amp; Layers</strong></span>, we add <code class="literal">Acid</code> and within <span class="strong"><strong>Element 1</strong></span>, we add <span class="strong"><strong>Grime</strong></span>.</p></li><li><p>Select <span class="strong"><strong>Acid</strong></span> from the hierarchy again and click on the <span class="strong"><strong>Tag</strong></span> drop-down menu again; this time <span class="strong"><strong>Acid</strong></span> will appear. Select <span class="strong"><strong>Acid</strong></span>.</p></li><li><p>It should now look like what is shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783559046/graphics/9046OT_07_07.jpg" /></div></li></ol></div><p>We do <a id="id505" class="indexterm"></a>the same for <code class="literal">Grime</code>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note83"></a>Note</h3><p>As we want to keep track of all the objects, we need to place them in a list within the script. To achieve this, we will make use of an array since an array is a variable-sized list. Have a look at the next code snippet to learn how this is done.</p></div><div class="informalexample"><pre class="programlisting">var gameObjects : GameObject[];

function RemovalGrime()
{</pre></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note84"></a>Note</h3><p>We check whether the GameObject is in the <span class="strong"><strong>Grime</strong></span> tag group that we created.</p></div><div class="informalexample"><pre class="programlisting">    gameObjects =  GameObject.FindGameObjectsWithTag("Grime");</pre></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note85"></a>Note</h3><p>We use a conditional <code class="literal">for</code> loop to go through each object stored in the list as many times as there are items in the list specified by the length of the GameObjects list (until the last item on the list) provided by the second parameter.</p><p>We start at the first item that is provided by the first parameter and increment by one each time to go on to the next object within the list. The next code snippet shows how this is done.</p></div><div class="informalexample"><pre class="programlisting">for(var i = 0 ; i &lt; gameObjects.length ; i ++)
        Destroy(gameObjects[i]);
}</pre></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note86"></a>Note</h3><p>We do the same for <code class="literal">Acid</code> as we did for <code class="literal">Grime</code>, merely swapping the names. Have a look at the next code snippet to learn how this is done.</p></div><div class="informalexample"><pre class="programlisting">function RemovalAcid()
{

    gameObjects =  GameObject.FindGameObjectsWithTag("Acid");

    for(var i = 0 ; i &lt; gameObjects.length ; i ++)
        Destroy(gameObjects[i]);
}</pre></div><p>We then <a id="id506" class="indexterm"></a>need to make sure we call the new functions within the following part of existing script:</p><div class="informalexample"><pre class="programlisting">if (lives == 0)
    {
    <span class="strong"><strong>RemovalAcid();</strong></span>
  <span class="strong"><strong>RemovalGrime();</strong></span>
    Time.timeScale = 0;

    }</pre></div></div>