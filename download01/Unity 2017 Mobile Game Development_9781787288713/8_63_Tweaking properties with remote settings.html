<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch08lvl1sec56"></a>Tweaking properties with remote settings</h2></div></div><hr /></div><p>Getting a new build of your game exported can take quite a bit of time. It takes time to actually make the changes in the editor, then you have to export the game and upload a new version on each of the App Stores you are targeting. Then, you have to spend time waiting on them to approve the app and for everyone to actually download it.</p><p>One of the things I talk to my students about is creating projects that can be easily changed without having to open up the Unity Editor. This could be done using data-driven development practices--such as building levels or encounters using text files, Asset Bundles, or Unity's <strong class="userinput"><code>Remote Settings</code></strong> menu--to allow us to instantly modify variables in copies of the game that are already out.</p><p>One of the things we may want to be able to update is tweaking the difficulty of our game by changing the speed at which the player moves. So, let's take a look at how we can do that now:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>The first thing we will need to do is create the variables that we would like to change. Open up the Analytics dashboard and go to the <strong class="userinput"><code>Remote Settings</code></strong> tab:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787288713/graphics/591e2add-2e1f-4e0d-9f0b-0bc91edb4b68.png" /></div><p>This tab is the location where we can set and modify the values. Just like working with dictionaries, remote settings are key-value pairs, and there are two configurations that can be used: <strong class="userinput"><code>Release</code></strong> or <strong class="userinput"><code>Development</code></strong>. Release is used by computers and devices running regular builds of your game. Development is the mode used by playing the game in the Unity Editor as well as any builds created with the <strong class="userinput"><code>Development Build</code></strong> property set to true from the <strong class="userinput"><code>Build Settings</code></strong> window.</p><div class="orderedlist"><ol class="orderedlist arabic" start="2" type="1"><li>Click on the <strong class="userinput"><code>Add New Key-Value</code></strong> button at the top-right corner. Under the <strong class="userinput"><code>Enter Remote Setting Key</code></strong> property, type <code class="literal">RollSpeed</code>.  Select <strong class="userinput"><code>Float</code></strong> under the <strong class="userinput"><code>Select Type</code></strong> dropdown and put <code class="literal">5</code> in the <strong class="userinput"><code>Value</code></strong> field. Finally, click on the <strong class="userinput"><code>Save</code></strong> button.</li><li>Then, let's do the same thing for the <code class="literal">DodgeSpeed</code> variable with a value of <code class="literal">5</code>:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787288713/graphics/86fd339a-d7af-4eda-bcc6-7964b5c2eca1.png" /></div><p></p><div class="orderedlist"><ol class="orderedlist arabic" start="4" type="1"><li>It's important to note that this doesn't actually make the change. Note how there is a big blue button that says <strong class="userinput"><code>Sync</code></strong>. Click on that and then the changes will be deployed. It'll pop up a window asking whether you want to confirm the changes:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787288713/graphics/9d766a37-8e15-4790-a034-5b049c860252.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="5" type="1"><li>Go ahead and then click on <strong class="userinput"><code>Sync</code></strong>.</li><li>Now that we have some values to grab, let's take a look at how we can actually do that. Head back into Unity Editor.</li></ol></div><div class="orderedlist"><ol class="orderedlist arabic" start="7" type="1"><li>In order to use the <strong class="userinput"><code>Remote Settings</code></strong>, we will need to download and import the Remove Settings package. To do this, go to <strong class="userinput"><code>Window | Asset Store</code></strong> (or press <span class="emphasis"><em>Ctrl</em></span>+<span class="emphasis"><em>9</em></span>).</li><li>From the Asset Store, click on the Search bar and type in <code class="literal">Remote Settings</code> and press <span class="emphasis"><em>Enter</em></span>:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787288713/graphics/f47fa046-6155-49da-a948-6b67e12233db.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="9" type="1"><li>From there, click on the first selection of the Unity analytics <strong class="userinput"><code>Remote Settings</code></strong> option:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787288713/graphics/9f8fcd64-ec75-439b-b98a-cd4a41f6a562.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="10" type="1"><li>Next, click on the <strong class="userinput"><code>Download</code></strong> button to add it to our project:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787288713/graphics/f8c01bf0-c028-4c54-ab30-cf2f13eb01d3.png" /></div><p></p><div class="orderedlist"><ol class="orderedlist arabic" start="11" type="1"><li>Upon reaching the Import Unity Package dialog, go ahead and click on <strong class="userinput"><code>Import</code></strong> with everything selected:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787288713/graphics/4dcc6348-06db-4a9f-887f-024fd831a5fe.png" /></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note82"></a>Note</h3><p>I deleted the <code class="literal">MiniJSON.cs</code> file that was included with the Remote Settings due to it already being defined within Unity's IAP scripts. This should be fixed by the time the book is published, but I am including it just in case it shows up.</p></div><p></p><div class="orderedlist"><ol class="orderedlist arabic" start="12" type="1"><li>Now that we have it imported, we need to enable it. To do that, we will need to go to <strong class="userinput"><code>Window</code></strong> | <strong class="userinput"><code>Unity Analytics</code></strong> | <strong class="userinput"><code>Remote Settings</code></strong>:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787288713/graphics/e61de49a-21bc-4dd5-8f16-29b5a6886575.png" /></div><p>As you can see in the preceding screenshot, we need to plug in the project's secret key in order to make use of these features. To do this, we will need to once again go to the Dashboard.</p><div class="orderedlist"><ol class="orderedlist arabic" start="13" type="1"><li>From the dashboard, go to the <strong class="userinput"><code>More</code></strong> dropdown and select <strong class="userinput"><code>Configure</code></strong>.</li></ol></div><div class="orderedlist"><ol class="orderedlist arabic" start="14" type="1"><li>Scroll down, and you should see the <strong class="userinput"><code>Project Secret Key</code></strong> property under <strong class="userinput"><code>Feature Settings</code></strong>:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787288713/graphics/18beb4ec-8056-422a-9649-d08e77c3e7b4.png" /></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip83"></a>Note</h3><p>You should keep the value of the <strong class="userinput"><code>Project Secret Key</code></strong> a secret, as it allows others to have access to your project.</p></div><div class="orderedlist"><ol class="orderedlist arabic" start="15" type="1"><li>Copy this value and then go back into Unity Editor, paste it into the slot and then click on the <strong class="userinput"><code>Next</code></strong> button. If all goes well, you should see the menu change:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787288713/graphics/1c01c4c7-da2b-49eb-bad5-b6f992f69062.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="16" type="1"><li>To make it easier to see, I'm going to drag the <strong class="userinput"><code>Remote Settings</code></strong> tab and drop it to the right of my <strong class="userinput"><code>Scene</code></strong> tab:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787288713/graphics/f4b76ae9-cc0d-41cd-8c75-42c910e21ed1.png" /></div><p>Now it's a lot easier to look at and work with.</p><div class="orderedlist"><ol class="orderedlist arabic" start="17" type="1"><li>Again, this doesn't do anything yet, so let's fix that next.</li><li>Open up the Gameplay scene if it isn't opened up already and select the <strong class="userinput"><code>Player</code></strong> object and the <strong class="userinput"><code>Inspector</code></strong> tab.</li><li>Next, go to <strong class="userinput"><code>Component</code></strong> | <strong class="userinput"><code>Analytics</code></strong> | <strong class="userinput"><code>Remote Settings</code></strong> to add the <strong class="userinput"><code>Remote Settings</code></strong> component to the object:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787288713/graphics/92d1864e-a9e1-47a0-aa88-4d3ca191f8c6.png" /></div><p></p><div class="orderedlist"><ol class="orderedlist arabic" start="20" type="1"><li>From there, click on the <strong class="userinput"><code>+</code></strong> button to add a new parameter for the component.</li><li>Drag and drop the <strong class="userinput"><code>Player</code></strong> game object from the <strong class="userinput"><code>Hierarchy</code></strong> tab into the <strong class="userinput"><code>Object</code></strong> section. Then, for the <strong class="userinput"><code>No</code></strong> field property, select <strong class="userinput"><code>Player Behaviour</code></strong> | <strong class="userinput"><code>rollSpeed</code></strong>. Then, in the <strong class="userinput"><code>Remote Setting Key</code></strong>,<strong class="userinput"><code> </code></strong>select <strong class="userinput"><code>Roll Speed</code></strong> from the dropdown.</li></ol></div><p>This makes the <code class="literal">rollSpeed</code> variable in the <code class="literal">PlayerBehaviour</code>class set to the <strong class="userinput"><code>Roll Speed</code></strong> value in the <strong class="userinput"><code>Remote Settings</code></strong> menu.</p><div class="orderedlist"><ol class="orderedlist arabic" start="22" type="1"><li>Then, do the same thing for the <code class="literal">DodgeSpeed</code>:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787288713/graphics/416d410f-a099-4518-8c61-c88bc4ccb48d.png" /></div><p></p><p>This will work correctly if we were to export our game, but currently we do not have variables set up for the Development configuration. This means that when playing the game in the editor, nothing will change.</p><div class="orderedlist"><ol class="orderedlist arabic" start="23" type="1"><li>Dive back into the dashboard, and go to the <strong class="userinput"><code>Remote Settings</code></strong> tab. Under the dropdown, change the <strong class="userinput"><code>Release</code></strong> value to <strong class="userinput"><code>Development</code></strong> and add in <code class="literal">DodgeSpeed</code> and <code class="literal">RollSpeed</code> again, but give them both a value of <code class="literal">0</code>. Finally, click on the <strong class="userinput"><code>Sync</code></strong> button to update the values:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787288713/graphics/c7b2075d-49c1-42da-a6ba-a2e808bcddfe.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="24" type="1"><li>Next, dive back into the Editor, and in the <strong class="userinput"><code>Remote Settings</code></strong> property, click on the <strong class="userinput"><code>Refresh</code></strong> button. You will note that the <strong class="userinput"><code>Configuration</code></strong> property now has a dropdown where you can select something. Go ahead and select <strong class="userinput"><code>Development</code></strong> and play the game:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787288713/graphics/92b502ce-4b77-40bb-b18f-ce065c844c78.png" /></div><p>As you can tell, in this version of the game, the player cannot move at all due to how we set the properties. Now, you can test out the values and sync them in the Editor and modify them for release when they're ready.</p><div class="orderedlist"><ol class="orderedlist arabic" start="25" type="1"><li>Since the <code class="literal">dodgeSpeed</code> and <code class="literal">rollSpeed</code> variables are now being set via the Remote Settings component, we can now hide them from the <strong class="userinput"><code>Inspector</code></strong>. Replace their declarations so that the class looks as follows:</li></ol></div><pre class="programlisting">/// &lt;summary&gt;
/// Responsible for moving the player automatically and
/// receiving input.
/// &lt;/summary&gt;
[RequireComponent(typeof(Rigidbody))]
public class PlayerBehaviour : MonoBehaviour
{
     /// &lt;summary&gt;
     /// A reference to the Rigidbody component
     /// &lt;/summary&gt;
     private Rigidbody rb;

<span class="strong"><strong> /// &lt;summary&gt;</strong></span><span class="strong"><strong> /// How fast the ball moves left/right</strong></span><span class="strong"><strong> /// &lt;/summary&gt;</strong></span><span class="strong"><strong> [HideInInspector]</strong></span><span class="strong"><strong> public float dodgeSpeed = 5;</strong></span><span class="strong"><strong> /// &lt;summary&gt;</strong></span><span class="strong"><strong>    /// How fast the ball moves forwards automatically</strong></span><span class="strong"><strong> /// &lt;/summary&gt;</strong></span><span class="strong"><strong> [HideInInspector]</strong></span><span class="strong"><strong> public float rollSpeed = 5;

</strong></span>    public enum MobileHorizMovement
    {
        Accelerometer,
        ScreenTouch
    }

     /// Rest of the file here</pre><div class="orderedlist"><ol class="orderedlist arabic" start="26" type="1"><li>Save the script and go to <strong class="userinput"><code>Inspector</code></strong>:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787288713/graphics/c98c9fe7-4708-4f09-899a-f9c474df2baa.png" /></div><p>Now, the values will be set through the <strong class="userinput"><code>Remote Settings</code></strong>component, and users won't be confused about why their values are being replaced from what's in the <strong class="userinput"><code>Player Behaviour</code></strong>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note84"></a>Note</h3><p>There's a lot more you can do with <strong class="userinput"><code>Remote Settings</code></strong>. You can learn more about the <strong class="userinput"><code>Remote Settings</code></strong> component and how to use it for working with non-default parameters at <a class="ulink" href="https://docs.unity3d.com/Manual/UnityAnalyticsRemoteSettingsComponent.html" target="_blank"><span>https://docs.unity3d.com/Manual/UnityAnalyticsRemoteSettingsComponent.html</span></a>.</p></div></div>