<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch01lvl1sec5"></a>Improving our scripts with attributes and XML comments</h2></div></div><hr /></div><p>We could stop working with the <code class="literal">PlayerBehaviour</code> class script here, but I want to touch on a couple of things that we can use in order to improve the quality and style of our code. This becomes especially useful when you start building projects in teams, as you'll be working with other people--some of them will be working on code with you, and then there are designers and artists who will not be working on code with you, but will still need to use the things that you've programmed.</p><p>When writing scripts, we want them to be as error-proof as possible. Making the <code class="literal">rb</code> variable <code class="literal">private</code> starts that process, as now the user will not be able to modify that anywhere outside of this class. We want our teammates to modify <code class="literal">dodgeSpeed</code> and <code class="literal">rollSpeed</code>, but we may want to give them some advice as to what it is and/or how it will be used. To do this in the <strong class="userinput"><code>Inspector</code></strong> window, we can make use of something called an <span class="emphasis"><em>attribute</em></span>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec1"></a>Using attributes</h3></div></div></div><p>Attributes are things we can add to the beginning of a variable, class, or function declaration, which allow us to attach an additional functionality to them. There are many of them that exist inside Unity, and you can write your very own as well, but, right now, we'll talk about the ones that I use most often.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec0"></a>The Tooltip attribute</h4></div></div></div><p><span>If you've</span> used Unity for a period of time, you may have noted that some components in the <strong class="userinput"><code>Inspector window,</code></strong> such as the <code class="literal">Rigidbody</code>, have a nice feature--if you move your mouse over a variable name, you'll see a description of what the variables are and/or how to use them. The first thing you'll learn is how we can get the same effect in our own components by making use of the <code class="literal">Tooltip</code> attribute. If we do this for the <code class="literal">dodgeSpeed</code> and <code class="literal">rollSpeed</code> variables, it will look something like this:</p><pre class="programlisting">[Tooltip("How fast the ball moves left/right")] 
public float dodgeSpeed = 5; 

[Tooltip("How fast the ball moves forwards automatically")] 
public float rollSpeed = 5; 
</pre><p>Save the preceding script and return to the editor:</p><div class="mediaobject"><img src="/graphics/9781787288713/graphics/46a3585f-c1fc-42cc-874d-c744660a3fa2.png" /></div><p>Now, when we highlight the variable using the mouse and leave it there, the text we placed will be displayed. This is a great habit to get into, as your teammates can always tell what it is that your variables are being used for.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note7"></a>Note</h3><p>For more information on the <code class="literal">Tooltip</code> attribute, check out, <a class="ulink" href="https://docs.unity3d.com/ScriptReference/TooltipAttribute.html" target="_blank"><span>https://docs.unity3d.com/ScriptReference/TooltipAttribute.html</span></a>.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec1"></a>The Range attribute</h4></div></div></div><p>Another thing that we can use to protect our code is the <code class="literal">Range</code> attribute. This will allow us to specify a minimum and maximum value for a variable. Since we want the player to always be moving forward, we may want to restrict the player from moving backward. To do that, we can add the following highlighted line of code:</p><pre class="programlisting">    [Tooltip("How fast the ball moves forwards automatically")] 
<span class="strong"><strong>[Range(0, 10)]</strong></span>
    public float rollSpeed = 5; </pre><p>Save your script, and return to the editor:</p><div class="mediaobject"><img src="/graphics/9781787288713/graphics/4788d884-5df1-4428-936c-0029d44b82de.png" /></div><p>We have now added a slider beside our value, and we can drag it to adjust between our minimum and maximum values. Not only does this protect our variable, it also makes it so our designers can tweak things easily by just dragging them around.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec2"></a>The RequireComponent attribute</h4></div></div></div><p>Currently, we are using the <code class="literal">Rigidbody</code> component in order to create our script. When working as a team member, others may not be reading your scripts, but are still expected to use them when creating gameplay. Unfortunately, this means that they may do things that have unintended results, such as removing the <code class="literal">Rigidbody</code> component, which will cause errors when our script is run. Thankfully, we also have the <code class="literal">RequireComponent</code> attribute, which we can use to fix this.</p><p>It looks something like this:</p><pre class="programlisting">using UnityEngine; 

[RequireComponent(typeof(Rigidbody))] 
public class PlayerBehaviour : MonoBehaviour </pre><p>By adding this attribute, we state that when we add this component to a game object and it doesn't have a <code class="literal">Rigidbody</code> attached to its game object, the component will be added automatically. It also makes it so that if we were to try to remove the <code class="literal">Rigidbody</code> from this object, the editor will warn us that we can't, unless we remove <span>the PlayerBehaviour component</span> first. Note that this works for any class extended from <code class="literal">MonoBehaviour</code>; just replace <code class="literal">Rigidbody</code> with whatever it is that you wish to keep.</p><p>Now, if we go into the Unity editor and try to remove the <code class="literal">Rigidbody</code> component by right-clicking on it in the <strong class="userinput"><code>Inspector</code></strong> and selecting <strong class="userinput"><code>Remove Component</code></strong>, the following message will be seen:</p><div class="mediaobject"><img src="/graphics/9781787288713/graphics/4fa654bc-1137-4d08-8a86-946981fb1230.png" /></div><p>This is exactly what we want, and this ensures that the component will be there, allowing us not to have to include if-checks every time we want to use a component.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec2"></a>XML comments</h3></div></div></div><p>Note that previously we did not use a <code class="literal">Tooltip</code> attribute on the private <code class="literal">rb</code> variable. Since it's not being displayed in the editor, it's not really needed. However, there is a way that we can enhance that as well, making use of XML comments. XML comments have a couple of nice things that we get when using them instead of traditional comments, which we were using previously. When using the variables/functions instead of code in Visual Studio, we will now see a comment about it. This will help other coders on your team have additional information and details to ensure that they are using your code correctly.</p><p>XML comments look something like this:</p><pre class="programlisting">/// &lt;summary&gt; 
/// A reference to the Rigidbody component 
/// &lt;/summary&gt; 
private Rigidbody rb;</pre><p>It may appear to be a lot more writing is needed to use this format, but I did not actually type the entire thing out. XML comments are a fairly standard C# feature, so if you are using MonoDevelop or Visual Studio and type <code class="literal">///</code>, it will automatically generate the summary blocks for you (and the <code class="literal">param</code> tags needed, if there are parameters needed for something like a function).</p><p>Now, why would we want to do this? Well, now, if you select the variable in Intellisense, it will display the following information to us:</p><div class="mediaobject"><img src="/graphics/9781787288713/graphics/aaa2734c-50ce-4a8a-baaf-ec6455b7b6ef.png" /></div><p>This is a great help for when other people are trying to use your code and it is how Unity's staff write their code. We can also extend this to functions and classes to ensure that our code is more self-documented.</p><p>Unfortunately, XML comments do not show up in the <strong class="userinput"><code>Inspector</code></strong>, and the <code class="literal">Tooltip</code> attribute doesn't show info in the editor. With that in mind, I used <code class="literal">Tooltips</code> for public instructions and/or things that will show up in the <strong class="userinput"><code>Inspector</code></strong> window, and XML comments for everything else.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note8"></a>Note</h3><p>If you're interested in looking into XML comments more, feel free to check out: <a class="ulink" href="https://msdn.microsoft.com/en-us/library/b2s063f7.aspx" target="_blank"><span>https://msdn.microsoft.com/en-us/library/b2s063f7.aspx</span></a>.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec3"></a>Putting it all together</h3></div></div></div><p>With all of the stuff we've been talking about, we can now have the final version of the script, which looks like the following:</p><pre class="programlisting">using UnityEngine; 

/// &lt;summary&gt; 
/// Responsible for moving the player automatically and  
/// reciving input. 
/// &lt;/summary&gt; 
[RequireComponent(typeof(Rigidbody))] 

public class PlayerBehaviour : MonoBehaviour 
{ 
    /// &lt;summary&gt; 
    /// A reference to the Rigidbody component 
    /// &lt;/summary&gt; 
    private Rigidbody rb; 

    [Tooltip("How fast the ball moves left/right")] 
    public float dodgeSpeed = 5; 


    [Tooltip("How fast the ball moves forwards automatically")] 
    [Range(0, 10)] 
    public float rollSpeed = 5; 

    /// &lt;summary&gt; 
    /// Use this for initialization 
    /// &lt;/summary&gt; 
    void Start () 
   { 
        // Get access to our Rigidbody component 
       rb = GetComponent&lt;Rigidbody&gt;(); 
   } 

    /// &lt;summary&gt; 
    /// Update is called once per frame 
    /// &lt;/summary&gt; 
    void Update () 
   { 
        // Check if we're moving to the side 
       var horizontalSpeed = Input.GetAxis("Horizontal") *  
                              dodgeSpeed; 

        // Apply our auto-moving and movement forces 
      rb.AddForce(horizontalSpeed, 0, rollSpeed); 
   } 
} </pre><p>I hope that you also agree that this makes the code easier to understand and better to work with.</p></div></div>