<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch06lvl1sec40"></a>Setting up Unity IAP</h2></div></div><hr /></div><p>Unity IAP is a service that allows us to sell a variety of different items to players within our game projects and is currently supported by the iOS App Store, Mac App Store, Google Play, Windows Store, Amazon Appstore, and more, by default. So, using this, we can easily sell our items in many different places. We have already set up Unity Services in the preceding chapter, so this will be a lot easier to get going. Perform the following steps to add Unity IAP:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Open the <strong class="userinput"><code>Services</code></strong> window by going to <strong class="userinput"><code>Window</code></strong> | <strong class="userinput"><code>Services</code></strong> or by clicking on the <strong class="userinput"><code>Cloud</code></strong> button in the toolbar. Assuming that you are following along from the preceding chapter, we should already have services set up. If not, check out the Unity Ads Setup section in <a class="link" href="#" linkend="ch05">Chapter 5</a>, <span class="emphasis"><em>Advert</em></span><span class="emphasis"><em>ising using Unity Ads</em></span>, for an explanation on how to do so.</li><li>From the <strong class="userinput"><code>Services</code></strong> menu, scroll down to the <strong class="userinput"><code>In-App Purchasing</code></strong> item. You will note that it's currently off:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787288713/graphics/ae00d463-f9d4-44bf-ab22-073c653577a5.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="3" type="1"><li>Click on the <strong class="userinput"><code>In-App Purchasing</code></strong> button to open it up and then click on the <strong class="userinput"><code>Enable</code></strong> button.</li><li>From there, you'll see the button change to say <strong class="userinput"><code>Import</code></strong> instead. Unity IAP requires us to import a package for us to create IAPs, so let's go ahead and click on the <strong class="userinput"><code>Import</code></strong> button and wait for it to finish.</li></ol></div><div class="orderedlist"><ol class="orderedlist arabic" start="5" type="1"><li>You'll note that when it finishes, you'll have a new folder named <code class="literal">Plugins</code>created and a popup saying that it needs to determine whether our project is configured properly and asking whether we want to install it:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787288713/graphics/581f54ee-c0b0-44c7-9276-4a770f3c519b.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="6" type="1"><li>Go ahead and click on the <strong class="userinput"><code>Install Now</code></strong> function and wait for it to finish.</li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note60"></a>Note</h3><p>If, for some reason, you encounter any errors at this point in the Console window, try to first close and then open the Services window again and check whether <strong class="userinput"><code>Unity IAP</code></strong> is enabled. If that doesn't work, disconnect and reconnect it to the internet and then sign back into Unity Services and then re-enable Unity <span>IAP</span>.</p></div><p>If all goes well, you should see an <strong class="userinput"><code>Import Unity Package</code></strong> window coming up:</p><div class="mediaobject"><img src="/graphics/9781787288713/graphics/bb83e404-b9f5-4a8c-9dd4-f1fcf12533cb.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="7" type="1"><li>Click on the <strong class="userinput"><code>Import</code></strong> button and wait for it to be inserted into our project. It may say that an API Update is required. This is likely because the version of Unity that you're using is newer than the last update of the Unity IAP API. Go ahead and click on the <strong class="userinput"><code>I Made a Backup. Go ahead!</code></strong> button and wait for it to finish.</li></ol></div><div class="orderedlist"><ol class="orderedlist arabic" start="8" type="1"><li>Once it's done, scroll up to the top of the <strong class="userinput"><code>Services</code></strong> tab and click on the <strong class="userinput"><code>Back to Services</code></strong> button, as follows:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787288713/graphics/67151989-1cd1-41e5-8d1d-bf066d37ca61.png" /></div><p>Once you come back, you should note that both <strong class="userinput"><code>Analytics</code></strong> and <strong class="userinput"><code>In-App Purchasing</code></strong> are now set to <strong class="userinput"><code>ON</code></strong>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note61"></a>Note</h3><p>The IAP package is created externally from the main engine itself because the code is meant to be extremely flexible and can be updated to fit any policies that are needed and then we can just update the package instead of having to update it to the latest version of Unity, which can be very important when working on a large project.</p></div></div>