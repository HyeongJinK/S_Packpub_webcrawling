<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch05lvl1sec35"></a>Utilizing ad callback options</h2></div></div><hr /></div><p>The code we wrote for the <code class="literal">LoadLevel</code> function works perfectly fine when we <span>go</span> to the main menu of the game; however, if we dive into the game itself from the main menu, the game will still be going on in the background with the ad blocking the player from playing the game.</p><p>When running your app on an actual mobile device, the Unity Player will pause while Unity Ads are shown. However, if you are testing in the Unity Editor, the game is not paused while the placeholder ads are shown. However, we can simulate that behavior ourselves using the <code class="literal">Advertisement.ShowOptions</code> class.</p><p>We will pause the game when an ad is shown and then resume once the ad is finished. To do so, perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Let's first open up the <code class="literal">UnityAdController</code> class and update it to the following:</li></ol></div><pre class="programlisting">using UnityEngine;

#if UNITY_ADS // Can only compile ad code on support platforms 

using UnityEngine.Advertisements; // Advertisement 

#endif

public class UnityAdController : MonoBehaviour
{

    public static void ShowAd()
    {

        #if UNITY_ADS

        // Set options for our advertisement 
        ShowOptions options = new ShowOptions();
        options.resultCallback = Unpause;

        if (Advertisement.IsReady())
        {
            Advertisement.Show(options);
        }

        // Pause game while ad is shown 
        PauseScreenBehaviour.paused = true;
        Time.timeScale = 0f;

        #endif

    }

    #if UNITY_ADS

    public static void Unpause(ShowResult result)
    {
        // Unpause when ad is over 
        PauseScreenBehaviour.paused = false;
        Time.timeScale = 1f;
    }

    #endif

}</pre><p>The preceding code shows us the <code class="literal">ShowOptions</code> class for the first time. This class contains options that can be passed to <code class="literal">Advertisements.Show</code> to modify the behavior of the advertisement we want to play, the most important being <code class="literal">resultCallback</code>. This basically says that whenever we close, skip, or fail playing the advertisement, we want to call the <code class="literal">Unpause</code> function. Now, we will be diving into more detail on this function in a later section, but in the meantime, we can make use of this to resume the game.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note53"></a>Note</h3><p>For more information on the <code class="literal">ShowOptions</code> class, check out <a class="ulink" href="https://docs.unity3d.com/ScriptReference/Advertisements.ShowOptions.html" target="_blank"><span>https://docs.unity3d.com/ScriptReference/Advertisements.ShowOptions.html</span></a>.</p></div><div class="orderedlist"><ol class="orderedlist arabic" start="2" type="1"><li>To start off, we will make it so that the <code class="literal">PauseMenuBehaviour</code> doesn't override this new change. So, we will replace the <code class="literal">Start()</code> function with the following:</li></ol></div><pre class="programlisting">    void Start()
    {
        paused = false;

        #if !UNITY_ADS // If not using ads, just start the game

        SetPauseMenu(false);

        #endif
    }</pre><p>Performing the preceding snippet is important because otherwise the game will immediately be turned off when the level loads in the Start function after we tell the game to pause, which is called after the level loads. This is needed for the PC version of the game, as there is nothing else for unpausing the static value.</p><div class="orderedlist"><ol class="orderedlist arabic" start="3" type="1"><li>Save our scripts and start the game up again:</li></ol></div><div class="mediaobject"><img src="/graphics/9781787288713/graphics/7f44b16e-9b09-4ad5-beba-9dc3887e9b65.png" /></div><p>With that, when we transition from the main menu to the game, we will pause the game until we are ready to jump in.</p></div>