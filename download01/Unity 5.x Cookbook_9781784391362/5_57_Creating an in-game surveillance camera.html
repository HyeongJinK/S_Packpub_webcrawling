<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch05lvl1sec60"></a>Creating an in-game surveillance camera</h2></div></div><hr /></div><p>Although using a<a id="id475" class="indexterm"></a> second viewport can be useful in many situations, there will be times when you need to output the image rendered from a camera to a texture at runtime. To illustrate this point, in this recipe, we will make use of <span class="strong"><strong>Render Texture</strong></span> to create an in-game surveillance camera that transmits its video to a monitor.</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_05_24.jpg" /><div class="caption"><p>In-game surveillance cameras</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec167"></a>Getting ready</h3></div></div></div><p>For this recipe, we have prepared the <code class="literal">BasicScene</code> Unity package, containing a scene named <code class="literal">BasicScene</code>, and also two FBX 3D models for the monitor and camera objects. The package is in the <code class="literal">1362_05_codes</code> folder, and the 3D models are in the <code class="literal">1362_05_06</code> folder.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec168"></a>How to do it...</h3></div></div></div><p>To create a<a id="id476" class="indexterm"></a> picture-in-picture display, just follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Import the <code class="literal">BasicScene</code> package and the <code class="literal">monitor</code> and <code class="literal">camera</code> models into your Unity Project.</p></li><li><p>From the <span class="strong"><strong>Project</strong></span> view, open the <span class="strong"><strong>BasicScene</strong></span> level. This is a basic scene featuring an animated character and some extra geometry.</p></li><li><p>From the <span class="strong"><strong>Project</strong></span> view, place the <span class="strong"><strong>monitor</strong></span> and <span class="strong"><strong>camera</strong></span> objects into the scene by dragging them into the <span class="strong"><strong>Hierarchy</strong></span> panel. Their <span class="strong"><strong>Transform</strong></span> settings should be (shown in the following screenshot): <span class="strong"><strong>monitor</strong></span>: <span class="strong"><strong>Position</strong></span>: <span class="strong"><strong>X</strong></span>: <code class="literal">0</code>; <span class="strong"><strong>Y</strong></span>: <code class="literal">0.09</code>; <span class="strong"><strong>Z</strong></span>: <code class="literal">4</code>. <span class="strong"><strong>Rotation</strong></span>: <span class="strong"><strong>X</strong></span>: <code class="literal">0</code>; <span class="strong"><strong>Y</strong></span>: <code class="literal">180</code>; <span class="strong"><strong>Z</strong></span>: <code class="literal">0</code>. <span class="strong"><strong>camera</strong></span>: <span class="strong"><strong>Position</strong></span>: <span class="strong"><strong>X</strong></span>: <code class="literal">-3</code>; <span class="strong"><strong>Y</strong></span>: <code class="literal">0.06</code>; <span class="strong"><strong>Z</strong></span>: <code class="literal">4</code>. <span class="strong"><strong>Rotation</strong></span>: <span class="strong"><strong>X</strong></span>: <code class="literal">0</code>; <span class="strong"><strong>Y</strong></span>: <code class="literal">90</code>; <span class="strong"><strong>Z</strong></span>: <code class="literal">0</code>:</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_05_20.jpg" /></div></li><li><p>Create, from the <span class="strong"><strong>Project</strong></span> view, a new <span class="strong"><strong>Render Texture</strong></span>, and rename it <code class="literal">screen</code>. Then, from the <span class="strong"><strong>Inspector</strong></span> view, change its <span class="strong"><strong>Size</strong></span> to <code class="literal">512</code> x <code class="literal">512</code>.</p></li><li><p>Add a new <span class="strong"><strong>Camera</strong></span> to the scene through the <span class="strong"><strong>Create</strong></span> drop-down menu on top of the <span class="strong"><strong>Hierarchy</strong></span> view (<span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>Camera</strong></span>). Then, from the <span class="strong"><strong>Inspector</strong></span> view, name it <code class="literal">Surveillance</code> and make it a child of the <span class="strong"><strong>camera</strong></span> GameObject. Then, change<a id="id477" class="indexterm"></a> its <span class="strong"><strong>Transform</strong></span> settings to the following: <span class="strong"><strong>Position</strong></span>: <span class="strong"><strong>X</strong></span>: <code class="literal">0</code>; <span class="strong"><strong>Y</strong></span>: <code class="literal">2</code>; <span class="strong"><strong>Z</strong></span>: <code class="literal">0</code>, and <span class="strong"><strong>Rotation</strong></span>: <span class="strong"><strong>X</strong></span>: <code class="literal">0</code>; <span class="strong"><strong>Y</strong></span>: <code class="literal">0</code>; <span class="strong"><strong>Z</strong></span>: <code class="literal">0</code>.</p></li><li><p>Select the <code class="literal">Surveillance</code> camera you have created, and, from the <span class="strong"><strong>Inspector</strong></span> view, change its <span class="strong"><strong>Clipping Planes</strong></span> | <span class="strong"><strong>Near</strong></span> to <code class="literal">0.6</code>. Also, populate the <span class="strong"><strong>Target Texture</strong></span> slot with the <span class="strong"><strong>Render Texture</strong></span> screen and disable the camera's <span class="strong"><strong>Audio Listener</strong></span> component, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_05_21.jpg" /></div></li><li><p>From the <span class="strong"><strong>Hierarchy</strong></span> view, expand the <span class="strong"><strong>monitor</strong></span> object and select its <span class="strong"><strong>screen</strong></span> child. Then, from the <span class="strong"><strong>Inspector</strong></span>, find its material (named <span class="strong"><strong>Desert</strong></span>), and, from the <span class="strong"><strong>Shader</strong></span> drop-down menu, change  itto <span class="strong"><strong>Unlit/Texture</strong></span>. Finally, set the <span class="strong"><strong>screen</strong></span> texture<a id="id478" class="indexterm"></a> as its base texture, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_05_22.jpg" /></div></li><li><p>Now it's time to add some post-processing to the texture. From the main menu, import the <span class="strong"><strong>Effects</strong></span> package (<span class="strong"><strong>Assets</strong></span> | <span class="strong"><strong>Import Package</strong></span> | <span class="strong"><strong>Effects</strong></span>).</p></li><li><p>From the <span class="strong"><strong>Hierarchy</strong></span> view, select the <code class="literal">Surveillance</code> camera. Then, from the main menu, add the <span class="strong"><strong>Grayscale</strong></span> image effect component (<span class="strong"><strong>Component</strong></span> | <span class="strong"><strong>Image Effects</strong></span> | <span class="strong"><strong>Color Adjustments</strong></span> | <span class="strong"><strong>Grayscale</strong></span>). Also, add the <span class="strong"><strong>Noise And Grain</strong></span> image effect (<span class="strong"><strong>Component</strong></span> | <span class="strong"><strong>Image Effects</strong></span> | <span class="strong"><strong>Noise</strong></span> | <span class="strong"><strong>Noise and Grain (Filmic)</strong></span>). Finally, from the <span class="strong"><strong>Inspector</strong></span> view, set the <span class="strong"><strong>Intensity Multiplier</strong></span> of the <span class="strong"><strong>Noise And Grain</strong></span> to <code class="literal">4</code>.</p></li><li><p>Play your scene. You should be able to see your actions in real time on the monitor's screen, as shown here:</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_05_23.jpg" /></div></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec169"></a>How it works...</h3></div></div></div><p>We achieved the final result by using the surveillance camera as source for the <span class="strong"><strong>Render Texture</strong></span> applied to the <span class="strong"><strong>screen</strong></span>. The camera was made a child of the camera's 3D model for easier relocation. Also, its <span class="strong"><strong>Near Clipping</strong></span> plane was readjusted in order to avoid displaying parts of the camera's 3D model geometry, and its <span class="strong"><strong>Audio Source</strong></span> component was disabled so that it<a id="id479" class="indexterm"></a> wouldn't clash with the main camera's component.</p><p>In addition to setting up the surveillance camera, two <span class="strong"><strong>Image Effects</strong></span> were added to it: <span class="strong"><strong>Noise And Grain</strong></span> and <span class="strong"><strong>Greyscale</strong></span>. Together, these effects should make <span class="strong"><strong>Render Texture</strong></span> look more like a cheap monitor's screen.</p><p>Finally, our <span class="strong"><strong>screen</strong></span> render texture was applied to the screen's 3D object's material (which had its shader<a id="id480" class="indexterm"></a> changed to <span class="strong"><strong>Unlit/texture</strong></span> so it could be seen in low/no light conditions, like a real monitor).</p></div></div>