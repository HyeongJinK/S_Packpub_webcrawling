<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch12lvl1sec129"></a>A progress bar to display proportion completed of Editor extension processing</h2></div></div><hr /></div><p>If an<a id="id1355" class="indexterm"></a> Editor task is going to take more than half a second or so, then we should indicate progress complete/remaining to <a id="id1356" class="indexterm"></a>the user via a progress bar so that they understand that something is actually happening and the application has not crashed and frozen.</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_12_45.jpg" /></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch12lvl2sec408"></a>Getting ready</h3></div></div></div><p>This recipe adds to the previous one, so make a copy of that project folder and do your work for this<a id="id1357" class="indexterm"></a> recipe with that copy.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch12lvl2sec409"></a>How to do it...</h3></div></div></div><p>To <a id="id1358" class="indexterm"></a>add a progress bar during the loop (and then remove it after the loop is complete), replace the <code class="literal">PlacePrefabs()</code> method with the following code:</p><div class="informalexample"><pre class="programlisting">static void PlacePrefabs(){
  string assetPath = "Assets/Prefabs/prefab_star.prefab";
  starPrefab = (GameObject)AssetDatabase.LoadMainAssetAtPath(assetPath);

  int total = 100;
  for(int i = 0; i &lt; total; i++){
    CreateRandomInstance();
    EditorUtility.DisplayProgressBar("Creating your starfield", i + "%", i/100f);
  }

  EditorUtility.ClearProgressBar();
}</pre></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch12lvl2sec410"></a>How it works...</h3></div></div></div><p>As can be seen, inside the <code class="literal">for</code> loop, we call the <code class="literal">EditorUtility.DisplayProgressBar(...)</code> method, passing three parameters. The first is a string title for the progress bar dialog window, the second is a string to show below the bar itself (usually a percentage is sufficient), and the final parameter is a value between 0.0 and 1.0, indicating the percentage complete to be displayed.</p><p>Since we have loop variable <code class="literal">i </code>that is a number from 1 to 100, we can display this integer followed by a percentage sign for our second parameter and just divide this number by 100 to get the decimal <a id="id1359" class="indexterm"></a>value needed to specify how much of the progress bar should be shown as completed. If the loop were running for some other number, we'd just divide the loop counter<a id="id1360" class="indexterm"></a> by the loop total to get our decimal progress value. Finally, after the loop has finished, we remove the progress bar with statement <code class="literal">EditorUtility.ClearProgressBar()</code>.</p></div></div>