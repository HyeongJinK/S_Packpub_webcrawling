<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec32"></a>Revealing icons for multiple object pickups by changing the size of a tiled image</h2></div></div><hr /></div><p>Another approach that could be taken to show increasing numbers of images is to make use of tiled images. The<a id="id222" class="indexterm"></a> same visual effect as in the previous recipe can also be achieved by making use of a tiled grey star image of width 400 (showing four copies of the grey star icon), behind a tiled yellow star image, whose width is 100 times the number of stars collected. We'll adapt the previous recipe to illustrate this technique.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec81"></a>Getting ready</h3></div></div></div><p>This recipe follows on from the previous recipe in this chapter.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec82"></a>How to do it...</h3></div></div></div><p>To display grey and yellow star icons for multiple object pickups using tiled images, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Make a copy of your work for the previous recipe.</p></li><li><p>In the <span class="strong"><strong>Hierarchy</strong></span> panel, remove the four Image-star0/1/2/3 UI <span class="strong"><strong>Images</strong></span> in the <span class="strong"><strong>Canvas</strong></span>.</p></li><li><p>Select the <span class="strong"><strong>Canvas</strong></span> in the <span class="strong"><strong>Hierarchy</strong></span> panel and add a new UI <span class="strong"><strong>Image</strong></span> object (<span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Image</strong></span>). Rename it <code class="literal">Image-stars-grey</code>.</p></li><li><p>Select <code class="literal">Image-stars-grey</code> in the <span class="strong"><strong>Hierarchy</strong></span> panel.</p></li><li><p>From the <span class="strong"><strong>Project</strong></span> panel, drag sprite <code class="literal">icon_star_grey_100</code> (folder <code class="literal">Sprites</code>) into the <span class="strong"><strong>Source Image</strong></span> field in the <span class="strong"><strong>Inspector</strong></span> (in the <span class="strong"><strong>Image (Script)</strong></span> component).</p></li><li><p>Click on the <span class="strong"><strong>Set Native Size</strong></span> button for this for the <span class="strong"><strong>Image</strong></span> component. This will resize the UI <span class="strong"><strong>Image</strong></span> to fit the physical pixel width and height of sprite file <span class="strong"><strong>star_empty_icon.</strong></span>
</p></li><li><p>Now we will position our icon at the <span class="strong"><strong>top </strong></span>and <span class="strong"><strong>left</strong></span> of the <span class="strong"><strong>Game</strong></span> panel. Edit the UI <span class="strong"><strong>Image's Rect Transform</strong></span> component, and while holding down <span class="emphasis"><em>SHIFT</em></span> and <span class="emphasis"><em>ALT</em></span> (to set pivot and position), choose the top-left box. The UI <span class="strong"><strong>Image</strong></span> should now be positioned at the top left of the <span class="strong"><strong>Game</strong></span> panel.</p></li><li><p>In the <span class="strong"><strong>Inspector</strong></span> <a id="id223" class="indexterm"></a>panel, change the <span class="strong"><strong>Width</strong></span> (in the <span class="strong"><strong>Rect Transform</strong></span> component) of <code class="literal">Image-stars-grey</code> to 400. Also, set the <span class="strong"><strong>Image Type</strong></span> (in the <span class="strong"><strong>Image (Script)</strong></span> component) to <span class="strong"><strong>Tiled</strong></span>, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_02_19.jpg" /></div></li><li><p>Make a copy of <code class="literal">Image-stars-grey</code> in the <span class="strong"><strong>Hierarchy</strong></span> panel, naming the copy <code class="literal">Image-stars-yellow</code>.</p></li><li><p>With <code class="literal">Image-stars-yellow</code> selected in <span class="strong"><strong>Hierarchy</strong></span> panel, from the <span class="strong"><strong>Project</strong></span> panel, drag the sprite <code class="literal">icon_star_100</code> (folder <code class="literal">Sprites</code>) into the <span class="strong"><strong>Source Image</strong></span> field in the <span class="strong"><strong>Inspector</strong></span> (in the <span class="strong"><strong>Image (Script)</strong></span> component).</p></li><li><p>Set the width of <code class="literal">Image-stars-yellow</code> to 0 (in the <span class="strong"><strong>Rect Transform</strong></span> component). So, now we have the yellow stars tiled image above the grey tiled image, but since its width is zero, we don't see any of the yellow stars yet.</p></li><li><p>Replace the existing C# Script <code class="literal">PlayerInventoryDisplay</code> with the following code:</p><div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;
using UnityEngine.UI;

public class PlayerInventoryDisplay : MonoBehaviour
{
  public Image iconStarsYellow;

  public void OnChangeStarTotal(int starTotal){
    float newWidth = 100 * starTotal;
    iconStarsYellow.rectTransform.SetSizeWithCurrentAnchors(RectTransform.Axis.Horizontal, newWidth);
  }
}</pre></div></li><li><p>From the <span class="strong"><strong>Hierarchy</strong></span> view, select the GameObject <code class="literal">player-SpaceGirl</code>. Then, from the <span class="strong"><strong>Inspector</strong></span>, access the <span class="strong"><strong>Player Inventory Display (Script)</strong></span> component<a id="id224" class="indexterm"></a> and populate the <span class="strong"><strong>Icons Stars Yellow</strong></span> public field with UI <span class="strong"><strong>Image</strong></span> object <code class="literal">Image-stars-yellow</code>.</p></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec83"></a>How it works...</h3></div></div></div><p>UI <span class="strong"><strong>Image</strong></span> <code class="literal">Image-stars-grey</code> is a tiled image, wide enough (400px) for grey sprite <span class="strong"><strong>icon_star_grey_100</strong></span> to be shown four times. UI <span class="strong"><strong>Image</strong></span> <code class="literal">Image-stars-yellow</code> is a tiled image, above the grey one, initially with width set to zero, so no yellow stars can be seen.</p><p>Each time a star is picked up, a call is made to the <code class="literal">OnChangeStarTotal(…)</code>method of the script class <code class="literal">PlayerInventoryDisplay</code> , passing the new integer number of stars collected. By multiplying this by the width of the yellow sprite image (100px), we get the correct width to set for UI <span class="strong"><strong>Image</strong></span> <code class="literal">Image-stars-yellow</code> so that the corresponding number of yellow stars will now be seen by the user. Any stars that remain to be collected will still be seen as the grey stars that are not yet covered up.</p><p>The actual task of changing the width of UI <span class="strong"><strong>Image</strong></span> <code class="literal">Image-stars-yellow</code> is completed by calling the <code class="literal">SetSizeWithCurrentAnchors(…) </code>method. The first parameter is the axis, so we pass constant <code class="literal">RectTransform.Axis.Horizontal</code> so that it will be the width that is changed. The second parameter is the new size for that axis—so we pass a value that is 100 times the number of stars collected so far (variable <code class="literal">newWidth</code>).</p></div></div>