<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch10lvl1sec101"></a>Saving and loading player data – using PlayerPrefs</h2></div></div><hr /></div><p>While the previous<a id="id1069" class="indexterm"></a> recipe illustrates how the static<a id="id1070" class="indexterm"></a> properties allow a game to remember values between different scenes, these values are forgotten once the game application has quit. Unity<a id="id1071" class="indexterm"></a> provides the <code class="literal">PlayerPrefs</code> feature to<a id="id1072" class="indexterm"></a> allow a game to store and retrieve data, between the different game playing sessions.</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_10_08.jpg" /></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec306"></a>Getting ready</h3></div></div></div><p>This recipe builds<a id="id1073" class="indexterm"></a> upon the previous recipe. In case you haven't completed the previous recipe, we have included a <code class="literal">Unity</code> package named <code class="literal">game_scoreStaticVariables</code> in the the <code class="literal">1362_10_05</code> folder. In order to follow this recipe using this package, you must do the following:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Create a new 2D project and import the <code class="literal">game_HigherOrLower</code> package.</p></li><li><p>Add each of<a id="id1074" class="indexterm"></a> the scenes to the build in the sequence (<code class="literal">scene0_mainMenu</code>, then <code class="literal">scene1_gamePlaying</code>, and so on).</p></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec307"></a>How to do it...</h3></div></div></div><p>To save and load<a id="id1075" class="indexterm"></a> the player data using <code class="literal">PlayerPrefs</code>, follow<a id="id1076" class="indexterm"></a> these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Delete the C# script called <code class="literal">Player</code>.</p></li><li><p>Edit the C# script called <code class="literal">UpdateScoreText</code> by replacing the <code class="literal">Start()</code> method with the following:</p><div class="informalexample"><pre class="programlisting">void Start(){
  Text scoreText = GetComponent&lt;Text&gt;();

  int scoreCorrect = PlayerPrefs.GetInt("scoreCorrect");
  int scoreIncorrect = PlayerPrefs.GetInt("scoreIncorrect");

  int totalAttempts = scoreCorrect + scoreIncorrect;
  string scoreMessage = "Score = ";
  scoreMessage += scoreCorrect + " / " + totalAttempts;

  scoreText.text = scoreMessage;
}</pre></div></li><li><p>Now, edit the C# script called <code class="literal">IncrementCorrectScore</code> by replacing the <code class="literal">Start()</code> method <a id="id1077" class="indexterm"></a>with the following code:</p><div class="informalexample"><pre class="programlisting">void Start () {
  int newScoreCorrect = 1 + PlayerPrefs.GetInt("scoreCorrect");
  PlayerPrefs.SetInt("scoreCorrect", newScoreCorrect);
}</pre></div></li><li><p>Now, edit the C# script called <code class="literal">IncrementIncorrectScore</code> by replacing the <code class="literal">Start()</code> method with the following code:</p><div class="informalexample"><pre class="programlisting">void Start () {
  int newScoreIncorrect = 1 + PlayerPrefs.GetInt("scoreIncorrect");
  PlayerPrefs.SetInt("scoreIncorrect", newScoreIncorrect);
}</pre></div></li><li><p>Save your <a id="id1078" class="indexterm"></a>scripts and play the game. Quit from<a id="id1079" class="indexterm"></a> Unity and then restart the application. You will find that the player's name, level, and score are now kept between the game sessions.</p></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec308"></a>How it works...</h3></div></div></div><p>We had no need for the<a id="id1080" class="indexterm"></a> <code class="literal">Player</code> class, since this recipe uses the built-in runtime class called <code class="literal">PlayerPrefs</code>, provided by Unity.</p><p>Unity's <code class="literal">PlayerPrefs</code> runtime class is capable of storing and accessing information (the string, int, and float variables) in the user's machine. Values are stored in a <code class="literal">plist</code> file (Mac) or the registry (Windows), in a similar way to web browser cookies, and therefore, remembered between game application sessions.</p><p>Values for the total correct and incorrect scores are stored by the <code class="literal">Start()</code> methods in the <code class="literal">IncrementCorrectScore</code> and <code class="literal">IncrementIncorrectScore</code> classes. These methods use the <code class="literal">PlayerPrefs.GetInt("&lt;variableName&gt;")</code> method to retrieve the old total, add <code class="literal">1</code> to it, and then store the incremented total using the <code class="literal">PlayerPrefs.SetInt("&lt;variableName&gt;")</code> method.</p><p>These correct and incorrect totals are then read each time the <code class="literal">scene0_mainMenu</code> scene is loaded, and the score<a id="id1081" class="indexterm"></a> totals displayed via the UI Text object<a id="id1082" class="indexterm"></a> on the screen.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note50"></a>Note</h3><p>For more information on<a id="id1083" class="indexterm"></a> <code class="literal">PlayerPrefs</code>, see Unity's online documentation at</p><p>
<a class="ulink" href="http://docs.unity3d.com/ScriptReference/PlayerPrefs.html" target="_blank">http://docs.unity3d.com/ScriptReference/PlayerPrefs.html</a>.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec309"></a>See also</h3></div></div></div><p>Refer to the following<a id="id1084" class="indexterm"></a> recipe in this chapter for <a id="id1085" class="indexterm"></a>more information:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="emphasis"><em>Saving and loading player data – using static properties</em></span>
</p></li></ul></div></div></div>