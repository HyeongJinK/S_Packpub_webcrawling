<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch10lvl1sec99"></a>Loading external resource files – by manually storing files in the Unity Resources folder</h2></div></div><hr /></div><p>At times, the contents of the external resource files may need to be changed after the game compilation. Hosting the resource files on the web may not be an option. There is a method of manually storing and reading files from the <code class="literal">Resources</code> folder of the compiled game, which<a id="id1046" class="indexterm"></a> allows for those files to be changed after the game compilation.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note48"></a>Note</h3><p>This technique only works when you compile to a Windows or Mac stand alone executable—it will not work for Web Player builds, for example.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec296"></a>Getting ready</h3></div></div></div><p>The <code class="literal">1362_10_01</code> folder provides the texture image that you can use for this recipe:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<code class="literal">externalTexture.jpg</code>
</p></li></ul></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec297"></a>How to do it...</h3></div></div></div><p>To load external resources by manually storing the files in the <code class="literal">Resources</code> folder, do the following:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>In a 2D project, create a new Image UI GameObject.</p></li><li><p>Add the following C# script class as a component of your Image object:</p><div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;

using UnityEngine.UI;
using System.IO;

public class ReadManualResourceImageFile : MonoBehaviour {
  private string fileName = "externalTexture.jpg";
  private string url;
  private Texture2D externalImage;

  IEnumerator Start () {
    url = "file:" + Application.dataPath;
    url = Path.Combine(url, "Resources");
    url = Path.Combine(url, fileName);

    WWW www = new WWW (url);
    yield return www;

    Texture2D texture = www.texture;
    GetComponent&lt;Image&gt;().sprite = TextureToSprite(texture);
  }

  private Sprite TextureToSprite(Texture2D texture){
    Rect rect = new Rect(0, 0, texture.width, texture.height);
    Vector2 pivot = new Vector2(0.5f, 0.5f);
    Sprite sprite = Sprite.Create(texture, rect, pivot);
    return sprite;
  }
}</pre></div></li><li><p>Build your (Windows or Mac) standalone executable.</p></li><li><p>Copy the <code class="literal">externalTexture.jpg</code> image to your standalone's <code class="literal">Resources</code> folder.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note49"></a>Note</h3><p>You will need<a id="id1047" class="indexterm"></a> to place the files in the <code class="literal">Resources</code> folder manually after every compilation.</p><p>When you create a Windows or Linux standalone executable, there is also a _<code class="literal">Data</code> folder, created with the executable application file. The <code class="literal">Resources</code> folder can be found inside this <code class="literal">Data</code> folder.</p><p>A Mac standalone application executable looks like a single file, but it is actually a MacOS <code class="literal">package</code> folder. Right-click on the executable file and select <span class="strong"><strong>Show Package Contents</strong></span>. You will then find the standalone's <code class="literal">Resources</code> folder inside the <code class="literal">Contents</code> folder.</p></div></li><li><p>Run your standalone game application and the image will be displayed:</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_10_06.jpg" /></div></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec298"></a>How it works...</h3></div></div></div><p>Note the need to use the <code class="literal">System.IO</code> and <code class="literal">UnityEngine.UI</code> packages for this recipe.</p><p>When the executable runs, the <code class="literal">WWW</code> object spots that the URL starts with the word file, and so Unity <a id="id1048" class="indexterm"></a>attempts to find the external resource file in its <code class="literal">Resources</code> folder, and then load its contents.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec299"></a>There's more...</h3></div></div></div><p>There are some details that you don't want to miss.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch10lvl3sec79"></a>Avoiding cross-platform problems with Path.Combine() rather than "/" or "\"</h4></div></div></div><p>The filepath folder separator character<a id="id1049" class="indexterm"></a> is different for Windows and Mac file systems (backslash (<code class="literal">\</code>) for Windows, forward slash (<code class="literal">/</code>) for the Mac). However, Unity knows which kind of standalone you are compiling your project into, therefore the <code class="literal">Path.Combine()</code> method will insert the appropriate separator slash character form the file URL that is required.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec300"></a>See also</h3></div></div></div><p>Refer to the following recipes in this chapter for more information:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="emphasis"><em>Loading external resource files – by Unity Default Resources</em></span>
</p></li><li style="list-style-type: disc"><p>
<span class="emphasis"><em>Loading external resource files – by downloading files from the Internet</em></span>
</p></li></ul></div></div></div>