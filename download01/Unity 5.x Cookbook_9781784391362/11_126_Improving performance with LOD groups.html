<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch11lvl1sec123"></a>Improving performance with LOD groups</h2></div></div><hr /></div><p>
<span class="strong"><strong>Optimization principal 5</strong></span>: Minimize the number of draw calls.</p><p>Detailed geometry and high-resolution texture maps can be a double-edged sword: they can deliver a better visual experience, but they can impact negatively on the game's performance. <span class="strong"><strong>LOD groups</strong></span> address<a id="id1297" class="indexterm"></a> this issue by replacing high-quality objects by simplified versions whenever that object takes up a smaller portion of the screen than necessary for a high-quality version to make a significant difference.</p><p>In this recipe, we will use a <span class="strong"><strong>LOD group</strong></span> to create a game object featuring two different levels of detail: a high-quality version for whenever the object takes up more than 50 percent of the screen and a low-quality version for the times it takes up less than that amount. We would like to thank Carl Callewaert, from Unity, for his demonstration of the LOD Group functionality, which has informed this recipe in many ways.</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_11_09.jpg" /></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch11lvl2sec391"></a>Getting ready</h3></div></div></div><p>For this recipe, we have prepared two prefabs for the high- and low-quality versions of the game object. They share the same dimensions and transform settings (position, rotation, and scale), so that they can replace each other seamlessly. Both prefabs are contained within the package named <code class="literal">LODGroup</code>, available in the <code class="literal">1362_11_16</code> folder.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch11lvl2sec392"></a>How to do it...</h3></div></div></div><p>To create a LOD group, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Import the <span class="strong"><strong>LODGroup</strong></span> package into your project.</p></li><li><p>From the <span class="strong"><strong>Project</strong></span> view, inside the <span class="strong"><strong>LOD</strong></span> folder, drag the <span class="strong"><strong>batt-high</strong></span> prefab into the <span class="strong"><strong>Hierarchy</strong></span> view. Then, do the same for the <span class="strong"><strong>batt-low </strong></span>prefab. Make sure that they are placed at the same <span class="strong"><strong>Position</strong></span> (<span class="strong"><strong>X</strong></span>: <span class="strong"><strong>0</strong></span>; <span class="strong"><strong>Y</strong></span>: <span class="strong"><strong>0</strong></span>; <span class="strong"><strong>Z</strong></span>: <span class="strong"><strong>0</strong></span>).</p></li><li><p>From the <span class="strong"><strong>Create</strong></span> drop-down menu in the <span class="strong"><strong>Hierarchy</strong></span> view, create a new empty game<a id="id1298" class="indexterm"></a> object (<span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>Create Empty</strong></span>). Rename it <code class="literal">battLOD</code>.</p></li><li><p>Add the <span class="strong"><strong>LODGroup</strong></span> component to <span class="strong"><strong>battLOD</strong></span> (menu <span class="strong"><strong>Component</strong></span> | <span class="strong"><strong>Rendering</strong></span> | <span class="strong"><strong>LODGroup</strong></span>).</p></li><li><p>Select the <span class="strong"><strong>battLOD</strong></span> object, and, from the <span class="strong"><strong>Inspector</strong></span> view, <span class="strong"><strong>LODGroup</strong></span> component, right-click on <span class="strong"><strong>LOD 2</strong></span> and delete it (since we'll have only two different LODs: <span class="strong"><strong>LOD 0</strong></span> and <span class="strong"><strong>LOD 1</strong></span>), as shown in the following screnshot:</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_11_10.jpg" /></div></li><li><p>Select the <span class="strong"><strong>LOD 0</strong></span> area, click on the <span class="strong"><strong>Add</strong></span> button, and select the <span class="strong"><strong>batt-high</strong></span> game object from the list. A message about reparenting objects will appear. Select <span class="strong"><strong>Yes, Reparent</strong></span>.</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_11_11.jpg" /></div></li><li><p>Select<a id="id1299" class="indexterm"></a> the <span class="strong"><strong>LOD 1</strong></span> section, click on <span class="strong"><strong>Add</strong></span>, and select the <span class="strong"><strong>batt-low</strong></span> object. Again, chose <span class="strong"><strong>Yes, Reparent</strong></span> when prompted.</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_11_12.jpg" /></div></li><li><p>Drag the limits of the LOD renderers to set them as: <span class="strong"><strong>LOD 0: 100%</strong></span>, <span class="strong"><strong>LOD 1</strong></span>: <span class="strong"><strong>50%</strong></span>, <span class="strong"><strong>Culled: 1%.</strong></span> That will make Unity render <span class="strong"><strong>bat-high </strong></span>whenever it occupies 51 percent to 100 percent of the screen space, <span class="strong"><strong>batt-low</strong></span> when 2 percent to 50 percent, and will not render anything if 1 percent or less.</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_11_13.jpg" /></div></li><li><p>Move the scene's camera toward the <span class="strong"><strong>battLOD</strong></span> object and back. You will notice how <a id="id1300" class="indexterm"></a>Unity swaps between the high- and low-definition LOD renderer as it occupies more or less than 50 percent of the screen's space.</p></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch11lvl2sec393"></a>How it works...</h3></div></div></div><p>Once we have populated the LOD renderers with the appropriate models, the <span class="strong"><strong>LODGroup</strong></span> component will select and display the right renderer based on how much of the screen's percentage the object takes up, or even display nothing at all.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch11lvl2sec394"></a>There's more...</h3></div></div></div><p>Some details you don't want to miss:</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch11lvl3sec104"></a>Adding more LOD renderers</h4></div></div></div><p>You can add more<a id="id1301" class="indexterm"></a> LOD renderers by right-clicking on an existing LOD renderer and selecting <span class="strong"><strong>Insert Before</strong></span> from the context menu.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch11lvl3sec105"></a>Fading LOD transitions</h4></div></div></div><p>In case you <a id="id1302" class="indexterm"></a>want to minimize the <span class="emphasis"><em>popping</em></span> that occurs when renderers are swapped, you can try changing the parameter <span class="strong"><strong>Fade Mode</strong></span> from <span class="strong"><strong>None</strong></span> to <span class="strong"><strong>Percentage</strong></span> or <span class="strong"><strong>Crossfade</strong></span>.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch11lvl2sec395"></a>See also</h3></div></div></div><p>Refer to the next recipe in this chapter for more information</p></div></div>