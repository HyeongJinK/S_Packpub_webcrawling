<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch01lvl1sec16"></a>Creating UI Buttons to move between scenes</h2></div></div><hr /></div><p>As well as scenes where the player plays the game, most games will have menu screens, which display to the <a id="id57" class="indexterm"></a>user messages about instructions, high scores, the level they have reached so far, and so on. Unity provides the UI <span class="strong"><strong>Buttons</strong></span> to make it easy to offer users a simple way to indicate their choice of action on such screens.</p><p>In this recipe, we'll create a very simple game consisting of two screens, each with a button to load the other one, similar to the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_01_29.jpg" /></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec36"></a>How to do it...</h3></div></div></div><p>To create a button-navigable multi-scene game, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Create a new Unity 2D project.</p></li><li><p>Save the current (empty) scene, naming it <span class="strong"><strong>page1</strong></span>.</p></li><li><p>Add a UI <span class="strong"><strong>Text</strong></span> object positioned at the top center of the scene, containing text <code class="literal">Main Menu / (page 1)</code> in a large font size.</p></li><li><p>Add a UI <span class="strong"><strong>Button</strong></span> to the scene positioned in the middle center of the screen. In the <span class="strong"><strong>Hierarchy</strong></span> panel, click on the show children triangle to display the UI <span class="strong"><strong>Text</strong></span> child of this button GameObject. Select the <span class="strong"><strong>Text</strong></span> button-child GameObject, and in the <span class="strong"><strong>Inspector</strong></span> panel for the <span class="strong"><strong>Text</strong></span> property of the <span class="strong"><strong>Text (Script)</strong></span> component, enter the button text called <code class="literal">goto page 2</code>, as shown here:</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_01_30.jpg" /></div></li><li><p>Add the current scene to the build, choosing menu: <span class="strong"><strong>File</strong></span> | <span class="strong"><strong>Build Settings…</strong></span>. Then, click on the <span class="strong"><strong>Add Current</strong></span> button so that the <span class="strong"><strong>page1</strong></span> scene becomes the first scene<a id="id58" class="indexterm"></a> on the list of <span class="strong"><strong>Scenes in the Build</strong></span>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note09"></a>Note</h3><p>We cannot tell Unity to load a scene that has not been added to the list of scenes in the build. We use the <code class="literal">Application.LoadLevel(…)</code>code to tell Unity to load the scene name (or numeric index) that is provided.</p></div></li><li><p>Create a C# script class, <code class="literal">MenuActions,</code> containing the following code, and add an instance as a scripted component to the <span class="strong"><strong>Main Camera</strong></span>:</p><div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;

public class MenuActions : MonoBehaviour {
  public void MENU_ACTION_GotoPage(string sceneName){
    Application.LoadLevel(sceneName);
  }
}</pre></div></li><li><p>Ensure that the <span class="strong"><strong>Button</strong></span> is selected in the <span class="strong"><strong>Hierarchy</strong></span> and click on the plus sign "<span class="strong"><strong>+</strong></span>" button at the bottom of the <span class="strong"><strong>Button (Script)</strong></span> component, in the <span class="strong"><strong>Inspector view</strong></span>, to create a new <span class="strong"><strong>OnClick</strong></span> event handler for this button.</p></li><li><p>Drag the <span class="strong"><strong>Main Camera</strong></span> from the <span class="strong"><strong>Hierarchy</strong></span> over the <span class="strong"><strong>Object</strong></span> slot—immediately below the menu saying <span class="strong"><strong>Runtime Only</strong></span>. This means that when the <span class="strong"><strong>Button</strong></span> receives an <span class="strong"><strong>OnClick</strong></span> event, we can call a public method from a scripted object inside the <span class="strong"><strong>Main Camera</strong></span>.</p></li><li><p>Now, select the <span class="strong"><strong>MENU_ACTION_GotoPage()</strong></span> method from the <span class="strong"><strong>MenuActions</strong></span> drop-down list (initially showing <span class="strong"><strong>No Function</strong></span>). Type <code class="literal">page2</code> (the name of the scene we want to be loaded when this button is clicked) in the text box, below the method's drop-down menu. This <span class="strong"><strong>page2</strong></span> string will be passed to the method when the button receives an <span class="strong"><strong>OnClick</strong></span> event message, as shown here:</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_01_31.jpg" /></div></li><li><p>Save the<a id="id59" class="indexterm"></a> current scene, create a new empty scene, and then save this new scene as <span class="strong"><strong>page2</strong></span>.</p></li><li><p>Follow the similar steps for this scene. Add a <span class="strong"><strong>UI Text</strong></span> GameObject, displaying the text <span class="strong"><strong>Instructions / (page 2)</strong></span> in a large font size. Add a UI <span class="strong"><strong>Button,</strong></span> showing the <span class="strong"><strong>goto page 1 text.</strong></span>
</p></li><li><p>Add the current scene to the build (so now, both <span class="strong"><strong>page1</strong></span> and <span class="strong"><strong>page2</strong></span> will be listed in the build).</p></li><li><p>Add an instance of <code class="literal">MenuActions</code> script class to the <span class="strong"><strong>Main Camera</strong></span>.</p></li><li><p>Select the <span class="strong"><strong>Button</strong></span> in the <span class="strong"><strong>Hierarchy</strong></span> panel, and add an <span class="strong"><strong>On Click</strong></span> event handler, which will pass the <span class="strong"><strong>MENU_ACTION_GotoPage()</strong></span> method the string <span class="strong"><strong>page1</strong></span> (the name of the scene we want to be loaded when this button is clicked).</p></li><li><p>Save the scene.</p></li><li><p>When you run the <span class="strong"><strong>page1 scene,</strong></span> you will be presented with your <span class="strong"><strong>Main Menu</strong></span> text and a button, which when clicked, makes the game load the <span class="strong"><strong>page2 scene</strong></span>. On scene <span class="strong"><strong>page2,</strong></span> you'll have a button to take you back to <span class="strong"><strong>page1</strong></span>.</p></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec37"></a>How it works...</h3></div></div></div><p>You have created two scenes, and added both of them to the game build. Each scene has a button, which when clicked (when the game is playing), makes Unity load the (named) other scene. This is<a id="id60" class="indexterm"></a> made possible because when each button is clicked, it runs the <code class="literal">MENU_ACTION_GotoPage(…)</code>method from the scripted <code class="literal">MenuActions</code> component inside the <span class="strong"><strong>Main Camera</strong></span>. This method inputs a text string of the name of the scene to be loaded, so that the button in the <span class="strong"><strong>page1 scene</strong></span> gives the string name of <span class="strong"><strong>page2</strong></span> as the scene to be loaded, and vice versa.</p><p>When a UI <span class="strong"><strong>Button</strong></span> is added to the <span class="strong"><strong>Hierarchy </strong></span>panel, a child UI <span class="strong"><strong>Text</strong></span> object is also automatically created, and the content of the <span class="strong"><strong>Text</strong></span> property of this UI <span class="strong"><strong>Text</strong></span> child is the text that the user sees on the button.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec38"></a>There's more...</h3></div></div></div><p>There are some details that you don't want to miss.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec06"></a>Visual animation for the button mouse-over</h4></div></div></div><p>There are several <a id="id61" class="indexterm"></a>ways in which we can visually inform the user that the button is interactive when they move their mouse cursor over it. The simplest is to add a color tint that will appear when the mouse is over the button—this is the default <span class="strong"><strong>Transition</strong></span>. With the <span class="strong"><strong>Button</strong></span> selected in the <span class="strong"><strong>Hierarchy</strong></span>, choose a tint color (for example, red), for the <span class="strong"><strong>Highlighted Color</strong></span> property of the <span class="strong"><strong>Button (Script)</strong></span> component, in the <span class="strong"><strong>Inspector</strong></span> tab, as shown here:</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_01_33.jpg" /></div><p>Another form of visual <span class="strong"><strong>Transition</strong></span> to inform the user of an active button is <span class="strong"><strong>Sprite Swap</strong></span>. In this case, properties for different images for <span class="strong"><strong>Targeted</strong></span>/<span class="strong"><strong>Highlighted</strong></span>/<span class="strong"><strong>Pressed</strong></span>/<span class="strong"><strong>Disabled</strong></span> are available in the <span class="strong"><strong>Inspector </strong></span>tab. The default <span class="strong"><strong>Targeted Graphic</strong></span> is the built-in Unity <span class="strong"><strong>Button (image)</strong></span> – this is the grey rounded rectangle default when GameObjects buttons are created. Dragging in a very different-looking image for the <span class="strong"><strong>Highlighted Sprite</strong></span> is an effective alternative to <a id="id62" class="indexterm"></a>set a color hint. We have provided a <code class="literal">rainbow.png</code> image with the project for this recipe that can be used for the <span class="strong"><strong>Button</strong></span> mouse over <span class="strong"><strong>Highlighted Sprite</strong></span>. The following screenshot shows the button with this rainbow background image:</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_01_34.jpg" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec07"></a>Animating button properties on mouse over</h4></div></div></div><p>Finally, animations can be <a id="id63" class="indexterm"></a>created for dynamically highlighting a button to the user, for example, a button might get larger when the mouse is over it, and then it might shrink back to its original size when the mouse pointer is moved away. These effects are achieved by choosing the <span class="strong"><strong>Animation</strong></span> option for the <span class="strong"><strong>Transition</strong></span> property, and by creating an animation controller with triggers for the <span class="strong"><strong>Normal</strong></span>, <span class="strong"><strong>Highlighted</strong></span>, <span class="strong"><strong>Pressed</strong></span> and <span class="strong"><strong>Disabled</strong></span> states. To animate a button for enlargement when the mouse is over it (the highlighted state), do the following:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Create a new Unity 2D project.</p></li><li><p>Create a button.</p></li><li><p>In the <span class="strong"><strong>Inspector Button (Script)</strong></span> component, set the <span class="strong"><strong>Transition</strong></span> property to <span class="strong"><strong>Animation</strong></span>.</p></li><li><p>Click the <span class="strong"><strong>Auto Generate Animation</strong></span> button (just below the <span class="strong"><strong>Disabled Trigger</strong></span> property) for the <span class="strong"><strong>Button (Script) </strong></span>component, as shown here:</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_01_41.jpg" /></div></li><li><p>Save the<a id="id64" class="indexterm"></a> new controller by naming it <span class="strong"><strong>button-animation-controller</strong></span>.</p></li><li><p>Ensure that the <span class="strong"><strong>Button</strong></span> GameObject is selected in the <span class="strong"><strong>Hierarchy</strong></span>. Then, in the <span class="strong"><strong>Animation</strong></span> panel, select the <span class="strong"><strong>Highlighted</strong></span> clip from the drop-down menu, as shown here:</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_01_42.jpg" /></div></li><li><p>In the <span class="strong"><strong>Animation</strong></span> panel, click on the red<a id="id65" class="indexterm"></a> <span class="strong"><strong>record</strong></span> circle button, and then click on the <span class="strong"><strong>Add Property</strong></span> button, choosing to record changes to the <span class="strong"><strong>Rect Transform</strong></span> | <span class="strong"><strong>Scale</strong></span> property.</p></li><li><p>Two key frames will have been created, delete the second one at <span class="strong"><strong>1:00</strong></span> (since we don't want a "bouncing" button), as shown in the following screenshot .</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_01_43.jpg" /></div></li><li><p>Select the first key frame at <span class="strong"><strong>0:00</strong></span> (the only one now!). Then, in the <span class="strong"><strong>Inspector</strong></span> view, set the <span class="emphasis"><em>X</em></span> and <span class="emphasis"><em>Y</em></span> scale properties of the <span class="strong"><strong>Rect Transform</strong></span> component to (<code class="literal">1.2</code>, <code class="literal">1.2</code>).</p></li><li><p>Finally, click on the red <span class="strong"><strong>record</strong></span> circle button for the second time to end the recording of the animation changes.</p></li><li><p>Save and run your<a id="id66" class="indexterm"></a> scene, and you will see that the button smoothly animates to get larger when the mouse is over it, and then smoothly returns to its original size when the mouse is moved away.</p></li></ol></div><p>The following web pages offer video and web-based tutorials on UI animations:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>The Unity button transitions tutorial is available at:</p><p>
<a class="ulink" href="http://unity3d.com/learn/tutorials/modules/beginner/ui/ui-transitions" target="_blank">http://unity3d.com/learn/tutorials/modules/beginner/ui/ui-transitions</a>
</p></li><li style="list-style-type: disc"><p>Ray Wenderlich's <a id="id67" class="indexterm"></a>tutorial (part 2), including the button animations, is available at:</p><p>
<a class="ulink" href="http://www.raywenderlich.com/79031/unity-new-gui-tutorial-part-2" target="_blank">http://www.raywenderlich.com/79031/unity-new-gui-tutorial-part-2</a>
</p></li></ul></div></div></div></div>