<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch10lvl1sec105"></a>Managing Unity project code using Git version control and GitHub hosting</h2></div></div><hr /></div><p>
<span class="strong"><strong>Distributed Version Control Systems</strong></span> (<span class="strong"><strong>DVCS</strong></span>) are becoming a bread-and-butter everyday tool for software developers. An issue with<a id="id1112" class="indexterm"></a> Unity projects can be the many<a id="id1113" class="indexterm"></a> binary files in each project. There are also many files in a local system's Unity project directory that are not<a id="id1114" class="indexterm"></a> needed for archiving/sharing, such as OS specific thumbnail files, trash files, and so on. Finally, some Unity project folders themselves do not<a id="id1115" class="indexterm"></a> need to be archived, such as Temp and Library.</p><p>While Unity provides its own "Asset Server", many small game developers chose not to pay for this extra feature. Also, Git and Mercurial (the most common DVCSs) are free, and work with any set of documents that are to be maintained (programs in any programming language, text-files, and so on). So, it makes sense to learn how to work with a third-party, industry standard DVCS for the Unity projects. In fact, the documents for this very book were all archived and version-controlled using a private GitHub repository!</p><p>In this recipe, we will set up a Unity project for GIT DVCS through a combination of Unity Application settings and use of the GitHub GUI-client application.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note54"></a>Note</h3><p>We created a real project this way—a pacman-style game, which you can explore and download/pull from the public <a id="id1116" class="indexterm"></a>GitHub's URL, available at <a class="ulink" href="https://github.com/dr-matt-smith/matt-mac-man" target="_blank">https://github.com/dr-matt-smith/matt-mac-man</a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec322"></a>Getting ready</h3></div></div></div><p>This recipe can be used with any Unity project. In the <code class="literal">1362_10_09</code> folder, we have provided a Unity package of our <code class="literal">matt-mac-man</code> game, if you wish to use that one - in which case create<a id="id1117" class="indexterm"></a> a new 2D project in Unity, and import this package.</p><p>Since this recipe illustrates hosting code on GitHub, you'll need to create a (free) GitHub account at <a class="ulink" href="http://github.com" target="_blank">github.com</a> if you do not already have one.</p><p>Before starting this<a id="id1118" class="indexterm"></a> recipe you need to have installed Git and the GitHub client application.</p><p>Learn how, and download the<a id="id1119" class="indexterm"></a> client from the following links:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<a class="ulink" href="http://git-scm.com/book/en/Getting-Started-Installing-Git" target="_blank">http://git-scm.com/book/en/Getting-Started-Installing-Git</a>
</p></li><li style="list-style-type: disc"><p>
<a class="ulink" href="http://git-scm.com/downloads/guis" target="_blank">http://git-scm.com/downloads/guis</a>
</p></li></ul></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec323"></a>How to do it...</h3></div></div></div><p>To load the external<a id="id1120" class="indexterm"></a> resources by Unity Default Resources, do the following:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>In the root<a id="id1121" class="indexterm"></a> directory of your Unity project, add the following code into a file named <code class="literal">.gitignore</code> (ensure that the filename starts with the <span class="emphasis"><em>dot</em></span>):</p><div class="informalexample"><pre class="programlisting"># =============== #
# Unity generated #
# =============== #
Temp/
Library/

# ===================================== #
# Visual Studio / MonoDevelop generated #
# ===================================== #
ExportedObj/
obj/
*.svd
*.userprefs
/*.csproj
*.pidb
*.suo
/*.sln
*.user
*.unityproj
*.booproj

# ============ #
# OS generated #
# ============ #
.DS_Store
.DS_Store?
._*
.Spotlight-V100
.Trashes
ehthumbs.db
Thumbs.db</pre></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip12"></a>Tip</h3><p>This special file (<code class="literal">.gitignore</code>) tells the version control system which files do <span class="emphasis"><em>not</em></span> need to be archived. For example, we don't need to record the Windows or Mac image thumbnail files (<code class="literal">DS_STORE</code> or <code class="literal">Thumbs.db</code>).</p></div></li><li><p>Open<a id="id1122" class="indexterm"></a> <span class="strong"><strong>Editor Settings</strong></span> in the<a id="id1123" class="indexterm"></a> <span class="strong"><strong>Inspector</strong></span> by navigating to <span class="strong"><strong>Edit</strong></span> | <span class="strong"><strong>Project Settings</strong></span> | <span class="strong"><strong>Editor</strong></span>.</p></li><li><p>In the <span class="strong"><strong>Editor Settings</strong></span>, set<a id="id1124" class="indexterm"></a> the <span class="strong"><strong>Version Control Mode</strong></span> to <span class="strong"><strong>Visible Meta Files</strong></span>.</p></li><li><p>In the <span class="strong"><strong>Editor Settings</strong></span>, set<a id="id1125" class="indexterm"></a> the <span class="strong"><strong>Asset Serialization Mode</strong></span> to <span class="strong"><strong>Force Text</strong></span>.</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_10_15.jpg" /></div></li><li><p>Save your project so that these new settings are stored. Then, close the Unity application.</p></li><li><p>Log on to your GitHub account.</p></li><li><p>On your <a id="id1126" class="indexterm"></a>GitHub home page, click on the green <span class="strong"><strong>New</strong></span> button to start creating a new repository.</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_10_16.jpg" /></div></li><li><p>Give your<a id="id1127" class="indexterm"></a> new repository<a id="id1128" class="indexterm"></a> a name (we chose <span class="strong"><strong>matt-mac-man</strong></span>) and check the <span class="strong"><strong>Initialize this repository with a README</strong></span> option.</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_10_17.jpg" /></div></li><li><p>Startup your<a id="id1129" class="indexterm"></a> GitHub client application on your computer, and get a list of the repositories to clone to the<a id="id1130" class="indexterm"></a> local computer by navigating to <span class="strong"><strong>File</strong></span> | <span class="strong"><strong>Clone Repository ..</strong></span>. From the list provided, select <a id="id1131" class="indexterm"></a>your new repository (for us, it was matt-mac-man) and click on the <span class="strong"><strong>Clone</strong></span> button to this repository.</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_10_18.jpg" /></div></li><li><p>You'll be <a id="id1132" class="indexterm"></a>asked where to store this repository on your local computer (we simply chose our <span class="strong"><strong>Desktop</strong></span>). You will<a id="id1133" class="indexterm"></a> now see a folder with the repository name on your computer's disk, containing<a id="id1134" class="indexterm"></a> a hidden <code class="literal">.git</code> folder, and a single file named <code class="literal">README.md</code>.</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_10_19.jpg" /></div></li><li><p>Now, copy to this<a id="id1135" class="indexterm"></a> local repository folder the following files and folders from your Unity project:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>
<code class="literal">.gitignore</code>
</p></li><li><p>
<code class="literal">/Assets</code>
</p></li><li><p>
<code class="literal">/Library</code>
</p></li><li><p>
<code class="literal">/ProjectSettings</code>
</p></li></ol></div><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_10_20.jpg" /></div></li><li><p>In your GitHub client application, you will now see lots of <span class="strong"><strong>Uncommitted Changes</strong></span>. Type<a id="id1136" class="indexterm"></a> in a short comment <a id="id1137" class="indexterm"></a>for your first commit (we typed our standard—<code class="literal">v0.1 – first commit</code>), and click on the<a id="id1138" class="indexterm"></a> <span class="strong"><strong>Commit &amp; Sync</strong></span> to push the contents of this Unity project folder up to your GitHub account repository.</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_10_21.jpg" /></div></li><li><p>Now, if you<a id="id1139" class="indexterm"></a> visit your GitHub project page, you will see that all these Unity project files are available for<a id="id1140" class="indexterm"></a> download for people's computers either as a ZIP archive, or to be cloned using a Git client.</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_10_22.jpg" /></div></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec324"></a>How it works...</h3></div></div></div><p>The special<a id="id1141" class="indexterm"></a> file called <code class="literal">.gitngnore</code> lists all the files and directories that are <span class="emphasis"><em>not</em></span> to be archived.</p><p>Changing the Unity <span class="strong"><strong>Editor Settings</strong></span> for <span class="strong"><strong>Version Control Mode</strong></span> to <span class="strong"><strong>Meta Files</strong></span> ensures that Unity stores the required housekeeping data for each asset in its associated meta file. Selecting <span class="strong"><strong>Visible</strong></span> rather<a id="id1142" class="indexterm"></a> than <span class="strong"><strong>Hidden</strong></span> simply avoids any confusion as to whether GIT will record the meta files or not—GIT will record them whether visible or not. So, by making them visible, it is obvious to the developers working with the files that they will be included.</p><p>Changing the Unity<a id="id1143" class="indexterm"></a> <span class="strong"><strong>Editor Settings</strong></span> for <span class="strong"><strong>Asset Serialization Mode</strong></span> to <span class="strong"><strong>Force Text</strong></span> attempts to solve some of the difficulties of managing changes with the large binary files. Unity projects tend to have quite a few binary files, such as the <code class="literal">.unity</code> scene files, prefabs, and so on. There seems to be some debate about the best setting that should be used; we have found that <span class="strong"><strong>Force Text</strong></span> works fine and so, we will use this at present. You'll see two commits on GitHub, since the very first was<a id="id1144" class="indexterm"></a> when we created the new repository, and the second was our first commit of the<a id="id1145" class="indexterm"></a> repository using the GitHub client, when we added all of our code into the local repository and pushed (committed) it to the remote server.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec325"></a>There's more...</h3></div></div></div><p>There are<a id="id1146" class="indexterm"></a> some details that you don't want to<a id="id1147" class="indexterm"></a> miss.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch10lvl3sec83"></a>Learn more about Distributed Version Control Systems (DVCS)</h4></div></div></div><p>The following video<a id="id1148" class="indexterm"></a> link is a short introduction<a id="id1149" class="indexterm"></a> to DVCS:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<a class="ulink" href="http://youtu.be/1BbK9o5fQD4" target="_blank">http://youtu.be/1BbK9o5fQD4</a>
</p></li></ul></div><p>Note that the Fogcreek Kiln "harmony" feature now allows seamless work between GIT and Mercurial with the same Kiln repository:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<a class="ulink" href="http://blog.fogcreek.com/kiln-harmony-internals-the-basics/" target="_blank">http://blog.fogcreek.com/kiln-harmony-internals-the-basics/</a>
</p></li></ul></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch10lvl3sec84"></a>Using Bitbucket and SourceTree</h4></div></div></div><p>If you prefer to<a id="id1150" class="indexterm"></a> use Bitbucket and SourceTree with your Unity projects, you can find a good tutorial <a id="id1151" class="indexterm"></a>at the following URL:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<a class="ulink" href="http://yeticrabgames.blogspot.ie/2014/02/using-git-with-unity-without-using.html" target="_blank">http://yeticrabgames.blogspot.ie/2014/02/using-git-with-unity-without-using.html</a>
</p></li></ul></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch10lvl3sec85"></a>Using the command line rather than Git-client application</h4></div></div></div><p>While for many, using a GUI client, such as the GitHub application, is a gentler introduction to using DVCS, at some point, you'll want to learn more and get to grips with working in the command line.</p><p>Since both Git and <a id="id1152" class="indexterm"></a>Mercurial are open source, there are lots of great, free online resources available. The following are some good sources to get started on:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Learn all about Git, download free GUI clients, and even get free online access to The Pro Git book (by Scott Chacon), available through Creative Commons license at<a id="id1153" class="indexterm"></a> the following URL:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<a class="ulink" href="http://git-scm.com/book" target="_blank">http://git-scm.com/book</a>
</p></li></ul></div></li><li style="list-style-type: disc"><p>You will find an online interactive Git command line to practice in:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<a class="ulink" href="https://try.github.io/levels/1/challenges/1" target="_blank">https://try.github.io/levels/1/challenges/1</a>
</p></li></ul></div></li><li style="list-style-type: disc"><p>The main Mercurial website, including free online access to the <span class="emphasis"><em>Mercurial: The Definitive Guide</em></span> (by Bryan O'Sullivan) book is available through the Open Publication <a id="id1154" class="indexterm"></a>License at:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<a class="ulink" href="http://mercurial.selenic.com/" target="_blank">http://mercurial.selenic.com/</a>
</p></li></ul></div></li><li style="list-style-type: disc"><p>SourceTree is a free Mercurial and Git GUI client, available at:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<a class="ulink" href="http://www.sourcetreeapp.com/" target="_blank">http://www.sourcetreeapp.com/</a>
</p></li></ul></div></li></ul></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec326"></a>See also</h3></div></div></div><p>Refer to the following recipe for more information:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="emphasis"><em>Publishing for multiple devices via Unity Cloud</em></span>
</p></li></ul></div></div></div>