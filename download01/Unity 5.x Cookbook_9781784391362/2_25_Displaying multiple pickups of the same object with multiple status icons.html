<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec31"></a>Displaying multiple pickups of the same object with multiple status icons</h2></div></div><hr /></div><p>If there is a small, fixed total number of an item to be collected rather than text totals, an alternative effective UI approach is to display placeholder icons (empty or greyed out pictures) to show the user how many of the item remain to be collected, and each time an item is picked up, a<a id="id216" class="indexterm"></a> placeholder icon is replaced by a full color collected icon.</p><p>In this recipe, we use grey-filled star icons as the placeholders and yellow-filled star icons to indicate each collected star, as shown in the following screenshot.</p><p>Since our UI code is getting a little more complicated, this recipe will implement the MVC design pattern to separate the view code from the core player logic (as introduced at the end of recipe <span class="emphasis"><em>Displaying single object pickups with carrying and not-carrying text</em></span>).</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_02_16.jpg" /></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec78"></a>Getting ready</h3></div></div></div><p>This recipe assumes that you are starting with the project <code class="literal">Simple2Dgame_SpaceGirl</code> setup from the first recipe in this chapter.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec79"></a>How to do it...</h3></div></div></div><p>To display multiple<a id="id217" class="indexterm"></a> inventory icons for multiple pickups of same type of object, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Start with a new copy of the mini-game <code class="literal">Simple2Dgame_SpaceGirl</code>.</p></li><li><p>Add the following C# Script <code class="literal">Player</code> to GameObject <code class="literal">player-SpaceGirl</code> in the <span class="strong"><strong>Hierarchy</strong></span>:</p><div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;
using UnityEngine.UI;

public class Player : MonoBehaviour {
  private PlayerInventoryDisplay playerInventoryDisplay;
  private int totalStars = 0;
  
  void Start(){
    playerInventoryDisplay = GetComponent&lt;PlayerInventoryDisplay&gt;();
  }
  
  void OnTriggerEnter2D(Collider2D hit){
    if(hit.CompareTag("Star")){
      totalStars++;
  playerInventoryDisplay.OnChangeStarTotal(totalStars);
      Destroy(hit.gameObject);
    }
  }
}</pre></div></li><li><p>Select GameObject <code class="literal">star</code> in the <span class="strong"><strong>Hierarchy</strong></span> panel and make three more copies of this GameObject (Windows <span class="emphasis"><em>CTRL</em></span> + <span class="emphasis"><em>D</em></span> / Mac <span class="emphasis"><em>CMD</em></span> + <span class="emphasis"><em>D</em></span>).</p></li><li><p>Move these new GameObject to different parts of the screen.</p></li><li><p>Add the following C# Script <code class="literal">PlayerInventoryDisplay</code> to the GameObject <code class="literal">player-SpaceGirl</code> in the <span class="strong"><strong>Hierarchy:</strong></span>
</p><div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;
using UnityEngine.UI;

public class PlayerInventoryDisplay : MonoBehaviour
{
  public Image[] starPlaceholders;

  public Sprite iconStarYellow;
  public Sprite iconStarGrey;

  public void OnChangeStarTotal(int starTotal){
    for (int i = 0;i &lt; starPlaceholders.Length; ++i){
    if (i &lt; starTotal)
        starPlaceholders[i].sprite = iconStarYellow;
      else
        starPlaceholders[i].sprite = iconStarGrey;
    }
  }
}</pre></div></li><li><p>Select the <span class="strong"><strong>Canvas</strong></span> in the <span class="strong"><strong>Hierarchy</strong></span> panel and add a new UI Image object (<span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Image</strong></span>). Rename it <code class="literal">Image-star0</code>.</p></li><li><p>Select <code class="literal">Image-star0</code> in the <span class="strong"><strong>Hierarchy</strong></span> panel.</p></li><li><p>From the <span class="strong"><strong>Project</strong></span> <a id="id218" class="indexterm"></a>panel, drag the sprite <code class="literal">icon_star_grey_100</code> (folder <code class="literal">Sprites</code>) into the <span class="strong"><strong>Source Image</strong></span> field in the <span class="strong"><strong>Inspector</strong></span> for the <span class="strong"><strong>Image</strong></span> component.</p></li><li><p>Click on the <span class="strong"><strong>Set Native Size</strong></span> button for this for the <span class="strong"><strong>Image</strong></span> component. This will resize the UI <span class="strong"><strong>Image</strong></span> to fit the physical pixel width and height of sprite file <code class="literal">icon_star_grey_100</code>.</p></li><li><p>Now we will position our icon at the <span class="strong"><strong>top </strong></span>and <span class="strong"><strong>left</strong></span> of the <span class="strong"><strong>Game</strong></span> panel. Edit the UI <span class="strong"><strong>Image's Rect Transform</strong></span> component, and while holding down <span class="emphasis"><em>SHIFT</em></span> and <span class="emphasis"><em>ALT</em></span> (to set pivot and position), choose the top-left box. The UI <span class="strong"><strong>Image</strong></span> should now be positioned at the top left of the <span class="strong"><strong>Game</strong></span> panel.</p></li><li><p>Make three more copies of <code class="literal">Image-star0</code> in the <span class="strong"><strong>Hierarchy</strong></span> panel, naming them <code class="literal">Image-star1</code>, <code class="literal">Image-star2</code>, and <code class="literal">Image-star3</code>.</p></li><li><p>In the <span class="strong"><strong>Inspector</strong></span> panel, change the <span class="strong"><strong>Pos X</strong></span> position (in the <span class="strong"><strong>Rect Transform</strong></span> component) of <code class="literal">Image-star1</code> to <code class="literal">100</code>, of <code class="literal">Image-star2</code> to <code class="literal">200</code>, and of <code class="literal">Image-star3</code> to <code class="literal">100</code>, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_02_17.jpg" /></div></li><li><p>From the <span class="strong"><strong>Hierarchy</strong></span> view, select the GameObject <code class="literal">player-SpaceGirl</code>. Then, from the <span class="strong"><strong>Inspector</strong></span>, access the <span class="strong"><strong>Player Inventory Display (Script)</strong></span> component and set the <span class="strong"><strong>Size</strong></span> property of public field <span class="strong"><strong>Star Playholders</strong></span> to <code class="literal">4</code>.</p></li><li><p>Next, populate<a id="id219" class="indexterm"></a> the <span class="strong"><strong>Element 0/1/2/3 </strong></span>array values of public field <span class="strong"><strong>Star Playholders </strong></span>with UI <span class="strong"><strong>Image</strong></span> objects <code class="literal">Image-star0/1/2/3</code>.</p></li><li><p>Now, populate the <span class="strong"><strong>Icon Star Yellow</strong></span> and <span class="strong"><strong>Icon Star Grey</strong></span> public fields from the <span class="strong"><strong>Project</strong></span> panel with sprite <code class="literal">icon_star_100</code> and <code class="literal">icon_star_grey_100</code>, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_02_18.jpg" /></div></li><li><p>Now, when you play the scene, you should see the sequence of four grey placeholder star icons initially, and each time you collide with a star, the next icon at the top should turn yellow.</p></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec80"></a>How it works...</h3></div></div></div><p>Four UI <span class="strong"><strong>Image</strong></span> objects <code class="literal">Image-star0/1/2/3 </code>have been created at the top of the screen, initialized with the<a id="id220" class="indexterm"></a> grey placeholder icon. The grey and yellow icon sprite files have been resized to be 100 x 100 pixels, making their arrangement horizontal positioning at design time easier, since their positions are (0,0), (100, 0), (200, 0), and (300,0). In a more complicated game screen, or one where real estate is precious, the actual size of the icons would probably be smaller and whatever the game graphic designer decides.</p><p>The <code class="literal">int</code> variable <code class="literal">totalStars</code> represents how many stars have been collected so far; it is initialized to zero. The <code class="literal">PlayerInventoryDisplay</code> variable <code class="literal">playerInventory</code> is a reference to the scripted component that manages our inventory display—this variable is set when the scene begins to run in the <code class="literal">Start()</code> method.</p><p>In the <code class="literal">OnTriggerEnter2D()</code>method, the <code class="literal">totalStars</code> counter is incremented by 1 each time the player's character hits an object tagged <span class="strong"><strong>Star</strong></span>. As well as destroying the hit GameObject, the <code class="literal">OnChangeStarTotal(…)</code> method of the <code class="literal">PlayerInventoryDisplay</code> component is called, passing the new star total integer.</p><p>The <code class="literal">OnChangeStarTotal(…)</code>method of script class <code class="literal">PlayerInventoryDisplay</code> has references to the four UI <span class="strong"><strong>Images</strong></span>, and loops through each item in the array of Image references, setting the given number of Images to yellow, and the remaining to grey. This method is public, allowing it to be called<a id="id221" class="indexterm"></a> from an instance of script class <code class="literal">Player</code>.</p><p>As can be seen, the code in script class <code class="literal">Player</code> is still quite straightforward since we have moved all of the inventory UI logic to its own class, <code class="literal">PlayerInventory</code>.</p></div></div>