<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch06lvl1sec66"></a>Setting up an environment with Procedural Skybox and Directional Light</h2></div></div><hr /></div><p>Besides the<a id="id603" class="indexterm"></a> traditional 6 Sided and Cubemap, Unity now features a third type of skybox: the <span class="strong"><strong>Procedural Skybox</strong></span>. Easy to create and setup, the <a id="id604" class="indexterm"></a><span class="strong"><strong>Procedural Skybox</strong></span> can be used in conjunction with a<a id="id605" class="indexterm"></a> <span class="strong"><strong>Directional Light</strong></span> to provide <span class="strong"><strong>Environment Lighting</strong></span> to your scene. In this recipe, we will learn about different<a id="id606" class="indexterm"></a> parameters of the <span class="strong"><strong>Procedural Skybox</strong></span>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec186"></a>Getting ready</h3></div></div></div><p>For this recipe, you will need to import Unity's Standard Assets Effects package, which you should have installed when installing Unity.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec187"></a>How to do it...</h3></div></div></div><p>To set up an <a id="id607" class="indexterm"></a><span class="strong"><strong>Environment Lighting</strong></span> using the <span class="strong"><strong>Procedural Skybox</strong></span> and <span class="strong"><strong>Directional Light</strong></span>, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Create a new<a id="id608" class="indexterm"></a> scene inside a Unity project. Observe that a new scene already includes two objects: the <span class="strong"><strong>Main Camera</strong></span> and a <span class="strong"><strong>Directional Light</strong></span>.</p></li><li><p>Add some <a id="id609" class="indexterm"></a>cubes to your scene, including one at <span class="strong"><strong>Position X</strong></span>: <code class="literal">0</code>; <span class="strong"><strong>Y</strong></span>: <code class="literal">0</code>; <span class="strong"><strong>Z</strong></span>: <code class="literal">0</code> scaled to <span class="strong"><strong>X</strong></span>: <code class="literal">20</code>; <span class="strong"><strong>Y</strong></span>: <code class="literal">1</code>; <span class="strong"><strong>Z</strong></span>: <code class="literal">20</code>, which is to be used as the ground, as shown:</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362_06_24.jpg" /></div></li><li><p>Using the<a id="id610" class="indexterm"></a> <span class="strong"><strong>Create</strong></span> drop-down menu from the <span class="strong"><strong>Project</strong></span> view, create a new Material and name it <code class="literal">MySkybox</code>. From the <span class="strong"><strong>Inspector</strong></span> view, use the appropriate drop-down menu to change the <span class="strong"><strong>Shader</strong></span> of <span class="strong"><strong>MySkybox</strong></span> from <span class="strong"><strong>Standard</strong></span> to <span class="strong"><strong>Skybox/Procedural</strong></span>.</p></li><li><p>Open the <span class="strong"><strong>Lighting</strong></span> window (menu <span class="strong"><strong>Window</strong></span> | <span class="strong"><strong>Lighting</strong></span>), access the <span class="strong"><strong>Scene</strong></span> section. At the <span class="strong"><strong>Environment Lighting</strong></span> subsection, populate the <span class="strong"><strong>Skybox</strong></span> slot with the <span class="strong"><strong>MySkybox</strong></span> material, and the <span class="strong"><strong>Sun</strong></span> slot with the <span class="strong"><strong>Directional Light</strong></span> from the <span class="strong"><strong>Scene</strong></span>.</p></li><li><p>From the <a id="id611" class="indexterm"></a><span class="strong"><strong>Project</strong></span> view, select <span class="strong"><strong>MySkybox</strong></span>. Then, from the <span class="strong"><strong>Inspector</strong></span> view, set <span class="strong"><strong>Sun size</strong></span> as <code class="literal">0.05</code> and <span class="strong"><strong>Atmosphere Thickness</strong></span> as <code class="literal">1.4</code>. Experiment by changing the <span class="strong"><strong>Sky Tint</strong></span> color to RGB: <code class="literal">148</code>; <code class="literal">128</code>; <code class="literal">128</code>, and the <span class="strong"><strong>Ground</strong></span> color to a value that resembles the scene cube floor's color (such as RGB: <code class="literal">202</code>; <code class="literal">202</code>; <code class="literal">202</code>). If you<a id="id612" class="indexterm"></a> feel the scene is too bright, try bringing the <span class="strong"><strong>Exposure</strong></span> level down to <code class="literal">0.85</code>, shown as follows:</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362_06_25.jpg" /></div></li><li><p>Select the<a id="id613" class="indexterm"></a> <span class="strong"><strong>Directional Light</strong></span> and change its <span class="strong"><strong>Rotation</strong></span> to <span class="strong"><strong>X</strong></span>: <code class="literal">5</code>; <span class="strong"><strong>Y</strong></span>: <code class="literal">170</code>; <span class="strong"><strong>Z</strong></span>: <code class="literal">0</code>. Note that the scene<a id="id614" class="indexterm"></a> should resemble a dawning environment, something like the following scene:</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362_06_26.jpg" /></div></li><li><p>Let's make things even more interesting. Using the <span class="strong"><strong>Create</strong></span> drop-down menu in the <span class="strong"><strong>Project</strong></span> view, create a new C# Script named <code class="literal">RotateLight</code>. Open your script and replace everything with the following code:</p><div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;
public class RotateLight : MonoBehaviour {
  public float speed = -1.0f;
  void Update () {
    transform.Rotate(Vector3.right * speed * Time.deltaTime);
  }
}</pre></div></li><li><p>Save it <a id="id615" class="indexterm"></a>and add it as<a id="id616" class="indexterm"></a> a component to the <span class="strong"><strong>Directional Light</strong></span>.</p></li><li><p>Import the <span class="strong"><strong>Effects</strong></span> Assets <a id="id617" class="indexterm"></a>package into your project (via the <span class="strong"><strong>Assets</strong></span> | <span class="strong"><strong>Import Package</strong></span> | <span class="strong"><strong>Effects </strong></span>menu).</p></li><li><p>Select the <span class="strong"><strong>Directional Light</strong></span>. Then, from <span class="strong"><strong>Inspector</strong></span> view, <span class="strong"><strong>Light</strong></span> component, populate the <span class="strong"><strong>Flare</strong></span> slot with the <code class="literal">Sun</code> flare.</p></li><li><p>From the <span class="strong"><strong>Scene</strong></span> section<a id="id618" class="indexterm"></a> of the <span class="strong"><strong>Lighting</strong></span> window, find the <span class="strong"><strong>Other Settings</strong></span> subsection. Then, set <span class="strong"><strong>Flare Fade Speed</strong></span> as <code class="literal">3</code> and <span class="strong"><strong>Flare Strength</strong></span> as <code class="literal">0.5</code>, shown as follows:</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362_06_27.jpg" /></div></li><li><p>Play the scene. You <a id="id619" class="indexterm"></a>will see the<a id="id620" class="indexterm"></a> sun rising and the Skybox colors changing accordingly.</p></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec188"></a>How it works...</h3></div></div></div><p>Ultimately, the <a id="id621" class="indexterm"></a>appearance of Unity's native Procedural Skyboxes depends on the five parameters that make them up:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Sun size</strong></span>: The size of<a id="id622" class="indexterm"></a> the bright yellow sun that is drawn onto the skybox is located according to the <span class="strong"><strong>Directional Light</strong></span>'s <span class="strong"><strong>Rotation</strong></span> on the <span class="emphasis"><em>X</em></span> and <span class="emphasis"><em>Y</em></span> axes.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Atmosphere Thickness</strong></span>: This<a id="id623" class="indexterm"></a> simulates how dense the atmosphere is for this skybox. Lower values (less than <code class="literal">1.0</code>) are good for simulating the outer space settings. Moderate values (around <code class="literal">1.0</code>) are suitable for the earth-based environments. Values that are slightly above <code class="literal">1.0</code> can be useful when simulating air pollution and other dramatic settings. Exaggerated values (like more than <code class="literal">2.0</code>) can help to illustrate extreme conditions or even alien settings.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Sky Tint</strong></span>: It is the color that is <a id="id624" class="indexterm"></a>used to tint the skybox. It is useful for fine-tuning or creating stylized environments.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Ground</strong></span>: This is the color <a id="id625" class="indexterm"></a>of the ground. It can really affect the <span class="strong"><strong>Global Illumination</strong></span> of the scene. So, choose a value that is close to the level's terrain and/or geometry (or a neutral one).</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Exposure</strong></span>: This <a id="id626" class="indexterm"></a>determines the amount of light that gets in the skybox. The higher levels <a id="id627" class="indexterm"></a>simulate overexposure, while the lower values simulate underexposure.</p></li></ul></div><p>It is important to notice that the <span class="strong"><strong>Skybox</strong></span> appearance will respond to the scene's <span class="strong"><strong>Directional Light</strong></span>, playing the role of the <span class="strong"><strong>Sun</strong></span>. In this case, rotating the light around its <span class="emphasis"><em>X</em></span> axis can create dawn and sunset scenarios, whereas rotating it around its <span class="emphasis"><em>Y</em></span> axis will change the position of the sun, changing the cardinal points of the scene.</p><p>Also, regarding the <span class="strong"><strong>Environment Lighting</strong></span>, note that although we have used the <span class="strong"><strong>Skybox</strong></span> as the <span class="strong"><strong>Ambient Source</strong></span>, we could have chosen a <span class="strong"><strong>Gradient</strong></span> or a single <span class="strong"><strong>Color</strong></span> instead—in which case, the scene's illumination wouldn't be attached to the Skybox appearance.</p><p>Finally, also regarding the <span class="strong"><strong>Environment Lighting</strong></span>, please note that we have set the <span class="strong"><strong>Ambient GI</strong></span> to <span class="strong"><strong>Realtime</strong></span>. The reason for this was to allow the real-time changes in the GI, promoted by the rotating <span class="strong"><strong>Directional Light</strong></span>. In case we didn't need these changes at runtime, we could have chosen the <span class="strong"><strong>Baked</strong></span> alternative.</p></div></div>