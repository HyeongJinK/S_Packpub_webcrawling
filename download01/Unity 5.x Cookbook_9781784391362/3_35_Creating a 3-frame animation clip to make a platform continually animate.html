<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec40"></a>Creating a 3-frame animation clip to make a platform continually animate</h2></div></div><hr /></div><p>In this recipe, we'll make<a id="id282" class="indexterm"></a> a wooden-looking platform continually animate, moving upwards and downwards. This can be achieved with a single, 3-frame, animation clip (starting at top, position at bottom, top position again).</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_03_02.jpg" /></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec102"></a>Getting ready</h3></div></div></div><p>This recipe builds on the previous one, so make a copy of that project, and work on the copy for this recipe.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec103"></a>How to do it...</h3></div></div></div><p>To create a continually<a id="id283" class="indexterm"></a> moving animated platform, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Drag an instance of the sprite <span class="strong"><strong>platformWoodBlocks</strong></span> from the <span class="strong"><strong>Project | Sprites</strong></span> folder into the scene. Position this GameObject at (<code class="literal">-4</code>, <code class="literal">-5</code>, <code class="literal">0</code>), so that these wood blocks are neatly to left, and slightly below, the wall blocks platform.</p></li><li><p>Add a Box Collider 2D component to GameObject <span class="strong"><strong>platformWoodBlocks</strong></span> so that the player's character can stand on this platform too. Choose menu: <span class="strong"><strong>Add Component</strong></span> | <span class="strong"><strong>Physics 2D</strong></span> | <span class="strong"><strong>Box Collider 2D</strong></span>.</p></li><li><p>Create a new folder named <code class="literal">Animations</code>, in which to store the animation clip and controller we'll create next.</p></li><li><p>Ensuring GameObject <span class="strong"><strong>platformWoodBlocks</strong></span> is still selected in the <span class="strong"><strong>Hierarchy</strong></span>, open an <span class="strong"><strong>Animation</strong></span> panel, and ensure it is in <span class="strong"><strong>Dope Sheet</strong></span> view (this is the default).</p></li><li><p>Click the empty dropdown menu in the <span class="strong"><strong>Animation</strong></span> panel (next to the greyed out word 'Samples'), and choose menu item <span class="strong"><strong>[Create New Clip]</strong></span>.</p></li><li><p>Save the new clip in your <span class="strong"><strong>Animations</strong></span> folder, naming it '<span class="strong"><strong>platform-wood-moving-up-down</strong></span>'.</p></li><li><p>Click button <span class="strong"><strong>Add Curve</strong></span>, and chose <span class="strong"><strong>Transform</strong></span> and the click the '<span class="strong"><strong>+</strong></span>' plus-sign by <span class="strong"><strong>Position</strong></span>. We are now recording changes to the (X, Y, Z) position of GameObject <span class="strong"><strong>platformWoodBlocks</strong></span> in this animation clip.</p></li><li><p>You should now see 2 'keyframes' at 0.0 and at 1.0. These are indicated by diamonds in the <span class="strong"><strong>Timeline</strong></span> area in the right-hand-section of the <span class="strong"><strong>Animation</strong></span> panel.</p></li><li><p>We need 3 keyframes, with the new one at <span class="strong"><strong>2:00</strong></span> seconds. Click at <span class="strong"><strong>2:00</strong></span> in the Timeline along the top of the <span class="strong"><strong>Animation</strong></span> panel, so that the red line for the current playhead time is at time 2:00. Then click diamond+ button to create a new keyframe at the current playhead time:</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_03_08.jpg" /></div></li><li><p>The first and third keyframes are fine – they record the current height of the wood platform at Y= <code class="literal">-5</code>. We need to make the middle keyframe record the height <a id="id284" class="indexterm"></a>of the platform at the top of its motion, and Unity in-betweening will do all the rest of the animation work for us. Select the middle keyframe (at time 1:00), by clicking on either diamond at time 1:00 (they should both turn blue, and the red playhead vertical line should move to 1:00, to indicate the middle keyframe is being edited).</p></li><li><p>Now in the <span class="strong"><strong>Inspector</strong></span> change the Y position of the platform to 0. You should see that all three X, Y, Z values have a red background in the <span class="strong"><strong>Inspector</strong></span> – this is to inform you that the values of the <span class="strong"><strong>Transform</strong></span> component are being recorded in the animation clip.</p></li><li><p>Save and run your scene. The wooden platform should now be animating continuously, moving smoothly up and down the positions we setup.</p></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec104"></a>How it works...</h3></div></div></div><p>You have added an animation to GameObject <span class="strong"><strong>platformWoodBlocks</strong></span>. This animation contains three keyframes. A keyframe represents the values of properties of the object at a point in time. The first keyframe stores a Y-value of -4, the second keyframe a Y-value of 0, and the final keyframe -4 again. Unity calculates all the in-between values for us, and the result is a smooth animation of the Y-position of the platform.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note30"></a>Note</h3><p>Note: If we wanted to duplicate the moving platform, first we'd need to create a new, empty GameObject named movingBlockParent, and then parent platformWoodBlocks to this GameObject. Duplicating GameObject movingBlockParent would then allow us to create more moving blocks in our scene. If we simply duplicated platformWoodBlocks directly, then when the scene runs each duplicate would be animated back to the location of the original animation frames (that is, all copies would be positioned and moving in the original location).</p></div></div></div>