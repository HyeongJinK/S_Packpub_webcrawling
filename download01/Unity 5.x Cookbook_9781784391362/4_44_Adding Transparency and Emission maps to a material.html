<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec48"></a>Adding Transparency and Emission maps to a material</h2></div></div><hr /></div><p>The <span class="strong"><strong>Emission</strong></span> property can be used to simulate a variety of self-illuminated objects, from the LEDs of mobile displays to futuristic Tron suits. <span class="strong"><strong>Transparency</strong></span>, on the other hand, can make the diffuse color of a material more or less visible. In this recipe, you will learn how to configure these<a id="id384" class="indexterm"></a> properties to produce a toy's cardboard packaging that features a plastic case and glow-in-the-dark text.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec124"></a>Getting ready</h3></div></div></div><p>For this recipe, we have<a id="id385" class="indexterm"></a> prepared a Unity package containing a prefab made of a 3D object, its material, and its respective diffused texture map (in PNG format). All files are in the <code class="literal">1362_04_04</code> folder.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec125"></a>How to do it...</h3></div></div></div><p>To add transparency and color emissions to a material, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Import <code class="literal">TransparencyEmission.unitypackage</code> to your project. Select the <code class="literal">DIFF_package</code> texture from the <code class="literal">Assets</code> folder, in the <span class="strong"><strong>Project</strong></span> view. Then, open it in your image editor.</p></li><li><p>First, we will add transparency to the image by deleting the white areas around the package (and the hang hole). Make a selection of those areas (in Photoshop, this can be done <a id="id386" class="indexterm"></a>with the <span class="strong"><strong>Magic Wand</strong></span> Tool).</p></li><li><p>Make sure you unlock the <span class="strong"><strong>Background</strong></span> layer by clicking on the lock icon, to the left of the layer's name, as shown below:</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_04_21.jpg" /></div></li><li><p>Delete the previously-made selection (this can be done in Photoshop by pressing the <span class="emphasis"><em>Delete</em></span> key). The <a id="id387" class="indexterm"></a>background of the image should be transparent, as shown below. Save the file:</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_04_22.jpg" /></div></li><li><p>Back in <a id="id388" class="indexterm"></a>Unity, in the <span class="strong"><strong>Assets</strong></span> folder, expand the <span class="strong"><strong>packagePrefab</strong></span> list and select the <span class="strong"><strong>PackageCard</strong></span> object. Now, in the <span class="strong"><strong>Inspector</strong></span> view, scroll down to the <span class="strong"><strong>Material</strong></span> component and change its <span class="strong"><strong>Rendering Mode</strong></span> to <span class="strong"><strong>Cutout</strong></span>, and adjust its <span class="strong"><strong>Alpha Cutoff</strong></span> to <code class="literal">0.9</code>:</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_04_23.jpg" /></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip06"></a>Tip</h3><p>Choosing <span class="strong"><strong>Cutout</strong></span> <a id="id389" class="indexterm"></a>means that your material can be either invisible or fully visible, not allowing for semi-transparency. The <a id="id390" class="indexterm"></a><span class="strong"><strong>Alpha Cutoff</strong></span> is used to get rid of unwanted pixels around the transparent borders.</p></div></li><li><p>From the <a id="id391" class="indexterm"></a>expanded <span class="strong"><strong>packagePrefab</strong></span>, select the <span class="strong"><strong>PackagePlastic</strong></span> object. In the <span class="strong"><strong>Inspector</strong></span> view, scroll down to the <span class="strong"><strong>Material</strong></span> component and<a id="id392" class="indexterm"></a> change its <span class="strong"><strong>Rendering Mode</strong></span> to <span class="strong"><strong>Transparent</strong></span>. Then, use the <span class="strong"><strong>Diffuse</strong></span> color picker to change the color's <span class="strong"><strong>RGB</strong></span> values to <code class="literal">56</code>, and <span class="strong"><strong>Alpha</strong></span> to <code class="literal">25</code>. Also, change the <span class="strong"><strong>Smoothness</strong></span> level to <code class="literal">0.9</code>:</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_04_24.jpg" /></div></li><li><p>Now that we have taken care of our transparency needs, we need to work on the <span class="strong"><strong>Emission</strong></span> map. From the <span class="strong"><strong>Assets</strong></span> folder, duplicate the <code class="literal">DIFF_package</code> texture, rename it <code class="literal">EMI_package</code>, and open it in your image editor.</p></li><li><p>Select all the characters from the <span class="strong"><strong>Ms. Laser</strong></span> inscription and the green star (in Photoshop, this can be done with the Magic Wand tool, keeping the <span class="emphasis"><em>Shift</em></span> key pressed while selecting multiple areas).</p></li><li><p>Copy and paste your selection into a new layer. Then, select it and apply a Noise filter to it (in Photoshop, this can be done by navigating to <span class="strong"><strong>Filter</strong></span> | <span class="strong"><strong>Noise</strong></span> | <span class="strong"><strong>Add Noise...</strong></span>). Use <span class="strong"><strong>50%</strong></span> as the value.</p></li><li><p>Create a new<a id="id393" class="indexterm"></a> layer and, using a tool such as the <span class="strong"><strong>Paint Bucket</strong></span>, fill it with black (R: <code class="literal">0</code>, G: <code class="literal">0</code>, B: <code class="literal">0</code>). Place this black layer beneath the <a id="id394" class="indexterm"></a>one with the colored elements.</p></li><li><p>Flatten your image (in Photoshop this can be done by navigating to <span class="strong"><strong>Layer</strong></span> | <span class="strong"><strong>Flatten Image</strong></span>) and save your file:</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_04_25.jpg" /></div></li><li><p>Back in Unity, in the <span class="strong"><strong>Assets</strong></span> folder, expand <span class="strong"><strong>packagePrefab</strong></span> and select the <span class="strong"><strong>PackageCard</strong></span> object. Now, in the <span class="strong"><strong>Inspector</strong></span> view, scroll down to the <span class="strong"><strong>Material</strong></span> component and assign the <code class="literal">EMI_package</code> texture to its <span class="strong"><strong>Emission</strong></span> slot. Then, change the <span class="strong"><strong>Emission</strong></span> color slot to white (<span class="strong"><strong>R</strong></span>: <code class="literal">255</code>; <span class="strong"><strong>G</strong></span>: <code class="literal">255</code>; <span class="strong"><strong>B</strong></span>: <code class="literal">255</code>), and turn down its intensity to <code class="literal">0.25</code>, as shown in the following screenshot. Also, change its <span class="strong"><strong>GI</strong></span> option to <span class="strong"><strong>None</strong></span>, so that its glow won't be added to the Lightmaps or influence the illumination in real time:</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_04_26.jpg" /></div></li><li><p>Place an<a id="id395" class="indexterm"></a> instance of the <span class="strong"><strong>packagePrefab</strong></span> in <a id="id396" class="indexterm"></a>your scene and check out the results. Your material is ready:</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_04_27.jpg" /></div></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec126"></a>How it works...</h3></div></div></div><p>Unity is able to read four channels of a texture map: R (Red), G (Green), B (Blue) and A (Alpha). When set to <code class="literal">Transparent</code> or Cutout, the Alpha channel of the diffuse texture map sets the transparency of the material according to each pixel's brightness level (the <span class="strong"><strong>Cutout</strong></span> mode will not render semi-transparency—only fully visible or invisible pixels). You might have noticed that we didn't add an Alpha channel—this is because Photoshop exports the PNG's Alpha map, based on its transparency. To help you visualize the Alpha map, the <code class="literal">1362_04_04</code> folder contains a <code class="literal">DIFF_packageFinal.TIF</code> file featuring an Alpha map that works exactly in the same way as the PNG file that we have generated:</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_04_28.jpg" /></div><p>Regarding the<a id="id397" class="indexterm"></a> Emission texture map, Unity assigns its RGB colors to the material, combining them with the appropriate color selection slot, and also allowing<a id="id398" class="indexterm"></a> adjustments to the intensity of that Emission.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec127"></a>There's more...</h3></div></div></div><p>Let look at a little more information on Transparency and Emission.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl3sec30"></a>Using texture maps with Transparent Mode</h4></div></div></div><p>Please note that you can use a bitmap texture for the <span class="strong"><strong>Diffuse</strong></span> map in the <span class="strong"><strong>Transparent</strong></span> render mode. In this case, RGB <a id="id399" class="indexterm"></a>values will be interpreted as the Diffuse color, while the Alpha will be used to determine that pixel's transparency (in this case, semi-transparent materials are allowed).</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl3sec31"></a>Avoiding issues with the semi-transparent objects</h4></div></div></div><p>You might have<a id="id400" class="indexterm"></a> noticed that the plastic case was made from two objects (<span class="strong"><strong>PackagePlastic</strong></span> and <span class="strong"><strong>innerPlastic</strong></span>). This was done to avoid z-sorting problems, where faces are rendered in front of other geometry when they should be behind it. Having multiple meshes instead of a single one allows these faces to be correctly sorted for rendering. Materials in the <code class="literal">Cutout</code> mode are not affected by this problem, though.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl3sec32"></a>Emitting light over other objects</h4></div></div></div><p>The <span class="strong"><strong>Emission</strong></span><a id="id401" class="indexterm"></a> value can be used to calculate the material's light projection over other objects when using Lightmaps.</p></div></div></div>