<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch11lvl1sec108"></a>Pausing the game</h2></div></div><hr /></div><p>As compelling as<a id="id1165" class="indexterm"></a> your next game will be, you should always let players pause it for a short break. In this recipe, we will implement a simple and effective pause screen including controls for changing the display's quality settings.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch11lvl2sec333"></a>Getting ready</h3></div></div></div><p>For this recipe, we have prepared a package named <code class="literal">BallGame</code> containing a playable scene. The package is in the <code class="literal">1362_11_01</code> folder.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch11lvl2sec334"></a>How to do it...</h3></div></div></div><p>To pause<a id="id1166" class="indexterm"></a> your game upon pressing the <span class="emphasis"><em>Esc</em></span> key, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Import the <code class="literal">BallGame</code> package into your project and, from the <span class="strong"><strong>Project</strong></span> view, open the level named <code class="literal">BallGame_01</code>.</p></li><li><p>In the <span class="strong"><strong>Inspector</strong></span>, create a new tag <span class="strong"><strong>Ball</strong></span>, apply this tag to prefab <code class="literal">ball</code> in <code class="literal">Prefabs</code> folder, and save the scene.</p></li><li><p>From the <span class="strong"><strong>Hierarchy</strong></span> view, use the <span class="strong"><strong>Create</strong></span> drop-down menu to add a <span class="strong"><strong>Panel</strong></span> to the UI (<span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Panel</strong></span>). Note that it will automatically add it to the current <span class="strong"><strong>Canvas</strong></span> in the scene. Rename the panel <code class="literal">QualityPanel</code>.</p></li><li><p>Now use the <span class="strong"><strong>Create</strong></span> drop-down menu to add a <span class="strong"><strong>Slider</strong></span> to the UI (<span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Slider</strong></span>). Rename it <code class="literal">QualitySlider</code>.</p></li><li><p>Finally, use the <span class="strong"><strong>Create</strong></span> drop-down menu to add a <span class="strong"><strong>Text</strong></span> to the UI (<span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Text</strong></span>). Rename it <code class="literal">QualityLabel</code>. Also, from the <span class="strong"><strong>Inspector</strong></span> view, <span class="strong"><strong>Rect Transform</strong></span>, change its <span class="strong"><strong>Pos Y</strong></span> to <span class="strong"><strong>-25</strong></span>.</p></li><li><p>Add the following C# script <span class="strong"><strong>PauseGame</strong></span> to <span class="strong"><strong>First Person Controller</strong></span>:</p><div class="informalexample"><pre class="programlisting">using UnityEngine;
using UnityEngine.UI;
using System.Collections;

public class PauseGame : MonoBehaviour {
  public GameObject qPanel;
  public GameObject qSlider;
  public GameObject qLabel;
  public bool expensiveQualitySettings = true;
  private bool isPaused = false;

  void Start () {
    Cursor.visible = isPaused;
    Slider slider = qSlider.GetComponent&lt;Slider&gt; ();
    slider.maxValue = QualitySettings.names.Length;
    slider.value = QualitySettings.GetQualityLevel ();
    qPanel.SetActive(false);
  }

  void Update () {
    if (Input.GetKeyDown(KeyCode.Escape)) {
      isPaused = !isPaused;
      SetPause ();
    }
  }

  private void SetPause(){
    float timeScale = !isPaused ? 1f : 0f;
    Time.timeScale = timeScale;
    Cursor.visible = isPaused;
    GetComponent&lt;MouseLook&gt; ().enabled = !isPaused;
    qPanel.SetActive (isPaused);
  }

  public void SetQuality(float qs){
    int qsi = Mathf.RoundToInt (qs);
    QualitySettings.SetQualityLevel (qsi);
    Text label = qLabel.GetComponent&lt;Text&gt; ();
    label.text = QualitySettings.names [qsi];
  }
}</pre></div></li><li><p>From the <span class="strong"><strong>Hierarchy</strong></span> view, select the <span class="strong"><strong>First Person Controller</strong></span>. Then, from the <span class="strong"><strong>Inspector</strong></span>, access the <span class="strong"><strong>Pause Game</strong></span> component and populate the <span class="strong"><strong>QPanel</strong></span>, <span class="strong"><strong>QSlider</strong></span>, and<a id="id1167" class="indexterm"></a> <span class="strong"><strong>QLabel</strong></span> fields with the game objects <span class="strong"><strong>QualityPanel</strong></span>, <span class="strong"><strong>QualitySlider</strong></span>, and <span class="strong"><strong>QualityLabel</strong></span> respectively, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_11_01.jpg" /></div></li><li><p>From the <span class="strong"><strong>Hierarchy</strong></span> view, select <span class="strong"><strong>QualitySlider</strong></span>. Then, from the <span class="strong"><strong>Inspector</strong></span> view, <span class="strong"><strong>Slider</strong></span> component, find the list named <span class="strong"><strong>On Value Changed (Single)</strong></span>, and click on the <span class="strong"><strong>+</strong></span> sign to add a command.</p></li><li><p>Drag the <span class="strong"><strong>First Person Controller</strong></span> from the <span class="strong"><strong>Hierarchy</strong></span> view into the game object field of the<a id="id1168" class="indexterm"></a> new command. Then, use the function selector to find the <span class="strong"><strong>SetQuality </strong></span>function under <span class="strong"><strong>Dynamic float</strong></span> (<span class="strong"><strong>No Function</strong></span> | <span class="strong"><strong>PauseGame</strong></span> | <span class="strong"><strong>Dynamic float</strong></span> | <span class="strong"><strong>SetQuality</strong></span>), as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_11_02.jpg" /></div></li><li><p>When you play the scene, you should be able to pause/resume the game by pressing the <span class="emphasis"><em>Esc</em></span> key, also activating a slider that controls the game's quality settings.</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_11_03.jpg" /></div></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch11lvl2sec335"></a>How it works...</h3></div></div></div><p>Pausing the game is actually an easy, straightforward task in Unity: all we need to do is set the game's <span class="strong"><strong>Time Scale</strong></span> to <code class="literal">0</code> (and set it back to <code class="literal">1</code> to resume). In our code, we have included such a <a id="id1169" class="indexterm"></a>command within the <code class="literal">SetPause()</code> function, which is called whenever the player presses the <span class="emphasis"><em>Esc</em></span> key, also toggling the <code class="literal">isPaused</code> variable. To make things more functional, we have included a <span class="strong"><strong>GUI panel</strong></span> featuring a <span class="emphasis"><em>QualitySettings</em></span> slider that is activated whenever the game is paused.</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_11_04.jpg" /></div><p>Regarding the behavior for the QualitySettings slider and text, their parameters are adjusted at the start based on the game's variety of quality settings, their names, and its current state. Then, changes in the slider's value redefine the quality settings, also updating the label text accordingly.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch11lvl2sec336"></a>There's more...</h3></div></div></div><p>You can always<a id="id1170" class="indexterm"></a> add more functionality to the <span class="emphasis"><em>pause</em></span> screen by displaying sound volume controls, save/load buttons, and so on.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch11lvl3sec87"></a>Learning more about QualitySettings</h4></div></div></div><p>Our code for changing quality settings is a slight modification of the example given by Unity's documentation. If <a id="id1171" class="indexterm"></a>you want to learn more about the subject, check out <a class="ulink" href="http://docs.unity3d.com/ScriptReference/QualitySettings.html" target="_blank">http://docs.unity3d.com/ScriptReference/QualitySettings.html</a>.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch11lvl2sec337"></a>See also</h3></div></div></div><p>Refer to the <span class="emphasis"><em>Implementing slow motion</em></span> recipe<a id="id1172" class="indexterm"></a> in this chapter for more information.</p></div></div>