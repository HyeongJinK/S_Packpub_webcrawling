<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch10lvl1sec100"></a>Saving and loading player data – using static properties</h2></div></div><hr /></div><p>Keeping<a id="id1050" class="indexterm"></a> track <a id="id1051" class="indexterm"></a>of the player's progress and user<a id="id1052" class="indexterm"></a> settings during a <a id="id1053" class="indexterm"></a>game is vital to give your game a greater feel of depth and content. In this recipe, we will learn how to make our game remember the player's score between the different levels (scenes).</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec301"></a>Getting ready</h3></div></div></div><p>We have included a complete <a id="id1054" class="indexterm"></a>project in a Unity package named <code class="literal">game_HigherOrLower</code> in the <code class="literal">1362_10_04</code> folder. In order to follow this recipe, we will import this package as the starting point.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec302"></a>How to do it...</h3></div></div></div><p>To save and <a id="id1055" class="indexterm"></a>load player data, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Create a<a id="id1056" class="indexterm"></a> new 2D project and import the <code class="literal">game_HigherOrLower</code> package.</p></li><li><p>Add each of the scenes to the build in the sequence (<code class="literal">scene0_mainMenu</code>, then <code class="literal">scene1_gamePlaying</code>, and so on).</p></li><li><p>Make yourself familiar with the game by playing it a few times and examining the contents of the scenes. The game starts on the <code class="literal">scene0_mainMenu</code> scene, inside the <code class="literal">Scenes</code> folder.</p></li><li><p>Let's create a <a id="id1057" class="indexterm"></a>class to store the number of correct and incorrect guesses made by the user. Create a new C# script called <code class="literal">Player</code> with the following code:</p><div class="informalexample"><pre class="programlisting">using UnityEngine;

public class Player : MonoBehaviour {
  public static int scoreCorrect = 0;
  public static int scoreIncorrect = 0;
}</pre></div></li><li><p>In the lower-left corner of the <code class="literal">scene0_mainMenu</code> scene, create a UI Text GameObject named <span class="strong"><strong>Text – score</strong></span>, containing the placeholder text <span class="strong"><strong>Score: 99 / 99</strong></span>.</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_10_07.jpg" /></div></li><li><p>Next, attach<a id="id1058" class="indexterm"></a> the following C# script to UI GameObject <span class="strong"><strong>Text – score</strong></span>:</p><div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;

using UnityEngine.UI;

public class UpdateScoreText : MonoBehaviour {
  void Start(){
    Text scoreText = GetComponent&lt;Text&gt;();
    int totalAttempts = Player.scoreCorrect + Player.scoreIncorrect;
    string scoreMessage = "Score = ";
    scoreMessage += Player.scoreCorrect + " / " + totalAttempts;

    scoreText.text = scoreMessage;
  }
}</pre></div></li><li><p>In the<a id="id1059" class="indexterm"></a> <code class="literal">scene2_gameWon</code> scene, attach<a id="id1060" class="indexterm"></a> the following C# script to the<a id="id1061" class="indexterm"></a> Main Camera:</p><div class="informalexample"><pre class="programlisting">using UnityEngine;

public class IncrementCorrectScore : MonoBehaviour {
  void Start () {
    Player.scoreCorrect++;	
  }
}</pre></div></li><li><p>In the <code class="literal">scene3_gameLost</code> scene, attach the following C# script to the Main Camera:</p><div class="informalexample"><pre class="programlisting">using UnityEngine;

public class IncrementIncorrectScore : MonoBehaviour {
  void Start () {
    Player.scoreIncorrect++;	
  }
}</pre></div></li><li><p>Save your scripts and play the game. As you progress from level (scene) to level, you will find that the score and player's name are remembered, until you quit the application.</p></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec303"></a>How it works...</h3></div></div></div><p>The <code class="literal">Player</code> class<a id="id1062" class="indexterm"></a> uses static (class) properties <code class="literal">scoreCorrect</code> and <code class="literal">scoreIncorrect</code> to store the current total number of correct and incorrect guesses. Since these are public static properties, any <a id="id1063" class="indexterm"></a>object from any scene can access (set or get) these values, since the static properties are remembered from scene to scene. This class also provides the public <a id="id1064" class="indexterm"></a>static method called <code class="literal">ZeroTotals()</code> that resets both the values to zero.</p><p>When the <a id="id1065" class="indexterm"></a>
<code class="literal">scene0_mainMenu</code> scene is loaded, all the GameObjects with scripts will have their <code class="literal">Start()</code> methods executed. The UI Text GameObject called <span class="strong"><strong>Text – score</strong></span> has an instance of the <a id="id1066" class="indexterm"></a>
<code class="literal">UpdateScoreText</code> class as s script component, so that the scripts <code class="literal">Start()</code> method will be executed, which retrieves the correct and incorrect totals from the <code class="literal">Player</code> class, creates the <code class="literal">scoreMessage</code> string about the current score, and updates the text property so that the user sees the current score.</p><p>When the game is running and the user guesses correctly (higher), then the <code class="literal">scene2_gameWon</code> scene is loaded. So the <code class="literal">Start()</code> method, of the <code class="literal">IncrementCorrectScore</code> script component, of the Main Camera in this scene is executed, which adds <code class="literal">1</code> to the <code class="literal">scoreCorrect</code> variable of the <code class="literal">Player</code> class.</p><p>When the game is running and the user guesses wrongly (lower), then scene <code class="literal">scene3_gameLost</code> is loaded. So the <code class="literal">Start()</code> method, of the <code class="literal">IncrementIncorrectScore</code> script component, of the Main Camera in this scene is executed, which adds <code class="literal">1</code> to the <code class="literal">scoreIncorrect</code> variable of the <code class="literal">Player</code> class.</p><p>The next time the user visits the main menu scene, the new values of the correct and incorrect totals will be read from the <code class="literal">Player</code> class, and the UI Text on the screen will inform the user of their updated total score for the game.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec304"></a>There's more...</h3></div></div></div><p>There are some details that you don't want to miss.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch10lvl3sec80"></a>Hiding the score before the first attempt completed</h4></div></div></div><p>Showing a score<a id="id1067" class="indexterm"></a> of zero out of zero isn't very professional. Let's add some logic so that the score is only displayed (a non-empty string) if the total number of attempts is greater than zero:</p><div class="informalexample"><pre class="programlisting">void Start(){
  Text scoreText = GetComponent&lt;Text&gt;();
  int totalAttempts = Player.scoreCorrect + Player.scoreIncorrect;

  // default is empty string
  string scoreMessage = "";
  if( totalAttempts &gt; 0){
    scoreMessage = "Score = ";
    scoreMessage += Player.scoreCorrect + " / " + totalAttempts;
  }

  scoreText.text = scoreMessage;
}</pre></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec305"></a>See also</h3></div></div></div><p>Refer to the following recipe<a id="id1068" class="indexterm"></a> in this chapter for more information:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="emphasis"><em>Saving and loading player data – using PlayerPrefs</em></span>
</p></li></ul></div></div></div>