<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec44"></a>Introduction</h2></div></div><hr /></div><p>Unity 5 introduces in<a id="id307" class="indexterm"></a> new <span class="strong"><strong>Physically-Based Shaders</strong></span>. Physically-Based Rendering is<a id="id308" class="indexterm"></a> a technique that simulates the appearance of materials based on how the light reacts with that material (more specifically, the <span class="emphasis"><em>matter</em></span> from which that material is made) in the real world. Such a technique allows for more realistic and consistent materials. So, your creations in Unity should look better than ever. Creating materials in Unity has also become more efficient now. Once you have chosen between the available <a id="id309" class="indexterm"></a>workflows (<span class="strong"><strong>Metallic</strong></span> or <span class="strong"><strong>Specular setup</strong></span>; we'll get back to that later), there is no<a id="id310" class="indexterm"></a> longer the need to browse the drop-down menus in search of specific features, as Unity optimizes the shader for the created material, removing unnecessary code for unused properties once the material has been set up and the texture maps have been assigned.</p><p>For a deep understanding of Physically-Based Rendering, we recommend you to take a look at <span class="emphasis"><em>The Comprehensive PBR Guide</em></span>, written by <a id="id311" class="indexterm"></a>Wes McDermott from Allegorithmic, freely available in two volumes at <a class="ulink" href="http://www.allegorithmic.com/pbr-guide" target="_blank">http://www.allegorithmic.com/pbr-guide</a>. Allegorithmic's guide contains invaluable information on PBR theory and techniques, having been a fundamental reference for this chapter. A great resource that we'd recommend you take a look at is <span class="emphasis"><em>Mastering Physically Based Shading in Unity 5</em></span> by Renaldas Zioma (Unity), Erland Körner (Unity), and <a id="id312" class="indexterm"></a>Wes McDermott (Allegorithmic), available at <a class="ulink" href="http://www.slideshare.net/RenaldasZioma/unite2014-mastering-physically-based-shading-in-unity-5" target="_blank">http://www.slideshare.net/RenaldasZioma/unite2014-mastering-physically-based-shading-in-unity-5</a>.</p><p>Another resource is<span class="emphasis"><em> Physically Based Shading in Unity</em></span> by Aras Pranckevičius (Unity), available at <a class="ulink" href="http://aras-p.info/texts/files/201403-GDC_UnityPhysicallyBasedShading_notes.pdf" target="_blank">http://aras-p.info/texts/files/201403-GDC_UnityPhysicallyBasedShading_notes.pdf</a>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec111"></a>Creating and saving texture maps</h3></div></div></div><p>The visual aspects of <a id="id313" class="indexterm"></a>a material can be modified through the use of textures. In <a id="id314" class="indexterm"></a>order to create and edit image files, you will need an image editor such as Adobe Photoshop (the industry standard, and has its native format supported by Unity), GIMP, and so on. In order to follow the recipes in this chapter, it's strongly recommended that you have access to a few pieces of software like these.</p><p>When saving texture maps, especially the ones that have an Alpha Channel, you might want to choose an adequate file format. <span class="strong"><strong>PSD</strong></span>, Photoshop's <a id="id315" class="indexterm"></a>native format, is practical for preserving the original artwork in many layers. The PNG format is also a great option, but please note that Photoshop doesn't handle PNG's Alpha channel independently of the transparency, possibly compromising the material's appearance. Also, PNG files <a id="id316" class="indexterm"></a>don't support layers. For this chapter, we will often use the TIF format for three main reasons: (a) it's open to those not using Photoshop; (b) it uses layers; (c) it preserves the Alpha Channel information. The file size is significantly greater than in PSDs and PNGs, so feel free to save your work as PSDs (if you have Photoshop) or PNGs (if you don't need layers and, if using Photoshop, Alpha Channels).</p><p>Finally, a word of advice - although it's possible to manually create texture maps for our materials by using the traditional image editing software, new tools such as Allegorthmic's Substance Painter and Bitmap2Material make this work much more efficient, complete, and intuitive, complementing the traditional texture-making process or replacing it altogether - in a similar way to what zBrush and Mudbox did for 3D modeling. For design professionals, we strongly recommend at least trying such tools. Note, however, that products from Allegorithmic won't make use of Unity's Standard Shader, relying on the <a id="id317" class="indexterm"></a><span class="strong"><strong>substance</strong></span> files (which are natively supported by Unity).</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec112"></a>The big picture</h3></div></div></div><p>To understand the new Standard Shaders, it's a good idea to know the workflows, their properties, and how<a id="id318" class="indexterm"></a> they affect the material's appearance. There are, however, many possible ways to work with materials - texture map requirements, for instance, might change from engine to engine, or from one tool to another. Presently, Unity supports two different workflows: one based on Specular, and another based on Metallic values. Although both workflows share similar properties (such as Normal, Height, Occlusion, and Emission), they differ in the way the diffuse color and reflectance properties are set up.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl3sec24"></a>Specular workflow</h4></div></div></div><p>Unity's Standard Shader (Specular setup) uses Albedo and Specular/Smoothness maps, combining them to<a id="id319" class="indexterm"></a> create some of the material's aspect—mainly its color and reflectance qualities. The following shows the difference between Albedo and Smoothness maps:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Albedo</strong></span>: This is the<a id="id320" class="indexterm"></a> material's diffused color. Plainly and simply, this is how you usually describe the appearance of the material (the British flag is red, white and blue; Ferrari's logo is a black horse in a yellow setting; some sunglasses' lenses are semi-transparent gradients, and more). This description, however, can be deceptive. Purely metallic objects (such as aluminum, chrome, gold, and others) should have black as their diffuse color. Their colors, as we perceive them, have originated from their specular channel. Non-metallic objects (plastic, wood, and even painted or rusted metal), on the other hand, do have very distinct diffuse colors. Texture maps for the Albedo property feature RGB channels for colors and (optionally) an Alpha Channel for transparency.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Specular/Smoothness</strong></span>: This refers to the shininess of the material. Texture maps make use of RGB <a id="id321" class="indexterm"></a>channels for specular color (which informs hue and intensity), and Alpha Channel for smoothness/gloss (dark values for less shiny surfaces and blurred reflections; light/white values for shiny, mirror-like appearance). It is important to note that non-metallic objects feature neutral, very dark specular colors (with plastic, for instance, you should work with a grey value around 59). Metallic objects, on the other hand, feature very light values, and are also a bit yellowish in hue.</p></li></ul></div><p>To illustrate such concepts, we have created a battery object (shown below), featuring brushed metal caps and a plastic body. Observe how each map contributes to the final result:</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_04_39.jpg" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl3sec25"></a>The metallic workflow</h4></div></div></div><p>Unity's default Standard Shader combines Albedo and Metallic/Glossiness maps to create the color and reflectance qualities of the material. The following are the differences:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Albedo</strong></span>: As in the<a id="id322" class="indexterm"></a> Specular workflow, this is the material's diffuse color; how you would describe the material. However, Albedo<a id="id323" class="indexterm"></a> maps for the Metallic workflow should be configured in a slightly different way than ones for Specular workflow. This time around, the perceived diffuse color of metallic materials (grey for iron, yellow/orange for golden, and so on) have to be present in the Albedo map. Again, Albedo maps feature RGB channels for the colors and (optionally) an Alpha channel for transparency.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Metallic/Smoothness</strong></span>: This <a id="id324" class="indexterm"></a>refers to how metallic the material looks. Metallic texture maps make use of the Red channel for the Metallic value (black for non-metallic and white for metallic materials that are not painted or rusted) and the Alpha Channel for smoothness (in a similar way to the Specular workflow). Please note that Metallic maps do not include any information on hue, and in these cases the yellow-ish nature of the metallic gloss should be applied to the Albedo map.</p></li></ul></div><p>To reproduce the <a id="id325" class="indexterm"></a>battery that illustrated the Specular workflow by using the Metallic workflow, maps would have to be recreated as follows:</p><div class="mediaobject"><img src="/graphics/9781784391362/graphics/1362OT_04_40.jpg" /></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note31"></a>Note</h3><p>You might have noticed that we've used white to convey a metallic object. Technically, since only the Red channel is relevant, we could have used red (R: 255, G: 0, B: 0), yellow (R: 255, G: 255, B: 0) or, for that matter, any color that has a red value of 255.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl3sec26"></a>Other material properties</h4></div></div></div><p>It's also <a id="id326" class="indexterm"></a>worth mentioning that Unity's Standard Shaders support other maps such as:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Normal maps</strong></span>: The normal map adds detailed bumpiness into the material, simulating a more complex geometry. For instance, the internal ring on the positive (top) node <a id="id327" class="indexterm"></a>of the battery that illustrated shader workflows is not modeled in the 3D object's geometry, but rather created through a simple normal map.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Occlusion maps</strong></span>: A greyscale<a id="id328" class="indexterm"></a> map is used to simulate the dark sections of an object under ambient light. Usually, it is used to <a id="id329" class="indexterm"></a>emphasize joints, creases, and other details of geometry.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Height maps</strong></span>: These add <a id="id330" class="indexterm"></a>a displacement effect, giving the impression of depth without the need for complex geometry.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Emission maps</strong></span>: These add color<a id="id331" class="indexterm"></a> emitted by the material, as if self-illuminated, such as fluorescent surfaces or LCDs. Texture maps for Emission feature RGB channels for color.</p></li></ul></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl3sec27"></a>Unity samples and documentation</h4></div></div></div><p>Before you start, it might be<a id="id332" class="indexterm"></a> a good idea to read Unity's documentation <a id="id333" class="indexterm"></a>on textures. It can be found online at <a class="ulink" href="http://unity3d.com/support/documentation/Manual/Textures.html" target="_blank">http://unity3d.com/support/documentation/Manual/Textures.html</a>.</p><p>Finally, Unity has<a id="id334" class="indexterm"></a> put together a great resource for those looking for some pointers regarding how to set up maps for a variety of materials: the<a id="id335" class="indexterm"></a> <span class="strong"><strong>Shader Calibration Scene</strong></span>, which can be downloaded (for free) from the Unity Asset Store. It is a fantastic collection, featuring sample materials (both Metallic and Specular setup) for wood, metal, rubber, plastic, glass, skin, mud, and much more.</p></div></div></div>