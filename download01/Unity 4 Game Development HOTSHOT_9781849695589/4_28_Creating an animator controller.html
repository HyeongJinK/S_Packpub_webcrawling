<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec36"></a>Creating an animator controller</h2></div></div><hr /></div><p>In this step, we will create the <a id="id613" class="indexterm"></a>
<span class="strong"><strong>Animator Controller</strong></span>, which we will use to <a id="id614" class="indexterm"></a>control our character animation using the state machine and parameters to create a condition to change the type of animation. This animation will be controlled using the script that we will create in the next step.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec73"></a>Engage thrusters</h3></div></div></div><p>Let's get started:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Click on <span class="strong"><strong>Animation</strong></span> under the <span class="strong"><strong>Chapter4</strong></span> folder in the <span class="strong"><strong>Project</strong></span> view, right-click and go to <span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>Animator Controller</strong></span>, and rename it to <code class="literal">MyAnimatorController</code>.</p></li><li><p>Double-click on <span class="strong"><strong>MyAnimatorController</strong></span> to bring up the <span class="strong"><strong>Animator</strong></span> view, as seen in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849695589/graphics/5589OT_04_23.jpg" /></div></li><li><p>Double-click on <span class="strong"><strong>Base Layer</strong></span> in the top-left corner and change the name of this layer to <span class="strong"><strong>Base</strong></span>, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849695589/graphics/5589OT_04_24.jpg" /></div></li><li><p>Next, we go to <a id="id615" class="indexterm"></a>
<span class="strong"><strong>Resources</strong></span> | <span class="strong"><strong>FBX</strong></span> in the <span class="strong"><strong>Project</strong></span> <a id="id616" class="indexterm"></a>view, click on the arrow in front of <span class="strong"><strong>Heroine_animate</strong></span>, and drag the idle clip to the <span class="strong"><strong>Animator</strong></span> view, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849695589/graphics/5589OT_04_25.jpg" /></div></li><li><p>Then, we drag four more clips (<span class="strong"><strong>walk</strong></span>, <span class="strong"><strong>run</strong></span>, <span class="strong"><strong>jump</strong></span>, and <span class="strong"><strong>fall)</strong></span> to the <span class="strong"><strong>Animator</strong></span> view, similar to the <span class="strong"><strong>idle</strong></span> clip, and place it in the positions shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849695589/graphics/5589OT_04_26.jpg" /></div></li><li><p>Now, we will <a id="id617" class="indexterm"></a>click on each clip and go to the <span class="strong"><strong>Inspector</strong></span> <a id="id618" class="indexterm"></a>view to set up our parameter. We will start with the <span class="strong"><strong>idle</strong></span> clip; let's go to each clip <span class="strong"><strong>Inspector</strong></span> and set it up as follows:</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; "><colgroup><col align="left" /><col align="left" /><col align="left" /></colgroup><tbody><tr><td style="" colspan="3" align="left" valign="top">
<p>
<span class="strong"><strong>idle</strong></span>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Speed</strong></span>
</p>
</td><td style="" colspan="2" align="left" valign="top">
<p>
<code class="literal">0.7</code>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Foot IK</strong></span>
</p>
</td><td style="" colspan="2" align="left" valign="top">
<p>Check the box</p>
</td></tr><tr><td style="" colspan="3" align="left" valign="top">
<p>
<span class="strong"><strong>walk</strong></span>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Speed</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<code class="literal">1.5</code>
</p>
</td><td style="" align="left" valign="top">
<p>1.5</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Foot IK</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>Check the box:</p>
</td><td style="" align="left" valign="top">
<p>check the box</p>
</td></tr><tr><td style="" colspan="3" align="left" valign="top">
<p>
<span class="strong"><strong>run</strong></span>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Speed</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<code class="literal">1.7</code>
</p>
</td><td style="" align="left" valign="top">
<p>1.7</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Foot IK</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>Check the box</p>
</td><td style="" align="left" valign="top"> </td></tr><tr><td style="" colspan="3" align="left" valign="top">
<p>
<span class="strong"><strong>jump</strong></span>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Speed</strong></span>
</p>
</td><td style="" colspan="2" align="left" valign="top">
<p>
<code class="literal">4</code>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Foot IK</strong></span>
</p>
</td><td style="" colspan="2" align="left" valign="top">
<p>Check the box</p>
</td></tr><tr><td style="" colspan="3" align="left" valign="top">
<p>
<span class="strong"><strong>fall</strong></span>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Speed</strong></span>
</p>
</td><td style="" colspan="2" align="left" valign="top">
<p>
<code class="literal">0.7</code>
</p>
</td></tr></tbody></table></div><p>We just set the speed of each animation as well as the foot IK, which we will use to control our character.</p></li><li><p>Next, we will add a few parameters to control when each animation will be played. Let's go to the <span class="strong"><strong>Parameters</strong></span> tab at the bottom-left corner of the <span class="strong"><strong>Animator</strong></span> view and click on the plus icon thrice and choose the name and type of parameter as follows:</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; "><colgroup><col align="left" /><col align="left" /></colgroup><thead><tr><th style="border-bottom: 0.5pt solid ; " align="left" valign="bottom">
<p>Name</p>
</th><th style="border-bottom: 0.5pt solid ; " align="left" valign="bottom">
<p>Type</p>
</th></tr></thead><tbody><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Speed</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<code class="literal">Float</code>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>IsRun</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<code class="literal">Bool</code>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>MotionState</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<code class="literal">Int</code>
</p>
</td></tr></tbody></table></div><div class="mediaobject"><img src="/graphics/9781849695589/graphics/5589OT_04_27.jpg" /></div><p>These parameters will be used in the script to change the state of each animation clip.</p></li><li><p>Next, we will <a id="id619" class="indexterm"></a>create the transition between <a id="id620" class="indexterm"></a>each animation state. First, we will start with our base animation, <span class="strong"><strong>idle</strong></span>, and transition to <span class="strong"><strong>walk</strong></span>. Right-click on the <span class="strong"><strong>idle</strong></span> clip and choose <span class="strong"><strong>Make Transition</strong></span>, which will bring up the arrow, and click-and-drag on top of the <span class="strong"><strong>walk</strong></span> clip. We will see the link from the <span class="strong"><strong>idle</strong></span> clip to the <span class="strong"><strong>walk</strong></span> clip, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849695589/graphics/5589OT_04_28.jpg" /></div></li><li><p>Then, we want to click on the arrow line that we just created, then go to the <span class="strong"><strong>Inspector</strong></span>, uncheck the <span class="strong"><strong>Atomic</strong></span> checkbox, and go to the <span class="strong"><strong>Conditions</strong></span> view; click on the plus icon to add another condition and set up as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849695589/graphics/5589OT_04_29.jpg" /></div><p>The<a id="id621" class="indexterm"></a> <span class="strong"><strong>Atomic</strong></span> checkbox ensures that this animation will<a id="id622" class="indexterm"></a> finish playing before another animation can be played. However, in our case, we want the animation to be interrupted anytime when the character jumps or falls down, which we will set up in the next step.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note54"></a>Note</h3><p>More details about animation transition can be found at <a class="ulink" href="http://docs.unity3d.com/Manual/class-Transition.html" target="_blank">http://docs.unity3d.com/Manual/class-Transition.html</a>.</p></div></li><li><p>Next, we want to create another transition back from <span class="strong"><strong>walk</strong></span> to the <span class="strong"><strong>idle</strong></span> animation. So, let's right-click on the <span class="strong"><strong>walk</strong></span> clip, choose <span class="strong"><strong>Make Transition</strong></span>, and then click-and-drag on <span class="strong"><strong>idle</strong></span>. Then, we will click on the arrow line again to go to the <span class="strong"><strong>Inspector</strong></span> view and set it up as follows:</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; "><colgroup><col align="left" /><col align="left" /><col align="left" /><col align="left" /></colgroup><tbody><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Atomic</strong></span>
</p>
</td><td style="" colspan="3" align="left" valign="top">
<p>Uncheck the box</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Conditions</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Speed</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Less</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<code class="literal">0.1</code>
</p>
</td></tr></tbody></table></div></li><li><p>Then, we set up the rest of the animation. This time, we want the transition to go from <span class="strong"><strong>walk</strong></span> to <span class="strong"><strong>run</strong></span>. So, let's right-click on the <span class="strong"><strong>walk</strong></span> clip, choose <span class="strong"><strong>Make Transition</strong></span>, and then click-and-drag on <span class="strong"><strong>run</strong></span>. Then, we will click on the arrow line again to go to the <span class="strong"><strong>Inspector</strong></span> and set it up as follows:</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; "><colgroup><col align="left" /><col align="left" /><col align="left" /></colgroup><tbody><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Atomic</strong></span>
</p>
</td><td style="" colspan="2" align="left" valign="top">
<p>Uncheck the box</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Conditions</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>IsRun</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>true</strong></span>
</p>
</td></tr></tbody></table></div><p>Also, we will create the transition from <span class="strong"><strong>run</strong></span> back to <span class="strong"><strong>walk</strong></span>. Go to the transition inspector and set it up as follows:</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; "><colgroup><col align="left" /><col align="left" /><col align="left" /></colgroup><tbody><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Atomic</strong></span>
</p>
</td><td style="" colspan="2" align="left" valign="top">
<p>Uncheck the box</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Conditions</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>IsRun</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>false</strong></span>
</p>
</td></tr></tbody></table></div></li><li><p>Next, we want the <span class="strong"><strong>run</strong></span> clip to transition back to <span class="strong"><strong>idle</strong></span>. Let's create the transition arrow from <span class="strong"><strong>run</strong></span> to <span class="strong"><strong>idle</strong></span>, go to <span class="strong"><strong>Inspector</strong></span>, and set it up as follows:</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; "><colgroup><col align="left" /><col align="left" /><col align="left" /><col align="left" /></colgroup><tbody><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Atomic</strong></span>
</p>
</td><td style="" colspan="3" align="left" valign="top">
<p>Uncheck the box</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Conditions</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Speed</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Less</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<code class="literal">0.1</code>
</p>
</td></tr></tbody></table></div><p>We also need to create the transition from idle to run. Set up its <span class="strong"><strong>Inspector</strong></span> view as follows:</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; "><colgroup><col align="left" /><col align="left" /><col align="left" /></colgroup><tbody><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Atomic</strong></span>
</p>
</td><td style="" colspan="2" align="left" valign="top">
<p>Uncheck the box</p>
</td></tr><tr><td style="" colspan="3" align="left" valign="top">
<p>
<span class="strong"><strong>Conditions</strong></span>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Speed</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Greater</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<code class="literal">0.1</code>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>IsRun</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>true</strong></span>
</p>
</td><td style="" align="left" valign="top"> </td></tr></tbody></table></div></li><li><p>Now, we<a id="id623" class="indexterm"></a> finished the ground animation <a id="id624" class="indexterm"></a>setup. Next, we will set up the <span class="strong"><strong>jump</strong></span> and <span class="strong"><strong>fall</strong></span> animations, and we will use the <span class="strong"><strong>MotionState</strong></span> parameter to control each state of the animation. Let's set up the transition from <span class="strong"><strong>fall</strong></span> to <span class="strong"><strong>idle</strong></span>; set <span class="strong"><strong>Inspector</strong></span> as follows:</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; "><colgroup><col align="left" /><col align="left" /><col align="left" /></colgroup><tbody><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Atomic</strong></span>
</p>
</td><td style="" colspan="2" align="left" valign="top">
<p>Uncheck the box</p>
</td></tr><tr><td style="" colspan="3" align="left" valign="top">
<p>
<span class="strong"><strong>Conditions</strong></span>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Speed</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Less</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<code class="literal">0.1</code>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>MotionState</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Equals</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<code class="literal">0</code>
</p>
</td></tr></tbody></table></div><p>Also, we need to create the transition from <span class="strong"><strong>idle</strong></span> to <span class="strong"><strong>fall</strong></span>; set <span class="strong"><strong>Inspector</strong></span> as follows:</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; "><colgroup><col align="left" /><col align="left" /><col align="left" /><col align="left" /></colgroup><tbody><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Atomic</strong></span>
</p>
</td><td style="" colspan="3" align="left" valign="top">
<p>Uncheck the box</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Conditions</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>MotionState</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Equals</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<code class="literal">2</code>
</p>
</td></tr></tbody></table></div></li><li><p>Next, we will create another transition from <span class="strong"><strong>fall</strong></span> to <span class="strong"><strong>walk</strong></span>; set <span class="strong"><strong>Inspector</strong></span> as follows:</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; "><colgroup><col align="left" /><col align="left" /><col align="left" /></colgroup><tbody><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Atomic</strong></span>
</p>
</td><td style="" colspan="2" align="left" valign="top">
<p>Uncheck the box</p>
</td></tr><tr><td style="" colspan="3" align="left" valign="top">
<p>
<span class="strong"><strong>Conditions</strong></span>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Speed</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Greater</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<code class="literal">0.1</code>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>IsRun</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>false</strong></span>
</p>
</td><td style="" align="left" valign="top"> </td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>MotionState</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Equals</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<code class="literal">0</code>
</p>
</td></tr></tbody></table></div><p>Now, the transition from <span class="strong"><strong>walk</strong></span> to <span class="strong"><strong>fall</strong></span>; set <span class="strong"><strong>Inspector</strong></span> as follows:</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; "><colgroup><col align="left" /><col align="left" /><col align="left" /><col align="left" /></colgroup><tbody><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Atomic</strong></span>
</p>
</td><td style="" colspan="3" align="left" valign="top">
<p>Uncheck the box</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Conditions</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>MotionState</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Equals</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<code class="literal">2</code>
</p>
</td></tr></tbody></table></div></li><li><p>Then, the last transition from the <span class="strong"><strong>fall</strong></span> clip. We will set it from <span class="strong"><strong>fall</strong></span> to <span class="strong"><strong>run</strong></span>; set <span class="strong"><strong>Inspector</strong></span> as follows:</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; "><colgroup><col align="left" /><col align="left" /><col align="left" /></colgroup><tbody><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Atomic</strong></span>
</p>
</td><td style="" colspan="2" align="left" valign="top">
<p>Uncheck the box</p>
</td></tr><tr><td style="" colspan="3" align="left" valign="top">
<p>
<span class="strong"><strong>Conditions</strong></span>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Speed</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Greater</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<code class="literal">0.1</code>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>IsRun</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>true</strong></span>
</p>
</td><td style="" align="left" valign="top"> </td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>MotionState</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Equals</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<code class="literal">0</code>
</p>
</td></tr></tbody></table></div><p>Now, the <a id="id625" class="indexterm"></a>transition from <span class="strong"><strong>run</strong></span> to <span class="strong"><strong>fall</strong></span>; set <span class="strong"><strong>Inspector</strong></span> as follows:</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; "><colgroup><col align="left" /><col align="left" /><col align="left" /><col align="left" /></colgroup><tbody><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Atomic</strong></span>
</p>
</td><td style="" colspan="3" align="left" valign="top">
<p>Uncheck the box</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Conditions</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>MotionState</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Equals</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<code class="literal">2</code>
</p>
</td></tr></tbody></table></div><p>The current <a id="id626" class="indexterm"></a>
<span class="strong"><strong>Animator</strong></span> view will look like the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849695589/graphics/5589OT_04_30.jpg" /></div></li><li><p>Next, we will set up the <span class="strong"><strong>jump</strong></span> state animation. As we already know, we want our character to be able to jump from any state when the character hits the ground. So, we will do this by creating the transition from the <span class="strong"><strong>Any State</strong></span> clip (the green color box) to <span class="strong"><strong>jump</strong></span> by right-clicking on <span class="strong"><strong>Any State</strong></span> and clicking-and-dragging again on <span class="strong"><strong>jump</strong></span>. Then, we will set <span class="strong"><strong>Inspector</strong></span> as follows:</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; "><colgroup><col align="left" /><col align="left" /><col align="left" /><col align="left" /></colgroup><tbody><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Atomic</strong></span>
</p>
</td><td style="" colspan="3" align="left" valign="top">
<p>Leave it checked</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Conditions</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>MotionState</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Equals</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<code class="literal">1</code>
</p>
</td></tr></tbody></table></div><p>We can see<a id="id627" class="indexterm"></a> here that this time, we leave the <span class="strong"><strong>Atomic</strong></span> box checked, which means that our transition to the <span class="strong"><strong>jump</strong></span> state won't get interrupted by any other animation. We also need to edit the curve and tweak the blending time to <code class="literal">0</code> to make the transition from <span class="strong"><strong>Any State</strong></span> instantly change to the <span class="strong"><strong>jump</strong></span> animation when the character jumps, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849695589/graphics/5589OT_04_31.jpg" /></div><p>We can <a id="id628" class="indexterm"></a>zoom in/out the curve editor by scrolling the middle mouse button or pan by clicking the middle mouse button and moving the cursor.</p></li><li><p>Lastly, we will need the transition from <span class="strong"><strong>jump</strong></span> to <span class="strong"><strong>fall</strong></span>. We have set it this way because we don't know how high the character will jump; so, we want to show the <span class="strong"><strong>jump</strong></span> animation clip until the character starts falling. Simultaneously, we switch to the <span class="strong"><strong>fall</strong></span> animation clip. Let's right-click on <span class="strong"><strong>jump</strong></span> and create the transition to the <span class="strong"><strong>fall</strong></span> clip and set <span class="strong"><strong>Inspector</strong></span> as follows:</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; "><colgroup><col align="left" /><col align="left" /><col align="left" /><col align="left" /></colgroup><tbody><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Atomic</strong></span>
</p>
</td><td style="" colspan="3" align="left" valign="top">
<p>Leave it checked</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Conditions</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>MotionState</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Equals</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<code class="literal">2</code>
</p>
</td></tr></tbody></table></div><p>Now, we have finished setting up the <span class="strong"><strong>Animator Controller</strong></span> in the <span class="strong"><strong>Animator</strong></span> view, which will look like the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849695589/graphics/5589OT_04_32.jpg" /></div></li><li><p>Before<a id="id629" class="indexterm"></a> we finish this section, we need <a id="id630" class="indexterm"></a>to add <span class="strong"><strong>MyAnimatorController</strong></span> (which we just created) to our character. Let's click on the <span class="strong"><strong>Heroine_animate</strong></span> object in the <span class="strong"><strong>Hierarchy</strong></span> view and bring up the inspector. Go to <span class="strong"><strong>Controller</strong></span> and put <span class="strong"><strong>MyAnimatorController</strong></span>, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849695589/graphics/5589OT_04_33.jpg" /></div><p>If we click on the play button to play the game while opening the <span class="strong"><strong>Animator</strong></span> window, we can change the condition parameter and see the animation changing in action:</p><div class="mediaobject"><img src="/graphics/9781849695589/graphics/5589OT_04_34.jpg" /></div></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec74"></a>Objective complete – mini debriefing</h3></div></div></div><p>In this step, we<a id="id631" class="indexterm"></a> have created the <span class="strong"><strong>Animator Controller</strong></span>, which<a id="id632" class="indexterm"></a> we used to control the animation state of our character. First, we named the layer to <code class="literal">Base</code>. Then, we dragged all the animation clips and linked them with the transition. In the transition, we set up three parameters to give the condition for each changing state, which are <span class="strong"><strong>Speed</strong></span>, <span class="strong"><strong>IsRun</strong></span>, and <span class="strong"><strong>MotionState</strong></span>.</p><p>The <span class="strong"><strong>Speed</strong></span> parameter is a condition to check whether the character is moving, which uses the <code class="literal">float</code> object. <span class="strong"><strong>IsRun</strong></span> is a <code class="literal">boolean</code> object, which is used to check whether the player hit the key to run (in this case, we will use the <span class="emphasis"><em>Shift</em></span> key to toggle it in the next step). The last parameter, <span class="strong"><strong>MotionState</strong></span>, is the integer that is used to check which state the character is in. In this case, we use <code class="literal">0 = Ground</code>, <code class="literal">1 = Jump</code>, <code class="literal">2 = Fall</code>, and <code class="literal">3 = Jump Hold</code> (this state will hold the jump animation to the last frame).</p><p>At last, we have put the <span class="strong"><strong>Animator Controller</strong></span> to our character in the scene.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec75"></a>Classified intel</h3></div></div></div><p>From the transition between each clip, we will see that there is the <span class="strong"><strong>Exit Time</strong></span> parameter in the <span class="strong"><strong>Conditions</strong></span> view that is always set to default. However, we never use it in this section. What is it and how do we use it?</p><p>The <span class="strong"><strong>Exit Time</strong></span> parameter<a id="id633" class="indexterm"></a> is basically to tell the animation to change to the other state by the percentage of the current animation. For example, if we set it to <code class="literal">0.9</code>, the next animation state will trigger when the current animation has already played 90 percent through. We can also use the curve editor to set and see the matching of both clips. Have a look at the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849695589/graphics/5589OT_04_35.jpg" /></div><p>For more<a id="id634" class="indexterm"></a> details, visit <a class="ulink" href="http://docs.unity3d.com/Documentation/Manual/AnimationTransitions.html" target="_blank">http://docs.unity3d.com/Documentation/Manual/AnimationTransitions.html</a>.</p><p>In <span class="strong"><strong>Transitions</strong></span>, we can also add more than one transition between each transition, which we can sometimes use to check some conditions such as direction greater than 1 and direction less than -1. We will see the three arrows on the transition line as shown in the following screenshot:</p><p> </p><div class="mediaobject"><img src="/graphics/9781849695589/graphics/5589OT_04_36.jpg" /></div><p>
</p><p>In this case, it might be difficult to see which transition is on. We can use the <span class="strong"><strong>Solo</strong></span> and <span class="strong"><strong>Mute</strong></span> toggles to see each transition while we are playing the game. This is very useful to debug when we have many transitions on the same state.</p><p>For more details on <span class="strong"><strong>Solo</strong></span> and <span class="strong"><strong>Mute</strong></span>, visit <a class="ulink" href="http://docs.unity3d.com/Manual/class-Transition.html" target="_blank">http://docs.unity3d.com/Manual/class-Transition.html</a>.</p></div></div>