<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec35"></a>Setting up character animation and level</h2></div></div><hr /></div><p>In Unity, we can <a id="id581" class="indexterm"></a>import the FBX format file with the<a id="id582" class="indexterm"></a> rigging animation and set it up either for one clip per FBX or multiple clips per FBX, however we want.</p><p>For more information on how to <a id="id583" class="indexterm"></a>import the FBX, visit <a class="ulink" href="http://docs.unity3d.com/Documentation/Manual/HOWTO-importObject.html" target="_blank">http://docs.unity3d.com/Documentation/Manual/HOWTO-importObject.html</a>.</p><p>The concept behind the multiple clips is that we have one file that includes all small clips from walking, running, or jumping. Then, we divide it to each type of animation by telling Unity the range of frames for this animation. For example, if we create a walking cycle animation from frames 1 to 30, we can just tell Unity that we want to use the range of frames from 1 to 30 for the walking animation. This concept is very flexible to adjust and change the animation clip on the fly.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec69"></a>Prepare for lift off</h3></div></div></div><p>In this section, we will begin by preparing the animation for our character, which is the same model and shader from the last project, but this character will include all the necessary animations that we need for this section. Perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Create a new project with the name <code class="literal">CharacterAnimation</code>, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849695589/graphics/5589OT_04_02.jpg" /></div></li><li><p>To import the <a id="id584" class="indexterm"></a>assets package, go to <span class="strong"><strong>Assets</strong></span> | <span class="strong"><strong>Import Package</strong></span> | <span class="strong"><strong>Custom Package…</strong></span>, choose <span class="strong"><strong>Chapter4.unityPackage</strong></span>, which we downloaded earlier, and<a id="id585" class="indexterm"></a> then click on the <span class="strong"><strong>Import</strong></span> button in the pop-up window, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849695589/graphics/5589OT_04_03.jpg" /></div></li><li><p>Wait until it has completed importing the package, and you will see the <span class="strong"><strong>Chapter4</strong></span> and <span class="strong"><strong>Resources</strong></span> folders in the Window view. Go to <span class="strong"><strong>Chapter4</strong></span> | <span class="strong"><strong>Scene</strong></span> | <span class="strong"><strong>CharacterAnimation</strong></span> and double-click to open the scene, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849695589/graphics/5589OT_04_04.jpg" /></div></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec70"></a>Engage thrusters</h3></div></div></div><p>Now, we are <a id="id586" class="indexterm"></a>ready to start this section:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Let's go to <a id="id587" class="indexterm"></a>
<span class="strong"><strong>Resources</strong></span> | <span class="strong"><strong>FBX</strong></span>; click on <span class="strong"><strong>Heroine_animate</strong></span> to bring up the <span class="strong"><strong>Inspector</strong></span> view, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849695589/graphics/5589OT_04_05.jpg" /></div><p>There are two ways to import the animations to use in Unity. The first method is the one that we currently use. We import a single model that contains all animations and split the animation by setting the duration of the frame. In the second method, we don't have to set up the animation frame from start to end. Unity will automatically export the animation clip for you. (We will use this method in the next project.)</p><p>However, this method will need to import the multiple model files, each file having a different animation clip such as idle, walk, and run. Also, we need to follow the naming convention for Unity to be able to import the animation clip properly.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note47"></a>Note</h3><p>For more details, visit<a id="id588" class="indexterm"></a> the following website: <a class="ulink" href="http://docs.unity3d.com/Documentation/Manual/Splittinganimations.html" target="_blank">http://docs.unity3d.com/Documentation/Manual/Splittinganimations.html</a>.</p></div><p>For example, we have imported the base FBX model named <code class="literal">Heroine_animate</code> without any animation clips. Then, we will import another FBX model that contains only the idle animation; we should name it <code class="literal">Heroine_animate@idle</code>, as we can see in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849695589/graphics/5589OT_04_06.jpg" /></div></li><li><p>Then, click<a id="id589" class="indexterm"></a> on<a id="id590" class="indexterm"></a> the <span class="strong"><strong>Rig</strong></span> tab; for the <span class="strong"><strong>Animation Type</strong></span>, choose <span class="strong"><strong>Humanoid</strong></span> and click on <span class="strong"><strong>Apply</strong></span> button. Now, we will see the <span class="strong"><strong>Configure…</strong></span> button is clickable; click on this button, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849695589/graphics/5589OT_04_07.jpg" /></div></li><li><p>Next, we will see the character with all the bones in the <span class="strong"><strong>Scene</strong></span> view. In the <span class="strong"><strong>Inspector</strong></span> view, we will see that all bones have been placed to each circle area of the green avatar, as we can see in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849695589/graphics/5589OT_04_08.jpg" /></div></li><li><p>Here, we want to make sure that our character maps correctly with the T-Pose. So, we go to <span class="strong"><strong>Inspector</strong></span> for all the bones. We will see the drop-down buttons: <span class="strong"><strong>Mapping</strong></span> and <span class="strong"><strong>Pose</strong></span>. At <span class="strong"><strong>Mapping</strong></span>, choose <span class="strong"><strong>Automap</strong></span>, and then at <span class="strong"><strong>Pose</strong></span>, choose <span class="strong"><strong>Enforce T-Pose</strong></span> as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849695589/graphics/5589OT_04_09.jpg" /></div><p>Usually, Mecanim<a id="id591" class="indexterm"></a> will <a id="id592" class="indexterm"></a>automatically map all the bones for us, like the one we just did. However, there might be some cases in which we might have to set up the bones ourselves by dragging the bone from the project view to each circle area in the green avatar.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note48"></a>Note</h3><p>We can also map the bones by dragging-and-dropping the bone from the <span class="strong"><strong>Hierarchy</strong></span> view to each bone in the <span class="strong"><strong>Inspector</strong></span> view. However, for the retargeting animations, it helps to have the bone setup on the target similar to the previous source model. For more details, go to <a class="ulink" href="http://docs.unity3d.com/Documentation/Manual/ConfiguringtheAvatar.html" target="_blank">http://docs.unity3d.com/Documentation/Manual/ConfiguringtheAvatar.html</a>.</p></div></li><li><p>Next, we will click on the <span class="strong"><strong>Done</strong></span> button to finish the avatar setup and go back to the <span class="strong"><strong>Inspector</strong></span> view.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note49"></a>Note</h3><p>If we take a look at <span class="strong"><strong>Inspector</strong></span>, we will see the top tabs: <span class="strong"><strong>Mapping</strong></span> and <span class="strong"><strong>Muscles</strong></span>. The <span class="strong"><strong>Mapping</strong></span> tab is basically the one we set up right now. However, we can also set up the <span class="strong"><strong>Muscles</strong></span> tab, which allows us to set up the range of the bone (the minimum and maximum movement of each bone).</p><p>For more details, visit <a class="ulink" href="http://docs.unity3d.com/Documentation/Manual/MuscleDefinitions.html" target="_blank">http://docs.unity3d.com/Documentation/Manual/MuscleDefinitions.html</a>.</p></div></li><li><p>Then, we <a id="id593" class="indexterm"></a>will click on<a id="id594" class="indexterm"></a> the <span class="strong"><strong>Animations</strong></span> tab to set up the animation clip for our character to use in the game. We will see a small window here with the word <span class="strong"><strong>Clips,</strong></span> as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849695589/graphics/5589OT_04_10.jpg" /></div></li><li><p>Here, we will see one clip named <span class="strong"><strong>Animation</strong></span>, which starts from frame <span class="strong"><strong>2</strong></span> and ends at frame <span class="strong"><strong>361</strong></span>. So, we want to rename the <span class="strong"><strong>Animation</strong></span> clip to <code class="literal">idle</code> by changing the text in the textbox underneath the clip window to <code class="literal">idle</code>. Then, we can go down and type in <code class="literal">7</code> in the <span class="strong"><strong>Start</strong></span> input textbox and <code class="literal">210</code> in the <span class="strong"><strong>End</strong></span> input textbox, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849695589/graphics/5589OT_04_11.jpg" /></div></li><li><p>Next, we will set up the rest of parameters for this idle animation as follows:</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; "><colgroup><col align="left" /><col align="left" /></colgroup><tbody><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Loop Pose</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>Click on the checkbox</p>
</td></tr><tr><td style="" colspan="2" align="left" valign="top">
<p>
<span class="strong"><strong>Root Transform Rotation</strong></span>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Bake into Pose</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>Click on the checkbox</p>
</td></tr><tr><td style="" colspan="2" align="left" valign="top">
<p>
<span class="strong"><strong>Root Transform Position (Y)</strong></span>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Bake into Pose</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>Click on the check box</p>
</td></tr><tr><td style="" colspan="2" align="left" valign="top">
<p>
<span class="strong"><strong>Root Transform Position (XZ)</strong></span>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Bake into Pose</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>Click on the check box</p>
</td></tr></tbody></table></div><p>Then, we<a id="id595" class="indexterm"></a> click on the <span class="strong"><strong>Apply</strong></span> button<a id="id596" class="indexterm"></a> and save this setup, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849695589/graphics/5589OT_04_12.jpg" /></div><p>In the last setup, we tell this clip to be a looping animation and set all the transforms (rotation, Y position, and XZ position) to use <span class="strong"><strong>Baked into Pose</strong></span>. This will make sure that all the root transforms will be constant and delta root rotation, Y position, and XZ position equal zero. This means that our character, <code class="literal">gameObject</code>, will not rotate or move at all by <code class="literal">AnimationClip</code>.</p></li><li><p>Next, we will set up other animation clips. Let's go back to the <span class="strong"><strong>Clips</strong></span> window and click the plus sign four times to create four more animation clips <a id="id597" class="indexterm"></a>and set them<a id="id598" class="indexterm"></a> up as follows:</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; "><colgroup><col align="left" /><col align="left" /></colgroup><tbody><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Start</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<code class="literal">230</code>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>End</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<code class="literal">280</code>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Loop Pose</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>Click on the checkbox</p>
</td></tr><tr><td style="" colspan="2" align="left" valign="top">
<p>
<span class="strong"><strong>Root Transform Rotation</strong></span>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Bake into Pose</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>Click on the checkbox</p>
</td></tr><tr><td style="" colspan="2" align="left" valign="top">
<p>
<span class="strong"><strong>Root Transform Position (Y)</strong></span>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Bake into Pose</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>Click on the checkbox</p>
</td></tr><tr><td style="" colspan="2" align="left" valign="top">
<p>
<span class="strong"><strong>Root Transform Position (XZ)</strong></span>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Bake into Pose</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>Click on the checkbox</p>
</td></tr><tr><td style="" colspan="2" align="left" valign="top">
<p>
<span class="strong"><strong>run</strong></span>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Start</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<code class="literal">290</code>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>End</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<code class="literal">320</code>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Loop Pose</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>Click on the checkbox</p>
</td></tr><tr><td style="" colspan="2" align="left" valign="top">
<p>
<span class="strong"><strong>Root Transform Rotation</strong></span>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Bake into Pose</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>Click on the checkbox</p>
</td></tr><tr><td style="" colspan="2" align="left" valign="top">
<p>
<span class="strong"><strong>Root Transform Position (Y)</strong></span>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Bake into Pose</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>Click on the checkbox</p>
</td></tr><tr><td style="" colspan="2" align="left" valign="top">
<p>
<span class="strong"><strong>Root Transform Position (XZ)</strong></span>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Bake into Pose</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>Click on the checkbox</p>
</td></tr><tr><td style="" colspan="2" align="left" valign="top">
<p>
<span class="strong"><strong>jump</strong></span>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Start</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<code class="literal">325</code>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>End</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<code class="literal">339</code>
</p>
</td></tr><tr><td style="" colspan="2" align="left" valign="top">
<p>
<span class="strong"><strong>Root Transform Rotation</strong></span>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Bake into Pose</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>Click on the checkbox</p>
</td></tr><tr><td style="" colspan="2" align="left" valign="top">
<p>
<span class="strong"><strong>Root Transform Position (Y)</strong></span>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Bake into Pose</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>Click on the checkbox</p>
</td></tr><tr><td style="" colspan="2" align="left" valign="top">
<p>
<span class="strong"><strong>Root Transform Position (XZ)</strong></span>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Bake into Pose</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>Click on the checkbox</p>
</td></tr><tr><td style="" colspan="2" align="left" valign="top">
<p>
<span class="strong"><strong>fall</strong></span>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Start</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<code class="literal">340</code>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>End</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>
<code class="literal">360</code>
</p>
</td></tr><tr><td style="" colspan="2" align="left" valign="top">
<p>
<span class="strong"><strong>Root Transform Rotation</strong></span>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Bake into Pose</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>Click on the checkbox</p>
</td></tr><tr><td style="" colspan="2" align="left" valign="top">
<p>
<span class="strong"><strong>Root Transform Position (Y)</strong></span>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Bake into Pose</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>Click on the checkbox</p>
</td></tr><tr><td style="" colspan="2" align="left" valign="top">
<p>
<span class="strong"><strong>Root Transform Position (XZ)</strong></span>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Bake into Pose</strong></span>
</p>
</td><td style="" align="left" valign="top">
<p>Click on the checkbox</p>
</td></tr></tbody></table></div></li><li><p>Now we<a id="id599" class="indexterm"></a> have <a id="id600" class="indexterm"></a>set up the walk and run clips similar to our idle clip. On the other hand, we set the jump and fall clips a bit differently because we only want to play both clips once and stay at the last frame, so we don't need to check <span class="strong"><strong>Loop Pose</strong></span>:</p><div class="mediaobject"><img src="/graphics/9781849695589/graphics/5589OT_04_13.jpg" /></div></li><li><p>Next, we want to add the level to our scene. Go to the <span class="strong"><strong>Project</strong></span> view under the <span class="strong"><strong>Prefabs</strong></span> folder and drag the <span class="strong"><strong>Level</strong></span> prefab to the <span class="strong"><strong>Hierarchy</strong></span> view, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849695589/graphics/5589OT_04_14.jpg" /></div></li><li><p>Before we finish this step, we will add our character to the scene. Go to the <span class="strong"><strong>Resources</strong></span> | <span class="strong"><strong>FBX</strong></span> in the <span class="strong"><strong>Project</strong></span> view and drag <span class="strong"><strong>Heroine_animate</strong></span> to the <span class="strong"><strong>Hierarchy</strong></span> view:</p><div class="mediaobject"><img src="/graphics/9781849695589/graphics/5589OT_04_15.jpg" /></div></li><li><p>In the<a id="id601" class="indexterm"></a> preceding <a id="id602" class="indexterm"></a>screenshot, we can see the outline, which shows the white boxes on the character that represent extra bones to control the extra objects on our character. In this case, the extra objects are the sword, sword sheath, dragonhead on the shoulder, and the back plate.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note50"></a>Note</h3><p>The extra bone meshes are usually exported from other 3D software, depending on the artist or animator who sets it up. Sometimes, we can use these meshes for collision detection for the attack action if we have a fighting animation attached to the character.</p></div></li><li><p>In this case, we don't need to show the mesh here. We can either remove or hide it, but we will choose to remove it because we don't need to use the <span class="strong"><strong>Mesh Renderer</strong></span> component for this project. Let's do this by clicking on <span class="strong"><strong>Heroine_animate</strong></span> in the <span class="strong"><strong>Hierarchy</strong></span> view. Then, we will use the search box in the <span class="strong"><strong>Hierarchy</strong></span> view to search and put the bones in this box, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849695589/graphics/5589OT_04_16.jpg" /></div></li><li><p>Let's click on the first bone, <span class="strong"><strong>back_plate_bone</strong></span>, to bring up its inspector and go to the <span class="strong"><strong>Inspector</strong></span> view, right-click on the <span class="strong"><strong>Mesh Renderer</strong></span> component, and then click on <span class="strong"><strong>Remove Component</strong></span> to remove it, as we can <a id="id603" class="indexterm"></a>see in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849695589/graphics/5589OT_04_17.jpg" /></div></li><li><p>Then, we go to <a id="id604" class="indexterm"></a>the next bones, <span class="strong"><strong>shoulder_bones</strong></span>, <span class="strong"><strong>sword_bone</strong></span> and <span class="strong"><strong>sword_sheath_bone</strong></span>, perform tasks similar to what we performed for <span class="strong"><strong>back_plate_bone</strong></span>, and we will see all the white boxes disappear, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849695589/graphics/5589OT_04_18.jpg" /></div></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec71"></a>Objective complete – mini debriefing</h3></div></div></div><p>Basically, what we <a id="id605" class="indexterm"></a>have done here is set up our <a id="id606" class="indexterm"></a>character to use the <span class="strong"><strong>Humanoid</strong></span> animation type and create the avatar for our character. Then, we set up the animation clip for idle, walk, run, jump, and fall, as well as set up each animation to <span class="strong"><strong>Bake into Pose</strong></span> to make sure that <span class="strong"><strong>AnimationClip</strong></span> won't rotate or move our <span class="strong"><strong>gameObject</strong></span> character.</p><p>Then, we also created the level for our scene and added our character, which included the animation clips that we have set up. Lastly, we removed the <span class="strong"><strong>Mesh Renderer</strong></span> of the extra bones because we don't want to show it in our scene.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note51"></a>Note</h3><p>If we click on <span class="strong"><strong>Heroine_animate</strong></span> in the <span class="strong"><strong>Hierarchy</strong></span> view, we will see that there is the <span class="strong"><strong>Animator</strong></span> component attached in the <span class="strong"><strong>Inspector</strong></span> view. This <span class="strong"><strong>Animator</strong></span> component is the new component that Mecanim uses to control our character, which will contain <span class="strong"><strong>Animation Controller</strong></span> (we will create this in the next step), <span class="strong"><strong>Avatar</strong></span> (which is <span class="strong"><strong>Heroine_animateAvatar</strong></span> that we just created), <span class="strong"><strong>Apply Root Motion</strong></span> (we will talk about this later in the project), <span class="strong"><strong>Animate Physics</strong></span>, and <span class="strong"><strong>Culling Mode</strong></span>.</p><p>For more details on each parameter, visit <a class="ulink" href="http://docs.unity3d.com/Documentation/Components/class-Animator.html" target="_blank">http://docs.unity3d.com/Documentation/Components/class-Animator.html</a>.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec72"></a>Classified intel</h3></div></div></div><p>As we know, most 3D software uses the <span class="emphasis"><em>y</em></span> axis as the upward direction, and Unity is no exception. However, 3D Studio Max uses the <span class="emphasis"><em>z</em></span> axis as the upward direction.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl3sec06"></a>Tip for 3Ds Max users</h4></div></div></div><p>As we know, 3D Studio Max<a id="id607" class="indexterm"></a> uses the <span class="emphasis"><em>z</em></span> axis as the upward direction, but Unity uses the <span class="emphasis"><em>y</em></span> axis for the same purpose. Usually, when we export a 3D model without any animation attached, we set the <span class="emphasis"><em>x</em></span> rotation of the character pivot to -90 degrees. However, if we set the model with animation this way, we will have a problem of the biped having the wrong rotation. The good thing is that we don't need to do anything; just leave the rotation of the pivot as default, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849695589/graphics/5589OT_04_19.jpg" /></div><p>This is because our character has two objects attached to it—the model and bones. Then, when we import it to Unity, the FBX Importer in Unity will basically handle it for us by creating the container and add both objects and its children, which will solve the problem of wrong rotation and set the default rotation of the model as <span class="strong"><strong>X</strong></span> to <code class="literal">0</code>, <span class="strong"><strong>Y</strong></span> to <code class="literal">0</code>, and <span class="strong"><strong>Z</strong></span> to <code class="literal">0</code>, as we can see in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849695589/graphics/5589OT_04_20.jpg" /></div><p>Some of you might be <a id="id608" class="indexterm"></a>curious—how do we know when to rotate the pivot or not rotate the pivot in 3D Studio Max? Well, it's very simple; just remember that with any 3D model that is static and not complicated or has only one mesh object included, we should rotate its pivot. On the other hand, if we have a character model with rigging, or maybe a simple mesh for detecting the collision, we can just leave it as it is.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note52"></a>Note</h3><p>We can also fix the <a id="id609" class="indexterm"></a>rotation of the imported model in Unity by creating the empty object as a parent of the imported model. For more information on how to fix the rotation of the imported model in Unity, we can go to <a class="ulink" href="http://docs.unity3d.com/Documentation/Manual/HOWTO-FixZAxisIsUp.html" target="_blank">http://docs.unity3d.com/Documentation/Manual/HOWTO-FixZAxisIsUp.html</a>.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl3sec07"></a>The Animations inspector</h4></div></div></div><p>If we click <a id="id610" class="indexterm"></a>on <span class="strong"><strong>Heroine_animate</strong></span> in the <span class="strong"><strong>Project</strong></span> view and go to the <span class="strong"><strong>Animations</strong></span> tab in the <span class="strong"><strong>Inspector</strong></span> view, we will see the clip window that contains all the clips that we created. Here, we can select any clip, for example, the idle clip. Then, we can go down to see the ruler bar under the clip's name. We can drag the arrow marker to adjust the <span class="strong"><strong>Start</strong></span> and <span class="strong"><strong>End</strong></span> points of the clip instead of typing in the number in the textbox.</p><p>As soon as we drag the marker, we will see the <span class="strong"><strong>Looping</strong></span> fitness curves for all parameters (<span class="strong"><strong>Rotation</strong></span> and <span class="strong"><strong>Position</strong></span>). The green line shows the best loop match followed by yellow and red, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849695589/graphics/5589OT_04_21.jpg" /></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note53"></a>Note</h3><p>This<a id="id611" class="indexterm"></a> feature is very convenient to adjust the looping animation. For example, if we have the animation clip from the motion capture data, we can easily find a good match for the looping animation.</p><p>For more<a id="id612" class="indexterm"></a> details, visit <a class="ulink" href="http://docs.unity3d.com/Documentation/Manual/LoopingAnimationClips.html" target="_blank">http://docs.unity3d.com/Documentation/Manual/LoopingAnimationClips.html</a>.</p></div><p>At last, we can use the play button in the <span class="strong"><strong>Preview</strong></span> view to see each animation clip in action and adjust the speed of our clip by dragging the slider bar close to the time icon, before applying it, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849695589/graphics/5589OT_04_22.jpg" /></div></div></div></div>