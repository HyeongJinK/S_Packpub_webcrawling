<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch08lvl1sec84"></a>Batch renaming</h2></div></div><hr /></div><p>When creating scenes with multiple enemies, power-ups, props, or other object instances, you'll typically use the duplicate feature to clone objects (<span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>D</em></span>). This leads to many objects sharing the same <a id="id602" class="indexterm"></a>name. Now, while there's nothing technically wrong in name duplication per se, it's both inconvenient and untidy. It results in a hierarchy panel of many identically named objects, and it's practically impossible to<a id="id603" class="indexterm"></a> distinguish between specific objects by their name alone. Furthermore, object searches in script using the <code class="literal">GameObject.Find</code> function <a id="id604" class="indexterm"></a>cannot be relied on to retrieve the specific object that you need, since it could return any one of the identically named objects. The solution, then, is to name each object uniquely and appropriately. But doing this can be tedious, especially if you're working with many objects. Thus, there's a need for a Batch Rename tool.</p><p>This would, in theory, allow you to select multiple objects in the hierarchy panel and then to rename them automatically according to a numbered convention. The only technical problem with this is that Unity doesn't natively <a id="id605" class="indexterm"></a>support such a feature. But we can code it ourselves, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781784390655/graphics/0655OT_08_01.jpg" /><div class="caption"><p>Creating a Batch Rename editor add-on</p></div></div><p>To begin customizing the Unity Editor, first create a folder named <code class="literal">Editor</code> inside the project. This is important. <code class="literal">Editor</code> is a special folder recognized by Unity as a place to house all the editor customizing scripts. Thus, if you plan on changing the Unity Editor, be sure all customizing scripts are inside the <code class="literal">Editor</code> folder. It doesn't matter whether your project features multiple folders named <code class="literal">Editor</code>; the only thing that matters is that there's at least one <code class="literal">Editor</code> folder and an editor script inside it, as shown here:</p><div class="mediaobject"><img src="/graphics/9781784390655/graphics/0655OT_08_02.jpg" /><div class="caption"><p>Create an Editor folder for all editor scripts</p></div></div><p>Next, we'll create a Batch Rename utility from the <code class="literal">ScriptableWizard</code> class. This class is an ancestor from<a id="id606" class="indexterm"></a> which we derive new classes. All derived classes will work much like a pop-up utility dialog that can be launched from the Unity main menu. Their purpose is to present a set of options from which the user can choose before pressing a confirmation button that performs a one-time process. In other words, classes derived from <code class="literal">ScriptableWizard</code> are ideal for performing automated, one-time operations on single or multiple objects.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip54"></a>Tip</h3><p>More information on the <a id="id607" class="indexterm"></a>
<code class="literal">ScriptableWizard</code> class can be found in the online Unity documentation at <a class="ulink" href="http://docs.unity3d.com/ScriptReference/ScriptableWizard.html" target="_blank">http://docs.unity3d.com/ScriptReference/ScriptableWizard.html</a>.</p></div><p>The following code sample 8-1 lists the complete source code for a Batch Rename utility:</p><div class="informalexample"><pre class="programlisting">01 //------------------------------------
02 using UnityEngine;
<span class="strong"><strong>03 using UnityEditor;</strong></span>
04 using System.Collections;
05 //------------------------------------
<span class="strong"><strong>06 public class BatchRename : ScriptableWizard</strong></span>
07 {
08 //Base name
09 public string BaseName = "MyObject_";
10 
11 //Start Count
12 public int StartNumber = 0;
13 
14 //Increment
15 public int Increment = 1;
16 
<span class="strong"><strong>17 [MenuItem("Edit/Batch Rename...")]</strong></span>
<span class="strong"><strong>18     static void CreateWizard()</strong></span>
<span class="strong"><strong>19     {</strong></span>
<span class="strong"><strong>20         ScriptableWizard.DisplayWizard("Batch Rename",typeof(BatchRename),"Rename");</strong></span>
<span class="strong"><strong>21     }</strong></span>
22 //------------------------------------
23 //Called when the window first appears
24 void OnEnable()
25 {
26       UpdateSelectionHelper();
27 }
28 //------------------------------------
29 //Function called when selection changes in scene
30 void OnSelectionChange()
31 {
32       UpdateSelectionHelper();
33 }
34 //------------------------------------
35 //Update selection counter
36 void UpdateSelectionHelper()
37 {
38        helpString = "";
39 
40        if (Selection.objects != null)
41 helpString = "Number of objects selected: " + Selection.objects.Length;
42 }
43 //------------------------------------
44 //Rename
<span class="strong"><strong>45 void OnWizardCreate()</strong></span>

<span class="strong"><strong>46 {</strong></span>
47       //If selection empty, then exit
48       if (Selection.objects == null)
49              return;
50 
51       //Current Increment
52       int PostFix = StartNumber;
53 
54       //Cycle and rename
<span class="strong"><strong>55       foreach(Object O in Selection.objects)</strong></span>
56       {
57              O.name = BaseName + PostFix;
58              PostFix += Increment;
59       }
60 }
61 //------------------------------------
62 }
63 //------------------------------------</pre></div><p>The following are the<a id="id608" class="indexterm"></a> comments for code sample 8-1:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Line 03</strong></span>: The editor extensions should include the <code class="literal">UnityEditor</code> namespace that allows you to access editor classes and objects.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Line 06</strong></span>: The <code class="literal">BatchRename</code> class derives not from <code class="literal">MonoBehaviour</code>, as with most script files, but from <code class="literal">ScriptableWizard</code>. Classes deriving from here will be treated by Unity like independent utilities that may be launched from the application menu.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Lines 17-21</strong></span>: The <code class="literal">MenuItem</code> attribute is prefixed to the <code class="literal">CreateWizard</code> function. This creates a menu entry in the application menu listed under <span class="strong"><strong>Edit/Batch Rename</strong></span> and invokes the <code class="literal">CreateWizard</code> function when clicked on to display the <span class="strong"><strong>Batch Rename</strong></span> window.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Lines 8-16</strong></span>: After <code class="literal">CreateWizard</code> is invoked, the <code class="literal">BatchRename</code> window shows. From here, all public<a id="id609" class="indexterm"></a> class members (including <span class="strong"><strong>Base Name</strong></span>, <span class="strong"><strong>Start Number</strong></span>, and <span class="strong"><strong>Increment</strong></span>) will automatically feature in the window as editable fields for the user.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Lines 45-60</strong></span>: The <code class="literal">OnWizardCreate</code> function<a id="id610" class="indexterm"></a> is invoked as an event when the user presses the <span class="strong"><strong>Rename</strong></span> button from the <span class="strong"><strong>Batch Rename</strong></span> window. The button is called <span class="strong"><strong>Rename</strong></span> in this case because of line 20. The <code class="literal">OnWizardCreate</code> function iterates through all selected objects in the scene, if any, and renames them in sequence according to the <span class="strong"><strong>Base Name</strong></span>, <span class="strong"><strong>Start Number</strong></span>, and <span class="strong"><strong>Increment</strong></span> fields, as shown here:</p><div class="mediaobject"><img src="/graphics/9781784390655/graphics/0655OT_08_03.jpg" /><div class="caption"><p>The Batch Rename tool</p></div></div></li></ul></div><p>To use the Batch Rename tool, just select a group of objects in the scene and then click on the <span class="strong"><strong>Batch Rename</strong></span> option<a id="id611" class="indexterm"></a> in <span class="strong"><strong>Edit</strong></span> from the application menu. The <span class="strong"><strong>Base Name</strong></span> field defines a string that needs to be prefixed to all object names, and the <span class="strong"><strong>Increment</strong></span> field defines the amount by which an integer counter should increase that is prefixed to the base name. The <span class="strong"><strong>Start Number</strong></span> value is the point from which all<a id="id612" class="indexterm"></a> incrementing begins, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781784390655/graphics/0655OT_08_04.jpg" /><div class="caption"><p>Renamed objects using the Batch Rename tool</p></div></div></div>