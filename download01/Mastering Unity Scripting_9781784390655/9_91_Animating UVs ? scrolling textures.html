<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch09lvl1sec92"></a>Animating UVs â€“ scrolling textures</h2></div></div><hr /></div><p>Scrolling textures<a id="id673" class="indexterm"></a> are a general purpose requirement for lots of games, and yet, they are not natively supported by<a id="id674" class="indexterm"></a> Unity; that is, they require you to "get coding" for their implementation. Scrolling textures are useful for parallax effects; to move clouds, surfaces, and water; or to express motion or movement in the game. Typically, scrolling textures are seamless images whose pixels tile vertically and horizontally. This allows infinite scrolling and repetition, as shown here:</p><div class="mediaobject"><img src="/graphics/9781784390655/graphics/0655OT_09_09.jpg" /><div class="caption"><p>Scrolling texture on a Quad</p></div></div><p>When <a id="id675" class="indexterm"></a>attached to a Quad, the following code sample 9-3 will animate its texture according to the<a id="id676" class="indexterm"></a> horizontal and vertical speed:</p><div class="informalexample"><pre class="programlisting">01 //CLASS TO SCROLL TEXTURE ON PLANE. CAN BE USED FOR MOVING SKY
02 //------------------------------------------------
03 using UnityEngine;
04 using System.Collections;
05 //------------------------------------------------
06 [RequireComponent (typeof (MeshRenderer))] 
07 public class MatScroller : MonoBehaviour
08 {
09 //Public variables
10 //------------------------------------------------
11 //Reference to Horizontal Scroll Speed
12 public float HorizSpeed = 1.0f;
13 
14 //Reference to Vertical Scroll Speed
15 public float VertSpeed = 1.0f;
16 
17 //Reference to Min and Max Horiz and vert
18 public float HorizUVMin = 1.0f;
19 public float HorizUVMax = 2.0f;
20 
21 public float VertUVMin = 1.0f;
22 public float VertUVMax = 2.0f;
23 
24 //Private variables
25 //------------------------------------------------
26 //Reference to Mesh Renderer Component
27 private MeshRenderer MeshR = null;
28 
29 //Methods
30 //------------------------------------------------
31 // Use this for initialization
32 void Awake ()
33 {
34        //Get Mesh Renderer Component
35        MeshR = GetComponent&lt;MeshRenderer&gt;();
36 }
37 //------------------------------------------------
38 // Update is called once per frame
39 void Update () 
40 {
41        //Scrolls texture between min and max
42 Vector2 Offset = new Vector2((MeshR.material.mainTextureOffset.x &gt; HorizUVMax) ? HorizUVMin : MeshR.material.mainTextureOffset.x + Time.deltaTime * HorizSpeed,
43 (MeshR.material.mainTextureOffset.y &gt; VertUVMax) ? VertUVMin : MeshR.material.mainTextureOffset.y + Time.deltaTime * VertSpeed);

44 
45       //Update UV coordinates
46       MeshR.material.mainTextureOffset = Offset;
47 }
48 //------------------------------------------------
49 }
50 //------------------------------------------------</pre></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip64"></a>Tip</h3><p>The <code class="literal">MatScroller</code> class works with any <code class="literal">MeshRenderer</code> component and Quad object. A complete scrolling-texture project can be found in the book's companion files (code bundle).</p></div><p>Attach this script to your Quad object and tweak its scrolling<a id="id677" class="indexterm"></a> speed to produce the results you need, as shown<a id="id678" class="indexterm"></a> in the following screenshot. This will be useful to create animated sky backgrounds and backgrounds for side-scrolling shooter or platform games. It can also be useful to create flowing waterfalls and volumetric lighting when combined with transparency!</p><div class="mediaobject"><img src="/graphics/9781784390655/graphics/0655OT_09_10.jpg" /><div class="caption"><p>Tweaking texture-scrolling fields from the Object Inspector</p></div></div></div>