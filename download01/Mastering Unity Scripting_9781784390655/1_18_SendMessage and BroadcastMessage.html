<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch01lvl1sec24"></a>SendMessage and BroadcastMessage</h2></div></div><hr /></div><p>The <code class="literal">MonoBehaviour</code> class included in the Unity API, which acts as the base class for most new scripts, offers the<a id="id124" class="indexterm"></a> <code class="literal">SendMessage</code> and <code class="literal">BroadcastMessage</code> methods. Using these, you can easily execute functions by name on all components attached to an object. To invoke a method of a class, you typically need a local reference to that class to access and run its functions as well as to access its variables. However, the <code class="literal">SendMessage</code> and <code class="literal">BroadcastMessage</code> functions let you run functions using string values by simply<a id="id125" class="indexterm"></a> specifying the name of a function to run. This is very convenient and makes your code look a lot simpler and shorter at the cost of efficiency, as we'll see later. Refer to the following code sample 1-16:</p><div class="informalexample"><pre class="programlisting">01 using UnityEngine;
02 using System.Collections;
03 
04 public class MyClass : MonoBehaviour 
05 {
06 void start()
07 {
08        //Will invoke MyFunction on ALL components/scripts attached to this object (where the function is present)

09         SendMessage("MyFunction", SendMessageOptions.DontRequireReceiver);

10 }
11 
12 //Runs when SendMessage is called
13 void MyFunction()
14 {
15        Debug.Log ("hello");
16 }
17 }</pre></div><p>The following are the comments for code sample 1-16:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Line 09</strong></span>: <code class="literal">SendMessage</code> is called to invoke the function <code class="literal">MyFunction</code>. <code class="literal">MyFunction</code> will be invoked not only on this class but on all other components attached to <code class="literal">GameObject</code>, if they have a <code class="literal">MyFunction</code> member, including the <code class="literal">Transform</code> component as well as others.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Line 09</strong></span>: The parameter <code class="literal">SendMessageOptions.DontRequireReceiver</code> defines what happens if <code class="literal">MyFunction</code> is not present on a component. Here, it specifies that Unity should ignore the component and move on to the next calling <code class="literal">MyFunction</code> wherever it is found.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip15"></a>Tip</h3><p>The term function and member function mean the same thing when the function belongs to a class. A function that belongs to a class is said to be a member function.</p></div></li></ul></div><p>We've seen that <code class="literal">SendMessage</code> invokes a specified function across all components attached to a single <code class="literal">GameObject</code>. <code class="literal">BroadcastMessage</code> incorporates the <code class="literal">SendMessage</code> behavior and goes a stage<a id="id126" class="indexterm"></a> further, that is, it invokes a specified function for all<a id="id127" class="indexterm"></a> components on <code class="literal">GameObject</code> and then repeats this process recursively for all child objects in the scene hierarchy, cascading downwards to all children.</p><p>More information on<a id="id128" class="indexterm"></a> <code class="literal">SendMessage</code> and <code class="literal">BroadcastMessage</code> can be<a id="id129" class="indexterm"></a> found at <a class="ulink" href="http://docs.unity3d.com/ScriptReference/GameObject.SendMessage.html" target="_blank">http://docs.unity3d.com/ScriptReference/GameObject.SendMessage.html</a> and <a class="ulink" href="http://docs.unity3d.com/ScriptReference/Component.BroadcastMessage.html" target="_blank">http://docs.unity3d.com/ScriptReference/Component.BroadcastMessage.html</a>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note12"></a>Note</h3><p>
<span class="strong"><strong>Reflection</strong></span>
</p><p>
<code class="literal">SendMessage</code> and <code class="literal">BroadcastMessage</code> are effective ways to facilitate inter-object communication and inter-component communication, that is, it's a great way to make components talk to one another if they need to, to synchronize behavior and recycle functionality. However, both <code class="literal">SendMessage</code> and <code class="literal">BroadcastMessage</code> rely internally on a C# feature known as <a id="id130" class="indexterm"></a>
<span class="strong"><strong>reflection</strong></span>. By invoking a function using a string, your application is required to look at itself at runtime (to reflect), searching its code for the intended function to run. This process is computationally expensive compared to running a function in the normal way. For this reason, seek to minimize the usage of <code class="literal">SendMessage</code> and <code class="literal">BroadcastMessage</code>, especially during <code class="literal">Update</code> events or other frame-based scenarios, as the impact on performance can be significant. This doesn't mean you should never use them. There might be times when their use is rare, infrequent, and convenient and has practically no appreciable impact. However, later chapters in this book will demonstrate alternative and faster techniques using delegates and interfaces.</p></div><p>If you'd like more information on C# and its usage before proceeding further with this book, then I recommend the following sources:â€©</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="emphasis"><em>Learning C# by Developing Games with Unity 3D Beginner's Guide</em></span>, <span class="emphasis"><em>Terry Norton</em></span>, <span class="emphasis"><em>Packt Publishing</em></span>
</p></li><li style="list-style-type: disc"><p>
<span class="emphasis"><em>Intro to C# Programming and Scripting for Games in Unity</em></span>, <span class="emphasis"><em>Alan Thorn</em></span> (3DMotive video<a id="id131" class="indexterm"></a> course found at <a class="ulink" href="https://www.udemy.com/3dmotive-intro-to-c-programming-and-scripting-for-games-in-unity/" target="_blank">https://www.udemy.com/3dmotive-intro-to-c-programming-and-scripting-for-games-in-unity/</a>)</p></li><li style="list-style-type: disc"><p>
<span class="emphasis"><em>Pro Unity Game Development with C#</em></span>, <span class="emphasis"><em>Alan Thorn</em></span>, <span class="emphasis"><em>Apress</em></span>
</p></li></ul></div><p>The<a id="id132" class="indexterm"></a> following are <a id="id133" class="indexterm"></a>a few online <a id="id134" class="indexterm"></a>resources:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<a class="ulink" href="http://msdn.microsoft.com/en-gb/library/aa288436%28v=vs.71%29.aspx" target="_blank">http://msdn.microsoft.com/en-gb/library/aa288436%28v=vs.71%29.aspx</a>
</p></li><li style="list-style-type: disc"><p>
<a class="ulink" href="http://www.csharp-station.com/tutorial.aspx" target="_blank">http://www.csharp-station.com/tutorial.aspx</a>
</p></li><li style="list-style-type: disc"><p>
<a class="ulink" href="http://docs.unity3d.com/ScriptReference/" target="_blank">http://docs.unity3d.com/ScriptReference/</a>
</p></li></ul></div></div>