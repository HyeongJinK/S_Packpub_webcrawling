<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec29"></a>Visual debugging</h2></div></div><hr /></div><p>Debugging with abstract or textual representations of data (such as <code class="literal">Debug.Log</code>) is often adequate but not <a id="id162" class="indexterm"></a>always optimal. Sometimes, a picture is worth a thousand words. So, for example, when coding the line-of-sight functionality for enemies and other characters that allow them to see the player and other objects whenever they come in range, it's useful to get a live and graphical representation of where the line of sight actually is in the viewport. This line of functionality is drawn in terms of lines or as a wireframe cube. Similarly, if an object is following a path, it'd be great to draw this path in the viewport that displays it as a colored line. The purpose of this is not to create visual aids that will really show in the final game but simply to ease the debugging process that lets us get a better idea of how the game is working. These kinds of helpers or gizmos are a part of visual debugging. Unity already provides us with many gizmos automatically, such as the wireframe bounding box for colliders and frustum for cameras. However, we also have the ability to create our own gizmos for our own objects. This section explores gizmos further.</p><p>As mentioned earlier, many Unity objects, such as colliders, trigger volumes, NavMesh Agents, cameras, and lights, already offer their own visual aids and gizmos when they are selected. These are shown by default in the <span class="strong"><strong>Scene</strong></span> viewport unless you switch them off or reduce their size to zero. So, if you've added a native Unity object and don't see a gizmo in the <span class="strong"><strong>Scene</strong></span> viewport, then be sure to check the <span class="strong"><strong>Gizmo</strong></span> panel that is accessible from the <span class="strong"><strong>Scene</strong></span> toolbar via the <span class="strong"><strong>Gizmo</strong></span> button. Enable all the gizmos you want to see and adjust the <span class="strong"><strong>Size</strong></span> slider that increases or decreases the gizmo size (choose a size that is best for you), as shown here:</p><div class="mediaobject"><img src="/graphics/9781784390655/graphics/0655OT_02_07.jpg" /><div class="caption"><p>Enabling gizmos in the Scene view</p></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note16"></a>Note</h3><p>
<span class="strong"><strong>Gizmos in the Game tab</strong></span>
</p><p>Gizmos don't show by default in the <span class="strong"><strong>Game</strong></span> tab. You can, however, change this behavior easily using the <span class="strong"><strong>Gizmo</strong></span> button in the top-right corner of the <span class="strong"><strong>Game</strong></span> tab toolbar. This menu <a id="id163" class="indexterm"></a>works just like the <span class="strong"><strong>Gizmos</strong></span> menu for the <span class="strong"><strong>Scene</strong></span> tab, as shown in the preceding screenshot.</p></div><p>Consider the following<a id="id164" class="indexterm"></a> code sample 2-6. This is a sample class that can be attached to an object and it relies on the Unity gizmo class to draw a custom range of helper <a id="id165" class="indexterm"></a>gizmos. More information can be found online at <a class="ulink" href="http://docs.unity3d.com/ScriptReference/Gizmos.html" target="_blank">http://docs.unity3d.com/ScriptReference/Gizmos.html</a>. Here, this sample class draws a bounding wireframe sphere of a specified radius centered on the object that represents its range of attack. In addition, it draws a line-of-sight vector that represents the object's forward direction, providing a visual indication of the way the object is facing. All of these gizmos are drawn inside the <code class="literal">OnDrawGizmos</code> event of <code class="literal">MonoBehaviour</code> on the condition that the variable <code class="literal">DrawGizmos</code> is <code class="literal">true</code>:</p><div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;

public class GizmoCube : MonoBehaviour
{
//Show debugging info?
<span class="strong"><strong>    public bool DrawGizmos = true;</strong></span>
 
    //Called to draw gizmos. Will always draw.
    //If you want to draw gizmos for only selected object, then call

    //OnDrawGizmosSelected
<span class="strong"><strong>    void OnDrawGizmos() </strong></span>
    {
        if(!DrawGizmos) return;
 
         //Set gizmo color
         Gizmos.color = Color.blue;
 
        //Draw front vector - show the direction I'm facing
<span class="strong"><strong>        Gizmos.DrawRay(transform.position, transform.forward.normalized *  4.0f);</strong></span>
 
          //Set gizmo color
          //Show proximity radius around cube
          //If cube were an enemy, they would detect the player within this radius
 
Gizmos.color = Color.red;
<span class="strong"><strong>          Gizmos.DrawWireSphere(transform.position, 4.0f);</strong></span>
 
          //Restore color back to white
          Gizmos.color = Color.white;
   }
}</pre></div><p>The following <a id="id166" class="indexterm"></a>screenshot shows how to draw gizmos that helps with debugging:</p><div class="mediaobject"><img src="/graphics/9781784390655/graphics/0655OT_02_08.jpg" /><div class="caption"><p>Drawing gizmos</p></div></div></div>