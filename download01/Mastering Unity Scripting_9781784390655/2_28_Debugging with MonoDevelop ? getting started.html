<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec33"></a>Debugging with MonoDevelop â€“ getting started</h2></div></div><hr /></div><p>Earlier, we encountered the <code class="literal">Debug.Log</code> method of debugging to print helper messages to the console at critical moments in the code to help us see how the program executes. This method, while functional, however, suffers some significant drawbacks. First off, when writing larger programs with many <code class="literal">Debug.Log</code> statements it's easy to effectively "spam" the console with <a id="id182" class="indexterm"></a>excessive messages. This makes it difficult to differentiate between the ones you need and the ones you don't. Second, it's generally a bad practice to change your code by inserting the <code class="literal">Debug.Log</code> statements simply to monitor program flow and find errors. Ideally, we should be able to debug without changing our code. Therefore, we have compelling reasons to find <a id="id183" class="indexterm"></a>alternative ways to debug. MonoDevelop can help us here. Specifically, in the latest releases of Unity, MonoDevelop can natively attach itself to a running Unity process. In doing this, we get access to a range of common debugging tools, the kind encountered when developing other types of software, such as breakpoints and traces. Presently, the connectivity between MonoDevelop and Unity can be buggy however, for some users on some systems. However, when working as intended, MonoDevelop can offer a rich and useful debugging experience that allows us to move beyond simply writing the <code class="literal">Debug.Log</code> statements.</p><p>To start debugging with MonoDevelop, let's consider breakpoints. When debugging code, you'll likely need to observe the program flow when it reaches a specified line. A breakpoint lets you mark one or more lines in a source file from MonoDevelop, and when the program runs in Unity, its execution will pause at the first breakpoint. At this pause, you get the opportunity to examine the code and the status of variables as well as to inspect and edit their values. You can also continue execution with stepping. This lets you push execution forward to the next line, following the normal program logic line-by-line. You get the opportunity of inspecting your code in each line as it passes. Let's see an example case. The following code sample 2-9 shows a simple script file. When attached to an object, it retrieves a list of all objects in the scene (including itself) and then<a id="id184" class="indexterm"></a> sets their position to the world origin (0, 0, 0) when the <span class="strong"><strong>Start</strong></span> function is executed, which occurs at level startup:</p><div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;
 
public class DebugTest : MonoBehaviour 
{
   // Use this for initialization
void Start () 
    {
         //Get all game objects in scene
         Transform[] Objs = Object.FindObjectsOfType&lt;Transform&gt;();
 
         //Cycle through all objects
         for(int i=0; i&lt;Objs.Length; i++)
         {
               //Set object to world origin
<span class="strong"><strong>               Objs[i].position = Vector3.zero;</strong></span>
         }
    }
 }</pre></div><p>Let's set a breakpoint in the highlighted line via MonoDevelop. This will pause the program execution whenever it reaches this line. To set the breakpoint, position your mouse cursor on the highlighted line, right-click on the left-hand gray margin, and choose <span class="strong"><strong>New Breakpoint</strong></span>. Otherwise, use the MonoDevelop application menu to choose the <span class="strong"><strong>New Breakpoint</strong></span> option in <span class="strong"><strong>Run</strong></span>, or you can also press the <span class="emphasis"><em>F9</em></span> key (or you can left-click on the line number), as shown here:</p><div class="mediaobject"><img src="/graphics/9781784390655/graphics/0655OT_02_17.jpg" /><div class="caption"><p>Creating a new breakpoint in MonoDevelop</p></div></div><p>The breakpoint line will be highlighted in red. To get this breakpoint to work properly with Unity when the <a id="id185" class="indexterm"></a>game runs, you'll need to attach MonoDevelop to the running Unity process. To do this, make sure that the Unity Editor is running alongside MonoDevelop and then choose the <span class="strong"><strong>Attach to Process</strong></span> option from <span class="strong"><strong>Run</strong></span> from the MonoDevelop application menu, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781784390655/graphics/0655OT_02_18.jpg" /><div class="caption"><p>Attach to Process</p></div></div><p>The <span class="strong"><strong>Attach to Process</strong></span> dialog appears, and the <span class="strong"><strong>Unity Editor</strong></span> should be listed as <span class="strong"><strong>Process Name</strong></span> to which MonoDevelop can be attached. The <span class="strong"><strong>Debugger</strong></span> drop-down list in the bottom-left corner of the<a id="id186" class="indexterm"></a> window should be specified as <span class="strong"><strong>Unity Debugger</strong></span>. Select the <span class="strong"><strong>Unity Editor</strong></span> option and then choose the <span class="strong"><strong>Attach</strong></span> button, as shown here:</p><div class="mediaobject"><img src="/graphics/9781784390655/graphics/0655OT_02_19.jpg" /><div class="caption"><p>Select Unity Editor from the Attach to Process dialog</p></div></div><p>When MonoDevelop is attached to Unity as a process, two new bottom-aligned panes will dock themselves to the MonoDevelop interface, and these include the <span class="strong"><strong>Watch</strong></span> window and the <span class="strong"><strong>Immediate</strong></span> window, as shown in the following screenshot. These windows offer additional<a id="id187" class="indexterm"></a> debugging information and views when your game runs in the Unity Editor, as we'll see in the next section.</p><div class="mediaobject"><img src="/graphics/9781784390655/graphics/0655OT_02_20.jpg" /><div class="caption"><p>Two new panes dock themselves to MonoDevelop when attaching to a Unity process</p></div></div><p>Next, return to the Unity Editor and make sure that the script file <code class="literal">DebugTest.cs</code>, as shown in code sample 2-9, is attached to an object in the scene and that the scene includes other objects (any objects, such as cubes or cylinders). Then, run your game using the play button from the Unity toolbar, as shown here:</p><div class="mediaobject"><img src="/graphics/9781784390655/graphics/0655OT_02_21.jpg" /><div class="caption"><p>Running from the Unity Editor in preparation for debugging with MonoDevelop</p></div></div><p>When you press the play button on the Unity toolbar with MonoDevelop attached, the execution of Unity will freeze when the breakpoint is reached (the break mode). The focus will switch to the MonoDevelop window with the breakpoint line highlighted in yellow inside the source<a id="id188" class="indexterm"></a> file that indicates the current step of execution, as shown in the following screenshot. During this mode, you cannot use the Unity Editor, and you cannot switch between viewports or even edit settings inside the Object Inspector as you can with in-editor debugging. MonoDevelop is waiting exclusively for your input to resume execution. The next few sections will consider some useful debugging tools that you can use in the break mode.</p><div class="mediaobject"><img src="/graphics/9781784390655/graphics/0655OT_02_22.jpg" /><div class="caption"><p>Entering the break mode from within MonoDevelop</p></div></div></div>