<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch10lvl1sec97"></a>AssetBundles and external files</h2></div></div><hr /></div><p>If youâ€™re using Unity<a id="id756" class="indexterm"></a> Pro and want to offer dynamic content to users, allowing gamers to<a id="id757" class="indexterm"></a> <span class="strong"><strong>modify</strong></span> (<span class="strong"><strong>mod</strong></span>) game content, add their own assets, and add-ons, as well as support your own add-ons and plugins, then AssetBundles can be useful. AssetBundles<a id="id758" class="indexterm"></a> let you package together many disparate Unity assets into a single, external file outside the main project, which can be loaded into any Unity project dynamically, either from a local file on disk or via the Internet:</p><div class="mediaobject"><img src="/graphics/9781784390655/graphics/0655OT_10_24.jpg" /><div class="caption"><p>Building AssetBundles from selected assets</p></div></div><p>To get started, import the Unity asset bundle editor script to build AssetBundles easily from the <span class="strong"><strong>Project</strong></span> panel. To do this, paste the<a id="id759" class="indexterm"></a> following code sample<a id="id760" class="indexterm"></a> 10-2 into a C# script file located inside an <code class="literal">Editor</code> folder in your project; otherwise, you can<a id="id761" class="indexterm"></a> download the script from: <a class="ulink" href="http://docs.unity3d.com/ScriptReference/BuildPipeline.BuildAssetBundle.html" target="_blank">http://docs.unity3d.com/ScriptReference/BuildPipeline.BuildAssetBundle.html</a>:</p><div class="informalexample"><pre class="programlisting">  // C# Example
  // Builds an asset bundle from the selected objects in the
  // project view.
  // Once compiled go to "Menu" -&gt; "Assets" and select one of the
  // choices to build the Asset Bundle

  using UnityEngine;
  using UnityEditor;
  public class ExportAssetBundles {
    [MenuItem("Assets/Build AssetBundle From Selection - Track dependencies")]
    static void ExportResource () {
      // Bring up save panel
      string path = EditorUtility.SaveFilePanel ("Save Resource", "", "New Resource", "unity3d");
      if (path.Length != 0) {
        // Build the resource file from the active selection.
        Object[] selection = Selection.GetFiltered(typeof(Object), SelectionMode.DeepAssets);
        BuildPipeline.BuildAssetBundle(Selection.activeObject, selection, path,
          BuildAssetBundleOptions.CollectDependencies | BuildAssetBundleOptions.CompleteAssets);
        Selection.objects = selection;
      }
    }
    [MenuItem("Assets/Build AssetBundle From Selection - No dependency tracking")]
    static void ExportResourceNoTrack () {
      // Bring up save panel
      string path = EditorUtility.SaveFilePanel ("Save Resource", "", "New Resource", "unity3d");
      if (path.Length != 0) {
        // Build the resource file from the active selection.
        BuildPipeline.BuildAssetBundle(Selection.activeObject, Selection.objects, path);
      }
    }
  }</pre></div><p>To make an AssetBundle, select all the assets in the <span class="strong"><strong>Project</strong></span> panel to be included in the bundle and then go to <span class="strong"><strong>Assets</strong></span> | <span class="strong"><strong>Build AssetBundle from Selection</strong></span> from the menu bar. Once selected, choose<a id="id762" class="indexterm"></a> a location on your computer where the bundle should be saved.</p><div class="mediaobject"><img src="/graphics/9781784390655/graphics/0655OT_10_25.jpg" /><div class="caption"><p>Selecting assets to be included in an AssetBundle</p></div></div><p>Then, to test the AssetBundle, create a new project or open a different project without the assets, and you can load them into<a id="id763" class="indexterm"></a> your project at runtime using the <code class="literal">WWW</code> class. See the following code sample 10-3 for a sample script that downloads an AssetBundle from a local file, extracts a texture asset, and assigns it to the material of an attached mesh renderer component:</p><div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;

public class LoadAssetBundle : MonoBehaviour
{
  //Mesh Renderer Reference
  private MeshRenderer MR = null;

  // Use this for initialization
  IEnumerator Start ()
  {
    //Get asset bundle file from local machine
    WWW www = new WWW (@"file:///c:\asset_textures.unity3d");

    //Wait until load is completed
    yield return www;

    //Retrieve texture from asset bundle
    Texture2D Tex = www.assetBundle.Load("texture_wood",typeof(Texture2D)) as Texture2D;

    //Assign texture in bundle to mesh
    MR = GetComponent&lt;MeshRenderer&gt;();
    MR.material.mainTexture = Tex;
  }
}</pre></div><p>This is how the<a id="id764" class="indexterm"></a> texture asset<a id="id765" class="indexterm"></a> will look:</p><div class="mediaobject"><img src="/graphics/9781784390655/graphics/0655OT_10_26.jpg" /><div class="caption"><p>Loading a texture asset from an AssetBundle onto a mesh renderer</p></div></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip69"></a>Tip</h3><p>More information on <a id="id766" class="indexterm"></a>AssetBundles can be found in the online Unity documentation at <a class="ulink" href="http://docs.unity3d.com/Manual/AssetBundlesIntro.html" target="_blank">http://docs.unity3d.com/Manual/AssetBundlesIntro.html</a>.</p></div></div>