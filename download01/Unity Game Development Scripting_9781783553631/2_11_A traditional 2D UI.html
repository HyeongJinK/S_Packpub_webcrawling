<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec17"></a>A traditional 2D UI</h2></div></div><hr /></div><p>To start <a id="id69" class="indexterm"></a>our GUI programming, we'll create some buttons, a health bar, a level counter, and an experience counter. All of these are common in a variety of video games and are key elements to game design.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec31"></a>Setting up our scene</h3></div></div></div><p>Since in <a id="id70" class="indexterm"></a>this part of the chapter we will be dealing with 3D space, we'll<a id="id71" class="indexterm"></a> need to set up a scene to test with. We'll only need a basic test level, so create a new scene and name it <code class="literal">Chapter 2</code>. Add a cube or plane for the floor, a directional light, a GameObject for our enemy, and two quads. This is what my scene looks like:</p><div class="mediaobject"><img src="/graphics/9781783553631/graphics/3631OT_02_01.jpg" /></div><p>Set the<a id="id72" class="indexterm"></a> two quads in the same position just above your enemy <a id="id73" class="indexterm"></a>object and rotate one of them by 180 degrees so that the two quads look like one object. Drag one of the quads onto the other, making a parent-child object. Now that our scene is ready, let's get to the scripting.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec32"></a>Housing our 2D UI</h3></div></div></div><p>Before we <a id="id74" class="indexterm"></a>start creating our 2D UI, let's make the script to house it all. Create a new C# script and name it <code class="literal">GUI_2D</code>. Inside the script, remove the <code class="literal">Update</code> function. Add a <code class="literal">OnGUI()</code> function. Finally, add <code class="literal">System.Collections.Generic</code> to your using statements; we'll need this for some of our variables.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec33"></a>Creating GUI buttons</h3></div></div></div><p>Our<a id="id75" class="indexterm"></a> first step in creating 2D buttons in our GUI will be <a id="id76" class="indexterm"></a>to add these variables:</p><div class="informalexample"><pre class="programlisting">List&lt;Rect&gt; SkillButtons = new List&lt;Rect&gt;();
List&lt;Rect&gt; ItemButtons = new List&lt;Rect&gt;();</pre></div><p>We will use these two <code class="literal">List</code> arrays as containers to hold the rectangles for our buttons. For now, they aren't public but if you wanted to expose them to <span class="strong"><strong>Inspector</strong></span>, you could make<a id="id77" class="indexterm"></a> them public.</p><p>Next, we'll need <a id="id78" class="indexterm"></a>to add rectangles to our lists. Add this block of code to our <code class="literal">Start()</code> function:</p><div class="informalexample"><pre class="programlisting">SkillButtons.Add(new Rect(Screen.width/2 + 50, Screen.height/2 + 333, 55, 55));
SkillButtons.Add(new Rect(Screen.width/2 + 105, Screen.height/2  + 333, 55, 55));
SkillButtons.Add(new Rect(Screen.width/2 + 160, Screen.height/2  + 333, 55, 55));
ItemButtons.Add(new Rect(Screen.width/2 - 160, Screen.height/2  + 333, 55, 55));
ItemButtons.Add(new Rect(Screen.width/2 - 105, Screen.height/2  + 333, 55, 55));
ItemButtons.Add(new Rect(Screen.width/2 - 50, Screen.height/2 + 333, 55, 55));</pre></div><p>Here, we will add three buttons to each of our lists. We place our skill buttons to the right of the center of the screen, and we place the item buttons to the left of the center of the screen. Also, all of our buttons have a width and height of <code class="literal">55</code>.</p><p>Our last step in creating our buttons is to draw them. We will add this code to our <code class="literal">OnGUI()</code> function:</p><div class="informalexample"><pre class="programlisting">GUI.Button(SkillButtons[0], "Skill A");
GUI.Button(SkillButtons[1], "Skill B");
GUI.Button(SkillButtons[2], "Skill C");
GUI.Button(ItemButtons[0], "Item A");
GUI.Button(ItemButtons[1], "Item B");
GUI.Button(ItemButtons[2], "Item C");</pre></div><p>What each of these lines does is draw our button at the location of our rectangles, which we stored in our lists. They also provide text to be displayed on the button; we will use placeholder text as an example.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec34"></a>Creating a health bar</h3></div></div></div><p>To create<a id="id79" class="indexterm"></a> a health bar, we will use a GUI box. First, we'll need to<a id="id80" class="indexterm"></a> add a few variables to calculate our health and the length of the bar:</p><div class="informalexample"><pre class="programlisting">public float currentHP = 100;
public float maxHP = 100;
public float currentBarLength;
public float maxBarLength = 100;</pre></div><p>We have two variables for our health and bar length: one for the current amount and the other for the maximum amount. Our variables are set to <code class="literal">public</code> so that we can access them from outside our script.</p><p>Finally, to<a id="id81" class="indexterm"></a> make the health bar, we'll need to add a couple of lines <a id="id82" class="indexterm"></a>to the <code class="literal">OnGUI()</code> function to draw it on the screen:</p><div class="informalexample"><pre class="programlisting">currentBarLength = currentHP * maxBarLength / maxHP;
GUI.Box(new Rect(Screen.width/2 - 20, Screen.height/2 + 300, currentBarLength, 25f), "");</pre></div><p>The first line of the code will draw our health bar. We set its location to be just above our buttons we created earlier. The second line of the code calculates how long the health bar will be. It multiplies the current amount of health by the maximum bar length, and then divides it by the maximum amount of health. All of these are variables that we've set to <code class="literal">100</code>, but can be modified to make the bar bigger or smaller.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec35"></a>Level counter</h3></div></div></div><p>Our <a id="id83" class="indexterm"></a>level counter will be used to show the player's current level. It's a <a id="id84" class="indexterm"></a>simple yet gratifying GUI element for the player. We'll only need one variable for the counter:</p><div class="informalexample"><pre class="programlisting">public int currentLevel = 1;
public GUIStyle myStyle;</pre></div><p>We'll use <code class="literal">currentLevel</code> to show the player's current level. The <code class="literal">GUIStyle</code> variable will be used to<a id="id85" class="indexterm"></a> access the properties of our GUI label. To draw this on the screen, we'll use a GUI label; add this line of code to the <code class="literal">OnGUI()</code> function:</p><div class="informalexample"><pre class="programlisting">GUI.Label(new Rect(Screen.width/2 + 15, Screen.height/2 + 335, 30, 30), currentLevel.ToString(), myStyle);</pre></div><p>What this line of code does is draw the <code class="literal">currentLevel</code> variable on our screen, between the two sets of buttons.</p><p>In the <code class="literal">Start()</code> function, add this line of code at the end:</p><div class="informalexample"><pre class="programlisting">myStyle.fontSize = 36;</pre></div><p>We add this so that we can edit the size of the label font.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec36"></a>Creating an experience counter</h3></div></div></div><p>The <a id="id86" class="indexterm"></a>experience counter will show the player how much<a id="id87" class="indexterm"></a> experience they earned as well as how much more experience is left until they gain a new level. To show this, we will use two GUI boxes: one for the player's current experience amount and the other for the total amount of experience possible.</p><p>First, we'll need to add a few variables; they'll be similar to the ones we used in the health bar:</p><div class="informalexample"><pre class="programlisting">public float maxExperience = 100;
public float currentExperience = 0;
public float currentExpBarLength;
public float maxExpBarLength = 100;</pre></div><p>Our next step will be to draw it in the <code class="literal">OnGUI()</code> function:</p><div class="informalexample"><pre class="programlisting">  currentExpBarLength = currentExperience * maxExpBarLength / maxExperience;
if(currentExpBarLength &gt; 5)
  GUI.Box(new Rect(Screen.width/2 - 20, Screen.height/2 - 300, currentExpBarLength, 25), "");
  GUI.Box(new Rect(Screen.width/2 - 20, Screen.height/2 - 300, maxExperience, 25), "");</pre></div><p>As you<a id="id88" class="indexterm"></a> can see, we follow the same code as we did to<a id="id89" class="indexterm"></a> draw our health bar, except we draw two boxes on top of each other. The first box represents the current amount of experience; it only shows when the player has earned more than five experiences. This is to prevent the box from looking inside-out. The second box shows the maximum amount of experience.</p><p>Our next step will be to reset our experience and increase our level when the maximum amount of experience is gained. Enter this code:</p><div class="informalexample"><pre class="programlisting">if(currentExpBarLength &gt;= maxExpBarLength)
{
  currentExpBarLength = 0;
  currentExperience = 0;
  currentLevel++;
}</pre></div><p>In the preceding <code class="literal">if</code> statement, we check to see whether our current experience bar length is greater or equal to the maximum of the experience bar length. If it is, we reset our current experience and current experience bar length to <code class="literal">0</code>. Then, finally, we increase our current level. The 2D section of this chapter is now complete. This is what our scene looks like now with our 2D GUI:</p><div class="mediaobject"><img src="/graphics/9781783553631/graphics/3631OT_02_02.jpg" /><div class="caption"><p>Building an immersive 3D UI</p></div></div><p>For <a id="id90" class="indexterm"></a>our 3D GUI, we'll create similar elements<a id="id91" class="indexterm"></a> that are used in 2D. We will create health bars, damage reports, and enemy name tags that will all appear to be in 3D.</p></div></div>