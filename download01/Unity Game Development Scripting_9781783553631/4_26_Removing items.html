<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec30"></a>Removing items</h2></div></div><hr /></div><p>Now, we'll <a id="id219" class="indexterm"></a>add the second most important aspect of inventories, removing items! This is handy for those times when a player uses their health potion, sells an item, shoots a rocket, or drops their coins!</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec59"></a>Let's figure this out</h3></div></div></div><p>Just like we did when we added items, let's take a moment to think about how we want to remove <a id="id220" class="indexterm"></a>items from the inventory. Again, from the player's point of view, how is this done? Well when they sell the item, they are selecting the item personally. If the player shoots their gun or bow, their ammo is dispensed immediately. When the player meets their untimely death, their items may be dropped on the ground or left on their corpse to be looted by their assailant. During the selling item phase and shooting gun action, they pick what item they want to get rid of from their inventory. We will follow a similar process when removing items from the inventory.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec60"></a>Creating the removing function</h3></div></div></div><p>Add<a id="id221" class="indexterm"></a> the following<a id="id222" class="indexterm"></a> function to the script, just below the <code class="literal">AddToInventory</code> function:</p><div class="informalexample"><pre class="programlisting">void RemoveFromInventory(int HowMany, GameObject Item)
{
  for(int i = 0; i &lt; items.Capacity; i++)
  {
    if(invItems[i].name != "Empty")
    {
      if(invItems[i].name == Item.name)
      {
        int val = itemCount[i].Value - HowMany;
        itemCount[i] = new KeyValuePair&lt;int, int&gt;(itemCount[i].Key, val);
        if(itemCount[i].Value &lt;= 0)
        {
          invItems[i] = EmptyObject;
          items[i] = new KeyValuePair&lt;int, GameObject&gt;(i, EmptyObject);
          itemCount[i] = new KeyValuePair&lt;int, int&gt;(itemCount[i].Key, 0);
        }
        break;
      }
    }
  }
}</pre></div><p>Just as <a id="id223" class="indexterm"></a>when we added items to the inventory, we <a id="id224" class="indexterm"></a>pass an <code class="literal">int</code> variable and a GameObject to this function. The <code class="literal">int</code> variable is the<a id="id225" class="indexterm"></a> number of the items we want to remove, and the GameObject is the actual item that we want to remove. Now we iterate through the items array, which is the array holding our inventory of items.</p><p>First we check whether the current <code class="literal">invItem</code> variable's name isn't <code class="literal">"Empty"</code>. If it isn't, then we move on to see whether the name of the current <code class="literal">invItem</code> variable is equal to the name of the item we want to remove from the inventory. Similar to how we added items to the inventory, we'll need to create a new <code class="literal">int</code> variable, which will hold the value of the item that we'll decrease. This time, <code class="literal">val</code> will be equal to the current <code class="literal">itemCount</code> value subtracted from the <code class="literal">HowMany</code> integer that was passed into the function. We then assign the current <code class="literal">itemCount</code> variable a new <code class="literal">KeyValuePair</code> variable, using the same key as <code class="literal">key</code> and using <code class="literal">val</code> as the value.</p><p>Now, we do something a little different from what we did while adding items. We check whether the current <code class="literal">itemCount</code> value is less than or equal to zero; if it is, we have to do a few things. When an item has an amount of zero or less we have to remove it from the inventory.</p><p>Our first step to remove the item from the inventory will be to set the current <code class="literal">invItem</code> value to our <code class="literal">EmptyObject</code> variable, the placeholder. Next, we set the current item's <code class="literal">KeyValuePair</code> variable to new <code class="literal">KeyValuePair</code>, the new <code class="literal">KeyValuePair</code> variable will have the iterator as the key and the <code class="literal">EmptyObject</code> GameObject as its value. Finally, we set the current <code class="literal">itemCount</code> <code class="literal">KeyValuePair</code> to a new <code class="literal">KeyValuePair</code> as well. Its key will stay the same, but we set the value to <code class="literal">0</code>.</p><p>After this is<a id="id226" class="indexterm"></a> all done, we stop the loop with <code class="literal">break</code>. Remember<a id="id227" class="indexterm"></a> when we checked whether the current <code class="literal">invItems</code> name was equal to <code class="literal">"Empty"</code>? If it does happen to be <code class="literal">"Empty"</code>, we use break again to stop the loop. We can't remove the item from the inventory, since it is in the inventory to begin with!</p><p>With that, you now have the ability to remove items from the inventory. When the player sells an item, shoots an arrow, use a health potion, or anything similar to these situations, you can remove that specific item from the inventory. This may seem like a daunting task, but there is a way around this. You can also use the <code class="literal">InitializeInventory</code> function that we first created to reset the inventory, since that is essentially what that function does.</p></div></div>