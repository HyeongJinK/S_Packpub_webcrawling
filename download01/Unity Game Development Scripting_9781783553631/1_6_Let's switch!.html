<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch01lvl1sec13"></a>Let's switch!</h2></div></div><hr /></div><p>Now, we'll create a way for <a id="id44" class="indexterm"></a>the player to switch between PC and Xbox 360 Controller controls.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec21"></a>Creating control profiles</h3></div></div></div><p>To create our <a id="id45" class="indexterm"></a>profiles, we'll need to add a new variable. Add the following <span class="strong"><strong>enum</strong></span><a id="id46" class="indexterm"></a> to the top of our script, before the class declaration:</p><div class="informalexample"><pre class="programlisting">public enum ControlProfile { PC, Controller };</pre></div><p>Add it to your variables as well, like this:</p><div class="informalexample"><pre class="programlisting">public ControlProfile cProfile;</pre></div><p>Finally, go to the <code class="literal">DetectController()</code> function. Add this line of code before the line of code where you call the <code class="literal">IdentifyController()</code> function in the <code class="literal">if</code> statement:</p><div class="informalexample"><pre class="programlisting">cProfile = ControlProfile.Controller;</pre></div><p>After this, add an <code class="literal">else</code> statement to the <code class="literal">if</code> statement with another line of code after it:</p><div class="informalexample"><pre class="programlisting">else
  cProfile = ControlProfile.PC;</pre></div><p>We are setting our enum variable in the <code class="literal">DetectController()</code> function to give us a default control profile. This is a fast and effective way to give our player the best control profile possible.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec22"></a>Adding a profile switching function</h3></div></div></div><p>Next, we'll add a<a id="id47" class="indexterm"></a> function that we can call to manually switch the control profile. Add this function to our code:</p><div class="informalexample"><pre class="programlisting">void SwitchProfile (ControlProfile Switcher)
{
  cProfile = Switcher;
}</pre></div><p>We can call this function later to let the player choose between using the keyboard/mouse or the Xbox 360 Controller.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec23"></a>Adding the GUI interaction function</h3></div></div></div><p>Now, we'll <a id="id48" class="indexterm"></a>add a button to the bottom right of our controls page to let the player pick between the keyboard/mouse and Xbox 360 Controller. Add this code to your <code class="literal">onGUI()</code> function, just before the line where we end the group:</p><div class="informalexample"><pre class="programlisting">GUI.Label(new Rect(450, 345, 125, 20), "Current Controls");
if(GUI.Button(new Rect(425, 370, 135, 20), cProfile.ToString()))
{
  if(cProfile == ControlProfile.Controller)
    SwitchProfile(ControlProfile.PC);
  else
    SwitchProfile(ControlProfile.Controller);
}</pre></div><p>The text on the button will display which current control profile is being used. When the player clicks on the button, it will switch the control profile.</p></div></div>