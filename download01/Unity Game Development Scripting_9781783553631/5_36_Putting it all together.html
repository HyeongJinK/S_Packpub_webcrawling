<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch05lvl1sec39"></a>Putting it all together</h2></div></div><hr /></div><p>To<a id="id337" class="indexterm"></a> wrap up our AI package, we will now finish up the script and add it to the skeleton.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec79"></a>Final coding touches</h3></div></div></div><p>At the <a id="id338" class="indexterm"></a>beginning of our AI script, we created some variables<a id="id339" class="indexterm"></a> that we have yet to properly assign. We will do that in the <code class="literal">Start</code> function. We will also add the <code class="literal">Update</code> function to run our AI code. Add these functions to the bottom of the class:</p><div class="informalexample"><pre class="programlisting">void Start()
{
  navAgent = GetComponent&lt;NavMeshAgent&gt;();

  Stats.Add(new KeyValuePair&lt;string, int&gt;("Health", 100));
  Stats.Add(new KeyValuePair&lt;string, int&gt;("Speed", 10));
  Stats.Add(new KeyValuePair&lt;string, int&gt;("Damage", 25));
  Stats.Add(new KeyValuePair&lt;string, int&gt;("Agility", 25));
  Stats.Add(new KeyValuePair&lt;string, int&gt;("Accuracy", 60));
}

void Update ()
{
  RunBehaviors();
}</pre></div><p>In <a id="id340" class="indexterm"></a>the <code class="literal">Start</code> function, we first assign the <code class="literal">navAgent</code> variable<a id="id341" class="indexterm"></a> by getting the <code class="literal">NavMeshAgent</code> component from the GameObject. Next, we add new <code class="literal">KeyValuePair</code> variables to the <code class="literal">Stats</code> array. The <code class="literal">Stats</code> array is now filled with a few stats that we created.</p><p>The <code class="literal">Update</code> function calls the <code class="literal">RunBehaviors</code> function. This is what will keep the AI running; it will run the correct behavior as long as the AI is active.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec80"></a>Filling out the inspector</h3></div></div></div><p>To <a id="id342" class="indexterm"></a>complete the AI package, we will need to add the <a id="id343" class="indexterm"></a>script to the skeleton, so drag the script onto the skeleton in the <span class="strong"><strong>Hierarchy</strong></span> window. In the <span class="strong"><strong>Size</strong></span> property of the waypoints array, type the number <code class="literal">5</code> and open up the drop-down list. Starting with <code class="literal">Element 0</code>, drag each of the waypoints into the empty slots.</p><p>For the projectile, create a sphere GameObject and make it a prefab. Now, drag it onto the empty slot next to <span class="strong"><strong>Projectile</strong></span>. Finally, set the AI <span class="strong"><strong>Behaviors</strong></span> to <span class="strong"><strong>Guard</strong></span>. This will make it so that when you start the scene, your AI will be patrolling. The <span class="strong"><strong>Inspector</strong></span> window of the skeleton should look something like this:</p><div class="mediaobject"><img src="/graphics/9781783553631/graphics/3631OT_05_07.jpg" /></div><p>Your <a id="id344" class="indexterm"></a>AI is now ready for gameplay! To make sure <a id="id345" class="indexterm"></a>everything works, we will need to do some playtesting.</p></div></div>