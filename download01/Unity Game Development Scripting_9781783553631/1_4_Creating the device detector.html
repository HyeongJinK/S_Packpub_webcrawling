<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch01lvl1sec11"></a>Creating the device detector</h2></div></div><hr /></div><p>The first function<a id="id28" class="indexterm"></a> we'll create is one that will detect whether we actually have a gamepad plugged in. Unity inherently gives us a way to make this very easy.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec16"></a>Adding the variables needed</h3></div></div></div><p>First, we'll <a id="id29" class="indexterm"></a>add variables that we'll use in the detection and identification functions. Add these to the top of your script, just after the class declaration:</p><div class="informalexample"><pre class="programlisting">bool isControllerConnected = false;
public string Controller = "";</pre></div><p>This Boolean will be used in later functions to determine whether there is a gamepad connected. The string will be used to hold the name of the gamepad connected.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec17"></a>Creating the detection function</h3></div></div></div><p>Our <a id="id30" class="indexterm"></a>next step is to <a id="id31" class="indexterm"></a>add the <code class="literal">DetectController</code> function. This will use the Boolean we created earlier and check whether there is a gamepad connected. Add the following code to your script:</p><div class="informalexample"><pre class="programlisting">void DetectController()
{
  try
  {
    if(Input.GetJoystickNames()[0] != null)
    {
      isControllerConnected = true;
      IdentifyController();
    }
  }
  catch
  {
    isControllerConnected = false;
  }
}</pre></div><p>This function uses the <code class="literal">GetJoystickNames</code> function<a id="id32" class="indexterm"></a> of the input, which gets and returns an array of strings, which consists of the names of the connected gamepads. We use this to set our Boolean to <a id="id33" class="indexterm"></a>true or false; true meaning there's a device connected and false meaning that the game couldn't detect a device. The reason we use a try-catch expression is because if there is no gamepad connected <code class="literal">Input.GetJoystickNames()</code><a id="id34" class="indexterm"></a> will give you an <code class="literal">IndexOutOfRangeException</code> error.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec18"></a>Creating the identifier function</h3></div></div></div><p>Our last <a id="id35" class="indexterm"></a>step in creating the device detector will <a id="id36" class="indexterm"></a>be to add the ability to identify the gamepad connected. Add this function to the script, just below the <code class="literal">DetectController</code> function:</p><div class="informalexample"><pre class="programlisting">void IdentifyController()
{
  Controller = Input.GetJoystickNames()[0];
}</pre></div><p>As you can see, we are assigning the name of the gamepad connected to our <code class="literal">Controller</code> variable. To use this function, call it within the <code class="literal">DetectController</code> function, in the <code class="literal">if</code> statement, where we set <code class="literal">isControllerConnected</code> to <code class="literal">true</code>.</p></div></div>