<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch05lvl1sec38"></a>Character animations</h2></div></div><hr /></div><p>Animations <a id="id329" class="indexterm"></a>are what bring the characters to life visually in the game. From basic animations to super realistic movements, all the animations are important and really represent what scripters do to the player. Before we add animations to our AI, we first need to get a model mesh for it!</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec77"></a>Importing the model mesh</h3></div></div></div><p>For this<a id="id330" class="indexterm"></a> chapter, I am using a model <a id="id331" class="indexterm"></a>mesh that I got from the Unity Asset Store. To use the same model mesh that I am using, go to the Unity Asset Store and search for <span class="emphasis"><em>Skeletons Pack</em></span>. It is a package of four skeleton model meshes that are fully textured, propped, and animated. The asset itself is free and great to use.</p><p>When you import the package into Unity, it will come with all four models as well as their textures, and an example scene named <code class="literal">ShowCase</code>. Open that scene and you should see the four skeletons. If you run the scene, you will see all the skeletons playing their idle animations.</p><p>Choose the skeleton you want to use for your AI; I chose <span class="strong"><strong>skeletonDark</strong></span> for mine. Click on the drop-down list of your skeleton in the <span class="strong"><strong>Hierarchy</strong></span> window, and then on the <span class="strong"><strong>Bip01</strong></span> drop-down list. Then, select the <span class="strong"><strong>magicParticle</strong></span> object. For our AI, we will not need it, so delete it from the <span class="strong"><strong>Hierarchy</strong></span> window.</p><p>Create a new prefab in the <span class="strong"><strong>Project</strong></span> window and name it <code class="literal">Skeleton</code>. Now select the skeleton that you want to use from the <span class="strong"><strong>Hierarchy</strong></span> window and drag it onto the newly created prefab. This will now be the model that you will use for this chapter.</p><p>In your AI test scene, drag and drop <span class="strong"><strong>Skeleton</strong></span> <span class="strong"><strong>Prefab</strong></span> onto the scene. I have placed mine towards the center of the level, near the waypoint in the middle. In the <span class="strong"><strong>Inspector</strong></span> window, you will be able to see the <span class="strong"><strong>Animation</strong></span> component full of animations for the model.</p><p>Now, we will need to add a few components to our skeleton. Go to the <span class="strong"><strong>Components</strong></span> menu on the top of the <span class="strong"><strong>Unity</strong></span> window, select <span class="strong"><strong>Navigation</strong></span>, and then select <span class="strong"><strong>NavMesh Agent</strong></span>. Doing this will allow the skeleton to utilize the NavMesh we created earlier. Next, go into the <span class="strong"><strong>Components</strong></span> menu again and click on <span class="strong"><strong>Capsule Collider</strong></span> as well as <span class="strong"><strong>Rigidbody</strong></span>. Your <span class="strong"><strong>Inspector</strong></span> window should now look like this after adding the components:</p><div class="mediaobject"><img src="/graphics/9781783553631/graphics/3631OT_05_06.jpg" /></div><p>Your <a id="id332" class="indexterm"></a>model <a id="id333" class="indexterm"></a>now has all the necessary components needed to work with our AI script.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec78"></a>Scripting the animations</h3></div></div></div><p>To script<a id="id334" class="indexterm"></a> our animations, we will take a simple <a id="id335" class="indexterm"></a>approach to it. There won't be a lot of code to deal with, but we will spread it out in various areas of our script where we need to play the animations. In the <code class="literal">Idle</code> function, add this line of code:</p><div class="informalexample"><pre class="programlisting">animation.Play("idle");</pre></div><p>This simple line of code will play the <code class="literal">idle</code> animation. We use animation to access the model's animation component, and then use the <code class="literal">Play</code> function of that component to play the animation. The <code class="literal">Play</code> function<a id="id336" class="indexterm"></a> can take the name of the animation to call the correct animation to be played; for this one, we call the <code class="literal">idle</code> animation.</p><p>In the <code class="literal">SearchForTarget</code> function, add this line of code to the script:</p><div class="informalexample"><pre class="programlisting">animation.Play("run");</pre></div><p>We access the same function of the animation component and call the <code class="literal">run</code> animation to play here. Add the same line of code to the <code class="literal">Patrol</code> function as well, since we will want to use that animation for that function too.</p><p>In the <code class="literal">RangedAttack</code> and <code class="literal">MeleeAttack</code> functions, add this code:</p><div class="informalexample"><pre class="programlisting">animation.Play("attack");</pre></div><p>Here, we call the <code class="literal">attack</code> animation. If we had a separate animation for ranged attacks, we would use that instead, but since we don't, we will utilize the same animation for both attack types. With this, we finished coding the animations into our AI. It will now play those animations when they are called during gameplay.</p></div></div>