<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec20"></a>The self item class</h2></div></div><hr /></div><p>The first<a id="id124" class="indexterm"></a> item class we'll create is for an item that affects the player upon usage. Items that players use typically affects their various stats either by adding or removing them or buffing/debuffing them for a certain amount of time. Now let's start scripting; create a new script and name it <code class="literal">itemSelf</code>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec42"></a>Adding our variables</h3></div></div></div><p>Our first <a id="id125" class="indexterm"></a>set of variables will actually be added outside <a id="id126" class="indexterm"></a>of our class as they are enum variables:</p><div class="informalexample"><pre class="programlisting">public enum SelfAction {BuffDebuff, ChangeHP, ChangeArmor, None};
public enum SelfType {Armor, Potion, None};</pre></div><p>The first enum we created will be used to pick what the item does. We've got a few options for our items, but this can be expanded and customized to your liking. The second enum we use will determine of what type the item is; for now, we're just checking to see whether it's a potion or armor. Now let's add the rest of our variables:</p><div class="informalexample"><pre class="programlisting">public GameObject Player;
public int Amount, Value, ArmorAmount;
public float Weight;
public string Name, Stat;
public SelfAction selfAction = SelfAction.None;
public SelfType selfType = SelfType.None;</pre></div><p>We add a GameObject so that we have a player reference to adjust stats. The rest of the variables we added are for the item stats. Finally, we add our two enums to our list of variables. We make these variables public so that anyone can just drag-and-drop the scripts for easy item creation.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec43"></a>Buff or debuff stats</h3></div></div></div><p>The <a id="id127" class="indexterm"></a>first <a id="id128" class="indexterm"></a>function we'll add <a id="id129" class="indexterm"></a>to our item script will allow us to add or <a id="id130" class="indexterm"></a>subtract player stats. Add the following code to your script:</p><div class="informalexample"><pre class="programlisting">void BuffDebuffStat()
{
  Player.SendMessage("BuffDebuffStat", new KeyValuePair&lt;string, int&gt;(Stat, Amount));
}</pre></div><p>When we call this function, we send a message to our player, which will call a function in a script on the player that will add or subtract the stat we specify. In this message, we tell this function which function to call as well as send a <code class="literal">KeyValuePair</code> variable. We use a <code class="literal">KeyValuePair</code> variable to send both the stat we want to modify as well as the amount that we want to modify it by.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec01"></a>The health changer</h4></div></div></div><p>Our <a id="id131" class="indexterm"></a>next function to be added will be one that will affect the <a id="id132" class="indexterm"></a>player's health. Add the following code to your script:</p><div class="informalexample"><pre class="programlisting">void ChangeHealth()
{
  Player.SendMessage("ChangeHealth", Amount);
}</pre></div><p>When we call <code class="literal">ChangeHealth</code>, we send a message to the player to call a function known as <code class="literal">ChangeHealth</code>, and we send <code class="literal">Amount</code> as well. As you can see, we use <code class="literal">Amount</code> often. Since changing stats is all about amounts, we use a single variable to make it easier for us.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec02"></a>The armor changer</h4></div></div></div><p>The <a id="id133" class="indexterm"></a>next<a id="id134" class="indexterm"></a> and final stat modifying function we'll add will allow us to adjust the armor of our player. Add this function to your script:</p><div class="informalexample"><pre class="programlisting">void ChangeArmorAmount()
{
  Player.SendMessage("ChangeArmorAmount", ArmorAmount);
}</pre></div><p>This function is similar to the <code class="literal">ChangeHealth</code> function. We send the player a message to call a function that will change the player's armor amount. Then, we also send it the amount we want to change it by.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec03"></a>The item activator</h4></div></div></div><p>This last <a id="id135" class="indexterm"></a>function that we add will be called by other classes<a id="id136" class="indexterm"></a> to activate the item. Add this last function to your script:</p><div class="informalexample"><pre class="programlisting">void Activate()
{
  switch(selfAction)
  {
  case SelfAction.BuffDebuff:
    BuffDebuffStat();
    break;
  case SelfAction.ChangeHP:
    ChangeHealth();
    break;
  case SelfAction.ChangeArmor:
    ChangeArmorAmount();
    break;
  }

  if(selfType == SelfType.Potion)
    Destroy(gameObject);
}</pre></div><p>When this function is called, we use a <code class="literal">switch</code> statement to check the <code class="literal">selfAction</code> variable. This is an easy way to see what the item should do when the player uses it. At the end<a id="id137" class="indexterm"></a> of the <code class="literal">Activate</code> function, we check to see what type <a id="id138" class="indexterm"></a>of item it is. If it is a potion, we destroy the GameObject. Not all items get destroyed upon use, such as armor, so we use the <code class="literal">selfType</code> variable to determine what type of item it is.</p></div></div></div>