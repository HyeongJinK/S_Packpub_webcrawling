<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch07lvl1sec61"></a>Creating a slider that changes colors gradually</h2></div></div><hr /></div><p>Here, you are going<a id="id364" class="indexterm"></a> to learn another type of <a id="id365" class="indexterm"></a>customization that the player can perform at runtime. With this, the player has more power on how he can customize his own UI to fit suit his needs. In fact, the player will be able to switch between two colors, as in the previous chapter, but gradually and through a slider. We will handle this with a script and, as usual, using the events that are inside the <span class="strong"><strong>Slider (Script)</strong></span> component.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec167"></a>How to do it...</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>First of all, we need to create our slider. This can be done easily by right-clicking on the <span class="strong"><strong>Hierarchy</strong></span> panel, then going to <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Slider</strong></span>, and renaming it to <span class="strong"><strong>GraduallyColorSlider</strong></span>. Of course, it is possible to resize the slider, change <span class="strong"><strong>Source Image</strong></span>, or change the text inside. Finally, place it as you wish, in <span class="strong"><strong>Canvas</strong></span>.</p></li><li><p>Next, we can write a script to handle the entire process. To do this, select <span class="strong"><strong>GraduallyColorSlider</strong></span>. In the <span class="strong"><strong>Inspector</strong></span>, navigate to <span class="strong"><strong>Add Component</strong></span> | <span class="strong"><strong>New Script</strong></span>, rename it <span class="strong"><strong>GraduallyColorSliderScript</strong></span>, and then click on <span class="strong"><strong>Create and Add</strong></span>.</p></li><li><p>Double-click<a id="id366" class="indexterm"></a> on the script in order to edit it. As usual, when we deal with the UI, we have to add the <code class="literal">using UnityEngine.UI;</code> statement at the beginning of the script, since we are going to use the <code class="literal">Image</code> class.</p></li><li><p>We need three <code class="literal">public</code> variables. One is used to store the <span class="strong"><strong>Image (Script)</strong></span> component that we want to change, and the other two store the two colors that we want our slider to lerp between. To do this, let's write the following code:</p><div class="informalexample"><pre class="programlisting">public Image img;
public Color firstColor;
public Color secondColor;</pre></div></li><li><p>We don't need the <code class="literal">Update()</code> function or the <code class="literal">Start()</code> one. Instead, we need a function that can be triggered by some events, for instance, when our slider is changing. Therefore, it has to be <code class="literal">public</code>, and we can name it <code class="literal">change()</code>. It also takes a <code class="literal">float</code> parameter that will be passed by the event. Moreover, it will contain the value of the slider. Here is what we will write:</p><div class="informalexample"><pre class="programlisting">public void change(float value){
}</pre></div></li><li><p>Then, we only need one line to change the color of the image. We can assign the new color in this way:</p><div class="informalexample"><pre class="programlisting">img.color = Color.Lerp(firstColor, secondColor, value);</pre></div></li><li><p>Now our script is done. We save it and come back to Unity. As in the previous recipe, we have to trigger our script through an event, and so we select <span class="strong"><strong>GraduallyColorSlider</strong></span>, look inside the <span class="strong"><strong>Slider (Script)</strong></span> component, and click on the small <span class="strong"><strong>+</strong></span> sign on the <span class="strong"><strong>On Change ()</strong></span> event tab in the bottom-right corner.</p></li><li><p>Drag the script inside the <span class="strong"><strong>object</strong></span> variable, and from the drop-down menu, navigate to <span class="strong"><strong>GraduallyColorSliderScript</strong></span> | <span class="strong"><strong>change</strong></span>. Also, be sure to select <span class="strong"><strong>change</strong></span> in the<a id="id367" class="indexterm"></a> first set of functions, labeled <span class="strong"><strong>Dynamic Float</strong></span>, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781785885822/graphics/B04903_07_02.jpg" /></div></li><li><p>At the end, the event tab should be like this:</p><div class="mediaobject"><img src="/graphics/9781785885822/graphics/B04903_07_03.jpg" /></div></li><li><p>Next, we need to set our <span class="strong"><strong>Img</strong></span> variable. In this recipe, let's create a panel to assign to it. To do this, right-click on the <span class="strong"><strong>Hierarchy</strong></span> panel and navigate to <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Panel</strong></span>. We can rename this to <span class="strong"><strong>GraduallyColorPanel</strong></span>. Keep in mind that this can be any object in the scene, as long as it has an <span class="strong"><strong>Image (Script)</strong></span> component attached to itself. Thus, we can drag and drop it into the<span class="strong"><strong> Img</strong></span> variable.</p></li><li><p>As a final step, we can<a id="id368" class="indexterm"></a> ensure that both the color variables in our script have been set. Finally, click on play and use the slider to see how the panel changes color gradually.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip28"></a>Tip</h3><p>As in the previous recipe, Unity creates new colors with their alpha channels set to zero. Therefore, when we choose the colors for both our variables, we must also ensure that we set an appropriate alpha channel to suit what we want to achieve.</p></div></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec168"></a>How it works...</h3></div></div></div><p>Unlike the previous recipe, where we had to switch between two colors, here we had to make this transition occur gradually. So, as we have done previously, we used the <span class="strong"><strong>On Change()</strong></span> event of the slider in a dynamic way to give its value to our script. In it, we simply used the <span class="strong"><strong>Color.Lerp()</strong></span> function to interpolate the two colors set in the <span class="strong"><strong>Inspector</strong></span> along <code class="literal">value</code>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec169"></a>See also</h3></div></div></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>If you don't require a gradual change, you can look at the previous recipe, <span class="emphasis"><em>Creating a button that changes color</em></span>.</p></li><li style="list-style-type: disc"><p>In addition, more information <a id="id369" class="indexterm"></a>about the <span class="strong"><strong>Color.Lerp()</strong></span> function can be found in the official documentation, which is located at <a class="ulink" href="http://docs.unity3d.com/ScriptReference/Color.Lerp.html" target="_blank">http://docs.unity3d.com/ScriptReference/Color.Lerp.html</a>.</p></li><li style="list-style-type: disc"><p>Finally, in the last recipe of this chapter, there is another way to call events without touching the events in the <span class="strong"><strong>Inspector</strong></span>. In fact, this can be achieved using the handlers inside the script. More information is available in the <span class="emphasis"><em>Changing the cursor at runtime</em></span> recipe.</p></li></ul></div></div></div>