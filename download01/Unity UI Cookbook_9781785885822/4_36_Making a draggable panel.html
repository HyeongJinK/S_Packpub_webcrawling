<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec40"></a>Making a draggable panel</h2></div></div><hr /></div><p>In same cases, UI elements require some kind of interaction with the player, and the next three recipes will teach you how to create interactive panels. In this recipe, you will learn how to make a panel <a id="id224" class="indexterm"></a>draggable. For instance, the player will be able to move the panel all around the screen by dragging it. This is useful when we want to allow the player to organize his UI with his logic and order. In order to do this, we will use the <span class="strong"><strong>Event Trigger (Script)</strong></span> component and develop a script to handle the interaction.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec107"></a>How to do it...</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>To begin, we can create a panel by right-clicking on the <span class="strong"><strong>Hierarchy</strong></span> panel and then on <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Panel</strong></span>. We should also resize it so that we can see the entire panel on the screen.</p></li><li><p>Now we need to create our script on the panel, so we click on <span class="strong"><strong>Add Component</strong></span> | <span class="strong"><strong>New Script</strong></span>, name it <span class="strong"><strong>DraggablePanelScript</strong></span>, and then click on <span class="strong"><strong>Create and Add</strong></span>.</p></li><li><p>Double-click on the script to edit it. This time, we don't need to add the <code class="literal">using UnityEngine.UI;</code> statement at the beginning of the script.</p></li><li><p>In the next step, we need to create just one public function. This will be called from the <span class="strong"><strong>Event Trigger (Script)</strong></span> component that will be attached to the panel. In this function, we change the position of the transform where the script is attached to the mouse by calling <code class="literal">Input.mousePosition</code>. Therefore, we can write this:</p><div class="informalexample"><pre class="programlisting">public void OnDrag(){
  transform.position = Input.mousePosition;
}</pre></div></li><li><p>Let's save the script and add an <span class="strong"><strong>Event Trigger (Script)</strong></span> component to the panel. Click on <span class="strong"><strong>Add Component</strong></span> | <span class="strong"><strong>Event</strong></span> | <span class="strong"><strong>Event Trigger</strong></span>.</p></li><li><p>Then click on <span class="strong"><strong>Add New Event Type</strong></span> | <span class="strong"><strong>Drag</strong></span>. A new menu that is similar to the one in the previous recipes should appear in the <span class="strong"><strong>Inspector</strong></span>. By clicking on the <span class="strong"><strong>+</strong></span> sign in the bottom-right corner of the panel, we can add a new event.</p></li><li><p>Furthermore, we need to drag <span class="strong"><strong>DraggablePanelScript</strong></span> itself into the <span class="strong"><strong>object</strong></span> variable. As result, the drop-down menu should now be enabled. Click on it and select <span class="strong"><strong>DraggablePanelScript</strong></span> | <span class="strong"><strong>OnDrag</strong></span>. In this way, when the player drags the panel, the <code class="literal">OnDrag()</code> function from our script is called, and therefore the position of the panel will change.</p></li><li><p>Finally, we can press the play button and make sure that everything works as it should.</p></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec108"></a>How it works...</h3></div></div></div><p>Each time the player drags the panel, <span class="strong"><strong>Event Trigger (Script)</strong></span> calls our script, and it will change the position of the panel with the mouse. As a result, the panel will move according to the player's <a id="id225" class="indexterm"></a>dragging.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec109"></a>There's more...</h3></div></div></div><p>In the following section, we can learn how to drag the panel only from a specific area.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl3sec30"></a>Creating a draggable area for the panel</h4></div></div></div><p>We may want to <a id="id226" class="indexterm"></a>allow the player to drag the panel from just some specific parts or areas of it — for instance, only at the top of the panel, where the name of the window is usually placed. In this context, the panel can be considered a window. Therefore, we need to create another game object, which will be our draggable area, and follow the steps in the <span class="emphasis"><em>How to do it...</em></span> section. After we have completed this, we also need to modify the script. Instead of changing the position of the transform of the game object that is attached to the script, we move an arbitrary transform that we want — in this case the entire panel.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec110"></a>See also</h3></div></div></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>We may want to give the player more power to structure his UI. So, we can make the panel not only draggable but also resizable. Therefore, we can include the technique that we will cover in the next recipe, <span class="emphasis"><em>Making a resizable panel</em></span>, by providing the player with more options to customize his experience.</p></li></ul></div></div></div>