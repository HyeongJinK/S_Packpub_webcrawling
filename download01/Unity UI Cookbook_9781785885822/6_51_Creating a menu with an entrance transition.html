<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch06lvl1sec53"></a>Creating a menu with an entrance transition</h2></div></div><hr /></div><p>We may want a more<a id="id319" class="indexterm"></a> complex animation than simply an appearing/disappearing effect as covered in the previous recipe. In this case, we need to use an <span class="strong"><strong>Animator</strong></span> controller along with the <span class="strong"><strong>Animation</strong></span> window in order to create animations. In this<a id="id320" class="indexterm"></a> recipe, you will learn how to create an entrance transition. However, feel free to change the animation when performing the following steps to fit the needs of your game. Furthermore, we will still be using the <span class="strong"><strong>OnClick()</strong></span> event to cause <span class="strong"><strong>PauseMenuButton</strong></span> to disappear.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec147"></a>How to do it...</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>First of all, we need to create our menu. To do this, just follow the first three steps of the previous recipe, <span class="emphasis"><em>Appearing and disappearing menu</em></span>.</p></li><li><p>Next, we need to place <span class="strong"><strong>Appearing Menu</strong></span> slightly outside <span class="strong"><strong>Canvas</strong></span>, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781785885822/graphics/B04903_06_05.jpg" /></div></li><li><p>After we have selected <span class="strong"><strong>Appearing Menu</strong></span>, we can click on <span class="strong"><strong>Add Property</strong></span> in the <span class="strong"><strong>Animation</strong></span> window. Unity asks us to choose a folder and a name for our animation. For now, let's name it <span class="strong"><strong>MenuEntryTransition</strong></span>.</p></li><li><p>Next, we are <a id="id321" class="indexterm"></a>going to create the animation. To do this, click on the <span class="strong"><strong>Rec</strong></span> button and then move the red bar to <span class="strong"><strong>1</strong></span> second, that is, to the sixtieth key frame if the sample is set to <span class="strong"><strong>60.</strong></span> Using the <span class="strong"><strong>Rect</strong></span> tool, we can<a id="id322" class="indexterm"></a> move the menu inside <span class="strong"><strong>Canvas</strong></span>, where we want it to be. For instance, we can place it to the right of the screen.</p></li><li><p>Then, click on the drop-down menu, find <span class="strong"><strong>MenuEntryTransition</strong></span>, and select <span class="strong"><strong>[Create new Clip]</strong></span>.</p></li><li><p>Again, Unity will ask us to save the animation. Hence, let's select the same folder as that of the previous one and rename it <span class="strong"><strong>MenuExitTransition</strong></span>.</p></li><li><p>This time, we need to make the same animation, but in reverse. After clicking on the <span class="strong"><strong>Rec</strong></span> button at <span class="strong"><strong>0</strong></span> seconds, which means that the vertical red bar is at the zeroth key frame, we have to place the menu where it was at the end of the previous animation. Then, at <span class="strong"><strong>1 </strong></span>second (which is the sixtieth key frame for <span class="strong"><strong>60</strong></span> samples), place the menu where it was at the beginning of the previous animation.</p></li><li><p>The next step is to put the animations that we have just created together using a controller. If we search in the same folder in which we saved the animations, we can find a<a id="id323" class="indexterm"></a> controller called <span class="strong"><strong>Appearing Menu</strong></span>. Double-click on it to open the <span class="strong"><strong>Animator</strong></span> window with the controller already loaded.</p></li><li><p>One more step about<a id="id324" class="indexterm"></a> the animation is to select them one at a time in <span class="strong"><strong>Project Panel</strong></span>, since multi-editing of animations is not supported by Unity. In addition, we will also need to uncheck the <span class="strong"><strong>Loop Time</strong></span> variable for both in the <span class="strong"><strong>Inspector</strong></span>. By doing this, we are setting the animation as a single shot and not as a loop.</p></li><li><p>Since we will call the animation directly by its name, we don't need any graph transition. Therefore, we need to be sure that we have both the animations inside the graph, like this:</p><div class="mediaobject"><img src="/graphics/9781785885822/graphics/B04903_06_06.jpg" /></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip23"></a>Tip</h3><p>If they are not inside the graph, just drag and drop them from the <span class="strong"><strong>Project</strong></span> panel.</p></div></li><li><p>Now, we want <span class="strong"><strong>PauseMenuButton</strong></span> to disappear when the pause button is clicked on, and then <a id="id325" class="indexterm"></a>we want the pause menu to appear with our transition. To do this, select<a id="id326" class="indexterm"></a> <span class="strong"><strong>PauseMenuButton</strong></span> and, in the <span class="strong"><strong>Inspector</strong></span>, click on the small <span class="strong"><strong>+</strong></span> sign in the <span class="strong"><strong>OnClick</strong></span> tab inside the <span class="strong"><strong>Button (Script)</strong></span> component.</p></li><li><p>A new event should appear in the <span class="strong"><strong>Inspector</strong></span>. Now drag <span class="strong"><strong>PauseMenuButton</strong></span> into the <span class="strong"><strong>object</strong></span> variable. Then, click on the drop-down menu in which you see <span class="strong"><strong>no function</strong></span>, and go to <span class="strong"><strong>GameObject</strong></span> | <span class="strong"><strong>SetActive(bool)</strong></span>. Finally, uncheck the <span class="strong"><strong>bool</strong></span> variable.</p></li><li><p>Add a new event again, but this time, drag <span class="strong"><strong>Appearing Menu</strong></span> into the <span class="strong"><strong>object</strong></span> variable. Navigate to <span class="strong"><strong>Animator</strong></span> | <span class="strong"><strong>Play(string)</strong></span> from the dropdown and put it inside the <span class="strong"><strong>string</strong></span> variable <a id="id327" class="indexterm"></a>called <span class="strong"><strong>MenuEntryTransition</strong></span>. Finally, the <span class="strong"><strong>OnClick()</strong></span> tab should<a id="id328" class="indexterm"></a> look like this:</p><div class="mediaobject"><img src="/graphics/9781785885822/graphics/B04903_06_07.jpg" /></div></li><li><p>Again, we have to add a couple of events to <span class="strong"><strong>ResumeButton</strong></span>. However, we need to change the string variable of the transition in <span class="strong"><strong>MenuExitTransition</strong></span>, and check the <span class="strong"><strong>bool</strong></span> variable to make <span class="strong"><strong>PauseMenuButton</strong></span> appear. So far, it should look as follows:</p><div class="mediaobject"><img src="/graphics/9781785885822/graphics/B04903_06_08.jpg" /></div></li><li><p>Finally, we can click on <span class="strong"><strong>Play</strong></span> and see if our transitions work.</p></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec148"></a>How it works...</h3></div></div></div><p>First, we created our menu. We began by creating a couple of animations with the <span class="strong"><strong>Animation</strong></span> window, and then we placed them inside an <span class="strong"><strong>Animator</strong></span> controller. Here, we used the controller just as a set of animations, since they are triggered by the <span class="strong"><strong>OnClick()</strong></span> events from our buttons. When the trigger arrives, <span class="strong"><strong>Animator</strong></span> plays the animation, which is specified by us.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec149"></a>There's more...</h3></div></div></div><p>As we did in the previous recipe, it is possible to freeze the game, as a pause menu should do.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch06lvl3sec50"></a>Freezing time</h4></div></div></div><p>Usually, when the <span class="strong"><strong>Pause</strong></span> menu appears in a video game, the game should freeze, unless it is an online game. In order to do<a id="id329" class="indexterm"></a> this, we can use the same script and the <a id="id330" class="indexterm"></a>same steps that we performed in the homonymous section of the previous recipe, <span class="emphasis"><em>Appearing and disappearing menu</em></span>.</p></div></div></div>