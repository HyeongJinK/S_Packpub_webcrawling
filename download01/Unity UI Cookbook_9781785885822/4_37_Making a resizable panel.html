<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec41"></a>Making a resizable panel</h2></div></div><hr /></div><p>Sometimes, UI elements require some kind of interaction with the player. This recipe, along with the previous <a id="id227" class="indexterm"></a>and the following ones, will teach you how to create interactive panels. Furthermore, we will see how to make a panel resizable. For instance, the player will be able to resize the panel by dragging one of its corners. This is useful when the UI is full of panels and windows and we want to let the player choose their dimension to suit his needs. To do this, we will use the <span class="strong"><strong>Event Trigger (Script)</strong></span> component and develop a script to handle the interaction.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec111"></a>How to do it...</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>First, we can create a panel by right-clicking on the <span class="strong"><strong>Hierarchy</strong></span> panel and then clicking on the <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Panel</strong></span>. Rename it to <span class="strong"><strong>ResizablePanel</strong></span>. We should also resize it so that we can see the entire panel on the screen.</p></li><li><p>We need to create another panel inside the first one. To do this, right-click on <span class="strong"><strong>ResizablePanel</strong></span> in the <span class="strong"><strong>Hierarchy</strong></span> panel and then choose <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Panel</strong></span>. We should rename it as <span class="strong"><strong>ResizeArea</strong></span> in order to reduce confusion. Finally, place it in the bottom-right corner of the first panel, in this way:</p><div class="mediaobject"><img src="/graphics/9781785885822/graphics/B04903_04_12.jpg" /></div></li><li><p>Now we have to <a id="id228" class="indexterm"></a>change <span class="strong"><strong>Anchor</strong></span> of <span class="strong"><strong>ResizeArea</strong></span>. To do this, select <span class="strong"><strong>Anchor</strong></span>. Then, in the <span class="strong"><strong>Inspector</strong></span>, click on the icon with two squares and four blue arrows inside. Now, a drop-down menu should appear, with <span class="strong"><strong>Anchor Presets</strong></span>. Let's select the bottom-right one. After doing this, you should see what is shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781785885822/graphics/B04903_04_13.jpg" /></div></li><li><p>Now, we need to create our script on <span class="strong"><strong>ResizablePanel</strong></span>. Therefore, click on <span class="strong"><strong>Add Component</strong></span> | <span class="strong"><strong>New Script</strong></span> and name it <span class="strong"><strong>ResizablePanelScript</strong></span>. Then click on <span class="strong"><strong>Create and Add</strong></span>.</p></li><li><p>Double-click on the script in order to edit it. As usual, we need to add the <code class="literal">using UnityEngine.UI;</code> statement at the beginning of the script.</p></li><li><p>Before we add<a id="id229" class="indexterm"></a> functions, we need three private variables. Two of them are <code class="literal">Vector2</code>, respectively, for keeping track of the original mouse position and the original <code class="literal">DeltaSize</code> of <code class="literal">RectTransform</code> when the player begins resizing. The third one is a <code class="literal">RectTransform</code>, so we can get access to the <code class="literal">RectTranform</code> of <code class="literal">ResizablePanel</code>. Therefore, we can write the following lines:</p><div class="informalexample"><pre class="programlisting">Vector2 initialMousePos;
Vector2 initialDeltaSize;
RectTransform rectTransform;</pre></div></li><li><p>In the <code class="literal">Start()</code> function, we assign the <code class="literal">RectTransform</code> component, attached to the same game object of this script, to the <code class="literal">rectTransform</code> variable. We can do this by writing these lines:</p><div class="informalexample"><pre class="programlisting">void Start () {
  rectTransform = (RectTransform)this.transform;
}</pre></div></li><li><p>Then we have to write a function that will be called every time the player starts resizing the panel. We will call this function <code class="literal">onDragBegins()</code> because in order to resize, we will be dragging <code class="literal">ResizeArea</code>. Here, we just assign the initial start position of the mouse to <code class="literal">initialMousePos</code> and the current <code class="literal">deltaSize</code> to <code class="literal">initialDeltaSize</code>:</p><div class="informalexample"><pre class="programlisting">public void onDragBegins(){
  initialMousePos = Input.mousePosition;
  initialDeltaSize = rectTransform.sizeDelta;
}</pre></div></li><li><p>The next step is to have a<a id="id230" class="indexterm"></a> function that is called during the dragging of <code class="literal">ResizeArea</code>;   means resizing the panel according to how the player moves the mouse. Therefore, we need to create a function called <code class="literal">OnDrag</code>, which will look like this:</p><div class="informalexample"><pre class="programlisting">public void OnDrag(){
  Vector2 temp = (Vector2)initialMousePos - (Vector2)Input.mousePosition;
  temp = new Vector2 (-temp.x, temp.y);
  temp += initialDeltaSize;
  rectTransform.sizeDelta = temp;
}</pre></div></li><li><p>Save the script and select <span class="strong"><strong>ResizeArea</strong></span> from the <span class="strong"><strong>Hierarchy</strong></span> panel. Then, in the <span class="strong"><strong>Inspector</strong></span>, click on <span class="strong"><strong>Add Component</strong></span> | <span class="strong"><strong>Event</strong></span> | <span class="strong"><strong>Event Trigger</strong></span>.</p></li><li><p>Now we have to add two event types. To add the first, click on <span class="strong"><strong>Add New Event Type</strong></span> | <span class="strong"><strong>BeginDrag</strong></span>. Then, click on the <span class="strong"><strong>+</strong></span> sign in the bottom-right corner of the panel to add a new event. Next, we have to drag <span class="strong"><strong>ResizablePanel</strong></span> itself into the <span class="strong"><strong>object</strong></span> variable. Subsequently, the drop-down menu should be enabled. Hence, click on it and select <span class="strong"><strong>ResizablePanelScript</strong></span> | <span class="strong"><strong>onDragBegins</strong></span>. As a result, when the player starts to drag <span class="strong"><strong>ResizeArea</strong></span>, the <code class="literal">OnDragBegins()</code> function from our script is called.</p></li><li><p>To add the second event, click on <span class="strong"><strong>Add New Event Type</strong></span> | <span class="strong"><strong>Drag</strong></span>. Then click on the <span class="strong"><strong>+</strong></span> sign in the bottom-right corner of the panel to add a new event. Again, we have to drag <span class="strong"><strong>ResizablePanel</strong></span> itself into the <span class="strong"><strong>object</strong></span> variable. From the drop-down menu, select <span class="strong"><strong>ResizablePanelScript</strong></span> | <span class="strong"><strong>onDrag</strong></span>. As a result, when the player drags <span class="strong"><strong>ResizeArea</strong></span>, the <code class="literal">OnDrag()</code> function from our script is called.</p></li><li><p>Finally, we can check whether everything works as it should by clicking on the play button.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip19"></a>Tip</h3><p>Keep in mind that all the elements within the panel will be resized as well. Thus, ensure that you have placed all the anchors correctly within the elements inside your panel, if any.</p></div></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec112"></a>How it works...</h3></div></div></div><p>Each time the player drags <span class="strong"><strong>Resize Area</strong></span>, <span class="strong"><strong>Event Trigger (Script)</strong></span> calls our script. In particular, two functions <a id="id231" class="indexterm"></a>are called: the <code class="literal">OnDragBegins()</code> function, in which we initialize our variables, and the <code class="literal">OnDrag()</code> function. In the latter, we first create a temporary variable that stores the difference of <code class="literal">initialMousePos</code> and the current mouse position, <code class="literal">Input.mousePosition</code>. This means the distance between where the player started to drag and the current mouse position. Since in this case the difference between vectors is ambiguous, we need to make an explicit cast. Then, we have to invert the <span class="emphasis"><em>x</em></span> coordinate of the temporary vector if we want to resize the panel coherently. Finally, after adding the <code class="literal">initialDeltaSize</code> to our new vector, we assign it as the new <code class="literal">sizeDelta</code> of <code class="literal">rectTransform</code>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec113"></a>See also</h3></div></div></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Keep in mind that rarely, and only in specific designs, can the player resize a panel without moving it around. Therefore, if this is not our design, we should integrate the resizable panel with what we have covered in a previous recipe, <span class="emphasis"><em>Making a draggable panel</em></span>, to create a more immersive, interactive menu.</p></li></ul></div></div></div>