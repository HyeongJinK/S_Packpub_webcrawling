<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec29"></a>Implementing a numeric timer</h2></div></div><hr /></div><p>In this recipe, we are<a id="id143" class="indexterm"></a> going to create a timer that displays<a id="id144" class="indexterm"></a> the time (as a number) on the screen. This may be a useful element when attempting to inform the player how much time has passed during an objective. In some cases, if the player is aware of how much time he is taking with a task, it may encourage him to be more efficient and considerate about his choices throughout the gameplay. To create a timer, we will use the <span class="strong"><strong>Text (Script)</strong></span> component as well as develop a script to implement the logic of the timer.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec71"></a>How to do it...</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>First of all, we need to create a new UI text to show our timer. To do this, right-click on the <span class="strong"><strong>Hierarchy</strong></span> panel and then navigate to <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Text</strong></span>. Next, rename it to <span class="strong"><strong>Numeric Timer</strong></span>.</p></li><li><p>We can change the <span class="strong"><strong>Font</strong></span> and the <span class="strong"><strong>Font Size</strong></span> fields as we wish so that they suit our needs.</p></li><li><p>We can also adjust <span class="strong"><strong>Color</strong></span>. In this recipe, we will set the color to light gray, but feel free to change it to a color that better suits your design.</p></li><li><p>Now, we can drag <span class="strong"><strong>Numeric Timer</strong></span> with <span class="strong"><strong>Rect Tool</strong></span> where we want to place it. In some cases, it is important to make a timer properly to a player. In other<a id="id145" class="indexterm"></a> instances, it is a nice, subtle addition to the UI.</p></li><li><p>To display the timer better in the scene view, we can write in the <span class="strong"><strong>Text</strong></span> variable the word <code class="literal">time</code>, even if this value will be replaced by the script. This is so that we have a better approximation of how it will look. This will help us to better gauge whether its placement will be effective or will inhibit or distract the player during gameplay.</p></li><li><p>Next, we want to ensure that the <span class="strong"><strong>Rich Text</strong></span> variable is checked. This is important in order to display the color of the text and also for us to observe the appearance of the timer within the game space.</p></li><li><p>Then, we have to create a script that manages the time. To do this, navigate to <span class="strong"><strong>Add Component</strong></span> | <span class="strong"><strong>New Script</strong></span>, then name it <span class="strong"><strong>NumericTimerScript</strong></span>, and finally click on <span class="strong"><strong>Create and Add</strong></span>.</p></li><li><p>Double-click on the script to edit it and, as always, add the <code class="literal">using UnityEngine.UI;</code> statement at the beginning of the script. This allows us to handle the UI elements within the script.</p></li><li><p>Before we add any functions to the timer, we need to add two variables and make sure that we set them to <code class="literal">private</code>. So, we can write this:</p><div class="informalexample"><pre class="programlisting">private Text uiText;
private floattime;</pre></div></li><li><p>Next, we can set up the <code class="literal">uiText</code> variable in the <code class="literal">Start()</code> function. In fact, this is the ideal function for assigning the initial value to our variables, since it is called when the script runs for the first time in the game environment. Therefore, we can assign the reference to the <span class="strong"><strong>Text (Script)</strong></span> component to the variable just before the timer starts, in the following way:</p><div class="informalexample"><pre class="programlisting">void Start () {
  uiText = this.GetComponent&lt;Text&gt; ();
}</pre></div></li><li><p>Now, we need to<a id="id146" class="indexterm"></a> update our timer for each frame. This can be done by writing the following lines in the <code class="literal">Update()</code> function:</p><div class="informalexample"><pre class="programlisting">void Update () {
  time += Time.deltaTime;
  uiText.text = "&lt;color=blue&gt;Time&lt;/color&gt;: " + time.ToString("F2");
}</pre></div></li><li><p>Finally, we can save the script and the work is done. When we run the script, we should see something like this:</p><div class="mediaobject"><img src="/graphics/9781785885822/graphics/B04903_03_01.jpg" /></div></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec72"></a>How it works...</h3></div></div></div><p>First of all, we created a new UI text, and then adjusted it to suit our needs. We changed <span class="strong"><strong>Font</strong></span>, <span class="strong"><strong>Font Size</strong></span>, and also <span class="strong"><strong>Color</strong></span>. In addition, we ensured that <span class="strong"><strong>Rich Text</strong></span> was checked. In this way, it is possible to use different colors in the text of the timer. Then, we wrote a script to handle the timer.</p><p>In the script, there are two private variables: <code class="literal">uiText</code> and <code class="literal">time</code>. The <code class="literal">uiText</code> variable stores the reference to the <span class="strong"><strong>Text (Script)</strong></span> component, so we can get access to it and modify its text. The <code class="literal">time</code> variable stores the amount of time that has passed since the timer started.</p><p>In the <code class="literal">Start()</code> function, we <a id="id147" class="indexterm"></a>assigned the reference to the <span class="strong"><strong>Text (Script)</strong></span> component, which is attached to the same game object of this script, to the <code class="literal">uiText</code> variable by calling the <code class="literal">this.GetComponent&lt;Text&gt;()</code> function.</p><p>Keeping in mind that the <code class="literal">Update()</code> function is called at every frame, we added <code class="literal">Time.deltaTime</code>, which is the time that has elapsed from the last frame to the <code class="literal">time</code> variable. We did this to accumulate the time that has passed since this script/timer started. In the second line, we updated the <code class="literal">text</code> variable on the <span class="strong"><strong>Text (Script)</strong></span> component, which we can have access to through the <code class="literal">uiText</code> variable, with the new time value. Since we don't want all the decimal points, we have to change it to <code class="literal">float</code> by calling <code class="literal">ToString("F2")</code> on it.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec73"></a>There's more...</h3></div></div></div><p>The next section will teach us how to retrieve the value of our variable.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec16"></a>Getting the time variable</h4></div></div></div><p>For some reason, we<a id="id148" class="indexterm"></a> may want to retrieve the value of the <code class="literal">time</code> variable, such as when we want to trigger an event in our game environment, or pass its value to another script. We can achieve this by implementing a <code class="literal">get</code> function, like this:</p><div class="informalexample"><pre class="programlisting">public float getTime(){
  return time;
}</pre></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec74"></a>See also</h3></div></div></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>For more details about the <code class="literal">get</code> function, refer to the <span class="emphasis"><em>Implementing a score counter</em></span> recipe in <a class="link" href="#" linkend="ch02">Chapter 2</a>, <span class="emphasis"><em>Implementing Counters and Health Bars</em></span>, inside the <span class="emphasis"><em>There's more...</em></span> section</p></li><li style="list-style-type: disc"><p>However, if you are<a id="id149" class="indexterm"></a> looking for more information about rich text, the official documentation is the best place to visit at <a class="ulink" href="http://docs.unity3d.com/Manual/StyledText.html" target="_blank">http://docs.unity3d.com/Manual/StyledText.html</a></p></li></ul></div></div></div>