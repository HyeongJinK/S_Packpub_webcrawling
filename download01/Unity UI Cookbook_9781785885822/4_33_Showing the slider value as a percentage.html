<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec37"></a>Showing the slider value as a percentage</h2></div></div><hr /></div><p>Sliders are used a lot in video games. As a result, we have to display some percentage of the slider to give the <a id="id196" class="indexterm"></a>player a better visual idea of what he is changing. For example, when the player is tweaking an ability parameter, it could be useful if the amount remaining is displayed as a percentage. The goal of this recipe is to create a script that shows the value of the slider in percentage. As such, we will develop a script that will use both the <span class="strong"><strong>Slider (Script)</strong></span> and <span class="strong"><strong>Text (Script)</strong></span> components.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec98"></a>How to do it...</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>First of all, we need to create a new UI text to display the value of our slider in percentage. Therefore, we can right-click on the <span class="strong"><strong>Hierarchy</strong></span> panel and then click on <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Text</strong></span>. Rename it to <span class="strong"><strong>Slider Shower</strong></span>. Furthermore, to customize the look or suit our needs, we can change <span class="strong"><strong>Font</strong></span> and <span class="strong"><strong>Font Size</strong></span> as well.</p></li><li><p>Now, we need a script that receives the value of the slider, as data, which we will learn how to do later, and then show it as a number in percentage. So, let's click on <span class="strong"><strong>Add Component</strong></span> | <span class="strong"><strong>New Script</strong></span>, name it <span class="strong"><strong>ShowSliderValueScript</strong></span>, then click on <span class="strong"><strong>Create and Add</strong></span>.</p></li><li><p>To edit the script, double click on it. Add the <code class="literal">using UnityEngine.UI;</code> statement at<a id="id197" class="indexterm"></a> the beginning of the script. Before the class, we can also add the following line: <code class="literal">[RequireComponent(typeof(Text))]</code> (without the semicolon at the end). In this way, we are saying that, in order to use this script, it requires a <span class="strong"><strong>Text (Script)</strong></span> component attached to the same game object of this script.</p></li><li><p>We just need a private variable to keep track of the <span class="strong"><strong>Text (Script)</strong></span> component, without needing to find it every time we have to update its text. So, we can add <code class="literal">private Text uiText;</code>.</p></li><li><p>Next, we can write a function that takes <code class="literal">float</code> as a parameter (the value of the slider) and changes it to <code class="literal">string</code> that represents that number in a percentage. To do this, we multiply the value by 100 and round it off using the <code class="literal">Mathf.RoundToInt()</code> function. In addition, by doing this, we get to see all percentages with decimals. Finally, add <code class="literal">%</code> at the end of the string. We put this string into the <code class="literal">text</code> variable of the <code class="literal">Text (Script)</code> component. Therefore, we can write the function in the following way:</p><div class="informalexample"><pre class="programlisting">public void updateValue(float value){
  uiText.text = Mathf.RoundToInt (value * 100) + "%";
}</pre></div></li><li><p>Let's save the script and come back to Unity from MonoDevelop. The next step is to add a slider to our scene. Hence, we can right-click on the <span class="strong"><strong>Hierarchy</strong></span> panel and then click on <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Slider</strong></span>. If we want to organize things better in our project, we should rename it as well.</p></li><li><p>As you can see from the following screenshot, at the bottom of the <span class="strong"><strong>Slider (Script)</strong></span> component, there is the <span class="strong"><strong>On Value Change (Single)</strong></span> panel. Click on the <span class="strong"><strong>+</strong></span> sign in the bottom-right corner of the panel.</p><div class="mediaobject"><img src="/graphics/9781785885822/graphics/B04903_04_03.jpg" /></div></li><li><p>As result, we have just added an element to the tab. As we can see in the next screenshot, we need to drag <span class="strong"><strong>Slider Shower</strong></span> into the <span class="strong"><strong>object</strong></span> variable. Now, the drop-down menu should be enabled. Therefore, we can click on it and select <span class="strong"><strong>ShowSliderValueScript</strong></span> | <span class="strong"><strong>updateValue</strong></span>. In fact, there are two of them listed, and we need to select the first one, under <span class="strong"><strong>Dynamic float</strong></span>. By doing this, when the<a id="id198" class="indexterm"></a> value of the slider changes, the <span class="strong"><strong>updateValue()</strong></span> function from our previous script is called and the value of the slider is passed as a parameter.</p><div class="mediaobject"><img src="/graphics/9781785885822/graphics/B04903_04_04.jpg" /></div></li><li><p>Finally, we can press the play button and perform a test to see whether everything works as we have planned, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781785885822/graphics/B04903_04_05.jpg" /></div></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec99"></a>How it works...</h3></div></div></div><p>The <span class="strong"><strong>Slider (Script)</strong></span> component has a variable called <code class="literal">value</code> that stores the position of the slider as <code class="literal">float</code> between <code class="literal">0</code> and <code class="literal">1</code>. In order to show this number, we passed it through an event â€” <span class="strong"><strong>OnValueChange</strong></span>. This happens every time the player changes the value of the slider, that is, every time<a id="id199" class="indexterm"></a> the slider is dragged. When this event happens, a value is passed to our script. This first transforms the number into an integer between 0 and 100, and then converts it into a formatted string to show it as a percentage. Finally, this string is shown in the <span class="strong"><strong>Text (Script)</strong></span> component.</p></div></div>