<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec19"></a>Implementing a score counter</h2></div></div><hr /></div><p>In this recipe, we are going to create a score counter that displays the score as a number on the screen. To<a id="id73" class="indexterm"></a> achieve this, we will use the <span class="strong"><strong>Text (Script)</strong></span> component and create a script to handle it. Different functions will be available from this script, that will be called from other scripts to increase the score.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec39"></a>How to do it...</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>First of all, we need to<a id="id74" class="indexterm"></a> create new UI text to display our score. Thus, right-click on the <span class="strong"><strong>Hierarchy</strong></span> panel and then <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Text</strong></span>. Finally, rename it to <span class="strong"><strong>ScoreCounter</strong></span>.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip11"></a>Tip</h3><p>To rename an object, right-click on it and select <span class="strong"><strong>Rename</strong></span>. Otherwise, we can change its name in the <span class="strong"><strong>Inspector</strong></span> window.</p></div></li><li><p>Next, we can change the <span class="strong"><strong>Font</strong></span> and the <span class="strong"><strong>Font Size</strong></span> in the <span class="strong"><strong>Inspector</strong></span> as we wish, to better suit our needs.</p></li><li><p>Furthermore, we should also adjust the <span class="strong"><strong>Color</strong></span>. In this example, we will set it to white in order to be easily visible within the scene.</p></li><li><p>Now, we need to drag the <span class="strong"><strong>ScoreCounter</strong></span> with the <span class="strong"><strong>Rect Tool</strong></span> (the hotkey for this tool is <span class="emphasis"><em>T</em></span>, and we have seen it in the previous chapter) to where we want to place it.</p></li><li><p>We can write in the <span class="strong"><strong>Text</strong></span> variable the word <span class="strong"><strong>Score</strong></span>. In fact, this helps us to visualize what the counter will look like, even though this value will be replaced by the script, which we are going to write in the next steps.</p></li><li><p>Ensure that the <span class="strong"><strong>Rich Text</strong></span> variable is checked. This allows us to use different colors inside the counter.</p></li><li><p>In this step, we need to create a script that manages the score: click on <span class="strong"><strong>Add Component</strong></span> | <span class="strong"><strong>New Script</strong></span> in the <span class="strong"><strong>Inspector</strong></span> and name it <span class="strong"><strong>ScoreCounterScript</strong></span>, and then press <span class="strong"><strong>Create and Add</strong></span>. In doing this, ensure that the language selected is <span class="strong"><strong>C Sharp</strong></span>.</p></li><li><p>Double-click on the script in order to edit it. Since we are going to use the <code class="literal">Text</code> class, we need to add the <code class="literal">using UnityEngine.UI;</code> statement at the beginning of the script.</p></li><li><p>Before we add the functions in our script, we need two <code class="literal">private</code> variables. Hence, we can write:</p><div class="informalexample"><pre class="programlisting">  private Text uiText;
  private long score = 0;</pre></div></li><li><p>In the <code class="literal">Start()</code> function, we can store the <span class="strong"><strong>ScoreCounter</strong></span> in the <span class="strong"><strong>uiText</strong></span> variable so that we can refer to it later in the script. In addition, we need also to update our score, so let's call a function that we will write later. Thus, the <code class="literal">Start()</code> function is as follows:</p><div class="informalexample"><pre class="programlisting">  void Start () {
    uiText = this.GetComponent&lt;Text&gt; ();
    updateScoreCounter ();
  }</pre></div></li><li><p>Next, we need a<a id="id75" class="indexterm"></a> function to add points to our score counter that can be called from other scripts. We pass it an <code class="literal">int</code> parameter, which is the amount of points the player earned. So we can write the following:</p><div class="informalexample"><pre class="programlisting">  public void addPoints(int points){
    score += points;
    updateScoreCounter ();
  }</pre></div></li><li><p>Finally, since we have called the <code class="literal">updateScoreCounter()</code> function twice, it's time to write it down:</p><div class="informalexample"><pre class="programlisting">  private void updateScoreCounter(){
    uiText.text = "&lt;color=blue&gt;Score&lt;/color&gt;: " + score;
  }</pre></div></li><li><p>We can save the script and the work is done. We should see something like the following:</p><div class="mediaobject"><img src="/graphics/9781785885822/graphics/B04903_02_01.jpg" /></div></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec40"></a>How it works...</h3></div></div></div><p>In the script, there are two variables, <code class="literal">uiText</code> and <code class="literal">score</code>, which we've set to <code class="literal">private</code> because other components do not need to access it. The former stores the reference to the <span class="strong"><strong>Text (Script)</strong></span> component in order to get it later in the script; the latter is the score of the player. This last one is a long variable that allows us to store big numbers since in some games, score points are very huge numbers.</p><p>The <code class="literal">Start()</code> function in<a id="id76" class="indexterm"></a> Unity is special since it is called only once when the script is enabled for the first time. In this function, we assign the <span class="strong"><strong>Text (Script)</strong></span> component attached in the same game object of this script to <code class="literal">uiText</code> variable by calling the <code class="literal">this.GetComponent&lt;Text&gt;()</code> function. Then, we call the <code class="literal">updateScoreCounter()</code> function in order to update the UIs as well during the first iteration.</p><p>Moreover, we added the <code class="literal">addPoints(int points)</code> function. It takes an <code class="literal">int</code> as a parameter named <code class="literal">points</code>. Then, the function adds this value to the <code class="literal">score</code> variable through <code class="literal">score += points;</code>. Finally, we call <code class="literal">updateScoreCounter()</code> to update the interface. The <code class="literal">+=</code> operator will take the value that score currently is and increase it by whatever is in our points value.</p><p>Finally, the <code class="literal">updateScoreCounter()</code> function changes the <code class="literal">text</code> variable on the <span class="strong"><strong>Text (Script)</strong></span> component stored in the <code class="literal">uiText</code> variable. In fact, the new value assigned is a string. In the first part of this function, there is <code class="literal">&lt;color=blue&gt;Score&lt;/color&gt;:</code> that encloses the word <code class="literal">Score</code> into styling tags to change its color to blue. Of course, we can also change blue to another color, if we prefer. Finally, we added the score. Don't worry that the <code class="literal">score</code> <a id="id77" class="indexterm"></a>variable is long because in this case, Unity converts the number in to a string automatically.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec41"></a>There's more...</h3></div></div></div><p>We have seen how to implement a score counter. However, according to the design of our game, we may want to add new features, such as removing score points or get the score variable to use it in some other script.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl3sec07"></a>Adding a remove points function</h4></div></div></div><p>In some games, it<a id="id78" class="indexterm"></a> is possible to lose points, but we should be careful not to have a negative score.</p><p>Thus, we can deal with this issue by adding a new function to our script:</p><div class="informalexample"><pre class="programlisting">  public void removePoints(int points){
    score -= points;
    if (score &lt; 0)
      score = 0;
    updateScoreCounter ();
  }</pre></div><p>The first line <code class="literal">score -= points;</code> subtracts the amount of points, passed as parameter to the function, to our score.</p><p>Then, with an <code class="literal">if</code> statement, we verify whether our score is negative: if so, we set it to zero since we don't want negative score.</p><p>Finally, we update the score counter by calling the <code class="literal">updateScoreCounter()</code> function.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl3sec08"></a>Using boldface in the rich text</h4></div></div></div><p>The rich text of Unity<a id="id79" class="indexterm"></a> allows us not only to change the color to <a id="id80" class="indexterm"></a>a specific portion of text, but also to change the style. In order to give more importance to the word <code class="literal">Score</code>, we can replace this line of code inside the updateScoreCounter() function:</p><div class="informalexample"><pre class="programlisting">uiText.text = "&lt;color=blue&gt;Score&lt;/color&gt;: " + score;</pre></div><p>with this one:</p><div class="informalexample"><pre class="programlisting">uiText.text = "&lt;b&gt;&lt;color=blue&gt;Score&lt;/color&gt;:&lt;/b&gt; " + score;</pre></div><p>The text inside the <code class="literal">&lt;b&gt;</code> tag is now shown in boldface. Refer to the <span class="emphasis"><em>See also</em></span> section for more details.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl3sec09"></a>Getting the score</h4></div></div></div><p>It could also be helpful to retrieve the score. For example, this is useful when we not only display it on the<a id="id81" class="indexterm"></a> screen but also save the score in a scoreboard. Since we have set the <code class="literal">score</code> variable as <code class="literal">private</code>, we cannot access it directly. It's good practice not to change the variable into a <code class="literal">public</code> one but to add a new <code class="literal">get</code> function instead. The following is how we can do that:</p><div class="informalexample"><pre class="programlisting">  public long getScore(){
    return score;
  }</pre></div><p>We simply return the score value and the job is done.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec42"></a>See also</h3></div></div></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>If we want to explore the concept of resolution scaling, we can refer to the following recipe <span class="emphasis"><em>Resizing the UI according to the screen size and resolution</em></span>.</p></li><li style="list-style-type: disc"><p>Furthermore, if we want to replace the string <code class="literal">Score</code> on the counter with an icon, see <span class="emphasis"><em>Creating a modular coin counter</em></span> recipe that teaches us also how to add an icon for coins in the counter.</p></li><li style="list-style-type: disc"><p>Finally, if we are looking for <a id="id82" class="indexterm"></a>more information about rich text, refer to the official documentation available at <a class="ulink" href="http://docs.unity3d.com/Manual/StyledText.html" target="_blank">http://docs.unity3d.com/Manual/StyledText.html</a>.</p></li></ul></div></div></div>