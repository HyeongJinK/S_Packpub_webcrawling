<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch06lvl1sec55"></a>Animating a button when the cursor is over it</h2></div></div><hr /></div><p>In this recipe, you will learn how to animate a button when the cursor is over it. You will also learn how to<a id="id335" class="indexterm"></a> use an <span class="strong"><strong>Animator</strong></span> controller to handle generated animations from the <span class="strong"><strong>Button (Script)</strong></span> component and how to change these animations.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec152"></a>How to do it...</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>First of all, we have to create a UI button. Right-click on the <span class="strong"><strong>Hierarchy</strong></span> panel, then go to <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Button</strong></span>, and rename it <span class="strong"><strong>Animated Button</strong></span>. Of course, it is possible to resize, change <span class="strong"><strong>Source Image</strong></span>, the text, and place it as we wish.</p></li><li><p>Now, we need to change the <span class="strong"><strong>Transition</strong></span> mode in order to use a controller to animate it. In the <span class="strong"><strong>Button (Script)</strong></span> component, click on <span class="strong"><strong>Transition</strong></span> and select <span class="strong"><strong>Animation</strong></span>. If you don't want to create a controller from scratch, click on the <span class="strong"><strong>Auto Generate Animation</strong></span> button that has just appeared in the <span class="strong"><strong>Inspector</strong></span>, as shown here:</p><div class="mediaobject"><img src="/graphics/9781785885822/graphics/B04903_06_09.jpg" /></div></li><li><p>Now, Unity will <a id="id336" class="indexterm"></a>ask us where to save the new controller, and we have to give it a name. Let's choose a folder in our <span class="strong"><strong>Project</strong></span>, rename it <span class="strong"><strong>AnimatedButton.controller</strong></span> and then click on <span class="strong"><strong>Save</strong></span>.</p></li><li><p>We should notice that an <span class="strong"><strong>Animator</strong></span> component has just been added and the <span class="strong"><strong>Controller</strong></span> variable is set with the controller that we just saved. In order to open it, double-click on <span class="strong"><strong>AnimatedButton</strong></span> inside the <span class="strong"><strong>Controller</strong></span> variable.</p></li><li><p>Unity opens the <span class="strong"><strong>Animator</strong></span> window, as shown in the following screenshot. If some nodes are overlapping, we can just drag them around to make the graph clearer. The four nodes emanating from the <span class="strong"><strong>Any State</strong></span> node denote the different states that our button can be in: <span class="strong"><strong>Normal</strong></span>, <span class="strong"><strong>Highlighted</strong></span>, <span class="strong"><strong>Pressed</strong></span>, or <span class="strong"><strong>Disabled</strong></span>. The others, including the <span class="strong"><strong>Any State</strong></span> node, are special nodes, and they need to handle some transition:</p><div class="mediaobject"><img src="/graphics/9781785885822/graphics/B04903_06_10.jpg" /></div></li><li><p>The next step is to select the <span class="strong"><strong>Animation</strong></span> window. Click on <span class="strong"><strong>Normal</strong></span> and a drop-down menu will appear. Let's select <span class="strong"><strong>Highlighted</strong></span>, since we are going to animate the button<a id="id337" class="indexterm"></a> when the mouse is over it. Finally, click on the <span class="strong"><strong>Rec</strong></span> button in the top-left corner (the one with a circle), as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781785885822/graphics/B04903_06_11.jpg" /></div></li><li><p>Now, navigate to <span class="strong"><strong>Add Property</strong></span> | <span class="strong"><strong>Rect Transform</strong></span> | <span class="strong"><strong>Size Delta</strong></span>, and should appear on the windows with a couple of key frames<span class="strong"><strong>,</strong></span> one at the zeroth frame and another one at the sixtieth frame.</p></li><li><p>We move the red<a id="id338" class="indexterm"></a> line of the time to <span class="strong"><strong>60</strong></span> frames, where we have the second key frame, and in the <span class="strong"><strong>Inspector</strong></span>, we increase the width of <span class="strong"><strong>RectTranform</strong></span> of <span class="strong"><strong>Animated Button</strong></span> from <span class="strong"><strong>160</strong></span> to <span class="strong"><strong>200</strong></span>.</p></li><li><p>If we click on play and move the mouse arrow onto the button, it becomes larger, and then suddenly smaller, before it becomes larger again in a kind of pulsating motion. This happens because the animation is set as a loop. In order to set it properly, go through the <span class="strong"><strong>Project</strong></span> panel to find the <span class="strong"><strong>AnimatedButton.controller</strong></span> that you saved before, and then click on the small arrow at the beginning of its name. Now the four animations should appear. Let's click on <span class="strong"><strong>Highlighted</strong></span>.</p></li><li><p>In the <span class="strong"><strong>Inspector,</strong></span> just uncheck the <span class="strong"><strong>Loop Time</strong></span> variable.</p></li><li><p>Click on the play button, and now everything should work as planned.</p></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec153"></a>How it works...</h3></div></div></div><p>Here, we used an <span class="strong"><strong>Animator</strong></span> with a controller to handle the animation. In fact, when the mouse is over it, the controller triggers the <span class="strong"><strong>Highlighted</strong></span> animation. As a result, the button is stretched. When the mouse moves away, it triggers the <span class="strong"><strong>Normal</strong></span> animation, that is, just the button in its original state without a proper animation. However, since Unity handles the transition smoothly by<a id="id339" class="indexterm"></a> default, the button is then stretched back to its original state.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec154"></a>There's more...</h3></div></div></div><p>The following section teaches us how to slightly tweak the animation that we have created. By doing this, it helps to improve the quality of the animation.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch06lvl3sec51"></a>Stretches back the button to the same speed of the Highlighted animation</h4></div></div></div><p>When the mouse arrow<a id="id340" class="indexterm"></a> is moved away, the button is stretched back very fast â€” 10 times the speed of the animation that we created. This is because <span class="strong"><strong>Transition Duration</strong></span> is set to <span class="strong"><strong>0.1</strong></span>, which means that the animation will be played 10 times faster. Let's see how to change this parameter.</p><p>Open the <span class="strong"><strong>Animator</strong></span> window, and select the arrow that goes from <span class="strong"><strong>Any State</strong></span> (the blue node) to the <span class="strong"><strong>Normal</strong></span> node (the orange one). Now expand the <span class="strong"><strong>Settings</strong></span> menu in the <span class="strong"><strong>Inspector</strong></span> by clicking on the small triangle at the beginning of its name. Finally, change the <span class="strong"><strong>Transition Duration</strong></span> variable to <span class="strong"><strong>1</strong></span>. However, you are free to change this to any other value. If we want the animation faster, we just need to insert a number between <span class="strong"><strong>0</strong></span> and <span class="strong"><strong>1</strong></span>. If we want it slower, we insert a number larger than <span class="strong"><strong>1</strong></span>.</p></div></div></div>