<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec33"></a>Creating a well-formatted timer</h2></div></div><hr /></div><p>In this recipe, we are going to create a timer that displays time on the screen in minutes and seconds. The benefit of <a id="id172" class="indexterm"></a>using a more precise timer is the ability to provide the player with a more precise<a id="id173" class="indexterm"></a> indication of time. This is particularly helpful when there are moments during the game that can take up a considerable amount of time. Having time displayed in a familiar format also assists the player to easily recognize and respond to the amount of time remaining. We will use <span class="strong"><strong>Text (Script)</strong></span> and develop a script to achieve this goal.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec86"></a>How to do it...</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>First of all, we need<a id="id174" class="indexterm"></a> to create new UI text that will display our timer. Right-click on the <span class="strong"><strong>Hierarchy</strong></span> panel and then navigate to <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Text</strong></span>. Rename it to <span class="strong"><strong>Well Formatted Timer</strong></span>.</p></li><li><p>We can change the <span class="strong"><strong>Font</strong></span> and the <span class="strong"><strong>Font Size</strong></span> values as we wish so that they can better suit our needs.</p></li><li><p>Next, we can adjust <span class="strong"><strong>Color</strong></span>; for this example, we will set it to light gray, but feel free to use another color that better suits your design.</p></li><li><p>Now we can drag <span class="strong"><strong>Well Formatted Timer</strong></span> with <span class="strong"><strong>Rect Tool</strong></span> to where we want to place it.</p></li><li><p>To have the timer better displayed in <span class="strong"><strong>Scene View</strong></span>, we can write the word <code class="literal">time</code> in the <span class="strong"><strong>Text</strong></span> variable, even if this value will be replaced with the real amount of time remaining after every frame by our script. We have to ensure that the <span class="strong"><strong>Rich Text</strong></span> variable is checked so that we can have the advantage of changing colors in different parts of the text.</p></li><li><p>Then, we have to create the script that manages the timer. To do this, navigate to <span class="strong"><strong>Add Component</strong></span> | <span class="strong"><strong>New Script</strong></span> and rename it to <span class="strong"><strong>Well Formatted Timer Script</strong></span>. Then click on <span class="strong"><strong>Create and Add</strong></span>.</p></li><li><p>Double click on the script to edit it, and then add the <code class="literal">using UnityEngine.UI;</code> statement at the beginning of the script. This allows us to use UI elements within our script.</p></li><li><p>Before we can add any more functions, we need two private variables:</p><div class="informalexample"><pre class="programlisting">private Text uiText;
private float time;</pre></div></li><li><p>Now, we have to set the <code class="literal">uiText</code> variable in order to use it. We can do this in the <code class="literal">Start()</code> function:</p><div class="informalexample"><pre class="programlisting">void Start () {
  uiText = this.GetComponent&lt;Text&gt; ();
}</pre></div></li><li><p>In order to update the timer, we need to write a couple of lines in the <code class="literal">Update()</code> function. To do this, let's write the following:</p><div class="informalexample"><pre class="programlisting">void Update () {
  time += Time.deltaTime;
  string minutes = Mathf.Floor(time / 60).ToString(""00");
  string seconds = (time % 60).ToString(""00");
  uiText.text = "&lt;color=blue&gt;Time&lt;/color&gt;: "" + minutes + ":" + seconds;
}</pre></div></li><li><p>Let's save the script, and<a id="id175" class="indexterm"></a> our work is done. We should see something like this:</p><div class="mediaobject"><img src="/graphics/9781785885822/graphics/B04903_03_06.jpg" /></div></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec87"></a>How it works...â€¦</h3></div></div></div><p>First of all, we created a new UI text and adjusted it to suit our needs by changing <span class="strong"><strong>Font</strong></span>, <span class="strong"><strong>Font Size</strong></span>, and also <span class="strong"><strong>Color</strong></span>. We also ensured that the <span class="strong"><strong>Rich Text</strong></span> option was checked.</p><p>In the script, there are two private variables, <code class="literal">uiText</code> and <code class="literal">time</code>. The <code class="literal">uiText</code> variable stores the reference to the <span class="strong"><strong>Text (Script)</strong></span> component, and <code class="literal">time</code> stores the amount of time remaining.</p><p>In the <code class="literal">Start()</code> function, we<a id="id176" class="indexterm"></a> assigned <span class="strong"><strong>Text (Script)</strong></span>, which is attached in the same game object of this script component, to the <code class="literal">uiText</code> variable by calling the <code class="literal">this.GetComponent&lt;Text&gt;()</code> function.</p><p>Finally, in the <code class="literal">Update()</code> function, we added <code class="literal">Time.deltaTime</code> to the <code class="literal">time</code> variable. This indicates the amount of time that has elapsed from the last frame, when this function was called the last time.</p><p>Next, we calculated the minutes by dividing <code class="literal">time</code> by 60, and then removed its decimal part using the <code class="literal">Mathf.Floor(float f)</code> function. Finally, we transformed the result into a string that is stored in the <code class="literal">minutes</code> variable. In order to get the seconds remaining, we did the same and divided the time by 60. However, this time, we took the remainder of the division. We transformed this value into a string and stored it inside the <code class="literal">seconds</code> variable.</p><p>In the last line of the script, we updated the text variable on the <span class="strong"><strong>Text (Script)</strong></span> component, which was stored in the <code class="literal">uiText</code> variable. We put onto it a formatted string in which minutes are separated from seconds.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec88"></a>There's more...</h3></div></div></div><p>This section reminds us how to retrieve the time from our timer.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec21"></a>Getting the time variable</h4></div></div></div><p>As we have previously<a id="id177" class="indexterm"></a> done in the first recipe, it is possible to retrieve the value of the <code class="literal">time</code> variable. We just have to add a <code class="literal">get</code> function, like this:</p><div class="informalexample"><pre class="programlisting">public float getTime(){
  return time;
}</pre></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec89"></a>See also</h3></div></div></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>For more details about the <code class="literal">get</code> function, refer to the <span class="emphasis"><em>Implementing a score counter</em></span> recipe in the <span class="emphasis"><em>There's more...</em></span> section</p></li><li style="list-style-type: disc"><p>However, if you are looking for more information about rich text, the official documentation is the best place to<a id="id178" class="indexterm"></a> get it, at <a class="ulink" href="http://docs.unity3d.com/Manual/StyledText.html" target="_blank">http://docs.unity3d.com/Manual/StyledText.html</a></p></li></ul></div></div></div>