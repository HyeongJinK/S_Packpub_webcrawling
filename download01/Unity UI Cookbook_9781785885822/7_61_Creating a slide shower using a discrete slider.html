<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch07lvl1sec62"></a>Creating a slide shower using a discrete slider</h2></div></div><hr /></div><p>Here, we can go<a id="id370" class="indexterm"></a> further in providing additional customization for the player. In this case, we are going to implement a slide shower. The player will be<a id="id371" class="indexterm"></a> able to scroll between pictures using a slider. To achieve this, we will see how to write a script to run this system. Again, we will use the events from the <span class="strong"><strong>Slider (Script)</strong></span> component.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec170"></a>How to do it...</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>To begin, we need to create our slider, which will be the controller of the player, so let's right-click on the <span class="strong"><strong>Hierarchy</strong></span> panel and then go to <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Slider</strong></span>. Finally, rename it to <span class="strong"><strong>SlideShowerSlider</strong></span>.</p></li><li><p>Then, select the slider and, in the <span class="strong"><strong>Inspector</strong></span>, navigate to <span class="strong"><strong>Add Component</strong></span> | <span class="strong"><strong>New Script</strong></span>. Name it to <span class="strong"><strong>SlideShowerScript</strong></span> and then click on <span class="strong"><strong>Create and Add</strong></span>.</p></li><li><p>Now, double-click on the script in order to edit it. Like every other time when we deal with the UI, we have to add the <code class="literal">using UnityEngine.UI;</code> statement at the beginning of the script, since we are going to use some UI classes.</p></li><li><p>We need two <code class="literal">public</code> variables, one to store all the pictures that we want to show, and another to store the <span class="strong"><strong>Image (Script)</strong></span> component to show all the pictures, so let's write this code:</p><div class="informalexample"><pre class="programlisting">public Sprite[] pictures;
public Image img;</pre></div></li><li><p>The next step is to create a function that will be called by an event so that when the slider changes its value, it takes its value as a parameter. Since the slider value is a <code class="literal">float</code> variable, we need to make <code class="literal">value</code> a <code class="literal">float</code> variable. Here is the structure of our function:</p><div class="informalexample"><pre class="programlisting">public void changePicture(float value){
  }</pre></div></li><li><p>In the body of our function, the first thing that we have to do is transform <code class="literal">value</code>, which is a <code class="literal">float</code> variable, into an <code class="literal">int</code>, since array indexes are <code class="literal">int</code>. We can achieve this through a cast in this way:</p><div class="informalexample"><pre class="programlisting">int index = (int)value;</pre></div></li><li><p>Next, we can simply assign the correct picture as the sprite of the <span class="strong"><strong>Image (Script)</strong></span> component stored in <code class="literal">img</code> using <code class="literal">index</code>, which is found in the previous line:</p><div class="informalexample"><pre class="programlisting">img.sprite = pictures [index];</pre></div></li><li><p>Save the <a id="id372" class="indexterm"></a>script and come back to Unity. Then select <span class="strong"><strong>SlideShowerSlider</strong></span>. As usual, we have to call our function using an event, so<a id="id373" class="indexterm"></a> we click on the <span class="strong"><strong>+</strong></span> sign in the <span class="strong"><strong>On Value Changed (Single)</strong></span> event tab. Finally, we drag our script into the <span class="strong"><strong>object</strong></span> variable, and our event tab should be like this:</p><div class="mediaobject"><img src="/graphics/9781785885822/graphics/B04903_07_04.jpg" /></div></li><li><p>Now, in the drop-down menu, select <span class="strong"><strong>SlideShowerScript.changePicture</strong></span>. Also, be sure that you have selected <span class="strong"><strong>changePicture</strong></span> in the first set of functions, labeled <span class="strong"><strong>Dynamic Float</strong></span>, as demonstrated in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781785885822/graphics/B04903_07_05.jpg" /></div></li><li><p>The next step<a id="id374" class="indexterm"></a> requires us to assign a value to<a id="id375" class="indexterm"></a> the <code class="literal">img</code> variable in the <span class="strong"><strong>Inspector</strong></span>. So let's create a new UI image by right-clicking on the <span class="strong"><strong>Hierarchy</strong></span> panel and then going to <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Image</strong></span>. Lastly, rename it <span class="strong"><strong>SlideShower</strong></span>. Again, it is possible to resize it and place it wherever we want in the <span class="strong"><strong>Canvas</strong></span>. Modifying <span class="strong"><strong>Source Image</strong></span> is futile, since it will be replaced by our script. Once we are done, we should have something similar to this:</p><div class="mediaobject"><img src="/graphics/9781785885822/graphics/B04903_07_06.jpg" /></div></li><li><p>We can drag <span class="strong"><strong>SlideShower </strong></span>into the <code class="literal">img</code> variable on our <span class="strong"><strong>SlideShowerScript</strong></span>.</p></li><li><p>We should <a id="id376" class="indexterm"></a>add all the pictures that we want onto the <code class="literal">pictures</code> variable in the <span class="strong"><strong>Inspector</strong></span>. We can expand the variable<a id="id377" class="indexterm"></a> by clicking on the little triangle to the left of the name of the variable, and in <span class="strong"><strong>Size</strong></span>, we enter the number of the pictures that we want. It should appear as a row for each picture, and we can set them with whatever pictures we want. Here is an example of this concept; it uses image elements from previous chapters:</p><div class="mediaobject"><img src="/graphics/9781785885822/graphics/B04903_07_07.jpg" /></div></li><li><p>We cannot use our slide shower yet, since we have to finish setting up <span class="strong"><strong>SlideShowerSlider</strong></span>. In fact, in the <span class="strong"><strong>Slider (Script)</strong></span> component, we have to tweak the <span class="strong"><strong>Min Value</strong></span> and <span class="strong"><strong>Max Value</strong></span> variables according to the number of pictures we<a id="id378" class="indexterm"></a> selected in the previous step. So, let's set <span class="strong"><strong>Min Value</strong></span> to <span class="strong"><strong>0</strong></span> and <span class="strong"><strong>Max Value</strong></span> to the number of pictures minus one (for instance, if there are four pictures, the<a id="id379" class="indexterm"></a> number we set will be <span class="strong"><strong>3</strong></span>).</p></li><li><p>Furthermore, we have to check the <span class="strong"><strong>Whole numbers</strong></span> variable and set the value of the variable to <span class="strong"><strong>0</strong></span> (this can also be done by dragging the variable slider completely to the left).</p></li><li><p>Finally, save the scene. Now, we are ready to click on the play button to see our slide shower in action, like this:</p><div class="mediaobject"><img src="/graphics/9781785885822/graphics/B04903_07_08.jpg" /></div></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec171"></a>How it works...</h3></div></div></div><p>In this recipe, we <a id="id380" class="indexterm"></a>created a slide shower that is controlled by a slider. We also wrote a script to handle<a id="id381" class="indexterm"></a> this. Every time the slider changes its value, an event is triggered and it calls the function inside our script. This function just changes the image inside the slide shower accordingly.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec172"></a>There's more...</h3></div></div></div><p>The following sections will give us some useful suggestions on how to improve our discrete SlideShower.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch07lvl3sec55"></a>Adding a text label to show the number of pictures</h4></div></div></div><p>Sometimes, we<a id="id382" class="indexterm"></a> might want to show the player how many pictures are contained within the slider and which picture is currently being viewed. We can do this by adding a text label next to <span class="strong"><strong>SlideShower</strong></span> and controlling it through our script.</p><p>As the first step, right-click on the <span class="strong"><strong>Hierarchy</strong></span> panel and go to <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Text</strong></span>. Rename it <span class="strong"><strong>SlideShowerLabel</strong></span>. Of course, we can resize it and change the font or size of the text as we wish. Finally, place it next to <span class="strong"><strong>SlideShower</strong></span>.</p><p>Now we open our script <a id="id383" class="indexterm"></a>again and add a new variable to keep track of <span class="strong"><strong>SlideShowerLabel</strong></span>:</p><div class="informalexample"><pre class="programlisting">public Text label;</pre></div><p>At the bottom of the body of the <code class="literal">changePicture()</code> function, we have to update the text of our label in this way:</p><div class="informalexample"><pre class="programlisting">label.text = (index + 1) + "/" + pictures.Length;</pre></div><p>In order to obtain the current number of pictures that are being displayed, we added <code class="literal">1</code> to <code class="literal">index</code>. We did this because it is the current picture, but it starts from zero. Then we obtained the length of the array in order to find out the total number of pictures.</p><p>Save the script and then drag <span class="strong"><strong>SlideShowerLabel</strong></span> in the <code class="literal">label</code> variable in the <span class="strong"><strong>Inspector</strong></span> inside your script. And the trick is done!</p><div class="mediaobject"><img src="/graphics/9781785885822/graphics/B04903_07_09.jpg" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch07lvl3sec56"></a>Making the slider continuous</h4></div></div></div><p>Right now, the slider moves in a discrete way, since we have constructed it to be like that. But if, for some reason, it has to be continuous, we can achieve this very easily by simply unchecking the <span class="strong"><strong>Whole Numbers</strong></span> variable. In fact, we used in our script a <code class="literal">float</code> as a parameter and <a id="id384" class="indexterm"></a>converted it into <code class="literal">int</code> in the first line of the <span class="strong"><strong>changePicture()</strong></span> function. Therefore, we don't have to worry about float conversions.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch07lvl3sec57"></a>Automating the slider setup</h4></div></div></div><p>Each time we <a id="id385" class="indexterm"></a>have to change the number of pictures of our <span class="strong"><strong>SlideShower</strong></span>, we also need to update the <span class="strong"><strong>SlideShowerSlider</strong></span> settings in the <span class="strong"><strong>Slider (Script)</strong></span> component. We can automatize this process in the script. Therefore, we don't have to worry about this anymore.</p><p>To do this, let's add a new function called <code class="literal">updateSliderSettings()</code>. This is its body:</p><div class="informalexample"><pre class="programlisting">private void updateSliderSettings(){
}</pre></div><p>First of all, we have to retrieve the <code class="literal">Slider</code>, like this:</p><div class="informalexample"><pre class="programlisting">  Slider slider = GetComponent&lt;Slider&gt; ();</pre></div><p>Then we can start setting its values. The first values are the <code class="literal">minValue</code> and <code class="literal">maxValue</code> variables. We have to set the former to zero, and the latter equals the number of pictures, which we know through the length of the array:</p><div class="informalexample"><pre class="programlisting">  slider.minValue = 0;
  slider.maxValue = pictures.Length - 1;</pre></div><p>The next values are the <code class="literal">WholeNumbers</code> Boolean, for making our <code class="literal">slider</code> discrete, and <code class="literal">value</code>, for initializing <code class="literal">slider</code> at the beginning:</p><div class="informalexample"><pre class="programlisting">    slider.wholeNumbers = true;
    slider.value = 0;</pre></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip29"></a>Tip</h3><p>If we want to make the slider continuous, as done in the <span class="emphasis"><em>Making the slider continuous</em></span> section, we will have to change the line in <code class="literal">slider.wholeNumbers = false;</code>.</p></div><p>Next, we have to reset our <span class="strong"><strong>SlideShower</strong></span> at the beginning as well, by calling the <code class="literal">changePicture()</code> function. We do this by passing <code class="literal">0</code> as the parameter:</p><div class="informalexample"><pre class="programlisting">  changePicture (0);</pre></div><p>Finally, in the <code class="literal">Start()</code> function, we have to call the <code class="literal">updateSliderSettings()</code> function, as follows:</p><div class="informalexample"><pre class="programlisting">  void Start () {
    updateSliderSettings ();
  }</pre></div><p>Now, we don't have to<a id="id386" class="indexterm"></a> take care of changing the slider settings in the steps starting from step 14 anymore because we have automatized the process inside our script.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch07lvl3sec58"></a>Adding pictures at runtime</h4></div></div></div><p>We may want to <a id="id387" class="indexterm"></a>change the number of pictures at runtime. We can do this by creating another <code class="literal">public</code> function. Therefore, it can be called by other scripts that create a new array. The <code class="literal">public</code> variable copies all the values in the new one plus the new picture, and at the end, it calls the <code class="literal">updateSliderSettings()</code> function again, so it is updated as well.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip30"></a>Tip</h3><p>Keep in mind that by calling the <code class="literal">updateSliderSettings()</code> function, we are going to reset <span class="strong"><strong>SlideShower</strong></span> to zero, which means it will begin from the first picture. If you don't want this, we can create another function (or directly in this one) to preserve that number when new pictures are added.</p></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec173"></a>See also</h3></div></div></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>In the last recipe of this chapter, there is another way to perform call events without touching the events in the <span class="strong"><strong>Inspector</strong></span>. In fact, this can be achieved by using the handlers inside the script. More information is available in the <span class="emphasis"><em>Changing the cursor at runtime</em></span> recipe.</p></li></ul></div></div></div>