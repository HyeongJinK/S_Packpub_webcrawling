<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch07lvl1sec63"></a>Creating a slider that changes a single color channel</h2></div></div><hr /></div><p>In this recipe, we are <a id="id388" class="indexterm"></a>going to see how to provide the player with the ability to completely customize the color of something. In this case, we will allow the player to customize an <span class="strong"><strong>Image (Script)</strong></span> component. It is important to keep in mind that we are not limited to customizing just the <span class="strong"><strong>Image (Script)</strong></span> component. In fact, we can change everything that has a color, including lights. Changing lights is useful if you want to create ambience and immersive UIs. This is associated with what you learned in <a class="link" href="#" linkend="ch04">Chapter 4</a>, <span class="emphasis"><em>Creating Panels for Menus</em></span>, in the <span class="emphasis"><em>Making UI Elements affected by different lights</em></span> recipe. Compared to the <span class="emphasis"><em>Creating a button that changes color</em></span> and <span class="emphasis"><em>Creating a slider that changes colors gradually</em></span> recipes, here the player will be able to change colors in a better way. He will be able to tweak every color channel.</p><p>In order to implement all of this, we need to create a slider that controls, through a script, the single color <a id="id389" class="indexterm"></a>channel, and modify the <span class="strong"><strong>Image (Script)</strong></span> component accordingly.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec174"></a>How to do it...</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>To create the slider, right-click on the <span class="strong"><strong>Hierarchy</strong></span> panel and then go to <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Slider</strong></span> and rename it <span class="strong"><strong>RedChannelColorSlider</strong></span>. Of course, it is possible to resize it, change the <span class="strong"><strong>Source Image</strong></span>, change the text inside, and finally place it as we wish in <span class="strong"><strong>Canvas</strong></span>.</p></li><li><p>Select the slider. Then, in the <span class="strong"><strong>Inspector</strong></span>, navigate to <span class="strong"><strong>Add Component</strong></span> | <span class="strong"><strong>New Script</strong></span>, name it <span class="strong"><strong>ChangeColorChannelSliderScript</strong></span>, and click on <span class="strong"><strong>Create and Add</strong></span>.</p></li><li><p>Double-click on the script in order to edit it. Since we are going to use the <span class="strong"><strong>Image</strong></span> class, we have to add the <code class="literal">using UnityEngine.UI;</code> statement at the beginning of the script.</p></li><li><p>For this script, we only need one <code class="literal">public</code> variable. Here, we are going to store the <span class="strong"><strong>Image (Script)</strong></span> component whose color we want to modify through our slider by a single channel. So, we can write this:</p><div class="informalexample"><pre class="programlisting">public Image img;</pre></div></li><li><p>The next step is to write a function that changes one color channel of the <span class="strong"><strong>Image (Script)</strong></span> component, stored in the <code class="literal">img</code> variable. In this step, we are going to change only the red channel, but in the <span class="emphasis"><em>There's more...</em></span> section, you will see that it is possible to change other channels as well. In order to get it, our function takes <code class="literal">value</code>, a <code class="literal">float</code>, as a parameter and assigns a <code class="literal">new Color</code> to <code class="literal">img</code>. Here, all the parameters of the color channels are the same, except the red one; it is assigned with <code class="literal">value</code>. This is our function:</p><div class="informalexample"><pre class="programlisting">public void changeRed(float value){
  img.color = new Color (value, img.color.g, img.color.b, img.color.a);
}</pre></div></li><li><p>Now, we can save the script and come back to Unity. As usual, we have to call our function using an event, and in this case, we can use the one in the <span class="strong"><strong>Slider (Script)</strong></span> component. Select <span class="strong"><strong>RedChannelColorSlider</strong></span> and click on the <span class="strong"><strong>+</strong></span> sign in the <span class="strong"><strong>On Value Changed (Single)</strong></span> event tab. Finally, we drag our script into the <span class="strong"><strong>object</strong></span> variable, and we should have the event tab looking as follows:</p><div class="mediaobject"><img src="/graphics/9781785885822/graphics/B04903_07_10.jpg" /></div></li><li><p>Next, in the<a id="id390" class="indexterm"></a> drop-down menu, select <span class="strong"><strong>ChangeColorChannelSliderScript.changeRed</strong></span>. Be sure to select <span class="strong"><strong>changeRed</strong></span> in the first set of functions, labeled <span class="strong"><strong>Dynamic float</strong></span>, as displayed in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781785885822/graphics/B04903_07_11.jpg" /></div></li><li><p>The last thing that we have to do is assign a value to the <code class="literal">img</code> variable in the <span class="strong"><strong>Inspector</strong></span>. To do this, let's create a new panel and right-click on the <span class="strong"><strong>Hierarchy</strong></span> panel. Then go to <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Panel</strong></span> and rename it <span class="strong"><strong>ChangeColorPanel</strong></span>. Again, keep in mind that it is possible to resize it, modify the <span class="strong"><strong>Source Image</strong></span>, and finally place it wherever we want in the <span class="strong"><strong>Canvas.</strong></span></p></li><li><p>We drag<a id="id391" class="indexterm"></a> <span class="strong"><strong>ChangeColorPanel</strong></span> in the <code class="literal">img</code> variable onto our <span class="strong"><strong>ChangeColorChannelSliderScript</strong></span>. If we want, we can also add a text label next to the slider so that we can show to the player what color channel the slider changes.</p></li><li><p>Finally, save the scene and click on play to check whether everything works as expected:</p><div class="mediaobject"><img src="/graphics/9781785885822/graphics/B04903_07_12.jpg" /></div></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec175"></a>How it works...</h3></div></div></div><p>We started by creating a script that takes a <code class="literal">float</code> as a parameter and uses it to change the red color channel. In fact, it creates a new color that has all the channels, including alpha, with the same value of the previous color. After all, we have acquired them from it. We assigned the value that was received as a parameter in the red channel.</p><p>Lastly, in order to call our function, we set the <code class="literal">On Value Change ()</code> event so that it is triggered every time the value of the slider changes. Instead of selecting the <code class="literal">Static</code> parameter, we chose the same function in the <span class="strong"><strong>Dynamic float</strong></span> set. By doing this, we can automatically pass the <a id="id392" class="indexterm"></a>value of the slider itself as a parameter to the function. Finally, this function assigns a new color after it has tweaked its color channels.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec176"></a>There's more...</h3></div></div></div><p>We can definitely extend the concepts that have been learnt in this recipe to the other channels, including the alpha channel, or applying this to lights.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch07lvl3sec59"></a>Changing all other color channels</h4></div></div></div><p>If we give a<a id="id393" class="indexterm"></a> player the ability to change the color of something, which in this case was the <span class="strong"><strong>Image (Script)</strong></span> component, it would be ideal if we could also provide the player with the ability to change the other two color channels.</p><p>In order to do so, we need to add two other functions, one for each channel. We can call them <code class="literal">changeGreen()</code> and <code class="literal">changeBlue()</code>. Similar to <code class="literal">changeRed()</code>, which we have written before, they take <code class="literal">value</code> as a <code class="literal">float</code> parameter and change the color to the <span class="strong"><strong>Image (Script)</strong></span> component stored in <code class="literal">img</code>. They work exactly in the same way, but instead of assigning a value to the red channel, they assign a value to their channel and keep the red one unaltered.</p><p>So here are our new functions:</p><div class="informalexample"><pre class="programlisting">public void changeGreen(float value){
  img.color = new Color (img.color.r, value, img.color.b, img.color.a);
}

public void changeBlue(float value){
  img.color = new Color (img.color.r, img.color.g, value, img.color.a);
}</pre></div><p>Of course, the next step is to create two other sliders (if we want, we can also create text labels), and rename them <code class="literal">GreenChannelColorSlider</code> and <code class="literal">BlueChannelColorSlider</code> respectively. Then we have to follow the steps starting from step 6, and instead of selecting the <code class="literal">changeRed</code> function, we select the function pertaining to what we want the player to change:</p><div class="mediaobject"><img src="/graphics/9781785885822/graphics/B04903_07_13.jpg" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch07lvl3sec60"></a>Changing the alpha channel</h4></div></div></div><p>If we want to <a id="id394" class="indexterm"></a>provide the player with an additional level of customization, we can allow him to adjust the alpha channel. Again, we can achieve this in the same way — by leaving all the color channels untouched and changing only the alpha channel.</p><p>Let's create another function:</p><div class="informalexample"><pre class="programlisting">public void changeAlpha(float value){
  img.color = new Color (img.color.r, img.color.g, img.color.b, value);
}</pre></div><p>Like the previous section, we need to create a new slider. Once we have done this, we can call it <span class="strong"><strong>AlphaChannelColorSlider</strong></span> and again follow all the steps from step 6 onwards:</p><div class="mediaobject"><img src="/graphics/9781785885822/graphics/B04903_07_14.jpg" /></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip31"></a>Tip</h3><p>Sometimes, we don't want to allow the player to make the object completely disappear <a id="id395" class="indexterm"></a>while he is tweaking the alpha channel by setting it to <code class="literal">0</code>, or make the object completely appear on the screen by setting it to <code class="literal">1</code>. So, to ensure that this will not happen, we can select <span class="strong"><strong>AlphaChannelColorSlider</strong></span>. Then, in the <span class="strong"><strong>Inspector</strong></span>, we set a bigger value for <span class="strong"><strong>Min Value</strong></span> or a smaller one for <span class="strong"><strong>Max Value</strong></span>.</p><p>Of course, this can also be applied to the other sliders if we wish.</p><p>If we really want to provide the player with the idea that something is blocked in the slider — something that he will be able to unlock later — we can do this using what we covered in the <span class="emphasis"><em>Adding upper and lower bounds to the slider </em></span>recipe in <a class="link" href="#" linkend="ch04">Chapter 4</a>, <span class="emphasis"><em>Creating Panels for Menus</em></span>.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch07lvl3sec61"></a>Integrating with lights instead of image components</h4></div></div></div><p>Since these sliders are <a id="id396" class="indexterm"></a>very powerful tools, and they provide the player with options for real-time customizations, they can also be used to change other components, such as lights. This is especially true if these lights affect our UI, as we explored in the <span class="emphasis"><em>Making UI Elements affect by variable lights</em></span> recipe in <a class="link" href="#" linkend="ch04">Chapter 4</a>, <span class="emphasis"><em>Creating Panels for menus</em></span>.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip32"></a>Tip</h3><p>Here, we are going to change the script, but if we want to keep the old one, we just change the name of its class, along with the filename, which has to be the same.</p></div><p>First of all, we cannot use the <code class="literal">img</code> variable anymore, since it cannot store a light. So, we can erase it. Having done this, we can also delete the <code class="literal">using UnityEngine.UI;</code> statement at the beginning of the script, since we won't use UI classes anymore. Therefore, let's replace the old variable with the new one, that is, <code class="literal">Light</code>:</p><div class="informalexample"><pre class="programlisting">public Light light;</pre></div><p>Now we have to<a id="id397" class="indexterm"></a> replace every occurrence of <code class="literal">img</code> with <code class="literal">light</code>. So, the <code class="literal">changeRed()</code> function will be as follows:</p><div class="informalexample"><pre class="programlisting">public void changeRed(float value){
  light.color = new Color (value, light.color.g, light.color.b, light.color.a);
}</pre></div><p>Here is what the <code class="literal">changeGreen()</code> function looks like:</p><div class="informalexample"><pre class="programlisting">public void changeGreen(float value){
  light.color = new Color (light.color.r, value, light.color.b, light.color.a);
}</pre></div><p>The <code class="literal">changeBlue()</code> function becomes like this:</p><div class="informalexample"><pre class="programlisting">public void changeBlue(float value){
  light.color = new Color (light.color.r, light.color.g, value, light.color.a);
}</pre></div><p>And finally, we have the <code class="literal">changeAlpha()</code> function:</p><div class="informalexample"><pre class="programlisting">public void changeAlpha(float value){
  light.color = new Color (light.color.r, light.color.g, light.color.b, value);
}</pre></div><p>For the final step, we need to set the <code class="literal">light</code> variable in the <span class="strong"><strong>Inspector</strong></span> by dragging a light from the <span class="strong"><strong>Hierarchy</strong></span> panel. We might also use the one that we created in <a class="link" href="#" linkend="ch04">Chapter 4</a>, <span class="emphasis"><em>Creating Menus and Panels</em></span>, and if needed, we can set the events on the sliders again.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec177"></a>See also</h3></div></div></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>In order to<a id="id398" class="indexterm"></a> integrate this recipe in amazing ways inside your game, you can refer to the <span class="emphasis"><em>Making UI elements affected by variable lights</em></span> and <span class="emphasis"><em>Adding upper and lower bounds to the slider</em></span> recipes in <a class="link" href="#" linkend="ch04">Chapter 4</a>, <span class="emphasis"><em>Creating Panels for Menus</em></span>.</p></li><li style="list-style-type: disc"><p>Furthermore, we<a id="id399" class="indexterm"></a> should also refer to the official documentation about lights at <a class="ulink" href="http://docs.unity3d.com/Manual/class-Light.html" target="_blank">http://docs.unity3d.com/Manual/class-Light.html</a>.</p></li></ul></div></div></div>