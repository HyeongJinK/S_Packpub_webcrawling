<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch07lvl1sec60"></a>Making a button that changes color</h2></div></div><hr /></div><p>In this recipe, we<a id="id358" class="indexterm"></a> will see the first basic customization that we can allow the player to do. This customization will allow him to change the color of a<a id="id359" class="indexterm"></a> button by clicking on it, and then switch between two colors. In this way, you will learn how it is possible to use events to customize buttons when the player interacts with them.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec163"></a>How to do it...</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>In the first step, we have to create our UI button. Right-click on the <span class="strong"><strong>Hierarchy</strong></span> panel, then go to <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Button</strong></span>, and rename it to <span class="strong"><strong>ChangeColorButton</strong></span>. Of course, it is possible to resize the button, change <span class="strong"><strong>Source Image</strong></span>, the text, and place it as we wish in <span class="strong"><strong>Canvas</strong></span>.</p></li><li><p>Now, it's already time to write our script to handle the whole process. Select <span class="strong"><strong>ChangeColorButton</strong></span> and, in the <span class="strong"><strong>Inspector</strong></span>, navigate to <span class="strong"><strong>Add Component</strong></span> | <span class="strong"><strong>New Script</strong></span>. Name it <span class="strong"><strong>ChangeColorButtonScript</strong></span>, and then click on <span class="strong"><strong>Create and Add</strong></span>.</p></li><li><p>Double-click on<a id="id360" class="indexterm"></a> the script in order to edit it. Next, we have to add the <code class="literal">using UnityEngine.UI;</code> statement at the beginning of the script, since we are going to use the <code class="literal">Image</code> class. Before the beginning of the class, we can also add this line: <code class="literal">[RequireComponent(typeof(Image))]</code> (without the semicolon at the end). In this way, the script requires an <span class="strong"><strong>Image (Script)</strong></span> component attached to the same game object of it.</p></li><li><p>We need two variables to store the two colors. The first variable is <code class="literal">public</code>, so it can be set in the <span class="strong"><strong>Inspector</strong></span> with the new color, and the other one is <code class="literal">private</code>, in order to keep the original color of the <span class="strong"><strong>Image (Script)</strong></span> component stored. Then, we also need a <code class="literal">private</code> variable to store the reference to the <span class="strong"><strong>Image (Script)</strong></span> component that is attached to this script, and a third <code class="literal">private</code> variable - a <code class="literal">bool</code> variable, is needed to determine whether our script has to change the color or restore the original. So let's write this code:</p><div class="informalexample"><pre class="programlisting">public Color color;
private Color originalColor;
private Image img;
private bool b;</pre></div></li><li><p>The next step is to write the <code class="literal">Start()</code> function, where we will store the initial values for our <code class="literal">private</code> variables. So, let's take the reference to the <span class="strong"><strong>Image (Script)</strong></span> component using the <code class="literal">GetComponent&lt;Image&gt;()</code> function and use it to obtain the original color and store it in the other variable. Therefore, we can write the following:</p><div class="informalexample"><pre class="programlisting">void Start () {
  img = GetComponent&lt;Image&gt; ();
  originalColor = img.color;
}</pre></div></li><li><p>Now, we don't need an <code class="literal">Update()</code> function but a function that can be triggered by some events instead, for instance, when our button is pressed. In order to do so, we need to make it public as well. Let's call it <code class="literal">onClick()</code> and, set the new or the original color, according to our bool variable, through an <code class="literal">if</code> statement to differentiate the two cases. Finally, update the <code class="literal">bool</code> value by inverting it. So, our function will look like this:</p><div class="informalexample"><pre class="programlisting">public void onClick(){
  if (b)
    img.color = color;
  else
    img.color = originalColor;
  b = !b;
}</pre></div></li><li><p>Our script is now ready. We can save it and come back to Unity. The next step is to trigger our script through an event and - as we have done in a few other recipes from <a id="id361" class="indexterm"></a>other chapters - we do the following: select <span class="strong"><strong>ChangeColorButton</strong></span>, look inside the <span class="strong"><strong>Button (Script)</strong></span> component, and click on the small <span class="strong"><strong>+</strong></span> sign on the <span class="strong"><strong>On Click ()</strong></span> event tab in the bottom-right corner.</p></li><li><p>Drag the script inside the <span class="strong"><strong>object</strong></span> variable, and in the drop-down menu, navigate to <span class="strong"><strong>ChangeColorButtonScript</strong></span> | <span class="strong"><strong>onClick()</strong></span>. The final result should be like this:</p><div class="mediaobject"><img src="/graphics/9781785885822/graphics/B04903_07_01_Variation.jpg" /></div></li><li><p>As the final step, we ensure that the color variable in our script is changed to display another color. Finally, we can  test whether what we have done works as we planned.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip27"></a>Tip</h3><p>When Unity creates a new color as the default, it has all the parameters set to zero, so it is black and the alpha channel is to zero. As a result, when we choose another color, we must also ensure that we set an appropriate alpha channel for what we want to get.</p></div></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec164"></a>How it works...</h3></div></div></div><p>Here, we created a function that switches between two colors. This system is created using a <code class="literal">bool</code> variable to determine whether we are going to change to the new color or restore the original one. In fact, every time<a id="id362" class="indexterm"></a> we have an operation, we reverse the value of this variable. Then, we assigned our function to the <span class="strong"><strong>On Click ()</strong></span> event on the <span class="strong"><strong>Button (Script)</strong></span> component so that it is called every time the player clicks on the button.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec165"></a>There's more...</h3></div></div></div><p>Maybe we want the button to change another image instead of itself. The next section will explain to us, how we can achieve this.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch07lvl3sec54"></a>Changing another image instead of the one attached to the button</h4></div></div></div><p>If we want the<a id="id363" class="indexterm"></a> button to affect another image instead of itself, we can slightly modify our script. In fact, we have to make the <code class="literal">img</code> variable <code class="literal">public</code> so that it can be set in the <span class="strong"><strong>Inspector</strong></span>:</p><div class="informalexample"><pre class="programlisting">private Image img;</pre></div><p>Then, we can erase this line from the <code class="literal">Start()</code> function, since we set <code class="literal">img</code> on our own:</p><div class="informalexample"><pre class="programlisting">img = GetComponent&lt;Image&gt; ();</pre></div><p>Finally, set the <code class="literal">img</code> variable from the <span class="strong"><strong>Inspector</strong></span>, and we are done. Of course, if we want to test it, we can create, for instance, a panel and drag and drop it into the <code class="literal">img</code> variable.</p><p>Furthermore, it would be good to remove the <code class="literal">[RequireComponent(typeof(Image))]</code> statement so that we can place this script on other game objects as well.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec166"></a>See also</h3></div></div></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>If you need a gradual change between colors, you can refer to the next recipe, <span class="emphasis"><em>Creating a slider that changes colors gradually</em></span>.</p></li><li style="list-style-type: disc"><p>However, in the last recipe of this chapter, there is another way to call events without touching the events in the <span class="strong"><strong>Inspector</strong></span>. In fact, this could be achieved by using the handlers inside the script. More information is available in the <span class="emphasis"><em>Changing the cursor at runtime</em></span> recipe.</p></li></ul></div></div></div>