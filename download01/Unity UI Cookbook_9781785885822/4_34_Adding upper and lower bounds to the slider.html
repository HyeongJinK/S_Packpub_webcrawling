<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec38"></a>Adding upper and lower bounds to the slider</h2></div></div><hr /></div><p>Unity allows <a id="id200" class="indexterm"></a>us to add lower and upper bounds to sliders in a very simple <a id="id201" class="indexterm"></a>way. Inside the <span class="strong"><strong>Slider (Script)</strong></span> component, there are two variables named <span class="strong"><strong>Min Value</strong></span> and <span class="strong"><strong>Max Value</strong></span>. If we take the slider from the <a id="id202" class="indexterm"></a>previous recipe and change the values of these variables, we'll see<a id="id203" class="indexterm"></a> that we can drag the handle of the slider to the end and the value has an upper bound, as we can see in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781785885822/graphics/B04903_04_06.jpg" /></div><p>In this recipe, we will write a script to block the handle of the slider as well in order to make the player perceive a real upper or lower bound.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec100"></a>How to do it...</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>So that we don't recreate another slider, we can take the one from the previous<a id="id204" class="indexterm"></a> recipe; thus, we can also see the value as a percentage. Otherwise, simply right-click on the <span class="strong"><strong>Hierarchy</strong></span> panel and then click on <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Slider</strong></span>.</p></li><li><p>For the next step, we<a id="id205" class="indexterm"></a> need to create our script on the slider. So, click on <span class="strong"><strong>Add Component</strong></span> | <span class="strong"><strong>New Script</strong></span>, name it <span class="strong"><strong>UpperAndLowerBoundsForSlidersScript</strong></span>, and then click on <span class="strong"><strong>Create and Add</strong></span>.</p></li><li><p>Now, double click on<a id="id206" class="indexterm"></a> the script in order to edit it. As usual, we need to add the <code class="literal">using UnityEngine.UI;</code> statement at the beginning of the script so that we can handle<a id="id207" class="indexterm"></a> UI elements within the script. We can also add the following line before the class: <code class="literal">[RequireComponent(typeof(Slider))]</code> (without the semicolon at the end). By doing this, the script requires a <span class="strong"><strong>Slider (Script)</strong></span> component attached to the same game object of it in order for it to work. In fact, if it is not present, Unity will add it for us.</p></li><li><p>We need a private variable to keep track of the <span class="strong"><strong>Slider (Script)</strong></span> component without seeking it every time that we want to check its upper and lower bounds. We also need two public variables. They can be set in the <span class="strong"><strong>Inspector</strong></span> or via the script for the lower and<a id="id208" class="indexterm"></a> the upper bound, respectively. So, we can write these lines:</p><div class="informalexample"><pre class="programlisting">private Slider slider;
public float lowerBound;
public float upperBound;</pre></div></li><li><p>In the <code class="literal">Awake()</code> function, we have to link the <code class="literal">Slider</code> to our variable and then carry out our first <a id="id209" class="indexterm"></a>check. To improve performance, future checks will be done only if the value of <code class="literal">Slider</code> changes. We can perform our check by calling the <a id="id210" class="indexterm"></a>
<code class="literal">checkBounds()</code> function, which we will write in the next step. Thus, we can write the <code class="literal">Awake()</code> function as follows:</p><div class="informalexample"><pre class="programlisting">void Awake () {
  slider = GetComponent&lt;Slider&gt; ();
  checkBounds ();
}</pre></div></li><li><p>In the <code class="literal">check</code> function, we have to ensure that the value of <code class="literal">Slider</code> is between the lower bound<a id="id211" class="indexterm"></a> and the upper bound. If not, we have to change its value to the closer bound, like this:</p><div class="informalexample"><pre class="programlisting">public void checkBounds () {
  if(slider.value&gt;= upperBound){
    slider.value = upperBound;
  } else {
    if(slider.value&lt;= lowerBound){
      slider.value = lowerBound;
    }
  }
}</pre></div></li><li><p>Save the script and come back to Unity from MonoDevelop. As in the previous recipe, we can see this at the bottom of the <span class="strong"><strong>Slider (Script)</strong></span> component, the <span class="strong"><strong>On Value Change (Single)</strong></span> panel. By clicking on the <span class="strong"><strong>+</strong></span> sign in the bottom-right corner of the panel, we add a new element (the second one if you took the slider from the previous recipe).</p></li><li><p>Next, we have to drag the <span class="strong"><strong>Slider</strong></span> itself into the <span class="strong"><strong>object</strong></span> variable. Now the drop-down menu should be enabled, so click on it and select <span class="strong"><strong>UpperAndLowerBoundsForSlidersScript</strong></span> | <span class="strong"><strong>checkBounds</strong></span>. In this way, when the value of the slider is changed, the <code class="literal">checkBounds()</code> function from our script is called, and it will check whether the new value of the slider is inside the bounds. If we have taken the slider from the previous recipe, we should see this:</p><div class="mediaobject"><img src="/graphics/9781785885822/graphics/B04903_04_07.jpg" /></div></li><li><p>Finally, we can <a id="id212" class="indexterm"></a>press the play button and perform a test to see whether everything works as it should.</p></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec101"></a>How it works...</h3></div></div></div><p>Since Unity doesn't allow<a id="id213" class="indexterm"></a> us to block the handle of the slider directly, we need a script that controls it within the bounds. In fact, every time the <code class="literal">OnValueChange</code> event occurs, the value of the slider is<a id="id214" class="indexterm"></a> passed to our script. This checks whether the slider value is between the bounds. If it isn't, the script changes the value of the slider to the closest bound limit. For example, if the player tries to move the slider further than the bound, our script will make the slider come back to that bound. Finally, our script <a id="id215" class="indexterm"></a>stores the bound limits in a couple of public variables so that we can change them during the gameplay with other scripts. This is useful because the player will perceive this as a block of the slider. Therefore, we can change the bounds to give more power to the player over time.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec102"></a>There's more...</h3></div></div></div><p>The following sections will give us some interesting suggestions on how to improve our <span class="strong"><strong>Slider Shower</strong></span>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl3sec27"></a>Changing the color when a bound is reached</h4></div></div></div><p>Sometimes in games, we not only want to block the slider by creating bounds, but also to make the player feel the bounds. One way of doing this is by changing the color of the <span class="strong"><strong>Slider Shower</strong></span>. To achieve this, we need to modify the script slightly. First, we should add the<a id="id216" class="indexterm"></a> reference to the <span class="strong"><strong>Slider Shower</strong></span> inside our script. Thus, we can add a new public variable into our script:</p><div class="informalexample"><pre class="programlisting">public Text uiText;</pre></div><p>This will store the <span class="strong"><strong>Text (Script)</strong></span> component attached to <span class="strong"><strong>Slider Shower</strong></span>. Furthermore, we need to change the <code class="literal">checkBounds()</code> function in the following way:</p><div class="informalexample"><pre class="programlisting">public void checkBounds () {
  if(slider.value&gt;= upperBound){
    slider.value = upperBound;
    uiText.color = Color.red;
  } else {
    if(slider.value&lt;= lowerBound){
      slider.value = lowerBound;
      uiText.color = Color.red;
    }
  }
   uiText.color = Color.white;
}</pre></div><p>By doing this, if a bound is reached, we change the color of <span class="strong"><strong>Slider Shower</strong></span> to red. Otherwise, we can <a id="id217" class="indexterm"></a>assign the color white to it. Finally, we need to drag and drop <span class="strong"><strong>Slider Shower</strong></span> into the <span class="strong"><strong>uiText</strong></span> variable of our script in the <span class="strong"><strong>Inspector</strong></span>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl3sec28"></a>Expressing bounds as a percentage</h4></div></div></div><p>Sometimes, it's better to express the parameters in a different way, especially if designers have to tweak them. In fact, another way might be more understandable and comfortable. For<a id="id218" class="indexterm"></a> example, instead of expressing a result in decimal points, we can display it more simply as a percentage. Here, you are going to learn how to express bounds as a percentage within the <span class="strong"><strong>Inspector</strong></span>; this is easy to understand for designers. Therefore, let's start changing our script a little.</p><p>First of all, we need to change our variables. Consider these lines:</p><div class="informalexample"><pre class="programlisting">public float lowerBound;
public float upperBound;</pre></div><p>Replace them with the following lines:</p><div class="informalexample"><pre class="programlisting">[Range(0,100)]
public int lowerBound;
[Range(0,100)]
public int upperBound;</pre></div><p>In this way, we have changed the type of our variable in <code class="literal">int</code> and added a <code class="literal">Range</code> attribute in order to limit the possible values (between <code class="literal">0</code> and <code class="literal">100</code>) that can be set in the <span class="strong"><strong>Inspector</strong></span>.</p><p>Now, since the slider value is a float between <code class="literal">0</code> and <code class="literal">1</code>, we also need to convert the percentage value into a decimal one in the <code class="literal">checkBounds()</code> function. In fact, if we divide the value by <code class="literal">100f</code>, we obtain the decimal value. Therefore, we can rewrite the entire function in the following way:</p><div class="informalexample"><pre class="programlisting">public void checkBounds () {
  if(slider.value&gt;= upperBound/100f){
    slider.value = upperBound/100f;
  } else {
    if(slider.value&lt;= lowerBound/100f){
      slider.value = lowerBound/100f;
    }
  }
}</pre></div><p>As in the original function, we need to check whether the slider is exceeding the bounds, and if so, restore it to the<a id="id219" class="indexterm"></a> closest bound.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl3sec29"></a>Limiting the value that we can set in the Inspector</h4></div></div></div><p>If we want to limit the possible values that can be set in the <span class="strong"><strong>Inspector</strong></span>, we have to add a <code class="literal">Range</code> attribute to our variables. This prevents designers or us from setting a wrong number.</p><p>If we have expressed<a id="id220" class="indexterm"></a> the value as a percentage, we can add the <code class="literal">[Range(0,100)]</code> line before our variable in this way:</p><div class="informalexample"><pre class="programlisting">[Range(0,100)]
public int lowerBound;
[Range(0,100)]
public int upperBound;</pre></div><p>In fact, they are <code class="literal">int</code>, and the percentage can be a number between <code class="literal">0</code> and <code class="literal">100</code>.</p><p>Otherwise, if we still express the bounds as floats in the Inspector, the <code class="literal">Range</code> attribute is <code class="literal">[Range(0,1)]</code>. Therefore, we can write the following:</p><div class="informalexample"><pre class="programlisting">[Range(0,1)]
public float lowerBound;
[Range(0,1)]
public float upperBound;</pre></div><p>In this case, the value of our variable can be a <code class="literal">float</code> number between <code class="literal">0</code> and <code class="literal">1</code>.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec103"></a>See also</h3></div></div></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Since we have better tested the bounds by displaying the value of the slider in percentage, you can find more details about this in the previous recipe, <span class="emphasis"><em>Showing the slider value as a percentage.</em></span></p></li></ul></div></div></div>