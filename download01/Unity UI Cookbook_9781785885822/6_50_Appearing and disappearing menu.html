<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch06lvl1sec52"></a>Appearing and disappearing menu</h2></div></div><hr /></div><p>Since the UI does not<a id="id307" class="indexterm"></a> need complex animations, you will learn that it is not necessary to use the <span class="strong"><strong>Animator</strong></span> controller and/or the <span class="strong"><strong>Animation</strong></span> files. In fact, in this recipe, we are<a id="id308" class="indexterm"></a> going to use only the <span class="strong"><strong>OnClick()</strong></span> event, which is already implemented inside the <span class="strong"><strong>Button (Script)</strong></span> component, to handle the menu appearing and disappearing.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec144"></a>How to do it...</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>First of all, we need to create our menu. We are going to create a simple menu to show how we can make it disappear and then reappear. However, feel free to construct the entire menu for your game with all the elements that you need in it. Thus, we can right-click on the <span class="strong"><strong>Hierarchy</strong></span> panel and then go to <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Panel</strong></span>. Next, we can<a id="id309" class="indexterm"></a> rename it <span class="strong"><strong>Appearing Menu</strong></span>. Of course, it is possible to resize, change <span class="strong"><strong>Source Image</strong></span>, and place the panel wherever we wish.</p></li><li><p>The next step<a id="id310" class="indexterm"></a> is to add at least one button to our menu. To do this, right-click on <span class="strong"><strong>Appearing Menu</strong></span>, go to <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Button</strong></span>, and then rename it <span class="strong"><strong>Resume Button</strong></span>. We can also change the <span class="strong"><strong>text</strong></span> variable of the <span class="strong"><strong>Text (Script)</strong></span> component, attached to the child of our button, to the <span class="strong"><strong>Resume</strong></span> string. For instance, we can construct a menu like this:</p><div class="mediaobject"><img src="/graphics/9781785885822/graphics/B04903_06_01.jpg" /></div></li><li><p>Now, we need to add outside of our menu another button that opens the pause menu that we have just created. Thus, instead of right-clicking on <span class="strong"><strong>Appearing Menu</strong></span>, right-click on <a id="id311" class="indexterm"></a>
<span class="strong"><strong>Canvas</strong></span> and then go to <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Button</strong></span>. Again, we should rename it <span class="strong"><strong>PauseMenuButton</strong></span> and change the text inside it to <span class="strong"><strong>Pause</strong></span>. After we have placed it in<a id="id312" class="indexterm"></a> a location in which we want to use it, such as the top-right corner, we should have something that looks like this:</p><div class="mediaobject"><img src="/graphics/9781785885822/graphics/B04903_06_02.jpg" /></div></li><li><p>When the <span class="strong"><strong>Pause</strong></span> button is clicked we want <span class="strong"><strong>PauseMenuButton</strong></span> to disappear and the <span class="strong"><strong>Pause</strong></span> menu to appear instead. In order to do this, we need to use events. Select <span class="strong"><strong>PauseMenuButton</strong></span> and, in the <span class="strong"><strong>Inspector</strong></span>, click on the small <span class="strong"><strong>+</strong></span> sign in the <span class="strong"><strong>OnClick</strong></span> tab inside the <span class="strong"><strong>Button (Script)</strong></span> component. A new event should appear in the <span class="strong"><strong>Inspector</strong></span>.</p></li><li><p>Drag <span class="strong"><strong>Appearing Menu</strong></span> into the <span class="strong"><strong>Object</strong></span> variable, and then click on the drop-down menu on which <span class="strong"><strong>no function</strong></span> is written. Select <span class="strong"><strong>GameObject</strong></span> | <span class="strong"><strong>SetActive(bool)</strong></span>. Finally, check the <span class="strong"><strong>bool</strong></span> variable. Once we have done all of this, when we click <a id="id313" class="indexterm"></a>the <span class="strong"><strong>PauseMenuButton</strong></span>, the <span class="strong"><strong>Pause</strong></span> menu will appear.</p></li><li><p>Now, we have to<a id="id314" class="indexterm"></a> do the same again. We need to add a new event, but instead of dragging <span class="strong"><strong>Appearing Menu</strong></span> into the <span class="strong"><strong>Object</strong></span> variable, let's set it to <span class="strong"><strong>PauseMenuButton</strong></span>. At the end, remember to uncheck the <span class="strong"><strong>bool</strong></span> variable. Therefore, when we click the <span class="strong"><strong>PauseMenuButton</strong></span>, it will disappear. After completing the last two steps, we should have something that looks this:</p><div class="mediaobject"><img src="/graphics/9781785885822/graphics/B04903_06_03.jpg" /></div></li><li><p>We also need to repeat the same two steps with <span class="strong"><strong>Resume Button</strong></span>, but invert the <span class="strong"><strong>bool</strong></span> variables. As a result, we have something that looks like this:</p><div class="mediaobject"><img src="/graphics/9781785885822/graphics/B04903_06_04.jpg" /></div></li><li><p>Since we probably don't want to have the <span class="strong"><strong>Pause</strong></span> menu active at the start of our game, let's select <span class="strong"><strong>Appearing Menu</strong></span> and set it to inactive. We can do this by clicking on the <span class="strong"><strong>bool</strong></span> variable next to the name of <span class="strong"><strong>GameObject</strong></span>.</p></li><li><p>Finally, we can click the play button and check whether our <span class="strong"><strong>Pause</strong></span> menu works.</p></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec145"></a>How it works...</h3></div></div></div><p>We used events instead of <span class="strong"><strong>Animator</strong></span> controllers to handle the menu. In fact, we have set four events. Two of them are in <span class="strong"><strong>PauseMenuButton</strong></span>, and both trigger our UI elements when the button is clicked on. The former makes <span class="strong"><strong>Appearing Menu</strong></span> appear by calling the <span class="strong"><strong>setActive()</strong></span> function and passing the <span class="strong"><strong>true</strong></span> boolean value to it. The latter disables <span class="strong"><strong>PauseButton</strong></span> by calling the same function. By doing this, we ensure that the player cannot use <span class="strong"><strong>PauseButton</strong></span> anymore when the <span class="strong"><strong>Pause</strong></span> menu appears. The other two events are symmetric, but they are on the <span class="strong"><strong>ResumeButton</strong></span>. These can be triggered only when the <span class="strong"><strong>Resume</strong></span> button is clicked on, and<a id="id315" class="indexterm"></a> this can happen only if <span class="strong"><strong>Appearing Menu</strong></span> is visible. That means that it<a id="id316" class="indexterm"></a> can occur only after the player has clicked the <span class="strong"><strong>PauseButton</strong></span>. Again, the first one makes <span class="strong"><strong>PauseButton</strong></span> appear by calling the <code class="literal">setActive()</code> function, and the second one makes <span class="strong"><strong>Appearing Menu</strong></span> disappear.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec146"></a>There's more...</h3></div></div></div><p>Since we have implemented a <span class="strong"><strong>Pause</strong></span> menu, there are a few things to keep in mind beyond the animations. Usually, we have pause menus for allowing the player to stop temporarily playing or to tweak some settings. In order to do this, the whole game needs to be frozen so that it can be resumed once the player is ready to play our game again. Thus, the next subtopic is going to explain how to really pause the game.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch06lvl3sec49"></a>Freezing time</h4></div></div></div><p>Usually, when the <span class="strong"><strong>Pause</strong></span> menu appears in a video game (unless it is an online game), the game will freeze, even if this is not strictly part of the animation system of the menu. We can make the menu freeze quite easily in Unity.</p><p>To do this, we need to<a id="id317" class="indexterm"></a> create a script that changes the time scale of our game. We can rename it <span class="strong"><strong>FreezeTimeScript</strong></span>.</p><p>Just a public function is required â€” the following one, which we can add to the script:</p><div class="informalexample"><pre class="programlisting">public void setTimeScale(float timeScale){
  Time.timeScale = timeScale;
}</pre></div><p>In this line of code, we change the time scale of the game by the one passed as a parameter. Keep in mind that a time scale equal to <span class="strong"><strong>0</strong></span> means that the game is frozen, and a timescale equal to <span class="strong"><strong>1</strong></span> means that the game has no time distortions. Now, we need to call this function when <span class="strong"><strong>PauseMenuButton</strong></span> or <span class="strong"><strong>ResumeButton</strong></span> is clicked on. To do this, select <span class="strong"><strong>PauseMenuButton</strong></span> from the <span class="strong"><strong>Project</strong></span> panel and then add a new event in the <span class="strong"><strong>OnClick()</strong></span> tab. Furthermore, add <span class="strong"><strong>FreezeTimeScript</strong></span> to <span class="strong"><strong>PauseMenuButton</strong></span> and drag it into the <span class="strong"><strong>object</strong></span> variable of the new event. From the drop-down menu, go to <span class="strong"><strong>FreezeTimeScript</strong></span> | <span class="strong"><strong>setTimeScale(float)</strong></span> and set the float variable to <span class="strong"><strong>0</strong></span>.</p><p>Repeat this process with <span class="strong"><strong>ResumeButton</strong></span>, but instead of setting the float variable to <span class="strong"><strong>0</strong></span>, set it to <span class="strong"><strong>1</strong></span>.</p><p>Since <span class="strong"><strong>timeScale</strong></span> is set to <span class="strong"><strong>0</strong></span>, when we click on the button, all of our game freezes. Alternatively, when <span class="strong"><strong>timeScale</strong></span> is set to <span class="strong"><strong>1</strong></span> and we click on <span class="strong"><strong>Resume</strong></span>, the game starts again. It's important to keep in<a id="id318" class="indexterm"></a> mind that animations may or may not be affected by <span class="strong"><strong>timeScale</strong></span>, depending on how they are implemented.</p></div></div></div>