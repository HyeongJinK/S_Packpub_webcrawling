<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec46"></a>Working with scores â€“ scripting with text</h2></div></div><hr /></div><p>To display a score in the <a id="id286" class="indexterm"></a>GUI, we'll first need score functionality, that is, code to <a id="id287" class="indexterm"></a>create a score system. Essentially, the score functionality will be added to a general, overarching <code class="literal">GameController</code> class, responsible for all game-wide logic and features. The code for <code class="literal">GameController</code> and its score feature set is included in <span class="emphasis"><em>Code Sample 4.4</em></span>, as follows. This file should be added to the <code class="literal">Scripts</code> folder of the project.</p><div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;
<span class="strong"><strong>using UnityEngine.UI;</strong></span>
//------------------------------
public class GameController : MonoBehaviour
{
  //Game score
  public static int Score;

  //Prefix
  public string ScorePrefix = string.Empty;

  //Score text object
  public Text ScoreText = null;

  //Game over text
  public Text GameOverText = null;

  public static GameController ThisInstance = null;
  //------------------------------
  void Awake()
  {
    ThisInstance = this;
  }
  //------------------------------
  void Update()
  {
    //Update score text
    if(ScoreText!=null)
      ScoreText.text = ScorePrefix + Score.ToString();
  }
  //------------------------------
  public static void GameOver()
  {
    if(ThisInstance.GameOverText!=null)
    ThisInstance.GameOverText.gameObject.SetActive(true);
  }
  //------------------------------
}</pre></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec22"></a>Code Sample 4.4</h3></div></div></div><p>The following points summarize the code sample:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>The <code class="literal">GameController</code> class uses the <code class="literal">UnityEngine.ui</code> namespace. This is important <a id="id288" class="indexterm"></a>because it includes access to all the UI classes and objects in Unity. If you don't include this namespace in your source files, then you cannot use UI objects from that script.</p></li><li style="list-style-type: disc"><p>The <code class="literal">GameController</code> class features two text public members, namely, <code class="literal">ScoreText</code> and <code class="literal">GameOverText</code>. These refer to two text objects, both of which are optional insofar as the <code class="literal">GameController</code> code will work just fine, even if the members are null. <code class="literal">ScoreText</code> is a reference to a text GUI object to display score text, and <code class="literal">GameOverText</code> is to display any message when a game-over condition occurs.</p></li></ul></div><p>To use the <code class="literal">GameController</code> code, create a new, empty object in the scene named <code class="literal">GameController</code>. Then, drag and drop the <code class="literal">GameController</code> script file to that object. Once added, drag and drop the <code class="literal">ScoreText</code> object to the <span class="strong"><strong>Score Text</strong></span> field for <code class="literal">GameController</code> in the <span class="strong"><strong>Object Inspector</strong></span>. See <span class="emphasis"><em>Figure 4.37</em></span>. In the <span class="strong"><strong>Score Prefix</strong></span> field, enter the text that should prefix the <code class="literal">Score</code> itself. The score, on its own, is simply a number (such as 1,000). The prefix allows you to add text to the front of this score, indicating to the player what the numbers mean.</p><div class="mediaobject"><img src="/graphics/9781785888380/graphics/B05118_04_37.jpg" /><div class="caption"><p>Figure 4.37: Creating a GameController to maintain the game score</p></div></div><p>Now, take the game for a test run and you'll see the score display at the top right corner of the <code class="literal">Game</code> tab using the GUI text object. This is fine, but the score always remains at <code class="literal">0</code> right now. This is because we have no code, yet, to increase the score. For our game, the score should increase when an <code class="literal">Enemy</code> object is destroyed. To achieve this, we'll create a new script file, <code class="literal">ScoreOnDestroy</code>. This is included in <span class="emphasis"><em>Code Sample 4.5</em></span>, as follows:</p><div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;
//------------------------------
public class ScoreOnDestroy : MonoBehaviour
{
  //------------------------------
  public int ScoreValue = 50;
  //------------------------------
  void OnDestroy()
  {
    GameController.Score += ScoreValue;
  }
  //------------------------------
}
//------------------------------</pre></div><p>The script should be attached to any object that assigns you points when it's destroyed, such as the enemies. The total number of points assigned is specified by <code class="literal">ScoreValue</code>. To attach the script to the <a id="id289" class="indexterm"></a>enemy prefab, select the <code class="literal">Prefabs</code> in the <span class="strong"><strong>Project</strong></span> panel, and from the <span class="strong"><strong>Object Inspector</strong></span>, click on the <span class="strong"><strong>Add Component</strong></span> button. Then type <code class="literal">ScoreOnDestroy</code> in the search field to add the component to the prefab. Once added, specify the total number of points to be allocated for destroying an enemy. For this game, a value of 50 points is assigned. See <span class="emphasis"><em>Figure 4.38</em></span>:</p><div class="mediaobject"><img src="/graphics/9781785888380/graphics/B05118_04_38.jpg" /><div class="caption"><p>Figure 4.38: Adding a Score component to the Enemy prefab</p></div></div><p>Great work! You now have destroyable enemies that assign you points on destruction. This means that you can finally have an in-game score and could even extend gameplay to include high-score features and leaderboards. This also means that our game is almost finished and ready to build. Next, we'll add some final touches.</p></div></div>