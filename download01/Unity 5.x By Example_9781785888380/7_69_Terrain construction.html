<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch07lvl1sec69"></a>Terrain construction</h2></div></div><hr /></div><p>Now let's <a id="id423" class="indexterm"></a>start sculpting the terrain. With the terrain object selected, click the leftmost palette icon from the <span class="strong"><strong>Object Inspector</strong></span> (the Raise/Lower terrain tool), available from the Terrain component. This lets you select brush shapes to paint terrain details. Select a soft, round brush and use a large brush size (using the <span class="strong"><strong>Brush Size</strong></span> slider), along with the <span class="strong"><strong>Opacity</strong></span> setting to set brush strength. Click and drag over the terrain to paint landscape details. Create some hills and mountains for the landscape. See <span class="emphasis"><em>Figure 7.7</em></span>. Remember, you can hold down the <span class="emphasis"><em>Shift</em></span> key while clicking to reverse (or lower) the terrain painting, if needed.</p><div class="mediaobject"><img src="/graphics/9781785888380/graphics/B05118_07_07.jpg" /><div class="caption"><p>Figure 7.7: Viewing and editing the terrain settings</p></div></div><p>If the terrain appears too rough to be natural, you can easily smooth out details by switching to the <span class="strong"><strong>Smooth Height</strong></span> tool. To do this, click on the third button in the <span class="strong"><strong>Terrain</strong></span> component. See <span class="emphasis"><em>Figure 7.8</em></span>. When you select this tool, you can choose the <span class="strong"><strong>Brush Shape</strong></span>, <span class="strong"><strong>Brush Size</strong></span>, and <a id="id424" class="indexterm"></a>
<span class="strong"><strong>Opacity</strong></span> as before, but clicking over the terrain will smooth out variations in terrain height.</p><div class="mediaobject"><img src="/graphics/9781785888380/graphics/B05118_07_08.jpg" /><div class="caption"><p>Figure 7.8: Accessing the Smooth Height tool</p></div></div><p>Now that the terrain is sculpted, shaped, and smooth as needed, we're ready to start painting it. As it stands, the terrain is grey, dull, and under-defined. It has no clear texture or <span class="emphasis"><em>look</em></span>, such as grass or rock. We'll fix this using the <span class="strong"><strong>Paint Texture</strong></span> tool. To access this, click on the <span class="strong"><strong>Paint Texture</strong></span> button (fourth button) in the <span class="strong"><strong>Terrain</strong></span> component from the <span class="strong"><strong>Object Inspector</strong></span>. When you do this for the first time, you'll need to load in and prepare a set of textures for <a id="id425" class="indexterm"></a>the painting. See <span class="emphasis"><em>Figure 7.9</em></span>:</p><div class="mediaobject"><img src="/graphics/9781785888380/graphics/B05118_07_09.jpg" /><div class="caption"><p>Figure 7.9: Preparing textures for terrain painting</p></div></div><p>Click on the <span class="strong"><strong>Edit Textures</strong></span> button, and then select <span class="strong"><strong>Add Texture…</strong></span> from the context menu that appears. Afterward, a texture configuration dialog appears, allowing you to add new textures to a palette. See <span class="emphasis"><em>Figure 7.10</em></span>:</p><div class="mediaobject"><img src="/graphics/9781785888380/graphics/B05118_07_10.jpg" /><div class="caption"><p>Figure 7.10: Adding textures to the Texture Paint palette</p></div></div><p>With the <span class="strong"><strong>Texture Selection</strong></span> dialog open and ready to load our first texture, use the <span class="strong"><strong>Project</strong></span> panel to find the native terrain textures included with the Unity Environment asset package. These can be found in the <span class="strong"><strong>Standard Assets</strong></span> | <span class="strong"><strong>Environment</strong></span> | <span class="strong"><strong>TerrainAssets</strong></span> | <span class="strong"><strong>SurfaceTextures</strong></span> folder. For this example, I'll select a grassy texture. This texture will be used as a base texture to flood-fill the terrain. Click and drag the grass texture from the <a id="id426" class="indexterm"></a>
<span class="strong"><strong>Project</strong></span> panel to the Albedo slot of the <span class="strong"><strong>Texture Selection</strong></span> dialog. The normal channel can be left empty. See <span class="emphasis"><em>Figure 7.11</em></span>:</p><div class="mediaobject"><img src="/graphics/9781785888380/graphics/B05118_07_11.jpg" /><div class="caption"><p>Figure 7.11: Selecting a base texture</p></div></div><p>After adding the first texture to the <span class="strong"><strong>Texture Selection</strong></span> dialog, be sure to set the texture size. This refers to the size (in meters) that a single tile of the texture should cover. Smaller values decrease texture tiling but make each tile seem larger. Larger values increase texture tiling but each tile seems smaller. Getting the tiling values correct is a process of trial and error—tweaking values until it looks correct on the terrain. For this example, I've used the values 75 x 75. Then, click on the <span class="strong"><strong>Add</strong></span> button. See <span class="emphasis"><em>Figure 7.12</em></span>:</p><div class="mediaobject"><img src="/graphics/9781785888380/graphics/B05118_07_12.jpg" /><div class="caption"><p>Figure 7.12: Setting texture tile Size</p></div></div><p>After clicking on the <span class="strong"><strong>Add</strong></span> button, the base texture will be tiled across the terrain. From a distance, the <a id="id427" class="indexterm"></a>tiling may look obvious and unpleasant in the scene viewport. You may be tempted, on the basis of this, to adjust the tiling settings. However, from a first-person perspective, the terrain will look very different. For this reason, use a First-person Controller prefab (from the native assets) to preview the terrain in first-person mode, seeing how texture tiling appears at ground-level.</p><div class="mediaobject"><img src="/graphics/9781785888380/graphics/B05118_07_13.jpg" /><div class="caption"><p>Figure 7.13: Previewing texture tiling on a terrain</p></div></div><p>If you need to edit the existing texture tiling, simply select the texture thumbnail from the <span class="strong"><strong>Textures</strong></span> palette in the <span class="strong"><strong>Terrain</strong></span> component of the <span class="strong"><strong>Object Inspector</strong></span>, and then choose the <span class="strong"><strong>Edit Textures</strong></span> button. Refer to the preceding <span class="emphasis"><em>Figure 7.10</em></span>.</p><p>At this stage, the terrain object features a grass texture, tiled seamlessly across the surface, which is the base texture. While this looks acceptable, it'd be great to include greater texture variety in the terrain, including some grassy, rocky, and maybe even desert style terrain. This is achieved by adding more textures via the <span class="strong"><strong>Terrain Selection</strong></span> dialog. Just click on the <span class="strong"><strong>Edit Textures</strong></span> button, and then choose <span class="strong"><strong>Add Texture</strong></span> from the context menu. Then, drag and drop a new and different texture to the Albedo slot of the texture selection dialog, and finally repeat this process to add as many textures as needed. On closing the <a id="id428" class="indexterm"></a>dialog, all added textures will appear in the <span class="strong"><strong>Textures Palette</strong></span> from the <span class="strong"><strong>Object Inspector</strong></span>. See <span class="emphasis"><em>Figure 7.14</em></span>:</p><div class="mediaobject"><img src="/graphics/9781785888380/graphics/B05118_07_14.jpg" /><div class="caption"><p>Figure 7.14: Adding textures to the Texture Palette</p></div></div><p>The active texture assigned to the painter brush is highlighted with a blue border in the <span class="strong"><strong>Inspector</strong></span>. You can click on a texture thumbnail to select a different texture. When you do this, the selected texture is assigned to the painter brush and can be applied to the terrain just by clicking on it. Clicking and dragging on the terrain will paint the texture to the terrain. You can also use the <span class="strong"><strong>Brush Shape</strong></span>, <span class="strong"><strong>Brush Size</strong></span>, <span class="strong"><strong>Opacity</strong></span>, and <span class="strong"><strong>Target Strength</strong></span> values to control how strongly the texture is applied and how it is blended into the terrain beneath. See <span class="emphasis"><em>Figure 7.15</em></span>:</p><div class="mediaobject"><img src="/graphics/9781785888380/graphics/B05118_07_15.jpg" /><div class="caption"><p>Figure 7.15: Layered painting and blended textures</p></div></div><p>Now, go ahead and complete terrain painting, creating a look and feel that you like. Once completed, select <a id="id429" class="indexterm"></a>the scene <span class="strong"><strong>Directional Light</strong></span> from the <span class="strong"><strong>Hierarchy</strong></span> panel and change its rotation to position the sun wherever it looks good. As an aside, notice that you can control a complete day and night cycle (in terms of lighting and appearance) by rotating the light a complete 360 degrees. Therefore, you can create an easy day and night cycle for games just by animating a directional light using the <span class="strong"><strong>Animation</strong></span> window, seen in earlier chapters. See <span class="emphasis"><em>Figure 7.16</em></span>:</p><div class="mediaobject"><img src="/graphics/9781785888380/graphics/B05118_07_16.jpg" /><div class="caption"><p>Figure 7.16: Completed terrain</p></div></div><p>Finally, take a tour of the terrain using a first-person controller asset. Press the play icon on the toolbar <a id="id430" class="indexterm"></a>and explore around the level! Congratulations, you now have a game world with a terrain included. See <span class="emphasis"><em>Figure 7.17</em></span>:</p><div class="mediaobject"><img src="/graphics/9781785888380/graphics/B05118_07_17.jpg" /><div class="caption"><p>Figure 7.17: First-person terrain exploration</p></div></div><p>Before moving forward, let's consider the technical limitations of Unity terrains and the impact that this can potentially have for your games. Specifically, the Unity terrain is height map-based. This means that the elevation (ups and downs) of the terrain are generated internally based on grayscale pixels in an image file (the height map). When painting the terrain using the brushes from the <span class="strong"><strong>Inspector</strong></span>, you are (under the hood) painting pixels onto the height map, which is used to deform the terrain. This is a clever and fascinating process, but it comes with an important limitation. Namely, a height map is a 2D topographical texture. The result is that Unity terrains are not truly 3D at a procedural level; they cannot contain caves, crevices, caverns, or any inward cutouts. The player cannot <span class="emphasis"><em>go under</em></span> anything. Rather, it consists simply of up and down sections, none of which may <a id="id431" class="indexterm"></a>have interior spaces. Now, in many cases, this won't be a problem. However, sometimes you'll need these internal spaces, and when you do, you'll want to consider alternatives to the native terrain system. Alternatives include Asset Store plugins, but also manual terrains in 3D modeling software such as 3DS Max, Maya, and Blender.</p></div>