<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch01lvl1sec15"></a>Lighting and sky</h2></div></div><hr /></div><p>The basic level has <a id="id59" class="indexterm"></a>been created in terms of architectural models and layout; this was achieved using only a few mesh assets and some basic tools. Nevertheless, these tools are powerful and offer us a multitude of combinations and options to create great variety and believability in game worlds. One important ingredient is missing for us, however. This ingredient is lighting. You'll notice from <span class="emphasis"><em>Figure 1.34</em></span> that everything looks relatively flat, with no highlights, shadows, or light or dark areas. This is because scene lighting is not properly configured for best results, even though we already have a light in the scene, which was created initially by default.</p><p>Let's start setting the scene for the coin collection game by enabling the sky, if it's not already enabled. To do this, click on the <span class="strong"><strong>Extras</strong></span> drop-down menu from the top toolbar in the <span class="strong"><strong>Scene</strong></span> viewport. From the context menu, select <span class="strong"><strong>Skybox</strong></span> to enable <span class="strong"><strong>Skybox</strong></span> viewing. A <span class="strong"><strong>Skybox</strong></span> simply refers to a large cube that surrounds the whole scene. Each interior side has a continuous texture (image) applied to simulate the appearance of a surrounding sky. For this reason, clicking the <span class="strong"><strong>Skybox</strong></span> option displays a default sky in the <span class="strong"><strong>Scene</strong></span> viewport. See <span class="emphasis"><em>Figure 1.35</em></span>:</p><div class="mediaobject"><img src="/graphics/9781785888380/graphics/B05118_01_35.jpg" /><div class="caption"><p>Figure 1.35: Enabling the sky</p></div></div><p>Now, although the <a id="id60" class="indexterm"></a>
<span class="strong"><strong>Skybox</strong></span> is now enabled and the scene looks better than before, it's still not being illuminated properly—the objects lack shadows and highlights. To fix this, be sure that lighting is enabled for the scene by toggling on the Lighting icon at the top of the <span class="strong"><strong>Scene</strong></span> viewport. See <span class="emphasis"><em>Figure 1.36</em></span>. This setting is for display purposes only. It only affects whether lighting effects are shown in the <span class="strong"><strong>Scene</strong></span> viewport and not whether lighting is truly enabled for the final game.</p><div class="mediaobject"><img src="/graphics/9781785888380/graphics/B05118_01_36.jpg" /><div class="caption"><p>Figure 1.36: Enabling scene lighting in the Scene viewport</p></div></div><p>Enabling lighting display for the viewport will result in some differences to the scene appearance and, again, the scene should look better than before. You can confirm that scene lighting is <a id="id61" class="indexterm"></a>taking effect by selecting <span class="strong"><strong>Directional Light</strong></span> from the <span class="strong"><strong>Hierarchy</strong></span> panel and rotating it. Doing this controls the time of day, rotating the light cycles between day and night and changing the light intensity and mood. This changes how the scene is rendered. See <span class="emphasis"><em>Figure 1.37</em></span>:</p><div class="mediaobject"><img src="/graphics/9781785888380/graphics/B05118_01_37.jpg" /><div class="caption"><p>Figure 1.37: Rotating the scene directional light changes the time of day</p></div></div><p>Let's undo any rotations to the <span class="strong"><strong>Directional Light</strong></span> by pressing <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>Z</em></span> on the keyboard. To prepare for final and optimal lighting, all non-movable objects in the scene (such as walls, floors, chairs, tables, ceilings, grass, hills, towers, and more) should be marked as <span class="strong"><strong>Static</strong></span>. This signifies to Unity that the objects will never move, no matter what happens during gameplay. By marking non-movable objects ahead of time, you can help Unity optimize the way it renders and lights a scene. To mark objects as <span class="strong"><strong>Static</strong></span>, simply select all non-movable objects (which includes practically the entire level so far), and then enable the <span class="strong"><strong>Static</strong></span> checkbox via the <span class="strong"><strong>Object Inspector</strong></span>. Note that you don't need to enable the <span class="strong"><strong>Static</strong></span> setting for each object separately. By holding down the <span class="emphasis"><em>Shift</em></span> key while selecting objects, you can select multiple objects together, allowing you to adjust their properties as a batch through the <span class="strong"><strong>Object Inspector</strong></span>. See <span class="emphasis"><em>Figure 1.38</em></span>:</p><div class="mediaobject"><img src="/graphics/9781785888380/graphics/B05118_01_38.jpg" /><div class="caption"><p>Figure 1.38: Enabling the Static option for multiple non-movable objects improves lighting and performance</p></div></div><p>When you enable the <span class="strong"><strong>Static</strong></span> checkbox for geometry, Unity auto-calculates scene lighting in the background—effects such as shadows, indirect illumination, and more. It generates a batch of data <a id="id62" class="indexterm"></a>called the <span class="strong"><strong>GI Cache</strong></span>, featuring <span class="strong"><strong>Light Propagation Paths</strong></span>, which <a id="id63" class="indexterm"></a>instructs Unity how light rays should bounce and move <a id="id64" class="indexterm"></a>around the scene to achieve greater realism. Even so, enabling the <span class="strong"><strong>Static</strong></span> checkbox as we've done still won't produce cast shadows for objects, and this seriously detracts from realism. This happens because most mesh objects have the <span class="strong"><strong>Cast Shadows</strong></span> option disabled. To fix this, select all meshes in the scene. Then, from the <span class="strong"><strong>Object Inspector</strong></span>, click on the <span class="strong"><strong>Cast Shadows</strong></span> checkbox from the <span class="strong"><strong>Mesh Renderer</strong></span> component, and choose the <span class="strong"><strong>On</strong></span> option from the context menu. When you do this, all mesh objects should be casting shadows. See <span class="emphasis"><em>Figure 1.39</em></span>:</p><div class="mediaobject"><img src="/graphics/9781785888380/graphics/B05118_01_39.jpg" /><div class="caption"><p>Figure 1.39: Enabling cast shadows from the Mesh Renderer component</p></div></div><p>Voila! Your meshes now cast shadows. Splendid work: in reaching this far, you've created a new project, populated a scene with meshes, and successfully illuminated them with directional <a id="id65" class="indexterm"></a>lighting. That's excellent. However, it'd be even better if we could explore our environment in the first-person mode. We'll see how next.</p></div>