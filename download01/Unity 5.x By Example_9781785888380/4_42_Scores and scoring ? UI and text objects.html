<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec45"></a>Scores and scoring â€“ UI and text objects</h2></div></div><hr /></div><p>Let's move on to the <a id="id273" class="indexterm"></a>scoring system and, in creating this, we'll create <code class="literal">GameController</code>. <code class="literal">GameController</code> is simply a script or class that manages all game-wide and overarching behavior. This includes the score because, for this game, the score refers to one single and global number representing the achievements and progress of the player. Before jumping into the implementation, start by creating a simple GUI to display the game score. GUI <a id="id274" class="indexterm"></a>is an acronym for Graphic User Interface, and this refers to all the 2D graphical elements that sit atop the game window and provide information to the player. To create this, create a new GUI canvas object by <a id="id275" class="indexterm"></a>selecting <span class="strong"><strong>GameObject</strong></span> | <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Canvas</strong></span> from the application menu. See <span class="emphasis"><em>Figure 4.25</em></span>. More details on GUIs can be found in the next two chapters.</p><div class="mediaobject"><img src="/graphics/9781785888380/graphics/B05118_04_25.jpg" /><div class="caption"><p>Figure 4.25: Adding a Canvas object to the scene</p></div></div><p>The <code class="literal">Canvas</code> object defines the total surface or area in which the GUI lives, including all buttons, text, and other widgets. On being generated in the scene, <code class="literal">Canvas</code> also features in the <span class="strong"><strong>Hierarchy</strong></span> panel. Initially, the <code class="literal">Canvas</code> object may be too large or too small to be seen clearly in the viewport, so select the <code class="literal">Canvas</code> object in the <span class="strong"><strong>Hierarchy</strong></span> panel and press the <span class="emphasis"><em>F</em></span> key on the keyboard to <a id="id276" class="indexterm"></a>focus the object. It should appear as a large <a id="id277" class="indexterm"></a>vertically-aligned rectangle. See <span class="emphasis"><em>Figure 4.26</em></span>:</p><div class="mediaobject"><img src="/graphics/9781785888380/graphics/B05118_04_26.jpg" /><div class="caption"><p>Figure 4.26: Examining the Canvas object in the viewport</p></div></div><p>The <code class="literal">Canvas</code> <a id="id278" class="indexterm"></a>object is not visible itself in the <span class="strong"><strong>Game</strong></span> tab. Rather, it acts simply as a container. Even so, it strongly influences how contained objects appear on the screen in terms of size, position, and scale. For this reason, before adding objects and refining the design of an interface, it's helpful to configure your <code class="literal">Canvas</code> object first. To do this, select the <code class="literal">Canvas</code> object in the scene, and from the <span class="strong"><strong>Object Inspector</strong></span>, click on the <span class="strong"><strong>UI Scale Mode</strong></span> drop-down option from the <span class="strong"><strong>Canvas Scaler</strong></span> component. From the drop-down list, choose the <span class="strong"><strong>Scale With Screen Size</strong></span> option and enter an HD resolution in the <span class="strong"><strong>Reference Resolution</strong></span> field, that is, specify <code class="literal">1920</code> for the <span class="strong"><strong>X</strong></span> field and <code class="literal">1080</code> for the <span class="strong"><strong>Y</strong></span> field. See <span class="emphasis"><em>Figure 4.27</em></span>:</p><div class="mediaobject"><img src="/graphics/9781785888380/graphics/B05118_04_27.jpg" /><div class="caption"><p>Figure 4.27: Adjusting the Canvas Scaler component</p></div></div><p>By adjusting the <span class="strong"><strong>Canvas Scaler</strong></span> to <span class="strong"><strong>Scale With Screen Size</strong></span>, the user interface for the game will automatically stretch and shrink (up- and down-scale) to fit the target resolution, ensuring that each element is scaled to the same proportions, maintaining the overall <a id="id279" class="indexterm"></a>look and feel. This is a quick and easy method to create a UI once and have it adjust size to fit nearly any resolution. It may not always be the best solution to maintaining the highest quality graphical fidelity, but it's functional and suitable in many cases. In any case, before proceeding with the UI design, it's helpful to see both the <span class="strong"><strong>Scene</strong></span> viewport and <span class="strong"><strong>Game</strong></span> tab side by side in the interface (or across two monitors, if you have a multi-monitor configuration). This allows us to build the interface in the <span class="strong"><strong>Scene</strong></span> viewport, and then preview its effects in the <span class="strong"><strong>Game</strong></span> tab. You can rearrange the <span class="strong"><strong>Scene</strong></span> and <span class="strong"><strong>Game</strong></span> tabs simply by dragging and dropping the <span class="strong"><strong>Game</strong></span> tab beside the <span class="strong"><strong>Scene</strong></span> tab in the <span class="strong"><strong>Unity Editor</strong></span>. See <span class="emphasis"><em>Figure 4.28</em></span>:</p><div class="mediaobject"><img src="/graphics/9781785888380/graphics/B05118_04_28.jpg" /><div class="caption"><p>Figure 4.28: Docking the Scene and Game tabs side by side</p></div></div><p>Next, let's add the text widget to the GUI to display the game score. To do this, select the <code class="literal">Canvas</code> object in the <span class="strong"><strong>Hierarchy</strong></span> panel, and then right-click on that object (in the <span class="strong"><strong>Hierarchy</strong></span> panel) to display a context menu. From here, select <span class="strong"><strong>UI</strong></span> | <span class="strong"><strong>Text</strong></span>. This creates a new text object as a child of the <code class="literal">Canvas</code> object as opposed to a top-level object with no parent. See <span class="emphasis"><em>Figure 4.29</em></span>. The <code class="literal">Text</code> object is useful to draw text onscreen with a specific color, size, and font setting.</p><div class="mediaobject"><img src="/graphics/9781785888380/graphics/B05118_04_29.jpg" /><div class="caption"><p>Figure 4.29: Creating a text object for the UI</p></div></div><p>By default, the <code class="literal">Text</code> object may not initially appear visible in either the scene or viewport, even though it's listed as an object in the <span class="strong"><strong>Hierarchy</strong></span> panel. However, look more closely in the <a id="id280" class="indexterm"></a>
<span class="strong"><strong>Scene</strong></span> and you're likely to see very small and dark text, which appears both in the <span class="strong"><strong>Canvas</strong></span> and <span class="strong"><strong>Game</strong></span> tab. See <span class="emphasis"><em>Figure 4.30</em></span>. By default, new text objects feature black text at a small font size. For this project, these settings will need to be changed.</p><div class="mediaobject"><img src="/graphics/9781785888380/graphics/B05118_04_30.jpg" /><div class="caption"><p>Figure 4.30: Newly created text objects can sometimes be difficult to see</p></div></div><p>Select the <code class="literal">Text</code> object in the <span class="strong"><strong>Hierarchy</strong></span> panel, if it's not already selected, and from the <span class="strong"><strong>Object Inspector</strong></span> (in the <span class="strong"><strong>Text</strong></span> component), change the text <span class="strong"><strong>Color</strong></span> to white and <span class="strong"><strong>Font Size</strong></span> to <code class="literal">20</code>. See <span class="emphasis"><em>Figure 4.31</em></span>:</p><div class="mediaobject"><img src="/graphics/9781785888380/graphics/B05118_04_31.jpg" /><div class="caption"><p>Figure 4.31: Changing text size and color</p></div></div><p>The text, however, still appears too small even after changing its size. If you increase the size further, however, the text may disappear from view. This happens because each <code class="literal">Text</code> object has a rectangular boundary defining its limits, and when the font size increases beyond what can fit in the boundary, the text is automatically hidden altogether. To fix this, we'll increase <a id="id281" class="indexterm"></a>the text boundary. To do this, switch to the <span class="strong"><strong>Rect Transform</strong></span> tool with <span class="emphasis"><em>T</em></span> or select the tool from the toolbar. See <span class="emphasis"><em>Figure 4.32</em></span>:</p><div class="mediaobject"><img src="/graphics/9781785888380/graphics/B05118_04_32.jpg" /><div class="caption"><p>Figure 4.32: Selecting the Rect Transform tool</p></div></div><p>On activating the <span class="strong"><strong>Rect Transform</strong></span> tool, a clearly defined boundary will be drawn around the selected <code class="literal">Text</code> object in the <span class="strong"><strong>Scene</strong></span> viewport, indicating its rectangular extents. Let's increase the boundary size to <a id="id282" class="indexterm"></a>accommodate larger text. To do this, simply click and drag on the boundary edges with the mouse to extend them as needed. See <span class="emphasis"><em>Figure 4.33</em></span>. This will increase the boundary size and now you can increase <span class="strong"><strong>Font Size</strong></span> to improve text readability.</p><div class="mediaobject"><img src="/graphics/9781785888380/graphics/B05118_04_33.jpg" /><div class="caption"><p>Figure 4.33: Adjust the text rectangle to support larger font sizes</p></div></div><p>In addition to setting the text boundary size, the text can also be vertically aligned to the boundary center. Simply click on the center alignment button for the vertical group. For horizontal alignment, the text should remain left-aligned to allow for the score display. See <span class="emphasis"><em>Figure 4.34</em></span>:</p><div class="mediaobject"><img src="/graphics/9781785888380/graphics/B05118_04_34.jpg" /><div class="caption"><p>Figure 4.34: Aligning text within the boundary</p></div></div><p>Although the text is <a id="id283" class="indexterm"></a>now aligned vertically within its containing boundary, we'll still need to align it as a whole to the canvas container to ensure that it remains on screen at the same position and orientation, even if the <span class="strong"><strong>Game</strong></span> window is resized and realigned. To do this, we'll use <span class="strong"><strong>Anchors</strong></span>. To start, use the transform tool (<span class="emphasis"><em>W</em></span>) to reposition the <code class="literal">Text</code> object to the top right corner of the screen at the location where the <span class="strong"><strong>Score</strong></span> should appear. The object will automatically move within a 2D plane as opposed to 3D space. As you move the <code class="literal">Text</code> object in the <span class="strong"><strong>Scene</strong></span> viewport, check its appearance in the <span class="strong"><strong>Game</strong></span> tab to ensure that it looks correct and appropriate. See <span class="emphasis"><em>Figure 4.35</em></span>:</p><div class="mediaobject"><img src="/graphics/9781785888380/graphics/B05118_04_35.jpg" /><div class="caption"><p>Figure 4.35: Positioning the Score text within the Game tab</p></div></div><p>To secure the position of the <code class="literal">Text</code> object on screen (preventing it from sliding or moving), even if the <a id="id284" class="indexterm"></a>
<span class="strong"><strong>Game</strong></span> tab is resized by the user, we can set the object's anchor position to the top right corner of the screen. This ensures that the text is always positioned as a constant, proportional offset from its anchor. To do this, click on the<span class="strong"><strong> Anchor Presets</strong></span> button in the <span class="strong"><strong>Rect Transform</strong></span> component in the <span class="strong"><strong>Object Inspector</strong></span>. When you do this, a preset menu appears from which you can choose a range of alignment locations. Each preset is graphically presented as a small diagram, including a red dot at the location of anchor alignment. Select the top right preset. See <span class="emphasis"><em>Figure 4.36</em></span>:</p><div class="mediaobject"><img src="/graphics/9781785888380/graphics/B05118_04_36.jpg" /><div class="caption"><p>Figure 4.36: Aligning the Text object to the screen</p></div></div><p>Excellent work! The <a id="id285" class="indexterm"></a>
<code class="literal">Text</code> object is now created and ready to use. Of course, in play mode, the text remains unchanged and doesn't display a real score. That's because we need to add some code. However, overall, the <code class="literal">Text</code> object is in place and we can move on.</p></div>