<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec35"></a>Bounds locking</h2></div></div><hr /></div><p>On previewing the <a id="id200" class="indexterm"></a>game thus far, the spaceship probably looks too large. We can fix this easily by changing the scale of the <code class="literal">Player</code> object. I've used a value of <code class="literal">0.5</code> for the <span class="strong"><strong>X</strong></span>, <span class="strong"><strong>Y</strong></span>, and <span class="strong"><strong>Z</strong></span> axes. See <span class="emphasis"><em>Figure 3.24</em></span>. However, even with a more sensible scale, a problem remains. Specifically, it's possible to move the player outside the boundaries of the screen without limit. This means that the player can fly off into the distance, out of view, and never be seen again. Instead, the camera should remain still and the player movement should be limited to the camera view or bounds so that it never exits the view.</p><div class="mediaobject"><img src="/graphics/9781785888380/graphics/B05118_03_24.png.jpg" /><div class="caption"><p>Figure 3.24: Rescaling the player</p></div></div><p>There are different ways to achieve bounds locking, most of which involve scripting. One way is to simply clamp the positional values of the <code class="literal">Player</code> object between a specified range, a minimum and maximum. Consider <span class="emphasis"><em>Code Sample 3.2</em></span> for a new C# class called <code class="literal">BoundsLock</code>. This <a id="id201" class="indexterm"></a>script file should be attached to the player.</p><div class="informalexample"><pre class="programlisting">//------------------------------
using UnityEngine;
using System.Collections;
//------------------------------
public class BoundsLock : MonoBehaviour 
{
  //------------------------------
  private Transform ThisTransform = null;
  public Vector2 HorzRange = Vector2.zero;
  public Vector2 VertRange = Vector2.zero;
  //------------------------------
  // Use this for initialization
  void Awake ()
  {
    ThisTransform = GetComponent&lt;Transform&gt;();
  }
  //------------------------------
  // Update is called once per frame
  void <span class="strong"><strong>LateUpdate</strong></span> () 
  {
    //Clamp position
    ThisTransform.position = new Vector3(Mathf.Clamp(ThisTransform.position.x, HorzRange.x, HorzRange.y),
    ThisTransform.position.y,
    Mathf.Clamp(ThisTransform.position.z, VertRange.x, VertRange.y));
  }
  //------------------------------
}
//------------------------------</pre></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec12"></a>Code Sample 3.2</h3></div></div></div><p>The following points summarize the code sample:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>The <a id="id202" class="indexterm"></a>
<code class="literal">LateUpdate</code> function is always called after all the <code class="literal">FixedUpdate</code> and <code class="literal">Update</code> calls, allowing an object to modify its position before it's rendered to the screen. More information <a id="id203" class="indexterm"></a>on <code class="literal">LateUpdate</code> can be found at <a class="ulink" href="http://docs.unity3d.com/ScriptReference/MonoBehaviour.LateUpdate.html" target="_blank">http://docs.unity3d.com/ScriptReference/MonoBehaviour.LateUpdate.html</a>.</p></li><li style="list-style-type: disc"><p>The <code class="literal">Mathf.Clamp</code> function ensures that a specified value is capped between a minimum and maximum range.</p></li><li style="list-style-type: disc"><p>To use the <code class="literal">BoundsLock</code> script, simply drag and drop the file to the <code class="literal">Player</code> object and specify minimum and maximum values for its position. These values are specified in world position coordinates and can be determined by temporarily moving the <code class="literal">Player</code> object to the camera extremes and recording its position from the <span class="strong"><strong>Transform</strong></span> component:</p></li></ul></div><div class="mediaobject"><img src="/graphics/9781785888380/graphics/B05118_03_25.png.jpg" /><div class="caption"><p>Figure 3.25: Setting Bounds Lock</p></div></div><p>Now take the game for a test run by pressing play on the toolbar. The player spaceship should remain in view and be unable to move offscreen. Splendid!</p></div></div>