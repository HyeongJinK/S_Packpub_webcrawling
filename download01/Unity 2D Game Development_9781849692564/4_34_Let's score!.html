<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec37"></a>Let's score!</h2></div></div><hr /></div><p>One of the most important elements to a<a id="id138" class="indexterm"></a> game is being able to track progress. A quick and simple way to do this is to implement a score system. In our case, we will have a score that increases whenever you defeat an enemy.</p><p>Now, Unity does have a built-in GUI system. However, it has some drawbacks, which will be discussed in detail in <a class="link" href="#" linkend="ch06">Chapter 6</a>, <span class="emphasis"><em>The Finishing Touches</em></span>. With this in mind, we won't be relying on Unity's built-in system. Instead, we are going to create objects and attach them to the camera, which in turn will allow us to have a 3D GUI.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip15"></a>Tip</h3><p>
<span class="strong"><strong>Pro tip</strong></span>
</p><p>If you want to use what this author believes is the best UI system for Unity, purchase a license for NGUI from the Unity Asset Store. I'm not the only one to think it's the best; Unity hired the NGUI developer to build the new official UI system for Unity itself.</p></div><p>Let's build out some GUI elements:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Create a <span class="strong"><strong>3D Text</strong></span> object by navigating to the menu item <span class="strong"><strong>GameObject</strong></span> | <span class="strong"><strong>Create Other</strong></span>; name it <code class="literal">Score</code>. Make it a child of the <span class="strong"><strong>Main Camera</strong></span> GameObject and align it such that it sits in the top-left corner of the screen.</p></li><li><p>Set its position to <code class="literal">X: -6.91</code>, <code class="literal">Y: 4.99</code>, <code class="literal">Z: 10</code> to get this effect.</p></li><li><p>Make the text color solid black and adjust the scaling so that it looks the way you want it to.</p></li><li><p>Set the <span class="strong"><strong>Anchor</strong></span> field to <span class="strong"><strong>Upper Left</strong></span> and <span class="strong"><strong>Alignment</strong></span> to <span class="strong"><strong>Left</strong></span>.</p></li><li><p>Adjust the scene to your taste, but it should look a little something like the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849692564/graphics/2564OT_04_03.jpg" /></div></li></ol></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip16"></a>Tip</h3><p>
<span class="strong"><strong>Pro tip</strong></span>
</p><p>Unity's default 3D text font looks rather low quality in most situations. Try importing your own font and then set the font size to something much higher than you would usually need; often around 25 to 40. Then, when you place it in the world, it will look crisp and clean.</p></div><p>Let's make <a id="id139" class="indexterm"></a>it so that the <code class="literal">Score</code> visual element can actually track the player's score. Create a new script called <code class="literal">ScoreWatcher</code> and write the following code in it:</p><div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;
public class ScoreWatcher : MonoBehaviour
{
    public int currScore = 0;
    private TextMesh scoreMesh = null;
    
    void Start()
    {
        scoreMesh = gameObject.GetComponent&lt;TextMesh&gt;();
scoreMesh.text = "0";
    }
    
    void OnEnable()
    {
        EnemyControllerScript.enemyDied += addScore;
    }
    
    void OnDisable()
    {
        EnemyControllerScript.enemyDied -= addScore;
    }
    
    void addScore(int scoreToAdd)
    {
        currScore += scoreToAdd;
        scoreMesh.text = currScore.ToString();
    }
}</pre></div><p>You may notice<a id="id140" class="indexterm"></a> that in the preceding script, we are listening to the <code class="literal">enemyDied</code> event on the <code class="literal">EnemyControllerScript</code>. What we did here was we allowed other objects to easily create scoring events that the <span class="strong"><strong>Score</strong></span> object can optionally listen to. There is lots of power to this!</p><p>Let's add that event and delegate to the enemy. Open up <code class="literal">EnemyControllerScript</code>, and in the beginning, add the following code:</p><div class="informalexample"><pre class="programlisting">    // States to allow objects to know when an enemy dies
    public delegate void enemyEventHandler(int scoreMod);
        public static event enemyEventHandler enemyDied;</pre></div><p>Then, down in the <code class="literal">hitByPlayerBullet</code> function, add the following code just above <code class="literal">Destroy(gameObject,0.1f);</code>, right around line 95:</p><div class="informalexample"><pre class="programlisting">    
// Call the EnemyDied event and give it a score of 25.
if(enemyDied != null)
    enemyDied(25);</pre></div><p>Add the <code class="literal">ScoreWatcher</code> component to the <span class="strong"><strong>Score</strong></span> object. Now, when you play the game and defeat the enemies, you can watch the score increase by 25 points each time! Yeeee-haw!</p><p>Sorry 'bout that... shootin' things for points always makes me feel a bit Texan.</p></div>