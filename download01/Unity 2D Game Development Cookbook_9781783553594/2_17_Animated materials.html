<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec30"></a>Animated materials</h2></div></div><hr /></div><p>Another very useful thing that can be done with materials is to animate them by manipulating their so called UVs to get interesting rendering effects.</p><p>U and V are the letters used to refer to the <span class="emphasis"><em>x</em></span> and <span class="emphasis"><em>y</em></span> axes of a 2D image that is going to be used to texture a 3D mesh. As the X, Y, and Z letters are already in use for the model, the <span class="emphasis"><em>x</em></span> and <span class="emphasis"><em>y</em></span> axes for the image are named with the letters U and V.</p><p>The process of putting a 2D image on a 3D model is consequently called UV mapping,<a id="id177" class="indexterm"></a> and it is a very basic activity for any 3D artist.</p><p>As a complete tour of UV mapping would go beyond the scope of this chapter, we suggest you checkout this Wikipedia link to<a id="id178" class="indexterm"></a> begin learning more about it: <a class="ulink" href="http://en.wikipedia.org/wiki/UV_mappingt" target="_blank">http://en.wikipedia.org/wiki/UV_mappingt</a>.</p><p>The next recipe describes how textures can be animated through code.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec66"></a>Getting ready</h3></div></div></div><p>For this recipe, we need a texture, a game object, and a piece of code. We provided a nice spiral texture for you to use, in case you don't already have one.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec67"></a>How to do it...</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Start a new Unity scene.</p></li><li><p>Access <a id="id179" class="indexterm"></a>the <code class="literal">Assets/Textures</code> folder and import the image named <code class="literal">spiralTex</code>, or any other texture of your choice.</p></li><li><p>Create a new material in the <code class="literal">Materials </code>folder and name it <code class="literal">mat_spiral</code>.</p></li><li><p>Drag <span class="strong"><strong>spiralTex</strong></span> onto <code class="literal">mat_Spiral</code> as we did before.</p></li><li><p>Create a <code class="literal">Sphere</code> in the scene by selecting <span class="strong"><strong>GameObject</strong></span> | <span class="strong"><strong>CreateOther</strong></span> | <span class="strong"><strong>Sphere</strong></span> from the main menu.</p></li><li><p>Now drag <code class="literal">mat_spiral</code> onto the sphere in your scene. The following screenshot shows how the material should look:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_02_25.jpg" /></div></li><li><p>For the next step, we need a script to be added to our sphere. Let's first create a new folder in our <code class="literal">Assets</code> directory named <code class="literal">Scripts</code> to store the new asset (you should remember how to do that from previous recipes).</p></li><li><p>In the <code class="literal">Scripts</code> folder, create<a id="id180" class="indexterm"></a> a new <code class="literal">C# script</code> folder, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_02_26.jpg" /></div></li><li><p>Name this<a id="id181" class="indexterm"></a> script <code class="literal">AnimateUV</code> and double-click on it to open it in <span class="strong"><strong>Monodevelop</strong></span>, the default Unity script editor.</p></li><li><p>Add the following code to the script:</p><div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;
public class AnimateUV : MonoBehaviour {
  public float scrollSpeed = 0.5f;
  // Use this for initialization
  
  // Update is called once per frame
  void Update () {
    float offSetY=scrollSpeed*Time.time;
    myVector = new Vector2(0, offsetY);
    renderer.material.SetTextureOffset("_MainTex", myVector);
  }
}</pre></div></li><li><p>Drag the <code class="literal">animateUV</code> script onto the sphere in the scene and click on the <span class="strong"><strong>Play</strong></span> button. What you should get is the spiral texture rotating around the <span class="emphasis"><em>y</em></span> axis on the game object. Don't fall asleep!</p></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec68"></a>How it works...</h3></div></div></div><p>With this script, we set a<a id="id182" class="indexterm"></a> speed for the rotation of the texture (the <code class="literal">scrollSpeed</code> float variable) and then use time passing by to make the texture rotate on the <span class="emphasis"><em>y</em></span> axis of the model (by multiplying <code class="literal">scrollSpeed</code> for time).</p><p>The instruction to actually rotate the texture UVs is <code class="literal">renderer.material.SetTextureOffset</code>, which asks for a material component to operate on (in our case, the diffuse component of the material, specified with the <code class="literal">_MainTex</code> conventional name) and a <code class="literal">Vector2</code> variable to define rotation on the <span class="emphasis"><em>x</em></span> or <span class="emphasis"><em>y</em></span> axis (or both, if you like). As a matter of fact, in this recipe, we acted on the <span class="emphasis"><em>y</em></span> axis.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec69"></a>There's more...</h3></div></div></div><p>Though scripting is planned to be the topic of another chapter, we decided to add this recipe here to show you an interesting example of how materials can be manipulated through scripting. To learn more about advanced usage of textures and materials, we recommend you check out the online <a id="id183" class="indexterm"></a>Unity reference manual at <a class="ulink" href="http://docs.unity3d.com/Manual/Textures.html" target="_blank">http://docs.unity3d.com/Manual/Textures.html</a>.</p></div></div>