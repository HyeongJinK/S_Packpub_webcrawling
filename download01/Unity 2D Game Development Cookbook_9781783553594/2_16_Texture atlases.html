<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec29"></a>Texture atlases</h2></div></div><hr /></div><p>As we are nearing the <a id="id147" class="indexterm"></a>end of this chapter, there is one topic we would like to discuss. Let's take a look at the following screenshot, courtesy of Gamasutra:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_02_32.jpg" /></div><p>You may notice that it contains an arrangement of images and parts of images that are all nicely deployed to better fill the whole space available. This is technically called a texture atlas. A <a id="id148" class="indexterm"></a>texture atlas is in fact a way to optimize memory management as you feed your project with 2D textures. Instead of having an image for any differently colored mesh or mesh part, an artist can align several chunks on a single texture, saving memory that would otherwise go wasted.</p><p>Actually, in 2D gaming, texture atlases are extremely useful for backgrounds. To improve the perspective illusion of 2D static backgrounds, it is a good practice to actually build them as is done in theaters, by putting several screens on stage at different depths (distance from the audience), each with its own piece of background.</p><p>Likewise, artists create pre-rendered backgrounds by putting several images on different planes (or quads, more likely) that they scatter around on the game stage. On each of those quads (quads, by the way, are very simple, single-faced 3D shapes, made of a rectangular plane divided into two triangles), artists put an image selected from a texture atlas, which contains all the images required to actually build up that background. Simple as that!</p><p>As it is an important subject for 2D games, in the next recipe, we show how to make a texture atlas from a group of images.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec62"></a>Getting ready</h3></div></div></div><p>This recipe requires<a id="id149" class="indexterm"></a> two steps. The first is to create a proper texture atlas<a id="id150" class="indexterm"></a> using a 2D editor. Our choice is Photoshop, but you can do it with, I believe, any other editor.</p><p>The second step happens in <a id="id151" class="indexterm"></a>Unity, where we configure the texture atlas<a id="id152" class="indexterm"></a> in <span class="strong"><strong>Inspector</strong></span>. So be ready to open your Unity project, too.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec63"></a>How to do it...</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Open your 2D editor of choice, ours is Photoshop.</p></li><li><p>Create a new file. This will be our actual atlas, to be filled with other images. If you don't have other images, you can use the ones we have provided.</p></li><li><p>Make the file large, set the file size to 2048  x 2048 pixels, so it is a large texture. A resolution of 72 points should be fine.</p></li><li><p>Set your editor so it displays the reference grid and set the grid to <span class="strong"><strong>256 px</strong></span>. The following screenshot will clarify this:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_02_33.jpg" /></div></li><li><p>Now <a id="id153" class="indexterm"></a>you are ready to start importing <a id="id154" class="indexterm"></a>other images into this grid. In <a id="id155" class="indexterm"></a>Photoshop, several <a id="id156" class="indexterm"></a>images can be added as so-called levels to another image. We are pretty sure other software do this as well.</p></li><li><p>As you import new images, take care when deploying them so each one has its own separate slice of image to occupy. You can use the grid to help you out with this. The following screenshot shows the result we got:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_02_34.jpg" /></div></li><li><p>Save <a id="id157" class="indexterm"></a>the texture atlas. Since Unity <a id="id158" class="indexterm"></a>needs the information<a id="id159" class="indexterm"></a> about transparency to<a id="id160" class="indexterm"></a> effectively import the atlas, remove any default background from the original image before saving it as a PNG file.</p></li><li><p>Now switch to Unity. Open the project and create a new folder inside the <code class="literal">Assets\Textures</code> folder and name it <code class="literal">Texture Atlas</code>. We insist on this so your projects are well organized, with different folders for different types of assets.</p></li><li><p>Double-click on the <code class="literal">Texture Atlas</code> folder to open it, then right-click inside the <span class="strong"><strong>Project</strong></span> panel window and select <span class="strong"><strong>Import New Asset</strong></span>, as we did before.</p></li><li><p>Select the atlas PSD or BMP file in your <code class="literal">destination</code> folder and click on <span class="strong"><strong>Import</strong></span> to add it to the Unity project.</p></li><li><p>Next, select<a id="id161" class="indexterm"></a> <span class="strong"><strong>Texture Atlas</strong></span> in the <span class="strong"><strong>Project</strong></span> <a id="id162" class="indexterm"></a>panel in Unity; we need to <a id="id163" class="indexterm"></a>set a few properties in<a id="id164" class="indexterm"></a> <span class="strong"><strong>Inspector</strong></span>.</p></li><li><p>Set <span class="strong"><strong>Texture Type</strong></span> to <span class="strong"><strong>Sprite</strong></span>, <span class="strong"><strong>Sprite Mode</strong></span> to <span class="strong"><strong>Multiple</strong></span>, <span class="strong"><strong>Max Size</strong></span> to <span class="strong"><strong>2048</strong></span> (the size of the original image we made), and <span class="strong"><strong>Format</strong></span> to <span class="strong"><strong>Truecolor</strong></span>. You can refer to the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_02_35.jpg" /></div></li><li><p>Click on <span class="strong"><strong>Apply</strong></span> to save these settings.</p></li><li><p>In <span class="strong"><strong>Inspector</strong></span>, click<a id="id165" class="indexterm"></a> on the <span class="strong"><strong>Sprite Editor</strong></span> <a id="id166" class="indexterm"></a>button to open the <span class="strong"><strong>Sprite Editor</strong></span> <a id="id167" class="indexterm"></a>window, as shown in the<a id="id168" class="indexterm"></a> following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_02_36.jpg" /></div></li><li><p>In this panel, click on the <span class="strong"><strong>Slice</strong></span> button to open a panel. Check that the settings are the same as those displayed in the following screenshot, then click on <span class="strong"><strong>Slice</strong></span>:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_02_37.jpg" /></div></li><li><p>If nothing bad <a id="id169" class="indexterm"></a>happened, you should see <a id="id170" class="indexterm"></a>a thin white line around each <a id="id171" class="indexterm"></a>image in the atlas, meaning<a id="id172" class="indexterm"></a> that Unity has correctly identified and isolated each chunk of the atlas.</p></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec64"></a>How it works...</h3></div></div></div><p>Though it required several steps, building a texture atlas is quite simple and very useful. The principle is simple: create a large image and fill it with other images. As long as you use a transparent background and leave enough room between each image in the collection, Unity is good enough to slice it up automatically.</p><p>About the settings we defined, we set the image as a sprite made out of multiple chunks to allow automatic slicing. Setting the image to a non-compressed format is also required for automatic slicing.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec65"></a>There's more...</h3></div></div></div><p>There are more settings you can tweak for specific requirements, but we cannot explain all of them here, so we have provided a bunch of useful links about texture atlases and their management in Unity.</p><p>The first two are links from Unity manuals about texture settings<a id="id173" class="indexterm"></a> and the<a id="id174" class="indexterm"></a> Sprite Editor:</p><p><a class="ulink" href="http://docs.unity3d.com/Manual/class-TextureImporter.html" target="_blank">http://docs.unity3d.com/Manual/class-TextureImporter.html</a></p><p><a class="ulink" href="http://docs.unity3d.com/Manual/SpriteEditor.html" target="_blank">http://docs.unity3d.com/Manual/SpriteEditor.html</a></p><p>The next link is a very interesting read about texture atlases from<a id="id175" class="indexterm"></a> Gamasutra:</p><p><a class="ulink" href="http://www.gamasutra.com/view/feature/2530/practical_texture_atlases.php" target="_blank">http://www.gamasutra.com/view/feature/2530/practical_texture_atlases.php</a></p><p>Last is the link to a <a id="id176" class="indexterm"></a>PDF manual from nVidia corporation about texture optimization, for those of you who really want to dig into this topic:</p><p><a class="ulink" href="http://http.download.nvidia.com/developer/NVTextureSuite/Atlas_Tools/Texture_Atlas_Whitepaper.pdf" target="_blank">http://http.download.nvidia.com/developer/NVTextureSuite/Atlas_Tools/Texture_Atlas_Whitepaper.pdf</a></p></div></div>