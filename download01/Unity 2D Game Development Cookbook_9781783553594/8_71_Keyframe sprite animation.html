<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch08lvl1sec78"></a>Keyframe sprite animation</h2></div></div><hr /></div><p>Now, let's learn how to <a id="id502" class="indexterm"></a>create a<a id="id503" class="indexterm"></a> simple <span class="strong"><strong>attack</strong></span> animation clip for our sprite character using keyframes instead of a spritesheet.</p><p>Keyframe animation is a complex topic, and we cannot fully address it in a single recipe. Nevertheless, we'll use this opportunity to cover the basic principles so that you can get a grasp of the procedure.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec206"></a>Getting ready</h3></div></div></div><p>Again, we keep up from where we left. Have your project open and be ready to follow our instructions.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec207"></a>How to do it...</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Open the <a id="id504" class="indexterm"></a>
<span class="strong"><strong>Animation</strong></span> panel by going to <span class="strong"><strong>Window</strong></span> | <span class="strong"><strong>Animation</strong></span>, as <a id="id505" class="indexterm"></a>shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_08_40.jpg" /></div></li><li><p>Select <span class="strong"><strong>Character</strong></span> in <span class="strong"><strong>Scene</strong></span>. Then click on the drop-down menu in the <span class="strong"><strong>Animation</strong></span> panel to set <span class="strong"><strong>attack</strong></span> as the active clip, as shown in this screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_08_41.jpg" /></div></li><li><p>Set a <a id="id506" class="indexterm"></a>reasonable number of keyframes for the attack clip; 24 frames<a id="id507" class="indexterm"></a> per seconds is a good starting point. Then hit the recording button to start recording the clip. You can refer to the following screenshot to ensure that you are doing it right:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_08_42.jpg" /></div></li><li><p>With the<a id="id508" class="indexterm"></a> record button pressed, move the timeline cursor to<a id="id509" class="indexterm"></a> half the clip, that is, at 12 seconds, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_08_43.jpg" /></div></li><li><p>Go to the <span class="strong"><strong>Scene</strong></span>, select <span class="strong"><strong>Arm_R</strong></span> (in <span class="strong"><strong>Scene</strong></span> or from the <span class="strong"><strong>Hierarchy</strong></span> window) and move the cursor close to the corner of the boundary (the blue dots). The cursor should change to a rotating icon. Grab the corner and rotate the arm around<a id="id510" class="indexterm"></a> the pivot we set earlier. Here is a screenshot that<a id="id511" class="indexterm"></a> shows the result you should get:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_08_44.jpg" /></div></li><li><p>By doing so, we created two keyframes for <span class="strong"><strong>Arm_R</strong></span>: one frame in the position it was at 0 seconds of the clip, and another frame at 12 seconds, with the rotation we applied. To close this attacking loop, we need to set the final position keyframe, which is at the same position we started with.</p><p>Set the time line at frame 24 (by setting the value as we did before). Then click on the small button with a rhombus and a <span class="strong"><strong>+</strong></span> icon to add a keyframe at second 24. Please refer to the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_08_45.jpg" /></div></li><li><p>Now, with<a id="id512" class="indexterm"></a> <span class="strong"><strong>Arm_R</strong></span> still selected in the scene, move to the <span class="strong"><strong>Animation</strong></span><a id="id513" class="indexterm"></a> panel and select the frame at <span class="strong"><strong>0:00</strong></span>. Then go to the <span class="strong"><strong>Transform</strong></span> component panel in the <span class="strong"><strong>Inspector</strong></span> window and copy (right-click and select <span class="strong"><strong>Copy</strong></span>) the <span class="strong"><strong>Rotation</strong></span> value on the <span class="emphasis"><em>z</em></span> axis, as shown in this screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_08_46.jpg" /></div></li><li><p>The last step is to paste the <span class="strong"><strong>Rotation</strong></span> value at <span class="strong"><strong>0:00</strong></span> on the frame at <span class="strong"><strong>24:00</strong></span>. Select the frame and then paste (right-click and select <span class="strong"><strong>Paste</strong></span>) the rotation value on the <span class="emphasis"><em>z</em></span> axis. If you did this right, the arm should get back to its starting position. Please refer to the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_08_47.jpg" /></div></li><li><p>You can <a id="id514" class="indexterm"></a>now test the result. Disable the record button and<a id="id515" class="indexterm"></a> then try hitting play on the <span class="strong"><strong>Animation</strong></span> panel. Hopefully, the knight will start swinging the stick it holds in its right-hand!</p></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec208"></a>How it works...</h3></div></div></div><p>With respect to its general principles, keyframe animation is easy to understand, as it consists of setting keyframes and then moving single body parts in the position we want at that keyframe. Unity takes care of making the transitions between frames so that at the end of the animation process, we perceive a meaningful sequence instead of a collection of static frames.</p><p>The hard part comes with tweaking the animations to make them part of the characterization, which goes beyond the scope of this book.</p><p>The interface of the <span class="strong"><strong>Animation</strong></span> panel may not look friendly at a first glance, so we recommend repeating this last group of recipes and creating an animated orc with the other sprites available in the sprite atlas we have provided.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec209"></a>There's more...</h3></div></div></div><p>We have just scratched the surface of animation and keyframe animation here, as several other options and tools are available; for example, transitions between frames can be adjusted using curves to slow movements down (or speed them up), and make animations nicer and more believable. Animation curves <a id="id516" class="indexterm"></a>have recently gone legacy (so they are still supported but not recommended anymore), but the manual at <a class="ulink" href="http://docs.unity3d.com/Manual/animeditor-AnimationCurves.html" target="_blank">http://docs.unity3d.com/Manual/animeditor-AnimationCurves.html</a> still provides all the explanations you will require to make the most out of them.</p><p>For those of you who are interested in <a id="id517" class="indexterm"></a>animation in general, we recommend the following links to begin with:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p><a class="ulink" href="http://en.wikipedia.org/wiki/Key_frame" target="_blank">http://en.wikipedia.org/wiki/Key_frame</a></p></li><li style="list-style-type: disc"><p><a class="ulink" href="http://graphics.cs.cmu.edu/nsp/course/15-464/Spring11/lectures/lec02.pdf" target="_blank">http://graphics.cs.cmu.edu/nsp/course/15-464/Spring11/lectures/lec02.pdf</a></p></li></ul></div><p>Dudes, animation is massive topic!</p><p>There is also this link that I love, at <a class="ulink" href="http://the12principles.tumblr.com/" target="_blank">http://the12principles.tumblr.com/</a>.</p><p>Last, but absolutely not least, is the king of animation manuals: The <span class="emphasis"><em>Animator's Survival Kit</em></span> by former Disney's Richard Williams. It is available at popular online stores.</p></div></div>