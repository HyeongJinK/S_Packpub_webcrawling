<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec34"></a>Coding the Boolean-based transitions</h2></div></div><hr /></div><p>With the transition between<a id="id201" class="indexterm"></a> <span class="strong"><strong>Idle</strong></span> and <span class="strong"><strong>Jump</strong></span> configured in the <span class="strong"><strong>Animator</strong></span> window, we can script a piece of code to trigger it. With the following recipe, we show how simple it is to control animations through scripting with Unity.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec76"></a>Getting ready</h3></div></div></div><p>As usual, we follow on from the last recipe. You just need to add a <code class="literal">C#</code> script in the <code class="literal">Scripts</code> folder of the project (as you learned in <a class="link" href="#" linkend="ch02">Chapter 2</a>, <span class="emphasis"><em>Importing 3D Graphics</em></span>) and name it <code class="literal">Char_Animator</code>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec77"></a>How to do it...</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Access the <code class="literal">Scripts</code> folder in your Project panel and double-click on the newly created script to open it in <span class="strong"><strong>Monodevelop</strong></span>, the default Unity script editor.</p></li><li><p>Let's begin by creating an <code class="literal">Animator</code> type variable to store the reference to the character animator and add the following line at the top of the script:</p><div class="informalexample"><pre class="programlisting">private Animator charAnimator;</pre></div></li><li><p>Get inside the <code class="literal">Start()</code> function; here we need to address the <code class="literal">charAnimator</code> variable we created to the actual animator that we will attach to the character. We do that by adding the following line to the script:</p><div class="informalexample"><pre class="programlisting">charAnimator=this.GetComponent&lt;Animator&gt;();</pre></div></li><li><p>Now we define<a id="id202" class="indexterm"></a> an event to trigger the <code class="literal">Jump</code> clip. In the <code class="literal">Update()</code> function, add the following lines to intercept the pressing of the bar and set <code class="literal">tJump</code>:</p><div class="informalexample"><pre class="programlisting">if(Input.GetKey(KeyCode.Space)){
charAnimator.SetBool ("bJump", true);
}</pre></div><p>Refer to the following screenshot to check whether your code is correct:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_03_26.jpg" /></div></li><li><p>Now, we need<a id="id203" class="indexterm"></a> to add this script and the <code class="literal">Animator</code> controller to the character, but to do that, we first need to complete two steps:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>The first is to instantiate the character itself into the game scene, which we haven't done yet. Select <span class="strong"><strong>Character</strong></span> in the project panel and drag it into the hierarchy or directly into the game scene. You can see this in the following screenshot. Also, be sure that translations and rotations from <span class="strong"><strong>Inspector</strong></span> are all set to <code class="literal">0</code>; it is strongly recommended!</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_03_41.jpg" /></div></li><li style="list-style-type: disc"><p>The second step is to add the <span class="strong"><strong>Animator </strong></span>component to the character in the scene. You can do that from the top menu or in <span class="strong"><strong>Inspector</strong></span> (we go for the first solution). With <span class="strong"><strong>Character</strong></span> selected in the <a id="id204" class="indexterm"></a>scene, go to the menu and navigate to <span class="strong"><strong>Component</strong></span> | <span class="strong"><strong>Miscellaneous</strong></span> | <span class="strong"><strong>Animator</strong></span>, as shown in the following screenshot:</p></li></ul></div><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_03_60.jpg" /></div></li><li><p>Now drag <code class="literal">Packt_Animator</code> from the <code class="literal">Animator</code> folder in the project panel in the <code class="literal">Controller</code> field of the <span class="strong"><strong>Animator</strong></span> component into the <span class="strong"><strong>Inspector</strong></span> window, which should display <code class="literal">None</code> in the Controller option field right now. Please refer to the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_03_61.jpg" /></div></li><li><p>Next, drag <code class="literal">Char_Animator</code> from the <code class="literal">Scripts</code> folder onto the character in the scene. If you <a id="id205" class="indexterm"></a>did things right, with the character selected, you should see both components displayed in the <span class="strong"><strong>Inspector</strong></span> panel, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_03_28.jpg" /></div></li><li><p>Press the <span class="strong"><strong>Play</strong></span> button to start your game scene in the editor. If you press the spacebar, the character jumps, playing the correct clip.</p></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec78"></a>How it works...</h3></div></div></div><p>Once transitions <a id="id206" class="indexterm"></a>are set up, code is required to trigger them so that the animation clips are played. The logic to follow is pretty straightforward; we cover it here.</p><p>The character needs an animator component to store an animator controller. The controller holds the clips, represented as states; the transitions between them; and a number of control parameters to manage the logic. The script contains the instructions that trigger the clips in the animator controller, thanks to the control parameters.</p><p>All this information may seem overwhelming at first, but with practice, you'll see it makes perfect sense and you'll get used to it!</p></div></div>