<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec33"></a>Dealing with transitions</h2></div></div><hr /></div><p>In this recipe, we create and set up the <a id="id195" class="indexterm"></a>transition for the character to switch between the <span class="strong"><strong>Idle</strong></span> and <span class="strong"><strong>Jump</strong></span> animation clips. For this task, we also need a parameter, which we will call <code class="literal">bJump</code>, to trigger the jump animation through code.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec73"></a>Getting ready</h3></div></div></div><p>We will build on the previous recipe. Have the <span class="strong"><strong>Animator</strong></span> window open, and be ready to follow our instructions.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec74"></a>How to do it...</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>As you move to the <span class="strong"><strong>Animator</strong></span> panel in Unity, you should see a orange box representing the <span class="strong"><strong>Idle</strong></span> animation, from our previous recipe. If it is not, right-click on it, and from the menu, select <span class="strong"><strong>Set As Default</strong></span>. You can refer to the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_03_10.jpg" /></div></li><li><p>Right-click on the <span class="strong"><strong>Idle</strong></span> clip and select <span class="strong"><strong>Make Transition</strong></span> from the menu, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_03_11.jpg" /></div></li><li><p>Drag the arrow that <a id="id196" class="indexterm"></a>appears onto the <span class="strong"><strong>Jump</strong></span> clip and click to create the transition. It should appear in the <span class="strong"><strong>Inspector </strong></span>window, to the right of the <span class="strong"><strong>Animator</strong></span> window. Check the following screenshot to see whether you did it right:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_03_12.jpg" /></div></li><li><p>Now that we have got the <a id="id197" class="indexterm"></a>transition, we need a parameter to switch between <span class="strong"><strong>Idle</strong></span> and <span class="strong"><strong>Jump</strong></span>. We use a <code class="literal">boolean</code> type for this, so we first need to create it. In the bottom-left corner of the <span class="strong"><strong>Animator</strong></span> window, click on the small <span class="strong"><strong>+</strong></span>, and from the menu that appears, select <span class="strong"><strong>Bool</strong></span>, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_03_13.jpg" /></div></li><li><p>Name the newly created parameter <code class="literal">bJump</code> (the "b" stands for the <code class="literal">boolean</code> type; it's a good habit to create meaningful variable names).</p></li><li><p>Click on the white arrow representing the transition to access its properties in <span class="strong"><strong>Inspector</strong></span>. There, a visual representation of the transition between the two clips is available.</p></li><li><p>By checking the <a id="id198" class="indexterm"></a>
<span class="strong"><strong>Conditions</strong></span> section in <span class="strong"><strong>Inspector</strong></span>, you can see that the transition is right now controlled by <span class="strong"><strong>Exit Time</strong></span>, meaning that the <span class="strong"><strong>Jump</strong></span> clip will be played only after the <span class="strong"><strong>Idle</strong></span> clip has finished playing. The <code class="literal">0.97</code> value tells us that the transition is actually blending between the two clips for the last 3 percent of the idle animation. For your reference, you can adjust this value if you want to blend it a bit more or a bit less. Please refer to the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_03_14.jpg" /></div></li><li><p>As we want our <code class="literal">bJump</code> parameter to control the transition, we need to change <span class="strong"><strong>Exit Time</strong></span> using the <code class="literal">tJump</code> parameter. We do that by clicking on the drop-down menu on <span class="strong"><strong>Exit Time</strong></span> and selecting <code class="literal">tJump</code> from the menu, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_03_15.jpg" /></div></li><li><p>Note that <a id="id199" class="indexterm"></a>it is possible to add or remove conditions by acting on the small <span class="strong"><strong>+</strong></span> and <span class="strong"><strong>-</strong></span> buttons in the interface if you need extra conditions to control one single transition. For now, we just want to be sure that the <span class="strong"><strong>Atomic</strong></span> option is not flagged in the <span class="strong"><strong>Inspector</strong></span> panel. The <span class="strong"><strong>Atomic</strong></span> flag interrupts an animation, even if it has not finished playing yet. We don't want that to happen; when the character jumps, the animation must get to its end before playing any other clip.</p><p>The following screenshot highlights these options we just mentioned:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_03_17.jpg" /></div></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec75"></a>How it works...</h3></div></div></div><p>We made our first <a id="id200" class="indexterm"></a>transition with Mecanim and used a <code class="literal">boolean</code> variable called <code class="literal">bJump</code> to control it. It is now possible to link <code class="literal">bJump</code> to an event, for example, pressing the spacebar to trigger the <span class="strong"><strong>Jump</strong></span> animation clip.</p></div></div>