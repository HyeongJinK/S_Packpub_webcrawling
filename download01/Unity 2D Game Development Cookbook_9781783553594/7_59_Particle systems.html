<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch07lvl1sec67"></a>Particle systems</h2></div></div><hr /></div><p>To solve the problem of playing the <a id="id427" class="indexterm"></a>audio and destroying the game object at the same time, we will use a particle system. A particle system is a complex game object that emits so-called particles in the game scene. Particle effects are largely used in video games for various graphic touchesâ€”game object trails, glitter, smoke, explosions, rain, snow, and so on.</p><p>Particles, by<a id="id428" class="indexterm"></a> themselves, are multiple instances of (usually) tiny game objects with a mesh, transparent texture, and direction in the World Space. These particles sprout from a component of the particle system called Emitter.</p><p>The Emitter emits a large number of particles over time, and then these particles fly through the scene, according to several user-defined parameters. We can define the size and shape of the area where the particles tend to crowd as they emerge; the lifetime of individual particles before they get destroyed; the change in shape, color, or direction of the particles as they fly through the scene; and much more.</p><p>Using particle systems<a id="id429" class="indexterm"></a> in Unity is not very hard, provided you have the right assets and a clear idea of the result you want to achieve. In the following recipe, we will show you how to add and set up a particle system to be used when the player collects an item.</p><p>The particle system we are going to create covers two purposes. The first purpose is to enrich the visuals and the feedback coming from the game. A nice puff that appears when the collectible is gathered by the character helps the player to understand what just happened, and will hopefully make them smile for what they've done!</p><p>The other purpose<a id="id430" class="indexterm"></a> of the particle system is to play the sound we want to be heard by the player when a collectible is gathered, and then destroy itself. To do this, we first need to move <span class="strong"><strong>Audio Source</strong></span> and its attached clip from the collectible prefab to the the new particle system we are about to create.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec172"></a>Getting ready</h3></div></div></div><p>Let's begin by editing <span class="strong"><strong>coll_prefab</strong></span> and removing <span class="strong"><strong>Audio Source</strong></span> from it. Open the project scene and be ready to follow our instructions.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec173"></a>How to do it...</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>To remove a component from a prefab, we begin by dragging the prefab itself into the scene. Drag <span class="strong"><strong>coll_prefab</strong></span> from the <span class="strong"><strong>Prefabs</strong></span> folder in the <span class="strong"><strong>Project</strong></span> panel into the scene.</p></li><li><p>Select <span class="strong"><strong>coll_prefab</strong></span> in <a id="id431" class="indexterm"></a>the scene and move to the <span class="strong"><strong>Inspector</strong></span> window. Scroll down in the list of components until you find <span class="strong"><strong>Audio Source</strong></span>. then click on the small wheel icon to open the component menu. Select <span class="strong"><strong>Remove Component</strong></span>, as shown in this screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_07_05.jpg" /></div></li><li><p>Click on the <span class="strong"><strong>Apply</strong></span> button to save the edits as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_07_06.jpg" /></div></li><li><p>You can now remove <span class="strong"><strong>coll_prefab</strong></span> from the scene.</p></li><li><p>Add a new game <a id="id432" class="indexterm"></a>object from the scene. From the menu, navigate to <span class="strong"><strong>GameObject</strong></span> | <span class="strong"><strong>Create Other</strong></span> | <span class="strong"><strong>Particle System</strong></span>, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_07_07.jpg" /></div></li><li><p>Name the particle <a id="id433" class="indexterm"></a>system <span class="strong"><strong>sparkles</strong></span>.</p></li><li><p>The particle system in the scene should be already emitting particles. If you now move to the <span class="strong"><strong>Inspector</strong></span> window, you will see the many submenus that are available to fine-tune the particle system in the scene. Let's just take care of the most relevant submenus here.</p><p>The <span class="strong"><strong>Particle System</strong></span> menu contains general settings for the particle system and several parameters related to shape, lifetime, color, and speed of the particles when they are first created. You can set this group of parameters as shown in this screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_07_08.jpg" /></div></li><li><p>The <a id="id434" class="indexterm"></a>
<span class="strong"><strong>Emission</strong></span> submenu is meant to control the number of particles we want to be emitted per second or the number of particles that must be emitted with each burst. Let's use a value of <code class="literal">1</code> in the <span class="strong"><strong>Rate</strong></span> settings, for this.</p></li><li><p>Now click on the small <span class="strong"><strong>+</strong></span> icon on the right side to add a burst of 15 particles, as shown in the next screenshot.</p></li><li><p>The <span class="strong"><strong>Shape</strong></span> menu is used to set the shape of the emission in the 3D world. There are a number of predefined shapes, and there is also the ability to define a custom mesh to be used as the shape. In our case, we pick a <span class="strong"><strong>Sphere</strong></span> shape of <span class="strong"><strong>Radius</strong></span> <code class="literal">0.01</code>.</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_07_09.jpg" /></div></li><li><p>The <a id="id435" class="indexterm"></a>
<span class="strong"><strong>Color</strong></span> menu allows us to control the change of the particles' color over time. It also allows us to set color opacity over time. This feature, in particular, is useful for us to create that puff effect we mentioned, because we actually want the puffs to progressively disappear by getting more and more transparent as time passes by.</p></li><li><p>Check the <span class="strong"><strong>Color over Lifetime</strong></span> box. Then click on the white bar to open <span class="strong"><strong>Gradient Editor</strong></span>, and apply the settings displayed in this screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_07_10.jpg" /></div></li><li><p>The <span class="strong"><strong>Renderer</strong></span> menu allows to customize the shape and material of individual particles and set whether particles should have and receive shadows, among the others. Before we set it up, let's import a texture to make a material for the particle system we are creating.</p></li><li><p>In the <span class="strong"><strong>Project</strong></span> panel, access the <span class="strong"><strong>Textures</strong></span> folder and import <span class="strong"><strong>Texture</strong></span> named <code class="literal">tex_ps</code> to the project.</p></li><li><p>Set <span class="strong"><strong>Texture</strong></span> <a id="id436" class="indexterm"></a>in the <span class="strong"><strong>Inspector</strong></span> window, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_07_12.jpg" /></div></li><li><p>Now create a new material in the <span class="strong"><strong>Materials</strong></span> folder and name it <span class="strong"><strong>mat_ps</strong></span>. Drag <span class="strong"><strong>tex_ps</strong></span> into the the texture slot of the material and set <span class="strong"><strong>Shader</strong></span> for this material as <span class="strong"><strong>Particles\Additive</strong></span>, as shown in this screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_07_13.jpg" /></div></li><li><p>Finally, we can <a id="id437" class="indexterm"></a>finish editing <span class="strong"><strong>Renderer</strong></span> of our Particle System by dragging <span class="strong"><strong>mat_smoke</strong></span> into the material slot in the <span class="strong"><strong>Renderer</strong></span> menu of the Particle System, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_07_11.jpg" /></div></li><li><p>There are a couple of more steps before we end this recipe. The first is to add an <span class="strong"><strong>Audio Source</strong></span> to the particle system to play the <span class="strong"><strong>sfx_01</strong></span> clip. We did this operation in the previous recipe, so we have to repeat those same steps. Add the <span class="strong"><strong>Audio Source</strong></span> to the particle systems and drag the <span class="strong"><strong>sfx_01</strong></span> audio clip into it.</p></li><li><p>What we didn't do earlier but need to do now is to select the <span class="strong"><strong>Play On Awake</strong></span> option in the <span class="strong"><strong>Audio Source</strong></span> component. This way, the audio will be played the very moment the PS is created in the scene, which is what we want.</p></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec174"></a>How it works...</h3></div></div></div><p>A particle system is <a id="id438" class="indexterm"></a>collection of components that are used to create graphic effects for your game scenes. It consists of a part called Emitter. This part emits tiny, flat meshes with a transparent texture, called particles. Particles fly through the game scene and behave according to a large number of parameters that set their movement, direction, duration, color, opacity, and so on.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec175"></a>There's more...</h3></div></div></div><p>Particle systems<a id="id439" class="indexterm"></a> are an important component of almost any video game, and once you get used to the settings the several submenus, they are very funny to experiment with! A thorough explanation of their many properties and uses goes beyond the scope of this manual, so you can to refer to the<a id="id440" class="indexterm"></a> guide at <a class="ulink" href="http://docs.unity3d.com/Manual/class-ParticleSystem.html" target="_blank">http://docs.unity3d.com/Manual/class-ParticleSystem.html</a> and to experiment a lot.</p></div></div>