<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch01lvl1sec21"></a>Configuring imported animations in Unity Inspector</h2></div></div><hr /></div><p>Before we end this chapter about Maya and Unity, there is one last step we must take care of configuring imported animations in Unity Inspector. This is the topic of our next recipe.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec39"></a>Getting ready</h3></div></div></div><p>Again, we pick up from <a id="id63" class="indexterm"></a>where we left the previous<a id="id64" class="indexterm"></a> lesson. Open Unity and select the animated FBX file in the project panel.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec40"></a>How to do it...</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>With the animated <span class="strong"><strong>FBX</strong></span> file selected in the project panel, go to <span class="strong"><strong>Inspector</strong></span> and access the <span class="strong"><strong>Model</strong></span> tab. Since we are only interested in the animation data stored in this file, we will basically unflag most of the options that we set when we imported the static model. Use the following screenshot as a reference and then click on <span class="strong"><strong>Apply</strong></span>:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_01_20.jpg" /></div></li><li><p>Now we move on <a id="id65" class="indexterm"></a>to the <span class="strong"><strong>Rig</strong></span> tab. As<a id="id66" class="indexterm"></a> the animation clip stored in this file is to be used by the model we imported before, we need to set the <span class="strong"><strong>Avatar Definition</strong></span> field as <span class="strong"><strong>Copy From Other Avatar</strong></span>.</p></li><li><p>We also need to set the source avatar. Click on the small button to the right of the <span class="strong"><strong>Source</strong></span> field and add the avatar created from the static model to it, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_01_21.jpg" /></div></li><li><p>Click on <a id="id67" class="indexterm"></a>
<span class="strong"><strong>Apply</strong></span> and select the last<a id="id68" class="indexterm"></a> tab, <span class="strong"><strong>Animations</strong></span>.</p></li><li><p>In this tab, there is much to do. First of all, flag the <span class="strong"><strong>Import Animations</strong></span> option, which will make a group of related options that depend on this option visible:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_01_23.jpg" /></div></li><li><p>Scroll down<a id="id69" class="indexterm"></a> the panel and look for the <a id="id70" class="indexterm"></a>
<span class="strong"><strong>Root Transform Rotation</strong></span>. Flag <span class="strong"><strong>Bake Into Pose</strong></span> and select <span class="strong"><strong>Root Node Rotation</strong></span> from the drop-down menu.</p></li><li><p>In the <span class="strong"><strong>Root Transform Position (Y)</strong></span> group, flag <span class="strong"><strong>Bake Into Pose</strong></span> and check that <span class="strong"><strong>Root Node Position</strong></span> <span class="strong"><strong>(Y)</strong></span> is flagged. In the <span class="strong"><strong>Root Transform Position (XZ)</strong></span> group, flag <span class="strong"><strong>Bake Into Pose</strong></span> and ensure that <span class="strong"><strong>Root Node Position</strong></span> isn't flagged.</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_01_22.jpg" /></div></li><li><p>Notice that <a id="id71" class="indexterm"></a>this is an idle <a id="id72" class="indexterm"></a>animation and, as such, it should be set on looping by flagging the <span class="strong"><strong>Loop Time</strong></span> option. We didn't do this intentionally to provide a more general example.</p></li><li><p>Click on <span class="strong"><strong>Apply</strong></span> to end configuring the animation.</p></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec41"></a>How it works...</h3></div></div></div><p>Let's begin with a few words on the topic of root motion, as Unity Inspector displays several options about it.</p><p>Root motion has to do with controlling the actual position of the mesh with regard to its collider while animations are being played. Most animations happen in place, meaning that the mesh and the collider don't actually move around as the character is animated. This may be the case for examples of walk and run animations.</p><p>There are other animations though that require the mesh and collider to actually move or rotate in the 3D world as the animation is played. Actions such as strafing, jumping, and other in-game specials require the mesh and the collider to change their position and rotation in the 3D world as the animation is performed.</p><p>By setting the properties of Root Rotation and Root Position groups, you control whether the collider should rotate or move with the mesh during specific animation clips.</p><p>In a walk animation, the start and stop root orientations and positions in world space are identical. In such cases where animations are acknowledged by Unity with a green light in Unity Inspector, it is recommended to flag the <span class="strong"><strong>Bake into Pose</strong></span> option in the <span class="strong"><strong>Root Transform Rotation</strong></span> group and set <span class="strong"><strong>Root Node Rotation</strong></span> from the drop-down menu. Also, flag <span class="strong"><strong>Bake Into Pose</strong></span> in the <span class="strong"><strong>Root Transform Position (Y)</strong></span> group and set <span class="strong"><strong>Root Node Position</strong></span> from the menu.</p><p>As for the <a id="id73" class="indexterm"></a>
<span class="strong"><strong>Root Transform Position (XZ)</strong></span> group <a id="id74" class="indexterm"></a>of options, the manual recommends using them for long, idle animations, where the repetition of many frames could lead the mesh to drift from its collider in the long run. In such cases, it is recommended that you bake the position on the <span class="emphasis"><em>x</em></span> and <span class="emphasis"><em>z</em></span> axes as well.</p><p>Latin speakers used to say "Repetita iuvant," meaning repetition helps. The settings provided here are to be intended as general, default settings that may not fit into any situation. For example, you may find yourself having to set <span class="strong"><strong>Scale Factor</strong></span> in the <span class="strong"><strong>Model</strong></span> tab for the animated FBX file too in order to prevent the animation from not fitting the model rig. Alternatively, you may need to tweak the <span class="strong"><strong>Root Transform Rotation</strong></span> and <span class="strong"><strong>Root Transform Position</strong></span> settings differently, depending on how you rigged\animated your model with specific animation clips. As usual, we recommend that you refer to the Unity<a id="id75" class="indexterm"></a> documentation at <a class="ulink" href="http://docs.unity3d.com/Manual/AnimationsImport.html" target="_blank">http://docs.unity3d.com/Manual/AnimationsImport.html</a> whenever you have questions.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec42"></a>There's more...</h3></div></div></div><p>The <span class="strong"><strong>Rig</strong></span> tab in<a id="id76" class="indexterm"></a> Unity Inspector<a id="id77" class="indexterm"></a> displays an option that we didn't mention here: <span class="strong"><strong>Animation Type</strong></span>. You configure this option to select whether you want your character to be animated as a humanoid or a generic object, as it could be with a vehicle, a ball, or whatever.</p><p>Also, when a rigged FBX file is imported into a project, Unity automatically creates a so-called avatar out of it. This task is generally performed automatically by Mecanim, the built-in tool responsible for animation setting and management; we will discuss this in detail in <a class="link" href="#" linkend="ch03">Chapter 3</a>, <span class="emphasis"><em>Animating a Game Character</em></span>.</p><p>Mecanim<a id="id78" class="indexterm"></a> has routines that examine the skeletal configuration of a rigged model imported in Unity and then recompute it into a general template it can interpret. This template is called the avatar. Once an avatar has been created, other animation clips can be targeted to that same avatar. This is how multiple animation clips are linked to a single character model in Unity.</p><p>In the recipe, we configured the<a id="id79" class="indexterm"></a> model scale and material in the <span class="strong"><strong>Model</strong></span> tab only for<a id="id80" class="indexterm"></a> the static version of the model; in the <span class="strong"><strong>Rig</strong></span> tab, we set the <span class="strong"><strong>Avatar Definition</strong></span> option to <span class="strong"><strong>Create for this model</strong></span>. For animated clips, on the other hand, we didn't configure the <span class="strong"><strong>Model</strong></span> tab, and we set <span class="strong"><strong>Avatar Definition</strong></span> to <span class="strong"><strong>Copy From Other Avatar</strong></span> with a reference to the static avatar. This assumes Mecanim succeeds in interpreting the rigged model.</p><p>There are cases where for some reason Mecanim is unable to correctly compute the avatar; alternatively, you may just want to make changes on your own. In such cases, it is possible to manually edit the avatar in Unity Inspector and check that all bones required by Mecanim are correctly named and in place.</p><p>A recipe about setting up the avatar would go beyond the scope of this book, as it has a lot to do with modeling and rigging techniques, which are beyond the scope of this book.</p><p>Refer to the Unity manual at <a class="ulink" href="http://docs.unity3d.com/Manual/AvatarCreationandSetup.html" target="_blank">http://docs.unity3d.com/Manual/AvatarCreationandSetup.html</a>.<a id="id81" class="indexterm"></a> Besides this, if you are interested in delving more into this matter, we suggest the many tutorials available on websites about game development and 3D graphics. For example, digital tutors offer many exceptional tutorials about Unity in general and Mecanim in particular; we recommend you check them out.</p></div></div>