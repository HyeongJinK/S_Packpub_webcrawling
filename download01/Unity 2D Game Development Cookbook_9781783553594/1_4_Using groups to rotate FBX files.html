<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch01lvl1sec17"></a>Using groups to rotate FBX files</h2></div></div><hr /></div><p>An efficient solution to dealing with the discrepancy between Maya and Unity is to act on Maya's side and rotate the model on its <span class="emphasis"><em>y </em></span>axis there. Though, as we write, this problem is going to be solved soon by <a id="id25" class="indexterm"></a>Maya LT, we offer a solution here that prevents the imported FBX file from acting strangely once they are turned into prefabs in Unity. The idea is to use the<a id="id26" class="indexterm"></a> so-called "groups" to apply the transformations required and yet get a clean hierarchy for the prefab to appear in Unity. Let's see how to do it.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec24"></a>Getting ready</h3></div></div></div><p>Open the scene again with the model we used before and be ready to follow our instructions.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec25"></a>How to do it...</h3></div></div></div><p>In this recipe, we will <a id="id27" class="indexterm"></a>show you how to use groups and hierarchies in <a id="id28" class="indexterm"></a>Maya to export a model that will not show its back once it gets imported into Unity. Have the Maya scene open on your screen.</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>From the outliner panel, select the <span class="strong"><strong>root</strong></span> node of your model. Be sure that the model is at the 0,0,0 position with 0,0,0 rotation.</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_01_08.jpg" /></div></li><li><p>With <span class="strong"><strong>root</strong></span> node selected, press <span class="emphasis"><em>Ctrl</em></span>+<span class="emphasis"><em>G</em></span> to create a group in the hierarchy.</p></li><li><p>Double-click on the newly created group name to edit it and type <code class="literal">rot_180</code> (this is actually just for reference so we know what the group means).</p></li><li><p>Set a value, namely 180, for the rotation on the <span class="emphasis"><em>y</em></span> axis in the <span class="strong"><strong>Transform Attributes</strong></span> panel.</p></li><li><p>With the <code class="literal">rot_180</code> group selected in the hierarchy, press <span class="emphasis"><em>Ctrl</em></span>+<span class="emphasis"><em>G</em></span> again to create another group. Name this group <code class="literal">export</code> after double-clicking on the group name in the hierarchy.</p></li><li><p>Now you can select the <span class="strong"><strong>export</strong></span> node to export the selection in order to get an FBX file out of this model.</p></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec26"></a>How it works...</h3></div></div></div><p>By using one group for flipping the model on the <span class="emphasis"><em>y</em></span> axis and another to make a selection featuring neither rotations nor translations for the export, we made sure that the FBX file won't have any unexpected <a id="id29" class="indexterm"></a>rotation or position offsets that will affect its<a id="id30" class="indexterm"></a> behavior once it gets scripted into the code in Unity.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec27"></a>There's more...</h3></div></div></div><p>Another technique we will only mention here is to use your programming skills and code an <code class="literal">AssetPostprocessor</code> class to handle the process automatically.</p><p><code class="literal">AssetPostprocessor</code> is a class <a id="id31" class="indexterm"></a>in Unity, provided with several methods to act on the pipeline for importing assets into Unity.</p><p>What one could do is add a custom attribute to the model in Maya, something like turn me 180 degrees on the <span class="emphasis"><em>y</em></span> axis when imported, and let the <code class="literal">AssetPostprocessor</code> class read this attribute and perform the transformation.</p><p>You can learn more about <a id="id32" class="indexterm"></a>the <code class="literal">AssetPostprocessor</code> class by checking the scripting reference guide at <a class="ulink" href="http://docs.unity3d.com/ScriptReference/AssetPostprocessor.html" target="_blank">http://docs.unity3d.com/ScriptReference/AssetPostprocessor.html</a>.</p></div></div>