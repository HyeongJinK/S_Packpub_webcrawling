<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch05lvl1sec52"></a>Setting up an Animator</h2></div></div><hr /></div><p>Double-click on <code class="literal">Packt_Animator</code> from the <a id="id317" class="indexterm"></a>
<span class="strong"><strong>Project</strong></span> panel to open the <span class="strong"><strong>Animator</strong></span> panel in Unity. If you messed up a little with it, delete anything except the default <span class="strong"><strong>Idle</strong></span> node.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec132"></a>How to do it...</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Create three new empty states by right-clicking anywhere in the <span class="strong"><strong>Animator</strong></span> window, then select <span class="strong"><strong>Create State</strong></span> and <span class="strong"><strong>Empty</strong></span>, as shown in the following screenshot. Name them <span class="strong"><strong>runRight</strong></span>, <span class="strong"><strong>runLeft</strong></span>, <span class="strong"><strong>Idle</strong></span> and <span class="strong"><strong>Jump</strong></span>.</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_05_20.jpg" /></div></li><li><p>Add the run animation clip to both<a id="id318" class="indexterm"></a> <span class="strong"><strong>runRight</strong></span> and <span class="strong"><strong>runLeft</strong></span> states, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_05_21.jpg" /></div></li><li><p>Lastly, add the <span class="strong"><strong>jump_pose</strong></span> clip to the <span class="strong"><strong>Jump</strong></span> state. Here's a screenshot, just in case:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_05_22.jpg" /></div></li><li><p>Now we can take care<a id="id319" class="indexterm"></a> of the transitions. First of all we need two variables: a float called <span class="strong"><strong>fSpeed</strong></span> to check whether we should trigger the left or the right sided running animation, and a Boolean called <span class="strong"><strong>bJump</strong></span> for jumping. You should remember how to do this. The following screenshot shows what you are searching for:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_05_23.jpg" /></div></li><li><p>Create a new transition from <span class="strong"><strong>Idle</strong></span> to <span class="strong"><strong>runRight</strong></span>, and in the <span class="strong"><strong>Inspector</strong></span> panel, set the condition to <span class="strong"><strong>fSpeed</strong></span> greater than <code class="literal">0.2</code>, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_05_24.jpg" /></div></li><li><p>We also need to create a transition <a id="id320" class="indexterm"></a>back from <span class="strong"><strong>runRight</strong></span> to <span class="strong"><strong>Idle</strong></span> and set the condition for triggering the transition as follows: we trigger the animation when the <span class="strong"><strong>fSpeed</strong></span> parameter has a value below <code class="literal">0.2</code>. Check the following screenshot to be sure you are doing things right:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_05_26.jpg" /></div></li><li><p>Repeat the same operation with <a id="id321" class="indexterm"></a>
<span class="strong"><strong>Idle</strong></span> and <span class="strong"><strong>runLeft</strong></span>, but this time the enter condition is that <span class="strong"><strong>fSpeed</strong></span> is less than <code class="literal">-0.2</code>, while the exit condition is that <span class="strong"><strong>fSpeed</strong></span> is greater than <code class="literal">-0.2</code>.</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_05_27.jpg" /></div><p>The reason for this<a id="id322" class="indexterm"></a> is that when the character runs left, it is going towards negative values on the <span class="emphasis"><em>x</em></span> axis and thus we need to check for negative values of <span class="strong"><strong>fSpeed</strong></span>!</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_05_28.jpg" /></div></li><li><p>For the Jump<a id="id323" class="indexterm"></a> animation, we use the <span class="strong"><strong>bJump</strong></span> parameter. Create a transition from <span class="strong"><strong>Idle</strong></span> to <span class="strong"><strong>Jump</strong></span> and set <span class="strong"><strong>bJump</strong></span> to <span class="strong"><strong>true</strong></span> as its entering condition, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_05_30.jpg" /></div></li><li><p>As for the exit <a id="id324" class="indexterm"></a>transition, create a new one back from <span class="strong"><strong>Jump</strong></span> to <span class="strong"><strong>Idle</strong></span> and set <span class="strong"><strong>bJump</strong></span> to <span class="strong"><strong>false</strong></span> as its condition. You can refer to the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_05_31.jpg" /></div></li><li><p>Repeat the <a id="id325" class="indexterm"></a>same operations connecting <span class="strong"><strong>runRight</strong></span> and <span class="strong"><strong>runLeft</strong></span> to <span class="strong"><strong>Jump</strong></span> to complete the task.</p></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec133"></a>How it works...</h3></div></div></div><p>With the Animator updated, the character now triggers the right running animations depending on its direction and a jump pose upon jumping. For the prototype, we don't need anything more than this.</p></div></div>