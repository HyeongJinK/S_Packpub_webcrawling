<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch06lvl1sec57"></a>Loading a new scene at runtime</h2></div></div><hr /></div><p>With a state manager<a id="id367" class="indexterm"></a> that handles multiple games scenes, we can <a id="id368" class="indexterm"></a>now move on to loading those scenes in the game. In the next recipe, we add the <code class="literal">level_1</code> scene to our project and modify the code so that <code class="literal">level_01</code> is loaded upon pressing the interface button displayed in the <span class="strong"><strong>game_starter</strong></span> scene.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec145"></a>Getting ready</h3></div></div></div><p>We keep up from where we left at the end of previous recipe. Just be sure that you have the <span class="strong"><strong>game_starter</strong></span> scene loaded in your project and that an empty game object called <span class="strong"><strong>game_starter</strong></span> is present in the scene, with the <span class="strong"><strong>GameStart</strong></span> script attached to it. You can refer to the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_06_02.jpg" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec146"></a>How to do it…</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>With<a id="id369" class="indexterm"></a> <span class="strong"><strong>Game Start</strong></span> scene loaded in Unity, navigate<a id="id370" class="indexterm"></a> to <span class="strong"><strong>File</strong></span> | <span class="strong"><strong>Build Settings</strong></span> to open the <span class="strong"><strong>Build Settings</strong></span> panel.</p></li><li><p>Click on <span class="strong"><strong>AddCurrent</strong></span> to add the loaded scene to the game build, as shown in this screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_06_04.jpg" /></div></li><li><p>Now load the scene called <code class="literal">level_01</code>. Refer to the following screenshot to check out the scene that contains the right game object:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_06_03.jpg" /></div></li><li><p>Add<a id="id371" class="indexterm"></a> this scene too to the <span class="strong"><strong>Build Settings</strong></span> panel, just <a id="id372" class="indexterm"></a>as we did before.</p></li><li><p>With a second scene added to the prototype, we need to enter the instructions to actually load <code class="literal">level_01</code> when the button in the <span class="strong"><strong>Game Start</strong></span> scene is pressed. Open the <span class="strong"><strong>GameStart</strong></span> script in <span class="strong"><strong>Monodevelop</strong></span> and modify the <code class="literal">GameStart()</code> function as follows:</p><div class="informalexample"><pre class="programlisting">  void GameStart(){
    print("starting game...");
    
    DontDestroyOnLoad(StateManager.Instance);
    Application.LoadLevel("level_1");");
    StateManager.Instance.StartState();
  }</pre></div></li><li><p>Save the script and go back to Unity.</p></li><li><p>Load <span class="strong"><strong>Game Start</strong></span> scene into the Editor.</p></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec147"></a>How it works…</h3></div></div></div><p>If you run the <a id="id373" class="indexterm"></a>game now, it should begin with Game Start scene, which <a id="id374" class="indexterm"></a>only consists of an empty scene and a button.</p><p>When you press the button, <code class="literal">level_01</code> is loaded and the game begins.</p><p>When working with Unity, you generally build up a project of several scenes. Each scene should be designed to host a relevant game phase such as the launching screen, the actual game levels, a "game over" scene, or anything you may need for your game.</p><p>It is important to learn how to switch between these scenes efficiently and how to create them in such a way that they remain manageable as the project grows.</p><p><code class="literal">DontDestroyOnLoad()</code> and <code class="literal">Application.LoadLevel()</code> are the most important functions used to actually build up such a system.</p></div></div>