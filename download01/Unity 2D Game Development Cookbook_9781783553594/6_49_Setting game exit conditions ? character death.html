<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch06lvl1sec58"></a>Setting game exit conditions – character death</h2></div></div><hr /></div><p>The prototype still lacks a <span class="strong"><strong>Heads-Up Display</strong></span> (<span class="strong"><strong>HUD</strong></span>)<a id="id375" class="indexterm"></a> completely. Heads-up display is a term used to refer to the collection of game information <a id="id376" class="indexterm"></a>that is available for the player on the screen.</p><p>Health bars, lives indicators, speed references, and position references are all examples of common game HUD elements.</p><p>For this prototype, we plan to display two types of information on the screen: the number of collectibles gathered from the beginning of the match, and the number of available lives before the game ends. It's not by chance that we chose these two elements, as they are linked to the relevant variables to decide whether the player is winning or losing the game.</p><p>Before we can work on a game interface, however, we need to define the two exit conditions for our game: the "game over" and the "game won" conditions.</p><p>The plan is to have the game sending a <span class="strong"><strong>Game Over</strong></span> message if the player loses three lives, and a <span class="strong"><strong>Game Won</strong></span> message if they gather five collectibles. Let's begin with setting the condition for losing the game.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec148"></a>Getting ready</h3></div></div></div><p>Let's say we want the player to lose a life whenever the character falls from a platform. This can be set up by adding a few lines to our <span class="strong"><strong>PlatManager</strong></span> script.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec149"></a>How to do it…</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Open <a id="id377" class="indexterm"></a>
<span class="strong"><strong>PlatManager</strong></span> in <span class="strong"><strong>Monodevelop</strong></span>.</p></li><li><p>In the <code class="literal">Start()</code> function, we already have a reference to the game character thanks to this line:</p><div class="informalexample"><pre class="programlisting">  thisChar = GameObject.Find("runner").GetComponent&lt;Transform&gt;();</pre></div><p>With this reference already set, we add a public variable to count the lives available to the player:</p><div class="informalexample"><pre class="programlisting">  public int lives;</pre></div></li><li><p>We also need a public <code class="literal">float</code> variable to store a reference value for our character's position. We will use it to check whether the character is falling:</p><div class="informalexample"><pre class="programlisting">harpublic float yOffsetC</pre></div></li><li><p>We now can set the value of lives and <code class="literal">yOffset</code> to their default values. Add these lines to the <code class="literal">Start()</code> function of the script:</p><div class="informalexample"><pre class="programlisting">  lives = 3;
yOffset = -37;</pre></div></li><li><p>Now scroll down to the <code class="literal">FixedUpdate()</code> function and add the following <code class="literal">if()</code> statement at the end of it. The <code class="literal">if()</code> statement check whether the character is falling down and, in case it does, it moves it back above the platform closest to it.</p><div class="informalexample"><pre class="programlisting">  if(thisChar.position.y &lt; -yOffset){
    
    lives -= 1;

    Vector3 v = new Vector3 (0,0,0);
    if(nextPlat){
      v = nextPlat.position;
    }
    else{
      v = actualPlat.position;
    }

    v.y += 40;
    thisChar.position = v;
  }</pre></div></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec150"></a>How it works…</h3></div></div></div><p>The <code class="literal">if()</code> statement <a id="id378" class="indexterm"></a>in <code class="literal">FixedUpdate()</code> checks at every frame the character's <span class="emphasis"><em>y</em></span> position. If this value goes beyond the threshold provided with <code class="literal">yOffset</code> (<code class="literal">-37</code> in our case), it means that the character is falling, so the script takes <code class="literal">1</code> away from the number of available lives and moves the character back to a safe position.</p></div></div>