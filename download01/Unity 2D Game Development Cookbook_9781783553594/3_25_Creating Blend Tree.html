<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec37"></a>Creating Blend Tree</h2></div></div><hr /></div><p>A very useful feature of the<a id="id214" class="indexterm"></a> Mecanim system is the <span class="strong"><strong>Blend Tree</strong></span>, which allows you to easily blend between two or more clips that can be controlled by a single <code class="literal">float</code> value. In fact, what if we plan to have our character switch between the idle, walk, and run states? With a <span class="strong"><strong>Blend Tree</strong></span>, we can have the character's speed value take control of the conditions to switch between them, more or less as we did to switch between walking and running.</p><p>Follow us with the next recipe to learn how to use <span class="strong"><strong>Blend Trees</strong></span>!</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec86"></a>Getting ready</h3></div></div></div><p>As we don't want to mess up the clips and transitions we created in the previous recipes, let's assume we are working with a clean animator controller. You can create a new one or clear the one we worked on before.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec87"></a>How to do it...</h3></div></div></div><p>Access the Animator panel in Unity.</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Right-click anywhere in the window (which should only contain the <span class="strong"><strong>Any State</strong></span> box) and select <span class="strong"><strong>From New Blend Tree </strong></span>under<span class="strong"><strong> Create State</strong></span>, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_03_20.jpg" /></div></li><li><p>Double-click on the <a id="id215" class="indexterm"></a>
<span class="strong"><strong>Blend Tree</strong></span> you just created to access its properties and configure it.</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_03_21.jpg" /></div></li><li><p>Move to <span class="strong"><strong>Inspector</strong></span> and<a id="id216" class="indexterm"></a> click on the small <span class="strong"><strong>+</strong></span> icon in the <span class="strong"><strong>Motion</strong></span> field. Then, select <span class="strong"><strong>Add Motion Field</strong></span> from the menu, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_03_22.jpg" /></div></li><li><p>Do this two more times, then<a id="id217" class="indexterm"></a> start dragging the animation clips from the project panel into the <span class="strong"><strong>Motion</strong></span> fields we just created in the order shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_03_23.jpg" /></div></li><li><p>We now need to<a id="id218" class="indexterm"></a> set the thresholds to decide at which speed the character stops being idle and goes walking, and from there to running. Click anywhere on the blue area representing the transitions to activate the <span class="strong"><strong>Threshold</strong></span> fields and type in these values, as shown in the following screenshot: <span class="strong"><strong>0.2</strong></span>, <span class="strong"><strong>0.5</strong></span>, and <span class="strong"><strong>0.6</strong></span>. The following screenshot shows the <span class="strong"><strong>Motion</strong></span> section displayed in the <span class="strong"><strong>Inspector</strong></span> window. Also, be sure that the <code class="literal">fSpeed</code> parameter we created before is selected from the <span class="strong"><strong>Parameter</strong></span> drop-down menu!</p><div class="mediaobject"><img src="/graphics/9781783553594/graphics/3594OT_03_24.jpg" /></div></li><li><p>You can check <a id="id219" class="indexterm"></a>the result in the <span class="strong"><strong>Preview</strong></span> window by clicking on the small play button. If the <span class="strong"><strong>no model is available</strong></span> message appears, simply drag the character model into the window.</p></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec88"></a>How it works...</h3></div></div></div><p>With the help of a <span class="strong"><strong>Blend Tree</strong></span>, we now have a very efficient way to control the animations of the character with regard to its speed. By checking its value, we can smoothly switch between idle, walk, and run. And it only took a few steps to achieve it!</p><p>We suggest you experiment with this tool and maybe repeat this last lesson to get more acquainted with <span class="strong"><strong>Blend Trees</strong></span>.</p></div></div>