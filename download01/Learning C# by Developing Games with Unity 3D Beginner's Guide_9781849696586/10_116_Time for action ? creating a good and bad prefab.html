<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch10lvl1sec114"></a>Time for action â€“ creating a good and bad prefab</h2></div></div><hr /></div><p>We need to create two prefabs. <a id="id464" class="indexterm"></a>The names aren't too important because <a id="id465" class="indexterm"></a> we'll be using tags in our code. The tag names are important, which are <code class="literal">GoodOrb</code> and <code class="literal">BadOrb</code>.</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Add two GameObjects of your choice.</p></li><li><p>I suggest naming them <code class="literal">GoodOrb</code> and <code class="literal">BadOrb.</code>
</p></li><li><p>To <span class="strong"><strong>GoodOrb</strong></span>, add a tag name of <code class="literal">GoodOrb.</code>
</p></li><li><p>To <span class="strong"><strong>BadOrb</strong></span>, add a tag name of <code class="literal">BadOrb.</code>
</p></li><li><p>Create a prefab of each.</p></li><li><p>Randomly add about 5 of each <span class="strong"><strong>prefab</strong></span> to <span class="strong"><strong>Scene1</strong></span> and <span class="strong"><strong>Scene2</strong></span>.</p></li><li><p>As an example, see the screenshot at the beginning of this chapter.</p></li></ol></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec162"></a>
<span class="emphasis"><em>What just happened?</em></span>
</h3></div></div></div><p>We now have the ability to increase our <span class="strong"><strong>Score</strong></span> or lose <span class="strong"><strong>Lives</strong></span>
</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch10lvl3sec13"></a>Scoring for the win</h4></div></div></div><p>All it takes to win is for the<a id="id466" class="indexterm"></a> value in the variable <code class="literal">score</code> to be 2.</p><p>To increase <code class="literal">score</code>, <span class="strong"><strong>Player</strong></span> will collide with a <span class="strong"><strong>GoodOrb</strong></span> which increases <code class="literal">score</code> by 1, and <span class="strong"><strong>GoodOrb</strong></span> will disappear from the <span class="strong"><strong>Scene</strong></span>.</p><div class="mediaobject"><img src="/graphics/9781849696586/graphics/6586OT_10_17.jpg" /></div><p>An analysis of the <a id="id467" class="indexterm"></a>code we saw in the preceding code screenshot is as follows:</p><p>Line 38: <code class="literal">void OnTriggerEnter(Collider other)</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>This is a copy and paste from the example code in the <span class="strong"><strong>Scripting Reference</strong></span>
</p></li><li style="list-style-type: disc"><p>The <span class="strong"><strong>Player Box Collider </strong></span>is check as being <span class="strong"><strong>Is Trigger</strong></span>
</p></li><li style="list-style-type: disc"><p>When the <span class="strong"><strong>Player Box Collider</strong></span> runs into the another GameObject with a <span class="strong"><strong>Collider</strong></span>, Unity calls the <code class="literal">OnTriggerEnter()</code> method</p></li><li style="list-style-type: disc"><p>The variable <code class="literal">other</code> now stores a reference to the <span class="strong"><strong>Collider</strong></span> that <span class="strong"><strong>Player</strong></span> ran into</p></li></ul></div><p>Line 40: <code class="literal">if(other.gameObject.tag == "GoodOr</code>
<code class="literal">b")</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>We are checking to see if the GameObject that the <code class="literal">other</code> <span class="strong"><strong>Collider</strong></span> is attached to has a <span class="strong"><strong>tag</strong></span> named <code class="literal">GoodOrb</code>
</p></li></ul></div><p>Line 42: <code class="literal">gameDataRef.score += </code>
<code class="literal">1;C</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<code class="literal">score</code> is increased by 1</p></li></ul></div><p>Line 43: <code class="literal">Destroy(other.gameObjec</code>
<code class="literal">t);</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>The <code class="literal">Destroy()</code> method is removing <span class="strong"><strong>GoodOrb</strong></span> from the <span class="strong"><strong>Scene</strong></span>
</p></li></ul></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch10lvl3sec14"></a>Losing when Player crashes</h4></div></div></div><p>All it takes to lose is for<a id="id468" class="indexterm"></a> the value in the variable <code class="literal">playerLives</code> to be 0.</p><p>To decrease <code class="literal">playerLives</code>, <span class="strong"><strong>Player</strong></span> will collide with a <span class="strong"><strong>BadOrb</strong></span>. The <code class="literal">playerLives</code> variable will decrease by 1, and the <span class="strong"><strong>BadOrb</strong></span> will disappear from the <span class="strong"><strong>Scene</strong></span>.</p><div class="mediaobject"><img src="/graphics/9781849696586/graphics/6586OT_10_18.jpg" /></div><p>An analysis of the code<a id="id469" class="indexterm"></a> we saw in the preceding code screenshot is as follows:</p><p>This code is similar to <code class="literal">OnTriggerEnter()</code>. However, since we are using <code class="literal">OnCollisionEnter()</code>, we have to use a <span class="strong"><strong>Collider</strong></span> that does not have <span class="strong"><strong>Is Trigger</strong></span> checked. The child object of <span class="strong"><strong>Player</strong></span> is the <span class="strong"><strong>Sphere</strong></span> which has a <span class="strong"><strong>Box Collider</strong></span>. When this <span class="strong"><strong>Collider</strong></span> crashes into a <span class="strong"><strong>BadOrb</strong></span>, <span class="strong"><strong>Player</strong></span> will lose a life.</p><p>Line 47: <code class="literal">void OnCollisionEnter(Collision collidedWith)</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>When <span class="strong"><strong>Player</strong></span> runs into another GameObject with a <span class="strong"><strong>Collider</strong></span> that is not a trigger, Unity automatically calls <code class="literal">OnCollisionEnter()</code>
</p></li><li style="list-style-type: disc"><p>The <code class="literal">collidedWith</code> variable now stores a reference to the <code class="literal">other</code> <span class="strong"><strong>Collider</strong></span> that <span class="strong"><strong>Player</strong></span> ran into</p></li><li style="list-style-type: disc"><p>Notice that <code class="literal">collidedWith</code> is a <code class="literal">Collision</code> type, not a <span class="strong"><strong>Collider</strong></span>
</p></li><li style="list-style-type: disc"><p>
<code class="literal">Collisions</code>, as opposed to triggers, require using the <code class="literal">Collision</code> class</p></li></ul></div><p>Line 49: <code class="literal">if(collidedWith.gameObject.tag == "BadOrb")</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>This checks if the GameObject <span class="strong"><strong>Player</strong></span> collided with has a tag named <code class="literal">BadOrb</code>
</p></li></ul></div><p>Line 51: <code class="literal">gameDataRef.playerLives -= 1;</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<code class="literal">playerLives</code> is decreased by 1</p></li></ul></div><p>Line 52: <code class="literal">Destroy(collidedWith.gameObject);</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>The <code class="literal">Destroy()</code> method removes <span class="strong"><strong>BadOrb</strong></span> from the <span class="strong"><strong>Scene</strong></span>
</p></li></ul></div><p>There is a way to increase <span class="strong"><strong>Player Lives</strong></span>. By shooting a <span class="strong"><strong>BadOrb</strong></span>, the variable <code class="literal">playerLives</code> will be increased by 1. It also turns a <span class="strong"><strong>BadOrb</strong></span> into a <span class="strong"><strong>GoodOrb</strong></span>.</p></div></div></div>