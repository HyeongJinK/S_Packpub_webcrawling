<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch07lvl1sec72"></a>Understanding the concepts of a State Machine</h2></div></div><hr /></div><p>The beauty of a <a id="id217" class="indexterm"></a>State Machine lies in its simplicity, and you are already familiar with the concept. You probably spent at least the first 14 years, maybe more, of your life living in a State Machine environment; you just didn't know that it was a State Machine at the time.</p><p>As a child, your parents were always making you take a bath, go to school, do your homework, go to sleep, and whatever else you always had to do. When you were in school, you were in the school State. Were you allowed to do anything else? While sleeping, you were in your sleep State. Were you allowed to do anything else? How about the do your homework State?</p><p>The idea of being in a certain State is that you can only do what's allowed in that particular State, but you do it very well. When you put a computer program in a particular State, it will stay in that State doing only what it's supposed to do until it's told to change to another State. This is exactly what you want to do in Unity, put your game into a particular State to perform the specific behaviors you desire.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec103"></a>Benefits of by using a State Machine</h3></div></div></div><p>The following are <a id="id218" class="indexterm"></a>the benefits of<a id="id219" class="indexterm"></a> using a State Machine:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>A very clean layout or map of the game control</p></li><li style="list-style-type: disc"><p>Very clear points to add game functionality or features</p></li><li style="list-style-type: disc"><p>Cleaner, smaller, and very specific code in each State</p></li><li style="list-style-type: disc"><p>It is easy to extend game logic by simply adding another State</p></li></ul></div><p>The primary benefit of using a State Machine is for code organization. Typically, a game may start off being simple and following the code flow is easy. Unfortunately, games don't seem to stay simple. Features are added, code has to be changed with <code class="literal">if</code> statement after <code class="literal">if</code> statement added to control the game logic. It turns into a nightmare just trying to to keep track of where a specific pieces of code may be located. You'd probably add more Components to GameObjects to try to make the logic sensible. Even worse would be the use of global variables to pass data around to Components. Then you have to keep track of which Components access which global variables and hope the data stored is what you think it is at the time you access it. Trying to follow the logic  ends up being like a bowl of spaghetti.</p><p>Doesn't it make sense to use the capabilities of C# to create specific State objects to keep game logic well organized, instead of attaching Components to GameObjects filled with the spaghetti code?</p><p>The following  diagram is the basic concept of a State Machine<a id="id220" class="indexterm"></a> for controlling a Unity project:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Unity calls the <code class="literal">Update()</code> method every frame</p></li><li style="list-style-type: disc"><p>The <code class="literal">StateManager</code> script is the heart of the State Machine, a Component that has the <code class="literal">Update()</code> method</p></li><li style="list-style-type: disc"><p>The code block of <code class="literal">Update()</code> delegates (transfers) control to the State that is active</p></li><li style="list-style-type: disc"><p>States are regular C# instance objects and not GameObject Components</p></li><li style="list-style-type: disc"><p>The active State determines what is displayed, and therefore, is the logic controller of your game</p></li><li style="list-style-type: disc"><p>The active State decides when and which State will be active next:</p></li></ul></div><div class="mediaobject"><img src="/graphics/9781849696586/graphics/6586OT_07_01.jpg" /></div></div></div>