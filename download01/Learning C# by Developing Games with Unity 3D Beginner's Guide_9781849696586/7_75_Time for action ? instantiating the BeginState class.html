<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch07lvl1sec76"></a>Time for action â€“ instantiating the BeginState class</h2></div></div><hr /></div><p>We are going to instantiate<a id="id253" class="indexterm"></a> the <code class="literal">BeginState</code> class to create an instance object in the memory. This will demonstrate how objects are created. Before we can do this, we first need to attach the <code class="literal">StateManager</code> script to a GameObject. To do so, perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Attach the <code class="literal">StateManager</code> script to the <span class="strong"><strong>Main Camera</strong></span> GameObject.</p></li><li><p>Click on <span class="strong"><strong>Play</strong></span> to show the results in the <span class="strong"><strong>Console</strong></span> as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849696586/graphics/6586OT_07_07.jpg" /></div></li></ol></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec110"></a>
<span class="emphasis"><em>What just happened?</em></span>
</h3></div></div></div><p>The <code class="literal">BeginState()</code> method<a id="id254" class="indexterm"></a> in the <code class="literal">BeginState</code> class is a special method known as a constructor. It serves the same purpose as the <code class="literal">Start()</code> method or the <code class="literal">Awake()</code> method in a Unity script to initialize any member variables in the instance object created.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note41"></a>Note</h3><p>A constructor method does not have a return type, not even <code class="literal">void</code>.</p></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>I didn't have any variables to initialize, so I just sent a message to the <span class="strong"><strong>Console</strong></span>. You could see that this method was actually called. See the first step in the previous screenshot.</p></li><li style="list-style-type: disc"><p>The second step in the previous screenshot shows that the value stored in the <code class="literal">activeState</code> variable is a reference to an instance object of the <code class="literal">BeginState</code> class.</p></li></ul></div><p>The following <a id="id255" class="indexterm"></a>is the code analysis on various classes:</p><p>An analysis of the code shown in the preceding code screenshot is as follows: On <code class="literal">StateManager</code> class</p><p>Line 6: <code class="literal">private BeginState activeState;</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>The <code class="literal">activeState</code> is a variable that can store a reference to an object of type <code class="literal">BeginState</code>
</p></li><li style="list-style-type: disc"><p>The <code class="literal">activeState</code> variable is private because you don't want any external code to change the stored value</p></li></ul></div><p>Line 10: <code class="literal">activeState = new BeginState();</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>The <code class="literal">new</code> operator is how you create an instance of a class</p></li><li style="list-style-type: disc"><p>This means an instance of <code class="literal">BeginState</code> has been created in memory</p></li><li style="list-style-type: disc"><p>Code flow now jumps over to line 7 in the <code class="literal">BeginState</code> class</p></li></ul></div><p>An analysis of the code shown in the preceding code screenshot is as follows:On <code class="literal">BeginState</code> class</p><p>Line 7: <code class="literal">public BeginState()</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>This is a constructor to initialize any member variables in the newly created instance of the <code class="literal">BeginState</code> class</p></li><li style="list-style-type: disc"><p>A constructor method name is the same as the class name</p></li></ul></div><p>Line 9: <code class="literal">Debug.Log("Constructing BeginState");</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>This line is just sending a text message to the Unity <span class="strong"><strong>Console</strong></span> to show that the constructor was called when the instance object was created</p></li><li style="list-style-type: disc"><p>This method is now finished and code flow returns back to <code class="literal">StateManager</code> line 10</p></li></ul></div><p>An analysis of the code shown in the preceding code screenshot is as follows:On <code class="literal">StateManager</code> class</p><p>Line 10: <code class="literal">activeState = new BeginState();</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>A reference to the <code class="literal">BeginState</code> instance object is assigned to the variable <code class="literal">activeState</code>
</p></li></ul></div><p>Line 11: <code class="literal">Debug.Log("This object is of type: " + activeState);</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>This message<a id="id256" class="indexterm"></a> is sent to the Unity <span class="strong"><strong>Console</strong></span> to show you that <code class="literal">activeState</code> does reference an instance object of the <code class="literal">BeginState</code> class</p></li></ul></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch07lvl3sec02"></a>Specifying a file's location with a namespace declaration</h4></div></div></div><p>Earlier you <a id="id257" class="indexterm"></a>changed line<a id="id258" class="indexterm"></a> 3 in <code class="literal">BeginState</code>. What is<a id="id259" class="indexterm"></a> this <code class="literal">namespace</code> on line 3?</p><p>If you look up namespace on the Internet, you might be overwhelmed with explanations. For writing classes in Unity, I'll boil it down to this:</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note42"></a>Note</h3><p>A <code class="literal">namespace</code> declares where a class file is located in the Unity <span class="strong"><strong>Project</strong></span> folder structure.</p></div><p>For coding in the Unity environment, that's really all you need to know.</p><p>The <code class="literal">BeginState</code> file is in the <code class="literal">States</code> folder, which is a subfolder of the <code class="literal">Code</code> folder, which in turn is a subfolder of the <code class="literal">Assets</code> folder. It's a lot easier to use the Dot Syntax to express this location like this: <code class="literal">Assets.Code.States</code>. Therefore, line 3 declares this, and the whole <code class="literal">BeginState</code> class definition is in the <code class="literal">namespace</code> code block.</p><p>Now that this location has been declared in <code class="literal">BeginState</code>, any other class that wants to use <code class="literal">BeginState</code> has to specify this same location, otherwise it won't be found.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note43"></a>Note</h3><p>If you move the file to a different folder, you will have to change the <code class="literal">namespace</code> as well.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch07lvl3sec03"></a>Locating code files with a using statement</h4></div></div></div><p>Look at <code class="literal">StateManager</code>. You <a id="id260" class="indexterm"></a>added <code class="literal">using</code> <code class="literal">Assets.Code.States</code> on line 2. This<a id="id261" class="indexterm"></a> means <a id="id262" class="indexterm"></a>you can use any class file that resides at that location. Right now you only have <code class="literal">BeginState</code> there, but you will be adding more States later.</p></div></div></div>