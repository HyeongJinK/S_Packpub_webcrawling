<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch09lvl1sec102"></a>Time for action – changing the color using GUI buttons</h2></div></div><hr /></div><p>Once again, we will add some code to <code class="literal">PlayerControl</code> and to the <code class="literal">ShowIt()</code> method of <code class="literal">SetupState</code>. We will be <a id="id401" class="indexterm"></a>creating five GUI buttons to change colors. While we're at it, we'll also create a GUI label to tell the user to press the Space bar to pause Player rotation, and modify the button to switch States.</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>The following screenshot is of the <code class="literal">PlayerControl</code> script. Add the code shown in the red boxes:</p><div class="mediaobject"><img src="/graphics/9781849696586/graphics/6586OT_09_11.jpg" /></div></li><li><p>The next <a id="id402" class="indexterm"></a>screenshot is of the <code class="literal">ShowIt()</code> method of <code class="literal">SetupState</code>. Write your<a id="id403" class="indexterm"></a> code as shown:</p><div class="mediaobject"><img src="/graphics/9781849696586/graphics/6586OT_09_12.jpg" /></div></li></ol></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl2sec148"></a>
<span class="emphasis"><em>What just happened?</em></span>
</h3></div></div></div><p>Let us analyze the<a id="id404" class="indexterm"></a> code shown in the<a id="id405" class="indexterm"></a> previous two screenshots:</p><p>In <code class="literal">PlayerControl</code>:</p><p>Line 8: <code class="literal">public Color red = Color.red;</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>The variable <code class="literal">red</code> will store a value of type <code class="literal">Color</code>
</p></li><li style="list-style-type: disc"><p>The <code class="literal">red</code> variable is <code class="literal">public</code> so that it will show in the <span class="strong"><strong>Inspector</strong></span> to modify the color</p></li><li style="list-style-type: disc"><p>The <code class="literal">red</code> variable needs to be accessed externally by <code class="literal">SetupState</code>
</p></li></ul></div><p>Lines 9 through 12:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>These are similar to line 8, just different colors</p></li></ul></div><p>In <code class="literal">SetupState</code>:</p><p>Line 31: <code class="literal">GUI.Box(new Rect(10,10,100,180), "Player Color");</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>This draws a rectangular box with a title of <span class="strong"><strong>Player Color</strong></span>
</p></li><li style="list-style-type: disc"><p>This provides a background for the buttons</p></li><li style="list-style-type: disc"><p>The example in the <span class="strong"><strong>Scripting Reference</strong></span> is very similar</p></li></ul></div><p>Line 33: <code class="literal">if(GUI.Button(new Rect(20,40,80,20), "Red"))</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>The <code class="literal">GUI.Button()</code> method draws a button on the screen with a title of <span class="strong"><strong>Red</strong></span>
</p></li><li style="list-style-type: disc"><p>This <code class="literal">if</code> statement detects when the button is clicked</p></li><li style="list-style-type: disc"><p>When the button<a id="id406" class="indexterm"></a> is clicked, <code class="literal">GUI.Button()</code> returns a value of <code class="literal">true</code>
</p></li><li style="list-style-type: disc"><p>Again, this is <a id="id407" class="indexterm"></a>very similar to the example in the <span class="strong"><strong>Scripting Reference</strong></span>
</p></li></ul></div><p>Line 34: <code class="literal">controller.PickedColor(controller.red);</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Using Dot Syntax, the value stored in the variable <code class="literal">controller</code> is a reference to <code class="literal">PlayerControl</code>—the Component attached to <span class="strong"><strong>Player</strong></span>
</p></li><li style="list-style-type: disc"><p>The <code class="literal">PickedColor()</code> method on <code class="literal">PlayerControl</code> is called</p></li><li style="list-style-type: disc"><p>The argument, <code class="literal">controller.red</code>, is retrieving the value stored in the variable <code class="literal">red</code> in <code class="literal">PlayerControl</code>, which is the RGBA code for the color red</p></li><li style="list-style-type: disc"><p>This value is being passed to the <code class="literal">PickedColor()</code>method and assigned to the parameter variable <code class="literal">playerColor</code>
</p></li></ul></div><p>In <code class="literal">PlayerControl</code>:</p><p>Line 24: <code class="literal">public void PickedColor (Color playerColor)</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>This is a method we create that will perform the color changing</p></li><li style="list-style-type: disc"><p>It takes one parameter, <code class="literal">Color</code>, that will come from calling this method in <code class="literal">SetupState</code> (see lines 34, 37, and so on, in <code class="literal">SetupState</code>)</p></li><li style="list-style-type: disc"><p>This method is <code class="literal">public</code> because <code class="literal">SetupState</code> needs to access it</p></li></ul></div><p>Line 26: <code class="literal">renderer.material.color =  playerColor;</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Every mesh that will be visible will have a <span class="strong"><strong>Mesh Renderer</strong></span> Component object</p></li><li style="list-style-type: disc"><p>The variable <code class="literal">renderer</code> stores a reference of the <span class="strong"><strong>Mesh Renderer</strong></span> object</p></li><li style="list-style-type: disc"><p>The variable <code class="literal">material</code> stores a reference of the material applied to the mesh</p></li><li style="list-style-type: disc"><p>The variable <code class="literal">color</code> stores the color applied to the material</p></li><li style="list-style-type: disc"><p>The <code class="literal">playerColor</code> variable stores the color received from <code class="literal">SetupState</code> calling the <code class="literal">PickedColor()</code> method<a id="id408" class="indexterm"></a>
</p></li></ul></div><p>The color of the mesh is now set until the game restarts.</p><p>In <code class="literal">SetupState</code>:</p><p>Lines 36 through 46:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>These behave exactly the same as line 33, except the colors are different</p></li></ul></div><p>Line 48: <code class="literal">GUI.Label(new Rect(Screen.width/2 -110, Screen.height - 100, 220, 40), "Hold Spacebar to pause rotation");</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Lines 48 and 49 are a single statement. Since it's so long, it was put on two lines.</p></li><li style="list-style-type: disc"><p>This is just a label displayed below the spinning <span class="strong"><strong>Player</strong></span> to let the user know to press the Space bar to pause the spinning.</p></li></ul></div><p>Line 51: <code class="literal">if (GUI.Button(new Rect(Screen.width/2 -100, Screen.height - 50, 200, 40), "Click Here or Press 'P' to Play ") ||  Input.GetKeyUp(KeyCode.P))</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Lines 51 and 52 are a single <code class="literal">if</code> statement</p></li><li style="list-style-type: disc"><p>If the <span class="strong"><strong>GUI</strong></span> button is <a id="id409" class="indexterm"></a>clicked or the <span class="emphasis"><em>P</em></span> key is pressed, line 54 is executed to switch States</p></li></ul></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl2sec149"></a>Adding the Lives option for Player</h3></div></div></div><p>The game will be lost by <a id="id410" class="indexterm"></a>the Player losing all its <span class="strong"><strong>Lives</strong></span>. The game will start with <span class="strong"><strong>Player</strong></span> having 5, 10, or a 1000 <span class="strong"><strong>Lives</strong></span>. The 1000 number is just a high <a id="id411" class="indexterm"></a>number so that essentially the game isn't lost, at least for a very long time. That's why I called the button <span class="strong"><strong>Can't Lose</strong></span>.</p></div></div>