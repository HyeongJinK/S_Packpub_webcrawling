<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch08lvl1sec84"></a>Time for action â€“ modifying PlayState to add another State</h2></div></div><hr /></div><p>We still don't have any <a id="id301" class="indexterm"></a>game logic to call for State switching, so we'll just simulate being killed in the game by detecting when the <span class="emphasis"><em>Return</em></span>/<span class="emphasis"><em>Enter</em></span> key is pressed. Add another <code class="literal">if</code> statement in the <code class="literal">StateUpdate</code>() method of <code class="literal">PlayState</code>, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849696586/graphics/6586OT_08_09.jpg" /></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec120"></a>
<span class="emphasis"><em>What just happened?</em></span>
</h3></div></div></div><p>That's it. That's all it takes to add another State. Simply call the <code class="literal">SwitchState()</code> method to instantiate any State class you wish.</p><p>The following is the <span class="strong"><strong>Console</strong></span> output when you press <span class="emphasis"><em>Return</em></span>/<span class="emphasis"><em>Enter</em></span> while in <code class="literal">PlayState</code>:</p><div class="mediaobject"><img src="/graphics/9781849696586/graphics/6586OT_08_10.jpg" /></div><p>What happens <a id="id302" class="indexterm"></a>if you press the <span class="emphasis"><em>Return</em></span>/<span class="emphasis"><em>Enter</em></span> key while in any of the other States? Nothing, of course. There's no code for the <span class="emphasis"><em>Return</em></span>/<span class="emphasis"><em>Enter</em></span> key<a id="id303" class="indexterm"></a> in the other States.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note52"></a>Note</h3><p>This maybe a simple example, but it demonstrates how each State has its own controlling game code.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec121"></a>Adding OnGUI to the StateManager class</h3></div></div></div><p>The <a id="id304" class="indexterm"></a>
<code class="literal">IStateBase</code> interface requires that each State class have the <code class="literal">ShowIt()</code> method. The <code class="literal">ShowIt()</code> method will also<a id="id305" class="indexterm"></a> be called from the <code class="literal">StateManager</code>. It's time to connect this method with the <code class="literal">StateManager</code> code.</p><p>The <code class="literal">StateManager</code> class needs <a id="id306" class="indexterm"></a>to have Unity's <code class="literal">OnGUI()</code> method. Just the way the <code class="literal">UpDate()</code> method transfers control to the <code class="literal">StateUpdate()</code> method on the active State, the <code class="literal">OnGUI()</code> method transfers control to the <code class="literal">ShowIt()</code> method on the active State as well.</p><div class="mediaobject"><img src="/graphics/9781849696586/graphics/6586OT_08_11.jpg" /></div></div></div>