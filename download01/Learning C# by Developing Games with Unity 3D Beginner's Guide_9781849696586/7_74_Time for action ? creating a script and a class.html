<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch07lvl1sec75"></a>Time for action â€“ creating a script and a class</h2></div></div><hr /></div><p>We are going<a id="id237" class="indexterm"></a> to <a id="id238" class="indexterm"></a>create the <code class="literal">StateManager</code> script and the <code class="literal">BeginState</code> <a id="id239" class="indexterm"></a>class, then add some code so that we can<a id="id240" class="indexterm"></a> instantiate <code class="literal">BeginState</code> to make an instance of <code class="literal">BeginState</code>. With the help of the next screenshot, perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>In the Unity <span class="strong"><strong>Project</strong></span> window, create a <span class="strong"><strong>C# Script</strong></span> in the <code class="literal">Scripts</code> folder.</p></li><li><p>Name the script <code class="literal">StateManager</code>.</p></li><li><p>Double-click on <code class="literal">StateMana</code>
<code class="literal">ger</code> to open it in MonoDevelop.</p></li><li><p>In the MonoDevelop <span class="strong"><strong>Solution</strong></span> window, right-click on the <code class="literal">Code</code> folder and select <span class="strong"><strong>Add</strong></span> | <span class="strong"><strong>New Folder</strong></span>.</p></li><li><p>Name the folder <code class="literal">States</code>.</p></li><li><p>Right-click on the <code class="literal">States</code> folder and select <span class="strong"><strong>Add</strong></span> | <span class="strong"><strong>New File</strong></span>.</p></li><li><p>In the <span class="strong"><strong>New File</strong></span> window, select <span class="strong"><strong>General</strong></span> | <span class="strong"><strong>Empty Class</strong></span>.</p></li><li><p>In the <span class="strong"><strong>Name</strong></span> field at the bottom, enter <code class="literal">BeginState</code>.</p></li><li><p>Click on the <span class="strong"><strong>New</strong></span> button to create the <code class="literal">class</code> file.</p></li></ol></div><p>The following screenshot is the <span class="strong"><strong>Solution</strong></span> window of MonoDevelop:</p><div class="mediaobject"><img src="/graphics/9781849696586/graphics/6586OT_07_04.jpg" /></div><p>With the <code class="literal">BeginState</code> class file open in MonoDevelop, make the changes as shown in the next screenshot:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Change line 1 to <code class="literal">using UnityEngine;</code>.</p></li><li><p>Change line 3 to <code class="literal">namespace Assets.Code.States</code>.</p></li><li><p>Add line 9<code class="literal"> Debug.Log("Constructing BeginState");</code>.</p></li></ol></div><p>Now the<a id="id241" class="indexterm"></a> <code class="literal">BeginState</code> class<a id="id242" class="indexterm"></a> file should look like the following<a id="id243" class="indexterm"></a> screenshot, except for <code class="literal">//Constructor</code> on line <a id="id244" class="indexterm"></a>7 which I added as a visual aid:</p><div class="mediaobject"><img src="/graphics/9781849696586/graphics/6586OT_07_05.jpg" /></div><p>Open <code class="literal">StateManager</code> in MonoDevelop, and make the following changes:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Add on line 2 <code class="literal">using Assets.Code.States;.</code>
</p></li><li><p>Press <span class="emphasis"><em>Return</em></span>/<span class="emphasis"><em>Enter</em></span> so that line 3 is blank.</p></li><li><p>Add line 6 <code class="literal">private BeginState activeState;</code>.</p></li><li><p>In the <code class="literal">Start()</code> method code block, add line 10 <code class="literal">activeState = new BeginState();</code>.</p></li><li><p>Add line 11 <code class="literal">Debug.Log("This object is of type: " + activeState);</code>.</p></li><li><p>Save the file.</p></li></ol></div><p>The <code class="literal">StateManager</code> class <a id="id245" class="indexterm"></a>file <a id="id246" class="indexterm"></a>should look like the <a id="id247" class="indexterm"></a>following<a id="id248" class="indexterm"></a> screenshot:</p><div class="mediaobject"><img src="/graphics/9781849696586/graphics/6586OT_07_06.jpg" /></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec109"></a>
<span class="emphasis"><em>What just happened?</em></span>
</h3></div></div></div><p>In the Unity script, <code class="literal">StateManager</code>, we are instantiating the <code class="literal">BeginState</code> class and storing a reference of (pointing to in memory) this new <code class="literal">BeginState</code> object in the variable <code class="literal">activeState</code>.</p><p>This basic process of creating objects will be used in the State Machine to switch from one State to another State. Instantiating classes is also what Unity is doing when it creates Components.</p><p>As an example, in the<span class="strong"><strong> Scripting Reference</strong></span>, search for and select <span class="strong"><strong>GameObject</strong></span>. You will see a variable listed named <code class="literal">transform</code>. When you click on <span class="strong"><strong>Play</strong></span>, Unity instantiates the <code class="literal">Transform</code> class and stores a reference to the <code class="literal">Transform</code> Components object in the <code class="literal">transform</code> variable.</p><p>This <a id="id249" class="indexterm"></a>means<a id="id250" class="indexterm"></a> that if you need to<a id="id251" class="indexterm"></a> access<a id="id252" class="indexterm"></a> the data for a GameObject's <code class="literal">Transform</code> Components, you can simply use the <code class="literal">transform</code> variable instead of having to use the <code class="literal">GetComponent&lt;Transform&gt;()</code> method.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note40"></a>Note</h3><p>As a little refresher, <code class="literal">Transform</code> is the name of the class file; <code class="literal">transform</code> is the name of the variable that will store a reference to the <code class="literal">Transform</code> object created when you click on <span class="strong"><strong>Play</strong></span>.</p></div><p>This is exactly the same thing you are doing with the files you just created. The <code class="literal">BeginState</code> is the name of the class file. The <code class="literal">activeState</code> is the name of the variable that will store a reference to the to the <code class="literal">BeginState</code> object created when you click on <span class="strong"><strong>Play</strong></span>.</p></div></div>