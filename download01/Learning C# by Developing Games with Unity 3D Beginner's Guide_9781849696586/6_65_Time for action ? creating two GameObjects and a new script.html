<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch06lvl1sec67"></a>Time for action – creating two GameObjects and a new script</h2></div></div><hr /></div><p>I want you to create one <a id="id198" class="indexterm"></a>script that will be attached to two GameObjects. The script will have two methods that will cause the GameObjects to rotate left and right. This will show you that from a single script file, two separate Component objects will be created in the memory. Each Component object is a separate instance object with no absolutely knowledge of the other.</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>In your <span class="strong"><strong>Scene</strong></span>, create two GameObjects, <code class="literal">Capsule</code> and <code class="literal">Cube</code>.</p></li><li><p>Add a <span class="strong"><strong>Directional Light</strong></span> to the <span class="strong"><strong>Scene</strong></span> so you can easily see the GameObjects.</p></li><li><p>Here's my <span class="strong"><strong>Scene</strong></span> as an example:</p><div class="mediaobject"><img src="/graphics/9781849696586/graphics/6586OT_06_11.jpg" /></div></li><li><p>Create a new C# Script and name it Spinner.</p></li><li><p>Code the script as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849696586/graphics/6586OT_06_12.jpg" /></div></li><li><p>Attach the <code class="literal">Spinner</code> <a id="id199" class="indexterm"></a>script to the <span class="strong"><strong>Capsule</strong></span> and the <span class="strong"><strong>Cube</strong></span> GameObjects.</p></li><li><p>Modify <code class="literal">LeaningScript</code> as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849696586/graphics/6586OT_06_13.jpg" /></div></li><li><p>Save the <a id="id200" class="indexterm"></a>file.</p></li><li><p>In Unity, click on <span class="strong"><strong>Play</strong></span>.</p></li></ol></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec99"></a>
<span class="emphasis"><em>What just happened?</em></span>
</h3></div></div></div><p>Here's the output to the <span class="strong"><strong>Console</strong></span>:</p><div class="mediaobject"><img src="/graphics/9781849696586/graphics/6586OT_06_14.jpg" /></div><p>Now press the left and right arrow keys to make the Capsule spin, and the up and down arrow keys to make the Cube spin.</p><p>You created one <a id="id201" class="indexterm"></a>script named <code class="literal">Spinner</code>, then attached the script to two separate GameObjects. When you click on <span class="strong"><strong>Play</strong></span>, two separate <code class="literal">Spinner</code> Component objects are created in the computer memory. This is an example of how the <code class="literal">Spinner</code> class is just a blueprint, a description, of what each Component object created will be.</p><p>To access each <code class="literal">Spinner</code> Component from the <code class="literal">LearningScript</code> Component, you need to know about each GameObject that the <code class="literal">Spinner</code> Component is attached to.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note34"></a>Note</h3><p>This code is just a simple demonstration to show how Dot Syntax works. In real life, you may have each Component detect user input. On the other hand, perhaps you may want a class dedicated to processing user input. That's the neat thing about writing code, there are a zillion ways to accomplish a task.</p></div><p>An analysis of the code shown in the previous code screenshot is as follows:</p><p>On <code class="literal">LearningScript</code>:</p><p>Line 6: <code class="literal">GameObject capsuleGO;</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>A <a id="id202" class="indexterm"></a>variable of type <code class="literal">GameObject</code> is declared</p></li><li style="list-style-type: disc"><p>The value this will store is a reference to the <span class="strong"><strong>Capsule</strong></span> in the <span class="strong"><strong>Scene</strong></span>
</p></li></ul></div><p>Line 7: <code class="literal">Spinner cubeComp;</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>A variable of type <code class="literal">Spinner</code> is declared</p></li><li style="list-style-type: disc"><p>The value this will store is a reference to a <code class="literal">Spinner</code> Component object created from the <code class="literal">Spinner</code> class</p></li></ul></div><p>Line 9: <code class="literal">void Start()</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>The <code class="literal">Start()</code> method is used to allow the two variables to be initialized</p></li><li style="list-style-type: disc"><p>Remember, this method is called only once</p></li></ul></div><p>Line 11: <code class="literal">capsuleGO = GameObject.Find("Capsule");</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>The <code class="literal">Find()</code> method of the <code class="literal">GameObject</code> class locates a GameObject in our <span class="strong"><strong>Scene</strong></span>
</p></li><li style="list-style-type: disc"><p>The reference to the <span class="strong"><strong>Capsule</strong></span> GameObject is assigned to the variable <code class="literal">capsuleGO</code>
</p></li><li style="list-style-type: disc"><p>This is item 5 in the previous graphic and also on the previous code screenshot</p></li></ul></div><p>Line 12: <code class="literal">Debug.Log(capsuleGO);</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>This line was added just to show that the <span class="strong"><strong>Capsule</strong></span> GameObject is in fact referenced in the variable <code class="literal">capsuleGO</code>
</p></li></ul></div><p>Line 13: <code class="literal">cubeComp = GameObject.Find("Cube").GetComponent&lt;Spinner&gt;();</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>This line shows how to retrieve a Component on a GameObject</p></li><li style="list-style-type: disc"><p>This retrieved reference to the <code class="literal">Spinner</code> Component object is on the <span class="strong"><strong>Cube</strong></span> GameObject</p></li><li style="list-style-type: disc"><p>This is <a id="id203" class="indexterm"></a>item 6 on the previous graphic and also on the previous code screenshot</p></li></ul></div><p>Line 14: <code class="literal">Debug.Log(cubeComp);</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>This line was added just to show that the <code class="literal">Spinner</code> Component is part of the <span class="strong"><strong>Cube</strong></span> GameObject, and is in fact referenced in the variable <code class="literal">cubeComp</code>
</p></li></ul></div><p>Line 19: <code class="literal">if(Input.GetKey(KeyCode.LeftArrow)</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>This <code class="literal">if</code> statement checks to see if the user has pressed the left arrow key</p></li><li style="list-style-type: disc"><p>If pressed, Line 21 of the code block is executed</p></li></ul></div><p>Line 21: <code class="literal">capsuleGO.GetComponent&lt;Spinner&gt;().SpinLeft();</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>This line shows using Dot Syntax to locate a method in a Component of another GameObject.</p></li><li style="list-style-type: disc"><p>The <code class="literal">CapsuleGO</code> variable substitutes the reference to the <span class="strong"><strong>Capsule</strong></span> GameObject</p></li><li style="list-style-type: disc"><p>The <code class="literal">Spinner</code> Component object is located on the <span class="strong"><strong>Capsule</strong></span> GameObject</p></li><li style="list-style-type: disc"><p>The <code class="literal">SpinLeft()</code> method is called in the <code class="literal">Spinner</code> Component of the <span class="strong"><strong>Capsule</strong></span> GameObject</p></li><li style="list-style-type: disc"><p>Code flow now jumps to the <code class="literal">Spinner</code> Component object</p></li></ul></div><p>Spinner (on the Capsule):</p><p>Line 6: <code class="literal">public void SpinLeft()</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>This is the <code class="literal">SpinLeft()</code> method called from the <code class="literal">LearningScript</code> object</p></li><li style="list-style-type: disc"><p>Line 8 in the code block is executed</p></li></ul></div><p>Line 8: <code class="literal">transform.Rotate(0, 0, 60 * Time.deltaTime);</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>The <code class="literal">Rotate()</code> method on the <code class="literal">Transform</code> Component object is called which <a id="id204" class="indexterm"></a>causes the Capsule to spin around the z-axis</p></li><li style="list-style-type: disc"><p>Notice though, that the variable named <code class="literal">transform</code> is used in the Dot Syntax statement instead of the <code class="literal">GetComponent&lt;Transform&gt;()</code>method</p></li><li style="list-style-type: disc"><p>Unity has several built-in Components, such as the <code class="literal">Transform</code> Component class</p></li><li style="list-style-type: disc"><p>Find the <code class="literal">GameObject</code> class in the <span class="strong"><strong>Scripting Reference</strong></span> and notice that one of the variables is named <code class="literal">transform</code>
</p></li><li style="list-style-type: disc"><p>Instead of having to use the <code class="literal">GetComponent()</code> method on a GameObject, Unity has provided a convenient variable already assigned the value of the <code class="literal">Transform</code> Component</p></li><li style="list-style-type: disc"><p>The following screenshot shows the <code class="literal">transform</code> variable described in the <span class="strong"><strong>Scripting Reference</strong></span>:</p><div class="mediaobject"><img src="/graphics/9781849696586/graphics/6586OT_06_15.jpg" /></div></li><li style="list-style-type: disc"><p>The <code class="literal">Rotate()</code> method shows 3 arguments being sent to the method.</p></li><li style="list-style-type: disc"><p>In this example, the Capsule is rotating 60 degrees per second on the z-axis.</p></li><li style="list-style-type: disc"><p>Code flow now returns to the <code class="literal">LearningScript</code> object.</p></li></ul></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch06lvl5sec01"></a>On LearningScript:</h4></div></div></div><p>Line 24: <code class="literal">if(Input.GetKey(KeyCode.RightArrow)</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>This <code class="literal">if</code> statement checks if the user has pressed the right arrow key</p></li><li style="list-style-type: disc"><p>If pressed, line 26 of the code block is executed</p></li></ul></div><p>Line 26: <code class="literal">capsuleGO.GetComponent&lt;Spinner&gt;().SpinRight();</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>This is<a id="id205" class="indexterm"></a> almost an exact repeat of line 21, except the <code class="literal">SpinRight()</code> method is being called</p></li></ul></div><p>Line 29: <code class="literal">if(Input.GetKey(KeyCode.UpArrow)</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>This <code class="literal">if</code> statement checks if the user has pressed the up arrow key</p></li><li style="list-style-type: disc"><p>If pressed, line 31 of the code block is executed</p></li></ul></div><p>Line 31: <code class="literal">cubeComp.SpinLeft();</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>This is different than lines 21 and 26</p></li><li style="list-style-type: disc"><p>Refer back to line 13. The <code class="literal">cubeComp</code> variable already stores the reference to the <span class="strong"><strong>Cube</strong></span> GameObject and the <code class="literal">Spinner</code> Component object, thereforeJust the variable <code class="literal">cubeComp</code> is needed in the Dot Syntax to call the <code class="literal">SpinLeft()</code> method on the <span class="strong"><strong>Cube</strong></span> GameObject</p></li><li style="list-style-type: disc"><p>Code flow is similar to line 8, except that the Cube rotates now</p></li></ul></div><p>Line 34: <code class="literal">if(Input.GetKey(KeyCode.DownArrow)</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>This <code class="literal">if</code> statement checks to see if the user has pressed the down arrow key</p></li><li style="list-style-type: disc"><p>If pressed, line 36 of the code block is executed, spinning the Cube right</p></li></ul></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec100"></a>Have a go hero – creating and using a new variable named capsuleComp</h3></div></div></div><p>In <code class="literal">LearningScript</code>, lines 21 and 31 perform the same functionality of calling the <code class="literal">SpinLeft()</code> method on their <code class="literal">Spinner</code> Components. Yet the code on each line is very different. The difference is that <code class="literal">cubeComp</code> already stores a reference to the Cube's <code class="literal">Spinner</code> Component. There is no <code class="literal">capsuleComp</code> variable to store a reference to the Capsule's <code class="literal">Spinner</code> Component.</p><p>Try creating a <code class="literal">capsuleComp</code> variable and store a reference to the Capsule's <code class="literal">Spinner</code> Component. Then change lines 21 and 26 to use <code class="literal">capsuleComp</code>.</p></div></div>