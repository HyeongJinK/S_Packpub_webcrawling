<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch07lvl1sec78"></a>Time for action – implementing an interface</h2></div></div><hr /></div><p>We're going to create a<a id="id270" class="indexterm"></a> C# <code class="literal">interface</code> and implement it in <code class="literal">BeginState</code>, but incorrectly to see some errors. Then we'll implement the interface correctly. Perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>In the MonoDevelop <span class="strong"><strong>Solution</strong></span> window, right-click on the <code class="literal">Code</code> folder and select <span class="strong"><strong>Add</strong></span> | <span class="strong"><strong>New Folder</strong></span>.</p></li><li><p>Name the folder <code class="literal">Interfaces</code>.</p></li><li><p>Right-click on the <code class="literal">Interfaces</code> folder and select <span class="strong"><strong>Add</strong></span> | <span class="strong"><strong>New File</strong></span>.</p></li><li><p>In the <span class="strong"><strong>New File</strong></span> window, select <span class="strong"><strong>General</strong></span> | <span class="strong"><strong>Empty Interface</strong></span>.</p></li><li><p>In the Name field at the bottom, enter <span class="strong"><strong>IStateBase</strong></span>.</p></li><li><p>Click on the <span class="strong"><strong>New</strong></span> button to create the file.</p></li></ol></div><p>In the MonoDevelop <span class="strong"><strong>Solution</strong></span> window, your file structure will now look like the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849696586/graphics/6586OT_07_08.jpg" /></div><p>Now edit <code class="literal">IStateBase</code> file as follows:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Remove lines 1 and 2. As a result, <code class="literal">namespace</code> will move up to line 1.</p></li><li><p>Modify line 1 to: <code class="literal">nam</code>
<code class="literal">espace Assets.Code.Interfaces.</code>
</p></li><li><p>In the <code class="literal">IStateBase</code> code block, add line 5: <code class="literal">void StateUpdate();</code>.</p></li><li><p>Then add line 6: <code class="literal">void ShowIt();</code>.</p></li></ol></div><p>The <code class="literal">IStateBase</code> file will now look like the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849696586/graphics/6586OT_07_09.jpg" /></div><p>Now we're going to<a id="id271" class="indexterm"></a> have the <code class="literal">BeginState</code> class partly implementing the <code class="literal">IStateBase</code> interface so that we can see how using an <code class="literal">interface</code> guarantees our State classes meet the minimum requirements for the State Machine.</p><p>Now edit the <code class="literal">BeginState</code> class as shown in the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Add on line 2: <code class="literal">using Assets.Code.Interfaces;</code>.</p></li><li><p>Press <span class="emphasis"><em>Return</em></span>/<span class="emphasis"><em>Enter</em></span> so that line 3 is blank.</p></li><li><p>Modify line 6 to: <code class="literal">public class BeginState : IStateBase</code>.</p><p>We have now partly implemented the <code class="literal">IStateBase</code> interface. <code class="literal">BeginState</code> should now look like the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849696586/graphics/6586OT_07_10.jpg" /></div></li><li><p>Save your files.</p></li><li><p>Switch back to Unity and notice that you get two errors in the <span class="strong"><strong>Console.</strong></span>
</p></li></ol></div><p>We were just told by<a id="id272" class="indexterm"></a> Unity that we messed up. There are two errors informing us that <code class="literal">BeginState</code> did not properly implement the two methods required by the <code class="literal">IStateBase</code> interface: <code class="literal">StateUpdate()</code> and <code class="literal">ShowIt()</code>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note44"></a>Note</h3><p>This is exactly what we want the Unity to tell us. On line 6, we said we were going to use an <code class="literal">interface</code> to guarantee that all methods specified in the interface are included in our State classes. We didn't do it, so Unity let us know.</p></div><p>Now let's almost correct the code in the <code class="literal">BeginState</code> class:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Add in the two methods as shown in the following screenshot. Notice that I'm misspelling the <code class="literal">StateUpdate()</code> method as <code class="literal">StateUpdatee()</code>:</p><div class="mediaobject"><img src="/graphics/9781849696586/graphics/6586OT_07_11.jpg" /></div></li><li><p>Save the file.</p></li><li><p>Notice that Unity still let's us know that we're messing up.</p></li><li><p>Correct the spelling (remove the extra <code class="literal">e</code> from <code class="literal">StateUpdatee()</code>)</p></li><li><p>Save the file.</p></li><li><p>Click <span class="strong"><strong>Play</strong></span> in Unity to verify that your code now works correctly.</p></li></ol></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec112"></a>
<span class="emphasis"><em>What just happened?</em></span>
</h3></div></div></div><p>The <span class="strong"><strong>Console</strong></span>
<a id="id273" class="indexterm"></a> output should be exactly as it was before we created and implemented the <code class="literal">IStateBase</code> interface. Even though more methods were added to <code class="literal">BeginState</code>, there's nothing in the code blocks to execute, nor did we change <code class="literal">StateManager</code> to call the methods. Our focus was to show how to implement an interface, and how it guarantees that the interface methods for a class are included correctly.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec113"></a>Have a go hero – adding another method to the interface</h3></div></div></div><p>In a later chapter, we will be adding a third method to <code class="literal">IStateBase</code> named <code class="literal">StateFixedUpdate()</code>. You may add it now if you wish. This will require you to implement the <code class="literal">StateFixedUpdate()</code> method<a id="id274" class="indexterm"></a> in all States we create.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec114"></a>Pop quiz – using a State Machine for game control</h3></div></div></div><p>Q1. What is the main reason to incorporate a State Machine into a game?</p><p>Q2. Since State classes aren't attached to GameObjects, how does the code in a State get executed?</p><p>Q3. How many States are allowed in a State Machine?</p><p>Q4. What should you use to guarantee that all States have the required code for the State Machine to operate properly?</p></div></div>