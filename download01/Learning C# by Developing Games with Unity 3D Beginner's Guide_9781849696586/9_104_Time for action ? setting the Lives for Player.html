<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch09lvl1sec103"></a>Time for action – setting the Lives for Player</h2></div></div><hr /></div><p>The <span class="strong"><strong>Lives</strong></span> remaining for<a id="id412" class="indexterm"></a> <span class="strong"><strong>Player</strong></span> will be stored in a variable in <code class="literal">GameData</code>. We don't want it in <code class="literal">PlayerControl</code> because this information has no bearing on controlling <span class="strong"><strong>Player</strong></span>.</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>As shown in the following <code class="literal">GameData</code> screenshot, add lines 10 and 11:</p><div class="mediaobject"><img src="/graphics/9781849696586/graphics/6586OT_09_13.jpg" /></div></li><li><p>As shown in the following <code class="literal">SetupState</code> screenshot, insert the section of code in the red box:</p><div class="mediaobject"><img src="/graphics/9781849696586/graphics/6586OT_09_14.jpg" /></div></li></ol></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl2sec150"></a>
<span class="emphasis"><em>What just happened?</em></span>
</h3></div></div></div><p>Let us analyze the code <a id="id413" class="indexterm"></a>shown in the preceding screenshots:</p><p>In <code class="literal">GameData</code>:</p><p>Line 11: <code class="literal">public int playerLives;</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>The variable <code class="literal">playerLives</code> holds the remaining <span class="strong"><strong>Lives</strong></span> available</p></li><li style="list-style-type: disc"><p>This value is set using <span class="strong"><strong>GUI</strong></span> while in <code class="literal">SetupState</code>
</p></li><li style="list-style-type: disc"><p>As <span class="strong"><strong>Lives</strong></span> are lost, this number will decrease toward zero</p></li></ul></div><p>Line 10: <code class="literal">[HideInInspector]</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>The value in <code class="literal">playerLives</code> should not be editable in the <span class="strong"><strong>Inspector</strong></span>
</p></li></ul></div><p>In <code class="literal">SetupState</code>:</p><p>Line 31: <code class="literal">GUI.Box(new Rect(Screen.width - 110,10,100,25), string.Format("Lives left: "+ manager.gameDataRef.playerLives));</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Lines 31 and 32 are only one line of code</p></li><li style="list-style-type: disc"><p>A GUI Box is shown on screen with the text <span class="strong"><strong>Lives left:</strong></span> displayed, along with the value retrieved from the <code class="literal">playerLives</code> variable in <code class="literal">GameData</code>
</p></li><li style="list-style-type: disc"><p>The <span class="strong"><strong>Scripting Reference </strong></span>specifies the text shown in the <code class="literal">GUI.Box</code> needs to be of type <code class="literal">String</code>
</p></li><li style="list-style-type: disc"><p>The <code class="literal">string.Format()</code> method<a id="id414" class="indexterm"></a> is C# code that makes everything in the parentheses a <code class="literal">String</code>
</p></li><li style="list-style-type: disc"><p>The <code class="literal">manager.gameDataRef.playerLives</code> statement is retrieving the value stored in <code class="literal">playerLives</code> before being converted to a <code class="literal">String</code> for display</p></li></ul></div><p>Line 34: <code class="literal">GUI.Box(new Rect(Screen.width -110,40,100,120), "Player Lives");</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>This displays a GUI Box as a background for three buttons</p></li><li style="list-style-type: disc"><p>The title at the top is <span class="strong"><strong>Player Lives</strong></span>
</p></li></ul></div><p>Line 36: <code class="literal">if(GUI.Button(new Rect(Screen.width - 100,70,80,20), "5"))</code>
</p><p>
<code class="literal">        manager.gameDataRef.playerLives = 5;</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>This <code class="literal">if</code> statement checks to see if a GUI Button is clicked</p></li><li style="list-style-type: disc"><p>When clicked, the value <code class="literal">5</code> is assigned to the variable <code class="literal">playerLives</code> in <code class="literal">GameData</code> using Dot Syntax</p></li></ul></div><p>Lines 39 and 42:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>These are similar to line 36 except for the value assigned to <code class="literal">playerLives</code>
</p></li></ul></div><p>With all this coding complete, <a id="id415" class="indexterm"></a>you should have <span class="strong"><strong>Scene0</strong></span> looking like this when in <code class="literal">SetupState</code>:</p><div class="mediaobject"><img src="/graphics/9781849696586/graphics/6586OT_09_15.jpg" /></div><p>If you are using <span class="strong"><strong>Cube</strong></span> instead, perhaps you have something like this:</p><div class="mediaobject"><img src="/graphics/9781849696586/graphics/6586OT_09_16.jpg" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl2sec151"></a>Have a go hero – changing the setup spin speed</h3></div></div></div><p>The initial <span class="strong"><strong>Player</strong></span> spin<a id="id416" class="indexterm"></a> speed is what I happen to like. Change it to your liking in the <span class="strong"><strong>Inspector</strong></span>, and then modify the variable in code so this spin speed will always be the default setting. Remember, changing the setting in the <span class="strong"><strong>Inspector</strong></span> does not change any code files.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl2sec152"></a>Pop quiz – understanding GameObjects</h3></div></div></div><p>Q1. For writing scripts, what are the two primary Unity documents you should use?</p><p>Q2. What normally happens to existing GameObjects when a new <span class="strong"><strong>Scene</strong></span> is loaded?</p><p>Q3. The States require access to data stored on <code class="literal">GameData</code>. Why do the States use <code class="literal">StateManager</code> to access this data instead of directly accessing <code class="literal">GameData</code>?</p><p>Q4. When <span class="strong"><strong>Player</strong></span> is added to the <span class="strong"><strong>Scene</strong></span> or <span class="strong"><strong>Hierarchy</strong></span>, why is it made a child GameObject of the <span class="strong"><strong>GameManager</strong></span> GameObject?</p></div></div>