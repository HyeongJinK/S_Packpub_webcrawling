<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch10lvl1sec106"></a>Switching to the first play State and playable scene</h2></div></div><hr /></div><p>
<a class="link" href="#" linkend="ch09">Chapter 9</a>,<span class="emphasis"><em> Start Building a Game and Get the Basic Structure Running</em></span>, finished with <code class="literal">SetupState</code>. Now we need to<a id="id418" class="indexterm"></a> switch to the next State, <code class="literal">PlayStateScene1_1</code>. At<a id="id419" class="indexterm"></a> the bottom of the <span class="strong"><strong>SetupState</strong></span> screen is a button <span class="strong"><strong>Click Here or Press 'P' to Play</strong></span>.</p><p>In <code class="literal">SetupState</code>, here's the code for that button:</p><div class="mediaobject"><img src="/graphics/9781849696586/graphics/6586OT_10_02.jpg" /></div><p>An analysis of the code shown in the preceding screenshot is as follows:</p><p>Line 69: <code class="literal">player.transform.position = new Vector3(50, .5f, 40);</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Places <span class="strong"><strong>Player</strong></span> near the center of the Terrain</p></li></ul></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec153"></a>Loading Scene1 using code</h3></div></div></div><p>In <span class="strong"><strong>Scene1</strong></span>, <span class="strong"><strong>Player</strong></span>
<a id="id420" class="indexterm"></a> will use physics to hover and move. Here is the relevant code in <code class="literal">PlayStateScene1_1</code>:</p><div class="mediaobject"><img src="/graphics/9781849696586/graphics/6586OT_10_03.jpg" /></div><p>An analysis of the code shown in the preceding screenshot is as follows:</p><p>Line 15: <code class="literal">if(Application.loadedLevelName != "Scene1")</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>We were in <span class="strong"><strong>Scene0</strong></span>, so this condition is <code class="literal">true</code>, <span class="strong"><strong>Scene1</strong></span> is not loaded, therefore:</p></li></ul></div><p>Line 16: <code class="literal">Application.LoadLevel("Scene1");</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Scene1</strong></span> is loaded</p></li></ul></div><p>Line 10: <code class="literal">private GameObject player;</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>The<a id="id421" class="indexterm"></a> variable <code class="literal">player</code> will store a <code class="literal">GameObject</code> which we'll find in line 18</p></li></ul></div><p>Line 18: <code class="literal">player = GameObject.Find("Player");</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>The <code class="literal">Find()</code> method is used to find the <span class="strong"><strong>Player</strong></span> GameObject in the <span class="strong"><strong>Hierarchy</strong></span>
</p></li><li style="list-style-type: disc"><p>A reference to the <span class="strong"><strong>Player</strong></span> GameObject is assigned to the variable <code class="literal">player</code>
</p></li><li style="list-style-type: disc"><p>If <span class="strong"><strong>Player</strong></span> isn't found, <code class="literal">player</code> will be storing <code class="literal">null</code> which will create an error in line 19</p></li></ul></div><p>Line 19: <code class="literal">player.rigidbody.isKinematic = false;</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>With a reference to <span class="strong"><strong>Player</strong></span>, we can access its <code class="literal">Rigidbody</code> Component stored in the variable <code class="literal">rigidbody</code>
</p></li><li style="list-style-type: disc"><p>The variable <code class="literal">isKinematic</code> is assigned the value <code class="literal">false</code>
</p></li><li style="list-style-type: disc"><p>The<span class="strong"><strong> Player</strong></span> GameObject is now affected by physics in <code class="literal">PlayStateScene1_1</code> and <code class="literal">PlayStateScene1_2</code>
</p></li></ul></div></div></div>