<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch08lvl1sec93"></a>Time for action – adding the code to change the Scenes</h2></div></div><hr /></div><p>We'll add a single line of code in <code class="literal">BeginState</code> and in <code class="literal">LostState</code> to change Scenes.</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>In <code class="literal">BeginState</code>, add <code class="literal">Application.LoadLevel("Scene1");</code> into the <code class="literal">Switch()</code> method on line 42 as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849696586/graphics/6586OT_08_20.jpg" /></div></li><li><p>In <code class="literal">LostState</code>, add <code class="literal">Application.LoadLevel("BeginningScene");</code> into the <code class="literal">StateUpdate()</code> method on line 20 as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849696586/graphics/6586OT_08_21.jpg" /></div><p>If earlier in this chapter you changed <code class="literal">WonState</code> to switch to <code class="literal">PlayState</code> instead of starting over with <code class="literal">BeginState</code>, we're ready to test our State Machine again. If you didn't, the following are the changes you need to make to <code class="literal">WonState</code>:</p><div class="mediaobject"><img src="/graphics/9781849696586/graphics/6586OT_08_22.jpg" /></div></li><li><p>Save all your changes.</p></li><li><p>Have <span class="strong"><strong>BeginningScene</strong></span> loaded and showing in Unity.</p></li><li><p>Click on <span class="strong"><strong>Play</strong></span>.</p></li></ol></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec132"></a>
<span class="emphasis"><em>What just happened?</em></span>
</h3></div></div></div><p>You should now be<a id="id342" class="indexterm"></a> changing Scenes as you go from <code class="literal">BeginState</code> to <code class="literal">PlayState</code>. To get back to <code class="literal">BeginState</code>, you have to first switch to <code class="literal">LostState</code>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec133"></a>Pop quiz – understanding State Machine operation</h3></div></div></div><p>Q1. The State classes implement the <code class="literal">IStateBase</code> interface guaranteeing certain methods are included. What is the other very important feature that the interface provides for the State Machine?</p><p>Q2. Each State has to have the <code class="literal">StateUpdate()</code> and <code class="literal">ShowIt()</code> methods. What calls these methods?</p><p>Q3. What normally happens to GameObjects when changing to another Scene?</p><p>Q4. Is this sentence true or false? Once a State Machine is setup, it can't be changed.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec134"></a>Verifying the code of your classes</h3></div></div></div><p>Just in case<a id="id343" class="indexterm"></a> you've had any difficulty because of constantly editing your class files, the following are the screenshots of <code class="literal">StateManager</code>, <code class="literal">BeginState</code>, <code class="literal">PlayState</code>, <code class="literal">WonState</code>, and <code class="literal">LostState</code> as they currently stand.</p><p>The following is the screenshot of the<a id="id344" class="indexterm"></a> <code class="literal">StateManager</code> class:</p><div class="mediaobject"><img src="/graphics/9781849696586/graphics/6586OT_08_23.jpg" /></div><p>The following is <a id="id345" class="indexterm"></a>the screenshot of the <code class="literal">BeginState</code> class:</p><div class="mediaobject"><img src="/graphics/9781849696586/graphics/6586OT_08_24.jpg" /></div><p>The following<a id="id346" class="indexterm"></a> is the screenshot of the <code class="literal">PlayState</code> class:</p><div class="mediaobject"><img src="/graphics/9781849696586/graphics/6586OT_08_25.jpg" /></div><p>The following is the screenshot of the<a id="id347" class="indexterm"></a> <code class="literal">WonState</code> class:</p><div class="mediaobject"><img src="/graphics/9781849696586/graphics/6586OT_08_26.jpg" /></div><p> The following<a id="id348" class="indexterm"></a> is the screenshot of the <a id="id349" class="indexterm"></a>
<code class="literal">LostState</code> class:</p><div class="mediaobject"><img src="/graphics/9781849696586/graphics/6586OT_08_27.jpg" /></div></div></div>