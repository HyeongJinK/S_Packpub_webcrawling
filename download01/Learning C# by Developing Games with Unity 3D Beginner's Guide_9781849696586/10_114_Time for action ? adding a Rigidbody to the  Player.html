<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch10lvl1sec112"></a>Time for action â€“ adding a Rigidbody to the  Player</h2></div></div><hr /></div><p>We're going to add a <code class="literal">Rigidbody</code> Component to apply physics to <span class="strong"><strong>Player</strong></span>. To stop <span class="strong"><strong>Player</strong></span> from dropping like a rock, out of view of the camera, we'll check <span class="strong"><strong>Is Kinematic</strong></span> in the <span class="strong"><strong>Rigidbody</strong></span> properties to turn off the effect of physics. When any of the play States are active, we'll uncheck <span class="strong"><strong>Is Kinematic</strong></span> in code to allow physics to affect <span class="strong"><strong>Player</strong></span>.</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select <span class="strong"><strong>Player</strong></span> in the <span class="strong"><strong>Hierarchy</strong></span> panel.</p></li><li><p>At the bottom of the <span class="strong"><strong>Inspector </strong></span>panel,navigate to <span class="strong"><strong>Add Component</strong></span> | <span class="strong"><strong>Physics</strong></span> | <span class="strong"><strong>Rigidbody</strong></span>.</p></li><li><p>In the <span class="strong"><strong>Rigidbody</strong></span> Component, check <span class="strong"><strong>Is Kinematic</strong></span>.</p></li></ol></div><p>The following screenshot shows the code for moving <span class="strong"><strong>Player</strong></span> using physics forces:</p><div class="mediaobject"><img src="/graphics/9781849696586/graphics/6586OT_10_11.jpg" /></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec158"></a>
<span class="emphasis"><em>What just happened?</em></span>
</h3></div></div></div><p>In the <span class="strong"><strong>Inspector</strong></span>, the <a id="id442" class="indexterm"></a>values stored in the <code class="literal">Mass</code>, <code class="literal">Drag</code>, and <code class="literal">Angular Drag</code> variables under the <span class="strong"><strong>Rigidbody</strong></span> properties affect the move ability of <span class="strong"><strong>Player</strong></span>,<a id="id443" class="indexterm"></a> just like in real life.</p><p>In any play State, <span class="strong"><strong>Is Kinematic</strong></span> is unchecked allowing physics to work.</p><div class="mediaobject"><img src="/graphics/9781849696586/graphics/6586OT_10_12.jpg" /></div><p>An analysis of the code we saw in the preceding code screenshot is as follows:</p><p>Note that <code class="literal">FixedUpdate()</code> is being used directly in <code class="literal">PlayerControl</code> instead of being controlled by the State Machine:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>The State<a id="id444" class="indexterm"></a> Machine is controlling the <code class="literal">isKinematic</code> setting</p></li><li style="list-style-type: disc"><p>When <code class="literal">isKinematic</code> is checked, physics code does not work to move <span class="strong"><strong>Player</strong></span> so there's no need to have the State Machine controlling <code class="literal">FixedUpdate()</code>
</p></li></ul></div><p>Line 7: <code class="literal">public floa</code>
<code class="literal">t speed = 16.0f;</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>This variable will be used as a multiplier to make the forward and backward speed of <span class="strong"><strong>Player</strong></span> faster</p></li></ul></div><p>Line 8: <code class="literal">public float rotationSpeed = 0.60f;</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>This variable will be used as a multiplier to make <span class="strong"><strong>Player</strong></span> rotate faster</p></li></ul></div><p>Line 27: <code class="literal">fl</code>
<code class="literal">oat foreAndAft = Input.GetAxis("Ver</code>
<code class="literal">tical") * speed;</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>The <code class="literal">Input.GetAxis("Vertical")</code> method detects the pressing of the Up Arrow or Down Arrow keys</p></li><li style="list-style-type: disc"><p>The up arrow key returns a value of <code class="literal">1</code>, while the down arrow key returns a value of -1</p></li><li style="list-style-type: disc"><p>These values are multiplied by <code class="literal">speed</code> which contains the value <code class="literal">16.0</code>
</p></li><li style="list-style-type: disc"><p>The result, <code class="literal">16</code> or <code class="literal">-16</code>, is stored in the variable <code class="literal">foreAndAft</code>
</p></li></ul></div><p>Line 28: <code class="literal">float rotation = Input.GetAxis("Horizontal") * rotationSpeed;</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<code class="literal">Input.GetAxis("Horizontal")</code> method detects the right<span class="emphasis"><em> </em></span>or left<span class="emphasis"><em> </em></span>arrow keys</p></li><li style="list-style-type: disc"><p>The right arrow key returns a value of <code class="literal">1</code>, the left arrow key returns a value of <code class="literal">-1</code>
</p></li><li style="list-style-type: disc"><p>These values are multiplied by <code class="literal">rotationSpeed</code> which contains the value <code class="literal">0.60</code>
</p></li><li style="list-style-type: disc"><p>The result, <code class="literal">0.60</code> or <code class="literal">-0.60</code>, is stored in the variable <code class="literal">rotation</code>
</p></li></ul></div><p>Line 29: <code class="literal">rigidbody.AddRelativeForce (0, 0, foreAndAft);</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Since we're using the <code class="literal">Rigidbody</code> class to move <span class="strong"><strong>Player</strong></span>, the <span class="strong"><strong>Scripting Reference</strong></span> provides <code class="literal">AddForce()</code> and <code class="literal">AddRelativeForce()</code> for moving objects</p></li><li style="list-style-type: disc"><p>
<code class="literal">AddForce()</code> makes objects move along the x, y, and z axes of the world, which isn't so good if <span class="strong"><strong>Player</strong></span> isn't facing the direction where the force is being applied</p></li><li style="list-style-type: disc"><p>
<code class="literal">AddRelativeForce()</code>
<a id="id445" class="indexterm"></a> makes an object move according to it's own x, y, and z axes, so applying force to the z axis of <span class="strong"><strong>Player</strong></span> moves it correctly</p></li></ul></div><p>Line 30: <code class="literal">rigidbody.AddTorque (0, rotation, 0);</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>This allows<a id="id446" class="indexterm"></a> <span class="strong"><strong>Player</strong></span> to rotate or turn</p></li></ul></div><p>Line 33: <code class="literal">void OnTriggerStay(Collider other)</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Unity automatically calls this method when a collider of another GameObject is inside <span class="strong"><strong>Box Collider</strong></span> of <span class="strong"><strong>Player</strong></span>
</p></li></ul></div><p>Line 35: <code class="literal">rigidbody.AddForce(Vector3.up * hoverPower);</code>
</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>In <span class="strong"><strong>Scripting Reference</strong></span>, this is one of two examples to apply upward force</p></li><li style="list-style-type: disc"><p>This could have been written <code class="literal">rigidbody.AddForce(0, hoverPower, 0);</code>
</p></li><li style="list-style-type: disc"><p>When the <span class="strong"><strong>Terrain</strong></span> is inside <span class="strong"><strong>Box Collider</strong></span> of <span class="strong"><strong>Player</strong></span>, upward force pushes <span class="strong"><strong>Player</strong></span> up</p></li><li style="list-style-type: disc"><p>As <span class="strong"><strong>Player</strong></span> rises higher, <span class="strong"><strong>Terrain</strong></span> gets removed from <span class="strong"><strong>Box Collider</strong></span> of <span class="strong"><strong>Player</strong></span>
</p></li><li style="list-style-type: disc"><p>This removes the upward force and <span class="strong"><strong>Player</strong></span> lowers, causing <span class="strong"><strong>Terrain</strong></span> to be detected</p></li><li style="list-style-type: disc"><p>This gives <span class="strong"><strong>Player</strong></span> the effect of hovering over the Terrain</p></li></ul></div></div></div>