<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch10lvl1sec86"></a>Using triggers</h2></div></div><hr /></div><p>We can easily configure <a id="id329" class="indexterm"></a>any collider in Unity to work like a trigger. Triggers are very useful. In this case, we will use them to detect whether our character has fallen into the hole. I have already prepared another useful prefab for you, so we won't waste any time setting it up. The steps are as follows:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Import <code class="literal">KillTrigger.unitypackage</code> into your project.</p></li><li><p>Drag <code class="literal">Kill</code> trigger into your project.</p></li><li><p>Position the <code class="literal">KillTrigger</code> game object so the red area is below the ground.</p><div class="mediaobject"><img src="/graphics/9781787127272/graphics/B04245_10_6.jpg" /></div></li></ol></div><p>This is all we need in the <span class="strong"><strong>Scene</strong></span> view. Once Jake drops down from the end of the platform, he will most certainly fall through the red trigger zone. Now, we need to write some code to describe this behavior. It will be a very simple component added to the <code class="literal">KillTrigger</code> game object.</p><p>Create new a C# script, call <a id="id330" class="indexterm"></a>it <code class="literal">KillTrigger</code>, and write the code so it looks like this:</p><div class="mediaobject"><img src="/graphics/9781787127272/graphics/B04245_10_7.jpg" /></div><p>As you can see, there is nothing complicated here. We use the <code class="literal">OnTriggerEnter2D</code> method. It is called automatically by Unity whenever another 2D collider enters the trigger area.</p><p>Before we test how things work, we need to make sure out <span class="strong"><strong>Player</strong></span> game object has the correct tag set up. Unity uses tags to help you recognize the game objects in code. It is very useful and easy to use. Select the <span class="strong"><strong>Player</strong></span> game object and set its tag to <span class="strong"><strong>Player</strong></span>:</p><div class="mediaobject"><img src="/graphics/9781787127272/graphics/B04245_10_8.jpg" /></div><p>Now, we are ready to perform a test. Press <span class="strong"><strong>Play</strong></span> in Unity. Then, press <span class="emphasis"><em>S</em></span> on the keyboard to start the game. Our character will start running. If everything works properly, we should get the <span class="strong"><strong>Console</strong></span> message as soon as the character touches the trigger area.</p><p>Nice! We can trigger the parts of the code by physics events. Think about different things we can use triggers for, such as collecting stuff! Anyways, at the moment we just call the <code class="literal">Debug.Log</code>. What we really want here is an actual functionality.</p><p>Simple logic says if player touched the <code class="literal">killTrigger</code>, player should die. Let's go back to <code class="literal">PlayerController</code> and add a new method in.</p><div class="informalexample"><pre class="programlisting">public void Kill() {

  GameManager.instance.GameOver();
  animator.SetBool("isAlive", false);
}</pre></div><p>Before we call this method in the <code class="literal">PlayerController</code>, we need to change <code class="literal">PlayerController</code> class itself into a singleton. We have done this already with <code class="literal">GameManager</code>. Go ahead and add the instance static variable to <code class="literal">PlayerController</code> and assign it in the <code class="literal">Awake</code> method. If you feel a bit lost now, go back to the previous part of this chapter where we learned about the singleton approach.</p><p>Now, we have a really easy <code class="literal">Kill</code> method to call when something bad happens to our character. Let's go back to the <a id="id331" class="indexterm"></a>trigger <code class="literal">killer</code> and call it instead of <code class="literal">Debug.Log()</code>. After editing the <code class="literal">Kill</code> trigger class should look like this:</p><div class="mediaobject"><img src="/graphics/9781787127272/graphics/B04245_10_9.jpg" /></div><p>Test the newly written or edited code as soon as possible. Select <code class="literal">GameManager</code> in the <span class="strong"><strong>Hierarchy</strong></span> first. Press <span class="strong"><strong>Play</strong></span> in Unity and then press the <span class="emphasis"><em>S</em></span> key to start the game. As soon as our character falls into the trigger area, <code class="literal">GameManager.currentGameState</code> should change from <code class="literal">inGame</code> to game over.</p></div>