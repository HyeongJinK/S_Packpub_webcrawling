<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch16lvl1sec139"></a>Creating a shop</h2></div></div><hr /></div><p>Now that we have <a id="id604" class="indexterm"></a>clicking working, let's add the ability to increase our cash per second or the amount we get per click!</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Start off by going to <span class="strong"><strong>GameObject | UI | Panel</strong></span> and then rename the object to <code class="literal">ShopPanel</code>. Change the values of <span class="strong"><strong>Left</strong></span>, <span class="strong"><strong>Right</strong></span>, <span class="strong"><strong>Top</strong></span>, and <span class="strong"><strong>Bottom</strong></span> to <code class="literal">150</code>.</p></li><li><p>Now we need to create a holder for all of our buttons. Select the <code class="literal">ShopPanel </code>object from the <span class="strong"><strong>Hierarchy</strong></span> and then create an <span class="strong"><strong>Image</strong></span> object by going to <span class="strong"><strong>GameObject | UI | Image</strong></span>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note66"></a>Note</h3><p>Note that because we had the <code class="literal">ShopPanel</code> object selected, it automatically knew that we wanted the image object to be a child of the <code class="literal">ShopPanel</code> object.</p></div></li><li><p>Then, rename this new <code class="literal">Image</code> object to <code class="literal">ShopElements</code>. Open up the <span class="strong"><strong>Anchor Presets</strong></span> menu and hold down <span class="emphasis"><em>Alt</em></span> + <span class="emphasis"><em>Shift</em></span> and then click on the <span class="strong"><strong>top-stretch</strong></span> option on the bottom right:</p><div class="mediaobject"><img src="/graphics/9781787127272/graphics/B05212_03_13.jpg" /></div></li><li><p>Next, we will<a id="id605" class="indexterm"></a> create a new component on this object to resize as needed, based on the size of our buttons. To do this, go to <span class="strong"><strong>Add Component</strong></span> and search for <code class="literal">Content Size Fitter</code> by typing in the name to filter through all of the components until you see it. Under the newly created component, change the <span class="strong"><strong>Vertical Fit</strong></span> to <code class="literal">Preferred Size</code> to make it change its size based on the eventual children we will be creating:</p><div class="mediaobject"><img src="/graphics/9781787127272/graphics/B05212_03_14.jpg" /></div></li><li><p>Now we will <a id="id606" class="indexterm"></a>create our first button outside of the <code class="literal">ShopElements</code> object until we have it finished. The reason for this is that we don't want the fitter component to modify things until we are done with it. Right-click on the <code class="literal">ShopPanel </code>object and select <span class="strong"><strong>GameObject | UI | Button</strong></span>.</p></li><li><p>From the <span class="strong"><strong>Scene </strong></span>tab, change to the <span class="strong"><strong>Rect </strong></span>tool (press <span class="emphasis"><em>R</em></span> or press on the button on the top left of the screen) and then hold down <span class="emphasis"><em>Alt</em></span> keys and drag from one of the edges of the button to have it resize to whatever height and width you'd like the buttons to be:</p><div class="mediaobject"><img src="/graphics/9781787127272/graphics/B05212_03_15.jpg" /></div></li><li><p>The text is a little difficult to read, so open up the <code class="literal">Button</code> text object and change the <a id="id607" class="indexterm"></a>
<span class="strong"><strong>Font Size</strong></span> to <code class="literal">50</code>.</p></li><li><p>Go back to the <span class="strong"><strong>Button</strong></span> object and add a <span class="strong"><strong>LayoutElement</strong></span> component, check the <span class="strong"><strong>Preferred Height</strong></span> property, and check <span class="strong"><strong>Flexible Width</strong></span> to let it know that we can modify how wide the button is but we prefer it to be where we have it currently:</p><div class="mediaobject"><img src="/graphics/9781787127272/graphics/B05212_03_16.jpg" /></div></li><li><p>We now have<a id="id608" class="indexterm"></a> our base object created, so now it's time to make it possible to create many of them and work with our <code class="literal">ShopElements</code> object. To do that, drag and drop the <code class="literal">Button</code> object on top of the <code class="literal">ShopElements</code> object to make it a child.</p></li><li><p>Then, select the <code class="literal">ShopElements</code>
<span class="strong"><strong> </strong></span>object from the <span class="strong"><strong>Hierarchy</strong></span> tab and add a <span class="strong"><strong>Vertical Layout Group</strong></span> component to it (do a search like before):</p><div class="mediaobject"><img src="/graphics/9781787127272/graphics/B05212_03_17.jpg" /></div></li><li><p>Next go to the <span class="strong"><strong>Vertical Layout Group</strong></span> component and extend the <span class="strong"><strong>Padding</strong></span> property. From<a id="id609" class="indexterm"></a> there, change <span class="strong"><strong>Left</strong></span>, <span class="strong"><strong>Right</strong></span>, <span class="strong"><strong>Top</strong></span>, and <span class="strong"><strong>Bottom</strong></span> to <code class="literal">20</code> as well as <span class="strong"><strong>Spacing</strong></span> to <code class="literal">20</code> as well. This will give some much needed space between each of the objects we place as well as move them away from the center of their parent.</p></li><li><p>Let's get rid of the white image blocking the panel from being seen. To do this, select the <code class="literal">ShopElements</code> object and then under the <span class="strong"><strong>Image</strong></span> component's <span class="strong"><strong>Color</strong></span> property, change <span class="strong"><strong>Alpha</strong></span> to <code class="literal">0</code>.</p></li></ol></div><p>We will be customizing the functionality of these buttons later on, but right now I want to point out as we keep adding new buttons to the list, it will be added to the bottom of the object, which is great but if we add too many:</p><div class="mediaobject"><img src="/graphics/9781787127272/graphics/B05212_03_18.jpg" /></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch16lvl2sec88"></a>Making the list scrollable with ScrollView</h3></div></div></div><p>As you can see, it goes<a id="id610" class="indexterm"></a> off the screen. To avoid this, we will make use of the <code class="literal">ScrollView</code> component:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Go back to the <code class="literal">ShopPanel</code> object and then add a <span class="strong"><strong>Mask</strong></span> component to it:</p><div class="mediaobject"><img src="/graphics/9781787127272/graphics/B05212_03_19.jpg" /></div><p>As you can<a id="id611" class="indexterm"></a> see, this cuts off the contents of all of its children to fit within the Panel's image.</p></li><li><p>Select the <code class="literal">ShopPanel</code> object and add a <span class="strong"><strong>ScrollRect</strong></span> component to it. Connect the <span class="strong"><strong>Content</strong></span> component to the<code class="literal"> ShopElements</code> object. We want it to just move vertically so uncheck the <span class="strong"><strong>Horizontal</strong></span> option and change <span class="strong"><strong>Movement Type</strong></span> to <code class="literal">Clamped</code>. To make it easier to scroll with the mouse's scrollwheel, change <span class="strong"><strong>Scroll Sensitivity</strong></span> to <code class="literal">50</code>:</p><div class="mediaobject"><img src="/graphics/9781787127272/graphics/B05212_03_20.jpg" /></div><p>We can now<a id="id612" class="indexterm"></a> scroll down the buttons by either clicking and dragging or using the mouse wheel, but we can make it easier to see by using a Scrollbar.</p></li><li><p>Right-click on the <code class="literal">Canvas</code> object and select <span class="strong"><strong>GameObject | UI | Scrollbar</strong></span>. Under the <span class="strong"><strong>Scrollbar</strong></span> component, change the <span class="strong"><strong>Direction </strong></span>to <code class="literal">Bottom to Top</code>. Then to make it easier to work with, change the <span class="strong"><strong>Anchor Preset</strong></span> to <span class="strong"><strong>stretch-right</strong></span> and change the <span class="strong"><strong>Scale X</strong></span> to <code class="literal">2</code>. Then, move it over to the right of the window:</p><div class="mediaobject"><img src="/graphics/9781787127272/graphics/B05212_03_21.jpg" /></div></li><li><p>Select the <a id="id613" class="indexterm"></a>
<code class="literal">ShopPanel</code> object and then from <span class="strong"><strong>Vertical Scrollbar</strong></span>, assign the newly created <code class="literal">Scrollbar</code> object:</p><div class="mediaobject"><img src="/graphics/9781787127272/graphics/B05212_03_22.jpg" /></div></li><li><p>Now, let's create<a id="id614" class="indexterm"></a> an empty game object to hold the entire menu. To do this, right-click on the <span class="strong"><strong>Canvas</strong></span> object and select <span class="strong"><strong>Create Empty</strong></span>. From there, rename the object to <code class="literal">ShopMenu</code> and then drag and drop the <code class="literal">ShopPanel</code> and <code class="literal">Scrollbar </code>objects on top of it to become children. Finally, from the top of the <span class="strong"><strong>Inspector </strong></span>tab, uncheck the <code class="literal">ShopMenu</code> object to easily hide the menu options:</p><div class="mediaobject"><img src="/graphics/9781787127272/graphics/B05212_03_23.jpg" /></div></li></ol></div></div></div>