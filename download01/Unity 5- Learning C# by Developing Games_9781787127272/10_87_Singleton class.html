<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch10lvl1sec83"></a>Singleton class</h2></div></div><hr /></div><p>By implementing the <a id="id317" class="indexterm"></a>singleton pattern for <code class="literal">GameManager</code>, we can easily access <a id="id318" class="indexterm"></a>it from anywhere using one single point of access. I guess you will feel really confused about this now. A simple example will help you get your head around it.</p><div class="blockquote"><blockquote class="blockquote"><p>"In software engineering, the singleton pattern is a design pattern that restricts the instantiation of a class to one object. This is useful when exactly one object is needed to coordinate actions across the system."</p><p>                                                                                     - Wikipedia</p></blockquote></div><p>Let's add the following code to the <code class="literal">GameManager</code> class. Declare a new public static variable. This code should be written right next to other public variables:</p><div class="informalexample"><pre class="programlisting">public static GameManager instance;</pre></div><p>Then, add an <code class="literal">Awake</code> method with the following line.</p><div class="informalexample"><pre class="programlisting">void Awake() {
  instance = this;
}</pre></div><p>That's it! This is all the code you need for a simple access to the <code class="literal">GameManager</code> instance from anywhere in your code. It is important to remember that only one instance of this component can be present in the whole Unity <span class="strong"><strong>Scene</strong></span>. To access any of the public code in <code class="literal">GameManager</code> from another class, you can simply call:</p><div class="informalexample"><pre class="programlisting">GameManager.instance.SomeUsefulMethodOrVariable</pre></div><p>For example, if we want to <a id="id319" class="indexterm"></a>read the <code class="literal">currentGameState</code> value from <code class="literal">PlayerController</code>, we will simply write:</p><div class="informalexample"><pre class="programlisting">GameState currentState = GameManager.instance.currentGameState;</pre></div><p>I hope the singleton pattern is fairly familiar to you now. Of course, we just covered the basics. Feel free to browse the Internet and read more about the subject.</p><p>We have easy access to <a id="id320" class="indexterm"></a>
<code class="literal">GameManager</code>, with basic game events helping to control the game. When we press <span class="strong"><strong>Play</strong></span> in Unity, we can still see that our character is running forward without any control. We are unable to stop him at all. Let's put some restrictions in <code class="literal">PlayerController</code> so that the running and jumping behavior works only when <code class="literal">currentGameState</code> is <code class="literal">.inGame</code>. To do this, let's open <code class="literal">PlayerController</code> and add some code:</p><div class="mediaobject"><img src="/graphics/9781787127272/graphics/B04245_10_3.jpg" /></div><p>Lines <span class="strong"><strong>22</strong></span> and <span class="strong"><strong>34</strong></span> are identical. They contain a simple <code class="literal">if</code> statement to make the running and jumping functionality <a id="id321" class="indexterm"></a>work only when <code class="literal">currentGameState</code> is <a id="id322" class="indexterm"></a>
<code class="literal">inGame</code>. There isn't much more to explain here. Notice how easily we can access the <code class="literal">currentGameState</code> due to the singleton approach.</p></div>