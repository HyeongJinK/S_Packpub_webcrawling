<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch12lvl1sec103"></a>Reference exceptions</h2></div></div><hr /></div><p>Test the code by <a id="id404" class="indexterm"></a>pressing <span class="strong"><strong>Play</strong></span> in Unity and then clicking on the <span class="strong"><strong>Play UI</strong></span> button. The <code class="literal">SetGameState</code> function that we just added to <code class="literal">GameManager</code> should hide the <code class="literal">MenuCanvas</code>. Oops! Something is wrong. Unity is displaying an error in the <span class="strong"><strong>Console</strong></span> window. Something surely went wrong. Let's take a look at the red error message, which is shown here:</p><div class="mediaobject"><img src="/graphics/9781787127272/graphics/B04245_12_17.jpg" /></div><p>In your programming career, you will come across many issues with the games or applications that you are creating. I have deliberately asked you to follow my steps to cause this issue. We will learn with experience. Beginners in programming often rely on luck while sorting issues. They blindly change something, test again, and keep going in that loop until they fix the issue by pure luck or simply give up on trying. This is a very bad approach to debugging. I want you to understand what the issue is. In most cases, Unity will try to give you an accurate description of the error in the console. Once we face an issue, we will learn to understand what's wrong and only then will we be able to fix the code issues. While learning something new, we will gain experience and write flawless code.</p><p>Let's take a look at the <span class="strong"><strong>Console</strong></span> window again. As you can see, the console is divided into two sections:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>The top section</strong></span>: This <a id="id405" class="indexterm"></a>displays all error and warning messages, usually with a short description</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>The bottom section</strong></span>: This has a full description of an error or warning, with the stack trace message showing the sequence of nested functions called up to this point</p></li></ul></div><p>Our error says: <span class="strong"><strong>UnassignedReferenceException: The variable menuCanvas of GameManager has not been assigned. You probably need to assign the menuCanvas variable of the GameManager script in the inspector.</strong></span>
</p><p>Hmm... To see the exact line that is throwing up the error, double-click on the error in the console. MonoDevelop should open after a few seconds, selecting the line that is causing the issue:</p><div class="mediaobject"><img src="/graphics/9781787127272/graphics/B04245_12_18.jpg" /><div class="caption"><p>The selected line is causing the issue</p></div></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip04"></a>Tip</h3><p>Double-click on the error in the console. It will open up <code class="literal">MonoBehaviour</code> and highlight the exact line that is causing the issue.</p></div><p>We are not asking Unity to do much in this line. What we are trying to do is set the <span class="strong"><strong>Canvas</strong></span> component stored under the <code class="literal">menuCanvas</code> variable name to <code class="literal">false</code>. What can go wrong then? An unassigned reference exception means Unity is trying to use a variable that is not properly assigned. I led you to this issue deliberately, as this is a very common mistake made by beginner programmers.</p><p>Still confused? Not sure <a id="id406" class="indexterm"></a>what I mean? Select the <code class="literal">GameManager</code> game object and take a look at your <code class="literal">GameManager</code> component in the inspector, as follows:</p><div class="mediaobject"><img src="/graphics/9781787127272/graphics/B04245_12_19.jpg" /></div><p>It should be clear to you now. We forgot to connect the <span class="strong"><strong>Menu Canvas</strong></span> slot with the <code class="literal">MenuCanvas</code> game object. To fix this, simply drag and drop the <code class="literal">MenuCanvas</code> game object into the <span class="strong"><strong>Inspector</strong></span> just as you did before.</p><p>Make sure that the <a id="id407" class="indexterm"></a>
<span class="strong"><strong>Clear on Play</strong></span> toggle in your <span class="strong"><strong>Console</strong></span> is switched on. Press <span class="strong"><strong>Play</strong></span>. The error should disappear and everything should work as expected.</p><p>Great! We have created a menu view with a simple, fully working button. The Menu view will be the first view seen by our user. It would be good to include a game name in this view.</p><p>Download and import <code class="literal">GameLogo.unitypackage</code> from the Packt hub. The <code class="literal">GameLogo</code> prefab will be imported into the <code class="literal">Assets/Prefabs/UI</code> folder. Simply drag and drop this prefab onto the <code class="literal">MenuCanvas</code> game object.</p><div class="mediaobject"><img src="/graphics/9781787127272/graphics/B04245_12_20.jpg" /></div><p>A very simple and ugly game logo will appear on the Menu Canvas!</p><p>Feel free to change <a id="id408" class="indexterm"></a>the name of the game and anything else you wish. Hey! At the end of the day, this is your game, right!</p></div>