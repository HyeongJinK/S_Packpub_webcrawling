<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch14lvl1sec123"></a>Adding in points, score, and wave numbers</h2></div></div><hr /></div><p>One<a id="id502" class="indexterm"></a> of the most important things to do in a game is reward <a id="id503" class="indexterm"></a>the player and give them a sense of progression. For now, let's reward the player with a score we <a id="id504" class="indexterm"></a>will display for them and also let the player know exactly which wave he is on. Perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Create a new <span class="strong"><strong>Text</strong></span> object by going to the <span class="strong"><strong>Hierarchy</strong></span> tab and selecting <span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>UI </strong></span> | <span class="strong"><strong>Text</strong></span>.</p><p>You'll notice that three objects get created at this point: <span class="strong"><strong>Canvas</strong></span>, <span class="strong"><strong>Text</strong></span>, and <span class="strong"><strong>Event System</strong></span>. Right now, we only need to worry about <span class="strong"><strong>Text</strong></span>; however, the three objects are all needed in order for Unity's new UI system to function properly. We will be discussing this in much more detail in a later chapter.</p></li><li><p>Next, select<a id="id505" class="indexterm"></a> the <span class="strong"><strong>Text</strong></span> object again and notice that the top of it has a <span class="strong"><strong>Rect Transform</strong></span> component instead of a <span class="strong"><strong>Transform</strong></span>. This is a special transform that is used to position UI elements on the screen relative to other objects that are also part of the UI.</p></li><li><p>In this <a id="id506" class="indexterm"></a>case, we want the text <a id="id507" class="indexterm"></a>to be located in the top-left, but currently you may not be able to see the text at all. You can double-click on the object to zoom out and see it more clearly.</p><div class="mediaobject"><img src="/graphics/9781787127272/graphics/B05212_01_30.jpg" /></div><p>As you can see, the text is much larger than the player, and there seems to be a white box surrounding the object. This is a representation of what the UI will look like, with the white box being the screen. Rect Transform is currently set up to represent a position of (0,0) to be the<a id="id508" class="indexterm"></a> center of the world and currently the text is -21 pixels away from <a id="id509" class="indexterm"></a>the center in the x <a id="id510" class="indexterm"></a>axis and -97 in the y. If we were to change it to (0,0), you'd notice that the text would now be centered.</p><div class="mediaobject"><img src="/graphics/9781787127272/graphics/B05212_01_31.jpg" /></div></li><li><p>Rename the <code class="literal">Text</code> object to <code class="literal">Score Counter</code> and then change the <span class="strong"><strong>Anchors Min Max</strong></span> and <span class="strong"><strong>Pivot </strong></span>properties to (0, 1); then reset <span class="strong"><strong>Pos X</strong></span> to 10 and <span class="strong"><strong>Pos Y</strong></span> to -10 to move them slightly away from the edge of the screen. Lastly, change the <span class="strong"><strong>Color</strong></span> to white to make it easier to see.</p></li><li><p>Now that we <a id="id511" class="indexterm"></a>have the text set up, let's set the font. Bring the <span class="strong"><strong>Font</strong></span> folder into your project. Then, set <span class="strong"><strong>Font</strong></span> to <code class="literal">OSP-DIN</code> and <span class="strong"><strong>Font Size</strong></span> to <code class="literal">25</code>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note53"></a>Note</h3><p>The font used in this project was <a id="id512" class="indexterm"></a>created by the OSP Foundry. For more information about their stuff, check out <a class="ulink" href="http://ospublish.constantvzw.org/foundry/" target="_blank">http://ospublish.constantvzw.org/foundry/</a>.</p></div></li><li><p>Next, duplicate the <span class="strong"><strong>Score Counter</strong></span> object by right-clicking and selecting <span class="strong"><strong>Duplicate</strong></span>. Set <a id="id513" class="indexterm"></a>this duplicate's name to <code class="literal">Waves Counter</code>, and change its text to <code class="literal">Wave: 0</code>.</p></li><li><p>Set the <span class="strong"><strong>Waves Counter</strong></span> object's <span class="strong"><strong>Anchors Min Max</strong></span> and <span class="strong"><strong>Pivot </strong></span>properties to (1, 1) and <a id="id514" class="indexterm"></a>then reset <span class="strong"><strong>Pos X</strong></span> to -10 and <span class="strong"><strong>Pos Y</strong></span> to -10 to move them slightly away from the edge of the screen. Afterward, in the text component, change the <span class="strong"><strong>Alignment</strong></span> to be right aligned horizontally.</p><div class="mediaobject"><img src="/graphics/9781787127272/graphics/B05212_01_33.jpg" /></div></li><li><p>Now that we have our text files created, let's now have them function correctly! First, let's go into the <code class="literal">GameController</code> class. Inside, we will first need to let <a id="id515" class="indexterm"></a>the script know to use Unity's new UI system:</p><div class="informalexample"><pre class="programlisting">using UnityEngine.UI;</pre></div></li><li><p>Afterward, we <a id="id516" class="indexterm"></a>need to create some new variables as follows:</p><div class="informalexample"><pre class="programlisting">  [Header("User Interface")]
  // The values we'll be printing
  private int score = 0;
  private int waveNumber = 0;
  
  // The actual GUI text objects
  public Text scoreText;
  public Text waveText;</pre></div></li><li><p>Next, we <a id="id517" class="indexterm"></a>will need to add a function to call whenever our score increases, as follows:</p><div class="informalexample"><pre class="programlisting">public void IncreaseScore(int increase)
{
  score += increase;
  scoreText.text = "Score: " + score;
}</pre></div><p>The <code class="literal">+=</code> operator will take the current value of the variable and add something additional to it.</p></li><li><p>Then, we'll need to call this function inside our <code class="literal">EnemyBehaviour</code> component. After the <code class="literal">controller.KilledEnemy()</code> line, add the following line:</p><div class="informalexample"><pre class="programlisting">controller.IncreaseScore(10);</pre></div></li><li><p>Finally, whenever we increase the wave number, we need to change its text as well. Back in the <code class="literal">GameController</code> class after the opening { of the <code class="literal">if(currentNumberOfEnemies &lt;= 0)</code> block, add the following lines:</p><div class="informalexample"><pre class="programlisting">waveNumber++;
waveText.text = "Wave: " + waveNumber;</pre></div></li><li><p>Save all of the script files, go back to <span class="strong"><strong>Inspector</strong></span>, and set the <span class="strong"><strong>Score Text</strong></span> and <span class="strong"><strong>Wave Text</strong></span> objects to the proper variables in the <code class="literal">Game Controller</code> object. After that, save your project and run the game. Have a look at the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781787127272/graphics/B05212_01_34.jpg" /></div></li></ol></div><p>And with that, you <a id="id518" class="indexterm"></a>can see that everything<a id="id519" class="indexterm"></a> is working together, killing enemies <a id="id520" class="indexterm"></a>will reward the player points, and killing all of the enemies in a wave triggers the next wave to start!</p></div>