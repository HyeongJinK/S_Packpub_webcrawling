<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch14lvl1sec121"></a>Particle systems for enemy explosion</h2></div></div><hr /></div><p>Now that <a id="id492" class="indexterm"></a>we have the basis for our game, let's spend some time to make the project look nicer. Particle systems are one of my go-to things to add juiciness to a game project and helps to set your project apart from others. Particle systems are composed of two separate parts: a particle and the thing that emits it (called an emitter). A particle is a small object that stores properties; generally, we try to make these objects as simple as possible, as we want to spawn a large number of them. The emitter's job is to spawn a number of these and initialize their properties. Thankfully, Unity has a fully featured particle editor that's included with the engine, and we're going to use it in this section. Perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Create a new particle system by going to <span class="strong"><strong>GameObject</strong></span> | <span class="strong"><strong>Particle System</strong></span>. Have a look at the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781787127272/graphics/B05212_01_26.jpg" /></div><p>Once you do this, you should see a default particle system show up. Do note that the system will only animate if it is the object selected and Unity is the active window.</p></li><li><p>Change<a id="id493" class="indexterm"></a> the object's name to <code class="literal">Explosion</code>. First, under the <span class="strong"><strong>Particle System</strong></span> tab, change <span class="strong"><strong>Duration</strong></span> to <code class="literal">1.00</code>.</p></li><li><p>Click on the arrow on the right-hand side of <span class="strong"><strong>Start Lifetime</strong></span>, and change the values to be <span class="strong"><strong>Random Between Two Constants</strong></span>. Change those values to <code class="literal">0</code> and <code class="literal">1</code>. Do the same with <span class="strong"><strong>Start Speed</strong></span>. Make <span class="strong"><strong>Start Size</strong></span> use random values between <code class="literal">0</code> and <code class="literal">.5</code>.</p></li><li><p>Next, we will set the object's <span class="strong"><strong>Start Color</strong></span> value to the same color as the UFO ship (you can use the eyedropper tool or set it to <code class="literal">210</code>, <code class="literal">224</code>, <code class="literal">230</code>) and an <span class="strong"><strong>Alpha</strong></span> value of <code class="literal">125</code>. Have a look at the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781787127272/graphics/B05212_01_28.jpg" /></div></li><li><p>Open the <span class="strong"><strong>Emission</strong></span> tab, and change <span class="strong"><strong>Rate</strong></span> to <code class="literal">200</code>. This is how many particles are spawned at a time.</p></li><li><p>Open the <span class="strong"><strong>Shape</strong></span> tab, change the <span class="strong"><strong>Shape</strong></span> property to <span class="strong"><strong>Sphere</strong></span>, and then set <span class="strong"><strong>Radius</strong></span> to <code class="literal">.35</code> to fit the rim of the ship. Enable the <span class="strong"><strong>Random Direction</strong></span> option.</p></li><li><p>Go back to the top <span class="strong"><strong>Explosion</strong></span> section and then change <span class="strong"><strong>Simulation Space</strong></span> to <span class="strong"><strong>World</strong></span>; that way, if this object moves, the already-spawned particles will not move. After this, still in the <span class="strong"><strong>Explosion</strong></span> section, uncheck <span class="strong"><strong>Looping</strong></span>.</p></li><li><p>At this <a id="id494" class="indexterm"></a>point, you'll need to click on the <span class="strong"><strong>Stop</strong></span> and <span class="strong"><strong>Simulate</strong></span> buttons to see how the properties change while we make adjustments.</p></li><li><p>Now, make this object a prefab by dragging and dropping it into the <code class="literal">Prefabs</code> folder. After that, delete the <code class="literal">Explosion</code> object in your <span class="strong"><strong>Hierarchy</strong></span> object.</p></li><li><p>Go back to your <code class="literal">EnemyBehaviour</code> script file. We will first want to add in a new variable for us to use to spawn this explosion when it dies:</p><div class="informalexample"><pre class="programlisting">// When the enemy dies, we play an explosion
public Transform explosion;</pre></div></li><li><p>Back in the <span class="strong"><strong>Project</strong></span> tab, drag and drop your new Explosion prefab to fill in the explosion variable slot in our Enemy prefab.</p></li><li><p>Coming back to the <code class="literal">EnemyBehaviour</code> script, let's spawn an explosion whenever we die. Inside your <code class="literal">if(health &lt;= 0)</code> section of <code class="literal">OnCollisionEnter2D</code>, add in the following lines:</p><div class="informalexample"><pre class="programlisting">// Check if explosion was set
if(explosion)
{
  GameObject exploder = ((Transform)Instantiate(explosion, this.transform.position, this.transform.rotation)).gameObject;
  Destroy(exploder, 2.0f);
}</pre></div><p>As you can see here, we use the Instantiate function in order to create an explosion and we call the Destroy function to have it automatically delete itself (the first parameter) after 2 seconds as passed (the second parameter).</p></li><li><p>Save your script and scene files, and run your project! Have a look at the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781787127272/graphics/B05212_01_29.jpg" /></div></li></ol></div><p>And now, whenever <a id="id495" class="indexterm"></a>an enemy dies, it will spawn an explosion for us to see!</p></div>