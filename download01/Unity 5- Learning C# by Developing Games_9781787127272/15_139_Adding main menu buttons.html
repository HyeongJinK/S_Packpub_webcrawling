<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch15lvl1sec130"></a>Adding main menu buttons</h2></div></div><hr /></div><p>Now that we have the text<a id="id550" class="indexterm"></a> displaying correctly, let's add in the ability to move from the main menu into the game and quit the game.</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Start off by going to the top menu bar and then selecting <span class="strong"><strong>GameObject | UI | Button</strong></span>.</p><p>At this point, you will see a new child object to the <span class="strong"><strong>Canvas</strong></span> called <span class="strong"><strong>Button</strong></span> and if you were to extend that object, you'd see that it has a Text child as well.</p></li><li><p>Next, let's learn a new way that we can position objects. From the <span class="strong"><strong>Hierarchy</strong></span> tab, select the <code class="literal">Button </code>object and open up the <span class="strong"><strong>Anchors Preset </strong></span>menu and from there select the <span class="strong"><strong>bottom-stretch</strong></span> option.</p><div class="mediaobject"><img src="/graphics/9781787127272/graphics/B05212_02_11.jpg" /></div><p>Notice now that <span class="strong"><strong>Pos X </strong></span>and <span class="strong"><strong>Width</strong></span> have been replaced with a <span class="strong"><strong>Left </strong></span>and <span class="strong"><strong>Right</strong></span> value. When we use the stretch option, it will scale the object either horizontally or vertically depending on your choice. The <span class="strong"><strong>Left </strong></span>and <span class="strong"><strong>Right</strong></span> values are how far to the left or right in pixels that the center of the object will be based.</p></li><li><p>Change the <span class="strong"><strong>Left </strong></span>and <span class="strong"><strong>Right</strong></span> values to <code class="literal">300</code> to center the object with 300 pixels on each side. Then, change <span class="strong"><strong>Pivot Y</strong></span> to<code class="literal"> 0</code> to base our positions to offset via the top and then <a id="id551" class="indexterm"></a>change the <span class="strong"><strong>Pos Y</strong></span> value to <code class="literal">100</code> to move the object 100 pixels above the bottom of the screen.</p></li><li><p>From the <span class="strong"><strong>Hierarchy</strong></span> tab, expand the <code class="literal">Button</code> object and change the button's text child's text value to <code class="literal">Start Game</code>. </p></li><li><p>Now that our button exists and is positioned correctly, let's customize how it looks. Change <span class="strong"><strong>Font</strong></span> to <code class="literal">OSP-DIN</code> and change <span class="strong"><strong>Font Size</strong></span> to <code class="literal">25</code>.</p></li><li><p>Now that we have the text customized, let's customize the button's visibility. From <span class="strong"><strong>Hierarchy</strong></span>, select the <code class="literal">Button</code> object and from <span class="strong"><strong>Inspector </strong></span>scroll down to the <span class="strong"><strong>Button</strong></span> component. From there, you'll see a number of colors and a target graphic that will be tinted when you mouseover or click on the button (try playing the game and interacting with the button to see the default behaviour).</p></li><li><p>We'll be replacing this default behavior so that instead of using colors, we will be changing the image used. To do that, go into the <code class="literal">Example Code </code>folder and bring the contents of the <code class="literal">Art Assets</code> folder for <span class="emphasis"><em>Chapter 2</em></span> into the <code class="literal">Sprites</code> folder from our <span class="strong"><strong>Project </strong></span>tab.</p></li><li><p>After that, change <span class="strong"><strong>Transition</strong></span> to <code class="literal">Sprite Swap</code> and then for <span class="strong"><strong>Highlighted Sprite</strong></span> put in <code class="literal">buttonYellow</code>, <span class="strong"><strong>Pressed Sprite</strong></span> to <code class="literal">buttonGreen</code>, and <span class="strong"><strong>Disabled Sprite</strong></span> to<a id="id552" class="indexterm"></a> <code class="literal">buttonDisabled</code>. </p></li><li><p>Finally, in the <span class="strong"><strong>Image</strong></span> component under <span class="strong"><strong>Source Image</strong></span>, put in <code class="literal">buttonBlue</code>. Afterward, change <span class="strong"><strong>Image Type</strong></span> to <span class="strong"><strong>Sliced</strong></span>. You'll notice that there is an error saying it doesn't have a border, and that's true.</p></li><li><p>From the <span class="strong"><strong>Project</strong></span> tab, open up the <span class="strong"><strong>Sprites</strong></span> folder and then select the <code class="literal">buttonBlue</code> sprite. From <span class="strong"><strong>Inspector</strong></span>, you'll see the properties for <span class="strong"><strong>Sprite</strong></span> and a button called <span class="strong"><strong>Sprite Editor</strong></span>. Click on it and you'll be able to see properties for how the sprite will be drawn. It's also used for animations, but in this case we are going to establish a border. For L (left), R (right), T (top), and B (bottom) put in 10 and then click on the <span class="strong"><strong>Apply</strong></span> button.</p><div class="mediaobject"><img src="/graphics/9781787127272/graphics/B05212_02_12.jpg" /></div><p>What this will do is anytime we create a sprite using the Sliced type and change the width and height, the four non-cardinal corners will not scale but the <a id="id553" class="indexterm"></a>others will, allowing us to create boxes of whatever size we want. Pretty nifty, huh?</p></li><li><p>Create the same borders for the other button sprites.</p></li><li><p>Now, let's create our <span class="strong"><strong>Exit Game</strong></span> button. From the <span class="strong"><strong>Hierarchy</strong></span> tab, select the <span class="strong"><strong>Button</strong></span> object and press <span class="emphasis"><em>Ctrl + D</em></span>. Change the object's name to <span class="strong"><strong>Exit Game</strong></span> and <span class="strong"><strong>Pos Y</strong></span> to <code class="literal">50</code>. Back in <span class="strong"><strong>Hierarchy</strong></span>, open up the <span class="strong"><strong>Exit Game</strong></span> object and change the Text's text to <span class="strong"><strong>Exit Game</strong></span>.</p><div class="mediaobject"><img src="/graphics/9781787127272/graphics/B05212_02_13.jpg" /></div><p>We now have two customized buttons that look great, but aren't functional. Let's fix that now. </p></li><li><p>To have functionality when we click the button, we will need to have a method to call, and for us to be able to set it up via <span class="strong"><strong>Inspector</strong></span> that means we need to have a game object that has that function as part of it. So with that in mind, let's create a <a id="id554" class="indexterm"></a>new empty game object by going to <span class="strong"><strong>GameObject</strong></span> | <span class="strong"><strong>Create Empty</strong></span>. Change this new object's name to <code class="literal">MainMenuBehaviour</code> and drag it up to the top of your <span class="strong"><strong>Hierarchy</strong></span> for easy access.</p></li><li><p>Now that we have an object, let's give it a script to contain the functionality that we want. Select the <span class="strong"><strong>Main Menu Behaviour</strong></span> object and click on the <span class="strong"><strong>Add Component</strong></span> button from <span class="strong"><strong>Inspector</strong></span>. From there, give it a name of <code class="literal">MainMenuBehaviour</code>, make sure the language is set to C#, and then select <span class="strong"><strong>Create</strong></span> and <span class="strong"><strong>Add</strong></span>. This will create a new script and attach it for us automatically. This is created in the <code class="literal">Assets</code> folder, so go ahead into the <span class="strong"><strong>Project</strong></span> tab and move the script into the <code class="literal">Scripts</code> folder and then double-click on it to enter your IDE of course.</p></li><li><p>Once your IDE has opened, use the following code:</p><div class="informalexample"><pre class="programlisting">using UnityEngine;
using UnityEngine.SceneManagement;

public class MainMenuBehaviour : MonoBehaviour 
{

    public void LoadLevel(string levelName)
    {
  SceneManager.LoadScene(levelName);
    }

    public void QuitGame()
    {
        #if UNITY_EDITOR
            UnityEditor.EditorApplication.isPlaying=false;
        #else
            Application.Quit();
        #endif
    }
}</pre></div><p>The <code class="literal">LoadScene</code> function will load a level based on a name that we provide to it and the <code class="literal">QuitGame</code> function will either set the editor to no longer play if we are in the Unity Editor, and will quit the game if we are playing an exported version.</p></li><li><p>Save the script and <a id="id555" class="indexterm"></a>go back to the Unity editor. Currently, our gameplay level is named <code class="literal">Chapter_1</code>, but that's not terribly descriptive. From the <span class="strong"><strong>Project</strong></span> tab, open the <span class="strong"><strong>Scenes</strong></span> folder and rename the level to <code class="literal">Gameplay</code> by selecting it and then clicking on its name.</p></li><li><p>Select your <span class="strong"><strong>Start Game</strong></span> button and from there go to the <span class="strong"><strong>Inspector</strong></span> tab and scroll down to the <code class="literal">Button</code> component. From there, in the <code class="literal">On Click ()</code> section, click on <span class="strong"><strong>+</strong></span> to add something for our button to do.</p></li><li><p>From there, drag and drop the <code class="literal">Main Menu Behaviour</code> object from the <span class="strong"><strong>Hierarchy</strong></span> tab to the area that currently says None (Object) that's just been added to the list.</p></li><li><p>Click on the dropdown that currently says <span class="strong"><strong>No Function</strong></span> and then select <span class="strong"><strong>MainMenuBehaviour</strong></span> | <span class="strong"><strong>LoadLevel</strong></span>. Then in the textbox that appeared below, type in <code class="literal">Gameplay</code>.</p><div class="mediaobject"><img src="/graphics/9781787127272/graphics/B05212_02_14.jpg" /></div></li><li><p>Next, select the <span class="strong"><strong>Exit Game</strong></span> object and then add an <code class="literal">OnClick</code> action just like we did before, except this time call <span class="strong"><strong>MainMenuBehaviour</strong></span> | <span class="strong"><strong>Quit Game</strong></span>.</p></li><li><p>Lastly, open up <a id="id556" class="indexterm"></a>our <span class="strong"><strong>Build Settings</strong></span> like before by going to <span class="strong"><strong>File</strong></span> | <span class="strong"><strong>Build Settings</strong></span> and add our <code class="literal">Main_Menu</code> to your list at index 0 by selecting <span class="strong"><strong>Add Open Scenes</strong></span> and then dragging the <code class="literal">Main_Menu</code> level to the top so it will be the level that starts off when we start the game.</p></li><li><p>Save your project and scene and hit the <span class="strong"><strong>Play</strong></span> button.</p><div class="mediaobject"><img src="/graphics/9781787127272/graphics/B05212_02_15.jpg" /></div></li><li><p>At this point, our main menu is working perfectly!</p></li></ol></div></div>