<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec32"></a>Learning to use the Unity Tree editor</h2></div></div><hr /></div><p>The <a id="id195" class="indexterm"></a>Tree editor is a native Unity feature that enables the creation of any kind of tree as long as they have branches and something growing on them (usually leaves).</p><p>Before we start working with the Tree editor, make sure that you have the Environment package imported from <span class="strong"><strong>Assets</strong></span> | <span class="strong"><strong>Import Package</strong></span> | <span class="strong"><strong>Environment</strong></span>. We will require some assets from it. We can create our first tree to work with from <span class="strong"><strong>GameObject</strong></span> | <span class="strong"><strong>3D Object</strong></span> | <span class="strong"><strong>Tree</strong></span>.</p><p>After selecting the tree and looking in the <span class="strong"><strong>Inspector</strong></span> window, you will see a GameObject with a Tree component attached to it. This is where all the tools related to tree creation nest.</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_03_33.jpg" /></div><p>The tree creation feature is quite complex and contains a large amount of sliders, graphs, and parameters that will help you to adjust the tree to your liking. However, in this book, we will skip most of it and focus on the bare minimum of what you need to know in order to create your own tree in Unity.</p><p>The tree consists of three major components: a base (also known as tree <span class="strong"><strong>root node</strong></span>), a branch (<span class="strong"><strong>branch group</strong></span>), and a branch object (<span class="strong"><strong>leaf group</strong></span>). The way they are structured is very intuitive: tree root node is at the base of the hierarchy; all other groups will be attached to it, or its children. Then, we have branch groups that can be parented to a tree root node or another branch group, allowing them to grow and split in multiple directions just like real trees do. On the top of branch groups, we can add leaf groups and adjust them to cover the area of that specific group in leaves.</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_03_34.jpg" /></div><p>So there we go, that's<a id="id196" class="indexterm"></a> how it works in theory. In Unity, whenever you create a new tree instance, it comes with a tree root node and a branch group as a default setup. The branch group here plays the role of a trunk. If you click on it in the <span class="strong"><strong>Inspector</strong></span> window, you will notice that a tree gets highlighted and a trunk breaks down into multiple nodes in the <span class="strong"><strong>Scene</strong></span> view. These nodes can be manipulated using Move Branch and Rotate Branch tools in the <span class="strong"><strong>Inspector</strong></span> window. They can also be deleted by selecting and clicking on the <span class="emphasis"><em>Delete</em></span> button on your keyboard, or created using the Free Hand tool. To use the Free Hand Tool, select a node and start drawing on your screen: new nodes will be created in set intervals.</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_03_35.jpg" /></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note20"></a>Note</h3><p>Keep in mind that all the nodes that are above the node that you are drawing from, will be deleted automatically.</p></div><p>An important<a id="id197" class="indexterm"></a> parameter of a branch group that you need to keep in mind, is <span class="strong"><strong>frequency</strong></span>. It controls the number of branches created for each group. Just set this parameter to whichever number you want and adjust the newly created branches to your liking. Make sure you adjust this parameter before you go in and start manually adjusting branch position and length, otherwise it will become unavailable.</p><p>As stated earlier, you can have multiple branch groups with some complex hierarchy:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select a Branch Group that you have in your Inspector window.</p></li><li><p>Click on the Add Branch Group button:</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_03_36.jpg" /></div></li></ol></div><p>With a new branch group added, you can now adjust frequency and start removing branches wherever you don't need them. If you already have multiple branch groups and wish to change the hierarchy, simply drag and drop the branch group onto the one you wish to parent it to. Leaf groups work in a very similar manner.</p><p>To add a leaf group, select a branch group and click on Add Leaf Group.</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_03_37.jpg" /></div><p>Frequency is still your go-to parameter for controlling the number of leaves on each member of the branch group. Later, you can manually place the leaves with a mouse. Keep in mind that you can't detach a leaf from the branch it was created on.</p><p>Another interesting option worth mentioning is the <span class="strong"><strong>Geometry</strong></span> mode for leaves. It allows you to change the representation of one leaf unit on your tree to one of the following:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Plane</strong></span>: This is the default mode in which a leaf will be represented with a single plane.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Cross</strong></span>: With this option, it will change to two planes being crossed.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>TriCross</strong></span>: With this, you get three planes.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Billboard</strong></span>: This is a single plane that will always face the camera.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Mesh</strong></span>: This represents a leaf as a 3D mesh.</p></li></ul></div><p>The last step is <a id="id198" class="indexterm"></a>applying materials to our tree. As a bare minimum, we will require two materials: one for branches and one for leaves. To apply materials to the tree, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Go through each branch group in your tree editor and assign a <span class="strong"><strong>Tree_bark</strong></span> material from the imported files, to the <span class="strong"><strong>Branch</strong></span> <span class="strong"><strong>Material</strong></span> property (under <span class="strong"><strong>Geometry </strong></span>settings).</p></li><li><p>Do the same thing for each Leaf Group: assign the <span class="strong"><strong>Tree_leaves</strong></span> material to the <span class="strong"><strong>Material</strong></span> property (also under <span class="strong"><strong>Geometry</strong></span>).</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_03_38.jpg" /></div></li></ol></div><p>The leaf group is not only limited to actual leaves; you can also add fruits and any other kinds of detail.</p><p>One thing that you need to remember when creating your own materials for trees is that only those from the Nature category can be applied to branches or leaves.</p><p>Unity will issue a warning should the selected material type be inappropriate and will suggest changing the type by clicking on the <span class="strong"><strong>Apply</strong></span> button. Naming conventions mentioned in the message are programming relatedâ€”the actual material naming has no restrictions.</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_03_39.jpg" /></div><p>Now you can create a prefab and include your custom tree to the palette of your terrain and paint it.</p><p>This concludes <a id="id199" class="indexterm"></a>our introduction to the Tree Creator. There are a lot more options available in there, and a lot more ways to control and customize your trees. If realistic trees are something you require in your project, I strongly recommend you explore this tool a little bit more.</p><p>With the recent addition of SpeedTree support for tree creation, you can now import vegetation created in the SpeedTree app into Unity. The <span class="strong"><strong>Palm_Desktop</strong></span> tree that we used earlier was created using SpeedTree.</p></div>