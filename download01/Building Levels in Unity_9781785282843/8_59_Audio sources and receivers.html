<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch08lvl1sec58"></a>Audio sources and receivers</h2></div></div><hr /></div><p>The way the audio works in <a id="id507" class="indexterm"></a>Unity is <a id="id508" class="indexterm"></a>no different from the real life that it's trying to imitate, and it all comes down to collaboration between objects that emit sounds and those that receive them. In Unity, both of them are components, known as <a id="id509" class="indexterm"></a>
<span class="strong"><strong>Audio Source</strong></span> and <a id="id510" class="indexterm"></a>
<span class="strong"><strong>Audio Listener</strong></span>. Being components, they can be attached to any GameObject via the <span class="strong"><strong>Add Component</strong></span> menu in the <span class="strong"><strong>Inspector</strong></span> window:</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_08_01.jpg" /></div><p>Alternatively, you can create an empty GameObject with an audio source or reverb zone by navigating to <span class="strong"><strong>GameObject</strong></span> | <span class="strong"><strong>Audio</strong></span> in the top menu.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note27"></a>Note</h3><p>For future references, we will use the <span class="strong"><strong>Audio Source</strong></span> created from the top menu.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec90"></a>Audio listener</h3></div></div></div><p>Unlike the audio source, we already have an <span class="strong"><strong>Audio Listener</strong></span>
<a id="id511" class="indexterm"></a> present in every scene by default; it's attached to the <span class="strong"><strong>MainCamera</strong></span> object.</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_08_02.jpg" /></div><p>
<span class="strong"><strong>Audio Listener</strong></span> doesn't have any parameters and all it needs to function is to simply exist in the scene. There is, however, one rule that should be followed when dealing with audio listeners:</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note28"></a>Note</h3><p>The Scene always has to have exactly one active audio listener.</p></div><p>If you've accidentally <a id="id512" class="indexterm"></a>placed two, Unity will send you a message and will ignore the other one upon play. The reasoning behind that is quite simple—you can't play the same sound to multiple listeners and expect them to be perceived correctly; it simply won't sound right and you will not be able to orientate yourself in the space.</p><p>There are some niche situations that you will have to work around using clever coding—imagine looking at the monitor screen of a security camera. In this situation, we need to hear actions happening around us, as well as in the area that we see with the camera. This can be cheated by adjusting the audio sources from the camera area to sound like they are close by or forcibly move them to be played from the speaker location. We aren't going to imitate that specifically, but most similar scenarios can be cheated in one way or another to work around this limitation.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec91"></a>Audio source</h3></div></div></div><p>The listener picks up every sound that <a id="id513" class="indexterm"></a>reaches its location. In order to emit that sound, we need to have an <span class="strong"><strong>Audio Source</strong></span> that will control how this sound will be emitted in order to make sure that the <span class="strong"><strong>Listener</strong></span> picks it up.</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_08_03.jpg" /></div><p>Let's walk-through some of its <a id="id514" class="indexterm"></a>properties and how they influence the sound:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>AudioClip</strong></span>: This is an audio file that will be played by <span class="strong"><strong>Audio Source</strong></span> (we will look into it shortly).</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Output</strong></span>: This allows us to control this sound effect with <span class="strong"><strong>Audio Mixer</strong></span> by assigning an <span class="strong"><strong>Audio Group</strong></span> to this parameter (again, we will talk more about this when we look at <span class="strong"><strong>Audio Mixer</strong></span>).</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Mute</strong></span>: This simply mutes the sound effect.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Bypass Effects</strong></span>, <span class="strong"><strong>Bypass Listener Effects</strong></span> and <span class="strong"><strong>Bypass Reverb Zone</strong></span>: This allows us to bypass (ignore) all effects and filters applied to <span class="strong"><strong>Audio Source</strong></span>.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Play On Awake</strong></span>: Checking this box will play the sound upon starting the game. That is also the only way, outside of scripting, to force the sound to play.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Loop</strong></span>: This loops the audio track, good for ambient music.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Priority</strong></span>: This one is important. Despite having no limitations to a number of sound emitters, we need to keep in mind that some of them may overlap, and a system will have to make a decision which one to give a priority to when playing. This parameter will allow you to control this decision making by giving the sounds that you never want to be interrupted a lower value (such as background music). The priority ranges from <code class="literal">0</code> to <code class="literal">256</code>, but it's much easier to use a slider with indicators to intuitively set the correct value.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Volume</strong></span>: This sets the overall volume of this sound.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Pitch</strong></span>: This controls the play speed. It ranges from <code class="literal">-3</code> to <code class="literal">3</code> with <code class="literal">1</code> being the default.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Stereo Pan</strong></span>: This <a id="id515" class="indexterm"></a>controls the 2D sound to be played from the right or left side of a stereo set up (for 3D sounds, it will be adjusted based on the listener position).</p></li></ul></div><p>These parameters are the barebones of the audio source.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec92"></a>Audio clips</h3></div></div></div><p>Every supported audio file that <a id="id516" class="indexterm"></a>you import, will immediately become an <span class="strong"><strong>Audio Clip</strong></span>, which is simply a container for the audio data.</p><p>There are four audio file formats that are supported by Unity: <code class="literal">.aiff</code>, <code class="literal">.ogg</code>, <code class="literal">.wav</code>, and <code class="literal">.mp3</code>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note29"></a>Note</h3><p>Unity also supports tracker modules of the following formats: <code class="literal">.xm</code>, <code class="literal">.mod</code>, <code class="literal">.it</code>, and <code class="literal">.s3m</code>
</p></div><p>By importing unsupported formats, you will not be able to utilize them, so make sure to convert those first.</p><p>You can find sound effects by navigating to <span class="strong"><strong>Chapter 8</strong></span> | <span class="strong"><strong>Sound Effects</strong></span> inside the <span class="strong"><strong>Project</strong></span> window to follow the book's material.</p><p>The import settings are used to control the compression of the audio data, which happens automatically on import. Compression allows you to reduce and control memory used by the audio data at a cost of dealing with performance overheads and reduction in sound quality. Unless you are looking for a way to optimize your level as much as possible, you can leave options at their default values.</p><p>The only option that can be of use at the introductory level is the <span class="strong"><strong>Force to Mono</strong></span> checkbox that will downgrade mix channels to a single one.</p><p>At the bottom of <span class="strong"><strong>Import Settings</strong></span>, you will find a <span class="strong"><strong>Preview</strong></span> window with an audio wavelength, technical information, and play controls.</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_08_04.jpg" /></div><p>Play controls are listed in the following table:</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; "><colgroup><col align="left" /><col align="left" /></colgroup><thead><tr><th style="border-bottom: 0.5pt solid ; " align="left" valign="bottom">
<p>Controls</p>
</th><th style="border-bottom: 0.5pt solid ; " align="left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="" align="left" valign="top">
<div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_08_05.jpg" /></div>
</td><td style="" align="left" valign="top">
<p>This plays the sound track</p>
</td></tr><tr><td style="" align="left" valign="top">
<div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_08_06.jpg" /></div>
</td><td style="" align="left" valign="top">
<p>This loops the track</p>
</td></tr><tr><td style="" align="left" valign="top">
<div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_08_07.jpg" /></div>
</td><td style="" align="left" valign="top">
<p>This enables automatic play upon selecting <span class="strong"><strong>Audio Clip</strong></span> in the <span class="strong"><strong>Hierarchy</strong></span> window</p>
</td></tr></tbody></table></div><p>One interesting trick<a id="id517" class="indexterm"></a> that you can pull off with <span class="strong"><strong>Audio Clips</strong></span> is to drag and drop them into the Scene. Dropping into the empty space you will create an empty GameObject with the <span class="strong"><strong>Audio Source</strong></span> component and a dragged audio file as the <span class="strong"><strong>AudioClip</strong></span> parameter assigned to it. Dropping on the existing GameObject will attach an <span class="strong"><strong>Audio Source</strong></span> component to it and replace the top most <span class="strong"><strong>Audio Source</strong></span> component that is already attached to it (if any).</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec93"></a>2D versus 3D sounds</h3></div></div></div><p>There are two kinds of <a id="id518" class="indexterm"></a>sounds that are possible to emit by <span class="strong"><strong>Audio Sources</strong></span>—those that play in the background with no indication of where they are coming from (ambient sounds and background music), and those that have a clear source with an ability to fade away with distance (conversation, alarm signal, speaker sound, and so on). In Unity, they are labeled as 2D and 3D sounds as a prime difference between them is a concept of depth.</p><p>You can make any kind of sound 2D or 3D by controlling the <span class="strong"><strong>Spatial Blend</strong></span> parameter in the <span class="strong"><strong>Audio Source</strong></span> component.</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_08_08.jpg" /></div><p>You can test the effect yourself by positioning <span class="strong"><strong>Audio Source</strong></span> next to the listener in the scene and moving the slider left and right. 2D sound will have an effect as if it's coming from everywhere, while the location of 3D sound will be easy to point out.</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_08_09.jpg" /></div><p>While the 2D sound<a id="id519" class="indexterm"></a> can be easily controlled with the already discussed parameters, 3D sounds, due to their reliance on depth, have a set of their own parameters hidden under the <span class="strong"><strong>3D Sound Settings</strong></span> drop-down list of the <span class="strong"><strong>Audio Source</strong></span> component:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Doppler Level</strong></span>: This controls the amount of influence that a relative velocity of listener or source has on the sound pitch. Think about the change in sound frequency a train has as it transitions from approaching to and passing right next to you. This parameter can influence that change.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Volume Rolloff</strong></span>: These are presets for the change in the sound volume based on the distance between the source and a listener. You need to choose among <span class="strong"><strong>Logarithmic</strong></span>, <span class="strong"><strong>Linear</strong></span>, or <span class="strong"><strong>Custom</strong></span> rolloffs:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Linear</strong></span>: This will make sound volume to tune down the further you are away from the source at a constant pace (linear reduction)</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Logarithmic</strong></span>: This will increase the pace, the further you are from the source (the further you are, higher the pace of degradation)</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Custom</strong></span>: This will allow you to set your own preferences, which we will look into shortly</p></li></ul></div></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Min Distance</strong></span>: This is a distance at which <span class="strong"><strong>Volume Rolloff</strong></span> will start to take effect.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Spread</strong></span>: This controls the spread angle of the speaker space—useful for 3D and multi-channel sounds.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Max Distance</strong></span>: This is a distance at which you stop controlling the sound rolloff. It's not necessarily a distance at which the sound is not playing anymore.</p></li></ul></div><p>The following is a<a id="id520" class="indexterm"></a> demonstration of minimum and maximum distance:</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_08_10.jpg" /></div><p>As you can see, there are two spheres around <span class="strong"><strong>Audio Source</strong></span>. The inner sphere is a boundary of <span class="strong"><strong>Min Distance</strong></span> (currently set to <code class="literal">1</code>) and the outer sphere is a boundary for <span class="strong"><strong>Max Distance</strong></span> (currently set to <code class="literal">2</code>, but it's usually defaulted to <code class="literal">500</code>, which means you won't normally see it). The <span class="strong"><strong>Main Camera</strong></span> object with a listener is located outside of both spheres; however, if we have <span class="strong"><strong>Logarithmic Rolloff</strong></span> selected, we will still be able to hear the sound playing. Should we switch to <span class="strong"><strong>Linear Rolloff</strong></span>, the sound will disappear as soon as we get out of the <span class="strong"><strong>Max Distance</strong></span> range.</p><p>The reason why this is happening is quite simple: the rolloff for the volume (and a few other parameters) is<a id="id521" class="indexterm"></a> controlled by the graph at the bottom of the <span class="strong"><strong>Audio Source</strong></span> component:</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_08_11.jpg" /></div><p>The graph is drawn as a relation between distance to the <span class="strong"><strong>Listener</strong></span> (<span class="emphasis"><em>x</em></span> axis) and a numeric value of the parameter (<span class="emphasis"><em>y</em></span> axis), in this case, <span class="strong"><strong>Volume</strong></span>. Choosing <span class="strong"><strong>Logarithmic</strong></span> or <span class="strong"><strong>Linear</strong></span> will give you one of the two available presets for <span class="strong"><strong>Volume Rolloff</strong></span>. Attempting to manually modify curve values will cause it to automatically switch to <span class="strong"><strong>Custom Rolloff</strong></span>. By the way, rolloff curve controls are identical to those of custom <span class="strong"><strong>Animation</strong></span> curves discussed in <a class="link" href="#" linkend="ch04">Chapter 4</a>, <span class="emphasis"><em>Dealing with Basic Animations</em></span>, which means you can add, manipulate keys and control the curves with tangents to tailor it to your needs.</p></div></div>