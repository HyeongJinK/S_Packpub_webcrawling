<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec26"></a>Creating the terrain using heightmaps</h2></div></div><hr /></div><p>Scale is one of the most <a id="id160" class="indexterm"></a>common issues that designers face when <a id="id161" class="indexterm"></a>dealing with terrain for the first time. The process of fixing the scale can lead to a lot of frustration, and to re-edit large parts of the terrain, you can't simply shrink or extend selected areas with the default toolset; you have to manually redraw them. Thankfully, there is an easy way to get close to what we want in the first attempt, and that's by using heightmaps.</p><p>Heightmaps work in the same way as brushes; the engine interprets the grayscale colors as elevation data and applies it to the terrain. They can be easily created with any app that supports exporting in the <code class="literal">.raw</code> format (such as GIMP and Photoshop).</p><p>To increase our precision with the heightmap, we could take a top-down screenshot of the greyblock level and use the location of the placed primitives as reference points while drawing.</p><p>Let's look at how to create our own heightmaps using GIMP 2.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec40"></a>Drawing a heightmap</h3></div></div></div><p>Start by creating <a id="id162" class="indexterm"></a>a new image with the following characteristics:</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_03_09.jpg" /></div><p>Heightmaps in<a id="id163" class="indexterm"></a> Unity follow a very simple rule: their size has to be a power of 2 + 1 pixel (512 is your usual size, power of 2 + 1 will make it 513, which we are going to use).</p><p>In the case of heightmaps, we will be working with shades of gray, so going for a grayscale color mode is the obvious choice.</p><p>The actual heightmap is just a black and white image: the brighter the area the higher it will raise the terrain.</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_03_10.jpg" /></div><p>By importing the<a id="id164" class="indexterm"></a> screenshot from the greyblock, we can easily tell where and how to paint our heightmap. Don't worry about how high the white areas are going to appear on the terrain—at this point, it's all about the tone and where you want the change of elevation to happen. In this example, we want to have a stream running across the level and allow the player to approach it by walking down the hill.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec41"></a>Exporting a heightmap</h3></div></div></div><p>Now that our <a id="id165" class="indexterm"></a>heightmap is drawn, we need to export it in the <code class="literal">.raw</code> format—the only format that Unity will accept. Follow these steps to export the heightmap:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Go to <span class="strong"><strong>File</strong></span> | <span class="strong"><strong>Export As…</strong></span>.</p></li><li><p>Under <span class="strong"><strong>Select File Type</strong></span>, scroll down and select <span class="strong"><strong>Raw image data</strong></span>.</p></li><li><p>Name your file.</p></li><li><p>Click on <span class="strong"><strong>Export</strong></span>.</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_03_11.jpg" /></div></li><li><p>In the <a id="id166" class="indexterm"></a>following window, make sure that you select <span class="strong"><strong>Planar (RRR,GGG,BBB)</strong></span> option under <span class="strong"><strong>RGB Save Type</strong></span>:</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_03_12.jpg" /></div></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec42"></a>Applying heightmap to a terrain</h3></div></div></div><p>Back to Unity! At<a id="id167" class="indexterm"></a> the <a id="id168" class="indexterm"></a>very bottom of <span class="strong"><strong>Terrain Settings</strong></span> (rightmost tab with a cog sign), there is a <span class="strong"><strong>Heightmap</strong></span> category with two options:</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_03_13.jpg" /></div><p>
<span class="strong"><strong>Export Raw…</strong></span> allows us to export the current heightmap and modify it.</p><p>
<span class="strong"><strong>Import Raw…</strong></span> allows us to use our own heightmap on the current terrain, which is what we are looking for.</p><p>Clicking on the <span class="strong"><strong>Import Raw…</strong></span> button and choosing our heightmap will open an <span class="strong"><strong>Import Heightmap</strong></span> window. For successful import, we need to make sure that the following options are set correctly:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Depth</strong></span> should be at <span class="strong"><strong>8bit</strong></span>
</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Width</strong></span> and <span class="strong"><strong>Height</strong></span> should correspond to the <span class="strong"><strong>X</strong></span> and <span class="strong"><strong>Y</strong></span> values of our heightmap (513 x 513)</p></li><li style="list-style-type: disc"><p>Depending on your operating system, <span class="strong"><strong>Byte</strong></span> <span class="strong"><strong>Order</strong></span> should be set to <span class="strong"><strong>Windows</strong></span> or <span class="strong"><strong>Mac</strong></span>
</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Terrain Size</strong></span> can be left as is, or modified to your preference (100x30x100 in our case)</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_03_14.jpg" /></div></li></ul></div><p>That should <a id="id169" class="indexterm"></a>do it, and by the end of it, you should have <a id="id170" class="indexterm"></a>your terrain shaped in accordance with your heightmap.</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_03_15.jpg" /></div><p>Drawn heightmaps can be a little rough, so make sure to invest some time in polishing it with terrain tools afterwards.</p><p>When it<a id="id171" class="indexterm"></a> comes to heightmap creation, there are a lot of apps<a id="id172" class="indexterm"></a> that you can use to generate them: Photoshop, Maya, Blender, World Machine, Terragen, ZBrush, and so on. GIMP 2 is used in this example for convenience since it's free and anybody can get a hold of it.</p></div></div>