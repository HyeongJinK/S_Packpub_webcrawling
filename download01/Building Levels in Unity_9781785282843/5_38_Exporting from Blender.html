<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch05lvl1sec40"></a>Exporting from Blender</h2></div></div><hr /></div><p>Our character is fully <a id="id258" class="indexterm"></a>modeled, rigged, skinned, and animated<a id="id259" class="indexterm"></a> in Blender.</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_05_01.jpg" /></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec58"></a>Model overview</h3></div></div></div><p>This file contains all of <a id="id260" class="indexterm"></a>the information about our character, there are no references of any kind, and all animations are done on a single timeline.</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_05_02.jpg" /></div><p>The file is named <code class="literal">Robot.fbx</code> and can be found inside the <code class="literal">Chapter 5</code> folder of the complimentary files.</p><p>Apart from the geometry<a id="id261" class="indexterm"></a> and the skeleton, it also contains a pair of IK handles for legs and arms. In the end, we have a very basic character ready to be used for video games. You can try to challenge yourself and bring a high-poly model with a fancy rig and a complex set of animations, but that will only equate to doing extra tweaking in Unity further down the line and there are certain limitations posed by Unity that will encourage you to keep it as optimal as possible.</p><p>Let's talk about the skeleton. In order for your character to be working in Unity, you don't have to go out of your way and force a certain bone topology. However, if you are building a humanoid, it should have a bone topology similar to humanoids—no three legged/ four armed creatures can actually be considered humanoids by Unity standards, but can still be imported and used.</p><p>The skeleton structure of our character is not a template by any stretch of the imagination and you don't have to follow it; work with what you feel comfortable with and I'll show you how to communicate your preference to Unity later in this chapter.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec59"></a>Exporting as FBX</h3></div></div></div><p>In this section we are <a id="id262" class="indexterm"></a>going to look into how to export the character into<a id="id263" class="indexterm"></a> FBX using Blender, a <code class="literal">.blend</code> file can be found in the same folder as the <code class="literal">Robot.fbx</code>. This character is ready to be exported. There are a few general things to consider before we get it into Unity:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Character stands solidly on the ground at <code class="literal">0</code>,<code class="literal">0</code>,<code class="literal">0</code> coordinates</p></li><li style="list-style-type: disc"><p>Character is scaled properly</p></li><li style="list-style-type: disc"><p>Check your T-pose to make sure that the palms are facing the ground</p></li><li style="list-style-type: disc"><p>Check your normals to make sure they are facing the right direction</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note22"></a>Note</h3><p>1 Unity unit equals to 1 meter; for better optimization and smoother import make sure to scale your character in the 3D app, accordingly.</p></div></li></ul></div><p>Unity supports the <code class="literal">.blend</code> file <a id="id264" class="indexterm"></a>extension; therefore, we can simply import it directly<a id="id265" class="indexterm"></a> or export it to the <code class="literal">.fbx</code> file format in the following manner:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>In Blender, navigate to <span class="strong"><strong>File</strong></span> | <span class="strong"><strong>Export</strong></span> | <span class="strong"><strong>FBX</strong></span> (<span class="strong"><strong>Import-Export:FBX</strong></span> format add-on needs to be enabled).</p></li><li><p>In the options, check the <span class="strong"><strong>Baked Animation</strong></span> box.</p></li><li><p>Hit <span class="strong"><strong>Export</strong></span>.</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_05_03.jpg" /></div></li></ol></div><p>Your file can now be<a id="id266" class="indexterm"></a> safely <a id="id267" class="indexterm"></a>imported into Unity.</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_05_04.jpg" /></div><p>You don't have to<a id="id268" class="indexterm"></a> get rid of curve controls after baking animations for <a id="id269" class="indexterm"></a>exporting; they won't cause any problems and won't be visible in the game.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec60"></a>Importing referenced animations</h3></div></div></div><p>For those of you who use <a id="id270" class="indexterm"></a>referenced animations—Unity's got you covered.</p><p>Here is another example of a file that is referencing a different file that contains geometry and rig, but no animations. This reference file, on the other hand, contains our arm animation and a reference, nothing more. This is a different character and this time in Maya.</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_05_05.jpg" /></div><p>Here is the process of getting this animation into Unity assuming that you've already imported your referenced model in the <code class="literal">.fbx</code> format:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Bake animation by navigating to <span class="strong"><strong>Edit</strong></span> | <span class="strong"><strong>Keys</strong></span> | <span class="strong"><strong>Bake simulation</strong></span>.</p></li><li><p>Select character's entire skeleton (every node).</p></li><li><p>Export that in <code class="literal">.fbx</code> format by going <span class="strong"><strong>File</strong></span> | <span class="strong"><strong>Export Selected</strong></span> (you'll only need your skeleton, nothing else).</p></li><li><p>Name the file <code class="literal">Character_animationPass@ArmAnim.fbx</code>.</p></li><li><p>Import that into Unity, in the same folder as the referenced model.</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_05_06.jpg" /></div></li></ol></div><p>Unity will <a id="id271" class="indexterm"></a>automatically assign the referenced model to the animation and will allow us to use it with our character.</p><p>The key here is the file referencing the model, and the correct naming convention for the animation file, which should be as follows: <code class="literal">referencename@animationname.fbx</code>. In this case, our original file was named <span class="strong"><strong>Character_animationPass</strong></span> and then we named our animation <span class="strong"><strong>ArmAnim</strong></span>, which you will see in the hierarchy window in Unity.</p><p>Rinse and repeat for other animations if that is your usual working pipeline. The major benefit of this approach is being able to add as many animations as you like after importing the model into Unity.</p><p>We've covered the basics behind the character export from one of the 3D applications, but there are others with their unique nuances. To find out how to export from a specific 3D app, visit the Unity official documentation, where you can read about importing objects from a <a id="id272" class="indexterm"></a>specific app at:</p><p>
<a class="ulink" href="http://docs.unity3d.com/Manual/HOWTO-importObject.html" target="_blank">http://docs.unity3d.com/Manual/HOWTO-importObject.html</a>.</p><p>If you are using Blender and Rigify for character rigging, the following article on how to import a Rigify rig into Unity <a id="id273" class="indexterm"></a>should interest you:</p><p>
<a class="ulink" href="http://docs.unity3d.com/Manual/BlenderAndRigify.html" target="_blank">http://docs.unity3d.com/Manual/BlenderAndRigify.html</a>.</p></div></div>