<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec37"></a>Animation basics</h2></div></div><hr /></div><p>Throughout its<a id="id220" class="indexterm"></a> history, Unity has received a couple of features that deal with animations. In this chapter, we will talk about the oldest and simplest one. Unity Legacy Animation is a powerful feature that will help you to manage and set up imported animations. Its ability to create custom animations can prove to be invaluable during a prototyping phase. Though limited in options, it brings the benefit of simplicity and speed that attracts developers and causes them to rely on it, despite claims of the system being a thing of the past.</p><p>To follow the chapter's content, use the content from the <code class="literal">Chapter 4</code> folder in your Project window. It contains objects that will be used in the future examples.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec50"></a>Using the Animation editor</h3></div></div></div><p>The Unity <a id="id221" class="indexterm"></a>Animation editor is fairly simple and limited; however, its main purpose is not to serve as a substitute for more sophisticated apps, but provide fast and easy solutions whenever you need to animate something simple.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec51"></a>Creating custom animations</h3></div></div></div><p>Upon importing a mesh, we <a id="id222" class="indexterm"></a>need to specify whether it has any animations that<a id="id223" class="indexterm"></a> require importing. In case of <code class="literal">Windmill.fbx</code>, the one that we will use hereinafter, the answer will be, no; instead we will attempt to create our own custom animations using Unity's native editor.</p><p>For any other prop that does not have and/or does not intend to have any animations, it's a good habit to set the <span class="strong"><strong>Animation Type</strong></span> parameter to <span class="strong"><strong>None</strong></span> under the <span class="strong"><strong>Rig</strong></span> tab of <span class="strong"><strong>Import Settings</strong></span>.</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_04_01.jpg" /></div><p>The next recommended step is to create a prefab for the mesh before adding it into the scene.</p><p>We'll now focus on the GameObject that we will be animating; in this case, the Blade GameObject further down the Windmill hierarchy. In Unity, animations are stored inside animation clips that need to be assigned and stored in GameObject, in order to be accessed and played. To store these clips, GameObjects need to have an Animation component, under, <span class="strong"><strong>Add Component</strong></span> | <span class="strong"><strong>Miscellaneous</strong></span> | <span class="strong"><strong>Animation</strong></span>.</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_04_02.jpg" /></div><p>Add this component to the Blade GameObject. What this does is <a id="id224" class="indexterm"></a>allow us to add and store animation clips.</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Animation</strong></span>: This is<a id="id225" class="indexterm"></a> the first animation clip that will be played by default, if specified.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Animations</strong></span>: This is an array of all available animations for a current GameObject.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Play</strong></span> <span class="strong"><strong>Automatically</strong></span>: This is a flag that plays the animation specified in the <span class="strong"><strong>Animation</strong></span> property, whenever the game starts (or whenever the object is created in the scene).</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Animate</strong></span> <span class="strong"><strong>Physics</strong></span>: This checks whether the animation should interact with physics.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Culling</strong></span> <span class="strong"><strong>Type</strong></span>: This includes two options—<span class="strong"><strong>Always Animate</strong></span> and <span class="strong"><strong>Based On Renderers</strong></span>. The first one will always animate; the second one, however, will only play the animation if the object is rendered by the camera (which is useful if you want some extra optimization).</p></li></ul></div><p>So how are the actual animations created?</p><p>To discover that, we need to go to <span class="strong"><strong>Window</strong></span> | <span class="strong"><strong>Animation</strong></span> from the menu bar; this will open an Animation editor.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec52"></a>Editor controls</h3></div></div></div><p>As you can see there aren't<a id="id226" class="indexterm"></a> that many options and we can easily discuss them as we go.</p><p>You can only use this tool on GameObjects in the scene. Therefore, our newly created prefab for the Windmill object has to be dragged into the scene in order to be animated.</p><p>With the object in place, we can now create an animation by clicking on the <span class="strong"><strong>Clip</strong></span> drop-down menu, that appears to be empty by default, and selecting the <span class="strong"><strong>Create New Clip</strong></span> option.</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_04_03.jpg" /></div><p>Create a folder called <code class="literal">Animations</code> inside the <code class="literal">Chapter 4</code> folder and name the clip <code class="literal">Windmill_BladeSpin</code>.</p><p>Our clip is now available under the <span class="strong"><strong>Animation</strong></span> drop-down menu and can be edited.</p><p>To start animating, we click on the <span class="strong"><strong>Add Curve</strong></span> button underneath the <span class="strong"><strong>Animation</strong></span> menu and select a component and a property that we wish to animate. In this case, we will be navigating to <span class="strong"><strong>Transform</strong></span> | <span class="strong"><strong>Rotation</strong></span>.</p><p>With the curve added, you will not only notice that keyframes appear along the Dope Sheet, but the recording button turns red (the red dot sign), and the <span class="strong"><strong>Rotation</strong></span> property changes color in the <span class="strong"><strong>Inspector</strong></span> window.</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_04_04.jpg" /></div><p>This indicates to us that any<a id="id227" class="indexterm"></a> changes to our object will be recorded at a specified point on the timeline.</p><p>Let's create the actual animation by:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Selecting the last keyframe on the Dope Sheet (the top most).</p></li><li><p>Rotating the Blade GameObject in the scene view, a full 360 degrees clockwise or counterclockwise.</p></li><li><p>Clicking on the play button in the <span class="strong"><strong>Animation</strong></span> window</p></li></ol></div><p>The GameObject should now be playing the animation in the scene window. You can also manually input the values into the Animation window; however, keep in mind that these values utilize, not the default Centered Pivot, but the native Pivot of the object.</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_04_05.jpg" /></div><p>There are few other things worth mentioning before we move on. Keyframes can be created automatically by clicking at any point on the timeline, and modifying the selected property of the object. Alternatively, you can use an Add Keyframe button (<span class="inlinemediaobject"><img src="/graphics/9781785282843/graphics/B04214_04_06.jpg" /></span>). Keyframes can be deleted by selecting them and pressing the <span class="emphasis"><em>Delete</em></span> key on your keyboard.</p><p>Keyframes can be <a id="id228" class="indexterm"></a>moved by dragging them along the timeline. You might notice that you can't actually move different rotation axes independently, but need to move an entire rotation property as a whole. This has to do with the fact that these variables are set to read only, while the rotation component can be rewritten.</p><p>The <span class="strong"><strong>Sample</strong></span> property specifies frames per second and it could be useful to change this, if you require more control over quick animations. Keep in mind that this will not change the play speed of the animation in the scene window. The biggest inconvenience with Animation component is that animation clips that are assigned to it will not be played in the Play mode of Unity 5, unless they are marked as Legacy. We can easily fix this by:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Selecting the <span class="strong"><strong>Windmill_BladeSpin</strong></span> animation clip in the <span class="strong"><strong>Project</strong></span> window</p></li><li><p>Clicking on the drop down menu of the <span class="strong"><strong>Inspector</strong></span> window in the top right corner and selecting <span class="strong"><strong>Debug</strong></span> option</p></li><li><p>Checking <span class="strong"><strong>Legacy</strong></span> box</p></li></ol></div><p>After completing this procedure you can return Inspector window to the Normal mode and assign Windmill_BladeSpin to the Animation parameter of the Animation component to see it being played upon entering Play mode. Make sure to do the same thing to every clip you assign to the Animation component.</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_04_23.jpg" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec53"></a>The Curve editor</h3></div></div></div><p>Dope Sheet is not the only tool we <a id="id229" class="indexterm"></a>can use to modify our animations. At the bottom of the Animation window, there is another tab called <span class="strong"><strong>Curves</strong></span> that will take us to the Curve editor.</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_04_07.jpg" /></div><p>To make the curves fit the screen, simply select the Rotation property and then hit the <span class="emphasis"><em>F</em></span> key on the keyboard while hovering over the right side of the window with the mouse cursor.</p><p>If you have any experience in animation, using this tool should come naturally to you.</p><p>Keyframes are being connected by lines that represent the interpolation of the parameter on the timeline known as <a id="id230" class="indexterm"></a>
<span class="strong"><strong>Curves</strong></span>. Each keyframe (apart from borderline right and left) has two tangents that allow them to modify the curves on both of their sides.</p><p>The best way to understand this is by <a id="id231" class="indexterm"></a>trying to do it yourself with the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Start off by creating a new keyframe by right-clicking along the <span class="strong"><strong>Rotation.z</strong></span> curve and clicking on <span class="strong"><strong>Add</strong></span> <span class="strong"><strong>Key</strong></span>.</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_04_08.jpg" /></div></li><li><p>Now right-click on the newly created keyframe.</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_04_09.jpg" /></div><p>You will see a <a id="id232" class="indexterm"></a>number of options displayed:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Delete Key</strong></span>: This will simply delete the keyframe</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Auto</strong></span>: This is a mode that will attempt to smooth out the tangents on both sides to make the curve look smooth</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Free Smooth</strong></span>: This will make the tangents visible and you will be able to manually adjust them</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_04_10.jpg" /></div></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Flat</strong></span>: This will move tangents to a horizontal position</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_04_11.jpg" /></div></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Broken</strong></span>: This will allow you to adjust tangents independently, giving more control, however, sacrificing the smooth look</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_04_12.jpg" /></div></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Left Tangent</strong></span>, <span class="strong"><strong>Right Tangent</strong></span>, and <span class="strong"><strong>Both Tangents</strong></span>: These allow you to select one of the three modes for tangents of this keyframe</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Free</strong></span>: This is a current default mode</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Linear</strong></span>: This will force linear interpolation between keyframes</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Constant</strong></span>: This<a id="id233" class="indexterm"></a> will remove interpolation entirely</p></li></ul></div></li></ol></div><p>That's about it for the editor. Since the Animation editor is primarily made to deal with rough animations for prototyping, you will find yourself using Dope Sheet to create keyframes and only going into the Curve editor to adjust it slightly or fix a weird animation behavior.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec54"></a>Give it a try</h3></div></div></div><p>Try to practice with the curve tool by creating new keyframes and adjusting curves so as to change the rotation speed of the blades. Make it look like the blades received a powerful impulse and quickly reached the maximum rotation speed. After that, make it slow down before reaching a complete stop. Here are the steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Start from a complete stop.</p></li><li><p>Rapidly increase the rotation speed while at the same time decrease the acceleration before the animation reaches one third of its length.</p></li><li><p>Gradually, slow the rotation down before it reaches a complete stop.</p></li><li><p>Make sure that there are no jumps in animation when looping (last and first frames need to have blades in a similar position, not necessarily rotation).</p></li></ol></div><p>Did it work? Trying to make the last frame identical to the first one should have been problematic, since you shouldn't end up at zero rotations at the end of the animation.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec55"></a>Custom animations and world space</h3></div></div></div><p>Let's try to animate the <a id="id234" class="indexterm"></a>root of the windmill GameObject to shift right and left. Nothing big, just simple movement and make sure to add the Animation component and mark clip as Legacy in Debug mode. When you're done, try this: move the original location of the object and see how the animation responds to it in the scene view. The animation does not care where the object stood initially, it will always animate it using specified values relative to the world space.</p><p>But what about the blades we animated earlier? By removing the windmill shifting animation, and moving the windmill around, we should see that the blades always rotate properly in their set position. That is because the blades were animated within a local space of their parent object; therefore, they're relative to it. The windmill shifting animation can easily be fixed if we parent it to an empty GameObject (<span class="strong"><strong>GameObject</strong></span> | <span class="strong"><strong>Empty GameObject</strong></span>) and animate it that way; this is a common trick that can be used with any animation since it's always relative to something.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec56"></a>Triggering the event handlers with animation</h3></div></div></div><p>Event handlers are a <a id="id235" class="indexterm"></a>very cool feature that allow you to call<a id="id236" class="indexterm"></a> functions also known as events from the scripts attached to the animated GameObject. This is very useful and can save a lot of time if you need something to happen at a certain point of the animation.</p><p>To showcase this functionality, we will use our Windmill GameObject by performing these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select the <span class="strong"><strong>Blade</strong></span> GameObject of the Windmill that we've animated earlier.</p></li><li><p>Attach a Box Collider component to it (<span class="strong"><strong>Physics</strong></span> | <span class="strong"><strong>Box Collider</strong></span>).</p></li><li><p>Attach a script file called <code class="literal">WindmillMessage.cs</code> inside <code class="literal">Chapter 4</code> folder to the <span class="strong"><strong>Blade</strong></span> GameObject.</p></li><li><p>Uncheck the <a id="id237" class="indexterm"></a>
<span class="strong"><strong>Play Automatically</strong></span>
<a id="id238" class="indexterm"></a> parameter in the Animation component.</p></li><li><p>Position the MainCamera in the scene view to look directly at the Windmill (you should see a Windmill in the Game window).</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_04_13.jpg" /></div></li></ol></div><p>Attaching a Box Collider is not necessary for events that are called from the animation. The script is coded to start the <code class="literal">Windmill_BladeSpin</code> animation that we created earlier, upon clicking on the Blade (the actual click cannot be registered without the collider).</p><p>Now we can go into the Animation editor and set up the event call by performing the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select the last keyframe and click on the <span class="strong"><strong>Add Event</strong></span> Button.</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_04_14.jpg" /></div></li><li><p>In the new <a id="id239" class="indexterm"></a>window, select <span class="strong"><strong>EventFunction()</strong></span> (this<a id="id240" class="indexterm"></a> is the name of the function within the script).</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_04_15.jpg" /></div></li><li><p>That should be it; in the last frame, you should see an event sign appear.</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_04_16.jpg" /></div></li></ol></div><p>Now, whenever you start the game and click on the Windmill with the left mouse button, the windmill will turn white at the end of the animation.</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_04_17.jpg" /></div><p>Scripts, like any other<a id="id241" class="indexterm"></a> components, can be modified with the <a id="id242" class="indexterm"></a>Animation editor; for instance, you can change the variable values just like we did with rotation to create a <code class="literal">Windmill_BladeSpin</code> animation.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec57"></a>Importing the prop animation into Unity</h3></div></div></div><p>Now that custom <a id="id243" class="indexterm"></a>animations are done with, let's see how to import <a id="id244" class="indexterm"></a>actual animations created with other apps along with a mesh.</p><p>Inside the <code class="literal">Chapter 4</code> folder, there are two models; let's take a look at the other one: <span class="strong"><strong>Chest.fbx</strong></span>.</p><p>Since this mesh inherently has animations attached to it, we need to specify that in the import settings by selecting <span class="strong"><strong>Legacy</strong></span> for the <span class="strong"><strong>Animation Type</strong></span> parameter under the <span class="strong"><strong>Rig</strong></span> tab. Doing this will also mark all it's animation clips as Legacy.</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_04_18.jpg" /></div><p>We will talk about other animation types in future chapters when we look at another animation system this is also available in Unity.</p><p>Now we'll move on to the next tab, <span class="strong"><strong>Animations</strong></span>. This tab can be divided into three sections dubbed: general settings, clip settings, and clip preview.</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_04_19.jpg" /></div><p>General Settings are at <a id="id245" class="indexterm"></a>the very top; they provide some basic <a id="id246" class="indexterm"></a>animation settings for this mesh and contain a list of clips drawn from the animation timeline. The settings in the preceding screenshot are explained as follows:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Import Animation</strong></span>: This is a checkbox that should always be checked if you plan to use the object's animations.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Bake</strong></span> <span class="strong"><strong>Animations</strong></span>: This is a little trickier. This this will only be available for Maya, 3DsMax, and Cinema4D files and allows us to use IK handles or simulation in our animation package. Suffice to say that this FBX object does not belong to any of the apps mentioned earlier and doesn't contain any IK handles or simulation, which is why this option is unavailable.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Wrap Mode</strong></span>: This specifies a default wrap mode for the animations on their import, which can later be changed with scripts at runtime, or manually for each Animation clip.</p><p>Here is the list of animation wrap modes available in Unity:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Default</strong></span>: This will use options specified in any individual clip</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Once</strong></span>: This will play an animation clip once and then stop</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Loop</strong></span>: This will play animation over and over again resetting upon reaching the end</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Ping</strong></span> <span class="strong"><strong>Pong</strong></span>: This plays animation back and forth reversing each time it reaches the end</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Clamp</strong></span> <span class="strong"><strong>Forever</strong></span>: This will play animation until the end and continue to repeat the last frame indefinitely (unlike the Once mode, it doesn't stop)</p></li></ul></div></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Anim. Compression</strong></span>
<a id="id247" class="indexterm"></a> will try to reduce the number of<a id="id248" class="indexterm"></a> keyframes in your animation on import to increase performance and reduce the animation size.</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>If you want 100 percent accurate animation to be played, try turning this option <span class="strong"><strong>Off</strong></span>
</p></li><li style="list-style-type: disc"><p>If you value optimization more with, the additional benefit of control over the optimization options: <span class="strong"><strong>Keyframe</strong></span> <span class="strong"><strong>Reduction</strong></span> mode is your choice</p></li><li style="list-style-type: disc"><p>If you are also concerned about the size of your project (which is very common for mobile devices), try the last <span class="strong"><strong>Keyframe</strong></span> <span class="strong"><strong>Reduction</strong></span> <span class="strong"><strong>and</strong></span> <span class="strong"><strong>Compression</strong></span> mode which will include benefits of the previous mode as well.</p></li></ul></div><p>Selecting either of the two latter options will enable three parameters control over keyframe reduction in terms of rotation, position, and scale. Numbers themselves don't say much about how the animation will be changed; however, they are still important to understand should any issues occur or if you are trying to see how far you can push the keyframe reduction.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Rotation error</strong></span>: This defines the minimum difference in rotation values (in degrees) below which, two keyframes are counted as equals.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Position error</strong></span>: This is the minimum difference in position (as a percentage of coordinate values) below which, two keyframes are counted as equal.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Scale error</strong></span>: This is the minimum difference in scale (as a percentage of coordinate values) below which, two keyframes are counted as equal.</p></li></ul></div><p>Based on these statements, we can assume that the higher these values are set, the higher the keyframe reduction will be.</p><p>There is no telling which values are best to use, since it's all based on the animation; however, it would be best to test your animation without keyframe reduction first, make sure that everything is working fine and then apply and tweak it to suit your needs. This will greatly reduce your frustration level when something goes wrong.</p><p>
<span class="strong"><strong>Clips</strong></span> is a list of animation slices from the animation timeline. If all of your animation is on a single timeline, this allows you to manually slice it into multiple clips.</p><p>Our current object<a id="id249" class="indexterm"></a> has two animations—one for the locked state, when a<a id="id250" class="indexterm"></a> player tries to open a chest without a key, and the other for an opening state, when a player opens it with a key. Click on the plus sign to add a new clip.</p><p>The following animation settings are clip settings that modify each individual clip selected in the clips listed earlier:</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_04_20.jpg" /></div><p>The name of our first clip is <span class="strong"><strong>Take 001</strong></span>; it's a default name given to the first unnamed clip.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note21"></a>Note</h3><p>Curiously enough, our second clip is called <span class="strong"><strong>Take 0010</strong></span>; however, any consecutive clips' number will only be incremented by 1, not 9 (<span class="strong"><strong>Take 0011</strong></span>, <span class="strong"><strong>Take 0012</strong></span>…).</p></div><p>Below the name field, there is a timeline that shows the length of a clip segment, the frame rate at which it has been recorded, and the borders that can be dragged to manually adjust the clip's segment location on a timeline and its length. You can also specify the borders in the <span class="strong"><strong>Start</strong></span> and <span class="strong"><strong>End</strong></span> fields. The settings in the preceding screenshot are explained as follows:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Add Loop Frame</strong></span>: This <a id="id251" class="indexterm"></a>tries to smooth animation slightly by<a id="id252" class="indexterm"></a> adding an extra frame at the end that is identical to the first frame. However, this could make some animations look weird.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Wrap mode</strong></span>: This allows us to specify a wrap mode for this particular clip.</p></li></ul></div><p>Let's use these options to slice and set up, both of our animations. For the first clip, perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select the <code class="literal">Take 001</code> clip in the clips list and name it <code class="literal">Locked</code>.</p></li><li><p>Set the <span class="strong"><strong>Start</strong></span> frame to <span class="strong"><strong>1</strong></span> and <span class="strong"><strong>End</strong></span> to <span class="strong"><strong>24</strong></span>.</p></li><li><p>Change <span class="strong"><strong>Wrap Mode</strong></span> to <span class="strong"><strong>Once</strong></span>.</p></li></ol></div><p>For the second clip, set the following parameters:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Click on the plus sign under the Clips list, if you haven't before, and select the newly created clip in the Clips list.</p></li><li><p>Name it <code class="literal">Opening</code>.</p></li><li><p>Set <span class="strong"><strong>Start</strong></span> to <span class="strong"><strong>24</strong></span> and <span class="strong"><strong>End</strong></span> to <span class="strong"><strong>40</strong></span>.</p></li><li><p>Change <span class="strong"><strong>Wrap Mode</strong></span> to <span class="strong"><strong>Clamp Forever</strong></span>.</p></li><li><p>Click on the <span class="strong"><strong>Apply</strong></span> button.</p></li></ol></div><p>You can now play these animations in the Clip Preview window at the bottom of the import settings. Just select the clip you wish to see and hit the play button.</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_04_21.jpg" /></div><p>If you can't see the <a id="id253" class="indexterm"></a>object in the Preview window or the object displayed<a id="id254" class="indexterm"></a> is not a chest, just perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Click on the icon at the bottom-left corner.</p></li><li><p>Select <span class="strong"><strong>Other…</strong></span>.</p></li><li><p>Find and select a Chest mesh in the Object Picker window.</p></li></ol></div><p>Done! You can now create a prefab for the model and drag a Chest into the scene. You will notice in your Inspector view that animations are already included into the Animation Component.</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_04_22.jpg" /></div><p>Adding custom animations will be tempting, and it is possible. To do this, you need to increment a <span class="strong"><strong>Size</strong></span> parameter of the <span class="strong"><strong>Animations</strong></span> array and leave it blank. This way, an option to create a new animation clip in the Animation window will become available.</p><p>However, you cannot modify imported animations via this editor, they are read only.</p><p>The chest was not <a id="id255" class="indexterm"></a>animated with IK handles or bones, but simply setting <a id="id256" class="indexterm"></a>keyframes along the timeline in a 3D app. Importing prop animations into Unity should not pose any problem; simply perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Animate the prop with keyframes.</p></li><li><p>Export the mesh with animations in <code class="literal">.fbx</code> (or any other format you prefer).</p></li><li><p>Slice the animation into clips inside Unity.</p></li></ol></div><p>We will look into bones and IK handles when we talk about character animations.</p></div></div>