<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec20"></a>What are Materials?</h2></div></div><hr /></div><p>Objects are<a id="id123" class="indexterm"></a> rendered in Unity with the help of Shaders: chunks of complex code that can be created in Unity's MonoDevelop. However, there is a much easier way to work with Shaders, and that's through Materials. Materials allow the adjustment of properties and assignment of assets to Shaders without any programming knowledge.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec31"></a>Materials in Unity</h3></div></div></div><p>Upon importing assets <a id="id124" class="indexterm"></a>earlier, you probably noticed that Unity also created a folder called Materials in each asset folder. By default, each GameObject should have a Material assigned to it—if it doesn't it will be rendered pink, just like we've witnessed at the beginning of this chapter when tried to recreate primitives with components. During asset import, Unity used the name of the Shader assigned to the assets and gave it to the newly generated Material, which was automatically assigned to imported object; however, it didn't assign textures to both of the materials but only to the <span class="strong"><strong>Bush_Color</strong></span>. There are three reasons why this could happen to any model:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Textures were not assigned to the Shader upon exporting. This is true in our case; <span class="strong"><strong>Rock</strong></span> did not have textures assigned to it prior to exporting.</p></li><li><p>The file format was incorrect. That is also true. <span class="strong"><strong>Rock</strong></span> was exported as OBJ and <span class="strong"><strong>Bush</strong></span>, which has a color map assigned to its material was exported as FBX.</p></li><li><p>Unity couldn't find the assigned texture. That is not the case for our models, but it could often be the reason for others. To avoid that, I would recommend keeping models and assigned textures in the same folder upon import (you can always reallocate them afterwards).</p></li></ol></div><p>Reassigning textures upon import can be a real pain. To avoid that issue, I usually:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Assign textures to the model in the 3D app.</p></li><li><p>Keep assigned textures in the same directory as the mesh file.</p></li><li><p>Export the model in FBX format.</p></li><li><p>Import the model and textures into Unity together.</p></li></ol></div><p>This is not necessarily the only way to do it—you might not need to assign the textures in a 3D app in the first place for your pipeline, but this is just something I can recommend from personal experience.</p><p>In order to assign the missing textures to materials, we need to do the following:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Rename imported materials to <span class="strong"><strong>Rock_Material </strong></span>and <span class="strong"><strong>Bush_Material</strong></span> in the <span class="strong"><strong>Project</strong></span> window.</p></li><li><p>Select <span class="strong"><strong>Rock_Material</strong></span> and go to the <span class="strong"><strong>Inspector</strong></span> window.</p></li><li><p>Click on the little circle on the left of the <span class="strong"><strong>Albedo </strong></span>parameter.</p></li><li><p>Select the <span class="strong"><strong>Rock_Color</strong></span> texture with the object picker.</p></li></ol></div><p>Now all <a id="id125" class="indexterm"></a>GameObjects that share this material will be automatically updated. You can use the <span class="strong"><strong>Preview</strong></span> section at the bottom of the <span class="strong"><strong>Inspector</strong></span> window to see how your material will look on the object:</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_02_25.jpg" /></div><p>This color map will now be automatically assigned to all GameObjects that share this Material.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip03"></a>Tip</h3><p>You can't assign materials to imported models; however, you can do it for prefabs and objects in the Scene/Hierarchy window.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec32"></a>Creating Materials</h3></div></div></div><p>Materials are <a id="id126" class="indexterm"></a>very useful in a way that they are automatically updated on all assigned GameObjects. But at the same time, that is their biggest limitation, as we cannot create any variation this way. In our case, if we want to make some rocks darker and others greener, we'll have to create unique materials.</p><p>To create new materials, use the <span class="strong"><strong>Create</strong></span> drop-down menu of the <span class="strong"><strong>Project</strong></span> window.</p><p>Newly created material can be assigned to GameObjects with the <span class="strong"><strong>Mesh Renderer</strong></span> component:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Select a <span class="strong"><strong>GameObject.</strong></span>
</p></li><li><p>Go to the <span class="strong"><strong>Mesh Renderer</strong></span> component of the <span class="strong"><strong>Inspector</strong></span> window.</p></li><li><p>Assign the material to one of the elements of the <span class="strong"><strong>Materials array.</strong></span>
</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_02_26.jpg" /></div></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec33"></a>Shader types</h3></div></div></div><p>The most important part of each <a id="id127" class="indexterm"></a>material is to select the correct shader to render it. There is<a id="id128" class="indexterm"></a> an abundance of shaders available for Unity, both built-in and user-created, available in the <span class="strong"><strong>Asset</strong></span> <span class="strong"><strong>Store</strong></span>. You can even write your own using ShaderLab coding language; however, that will require extensive knowledge of the subject. Thankfully, with the release of Unity 5, most of them were moved to the backlines for backward compatibility with project upgrades and were labeled Legacy. All of them were replaced with a single default Shader dubbed Standard.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl3sec09"></a>Material parameters</h4></div></div></div><p>Standard is a very powerful and <a id="id129" class="indexterm"></a>versatile material with a lot of customization options that widen its application range.</p><p>Let's take a closer look at the options available for it:</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_02_27.jpg" /></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Main Maps</strong></span> is a set of primary textures that are utilized by the Material:</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Albedo </strong></span>parameter defines a defuse color produced from the assigned color map and a surface color defined by the color picker on the right.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Metallic </strong></span>defines how smooth and reflective the surface is. You can import a custom texture or use a slider to control how metallic you want your material to look. This parameter is further enhanced by the <span class="strong"><strong>Smoothness</strong></span> slider.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Normal</strong></span>, <span class="strong"><strong>Height</strong></span>, <span class="strong"><strong>Occlusion</strong></span>, and <span class="strong"><strong>Emission </strong></span>are your standard maps for 3D objects. In this book, we will work with <span class="strong"><strong>Normal Map</strong></span> and <span class="strong"><strong>Occlusion Map</strong></span> for props and characters and we will use the <span class="strong"><strong>Height</strong></span> map to generate terrain in the next chapter.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Detail Mask</strong></span> uses the Alpha channel of the imported texture to create a mask for <span class="strong"><strong>Secondary Maps</strong></span>. <span class="strong"><strong>Secondary Maps</strong></span> allow us to create more details on the surface by importing in additional Color and Normal maps. Controlling the areas in which they will overlap is the purpose of the <span class="strong"><strong>Detail Mask</strong></span>.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>UV Set</strong></span> allows you to<a id="id130" class="indexterm"></a> toggle multiple UV sets if they are available for the model.</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_02_28.jpg" /><div class="caption"><p>Here is a general idea of how the Detail Mask works</p></div></div></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Tiling</strong></span> allows us to control how many times our texture is going to be repeated across the <span class="emphasis"><em>x</em></span> and <span class="emphasis"><em>y</em></span> axes.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Offset</strong></span> slides the texture across the <span class="emphasis"><em>x</em></span> and <span class="emphasis"><em>y</em></span> axes.</p></li></ul></div><p>The last two<a id="id131" class="indexterm"></a> parameters are best suited for tileable textures, like our imported <span class="strong"><strong>Rock_Color</strong></span>. Increasing the <span class="emphasis"><em>x</em></span> and <span class="emphasis"><em>y</em></span> of the <span class="strong"><strong>Tiling</strong></span> parameter to <code class="literal">5</code> will significantly improve the quality of our rock. Tiling has no effect on performance, nor does it require more memory to render the texture.</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_02_29.jpg" /></div><p>However, doing that will also create a problem when we try to apply non-tileable Occlusion and Normal maps to our model. To solve this dilemma, we will make use of both map-sets:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Remove the <span class="strong"><strong>Rock_Color</strong></span> texture from the <span class="strong"><strong>Main Map</strong></span> <span class="strong"><strong>Albedo</strong></span> parameter and assign it to the <span class="strong"><strong>Detail</strong></span> <span class="strong"><strong>Albedo</strong></span> of the <span class="strong"><strong>Secondary Map.</strong></span>
</p></li><li><p>Set the surface color to a dark grey using the Color Picker next to the <span class="strong"><strong>Albedo</strong></span> parameter.</p></li><li><p>Set the <span class="strong"><strong>Smoothness</strong></span> parameter to <code class="literal">0.25</code>.</p></li><li><p>Set the <span class="emphasis"><em>x</em></span> and <span class="emphasis"><em>y</em></span> <span class="strong"><strong>Tiling</strong></span> of the <span class="strong"><strong>Secondary Map</strong></span> to <code class="literal">5</code> (<span class="strong"><strong>Main Map</strong></span> <span class="strong"><strong>Tiling</strong></span> should be reverted to <code class="literal">1</code>).</p></li><li><p>Assign the <span class="strong"><strong>Rock_Normal</strong></span> texture to the <span class="strong"><strong>Normal</strong></span> <span class="strong"><strong>Map</strong></span> parameter of the <span class="strong"><strong>Main Map</strong></span> and click the <span class="strong"><strong>Fix</strong></span> <span class="strong"><strong>Now</strong></span> button.</p></li><li><p>Assign the <span class="strong"><strong>Rock_Occlusion</strong></span> texture to the <span class="strong"><strong>Occlusion</strong></span> parameter.</p></li></ol></div><p> With Normal and <a id="id132" class="indexterm"></a>Occlusion Map assigned, our rock looks much better.</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_02_30.jpg" /></div><p>There is but one problem with this approach: secondary maps are much more expensive than main maps; therefore, Unity developers do not recommend utilizing Secondary Maps if Main Maps aren't being utilized.</p><p>While assigning the <span class="strong"><strong>Normal Map</strong></span>, you've seen the <span class="strong"><strong>Fix Now</strong></span> button pop up. This happens whenever you are trying to plug in textures to the <span class="strong"><strong>Normal Map</strong></span> channel that weren't marked as such. Clicking on the <span class="strong"><strong>Fix Now button </strong></span>automatically changes the <span class="strong"><strong>Texture Type</strong></span> of <span class="strong"><strong>Rock_Normal</strong></span> to the <a id="id133" class="indexterm"></a>
<span class="strong"><strong>Normal Map</strong></span> in the <span class="strong"><strong>Import Settings</strong></span>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl3sec10"></a>Rendering modes</h4></div></div></div><p>As mentioned previously, the Standard material <a id="id134" class="indexterm"></a>has four rendering modes that serve to fill the roles of different materials:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>
<span class="strong"><strong>Opaque</strong></span>: This is used for solid or opaque objects. This is the Default go-to mode for most objects.</p></li><li><p>
<span class="strong"><strong>Cutout</strong></span>: This uses the Albedo alpha channel as a mask to isolate parts of the texture.</p></li><li><p>
<span class="strong"><strong>Transparent</strong></span>: This is used for objects with transparency, such as glass. The transparency parameter is transformed by the Albedo alpha channel.</p></li><li><p>
<span class="strong"><strong>Fade</strong></span>: This is very similar to the <span class="strong"><strong>Transparent</strong></span> mode, with the only difference being that it also affects the specularity of the object, allowing it to gradually fade away by controlling the Albedo alpha channel.</p></li></ol></div><p>To prepare our second model, we are going to rely on the Cutout Rendering mode of its material:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>In the <span class="strong"><strong>Import</strong></span> settings of the <span class="strong"><strong>Bush_Color</strong></span> texture, check the <span class="strong"><strong>Alpha is Transparency</strong></span> box. This will allow us to utilize the alpha channel to render leaves.</p></li><li><p>Change <span class="strong"><strong>Rendering</strong></span> mode of the <span class="strong"><strong>Bush_Material</strong></span> to <span class="strong"><strong>Cutout</strong></span>.</p></li><li><p>The <span class="strong"><strong>Exposed Alpha Cutoff</strong></span> slider will allow us to control the amount of cutout.</p><div class="mediaobject"><img src="/graphics/9781785282843/graphics/B04214_02_31.jpg" /></div></li></ol></div></div></div></div>