<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch10lvl1sec86"></a>Singleton class</h2></div></div><hr /></div><p>By implementing the singleton pattern for <code class="literal">GameManager</code>, we can easily access it from anywhere using one single point of access. You probably feel really confused about this now. A simple example will help you get your head around it.</p><div class="blockquote"><blockquote class="blockquote"><p><span class="emphasis"><em>"In software engineering, the singleton pattern is a design pattern that restricts the instantiation of a class to one object. This is useful when exactly one object is needed to coordinate actions across the system."</em></span></p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p><span class="emphasis"><em>– Wikipedia</em></span></p></blockquote></div><p>Let's add the following code to the <code class="literal">GameManager</code> class. Declare a new <code class="literal">public static</code> variable. This code should be written right next to other public variables:</p><pre class="programlisting">public static GameManager instance; </pre><p>Then, add an <code class="literal">Awake</code> method with the following line:</p><pre class="programlisting">void Awake() { 
  instance = this; 
} </pre><p>That's it! This is all the code you need for a simple access to the <code class="literal">GameManager</code> instance from anywhere in your code. It is important to remember that only one instance of this component can be present in the whole Unity <strong class="userinput"><code>Scene</code></strong>. To access any of the public code in <code class="literal">GameManager</code> from another class, you can simply call the following:</p><pre class="programlisting">GameManager.instance.SomeUsefulMethodOrVariable </pre><p>For example, if we want to read the <code class="literal">currentGameState</code> value from <code class="literal">PlayerController</code>, we will simply write:</p><pre class="programlisting">GameState currentState = GameManager.instance.currentGameState; </pre><p>I hope the singleton pattern is fairly familiar to you now. Of course, we just covered the basics. Feel free to browse the internet and read more about the subject.</p><p>We have easy access to <code class="literal">GameManager</code>, with basic game events helping to control the game. When we press <strong class="userinput"><code>Play</code></strong> in Unity, we can still see that our character is running forward without any control. We are unable to stop him at all. Let's put some restrictions in <code class="literal">PlayerController</code> so that the running and jumping behavior works only when <code class="literal">currentGameState</code> is <code class="literal">.inGame</code>. To do this, let's open <code class="literal">PlayerController</code> and add some code:</p><div class="mediaobject"><img src="/graphics/9781788478922/graphics/9e1704b6-277a-4c31-b149-e4422943bc24.png" /></div><p>Lines <strong class="userinput"><code>22</code></strong> and <strong class="userinput"><code>34</code></strong> are identical. They contain a simple <code class="literal">if</code> statement to make the running and jumping functionality work only when <code class="literal">currentGameState</code> is <code class="literal">inGame</code>. There isn't much more to explain here. Notice how easily we can access the <code class="literal">currentGameState</code> due to the singleton approach.</p></div>