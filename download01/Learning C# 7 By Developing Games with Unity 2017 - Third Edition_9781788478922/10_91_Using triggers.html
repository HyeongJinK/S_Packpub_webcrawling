<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch10lvl1sec89"></a>Using triggers</h2></div></div><hr /></div><p>We can easily configure any collider in Unity to work like a trigger. Triggers are very useful. In this case, we will use them to detect whether our character has fallen into a hole. I have already prepared another useful prefab for you, so we won't waste any time setting it up. The steps are as follows:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Import <code class="literal">KillTrigger.unitypackage</code> into your project.</li><li>Drag the <code class="literal">Kill</code> trigger into your project.</li><li>Position the <code class="literal">KillTrigger</code> game object so the red area is below the <span>ground:</span></li></ol></div><div class="mediaobject"><img src="/graphics/9781788478922/graphics/dfa426fd-c9d1-48e2-a989-b784d2f3d455.png" /></div><p>This is all we need on the <strong class="userinput"><code>Scene</code></strong> view. Once Jake drops down from the end of the platform, he will most certainly fall through the red trigger zone. Now, we need to write some code to describe this behavior. It will be a very simple component added to the <code class="literal">KillTrigger</code> game object.</p><p>Create new a C# script, call it <code class="literal">KillTrigger</code>, and write the code so it looks like this:</p><div class="mediaobject"><img src="/graphics/9781788478922/graphics/165c9638-bf3f-4acf-a21a-e2658520c8c0.png" /></div><p>As you can see, there is nothing complicated here. We use the <code class="literal">OnTriggerEnter2D</code> method. It is called automatically by Unity whenever another 2D collider enters the trigger area.</p><p>Before we test how things work, we need to make sure our <strong class="userinput"><code>Player</code></strong> game object has the correct tag set up. Unity uses tags to help you recognize the game objects in code. It is very useful and easy to use. Select the <strong class="userinput"><code>Player</code></strong> game object and set its tag to <strong class="userinput"><code>Player</code></strong> :</p><div class="mediaobject"><img src="/graphics/9781788478922/graphics/f4b495c4-e781-486e-a48e-e5fea0e1a454.png" /></div><p>Now, we are ready to perform a test. Press <strong class="userinput"><code>Play</code></strong> in Unity. Then, press <span class="emphasis"><em><span class="strong"><strong>S</strong></span></em></span> on the keyboard to start the game. Our character will start running. If everything works properly, we should get the <strong class="userinput"><code>Console</code></strong> message as soon as the character touches the trigger area.</p><p>Nice! We can trigger the parts of the code by physics events. Think about different things we can use triggers for, such as collecting stuff. Anyway, at the moment we just call <code class="literal">Debug.Log</code>. What we really want here is an actual functionality.</p><p>Simple logic says that if the player touches the <code class="literal">killTrigger</code>, the player should die. Let's go back to <code class="literal">PlayerController</code> and add a new method:</p><pre class="programlisting">public void Kill() { 
 
  GameManager.instance.GameOver(); 
  animator.SetBool("isAlive", false); 
} </pre><p>Before we call this method in <code class="literal">PlayerController</code>, we need to the change <code class="literal">PlayerController</code> class into a singleton. We have done this already with <code class="literal">GameManager</code>. Go ahead and add the <code class="literal">instance</code> static variable to <code class="literal">PlayerController</code> and assign it in the <code class="literal">Awake</code> method. If you feel a bit lost now, go back to the previous part of this chapter where we learned about the singleton approach.</p><p>Now we have a really easy <code class="literal">Kill</code> method to call when something bad happens to our character. Let's go back to the <code class="literal">Kill</code> trigger and call it instead of <code class="literal">Debug.Log()</code>. After editing, the <code class="literal">Kill</code> trigger class should look like this:</p><div class="mediaobject"><img src="/graphics/9781788478922/graphics/f0cbcd18-81e2-489f-8372-3d7c79c73059.png" /></div><p>Test the newly written or edited code as soon as possible. Select <code class="literal">GameManager</code> in the <strong class="userinput"><code>Hierarchy</code></strong> first. Press <strong class="userinput"><code>Play</code></strong> in Unity and then press the <span class="emphasis"><em><span class="strong"><strong>S</strong></span></em></span> key to start the game. As soon as our character falls into the trigger area, <code class="literal">GameManager.currentGameState</code> should change from <code class="literal">inGame</code> to <code class="literal">game over</code>.</p></div>