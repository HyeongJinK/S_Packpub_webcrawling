<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch08lvl1sec74"></a>Testing the mechanics</h2></div></div><hr /></div><p>After deciding how our game will be, we should creating a simple test (without worrying about the design) with only the main features of the game, to see if our idea really works well. By doing this at this stage, we avoid spending a lot of time creating the art of the game, creating the scripts, and putting everything in place because we may end up creating a game that isn't fun, and at least this way we can minimize the amount of work that needs to be redone.</p><p>Here we can use simple squares and circles to create our level and add the movement mechanics to an object to test the game.</p><p>What's next? Another good step forward is to write down the game's feature list and talk about each of the steps in detail.</p><p>Here is the feature list:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">Level design</li><li style="list-style-type: disc">An animated 2D character with 2D physics</li><li style="list-style-type: disc">Controls</li><li style="list-style-type: disc">Collectables and storing the player's data</li><li style="list-style-type: disc">A scoring system that stores high scores</li><li style="list-style-type: disc">User interface</li></ul></div><p>Let's talk about each of these features to make sure you understand what they are.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec48"></a>Level design</h3></div></div></div><p>In every game, the level is the key component. It's the environment in which the player moves around and enjoys the game. In this case, we have a classic 2D platform level.</p><p>For this game, we will create our own levels, deciding what will happen at each point in the game, creating a challenging and fun experience for the player.</p><p>In order to do that, we need to define a few obstacles and platforms that can be placed in the game and the area where the character can walk.</p><p>This part of the process we can do first on paper in order to get a general idea of where we want to place the obstacles and platforms. That way, we can have a quick look at what the level will look like. For this example, we used Adobe Illustrator to design our level by using simple squares. Choose the most convenient method for you:</p><div class="mediaobject"><img src="/graphics/9781788478922/graphics/da92420c-bc4a-4d06-8598-05a3304376ec.jpg" /></div><p>After sketching our level, we can do the same thing in Unity, first by using simple cubes to quickly test our level to see if everything works fine, and then moving forward and adding our assets.</p><p>For now, don't worry about planning to code this at all. Remember that we are planning the game. We are not in the active production phase yet. The more you think about the mechanics and how it can work, the better. There will always be a lot of uncertainty while planning, and some solutions that you choose at the planning stage might not work. That's fine! Let's stay open-minded with the game, while at the same time try to plan as much as you can.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec49"></a>An animated 2D character</h3></div></div></div><p>So, we are creating a 2D game in a 3D game engine. Yes, why not? Unity gives us a lot of brilliant features for creating 2D games. We will use Unity's built–in animation system to animate our character. We will try to add animations for the following:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">Running</li><li style="list-style-type: disc">Jumping</li><li style="list-style-type: disc">Falling</li></ul></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec50"></a>Physics</h3></div></div></div><p>For gravity, physics, collision detection, and triggering events, we will use built-in 2D physics components, such as <code class="literal">Rigidbody2D</code>. As our game is really simple and this book is about learning C#, we will try to keep the physics as simple as possible. In fact, we will just implement gravity and simply check whether our character is on the ground. These two physics mechanics are the absolute minimum for any platform game, and you will be able to reuse most of the code that you write for this.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec51"></a>Mouse and touch controls</h3></div></div></div><p>We need to give our user a way to control the game. Yet again, simplicity is the key here. I believe we can use the built-in input system and make it universal for standalone platforms and mobile devices. The user will be able to use their mouse and touchscreen. We will possibly use clicks for jump mechanics, and that's it!</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec52"></a>Collectables and obstacles</h3></div></div></div><p>Our character will travel through the level. We will add the ability for them to collect stuff such as coins.</p><p>Our character can also be killed by obstacles. To make this work, we will use the built–in Unity physics and write some easy-to-use classes.</p><p>Both collecting coins and getting killed by obstacles are initially developed the same way, and that is why we are referring to both actions in the same topic.</p><p>If you search in the Unity reference documentation for <code class="literal">MonoBehaviour</code>, you will find some useful methods called automatically by Unity physics, such as <code class="literal">OnTriggerEnter</code> and <code class="literal">OnCollisionEnter</code>. I don't want to go into too much detail on how this will work, but I want you to understand the principle:</p><div class="mediaobject"><img src="/graphics/9781788478922/graphics/c577ab60-62d8-4617-9587-e11a257d314b.png" /></div><p>On the left-hand side of the image, we have our character game object. It will contain a <code class="literal">RigidBody</code> component in order to enable simple gravity physics and physics events.</p><p>As soon as the <code class="literal">RigidBody</code> collider overlaps the coin trigger, the <code class="literal">OnTriggerEnter</code> method on the <code class="literal">MonoBehaviour</code> attached to the <code class="literal">RigidBody</code> game object is executed automatically. I realize that this might feel a bit complicated, so don't trouble yourself about it too much yet. Once we get that far, I will explain it in much greater detail.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec53"></a>Scoring</h3></div></div></div><p>The main challenge of the game will be completing the levels that we create, but how can we see whether <span>we</span> scored more than our friends? It's simple, we will implement a score; that way, we can compete with our friends or with ourselves, trying to beat our previous record.</p><p>For this game, we will be scoring the time in order to find out who has completed the level the quickest, and to do that we will be counting every second and millisecond from the start of the game.</p><p>You will learn how to store and retrieve the user's high score.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec54"></a>UI – the user interface</h3></div></div></div><p>As this book covers the basics, we should first explain what a user interface(UI) is. A user interface is everything on the screen that the user interacts with to control the game. So all buttons, text, and so on are parts of a UI system.</p><p>Unity introduced a brilliant UI system with version 4.6. We will focus on the built-in system instead of using a third-party package. Why? Simply because we should learn about the built-in tools that Unity offers.</p><p>The game will be divided into a few views, as follows:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><span class="strong"><strong>Main menu view</strong></span>: This is the first view that the user sees when the game is loaded:</li></ul></div><div class="mediaobject"><img src="/graphics/9781788478922/graphics/02cf464d-a103-4586-ac5f-bf5f94c3fd22.png" /></div><p>As you can see, the main menu view will be very simple. It will contain only the title, the <strong class="userinput"><code>Play</code></strong> button, and the <strong class="userinput"><code>Quit </code></strong>button. The <strong class="userinput"><code>Play</code></strong> button will take the user to the next view and the <strong class="userinput"><code>Quit </code></strong>button will quit the application. We will possibly add a nice background as well, maybe an animated one. Let's keep the background planning open for this view. We can decide on that later.</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><span class="strong"><strong>In–game view</strong></span>: This will be visible during gameplay only:</li></ul></div><div class="mediaobject"><img src="/graphics/9781788478922/graphics/8d514d3f-33a1-4aaf-8829-c3426161a405.png" /></div><p>This is more or less what we want our user to see during the actual gameplay stage. The top-left corner will be occupied by some text. One part of it will say <strong class="userinput"><code>Score</code></strong>, and immediately underneath it we will display the current score. The top-right corner will display the highest score ever achieved by the player.</p><p>The top center of this view seems to be a good spot for a coin counter. The coin counter will display a coin symbol right next to a text label that shows the currently collected coins. The view won't have a background as it will be filled by the game itself! I hope this makes sense.</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><span class="strong"><strong>Game Overview</strong></span>: This will be shown after the game, when the player character dies:</li></ul></div><div class="mediaobject"><img src="/graphics/9781788478922/graphics/a8ac7bac-0737-499f-ab25-74e2aa8ed6f8.jpg" /></div><p>When the player dies, we will move the focus to the Game Overview, most likely displaying the elements shown in the preceding screenshot. A massive <strong class="userinput"><code>GAME OVER</code></strong> message will be shown, followed by the score achieved and the count of coins collected. The user will have to make a choice here to either click on <strong class="userinput"><code>PLAY AGAIN</code></strong> or go to the <strong class="userinput"><code>MAIN MENU</code></strong>:</p><div class="mediaobject"><img src="/graphics/9781788478922/graphics/37a29cd0-f7ff-4d4c-ba97-0e803ce836a2.png" /></div></div></div>