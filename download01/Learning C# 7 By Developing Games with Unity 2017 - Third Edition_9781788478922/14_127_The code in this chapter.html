<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch14lvl1sec121"></a>The code in this chapter</h2></div></div><hr /></div><p>The code for <code class="literal">Enemy.cs</code>:</p><pre class="programlisting"><span>using System.Collections;
 using System.Collections.Generic;
 using UnityEngine;

 public class Enemy : MonoBehaviour {

     public float jumpForce = 6f;
     public float runningSpeed = 1.5f;
     public Animator animator;

     private Rigidbody2D rigidBody;

     public static bool turnAround;

     void Awake() {
         rigidBody = GetComponent&lt;Rigidbody2D&gt;();
     }

     void Start(){
         turnAround = false;
     }

     public void StartGame() {
         animator.SetBool("isAlive", true);
     }


     void FixedUpdate() {

         if (turnAround == true)
         {
             transform.eulerAngles = new Vector3(0,180,0);
         }

         if (turnAround == false)
         {
             transform.eulerAngles = new Vector3(0,0,0);
         }

         if (GameManager.instance.currentGameState == GameState.inGame) 
         {
             if (rigidBody.velocity.x &lt; runningSpeed) {
                 rigidBody.velocity = new Vector2(runningSpeed, rigidBody.velocity.y);
             }
         }
     }

     void Jump() {
         if (isGrounded()) {
             rigidBody.AddForce(Vector2.up * jumpForce, ForceMode2D.Impulse);
         }
     }

     public LayerMask groundLayer;

     bool isGrounded() {

         if (Physics2D.Raycast(this.transform.position, Vector2.down, 0.2f, groundLayer.value)) {
             return true;
         }
         else {
             return false;
         }
     }


     public void Kill() {
         animator.SetBool("isAlive", false);
     }

 }
</span></pre><p>The code for <code class="literal">triggerMovement.cs</code>:</p><pre class="programlisting"><span>using System.Collections;
 using System.Collections.Generic;
 using UnityEngine;

 public class triggerMovement : MonoBehaviour {

     public bool movingForward;

     void OnTriggerEnter(Collider other) {

         if (movingForward == true)
         {
             Enemy.turnAround = true;
         }

         else
         {
             Enemy.turnAround = false;
         }

     }
 }
</span>

</pre><p>The code for <code class="literal">PlayerController.cs</code>:</p><pre class="programlisting"><span>using UnityEngine;
 using System.Collections;

 public class PlayerController : MonoBehaviour {

     public static PlayerController instance;

     public float jumpForce = 6f;
     public float runningSpeed = 1.5f;
     public Animator animator;

     private Vector3 startingPosition;
     private Rigidbody2D rigidBody;

     void Awake() {
         instance = this;
         rigidBody = GetComponent&lt;Rigidbody2D&gt;();
         startingPosition = this.transform.position;
     }

     public void StartGame() {
         animator.SetBool("isAlive", true);
         this.transform.position = startingPosition;
     }

     void Update () {

         if (GameManager.instance.currentGameState == GameState.inGame) 
         {
             if (Input.GetMouseButtonDown(0)) {
                 Jump();
             }
             animator.SetBool("isGrounded", isGrounded());
         }
     }

     void FixedUpdate() {

         if (GameManager.instance.currentGameState == GameState.inGame) 
         {
             if (rigidBody.velocity.x &lt; runningSpeed) {
                 rigidBody.velocity = new Vector2(runningSpeed, rigidBody.velocity.y);
             }
         }
     }

     void Jump() {
         if (isGrounded()) {
             rigidBody.AddForce(Vector2.up * jumpForce, ForceMode2D.Impulse);
         }
     }

     public LayerMask groundLayer;

     bool isGrounded() {

         if (Physics2D.Raycast(this.transform.position, Vector2.down, 0.2f, groundLayer.value)) {
             return true;
         }
         else {
             return false;
         }
     }

     void OnCollisionEnter(Collision other) {

         if (other.gameObject.tag == "Enemy") {
             Kill ();
         }
     }


     public void Kill() {
         GameManager.instance.GameOver();
         animator.SetBool("isAlive", false);

         //check if highscore save if it is
         if (PlayerPrefs.GetFloat("highscore", 0) &lt; this.GetDistance()) {
             //save new highscore
             PlayerPrefs.SetFloat("highscore", this.GetDistance());
         }
     }


     public float GetDistance() {
         float traveledDistance = Vector2.Distance(new Vector2(startingPosition.x, 0),
                                                   new Vector2(this.transform.position.x, 0));
         return traveledDistance;                                                                                   
     }


 }
</span></pre></div>