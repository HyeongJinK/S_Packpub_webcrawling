<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec18"></a>Building a cool level</h2></div></div><hr /></div><p>Now that we have the character fully animated and controllable, it's time to build a cool level to let him move in. In order to organize the level, we can follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Delete both <code class="literal">Floor_1</code> and <code class="literal">Floor</code> game objects (since we start from scratch).</p></li><li><p>Create two new objects, <code class="literal">Level</code> and <code class="literal">Floors_1</code>. Reset their position (all zeros) and scale (all ones).</p></li><li><p>Create a <code class="literal">Floor_1</code> game object from the tile we want to use. Furthermore, set its scale to <code class="literal">(2.15,2,1)</code>. Finally, add a Box Collider 2D.</p></li><li><p>Parent them to each other in the following order: <code class="literal">Floor</code> | <code class="literal">Floors_1</code> | <code class="literal">Floor_1</code>, as shown in the following image:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781784393106/graphics/image_03_018.jpg" /></div><p>
</p><p>This is what the <span class="strong"><strong>Inspector</strong></span> should look like:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781784393106/graphics/image_03_019.jpg" /></div><p>
</p></li><li><p>Add the component <code class="literal">PlatformEffector2D</code> to the object <code class="literal">Floor_1</code>. To easily find it, you can use the search tool or navigate to <span class="strong"><strong>Component</strong></span> | <span class="strong"><strong>Physics 2D</strong></span>.</p></li><li><p>Check the <span class="strong"><strong>Used By Effector</strong></span> variable in the collider to <code class="literal">True</code>.</p></li><li><p>Change the <code class="literal">PlatformEffector2D</code> component to match the following image:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781784393106/graphics/image_03_020.jpg" /></div><p>
</p></li><li><p>In the Box Collider 2D component of <code class="literal">Floor_1</code>, use <span class="strong"><strong>Slippery</strong></span> as the physics material. It can be found in the <span class="strong"><strong>Standard Assets</strong></span>.</p></li><li><p>Duplicate the child floor object until you achieve the following appearance (leave a distance of <code class="literal">1.5</code> between each block on the <span class="emphasis"><em>X</em></span> axis):</p><p>
</p><div class="mediaobject"><img src="/graphics/9781784393106/graphics/image_03_021.jpg" /></div><p>
</p></li><li><p>This is the appearance in the <span class="strong"><strong>Scene</strong></span> view.</p><p>
</p><div class="mediaobject"><img src="/graphics/9781784393106/graphics/image_03_022.jpg" /></div><p>
</p></li><li><p>Change the position of the object <code class="literal">Floor_1</code> to <code class="literal">(-5,-1.5,0)</code>.</p><p>
</p><div class="mediaobject"><img src="/graphics/9781784393106/graphics/image_03_023.jpg" /></div><p>
</p></li><li><p>Keep duplicating the floor objects until you achieve the following result:</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip12"></a>Tip</h3><p>To quickly duplicate game objects, you can use <code class="literal">prefabs</code>. They are real time savers.</p></div><p>
</p><div class="mediaobject"><img src="/graphics/9781784393106/graphics/image_03_024.jpg" /><div class="caption">Final result achieved by duplicating (or using Prefabs). How it appears in the Project panel.</div></div><p>
</p></li><li><p>Change the position of the <code class="literal">player</code> object to the following <code class="literal">(-4,0,0)</code> and make sure that its tag is set to <code class="literal">Player</code>:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781784393106/graphics/image_03_025.jpg" /></div><p>
</p></li><li><p>Select the <code class="literal">Camera</code> object and add the <code class="literal">Camera2DFollow</code> component. To add the component, use the search tool or navigate to <span class="strong"><strong>Component</strong></span> | <span class="strong"><strong>Scripts</strong></span>.</p></li><li><p>Inside the <code class="literal">Camera2DFollow</code> component, set the target to the player object, then set both <span class="strong"><strong>Damping</strong></span> and <span class="strong"><strong>Look Ahead Factor</strong></span> to 0:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781784393106/graphics/image_03_026.jpg" /></div><p>
</p></li></ol></div><p>Now, let's try to play this level and see what we have so far!</p><p>
</p><div class="mediaobject"><img src="/graphics/9781784393106/graphics/image_03_027.jpg" /></div><p>
</p><p>As you can see, we now have a nice Platformer level. But, before going further, we need to understand the changes that we have made to our scene. They are explained as follows:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<code class="literal">PlatformEffector2D</code>: This built-in component, when added to an object with a collider, can apply various platform behaviors such as the <code class="literal">One Way Collision</code> which enables the player to go through a platform when jumping upwards but doesn't let him pass through when falling down.</p></li><li style="list-style-type: disc"><p>
<code class="literal">Camera2DFollow</code>: This script controls the camera to track the player when he moves. It can be found in the <code class="literal">2D</code> package in the <code class="literal">StandardAssets</code> folder.</p></li></ul></div><p>Now the level is okay, but we can still add a few touches to spice things up! For instance, you can try the following:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Under the <code class="literal">Floors_4</code> object, change the <code class="literal">OneWay</code> variable in its children <code class="literal">PlatformEffector2D</code> component to <code class="literal">True</code>:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781784393106/graphics/image_03_028.jpg" /><div class="caption">Here is where it is located in the Scene View.</div></div><p>
</p><p>
</p><div class="mediaobject"><img src="/graphics/9781784393106/graphics/30and-31.jpg" /><div class="caption">And here is how the components appear in the Inspector.</div></div><p>
</p></li><li><p>Under the <code class="literal">Floors_4</code> object, remove the component <code class="literal">PlatformEffector2D</code> from its children.</p></li><li><p>Under the <code class="literal">Floors_4</code> object, add the component <code class="literal">SurfaceEffector2D</code> to its children and set the <code class="literal">Speed</code> variable to <code class="literal">5</code>. To add this component, use the search tool or navigate to <span class="strong"><strong>Component</strong></span> | <span class="strong"><strong>Physics 2D</strong></span>. Here it is in the <span class="strong"><strong>Scene</strong></span> view:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781784393106/graphics/image_03_031.jpg" /></div><p>
</p><p>Here it is in the <span class="strong"><strong>Scene</strong></span> view:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781784393106/graphics/33and34.jpg" /></div><p>
</p></li></ol></div><p>The <code class="literal">SurfaceEffector2D</code> component applies a force along the surface of the collider, which in turn moves the physical bodies on top of it accordingly.</p><p>Let's see what we have accomplished so far in this chapter! So, make sure to save the scene first and then hit play:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781784393106/graphics/image_03_034.jpg" /></div><p>
</p><p>That's it! Now that we have changed the player movement to respond to the physical forces in the scene, which added more realism to our game. You can play around and build different scenarios so you can be confident with the concepts explained in this chapter.</p></div>