<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch01lvl1sec10"></a>Our character makes its first steps</h2></div></div><hr /></div><p>Starting from this chapter, and continuing in the next two, we will work on our first project. It is a Platformer game that resembles the original Mario game.</p><p>In this chapter our objective is to create a character that will move on a platform across the <span class="emphasis"><em>x</em></span>-axis. We can achieve this by using the player input. Now, let's continue from where we stopped. We should have a game object named <code class="literal">p1_front</code>, now we can rename it as <code class="literal">Player</code>. As a result, your scene should look like the following:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781784393106/graphics/image_01_012.jpg" /></div><p>
</p><p>However, our character is now floating in the middle of nowhere. Therefore, adding some ground for him to move on is a good start. To achieve this, go to the <span class="strong"><strong>Project</strong></span> panel and from the <span class="strong"><strong>Platformer Pack</strong></span> folder select <code class="literal">tiles_spritesheet</code>. We can see its <span class="strong"><strong>Import Settings</strong></span> in the <span class="strong"><strong>Inspector</strong></span>. We need to change the <span class="strong"><strong>Sprite Mode</strong></span> to <code class="literal">Multiple</code> and then click on <span class="strong"><strong>Apply</strong></span>.</p><p>Open the <span class="strong"><strong>Sprite Editor</strong></span> for our selected asset by clicking on the <span class="strong"><strong>Sprite Editor</strong></span> button. As we did before, we can slice the image by using the <code class="literal">Automatic</code> method and it will work fine. Now that each sprite has been sliced, click on <span class="strong"><strong>Apply</strong></span> and close the editor. You will now notice that more sprites have been generated under <code class="literal">tiles_spritesheet</code>, as shown here:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781784393106/graphics/image_01_013.jpg" /></div><p>
</p><p>In order to keep things organized, let's create a new empty game object. It can be done by right-clicking in the <span class="strong"><strong>Hierarchy</strong></span> panel, and then selecting <code class="literal">Empty</code> game object. In the <span class="strong"><strong>Inspector</strong></span>, we can rename this <code class="literal">Floor</code> and change its position in <code class="literal">(0,0,0)</code>, as shown in the following image:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781784393106/graphics/image_01_014.jpg" /></div><p>
</p><p>Now we can drag the sprite named <code class="literal">tiles_spritesheet_9</code> onto the <code class="literal">Floor</code> object we just created. Rename the file to <code class="literal">Floor_1</code> and set its position to <code class="literal">(-2,-0.65, 0)</code>. Now we also need to change the sorting layer to <code class="literal">Foreground</code> and the sorting order to <code class="literal">1</code> so it doesn't overlap with our player.</p><p>As you can see, we have the first tile of our floor under the player and now we want to create more tiles in order to create a floor that the player can walk on. We could scale the <code class="literal">Floor_1</code> object to make it larger. However, the advantage to having titles is the possibility to use more of them next to each other in a seamless way. Therefore, let's duplicate it. To achieve this, select the <code class="literal">Floor_1</code> object and then you can duplicate either by right-clicking and selecting <code class="literal">Duplicate</code>, or by using <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>D</em></span> (for Mac users <span class="emphasis"><em>cmd</em></span> + <span class="emphasis"><em>D</em></span>). You will notice that the new object is automatically named <code class="literal">Floor_2</code>, which is what we would like to have to keep things organized. Click on the new object and by using the <code class="literal">Rect</code> tool, move it to the left from the scene view, next to the original object. Now, to get our floor, let's repeat this procedure and move the tiles, until we have something like the following:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781784393106/graphics/image_01_015.jpg" /></div><p>
</p><p>If you want to reproduce the scene like in the previous image, the last tile on the right is positioned at <code class="literal">(2,-0.65,0)</code>.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip9"></a>Tip</h3><p>You can duplicate groups of objects when you need to duplicate large pieces of the map.</p></div><p>After finishing the floor tiles, let's check the game view. It appears that the objects are rather small. We can fix this by scaling the game objects. This is not best practice, because usually the graphics should already be created without the need to scale. On the other hand, we may want to change the camera settings to look at our world more closely. However, for the purpose of learning something new, we can change the scale of the player to <code class="literal">(2, 2, 1)</code>. This way, we can make our player bigger. Repeat the same with the <code class="literal">Floor</code> game object by setting its scale to <code class="literal">(2, 2, 1)</code>. As a result, all of its children (for example, the single tiles of the floor) will be scaled. As a result, the game view should look like the following:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781784393106/graphics/image_01_016.jpg" /></div><p>
</p><p>Our next step is allowing the player to move the character, in this case, along the <span class="emphasis"><em>x</em></span>-axis. To achieve this, we need to create a script. In the <span class="strong"><strong>Project</strong></span> panel, create a new folder and rename it as <code class="literal">Scripts</code>. In this new folder, let's create a new C# script by right-clicking and then selecting <span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>C# Script</strong></span>. Rename it to <code class="literal">PlayerMovement</code> and then attach the script to our player by dragging and dropping it onto the player object. Double-click on the script to open it.</p><p>First, we need to add some variables to control the movement. In particular, one for the speed, and another two for the boundary of our world. Let's add the following variables:</p><pre class="programlisting">    // The Player's speed 
    public float speed = 10.0f; 
 
    //Game boundaries 
    private float leftWall = -4f; 
    private float rightWall = 4f; 
</pre><p>Now, in the <code class="literal">Update()</code> function we first need to calculate how far it will be translated and where, based on the input of the player. In this case, we take the horizontal axis, which, by default, is bound to the arrow keys. In order to calculate this, we need to take into consideration how much time is passed from the last frame. This can be done by adding <code class="literal">Time.deltaTime</code> into the equation. Then, we need to translate the character so it doesn't fall off the boundary after the translation. So we will write the following:</p><pre class="programlisting">  // Update is called once per frame 
  void Update () { 
        // Get the horizontal axis that by default is bound to the arrow keys 
        // The value is in the range -1 to 1 
        // Make it move per seconds instead of frames 
        float translation = Input.GetAxis("Horizontal") * speed * Time.deltaTime; 
        // Move along the object's x-axis within the floor bounds 
        if (transform.position.x + translation &lt; rightWall &amp;&amp; 
           transform.position.x + translation &gt; leftWall) 
            transform.Translate(translation, 0, 0); 
    } 
</pre><p>Save the changes and hit the play button. By using the left and right arrow (alternatively <span class="emphasis"><em>A</em></span> and <span class="emphasis"><em>D</em></span>), you will be able to move the character across the platform. You can change the speed of the player by adjusting the speed value from the <span class="strong"><strong>Inspector</strong></span>, as shown here:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781784393106/graphics/image_01_017.jpg" /></div><p>
</p><p>Now, our scene needs a background. In the <span class="strong"><strong>Project</strong></span> panel in the <span class="strong"><strong>Platformer Pack</strong></span> folder drag the file <code class="literal">bg</code> into the scene. Rename the game object to <code class="literal">Background</code> and set the scale to <code class="literal">(5,3,0)</code>. As a result, the game view should look like the following:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781784393106/graphics/image_01_018.jpg" /></div><p>
</p></div>