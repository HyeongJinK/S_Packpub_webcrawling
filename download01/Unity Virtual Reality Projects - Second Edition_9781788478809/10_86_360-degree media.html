<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch10lvl1sec85"></a>360-degree media</h2></div></div><hr /></div><p>The terms <span>360-degree</span> and <span class="emphasis"><em>virtual reality</em></span> are tossed around a lot lately, often in the same sentence. Consumers may be led to believe that it's all the same thing, it's all figured out, and it's all very easy to produce, when in fact it is not so simple.</p><p>Generally, the term 360-degree refers to viewing of <span>prerecorded</span><a id="id325577435" class="indexterm"></a> photos or videos in a manner that allows you to rotate your view's direction to reveal content that was just outside your field of view.</p><p>Non-VR 360-degree media has become relatively common. For example, many real-estate listing sites provide panoramic previews with a web-based player that lets you interactively pan around to view the space. Similarly, Facebook and YouTube support uploading and playback of 360-degree videos and provides a player with interactive controls to look around during the playback. Google Maps lets you upload 360-degree still photosphere images, much like their Street View that you can create with an Android or iOS app or a consumer camera (for more information, visit <a class="ulink" href="https://www.google.com/maps/about/contribute/photosphere/" target="_blank"><span>https://www.google.com/maps/about/contribute/photosphere/</span></a>). The internet is teeming with 360-degree media!</p><p>With a VR headset, viewing 360-degree media is surprisingly immersive, even just still photos. You're standing at the center of a sphere with an image projected onto the inside surface, but you feel like you're really there in the captured scene. Simply turn your head to look around. It's one of those things that gets people interested in VR the first time they see it, and it is a popular application for Google Cardboard and Gear VR, having jump-started the consumer VR revolution for a lot of people.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec130"></a>Equirectangular projections</h3></div></div></div><p>Ever since it was discovered that the Earth is round, cartographers and <span>mariners</span><a id="id325577460" class="indexterm"></a> have struggled with how to project the spherical globe onto a two-dimensional chart. The variations are plentiful and the history is fascinating (if you're fascinated by that sort of thing!) The result is an <span>inevitable</span><a id="id325577468" class="indexterm"></a> distortion of some areas of the globe.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note95"></a>Note</h3><p>To learn more about map projections and spherical distortions, visit <a class="ulink" href="http://en.wikipedia.org/wiki/Map_projection" target="_blank"><span>http://en.wikipedia.org/wiki/Map_projection</span></a>.</p></div><p>As a computer graphics designer, it's perhaps a little less mysterious than it was to ancient mariners because we know about <span class="emphasis"><em>UV Texture mapping</em></span>.</p><p>3D computer models in Unity are defined by <span class="emphasis"><em>meshes</em></span>-a set of Vector3 <span>points</span><a id="id325581596" class="indexterm"></a> connected with edges, forming triangular-shaped facets. You can unwrap a mesh (in Blender, for instance) into a flattened 2D configuration to define the mapping of texture pixels to the corresponding areas on the mesh surface (UV coordinates). A globe of the Earth, when unwrapped, will be distorted, as defined by the unwrapped mesh. The <span>resulting</span><a id="id325581603" class="indexterm"></a> image is called a <span class="strong"><strong>UV Texture image</strong></span>.</p><p>In computer graphic modeling, this UV mapping can be arbitrary and depends on the artistic requirements at hand. However, for 360-degree media, this typically is done using an <span class="emphasis"><em>equirectangular</em></span> (or a Meridian) projection (for more information, visit <a class="ulink" href="http://en.wikipedia.org/wiki/Equirectangular_projection" target="_blank"><span>http://en.wikipedia.org/wiki/Equirectangular_projection</span></a>), where the sphere is unraveled into a cylindrical projection, stretching the texture as you progress towards the north and south poles while keeping the meridians as equidistant vertical straight lines. The following <span class="emphasis"><em>Tissot's indicatrix</em></span> (visit <a class="ulink" href="http://en.wikipedia.org/wiki/Tissot%27s_indicatrix" target="_blank"><span>http://en.wikipedia.org/wiki/Tissot%27s_indicatrix</span></a> for more information) shows a globe <span>with</span><a id="id325581662" class="indexterm"></a> strategically arranged identical circles (illustration by Stefan Kühn):</p><div class="mediaobject"><img src="/graphics/9781788478809/graphics/8683599d-1da0-442e-9dcf-a52fd2bcb69f.png" /></div><p></p><p>The following <span>image</span> shows the globe unwrapped with an equirectangular projection:</p><div class="mediaobject"><img src="/graphics/9781788478809/graphics/93d156a4-76bb-4e3c-a382-6aa82ebd2841.png" /></div><p>Illustration by Eric Gaba - Wikimedia Commons user: Sting</p><p>We will use an equirectangular mesh for our photo spheres and an appropriately projected (warped) image for its texture map.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec131"></a>VR is hacking your field of view</h3></div></div></div><p>OK, but why are 360-degree media in virtual <span>reality</span><a id="id325581710" class="indexterm"></a> so compelling? There's a huge difference in how we experience viewing a 360-degree video on a flat screen versus inside a VR headset. For example, an IMAX cinema theater with larger screens than that of the conventional cinema <span>encompasses</span><a id="id325581719" class="indexterm"></a> more of your peripheral vision and has a wider <span class="strong"><strong>field of view</strong></span> (<span class="strong"><strong>FOV</strong></span>). A mobile phone or computer monitor, at a natural viewing distance, is about a 26-degree FOV; a movie theatre is 54 degrees (IMAX is 70 degrees). Oculus Rift and <span>HTC VIVE</span> are about 120 degrees. In human vision, one eye is about 160 degrees, both eyes combined provides about a 200-degree <span>horizontal</span><a id="id325586481" class="indexterm"></a> field of view.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note96"></a>Note</h3><p>For more information about FOV adjustments in conventional video games, read the excellent article <span class="emphasis"><em>All about</em></span> FOV (July 18, 2014) by visiting <a class="ulink" href="http://steamcommunity.com/sharedfiles/filedetails/?id=287241027" target="_blank">http://steamcommunity.com/sharedfiles/filedetails/?id=287241027</a>.</p></div><p>In VR, you're not so obviously limited by the FOV and physical dimensions of the screen because you can easily move your head to change your view direction at any time. This provides a fully immersive view, horizontal 360 degrees, as you look side to side and up and down by 180 degrees. In VR, with your head still, the field of view is only significant with regard to the outer reaches of your peripheral vision and eyeball movement. But move your head (at the neck and/or full body); the software detects the change in head pose (viewing direction) and updates the display. The result is you believe to have an uninterrupted view of the 360-degree image.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec132"></a>180-degree media</h3></div></div></div><p>I sometimes joke that taking pictures <span>and</span><a id="id325590369" class="indexterm"></a> videos with my consumer 360-degree camera is like shooting a landscape and a selfie at the same time! Especially if you're holding the camera when taking the pictures, you are always in it. But really, when you take a photo, you're most likely already facing the action, and so when viewing the photo the user is also facing the action. So maybe all you need is 180 degrees. Furthermore, it can be tedious to look all the way behind you. As the name implies, a 180-degree image is <span>half</span><a id="id325590375" class="indexterm"></a> a 360 one, projected onto a hemisphere.</p><p>In 2017, Google introduced a standard for 180-degree media intended for VR (<a class="ulink" href="https://vr.google.com/vr180/" target="_blank">https://vr.google.com/vr180/</a>). In addition to offering equirectangular projection, the cameras have two lenses for capturing stereographic, one for each eye. It works pretty well for a 180-degree view because while you can move left-right to look around, the actual movement needed is relatively small (human peripheral vision is about 200-degree horizontal anyway). Stereo 360 is more challenging.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec133"></a>Stereo 360-degree media</h3></div></div></div><p>To capture monoscopic 360-degree media, you can use a consumer 360-degree camera. These cameras typically have a couple of back-to-back super wide angle lenses <span>and</span><a id="id325594729" class="indexterm"></a> corresponding image sensors. The resulting image captures are stitched together, using clever algorithms to avoid seams, and the result is processed into an equirectangular projection. Viewing it in VR, each eye sees the same 360 photo. For landscapes, such as mountain views or other large areas, where the subject is more than 20 meters from your viewing position, it is fine because there is no parallax. Each eye sees pretty much from the same viewing angle.But if the photo includes objects closer to you, it will look incorrect, or at least artificially flattened, because you expect parallax where each eye has a slightly different view. </p><p>What about true 360-degree stereo? Shouldn't each eye have its own photo sphere offset from the other eye's position? </p><p>To capture<span class="emphasis"><em>stereo</em></span>360-degree media, it cannot simply be photographed by two 360 cameras from two viewpoints but can be constructed by stitching together images from a rotating stereo pair. The distance between camera image captures simulates a human's separation between eyes (IPD, interpupillary distance).  There is a new generation of consumer cameras (such as <span class="emphasis"><em>Fuze Camera</em></span>, <a class="ulink" href="https://vuze.camera/" target="_blank">https://vuze.camera/</a> with eight cameras), and high-end professional camera rigs, such as <span class="emphasis"><em>Google Jump</em></span> (<a class="ulink" href="https://vr.google.com/jump/" target="_blank">https://vr.google.com/jump/</a>), which arranges sixteen separate cameras in a cylindrical array. Advanced image processing <span>software</span><a id="id325594759" class="indexterm"></a> then constructs stereographic views. </p><p>Google has introduced an advanced file format for stereo 360-degree video: <span class="emphasis"><em>omni-directional stereo</em></span>, or ODS. It is a variant of conventional equirectangular projections with the advantages of avoiding bad seams or dead zones, it is pre-rendered for faster playback, and video uses conventional encoding so you can edit using conventional tools.  And Unity supports ODS in their Panoramic Skybox shaders (see the topic later in this chapter).</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note97"></a>Note</h3><p>For a more detailed explanation of the challenges and geometry of stereo 360 media captures, see the Google whitepaper <span class="emphasis"><em>Rendering Omni-directional Stereo Content</em></span> (<a class="ulink" href="https://developers.google.com/vr/jump/rendering-ods-content.pdf" target="_blank">https://developers.google.com/vr/jump/rendering-ods-content.pdf</a>). Also, check out the article <span class="emphasis"><em>Stereographic 3D Panoramic Images</em></span> by Paul Bourke (May 2002) by visiting <a class="ulink" href="http://paulbourke.net/stereographics/stereopanoramic/" target="_blank"><span>http://paulbourke.net/stereographics/stereopanoramic/</span></a>.</p></div></div></div>