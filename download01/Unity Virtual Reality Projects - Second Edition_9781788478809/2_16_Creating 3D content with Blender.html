<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec23"></a>Creating 3D content with Blender</h2></div></div><hr /></div><p>Unity offers some basic <span>geometric</span><a id="id325547516" class="indexterm"></a> shapes, but <span>when</span><a id="id325549813" class="indexterm"></a> it comes to more complex models, you'll need to go beyond Unity. As we discussed, the Unity <strong class="userinput"><code>Asset Store</code></strong> and many sites have tons of amazing models. Where do they come from? Will you run into problems while importing them into Unity?</p><p>I know that this book is about Unity, but we're going on a short side adventure right now. We're going to use Blender (version 2.7x), a free and open source 3D animation suite (<a class="ulink" href="http://www.blender.org/" target="_blank"><span>http://www.blender.org/</span></a>), to make a model and then import it into Unity. Grab a coffee and strap yourself in!</p><p>The plan is not to build anything very fancy right now. We'll just make a cube and a simple texture map. The purpose of this exercise is to find out how well a one-unit cube in Blender imports with the same scale and orientation into Unity.</p><p>Feel free to skip this section or try a similar experiment using your favorite modeling software (<a class="ulink" href="https://en.wikipedia.org/wiki/List_of_3D_modeling_software" target="_blank">https://en.wikipedia.org/wiki/List_of_3D_modeling_software</a>). If you prefer not to follow along or run into problems, a copy of the completed files created in this topic is available in the download package for this book.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec21"></a>An introduction to Blender</h3></div></div></div><p>Open the Blender application. Dismiss the <span>opening</span><a id="id325552384" class="indexterm"></a> splash screen. You will be in the Blender editor, which is similar to what's shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781788478809/graphics/7d58486e-5830-4556-9add-4e399a69f8c3.png" /></div><p>Like Unity, Blender consists of a number of non-overlapping windows, and their layout can be customized to suit your needs. However, the Blender interface can be more daunting, in part because it integrates a number of different editors that can be opened at the same time, in their own panels.</p><p>It's helpful to realize that the default view, as shown in the preceding screenshot, contains five different editors!</p><p>The most obvious editor is the large <span class="strong"><strong>3D View</strong></span>, which I highlighted with a (red) rectangle. This is where you can view, move, and organize the objects in your Blender scene.</p><p>The following are the other editors that are opened:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">The <strong class="userinput"><code>Info editor</code></strong>, which can be seen along the top edge of the app, has global menus and information about the application</li><li style="list-style-type: disc">The <strong class="userinput"><code>Timeline editor</code></strong>, which is present along the bottom edge of the app, is for animations</li><li style="list-style-type: disc">The <strong class="userinput"><code>Outliner editor</code></strong>, on the upper right-hand side, has a hierarchical view of the objects in your scene</li><li style="list-style-type: disc">The <strong class="userinput"><code>Properties editor</code></strong>, which can be seen to the right below the Outliner, is a powerful panel that lets you see and modify many properties of the objects in the scene</li></ul></div><p>Each editor can have multiple panes. Let's consider the 3D View editor:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">The large area in the middle is the <span class="strong"><strong>3D Viewport</strong></span>, where you can view, move, and organize the objects in your Blender scene.</li><li style="list-style-type: disc">Just below the 3D Viewport is the editor <span class="strong"><strong>Header</strong></span>, <span>which is called so although it's at the bottom in this case</span>. The Header is a row of menus and tools that provide great control over the editor, including view selectors, edit modes, transform manipulators, and layer management.</li><li style="list-style-type: disc">On the left-hand side is the <strong class="userinput"><code>Tool Shelf</code></strong> containing various editing tools that can be applied to the currently selected object, which can be organized into tabbed groups. The <strong class="userinput"><code>Tool Shelf</code></strong> can be toggled open or closed by grabbing and sliding its edge or by pressing the <span>key</span><span class="emphasis"><em>T</em></span>.</li><li style="list-style-type: disc">The 3D Viewport also has a <span class="strong"><strong>Properties</strong></span> pane, which may be hidden by default and can be toggled open or closed by pressing the key <span class="emphasis"><em><span class="strong"><strong>N</strong></span></em></span>. It provides the property settings for the currently selected object.</li></ul></div><p>In the upcoming instructions, <span>we will ask you to change the <span class="strong"><strong>Interaction Mode</strong></span> of the 3D View editor, say between the <strong class="userinput"><code>Edit Mode</code></strong> and <strong class="userinput"><code>Texture Paint</code></strong> mode</span>. This is selected in the Header, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781788478809/graphics/1ba0518d-f383-4622-8474-96425054a7f4.png" /></div><p>The other editors also have the Header panes. The Info editor (at the top of the app) is only a Header! The outliner and Properties editors (on the right) have their Headers at the top of their panel rather than at the bottom.</p><p>Once you recognize this layout, it doesn't look so crowded and confusing.</p><p>The Properties editor Header has a wide set of icons, which act like tabs, to select the group of properties presented in the rest of the panel. Hovering your mouse over the icon (like any of the UI widgets here) will show a tooltip with a better hint in regards to what it's for. <span>It's pictured in the following images (in a couple of pages) when we get to using it</span>.</p><p>The Blender layout is very flexible. You can even change a panel from one editor to another. At the far left of each Header is the <strong class="userinput"><code>Editor Type</code></strong> selector. When you click on it, you can see all the options.</p><p>In addition to the plethora of things that you can click on in the Blender interface, you can use just about any command using a keyboard shortcut. If you forget where to find a selection, press the space bar and type in your best guess of the command name that you're looking for. It just might pop up!</p><p>The following is a <span>screenshot</span><a id="id325581709" class="indexterm"></a> showing the <strong class="userinput"><code>Editor Type</code></strong> selector available in Blender:</p><div class="mediaobject"><img src="/graphics/9781788478809/graphics/8e7e7a9d-5d76-49f9-9cf6-1827d177caa8.png" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec22"></a>A unit cube</h3></div></div></div><p>Now, let's <span>build</span><a id="id325552046" class="indexterm"></a> a unit cube in Blender.</p><p>The default scene may already have objects, including a cube, camera, and a light source, as shown earlier in the default Blender window. (Your startup settings may be different since that can be configured.)</p><p>If your startup scene does <span class="emphasis"><em>not</em></span> contain a unit cube, create one, as follows:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Make sure that the scene is empty by deleting whatever is in it (right-click to select, <span class="emphasis"><em><span class="strong"><strong>X</strong></span></em></span> on the keyboard to delete).</li><li>Set the 3D cursor to the origin (<code class="literal">0</code>,<code class="literal">0</code>,<code class="literal">0</code>) using <span class="emphasis"><em><span class="strong"><strong>Shift</strong></span></em></span> + <span class="emphasis"><em><span class="strong"><strong>S</strong></span></em></span> (opens the <strong class="userinput"><code>Snap</code></strong> options list) | <strong class="userinput"><code>Cursor To Center</code></strong>.</li><li>In the left <strong class="userinput"><code>Tool Shelf</code></strong> panel, choose the <strong class="userinput"><code>Create</code></strong> tab and under <strong class="userinput"><code>Mesh</code></strong> select <strong class="userinput"><code>Cube</code></strong> to add a cube.</li></ol></div><p>OK, now we're all on the same page.</p><p>Note that in Blender, the reference grid extends in the <span class="emphasis"><em>x</em></span> and <span class="emphasis"><em>y </em></span>axes, and <span class="emphasis"><em>z</em></span> is up (unlike Unity, where the <span class="emphasis"><em>y </em></span>axis is up).</p><p>Furthermore, note that the default cube in Blender has a size of (<code class="literal">2</code>, <code class="literal">2</code>, <code class="literal">2</code>). We want a unit cube sitting on the ground plane at the origin. For this, follow the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Open the Properties pane with the keyboard <span class="emphasis"><em><span class="strong"><strong>N</strong></span></em></span> key</li><li>Navigate to <strong class="userinput"><code>Transform</code></strong> | <strong class="userinput"><code>Scale</code></strong> and set <strong class="userinput"><code>X</code></strong>, <strong class="userinput"><code>Y</code></strong>, <strong class="userinput"><code>Z</code></strong> to (<code class="literal">0.5</code>, <code class="literal">0.5</code>, <code class="literal">0.5</code>)</li><li>Navigate to <strong class="userinput"><code>Transform</code></strong> | <strong class="userinput"><code>Location</code></strong> and set <strong class="userinput"><code>Z</code></strong> to <code class="literal">0.5</code></li><li>Press the <span class="emphasis"><em><span class="strong"><strong>N</strong></span></em></span> key again to hide the pane</li><li>You can zoom in using the scroll wheel of the mouse</li></ol></div><p>For our purposes, also ensure that the current renderer is <strong class="userinput"><code>Blender Render</code></strong> (in the drop-down selector on the Info editor—at the top of the app window in the center).</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec23"></a>UV Texture image</h3></div></div></div><p>Let's paint the faces of our cube. 3D computer <span>models</span><a id="id325552226" class="indexterm"></a> in Unity are defined by <span class="emphasis"><em>meshes</em></span>—a set of Vector3 points connected with edges, forming triangular-shaped facets. When building a model in Blender, you can unwrap a mesh into a flattened 2D configuration to define the mapping of texture pixels to the corresponding areas on the mesh surface (UV coordinates). The <span>result</span><a id="id325552238" class="indexterm"></a> is called a UV Texture image.</p><p>We will create a <span class="strong"><strong>UV Texture image</strong></span> for our cube, as follows:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Go into <strong class="userinput"><code>Edit Mode</code></strong> using the Interaction Mode selector in the bottom Header bar.</li><li>Select <span class="emphasis"><em>all</em></span> (press the <span class="emphasis"><em><span class="strong"><strong>A</strong></span></em></span> key on the keyboard twice) to make sure that all the faces are selected.</li><li>In the left <strong class="userinput"><code>Tool Shelf</code></strong> panel, select the <strong class="userinput"><code>Shading/UVs</code></strong> tab.</li><li>Under <strong class="userinput"><code>UV Mapping</code></strong> click on <strong class="userinput"><code>Unwrap</code></strong>, select <strong class="userinput"><code>Smart UV Project</code></strong> from the drop-down list, accept the default values, and click on <strong class="userinput"><code>OK</code></strong><span>(the result, shown in the following screenshot, also shows what the unwrapped cube looks like).</span></li><li>Now, go into the <strong class="userinput"><code>Texture Paint</code></strong> mode using the Interaction Mode selector in the bottom Header bar again.</li><li>We need to define a <span class="emphasis"><em>paint slot</em></span> for our material. Click on <strong class="userinput"><code>Add Paint Slot</code></strong>, select <strong class="userinput"><code>Diffuse Color</code></strong>, name it <code class="literal">CubeFaces</code>, and press <strong class="userinput"><code>OK</code></strong>.</li></ol></div><p>We can now start painting directly on the cube. Paint the front face first, as follows:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Make a smaller brush. In the left <strong class="userinput"><code>Tool Shelf</code></strong> panel, in the <strong class="userinput"><code>Tools</code></strong> tab, navigate to <strong class="userinput"><code>Brush</code></strong> | <strong class="userinput"><code>Radius</code></strong> and enter <code class="literal">8 px</code>.</li><li>It may be easier to work in an orthographic view. From the menu bar at the bottom, navigate to <strong class="userinput"><code>View</code></strong> | <strong class="userinput"><code>View Persp/Ortho</code></strong>.</li><li>Then, navigate to <strong class="userinput"><code>View</code></strong> | <strong class="userinput"><code>Front</code></strong>.</li><li>You can zoom in or out using the mouse scroll wheel if needed.</li><li>With your best handwriting, write the word <code class="literal">Front</code> using the left-click of the mouse and draw.</li><li><span>Now, the back face.</span></li><li>From the menu bar at the bottom, navigate to <strong class="userinput"><code>View</code></strong> | <strong class="userinput"><code>Back</code></strong> and select this face with a right-click.</li><li>With your best handwriting, write <code class="literal">Back</code>.</li></ol></div><p>Repeat the above process for the left, right, top, and bottom faces. If at some point it's not painting, make sure that there's a current face selected. Try right-clicking on the face to reselect it. The result should look something like this (shown side by side both in the <strong class="userinput"><code>3D View</code></strong> editor with an orthographic perspective and in the <strong class="userinput"><code>UV/Image Editor</code></strong>):</p><div class="mediaobject"><img src="/graphics/9781788478809/graphics/c4711c5c-26e3-44e8-acdd-1ec4c60cffb7.png" /></div><p>Now, we need to save the texture image and set up its properties, as follows:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Change the current <strong class="userinput"><code>Editor Type</code></strong> to <strong class="userinput"><code>UV/Image Editor</code></strong> using the selector on the far left of the Header at the bottom of the <strong class="userinput"><code>3D View</code></strong> editor.</li><li>Click on the <strong class="userinput"><code>Browse Image to be linked</code></strong> selector icon (just towards the left of the <strong class="userinput"><code>+</code></strong> icon) and choose <code class="literal">CubeFaces</code> from the list.</li><li>The Image menu item on the menu bar at the bottom now has an asterisk (<strong class="userinput"><code>Image*</code></strong>) indicating that there's an unsaved image. Click on it, select <strong class="userinput"><code>Save As Image</code></strong>, and save it as <code class="literal">CubeFaces.png</code>. Use a folder outside the Unity project.</li></ol></div><p> </p><div class="orderedlist"><ol class="orderedlist arabic" start="4" type="1"><li>On the right-hand side, in the Properties editor panel, find the long row of icons in its Header and select the <strong class="userinput"><code>Texture</code></strong> one (third from the last.) It may be hidden if the panel isn't wide enough; you can scroll down with your mouse to show it, as shown in the following screenshot:
<div class="mediaobject"><img src="/graphics/9781788478809/graphics/ad2e52a8-d274-41f1-aa41-21ae088557ea.png" /></div></li><li>Within the Texture properties, change <strong class="userinput"><code>Type</code></strong> to <strong class="userinput"><code>Image or Movie</code></strong>.</li><li>Then, in the <strong class="userinput"><code>Image</code></strong> group of properties, click on the <strong class="userinput"><code>Browse Image to be Linked</code></strong> selector icon (as shown in the following screenshot) and choose <code class="literal">CubeFaces</code>:
<div class="mediaobject"><img src="/graphics/9781788478809/graphics/dcdc2519-2f65-4422-a92a-72b2930b8d23.png" /></div></li><li>You should see the labeled faces texture image in the <strong class="userinput"><code>Preview</code></strong> window.</li></ol></div><p>Good! Let's save the Blender model, as follows:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Select <strong class="userinput"><code>File</code></strong> from the top main menu bar in the Info editor and click on <strong class="userinput"><code>Save</code></strong> (or press <span class="emphasis"><em><span class="strong"><strong>Ctrl</strong></span></em></span> + <span class="emphasis"><em><span class="strong"><strong>S</strong></span></em></span>).</li><li>Use the same folder as the one where you saved the texture image.</li><li>Name it <code class="literal">UprightCube.blend</code> and click on <strong class="userinput"><code>Save Blender File</code></strong>.</li></ol></div><p>We should now have two files in a folder, <code class="literal">UprightCube.blend</code> and <code class="literal">CubeFaces.png</code>. I use a folder named <code class="literal">Models/</code> in the root of my Unity project.</p><p>We recommend you then export the model as FBX format. This is a standard format for Unity. (Unity can import Blend files but may require you always have Blender installed on the same system). Use <span class="strong"><strong>File</strong></span> | <span class="strong"><strong>Export</strong></span> | <span class="strong"><strong>FBX</strong></span> to save the <code class="literal">.fbx</code> version.</p><p>Wow, that was a lot. Don't worry if you didn't get it all. Blender can be daunting. However, Unity needs models. You can always download someone else's models from the Unity <strong class="userinput"><code>Asset Store</code></strong> and other 3D model sharing sites, or you can learn to make your own. Haha! Seriously, it's a <span>good</span><a id="id325578251" class="indexterm"></a> thing to <span>start</span><a id="id325578258" class="indexterm"></a> to learn. Actually, with VR, it's gotten a lot easier as we'll show you later in this chapter.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec24"></a>Importing into Unity</h3></div></div></div><p>Back in Unity, we now <span>want</span><a id="id325578273" class="indexterm"></a> to import both the files, <code class="literal">UprightCube.fbx</code> and <code class="literal">CubeFaces.png</code>, one at a time, as follows:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>In the <strong class="userinput"><code>Project</code></strong> panel, select the top-level <strong class="userinput"><code>Assets</code></strong> folder, navigate to <strong class="userinput"><code>Create</code></strong> | <strong class="userinput"><code>Folder</code></strong>, and rename the folder to <code class="literal">Models</code>.</li><li>An easy way to import files into Unity is to just drag and drop the <code class="literal">.fbx</code> (or <code class="literal">.blend</code>) file from the Windows Explorer (or Mac Finder) window into the <strong class="userinput"><code>Project</code></strong> panel <strong class="userinput"><code>Assets/Models</code></strong> folder and drag and drop the <code class="literal">.png</code> file into the <strong class="userinput"><code>Assets/Textures</code></strong> folder (or you can use <strong class="userinput"><code>Assets</code></strong> | <strong class="userinput"><code>Import New Asset...</code></strong> from the main menu bar).</li><li>Add <code class="literal">UprightCube</code> to the scene by dragging it from the <strong class="userinput"><code>Assets/Models</code></strong> folder where it was just imported into the <strong class="userinput"><code>Scene</code></strong> view.</li><li>Set its position so that it's away from the other objects. I left mine at <strong class="userinput"><code>Position</code></strong> (<code class="literal">2.6</code>, <code class="literal">2.2</code>, <code class="literal">-3</code>).</li><li>Drag the <code class="literal">CubeFaces</code> texture from the <strong class="userinput"><code>Assets/Textures</code></strong> folder into the <strong class="userinput"><code>Scene</code></strong> view, hovering over the just added <code class="literal">UprightCube</code> so that it receives the texture, and drop the texture onto the cube.</li></ol></div><p>The scene should now look something like this:</p><div class="mediaobject"><img src="/graphics/9781788478809/graphics/6bab1b2b-c148-44ef-b4c3-dfacb7534beb.png" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec25"></a>A few observations</h3></div></div></div><p>The back of the cube is facing us. Is <span>that</span><a id="id325552630" class="indexterm"></a> a mistake? Actually, it makes sense since the current viewpoint is looking forward. So, we should see the back of the cube. If you didn't notice already, the same goes for Ethan. It also seems like the cube has a one-unit dimension.</p><p>However, on closer examination, in the cube's <strong class="userinput"><code>Inspector</code></strong> panel, you'll see it imported with the scale that we gave it in Blender (<code class="literal">0.5</code>, <code class="literal">0.5</code>, <code class="literal">0.5</code>). Also, it has an <strong class="userinput"><code>X </code></strong>rotation of -90 (minus 90). Thus, if we reset the transform, that is, the scale to (<code class="literal">1</code>,<code class="literal">1</code>,<code class="literal">1</code>), it'll be 2 units in our world space and tipped over (so, don't reset it).</p><p>There's not much that we can do to compensate for the rotational adjustment without going back to Blender. But the scale can be adjusted in the model's Import Settings (in Inspector).</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip17"></a>Note</h3><p>Blender's default up direction is <strong class="userinput"><code>Z</code></strong>, while Unity's is <strong class="userinput"><code>Y</code></strong>. Importing with a -90 <strong class="userinput"><code>X </code></strong>rotation <span>adjusts for that</span>. An imported scale can be adjusted in the object's <strong class="userinput"><code>Inspector</code></strong> panel's <strong class="userinput"><code>Import Settings</code></strong>.</p></div><p></p><p>We have more control when it comes to exporting FBX from Blender. As shown in the screenshot, during Export you can customize the settings, for example, making <strong class="userinput"><code>Y</code></strong> the up axis and <strong class="userinput"><code>Z</code></strong> the forward one and setting the scale factor for import:</p><div class="mediaobject"><img src="/graphics/9781788478809/graphics/5681b9de-3e69-42cb-9ab6-148b058558f2.png" /></div><p>Before ending the preceding process, select <code class="literal">UprightCube</code> from the <strong class="userinput"><code>Hierarchy</code></strong> panel and drag it into the <strong class="userinput"><code>Project</code></strong> panel's <strong class="userinput"><code>Assets</code></strong> folder. (You may consider making an <strong class="userinput"><code>Assets/Prefabs</code></strong> subfolder and placing it into that.) This makes it a reusable prefab, texture image and all.</p><p>There are some important lessons in this exercise (other than having learned a little bit about Blender) that apply to any 3D Unity project, including the VR ones. Normally, you will be importing models that are much more complex than a cube. You will likely run into issues related to data conversion, scale, orientation, and UV texture images that might be confusing at best. If this happens, try to break the problem into smaller, more isolated scenarios. Do little tests to gain insight into how applications exchange data and to help you understand which parameter tweaks might be necessary.</p></div></div>