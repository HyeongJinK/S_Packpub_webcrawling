<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch07lvl1sec66"></a>Teleportation toolkits</h2></div></div><hr /></div><p>We have explored several <span>different</span><a id="id325317294" class="indexterm"></a> locomotion and teleportation mechanics. All of them use your gaze direction for selection. This is sometimes the best choice. Sometimes it's not. It certainly is the lowest common denominator between various VR devices, from high-end HTC VIVE and Oculus Rift to the low-end Google Cardboard, gaze-based selection with a simple click will always be available. </p><p>It is likely you will prefer to use the hand controller for selection. High-end systems include two positionally tracked controllers, one for each hand. Lower-end devices, such as Google Daydream, include a single 3DOF "laser pointer" controller. Another reason we avoided implementing with controllers so far is the coding varies greatly from one device to the next. Also, the device-specific toolkits often come with components and prefabs that implement this mechanic, optimized for their particular platform, including high-performance shaders for rendering arced laser beams and teleportation markers.</p><p>In this section, we will show how to implement teleportation using these higher-level components, using SteamVR Interaction System and Google Daydream Elements. If you're not using one of these, please see the toolkits project with your target device, or consider a generalized toolkit such as the <span>open</span><a id="id325552035" class="indexterm"></a> source VRTK (<a class="ulink" href="https://github.com/thestonefox/VRTK" target="_blank">https://github.com/thestonefox/VRTK</a>).</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec106"></a>Teleporting with SteamVR Interaction System</h3></div></div></div><p>The SteamVR Interaction System we <span>first</span><a id="id325552096" class="indexterm"></a> introduced in <a class="link" href="#" linkend="ch05">Chapter 5</a>, <span class="emphasis"><em>Handy Interactables</em></span> includes easy to use teleport components. If you are <span>using</span><a id="id325552113" class="indexterm"></a> SteamVR SDK, it can be found in the <code class="literal">Assets/SteamVR/InteractionSystem/Teleport/</code> folder. The teleport tools include a lot of extras we didn't get a chance to implement ourselves, including materials, models, prefabs, scripts, shaders, sounds, textures, haptics, oh my!</p><p>Specifically, the teleport toolkit includes:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><code class="literal">Teleporting</code> prefab: Teleportation controller, add one per scene</li><li style="list-style-type: disc"><code class="literal">TeleportPoint</code> prefab:<span class="strong"><strong> </strong></span>Locations you want to teleport to, add one for each location</li><li style="list-style-type: disc"><code class="literal">TeleportArea</code> component: Add to a game object, such as a Plane, to allow teleporting anywhere on that area</li></ul></div><p>Interaction System includes its own <code class="literal">Player</code> camera rig which replaces the default <code class="literal">[CameraRig]</code> we have been using, as follows:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Locate the <code class="literal">Player</code> prefab in <code class="literal">SteamVR/InteractionSystem/Core/Prefabs</code></li><li>Drag it as a child of <code class="literal">MeMyselfEye</code> in your scene <strong class="userinput"><code>Hierarchy</code></strong></li><li>Delete or disable the <code class="literal">[CameraRig]</code> object</li></ol></div><p> </p><div class="orderedlist"><ol class="orderedlist arabic" start="4" type="1"><li>Drag a copy of <code class="literal">Teleporting</code> prefab from Project<code class="literal">Assets/SteamVR/InteractionSystem/Teleport/Prefabs</code> as a child of <code class="literal">MeMyselfEye</code> (this controller can actually go anywhere in the scene)</li><li>Select the <strong class="userinput"><code>Player</code></strong> in <strong class="userinput"><code>Hierarchy</code></strong>, and drag its parent <code class="literal">MeMyselfEye</code> onto its <strong class="userinput"><code>Tracking Origin Transform</code></strong> slot</li></ol></div><p>This last step is important. The toolkit's teleportation components change the position of the <code class="literal">Player</code> object by default. We want to teleport the Player parent, <code class="literal">MeMyselfEye</code>, when we teleport. This might also be used if in your game, for example, the player is sitting in the cockpit of vehicle and you intend to teleport the whole vehicle, not just the Player itself.</p><p>If you followed the projects earlier in this chapter, disable the things we won't be using here:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>On <code class="literal">MyMyselfEye</code>, disable or remove the <strong class="userinput"><code>Look Teleport</code></strong> and <strong class="userinput"><code>Look Spawn Teleport</code></strong> components</li><li>Disable or delete each of the <code class="literal">TeleportSpawn</code> objects</li></ol></div><p>Now, for each teleport location:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Drag a copy of the <code class="literal">TeleportPoint</code> prefab from Project <code class="literal">Assets/SteamVR/InteractionSystem/Teleport/Prefabs</code> into the Hierarchy</li><li>Place one where you want in the scene. As previously, we used (<code class="literal">0</code>, <code class="literal">0</code>, <code class="literal">-1.5</code>), (<code class="literal">2</code>, <code class="literal">0</code>, <code class="literal">3</code>), (<code class="literal">-4</code>, <code class="literal">0</code>, <code class="literal">1</code>), and on the Overlook (<code class="literal">3.5</code>, <code class="literal">2.5</code>, <code class="literal">0</code>)</li></ol></div><p>That's it! Press <strong class="userinput"><code>Play</code></strong>. The teleport points do not show until you press the button on your controller, then they glow, a dashed laser arc lets you choose one, and you go there. In the Game window shown here, I am teleporting to the Overlook location:</p><div class="mediaobject"><img src="/graphics/9781788478809/graphics/4264c3da-5992-4f11-8850-b71cddb18ce9.png" /></div><p></p><p>Please review the many options on the Teleport component. You can modify or replace materials used for highlighting teleport points, sounds, and other effects. The Teleport Arc component has options for rendering the laser arc, and the <code class="literal">TeleportPoints</code> themselves can each be modified separately.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec107"></a>Teleporting with Daydream Elements</h3></div></div></div><p>The Google Daydream Elements package we <span>first</span><a id="id325581677" class="indexterm"></a> introduced in <a class="link" href="#" linkend="ch05">Chapter 5</a>, <span class="emphasis"><em>Handy Interactables</em></span> includes some teleport components. If you are targeting Google Daydream, you can <span>install</span><a id="id325581694" class="indexterm"></a> the separate Daydream Elements download from GitHub (<a class="ulink" href="https://github.com/googlevr/daydream-elements/releases" target="_blank">https://github.com/googlevr/daydream-elements/releases</a>). And documentation <span>can</span><a id="id325581707" class="indexterm"></a> be found on the Elements site (<a class="ulink" href="https://developers.google.com/vr/elements/teleportation" target="_blank">https://developers.google.com/vr/elements/teleportation</a>).</p><p>Once imported into your project, it can be found in the <code class="literal">Assets/DaydreamElements/Elements/Teleport/</code> folder. There is a demo scene, <strong class="userinput"><code>Teleport</code></strong>, and associated materials, models, prefabs, scripts, shaders, and textures.</p><p>Out of the box, the tools are pretty generic and very customizable. The primary prefab is <code class="literal">TeleportController</code>, which does all the work. The user input used to trigger teleport behavior can be configured in the Unity Editor by filling the component slots, as shown here:</p><div class="mediaobject"><img src="/graphics/9781788478809/graphics/bf917441-0610-4441-82aa-8ad348b58a20.png" /></div><p></p><p>You can extend the teleporter by changing its <span class="emphasis"><em>detector</em></span>, <span class="emphasis"><em>visualizer</em></span>, and <span class="emphasis"><em>transition</em></span> classes.</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><span class="strong"><strong>Detector</strong></span>: Such as the <code class="literal">ArcTeleportDetector</code> does a curved arc Raycast to find objects in the scene and limits the hit to horizontal surfaces with adequate space to "fit" the player, so you do not teleport into walls.</li><li style="list-style-type: disc"><span class="strong"><strong>Visualizer</strong></span>: Such as the <code class="literal">ArcTeleportVisualizer</code>, renders the arc when teleport is triggered.</li><li style="list-style-type: disc"><span class="strong"><strong>Transition</strong></span>: Such as <code class="literal">LinearTeleportTransition</code>, animates the player to the new location. This could be modified to implement a blink effect, for example.</li></ul></div><p>To add it to your scene:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Drag the <code class="literal">TeleportController</code> prefab into your <strong class="userinput"><code>Hierarchy</code></strong> as child of <strong class="userinput"><code>Player</code></strong> (for us that <code class="literal">MeMyselfEye</code><strong class="userinput"><code>| GVRCameraRig | Player</code></strong>)</li><li>Reset its <strong class="userinput"><code>Transform</code></strong>, if necessary</li><li>Drag the <code class="literal">MeMyselfEye</code> object onto the <code class="literal">TeleportController</code> component's <strong class="userinput"><code>Player</code></strong> transform slot</li><li>Drag <code class="literal">GvrControllerPointer</code> (or whichever controller game object you're using) onto the <strong class="userinput"><code>Controller</code></strong> transform slot</li></ol></div><p>Press <strong class="userinput"><code>Play</code></strong> and you can teleport all around your scene. There is no need to place specific teleport targets.</p><p>By default, the <code class="literal">TeleportController</code> will work by letting you land on any object in the scene that has a collider. You can limit the objects considered by the detector's Raycast by specifying the layer(s). Also, if you want arbitrarily shaped target areas that are not necessarily game objects in your scene, you can add sets of objects with just colliders, no renderers. This is how the teleport areas on the islands are implemented in the Daydream Elements teleport demo.</p></div></div>