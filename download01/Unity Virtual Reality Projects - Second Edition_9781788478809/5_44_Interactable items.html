<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch05lvl1sec48"></a>Interactable items</h2></div></div><hr /></div><p>Directly interacting with <span>objects</span><a id="id325317294" class="indexterm"></a> in VR, such as grabbing items and using them to perform other actions, is a bit more complex. And, it can be tricky to get right. So it doesn't make sense, especially in this book, to grow our own interaction system. Unfortunately, there is not a single standard toolkit either. But, there are more than a few very good toolkits you can use, albeit most are specific to individual target platforms.</p><p>Generally, the architecture is similar among these solutions:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">Provides prefabs for the player camera rig</li><li style="list-style-type: disc">Camera rig includes objects for your hands, including input controller components</li><li style="list-style-type: disc">Hand objects include components that trigger events when interactions occur</li><li style="list-style-type: disc">An interactable component is added to any objects in the scene that can be interacted with using input events</li><li style="list-style-type: disc">Additional components and options extend the interactable behaviors</li></ul></div><p>Toolkits will include a number of demo scenes which provide rich examples how to use the particular toolkit. Often, it is more informative to study the demos to see how to use the toolkits than the actual documentation. </p><p>In this section, we introduce a grabbing and throwing mechanic using two toolkits, the <span class="emphasis"><em>SteamVR InteractionSystem</em></span> and the <span class="emphasis"><em>Daydream VR Elements</em></span>. The technique is similar for other platforms.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note54"></a>Note</h3><p>For Oculus SDK (without OpenVR), you will need to integrate the Oculus Avatar SDK (see <a class="link" href="#" linkend="ch12">Chapter 12</a>, <span class="emphasis"><em>Social VR Metaverse</em></span>, for details on Oculus Avatars). Also, here's a quick video showing how to add an <code class="literal">OVR Grabber</code> component to your <code class="literal">OVRCameraRig</code> controllers: <a class="ulink" href="https://www.youtube.com/watch?v=sxvKGVDmYfY" target="_blank">https://www.youtube.com/watch?v=sxvKGVDmYfY</a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec83"></a>Interactables using SteamVR Interaction System</h3></div></div></div><p>The SteamVR Unity package <span>includes</span><a id="id325577034" class="indexterm"></a> an Interaction System, originally <span>developed</span><a id="id325577043" class="indexterm"></a> and used for minigames and scenes from Steam's impressive demo VR application, <span class="emphasis"><em>The Lab</em></span> (<a class="ulink" href="http://store.steampowered.com/app/450390/The_Lab/" target="_blank">http://store.steampowered.com/app/450390/The_Lab/</a>). It can be found in the <code class="literal">Assets/SteamVR/InteractionSystem/</code> folder. We recommend you explore the example scenes, prefabs, and scripts.</p><p>The Interaction System includes its own <strong class="userinput"><code>Player</code></strong> camera rig which replaces the default <strong class="userinput"><code>[CameraRig]</code></strong> we have been using. The Player hierarchy is shown here:</p><div class="mediaobject"><img src="/graphics/9781788478809/graphics/7fa1ed05-faaa-4acf-a064-51c0117bb3af.png" /></div><p></p><p>It includes a <span class="emphasis"><em>VRCamera</em></span>, two hands (<span class="emphasis"><em>Hand1</em></span> and <span class="emphasis"><em>Hand2</em></span>), and other useful objects. Each hand includes an attach point (<span class="emphasis"><em>Attach_ControllerTip</em></span>), a hover highlight (<span class="emphasis"><em>ControllerHoverHighlight</em></span>), and a tooltips object (<span class="emphasis"><em>ControllerButtonHints</em></span>). </p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Locate the <span class="strong"><strong><strong class="userinput"><code>Player</code></strong></strong></span> prefab in <code class="literal">SteamVR/InteractionSystem/Core/Prefabs </code>and drag it as a child of <strong class="userinput"><code>MyMyselfEye</code></strong> in your scene <strong class="userinput"><code>Hierarchy</code></strong></li><li>Delete or disable the <strong class="userinput"><code>[CameraRig]</code></strong> object</li></ol></div><p>For compatibility with the current scene, we also need to update the <span class="strong"><strong>NewBalloon</strong></span> argument in <span class="strong"><strong>Button Down Event</strong></span>:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Unfold the <strong class="userinput"><code>Player</code></strong> object in <strong class="userinput"><code>Hierarchy</code></strong> so you can see the <strong class="userinput"><code>Hand1</code></strong> and <strong class="userinput"><code>Hand2</code></strong> objects</li><li>Select the <strong class="userinput"><code>MeMyselfEye</code></strong> in <strong class="userinput"><code>Hierarchy</code></strong></li><li>Drag <strong class="userinput"><code>Hand2</code></strong> (or <strong class="userinput"><code>Hand1</code></strong>) from <span class="strong"><strong><strong class="userinput"><code>Hierarchy</code></strong></strong></span> onto the <strong class="userinput"><code>GameObject</code></strong> argument slot in the <strong class="userinput"><code>Button Down Event</code></strong> on the <strong class="userinput"><code>My Input Controller</code></strong> component</li></ol></div><p>Next, for interactable objects there is a large collection of components available. Review the <code class="literal">SteamVR/InteractionSystem/Core/Scripts</code> folder contents. We will use the <span class="emphasis"><em>Throwable</em></span> one.</p><p>First, lets try this on a basic Cube. Then, we'll make the balloons grabbable and throwable too:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>In Hierarchy, create a cube (<strong class="userinput"><code>Create</code></strong> | <strong class="userinput"><code>3D Object</code></strong> | <strong class="userinput"><code>Cube</code></strong>).</li><li>Scale and position it within reaching distance of the Player. For example, <strong class="userinput"><code>Scale</code></strong> (0.3, 0.3, 0.3) and <span class="strong"><strong><strong class="userinput"><code>Position</code></strong></strong></span> (-0.25, 1.3, -0.25) may work.</li><li>With the Cube selected, <strong class="userinput"><code>Add Component</code></strong><code class="literal">Throwable</code> from the Interaction System.</li><li>Notice this will automatically add other required components, including the base Interactable and a RigidBody.</li><li>On the <strong class="userinput"><code>RigidBody</code></strong> component, uncheck the <strong class="userinput"><code>Use Gravity</code></strong> checkbox, so it hangs in the air rather than falling to the ground when you play.</li></ol></div><p>Now when you press <strong class="userinput"><code>Play</code></strong>, reach out to the Cube so your controller penetrates (collides) it. Then, using the Trigger on your controller, grab the Cube and throw it <span class="emphasis"><em>outta here</em></span>!</p><p>To make the balloons throwable, we modify the prefab:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Drag a copy of the <strong class="userinput"><code>Balloon</code></strong> prefab from the <strong class="userinput"><code>Project</code></strong> window into the scene <strong class="userinput"><code>Hierarchy</code></strong></li><li><strong class="userinput"><code>Add Component</code></strong> the Steam <strong class="userinput"><code>Throwable</code></strong></li><li>Press <strong class="userinput"><code><span class="strong"><strong>Apply</strong></span></code></strong> to save the prefab</li><li>And delete the Balloon from the Hierarchy</li></ol></div><p>Press <strong class="userinput"><code>Play</code></strong>. Press the <strong class="userinput"><code>Fire1</code></strong> button to create and inflate a balloon. Release it. Then, grab it with the trigger. Throw the balloon. If you implemented the <span class="emphasis"><em>Poppable</em></span> explosion earlier, it'll even explode like a projectile when it hits something, like the ground or the photo plane! </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec84"></a>Interactables using Daydream VR Elements</h3></div></div></div><p>The base GoogleVR package <span>does</span><a id="id325590372" class="indexterm"></a> not include interactables, but you can find them in the Daydream Elements package. This package is a collection of <span>demo</span><a id="id325590414" class="indexterm"></a> scenes, components, and prefabs for using Daydream VR from the engineers at Google. To get the package:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Visit the Daydream Elements' Github Releases page at <a class="ulink" href="https://github.com/googlevr/daydream-elements/releases" target="_blank">https://github.com/googlevr/daydream-elements/releases</a></li><li>Download <code class="literal">DaydreamElements.unitypackage</code></li><li>Import it into your project using <span class="strong"><strong><strong class="userinput"><code>Assets</code></strong></strong></span> | <span class="strong"><strong><strong class="userinput"><code>Import Package</code></strong></strong></span> | <span class="strong"><strong><strong class="userinput"><code>Custom Package...</code></strong></strong></span></li></ol></div><p>The package includes a prefab named <code class="literal">ObjectManipulationPointer</code> which is a drop-in replacement for the <code class="literal">GvrControllerPointer</code> we have been using:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>In <strong class="userinput"><code>Hierarchy</code></strong>, unfold your <strong class="userinput"><code>MeMyselfEye</code></strong> and drill down to the <strong class="userinput"><code>Player</code></strong> object</li><li>Select <strong class="userinput"><code>GvrControllerPointer</code></strong> and disable it in Inspector</li><li>In the <strong class="userinput"><code>Project</code></strong> window, navigate to the <code class="literal">Assets/DaydreamElements/Elements/ObjectManipulationDemo/Prefabs/UI/</code> folder</li><li>Drag the <strong class="userinput"><code>ObjectManipulationPointer</code></strong> prefab into <strong class="userinput"><code>Hierarchy</code></strong> as a sibling of <strong class="userinput"><code>GvrControllerPointer</code></strong></li></ol></div><p>For compatibility with the current scene, we also need to update the <strong class="userinput"><code>NewBalloon</code></strong> argument in <strong class="userinput"><code>Button Down Event</code></strong>:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Select the <strong class="userinput"><code>MeMyselfEye</code></strong> in <strong class="userinput"><code>Hierarchy</code></strong></li><li>Drag <strong class="userinput"><code>ObjectManipulationPointer </code></strong>from <strong class="userinput"><code>Hierarchy</code></strong> onto the <strong class="userinput"><code>GameObject</code></strong> argument slot in the <strong class="userinput"><code>Button Down Event</code></strong> on the <strong class="userinput"><code>My Input Controller</code></strong> component</li></ol></div><p>Next, for interactable objects we add a <code class="literal">MoveablePhysicsObject</code> component, found in <code class="literal">Assets/DaydreamElements/Elements/ObjectManipulationDemo/Scripts/</code>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note55"></a>Note</h3><p>Additional information on Daydream Elements object manipulation can be found at <a class="ulink" href="https://developers.google.com/vr/elements/object-manipulation" target="_blank">https://developers.google.com/vr/elements/object-manipulation</a>.</p></div><p>First, lets try this on a basic Cube. Then, we'll make the balloons grabbable and throwable too:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>In <span><strong class="userinput"><code>Hierarchy</code></strong></span>, create a cube (<strong class="userinput"><code>Create</code></strong> | <strong class="userinput"><code>3D Object</code></strong> | <strong class="userinput"><code>Cube</code></strong>).</li><li>Scale and position it within reaching distance of the Player. For example, <strong class="userinput"><code>Scale </code></strong>(0.25, 0.25, 0.25) and <strong class="userinput"><code>Position</code></strong> (-0.4, 0.75, -0.3) may work.</li><li>With the Cube selected, <strong class="userinput"><code>Add Component</code></strong> <code class="literal">MoveablePhysicsObject</code>. </li><li>Notice this will automatically add a <code class="literal">RigidBody</code> component if not present.</li><li>On the <code class="literal">RigidBody</code> component, uncheck the<strong class="userinput"><code> Use Gravity</code></strong> checkbox, so it hangs in the air rather than falling to the ground when you play.</li></ol></div><p>Now when you press <strong class="userinput"><code>Play</code></strong>, use your controller so its laser beam hits the cube. Then, press the clicker button on your controller to grab it. Move it around and press again to release it.</p><p>Since the app is presently using the same button to create new balloons and manipulate the laser pointer, we get a balloon each time we use the button. Consider that a bug in your application. We will leave this as an exercise for you to implement the logic, for example, to tell <span class="emphasis"><em>MyInputController</em></span> to not invoke events if the <span class="emphasis"><em>MoveablePhysicsObject</em></span> is busy moving something. </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip56"></a>Note</h3><p>Hint: you could add a script component to Cube that checks the MoveablePhysicsObject state and disables MyInputController actions when the object is Selected. This is not well documented but look at the source code for MoveablePhysicsObjects.cs and its base class, BaseInteractiveObjects.cs.</p></div><p>To make the balloons throwable, we modify the prefab:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Drag a copy of the <strong class="userinput"><code>Balloon</code></strong> prefab from the <strong class="userinput"><code>Project</code></strong> window into the scene <strong class="userinput"><code>Hierarchy</code></strong></li><li><strong class="userinput"><code>Add Componen</code></strong><span class="strong"><strong><strong class="userinput"><code>t</code></strong></strong></span> the <strong class="userinput"><code>MoveablePhysicsObject</code></strong></li><li>Click <strong class="userinput"><code>Apply</code></strong> to save the prefab</li><li>And delete the Balloon from Hierarchy</li></ol></div><p>Press <strong class="userinput"><code>Play</code></strong>. Press the button to create and inflate a balloon. Release it. Then, try to grab it with the laser pointer. If you implemented the <span class="emphasis"><em>Poppable</em></span> explosion earlier, it'll even explode like a projectile when it hits something! </p></div></div>