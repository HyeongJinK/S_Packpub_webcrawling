<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch06lvl1sec59"></a>Pointing and clicking with VR components</h2></div></div><hr /></div><p>As we have seen, while Unity provides UI elements <span>such</span><a id="id325317266" class="indexterm"></a> as canvas text, buttons, and other controls that are specially tuned for conventional screen space UI and mobile app, using <span>them</span><a id="id325317275" class="indexterm"></a> in World Space and tying them together with VR user input can get pretty involved. World space interactions assume some physics, colliders, and ray casts to detect interaction events.</p><p>Fortunately, VR device-specific toolkits may provide components that take care of some of this work already. As we saw in previous chapters, device manufacturers provide toolkits built atop their Unity SDK with convenient scripts, prefabs, and demo scenes that illustrate how to use them.</p><p>In this case, we're looking for components that let you design scenes using Unity UI elements on a canvas, take advantage of all their EventSystem interactivity goodness, use world space 3D models, and input controllers or laster pointers. For example, consider these: </p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">Oculus Rift and GearVR: OVRInputModule; see <a class="ulink" href="https://developer.oculus.com/blog/unitys-ui-system-in-vr/" target="_blank">https://developer.oculus.com/blog/unitys-ui-system-in-vr/</a></li><li style="list-style-type: disc">SteamVR: Steam InteractionSystem; see the <code class="literal">/Assets/SteamVR/InteractionSystem/</code> folder after installing the SteamVR package</li><li style="list-style-type: disc"><span>Daydream: </span></li><li style="list-style-type: disc">VRTK open source toolkit: <a class="ulink" href="https://github.com/thestonefox/VRTK" target="_blank">https://github.com/thestonefox/VRTK</a></li></ul></div><p>Lastly, you might consider <span>purchasing</span><a id="id325547515" class="indexterm"></a> a package from the Unity Asset Store. The Curved UI package ($25), for example, lets you make VR-ready curved canvases and supports Vive, Oculus Touch, Daydream controllers, and gaze input, as depicted:</p><div class="mediaobject"><img src="/graphics/9781788478809/graphics/54ede418-998d-4e87-94fc-b8c4b7e4b141.png" /></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec91"></a>Using Unity UI and SteamVR</h3></div></div></div><p>We introduced the SteamVR InteractionSystem in Chapter 5, <span class="emphasis"><em>Handy Interactables</em></span>. It is intended as an example of how to use the SteamVR SDK but <span>includes</span><a id="id325549870" class="indexterm"></a> some very <span>useful</span><a id="id325552542" class="indexterm"></a> components and demo scenes. Using the Interaction System, it's very easy to convert your Dashboard into a control panel you can operate directly with your positionally tracked hand controllers.</p><p>The Interaction System includes its own <code class="literal">Player</code> camera rig which replaces the default <code class="literal">[CameraRig]</code> we have been using. <span>It includes a VRCamera, two hands (Hand1 and Hand2), and other useful objects.</span></p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Locate the <code class="literal">Assets/SteamVR/InteractionSystem/Core/Prefabs</code> folder in the <strong class="userinput"><code>Project</code></strong> window</li><li>Drag the <code class="literal">Player</code> prefab as a child of <code class="literal">MyMyselfEye</code> into your scene <strong class="userinput"><code>Hierarchy</code></strong></li><li>Delete or disable the <code class="literal">[CameraRig]</code> object</li></ol></div><p>To make the <code class="literal">StartButton</code> and <code class="literal">StopButton</code> interactable, add the <code class="literal">Interactable</code> component. Also add the UI <code class="literal">Element</code> component to handle <strong class="userinput"><code>OnHandClick</code></strong> events, as follows:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Select the <code class="literal">StartButton</code> object in <strong class="userinput"><code>Hierarchy</code></strong> (child of <code class="literal">Dashboard</code>).</li><li>In <strong class="userinput"><code>Inspector</code></strong>, select <strong class="userinput"><code>Add Component</code></strong> | <strong class="userinput"><code>Scripts</code></strong> | <strong class="userinput"><code>Valve.VR.InteractionSystem</code></strong> | <strong class="userinput"><code>Interactable</code></strong> (tip: use the <strong class="userinput"><code>Search</code></strong> field for "Interactable").</li><li>Select <strong class="userinput"><code>Add Component</code></strong> | <strong class="userinput"><code>Scripts</code></strong> | <strong class="userinput"><code>Valve.VR.InteractionSystem | UI Element</code></strong>.</li><li>In <strong class="userinput"><code>Inspector</code></strong> on the <strong class="userinput"><code>UI Element</code></strong> component, press the "+" to add an <strong class="userinput"><code>On Hand Click</code></strong> handler.</li><li>Drag the <code class="literal">WaterShower</code> particle system (child of <code class="literal">Hose</code> object) from <strong class="userinput"><code>Hierarchy</code></strong> onto the <strong class="userinput"><code>GameObject</code></strong> field, like we did for the standard <strong class="userinput"><code>Button OnClick</code></strong> event.</li><li>Select the <strong class="userinput"><code>ParticleSystem</code></strong> | <strong class="userinput"><code>Play()</code></strong> function.</li><li>Optionally, disable the <code class="literal">RespondToGaze</code> component.</li></ol></div><p>Similarly, repeat these steps for the <code class="literal">StopButton</code>, but choose function <strong class="userinput"><code>ParticleSystem</code></strong> | <strong class="userinput"><code>Stop()</code></strong>.</p><p>You may also need to move the <code class="literal">Dashboard</code> closer to yourself so the buttons are within comfortable reach when you're in VR. When you press <strong class="userinput"><code>Play</code></strong> you can now reach to touch a button; it highlights. Pull the trigger to press it, as shown in the screenshot, and it turns on the hose:</p><div class="mediaobject"><img src="/graphics/9781788478809/graphics/853b7976-d6e7-4a97-ab33-959b4a9eb5be.png" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec92"></a>Using Unity UI and Daydream</h3></div></div></div><p>Let's now take a look at how to do <span>this</span><a id="id325594744" class="indexterm"></a> on a mobile VR device using Google Daydream. In this case, we won't actually reach out and press the button but <span>use</span><a id="id325594754" class="indexterm"></a> the 3DOF hand controller laser pointer. The solution is as simple as replacing the <code class="literal">GvrReticlePointer</code> (if you had been using it) with a <code class="literal">GvrControllerPointer</code>.</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Under your MeMyselfEye <code class="literal">GVR Camera Rig/ Player / Main Camera /</code>, if there is a GvrReticlePointer, disable it.</li><li>Locate the GvrControllerPointer in the <code class="literal">GoogleVR/Prefabs/Controller/</code> folder.</li><li>Drag the prefab under Player (as a sibling of Main Camera).</li></ol></div><p>Then set up the Dashboard canvas to accept raycasts:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Select the Dashboard object in Hierarchy.</li><li>Add the GvrPointerGraphicRaycaster component.</li></ol></div><p>Press Play. You can now use the Daydream controller to press the buttons. </p><p>Explore the component options for the GvrControllerPointer, its child Laser object, and other Gvr object provided with the package. There's some pretty interesting and useful configurations available, including settings for laser color, end color, and max distance. There's even a checkbox to Draw Debug Rays in the Editor Scene window during Play mode.</p></div></div>