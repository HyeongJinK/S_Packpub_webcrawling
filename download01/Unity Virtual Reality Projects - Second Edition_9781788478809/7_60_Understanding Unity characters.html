<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch07lvl1sec62"></a>Understanding Unity characters</h2></div></div><hr /></div><p>A first-person character is <span>such</span><a id="id325317294" class="indexterm"></a> a key asset in a VR project that we really should understand its components inside out. So, before we go about building one for our project, it would be a good idea to take a close look at the built-in components and standard assets that Unity provides.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec93"></a>Unity components</h3></div></div></div><p>As you probably know, each Unity game <span>object</span><a id="id325594765" class="indexterm"></a> contains a set of associated <span class="strong"><strong>components</strong></span>. Unity includes many types of built-in components, which you can see by browsing the <strong class="userinput"><code>Component</code></strong> menu in <span>the</span><a id="id325577496" class="indexterm"></a> main menu bar. Each component adds properties and behaviors to the object that it belongs to. A component's properties are accessible via the Unity editor's <strong class="userinput"><code>Inspector</code></strong> panel and scripts. A script attached to a game object is also a type of a component and may have properties that you can set in the <strong class="userinput"><code>Inspector</code></strong> panel.</p><p>The component types used to implement first-person characters include the <span class="strong"><strong>Camera</strong></span>, <span class="strong"><strong>Character Controller</strong></span>, and/or <span class="strong"><strong>Rigidbody</strong></span>, and various scripts. Let's review each of these standard components.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch07lvl3sec0"></a>The Camera component</h4></div></div></div><p>The Camera component specifies <span>the</span><a id="id325577532" class="indexterm"></a> viewing parameters that are used to render the scene on each frame update. Any object with a Camera component is <span>considered</span><a id="id325577542" class="indexterm"></a> a <code class="literal">camera</code> object. Naturally, we've been using a camera in our scenes since we started, and we've been accessing it in the scripts that we've written.</p><p>A stereographic VR camera object renders two views, one for each eye. In VR, the camera controller scripts read data from the headset's motion sensors and positional tracking to determine the current head pose (position, direction, and rotation) and set the camera's transform appropriately.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch07lvl3sec1"></a>The Rigidbody component</h4></div></div></div><p>When you add a Rigidbody <span>component</span><a id="id325577561" class="indexterm"></a> to any Unity game object, it will benefit from the calculations that are performed by the <span class="strong"><strong>physics engine</strong></span>. <span>Rigidbody components</span> have <span>parameters</span><a id="id325577579" class="indexterm"></a> for gravity, mass, and drag, among others. During gameplay, the physics engine <span>calculates</span><a id="id325577586" class="indexterm"></a> each rigid object's <span class="emphasis"><em>momentum</em></span> (mass, speed, and direction).</p><p>Rigid objects interact with other rigid objects. For example, if they collide, they'll bounce off each other and the parameters of the interaction can be <span>controlled</span><a id="id325577597" class="indexterm"></a> with a <span class="strong"><strong>physic material</strong></span> with properties such as friction and bounciness factors.</p><p>Rigidbodies can be flagged as <span class="emphasis"><em>kinematic</em></span>, which is usually only used when the object is driven by animation or scripts. Collisions will not affect kinematic objects, but they will still affect the motion of other rigidbodies. It's mostly used when objects are chained together with <span class="emphasis"><em>joints</em></span>, like the ones connecting a humanoid's bones or a swinging pendulum.</p><p>Any rigid object, given a child camera object, becomes a rigid first-person character. Then, you can add scripts to handle user input to move, jump, look around, and so on.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch07lvl3sec2"></a>The Character Controller component</h4></div></div></div><p>Like a Rigidbody, the <span class="strong"><strong>Character Controller</strong></span> (<span class="strong"><strong>CC</strong></span>) is used for <span class="emphasis"><em>collision detection</em></span> and c<span class="emphasis"><em>haracter movement</em></span>. It needs scripts to handle the user <span>input</span><a id="id325577675" class="indexterm"></a> to move, jump, and <span>look</span><a id="id325577682" class="indexterm"></a> around, too. However, it doesn't automatically have the physics built in.</p><p>The CC component is specifically designed for character objects because characters in a game often are not really expected to behave the same as other physics-based objects. It can be used instead of, or in addition to, a Rigidbody.</p><p>The CC component has a built-in <span class="strong"><strong>Capsule Collider</strong></span> behavior to <span>detect</span><a id="id325577699" class="indexterm"></a> collisions. However, it doesn't automatically use the physics engine to <span class="emphasis"><em>respond</em></span> to the collision.</p><p>For example, if a CC object hits a rigid object such as a wall, it will just stop. It won't bounce. If a rigid object, such as a flying brick, hits a CC object, the brick will get deflected (bounce) based on its own properties, but the CC object will not be affected. Of course, if you want to include behavior like this on the CC object, you can program that in your own scripts.</p><p>The CC component does have an especially good support for one force in its scripting API-<span class="emphasis"><em>gravity</em></span>. Built-in parameters are specifically related to keeping the object's feet on the ground. For example, the <strong class="userinput"><code>Step Offset</code></strong> parameter defines how tall a step the character can hop onto rather than being an obstacle that blocks his way. Similarly, the <strong class="userinput"><code>Slope Limit</code></strong> parameter says how big an incline is too steep and whether it should be treated like a wall. In your scripts, you can use the <code class="literal">Move()</code> method and the <code class="literal">IsGrounded</code> variable to implement character behavior.</p><p>Unless you script it, a CC object has no momentum and can stop on a dime. It feels very precise, but this could also lead to a jerky movement. The opposite is true for Rigidbody objects, which feel more fluid because they have momentum, acceleration/deceleration, and obey the laws of physics. In VR, we'd ideally like some combination of the two, if we use it at all.</p><p>Using physics to move yourself through a VR scene is not always best. As we'll see, alternative locomotion techniques may not use physics at all, such as <span class="emphasis"><em>teleportation</em></span>. </p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec94"></a>Unity Standard Assets</h3></div></div></div><p>The <strong class="userinput"><code>Characters</code></strong> package in Unity <strong class="userinput"><code>Standard Assets</code></strong> comes <span>with</span><a id="id325577751" class="indexterm"></a> a number of third- and first-person character prefab objects. These prefab objects are compared in the <span>following</span><a id="id325577760" class="indexterm"></a> table:</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; "><colgroup><col /><col /></colgroup><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Prefab</p></td><td style="border-bottom: 0.5pt solid ; "><p>Components</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><div class="mediaobject"><img src="/graphics/9781788478809/graphics/afc48434-c371-4563-95b3-bfa18526c2b4.png" /></div></td><td style="border-bottom: 0.5pt solid ; "><div class="mediaobject"><img src="/graphics/9781788478809/graphics/9caf048e-9ad6-4b44-9479-9fb331b740d2.png" /></div></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><div class="mediaobject"><img src="/graphics/9781788478809/graphics/f8114089-65a5-4e8e-9b60-276a3a7a83d1.png" /></div></td><td style="border-bottom: 0.5pt solid ; "><div class="mediaobject"><img src="/graphics/9781788478809/graphics/70fadf15-b620-4c31-810a-04490bc37857.png" /></div></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><div class="mediaobject"><img src="/graphics/9781788478809/graphics/e41d69c0-e881-4450-bb09-210d22f9173b.png" /></div></td><td style="border-bottom: 0.5pt solid ; "><div class="mediaobject"><img src="/graphics/9781788478809/graphics/60dc9533-3d79-4837-a918-08009e893325.png" /></div></td></tr><tr><td style="border-right: 0.5pt solid ; "><div class="mediaobject"><img src="/graphics/9781788478809/graphics/857c5b9d-a6ac-40c6-885f-ffdc4aff4fb7.png" /></div></td><td style=""><div class="mediaobject"><img src="/graphics/9781788478809/graphics/474d3643-8f6b-4212-800d-866355962dac.png" /></div></td></tr></tbody></table></div><p> </p><p>Let's discuss this in more detail.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch07lvl3sec3"></a>ThirdPersonController</h4></div></div></div><p>We've already <span>used</span><a id="id325577916" class="indexterm"></a> both of the third-person prefabs, <code class="literal">ThirdPersonController</code> and <code class="literal">AIThirdPersonController</code>, in <a class="link" href="#" linkend="ch02"><span>Chapter 2</span></a>, <span class="emphasis"><em>Content, Objects, and Scale</em></span>, and <a class="link" href="#" linkend="ch04"><span>Chapter 4</span></a>, <span class="emphasis"><em>Gaze-Based Control</em></span>, respectively.</p><p>The <code class="literal">ThirdPersonController</code> prefab has child objects that define the character's body, namely our friend Ethan. He is a rigged avatar (from the <code class="literal">.fbx</code> file), which means that humanoid animations can be applied to make him walk, run, jump, and so on.</p><p>The <code class="literal">ThirdPersonController</code> prefab uses a Rigidbody for physics and Capsule Collider for collision detection.</p><p>It has two scripts. A <code class="literal">ThirdPersonUserControl</code> script takes user input, such as thumbstick presses, and tells the character to move, jump, and so on. A <code class="literal">ThirdPersonCharacter</code> script implements physics movements and calls the animations that are needed for running, crouching, and so on.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch07lvl3sec4"></a>AIThirdPersonController</h4></div></div></div><p>The <code class="literal">AIThirdPersonController</code> prefab is <span>identical</span><a id="id325577986" class="indexterm"></a> to the <code class="literal">ThirdPersonController</code> prefab, but the former adds a <code class="literal">NavMeshAgent</code> and an <code class="literal">AICharacterControl</code> script, which constrains where and how the character can move around the scene. If you recall, in <a class="link" href="#" linkend="ch04"><span>Chapter 4</span></a>, <span class="emphasis"><em>Gaze-Based Control</em></span>, we used the <code class="literal">AICharacterController</code> to make Ethan walk around the scene and avoid bumping into objects.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch07lvl3sec5"></a>First-person FPSController</h4></div></div></div><p>The <code class="literal">FPSController</code> prefab is a first-person <span>controller</span><a id="id325578026" class="indexterm"></a> that uses both a CC component and a Rigidbody. It has a child camera attached to it. When the character moves, the camera moves with it.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip72"></a>Note</h3><p>The core distinction between third-person controller prefabs and first-person controller prefabs is the <span class="strong"><strong>child object</strong></span>. Third-person controller prefabs have a rigged humanoid child object, while first-person controller prefabs have a camera child object.</p></div><p>Its body mass is set to a low value (<code class="literal">1</code>) and <code class="literal">IsKinematic</code> is enabled. This means that it will have limited momentum and does not react to other rigid objects, but it can be driven by animations.</p><p>Its <code class="literal">FirstPersonController</code> script offers a plethora of parameters for running, jumping, audio footsteps, and more. The script also includes parameters and animations for a <span class="emphasis"><em>head bob</em></span>, which bounces the camera in a natural way when the character is moving. If you use the <code class="literal">FPSController</code> script in your VR project, <span class="emphasis"><em>be sure to disable any head bob features</em></span> or you might need to clean the puke off your keyboard!</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch07lvl3sec6"></a>RigidBodyFPSController</h4></div></div></div><p>The <code class="literal">RigidBodyFPSController</code> prefab is a first-person <span>controller</span><a id="id325578078" class="indexterm"></a> with a Rigidbody but no CC component. Like <code class="literal">FPSController</code>, it has a child camera object. When the character moves, the camera moves with it.</p><p>A <code class="literal">RigidBodyFPSController</code> prefab's body mass is more substantial, set to 10, and is not kinematic. That is, it <span class="emphasis"><em>can</em></span> get bounced around when it collides with other objects. It has a separate Capsule Collider component with the <code class="literal">ZeroFriction</code> physic material. The <code class="literal">RigidBodyFirstPersonController</code> script is different from the <code class="literal">FPSController</code> one, but the former has a lot of similar parameters.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note73"></a>Note</h3><p><span class="strong"><strong>Why am I going through all of this detail here?</strong></span>If you've built any non-VR projects in Unity, then you've most likely used these prefabs. However, you might not have paid much attention to how they're assembled. Virtual reality is experienced from the first-person perspective. Our implementation toolbox is Unity. It is important to understand Unity's tools that manage and control this first-person experience.<span class="strong"><strong></strong></span></p></div></div></div></div>