<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch12lvl1sec104"></a>Adding a matchmaking lobby</h2></div></div><hr /></div><p>So far, connecting two or <span>more</span><a id="id325317274" class="indexterm"></a> players over the network requires you to know the IP address of the host instance of the game that is running, or simply <code class="literal">localhost</code> if they're all running on the same machine. </p><p>Unity Networking and Cloud Services includes a built-in networking lobby manager for matchmaking between online players. It lets you create and join online "rooms," limited to a maximum number of players. Using the lobby feature is as easy as choosing <strong class="userinput"><code>Enable Match Maker</code></strong> in the Network HUD in your app. But first, you must subscribe to Unity Multiplayer cloud services (free, with limits for the number of concurrent users, based on your Unity license).</p><p>To use it, first enable Unity Cloud Services for your app:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Above <strong class="userinput"><code>Inspector</code></strong>, select the <strong class="userinput"><code>Cloud icon</code></strong> (indicated in the following screenshot) to open the <strong class="userinput"><code>Services</code></strong> window</li><li>Create or choose a <strong class="userinput"><code>Unity Project ID</code></strong> for this project. To create an ID, click <strong class="userinput"><code>Select Organization</code></strong> and choose your organization, and then click <strong class="userinput"><code>Create</code></strong>.</li><li>Choose <strong class="userinput"><code>Multiplayer</code></strong> to open the multiplayer services panel</li><li>From there, open the web-based dashboard, where you're asked to specify the <strong class="userinput"><code>Max Players Per Room</code></strong>. Enter <code class="literal">4</code> and press <strong class="userinput"><code>Save</code></strong></li></ol></div><p>A configured <strong class="userinput"><code>Multiplayer Services</code></strong> panel is shown here, with the <strong class="userinput"><code>Cloud</code></strong> services icon highlighted for your reference:</p><div class="mediaobject"><img src="/graphics/9781788478809/graphics/30bab432-c26b-4744-8184-dc55fb5e6443.png" /></div><p>After enabling the services in your project, you may need to rebuild the executable (<strong class="userinput"><code>File | Build And Run</code></strong>) and then, in the first instance of the game:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>From the HUD menu choose <strong class="userinput"><code>Enable Match Maker (M)</code></strong></li><li>Type in a name for your room</li><li>Choose <strong class="userinput"><code>Create Internet Match</code></strong></li></ol></div><p>In the second instance of the game:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>From the HUD menu, also choose <strong class="userinput"><code>Find Internet Match</code></strong></li><li>Your room should appear as a new button</li><li>Choose the <strong class="userinput"><code>Join:</code></strong> button for your room</li></ol></div><p>You can now run the multiplayer game across the internet, letting Unity <span>Services</span><a id="id325552326" class="indexterm"></a> negotiate the IP addresses and maximum connections per room.</p><p>This will get you started. Of course, you have <span>full</span><a id="id325552337" class="indexterm"></a> control of the networking lobby matchmaking, like other Unity Networking services. And you most likely will want to make your own GUI. For documentation, see the NetworkManager API (<a class="ulink" href="https://docs.unity3d.com/ScriptReference/Networking.NetworkManager.html" target="_blank">https://docs.unity3d.com/ScriptReference/Networking.NetworkManager.html</a>). </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note123"></a>Note</h3><p>Consider starting with the example Network Lobby free asset from Unity (<a class="ulink" href="https://assetstore.unity.com/packages/essentials/network-lobby-41836" target="_blank">https://assetstore.unity.com/packages/essentials/network-lobby-41836</a>). Unfortunately this asset is out of date and has bugs, but you can get it to work (read the comments). Or at least, reference it as an example when writing your own UI. Also, it is a screen space UI; for VR, you would need to modify it to be a world space canvas.</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip124"></a>Note</h3><p>An example of HUD code that seems up to date can be found in this forum comment: <a class="ulink" href="https://forum.unity.com/threads/networkmanagerhud-source.333482/#post-3308400" target="_blank">https://forum.unity.com/threads/networkmanagerhud-source.333482/#post-3308400</a></p></div></div>