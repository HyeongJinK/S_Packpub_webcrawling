<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch06lvl1sec53"></a>The reticle cursor</h2></div></div><hr /></div><p>A variant of the visor HUD that is <span>essential</span><a id="id325317266" class="indexterm"></a> in first-person shooter games is a <span class="emphasis"><em>reticle</em></span> or crosshair cursor. The analogy here is that you're looking through a gun-sight or an eyepiece (rather than a visor) and your head movement is moving in unison with the gun or turret itself. You can do this with a regular game object (for example, <span>Quad +</span> texture image), but this chapter is about UI. So, let's use our canvas, as follows:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Find your <strong class="userinput"><code>Main Camera</code></strong> object in the <strong class="userinput"><code>Hierarchy</code></strong> panel as we did previously.</li><li>From the <strong class="userinput"><code>Project</code></strong> panel, drag the <code class="literal">DefaultCanvas</code> prefab onto the camera object so that it becomes a child of the camera. Name it <code class="literal">ReticleCursor</code>.</li><li>Set the <strong class="userinput"><code>Rect Transform</code></strong> component's <strong class="userinput"><code>Pos X</code></strong>, <strong class="userinput"><code>Pos Y</code></strong>, <strong class="userinput"><code>Pos Z</code></strong> to (<code class="literal">0</code>, <code class="literal">0</code>, <code class="literal">1</code>).</li><li>Delete its child objects: <code class="literal">Image</code> and <code class="literal">Text</code>. This will <span class="emphasis"><em>break</em></span> the prefab association; that's OK.</li><li>Add a raw image child by selecting it from the main menu bar, navigating through <strong class="userinput"><code>GameObject</code></strong> | <strong class="userinput"><code>UI</code></strong> | <strong class="userinput"><code>Raw Image</code></strong> and making sure that it's a child of <code class="literal">ReticleCursor</code>.</li><li>In the <strong class="userinput"><code>Raw Image</code></strong> panel's <strong class="userinput"><code>Rect Transform</code></strong>, set <strong class="userinput"><code>Pos X</code></strong>, <strong class="userinput"><code>Pos Y</code></strong>, <strong class="userinput"><code>Pos Z</code></strong> to (<code class="literal">0</code>, <code class="literal">0</code>, <code class="literal">0</code>) and the <strong class="userinput"><code>Width</code></strong> and <strong class="userinput"><code>Height</code></strong> to (<code class="literal">22</code>, <code class="literal">22</code>). Then, choose a noticeable <strong class="userinput"><code>Color</code></strong> such as red in the <strong class="userinput"><code>Raw Image</code></strong> (<strong class="userinput"><code>Script</code></strong>) properties.</li><li>Save the scene and try it in VR.</li></ol></div><p>If you'd like a nicer-looking reticle, in the <strong class="userinput"><code>Raw Image</code></strong> (<strong class="userinput"><code>Script</code></strong>) properties, populate the <strong class="userinput"><code>Texture</code></strong> field with a cursor image. For example, click on the tiny <span class="emphasis"><em>circle</em></span> icon on the far right of the <strong class="userinput"><code>Texture</code></strong> field. This opens the <strong class="userinput"><code>Select Texture</code></strong> dialog. Find and select a suitable one, such as the <code class="literal">Crosshair</code> image. (A copy of <code class="literal">Crosshair.gif</code> is included with this book.) Just be sure to change the <strong class="userinput"><code>Width</code></strong> and <strong class="userinput"><code>Height</code></strong> to the size of your image (<code class="literal">Crosshair.gif</code> is 22 x 22 in size) and ensure that the <strong class="userinput"><code>Anchor</code></strong> is set to <strong class="userinput"><code>middle-center</code></strong>.</p><p>We set the canvas position <strong class="userinput"><code>Pos Z</code></strong> to <code class="literal">1.0</code> so that the reticle floats in front of you at a 1-meter distance. A fixed distance cursor is fine in many UI situations, like when you're picking something from a flat canvas that is also at a fixed distance from you.</p><p>However, this is world space. If another object is between you and the reticle, the reticle will be obfuscated.</p><p>Also, if you look at something much farther away, you'll refocus your eyes and have trouble viewing the cursor at the same time. <span>To emphasize</span> this problem, try moving the cursor closer. For example, if you change the <strong class="userinput"><code>Pos Z</code></strong> of the <code class="literal">ReticleCursor</code> to <code class="literal">0.5</code> or less, you might have to go cross-eyed to see it! To compensate for these issues, we can ray cast and move the cursor to the actual distance of the object that you're looking at, resizing the cursor accordingly so that it appears to stay the same size. Here's a <span>cheap</span> version of this idea:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>With <code class="literal">ReticleCursor</code> selected, click on <strong class="userinput"><code>Add Component</code></strong> | <strong class="userinput"><code>New Script</code></strong>, name it <code class="literal">CursorPositioner</code> and click on <strong class="userinput"><code>Create</code></strong> and <strong class="userinput"><code>Add</code></strong>.</li><li>Open the script in MonoDevelop by double-clicking on the name.</li></ol></div><p>Here's the <code class="literal">CursorPositioner.cs</code> script:</p><pre class="programlisting">using UnityEngine; 
using UnityEngine.EventSystems; 
using System.Collections; 
 
public class CursorPositioner : MonoBehaviour { 
  private float defaultPosZ; 
 
  void Start () { 
    defaultPosZ = transform.localPosition.z; 
  } 
 
  void Update () { 
    Transform camera = Camera.main.transform; 
    Ray ray = new Ray (camera.position, camera.rotation * 
       Vector3.forward); 
    RaycastHit hit; 
    if (Physics.Raycast (ray, out hit)) { 
      if (hit.distance &lt;= defaultPosZ) { 
        transform.localPosition = new Vector3(0, 0, hit.distance); 
      } else { 
        transform.localPosition = new Vector3(0, 0, defaultPosZ); 
      } 
    } 
  } 
} </pre><p>The <strong class="userinput"><code>Rect Transform</code></strong> component's <strong class="userinput"><code>Pos Z</code></strong> is found in the script in <code class="literal">transform.localPosition</code>. This script changes it to <code class="literal">hit.distance</code> if it's less than the given <strong class="userinput"><code>Pos Z</code></strong>. Now, you can also move the reticle to a more comfortable distance, such as <strong class="userinput"><code>Pos Z</code></strong> = <code class="literal">2</code>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note60"></a>Note</h3><p>An excellent tutorial by <code class="literal">@eVRydayVR</code> shows how to implement both distance and size compensated world space reticles. You can visit <a class="ulink" href="https://www.youtube.com/watch?v=LLKYbwNnKDg" target="_blank">https://www.youtube.com/watch?v=LLKYbwNnKDg</a>, which is a video titled Oculus Rift DK2 - Unity Tutorial: Reticle.</p></div><p>We just implemented our own <span>cursor</span><a id="id325577537" class="indexterm"></a> reticle, but many VR SDKs now also provide cursors. For example, in Google VR, the <code class="literal">GvrReticlePointer.cs</code> script is a more thorough implementation. Another example, the Oculus OVR package, includes a <code class="literal">Cursor_Timer</code> prefab you can use as a <span>Loading...</span> indicator cursor.</p></div>