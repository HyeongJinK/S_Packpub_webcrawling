<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch08lvl1sec71"></a>Bouncy balls</h2></div></div><hr /></div><p>The feature we'll implement here is, when a ball <span>drops</span><a id="id325317266" class="indexterm"></a> from mid-air and hits the ground, it bounces back up and down, and up again, diminished over time.</p><p>We are going to start simply with a new scene that consists of a ground plane and a sphere. Then, we'll add physics to it, a bit at a time, as follows:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><span>Create</span> a new scene by navigating to <strong class="userinput"><code>File</code></strong> | <strong class="userinput"><code>New Scene.</code></strong></li><li>Then, navigate to <strong class="userinput"><code>File</code></strong> | <strong class="userinput"><code>Save Scene As...</code></strong> and name it <code class="literal">BallsFromHeaven</code>.</li><li>Create a new plane by navigating to <strong class="userinput"><code>GameObject</code></strong> | <strong class="userinput"><code>3D Object</code></strong> | <strong class="userinput"><code>Plane</code></strong> and reset its transform using the <code class="literal">Transform</code> component's <span class="emphasis"><em>gear</em></span> icon | <strong class="userinput"><code>Reset.</code></strong></li><li>Create a new sphere by navigating to <strong class="userinput"><code>GameObject</code></strong> | <strong class="userinput"><code>3D Object</code></strong> | <strong class="userinput"><code>Sphere</code></strong> and rename it <code class="literal">BouncyBall</code>.</li><li>Set its <strong class="userinput"><code>Scale</code></strong> to (<code class="literal">0.5</code>, <code class="literal">0.5</code>, <code class="literal">0.5</code>) and <strong class="userinput"><code>Position</code></strong> to (<code class="literal">0</code>, <code class="literal">5</code>,<code class="literal">0</code>) so that it's above the center of the plane.</li><li>Drag the <strong class="userinput"><code>Red</code></strong> material from <strong class="userinput"><code>Project Assets</code></strong> (created in <a class="link" href="#" linkend="ch02"><span>Chapter 2</span></a>, <span class="emphasis"><em>Content, Objects and Scale</em></span>) onto it so that it looks like a bouncy ball.</li></ol></div><p>The new Unity scene defaults come with <strong class="userinput"><code>Directional Light</code></strong> and <strong class="userinput"><code>Main Camera</code></strong>. It's OK to use this <strong class="userinput"><code>Main Camera</code></strong> for the time being.</p><p>Click on the <span class="emphasis"><em>Play</em></span> button. Nothing happens. The ball just sits in mid-air and doesn't move.</p><p>Now, let's give it a Rigidbody, as follows:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>With <code class="literal">BouncyBall</code> selected, in <strong class="userinput"><code>Inspector</code></strong>, navigate to <strong class="userinput"><code>Add Component</code></strong> | <strong class="userinput"><code>Physics</code></strong> | <strong class="userinput"><code>Rigidbody</code></strong>.</li><li>Click on the <span class="emphasis"><em>Play</em></span> button. It drops like a lead balloon.</li></ol></div><p>Let's make it bounce, as follows:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>In the <strong class="userinput"><code>Project</code></strong> panel, select the top-level <strong class="userinput"><code>Assets</code></strong> folder, navigate to <strong class="userinput"><code>Create</code></strong> | <strong class="userinput"><code>Folder</code></strong>, and rename it to <code class="literal">Physics</code></li><li>With the <code class="literal">Physics</code> folder selected, create a material by navigating to <strong class="userinput"><code>Assets</code></strong> | <strong class="userinput"><code>Create</code></strong> | <strong class="userinput"><code>Physic Material</code></strong> (or right-click within the folder)</li><li>Name it <code class="literal">Bouncy</code></li><li>Set its <strong class="userinput"><code>Bounciness</code></strong> value to <code class="literal">1</code></li><li>With the <code class="literal">BouncyBall</code> sphere selected in <strong class="userinput"><code>Hierarchy</code></strong>, drag the <code class="literal">Bouncy</code> asset from <strong class="userinput"><code>Project</code></strong> onto the sphere's <strong class="userinput"><code>Collider</code></strong> material field in <strong class="userinput"><code>Inspector</code></strong></li></ol></div><p>Click on the <span class="emphasis"><em>Play</em></span> button. It bounces, but it does not go very high. We used the maximum value for <strong class="userinput"><code>Bounciness</code></strong> as <code class="literal">1.0</code>. What's slowing it down? It's not the <strong class="userinput"><code>Friction</code></strong> settings. Rather, the <strong class="userinput"><code>Bounce Combine</code></strong> is set to <strong class="userinput"><code>Average</code></strong>, which determines how much of the bounciness of the ball (1) is mixed with that of the plane (0). So, it diminishes rapidly over time. We want the ball to retain all its bounciness. We will accomplish this, as follows:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Change the <code class="literal">Bouncy</code> object's <strong class="userinput"><code>Bounce Combine</code></strong> to <strong class="userinput"><code>Maximum</code></strong>.</li><li>Click on the <span class="emphasis"><em>Play</em></span> button.</li></ol></div><p>Much better. Actually, too much better. The ball keeps bouncing back up to its original height, ignoring gravity. Now, change the <strong class="userinput"><code>Bounciness</code></strong> to <code class="literal">0.8</code>. The bounces diminish, and the ball will eventually come to a stop.</p><p>Let's check it out in VR, as follows:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Delete the default <strong class="userinput"><code>Main Camera</code></strong> from the <strong class="userinput"><code>Hierarchy</code></strong> root.</li><li>Drag the <code class="literal">MeMyselfEye</code> prefab from <strong class="userinput"><code>Project Assets</code></strong> into the scene. Set its <strong class="userinput"><code>Position</code></strong> to (<code class="literal">0</code>, <code class="literal">0</code>, <code class="literal">-4</code>).</li></ol></div><p>Run it in VR. Pretty neat! Even the simplest things look impressive in VR.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip79"></a>Note</h3><p>Unity's Standard Assets package includes a handful of example <span>physic materials</span>, including Bouncy, Ice, Meta, Rubber, and Wood.</p></div><p>OK, let's have some fun. Make it rain bouncy balls! To do this, we'll make the ball a prefab and write a script that instantiates new balls, dropping them from random positions, as follows:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Drag the <code class="literal">BouncyBall</code> object from <strong class="userinput"><code>Hierarchy</code></strong> into the <code class="literal">Project Assets/Prefabs</code> folder, making it a prefab.</li><li>Delete the <code class="literal">BouncyBall</code> object from the <strong class="userinput"><code>Hierarchy</code></strong>, since we'll be instantiating it with a script.</li><li>Create an empty game controller object to attach the script to by navigating to <strong class="userinput"><code>GameObject</code></strong> | <strong class="userinput"><code>Create Empty</code></strong>. Rename it <code class="literal">GameController</code>.</li><li>In <strong class="userinput"><code>Inspector</code></strong>, navigate to <strong class="userinput"><code>Add Component</code></strong> | <strong class="userinput"><code>New Script</code></strong>, name it <code class="literal">BallsFromHeaven</code>, and open the script for editing.</li></ol></div><p>Edit the script so that it looks like this:</p><pre class="programlisting">using UnityEngine; 
 
public class BallsFromHeaven : MonoBehaviour 
{ 
  public GameObject ballPrefab; 
  public float startHeight = 10f; 
  public float interval = 0.5f; 
 
  private float nextBallTime = 0f; 
 
  void Update () 
  { 
    if (Time.time &gt; nextBallTime) 
    { 
      nextBallTime = Time.time + interval; 
      Vector3 position = new Vector3( Random.Range (-4f, 4f), 
         startHeight, Random.Range (-4f, 4f) ); 
      Instantiate( ballPrefab, position, Quaternion.identity ); 
    } 
  } 
} </pre><p>The script drops a new ball from <code class="literal">startHeight</code> at the rate of every <code class="literal">interval</code> seconds (an interval of 0.5 means that a new ball is dropped every half second). The new ball position is at a random <strong class="userinput"><code>X</code></strong>-<strong class="userinput"><code>Z</code></strong> coordinate between <code class="literal">-4</code> and <code class="literal">4</code>. The <code class="literal">Instantiate()</code> function adds a new ball into the scene <strong class="userinput"><code>Hierarchy</code></strong>.</p><p>Save the script. We now need to populate the <strong class="userinput"><code>Ball</code></strong> field with the <code class="literal">BouncyBall</code> prefab, as follows:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>With <code class="literal">GameController</code> selected in <strong class="userinput"><code>Hierarchy</code></strong>, drag the <code class="literal">BouncyBall</code> prefab from the <code class="literal">Project Assets/Prefabs</code> folder onto the <strong class="userinput"><code>Ball Prefab</code></strong> slot in the <strong class="userinput"><code>Balls From Heaven (Script)</code></strong> panel in <strong class="userinput"><code>Inspector</code></strong>.</li><li>Be sure to use the <code class="literal">BouncyBall</code> prefab from <strong class="userinput"><code>Project Assets</code></strong> so that can be instantiated.</li><li>Save the scene. Run it in VR. Fun!</li></ol></div><p>This is what I get:</p><div class="mediaobject"><img src="/graphics/9781788478809/graphics/e9405e3b-3665-4425-93bd-5869309de874.png" /></div><p>In summary, we created a sphere with a Rigidbody and added a Physic Material with a <strong class="userinput"><code>Bounciness</code></strong> property of <code class="literal">0.8</code> and <strong class="userinput"><code>Bounce Combine</code></strong> to <strong class="userinput"><code>Maximum</code></strong>. Then, we saved the <code class="literal">BouncyBall</code> as a prefab and wrote a script to instantiate new balls that drop from above.</p></div>