<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch10lvl1sec86"></a>Fun with photo globes</h2></div></div><hr /></div><p>To begin exploring these concepts, let's have a little <span>fun</span><a id="id325317274" class="indexterm"></a> as we apply an ordinary (rectangular) image as a texture to a sphere, just to see what it does and how bad it looks. Then, we'll use a properly distorted equirectangular photosphere texture.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec134"></a>Crystal balls</h3></div></div></div><p><span class="emphasis"><em>Auntie Em! Auntie Em!</em></span> cried Dorothy in the Wizard of Oz, as she gazed into a crystal ball seeking help from the Wicked Witch. Let's consider making a <span>crystal</span><a id="id325317291" class="indexterm"></a> ball using Unity, <span class="emphasis"><em>my little pretty!</em></span></p><p>First, set up a new scene for this chapter by performing the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Create a new scene by navigating to <strong class="userinput"><code>File</code></strong> | <strong class="userinput"><code>New Scene</code></strong>. Then, navigate to <strong class="userinput"><code>File</code></strong> | <strong class="userinput"><code>Save Scene As...</code></strong> and name it <code class="literal">360Degrees</code>.</li><li>Create a new plane by navigating to <strong class="userinput"><code>GameObject</code></strong> | <strong class="userinput"><code>3D Object</code></strong> | <strong class="userinput"><code>Plane</code></strong> and reset its transformation using the <strong class="userinput"><code>Transform</code></strong> component's <span class="emphasis"><em>gear</em></span> icon | <strong class="userinput"><code>Reset</code></strong>.</li><li>Set the Main Camera <strong class="userinput"><code>Position</code></strong> to (<code class="literal">0</code>, <code class="literal">0</code>, <code class="literal">-1</code>)</li></ol></div><p>You can choose to use the MeMyselfEye camera rig we've been using throughout the book, but it is not necessary in this project. The Main Camera will implement the VR camera based on the SDK you've selected in Player Settings. We will not be using device-specific input or other features.</p><p>Now, create the first sphere and write a rotator script while we're at it. I'm using the <code class="literal">EthanSkull.png</code> image that was provided with this book (drag and drop it into your <strong class="userinput"><code>Project Assets Textures</code></strong> folder). </p><p>Then, perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Create a new sphere by navigating to <strong class="userinput"><code>GameObject</code></strong> | <strong class="userinput"><code>3D Object</code></strong> | <strong class="userinput"><code>Sphere</code></strong>, reset its transformation using the <strong class="userinput"><code>Transform</code></strong> component's <span class="emphasis"><em>gear</em></span> icon | <strong class="userinput"><code>Reset</code></strong>, and name it <code class="literal">CrystalBall</code>.</li><li>Set its <strong class="userinput"><code>Position</code></strong> to (<code class="literal">0</code>, <code class="literal">1.5</code>, <code class="literal">0</code>).</li><li>Drag and drop the texture named <code class="literal">EthanSkull</code> (you can use any photo that you want) onto the sphere.</li><li>Create a new script by navigating to <strong class="userinput"><code>Add Component</code></strong> | <strong class="userinput"><code>New Script</code></strong> and name it <code class="literal">Rotator</code>.</li></ol></div><p>Note that dropping the texture onto the game object will automatically create a corresponding Material named <code class="literal">EthanSkull.mat</code> in your <code class="literal">Materials/</code> folder, with this texture in the <strong class="userinput"><code>Albedo</code></strong> texture map slot.</p><p>Open the <code class="literal">rotator.cs</code> script and write it, as follows:</p><pre class="programlisting">using UnityEngine;

public class Rotator : MonoBehaviour
{
    [Tooltip("Rotation rate in degrees per second")]
    public Vector3 rate;

    void Update()
    {
        transform.Rotate(rate * Time.deltaTime);
    }
}</pre><p>Note that we added a <code class="literal">Tooltip</code> attribute for the Unity Editor that gives the developer more detail how to use the <code class="literal">rate</code> values. </p><p>Then, set the rotation rate so that it spins around the <span class="emphasis"><em>y</em></span> axis 20 degrees per second, as follows:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>On the <strong class="userinput"><code>Rotator Script</code></strong> component, set <strong class="userinput"><code>Rate</code></strong> for <strong class="userinput"><code>X</code></strong>, <strong class="userinput"><code>Y</code></strong>, <strong class="userinput"><code>Z</code></strong> as (<code class="literal">0</code>, <code class="literal">20</code>, <code class="literal">0</code>).</li><li>Save the scene. Try it in VR.</li></ol></div><div class="mediaobject"><img src="/graphics/9781788478809/graphics/785ff5e4-254d-4c6f-ba2d-34825b7e93cd.png" /></div><p><span class="emphasis"><em>Is that scary or what?</em></span> No worries. The projected image may be distorted, but it looks wicked cool. For some applications, a little distortion is the artistic intent, and you don't need to worry about it.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip98"></a>Note</h3><p>Careful editing such as smudging the edges of the photo can help avoid seams in the texture map.</p></div><p>While we're at it, lets try making the ball look more like crystal glass by adjusting the shader properties:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Select <code class="literal">CrystalBall</code> in <strong class="userinput"><code>Inspector</code></strong></li><li>Set its <strong class="userinput"><code>Metallic</code></strong> value to <code class="literal">0.75</code></li><li>Set its <strong class="userinput"><code>Smoothness</code></strong> value to <code class="literal">0.75</code></li><li>Open the <strong class="userinput"><code>Albedo</code></strong> color (click the color swatch), and adjust the <strong class="userinput"><code>Alpha</code></strong> (A) value to <code class="literal">100</code></li></ol></div><p>That looks better. Add more objects with various textures into your scene to visualize the transparency and specular highlights.  </p><p>If you're interested in more realistic glass simulation for your crystal balls, here are some suggestions:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">Consider adding a reflection probe to the scene (<a class="ulink" href="https://docs.unity3d.com/Manual/class-ReflectionProbe.html" target="_blank">https://docs.unity3d.com/Manual/class-ReflectionProbe.html</a>) so the surface <span>seems</span><a id="id325577756" class="indexterm"></a> to reflect other objects in the scene.</li><li style="list-style-type: disc">For transparency and refraction, a <code class="literal">GlassRefractive</code> material is provided in the <strong class="userinput"><code>Standard Assets Effects</code></strong> package.</li><li style="list-style-type: disc">Try a custom shader in <span>your</span><a id="id325577778" class="indexterm"></a> material. An example of a Simple Glass shader is given in the Unity ShaderLab documentation (<a class="ulink" href="https://docs.unity3d.com/Manual/SL-CullAndDepth.html" target="_blank">https://docs.unity3d.com/Manual/SL-CullAndDepth.html</a>).</li><li style="list-style-type: disc">Also consider third-party materials and <span>shaders</span><a id="id325577794" class="indexterm"></a> that simulate glass with refraction, distortions, glass surface patterns, and colors (search the Asset Store, <a class="ulink" href="https://assetstore.unity.com/search?q=category%3A121&amp;q=glass" target="_blank">https://assetstore.unity.com/search?q=category%3A121&amp;q=glass</a>).</li><li style="list-style-type: disc">Note that transparency should be used sparingly in VR applications as it requires additional rendering passes per pixel, potentially slowing your frame generation and causing unwanted latency.</li></ul></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec135"></a>Globes</h3></div></div></div><p>Next, we'll make another sphere and add a texture, like we just did, but this time use a <span>texture</span><a id="id325577886" class="indexterm"></a> with an equirectangular (photosphere) distortion.</p><p>Import the <code class="literal">Tissot_euirectangular.png</code> image, which is included with this book (and available on Wikipedia at <a class="ulink" href="https://en.wikipedia.org/wiki/Tissot%27s_indicatrix#/media/File:Tissot_behrmann.png" target="_blank">https://en.wikipedia.org/wiki/Tissot%27s_indicatrix#/media/File:Tissot_behrmann.png</a>),  into your Texture folder and perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Create a new sphere and name it <code class="literal">Globe</code>. Add the <code class="literal">Rotator</code> script if you want.</li><li>Drag the texture named <code class="literal">Tissot_equirectangular</code> onto the sphere.</li><li>Try it in VR. Take a close look at the globe, as shown in the following <span>image</span>:</li></ol></div><div class="mediaobject"><img src="/graphics/9781788478809/graphics/1ed72971-d7ba-41cd-a620-265af99b784d.png" /></div><p>Note that unfortunately the Tissot circles are oval, not circular, except along the equator. It turns out that the default sphere provided in Unity does not mesh well for equirectangular texture maps. Instead, I have provided one designed specifically for this purpose, <code class="literal">PhotoSphere.fbx</code> (which happens to be the default sphere model in 3D Studio Max). Let's try it:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Import the <code class="literal">PhotoSphere.fbx</code> file by dragging it into your <strong class="userinput"><code>Project Assets Models</code></strong> folder (or through the menu: <strong class="userinput"><code>Assets | Import New Asset...</code></strong>).</li><li>Create a new equirectangular sphere by dragging the <code class="literal">PhotoSphere</code> model from <strong class="userinput"><code>Project Assets</code></strong> into <strong class="userinput"><code>Scene</code></strong>.</li><li>Set its position and name it <code class="literal">Globe2</code>. Add the <code class="literal">Rotator</code> script if you want.</li><li>Drag the texture named <code class="literal">Tissot_equirectangular</code> onto the sphere.</li></ol></div><p>Try it in VR. <span class="emphasis"><em>Much better.</em></span> You can see the texture is correctly mapped now; the circles are round (and the underlying mesh grid is more regular):</p><div class="mediaobject"><img src="/graphics/9781788478809/graphics/39b6e813-c583-4931-9feb-91b4484a809d.png" /></div><p>Now you can apply any 360 degree photo to the globe, creating your own <span class="emphasis"><em>photo-globes</em></span> or virtual Christmas tree ornaments!</p><p>Expanding upon this topic further, you could build a nice model of the Solar System. Equirectangular <span>texture</span><a id="id325578014" class="indexterm"></a> maps of each of the planets and moons can be downloaded free from Solar System Scope (<a class="ulink" href="https://www.solarsystemscope.com/" target="_blank">https://www.solarsystemscope.com/</a>). Data regarding the rate of rotation (day/night) and orbit (around the sun) can be found on the NASA site (<a class="ulink" href="https://nssdc.gsfc.nasa.gov/planetary/factsheet/index.html" target="_blank">https://nssdc.gsfc.nasa.gov/planetary/factsheet/index.html</a>). A complete Unity tutorial project can be found in the book <span class="emphasis"><em>Augmented Reality for Developers</em></span> (<a class="ulink" href="https://www.amazon.com/Augmented-Reality-Developers-Jonathan-Linowes/dp/1787286436" target="_blank">https://www.amazon.com/Augmented-Reality-Developers-Jonathan-Linowes/dp/1787286436</a>).</p><p>Another idea is that photo globes have been used as a teleportation mechanism in VR games-- as a player, you grab a globe depicting another scene, put it on your face and you are teleported into that world. See the topic on <span class="emphasis"><em>Capturing 360-degree media</em></span> for how to capture a 360-degree photo of your Unity scenes.</p></div></div>