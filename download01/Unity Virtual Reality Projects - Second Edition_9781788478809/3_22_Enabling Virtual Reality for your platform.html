<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec28"></a>Enabling Virtual Reality for your platform</h2></div></div><hr /></div><p>The diorama scene we created <span>in</span><a id="id325549819" class="indexterm"></a> the previous chapter was a 3D scene using the Unity default <code class="literal">Main Camera</code>. As we saw, when you pressed <strong class="userinput"><code>Play</code></strong> in the Unity Editor you had the scene running in the <strong class="userinput"><code>Game</code></strong> window on your 2D computer monitor. The steps for setting up your project to run in VR include:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><span>Set</span> the target platform for your project builds</li><li style="list-style-type: disc">Enable Virtual Reality in the XR Player Settings in Unity and set the VR SDK
</li><li style="list-style-type: disc">Import the device toolkit for your target device into your project (optional but recommended) and use the prescribed prefabs instead of the default <code class="literal">Main Camera</code></li><li style="list-style-type: disc">Install the system tool required to build your target device </li><li style="list-style-type: disc">Ensure your device's operating system is enabled for development</li><li style="list-style-type: disc">Ensure your device's VR runtime is set up and running</li></ul></div><p>If you are not sure, use the table to determine the target platform, virtual reality SDK, and Unity package to use for your VR device:</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; "><colgroup><col /><col /><col /><col /></colgroup><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><span class="strong"><strong>Device</strong></span></p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><span class="strong"><strong>Target Platform</strong></span></p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><span class="strong"><strong>VR SDK</strong></span></p></td><td style="border-bottom: 0.5pt solid ; "><p><span class="strong"><strong>Unity Package</strong></span></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><span class="strong"><strong>HTC Vive</strong></span></p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Standalone</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>OpenVR</p></td><td style="border-bottom: 0.5pt solid ; "><p>SteamVR Plugin</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><span class="strong"><strong>Oculus Rift</strong></span></p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Standalone</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>OpenVR</p></td><td style="border-bottom: 0.5pt solid ; "><p>SteamVR Plugin</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><span class="strong"><strong>Oculus Rift</strong></span></p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Standalone</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Oculus</p></td><td style="border-bottom: 0.5pt solid ; "><p>Oculus Integration</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><span class="strong"><strong>Windows IMR</strong></span></p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Universal Windows Platform</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Windows Mixed Reality</p></td><td style="border-bottom: 0.5pt solid ; "><p>Mixed Reality Toolkit Unity</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><span class="strong"><strong>GearVR/GO</strong></span></p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Android</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Oculus</p></td><td style="border-bottom: 0.5pt solid ; "><p>Oculus Integration</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><span class="strong"><strong>Daydream</strong></span></p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Android</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Daydream</p></td><td style="border-bottom: 0.5pt solid ; "><p>Google VR SDK for Unity
and Daydream Elements</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><span class="strong"><strong>Cardboard</strong></span></p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Android</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Cardboard</p></td><td style="border-bottom: 0.5pt solid ; "><p>Google VR SDK for Unity</p></td></tr><tr><td style="border-right: 0.5pt solid ; "><p><span class="strong"><strong>Cardboard</strong></span></p></td><td style="border-right: 0.5pt solid ; "><p>iOS</p></td><td style="border-right: 0.5pt solid ; "><p>Cardboard</p></td><td style=""><p>Google VR SDK for Unity</p></td></tr></tbody></table></div><p> </p><p>Links to the Unity packages for various integration toolkits are listed as follows:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">SteamVR Plugin: <a class="ulink" href="https://assetstore.unity.com/packages/tools/steamvr-plugin-32647" target="_blank">https://assetstore.unity.com/packages/tools/steamvr-plugin-32647</a></li><li style="list-style-type: disc">Oculus Integration: <a class="ulink" href="https://assetstore.unity.com/packages/tools/integration/oculus-integration-82022" target="_blank">https://assetstore.unity.com/packages/tools/integration/oculus-integration-82022</a></li><li style="list-style-type: disc">MixedRealityToolkit-Unity: <a class="ulink" href="https://github.com/Microsoft/MixedRealityToolkit-Unity" target="_blank">https://github.com/Microsoft/MixedRealityToolkit-Unity</a></li><li style="list-style-type: disc">Google VR SDK for Unity: <a class="ulink" href="https://github.com/googlevr/gvr-unity-sdk/releases" target="_blank">https://github.com/googlevr/gvr-unity-sdk/releases</a></li><li style="list-style-type: disc">Google Daydream Elements: <a class="ulink" href="https://github.com/googlevr/daydream-elements/releases" target="_blank">https://github.com/googlevr/daydream-elements/releases</a></li></ul></div><p>Now, let's configure the project for your specific VR headset.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip24"></a>Note</h3><p>As you know, installation and setup details are subject to change. We recommend you double-check with the current Unity manual and your device's Unity interface documentation for the latest instructions and links.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec35"></a>Setting your target platform</h3></div></div></div><p>New Unity projects normally default to targeting <span>standalone</span><a id="id325577480" class="indexterm"></a> desktop platforms. If this works for you, you do not need to change anything. <span>Let's see</span>:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Open the Build Settings window (<strong class="userinput"><code>File</code></strong> | <strong class="userinput"><code>Build Settings…</code></strong>) and review the Platform list</li><li>Choose your target platform. For example:<div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">If you're building for Oculus Rift or HTC VIVE, for example, choose <strong class="userinput"><code>PC</code></strong>, <strong class="userinput"><code>Mac</code></strong><strong class="userinput"><code>&amp;</code></strong><strong class="userinput"><code>Linux Standalone</code></strong></li><li style="list-style-type: disc">If you're building for Windows MR, choose <span class="strong"><strong>U</strong></span><strong class="userinput"><code>niversal Windows Platform</code></strong></li><li style="list-style-type: disc">If you are building for Google Daydream on Android, choose <span class="strong"><strong><strong class="userinput"><code>Android</code></strong></strong></span></li><li style="list-style-type: disc">If you are building for Google Cardboard on iOS, choose <strong class="userinput"><code>iOS</code></strong></li></ul></div></li><li>Then press <strong class="userinput"><code>Switch Platform</code></strong></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec36"></a>Setting your XR SDK</h3></div></div></div><p>When your project is built with <span class="strong"><strong>Virtual Reality Supported</strong></span> enabled in <span class="strong"><strong>Player Settings</strong></span>, it renders stereoscopic camera views and runs on an HMD:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Go into Player Settings (<strong class="userinput"><code>Edit</code></strong> | <strong class="userinput"><code>Project Settings</code></strong> | <strong class="userinput"><code>Player</code></strong>).</li><li>In the Inspector window, find the <strong class="userinput"><code>XR</code></strong> Settings at the bottom and check the <strong class="userinput"><code><strong class="userinput"><code>Virtual</code></strong> Reality Supported</code></strong> checkbox.</li><li>Choose the <strong class="userinput"><code>Virtual Reality SDK</code></strong> you will require for your target device. Refer to the previous table.</li></ol></div><p>Depending on the target platform you <span>are</span><a id="id325581686" class="indexterm"></a> using, the Virtual Reality SDKs available in your Unity installation will vary. If your target VR is shown, then you're good to go. You <span>can</span><a id="id325581694" class="indexterm"></a> add others by pressing the ( <strong class="userinput"><code>+</code></strong> ) button in the list, and remove ones pressing the ( <strong class="userinput"><code>-</code></strong> ) button.</p><p>For example, the <span>following screenshot</span> shows the Virtual Reality SDKs selected for the Standalone platform. With Virtual Reality Supported enabled, the app will use Oculus SDK if it can. If the app cannot initialize the Oculus SDK at runtime, it will then try the OpenVR SDK.</p><p>At this point, by pressing <strong class="userinput"><code>Play</code></strong> in the Unity Editor you may be able to preview your scene in VR. Different platforms support Play mode in different ways. Some do not support Editor previews at all.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec37"></a>Installing your device toolkit</h3></div></div></div><p>Next, install your device-specific Unity package. If the <span>toolkit</span><a id="id325586467" class="indexterm"></a> is available in the Unity Asset Store, use the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Within Unity, open the Asset Store window (<strong class="userinput"><code>Window</code></strong> | <strong class="userinput"><code>Asset Store</code></strong>)</li><li>Search for the package you want to install</li><li>On the asset's page, press <strong class="userinput"><code>Download</code></strong>, and then click on <strong class="userinput"><code>Install</code></strong> to install the files in your <code class="literal">Project Assets/</code> folder</li></ol></div><p>If you downloaded the package from the web separately, use the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Within Unity, select <strong class="userinput"><code>Assets</code></strong> | <strong class="userinput"><code>Import Package</code></strong> | <strong class="userinput"><code>Custom Package</code></strong></li><li>Navigate to the folder containing the <code class="literal">.unitypackage</code> file you downloaded</li><li>Press <strong class="userinput"><code>Open</code></strong> and then click on <strong class="userinput"><code>Install</code></strong> to install the files into your <code class="literal">Project <span class="emphasis"><em>Assets/</em></span></code> folder</li></ol></div><p>Feel free to explore the package contents files. Try opening and trying out any sample scenes included. And become familiar with any prefab objects (in a <code class="literal">Prefabs/</code> folder) that might be useful to you later in the book.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec38"></a>Creating the MeMyselfEye player prefab</h3></div></div></div><p>Most VR toolkits provide a preconfigured <span>player</span><a id="id325594745" class="indexterm"></a> camera rig as a prefab that you can insert into your scene. This rig replaces the default <code class="literal">Main Camera</code>. For this book, since we do not know which particular devices and platforms you are targeting, we will make our own camera rig. Let's called it <code class="literal">MeMyselfEye</code> (hey, this is VR!). This will be helpful later on, and it will simplify our conversations in this book, since different VR devices may use different camera assets. <span class="emphasis"><em>Like an empty vessel for your VR soul...</em></span></p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note25"></a>Note</h3><p>We will reuse this <code class="literal">MeMyselfEye</code> prefab in chapters throughout the book as a convenient generic VR camera asset in our projects.</p></div><p>A <span class="strong"><strong>prefab</strong></span> is a reusable (prefabricated) object retained in your project's Assets folder that can be added one or more times into project scenes. Let's create the object using the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Open Unity and the project from the last chapter. Then, open the diorama scene by navigating to <strong class="userinput"><code>File</code></strong> | <strong class="userinput"><code>Open Scene</code></strong> (or double-click on the scene object in the <strong class="userinput"><code>Project</code></strong> panel, under <strong class="userinput"><code>Assets</code></strong>).</li><li>From the main menu bar, navigate to <strong class="userinput"><code>GameObject</code></strong> | <strong class="userinput"><code>Create Empty</code></strong>.</li><li>Rename the object <code class="literal">MeMyselfEye</code>.</li><li>Ensure it has a reset transform (in its <strong class="userinput"><code>Inspector</code></strong> window's <strong class="userinput"><code>Transform</code></strong> pane, choose the <strong class="userinput"><code>gear icon</code></strong> in upper-right and select <strong class="userinput"><code>Reset</code></strong>).</li><li>In the <strong class="userinput"><code>Hierarchy</code></strong> panel, drag the <code class="literal">Main Camera</code> object into <code class="literal">MeMyselfEye</code> so that it's a child object.</li><li>With the <code class="literal">Main Camera</code> object selected, reset its transform values (in the <strong class="userinput"><code>Transform</code></strong> panel, in the upper-right section, click on the <span class="emphasis"><em>gear icon</em></span> and select <strong class="userinput"><code>Reset</code></strong>).</li><li>Then position yourself near the middle of the scene. Select <code class="literal">MeMyselfEye</code> again and set its <strong class="userinput"><code>Position</code></strong> (<code class="literal">0</code>, <code class="literal">0</code>, <code class="literal">-1.5</code>).</li><li>On some VR devices, the player height is determined by the device calibration and sensors, that is, your height in real life, so leave the <code class="literal">Main Camera</code>'s Y-<strong class="userinput"><code>Position</code></strong> at <code class="literal">0</code>.</li><li>On other VR devices, especially ones with no positional tracking, you need to specify the camera height. Select the <code class="literal">Main Camera</code> (or more specifically, the game object that has the Camera component on it) and set its <strong class="userinput"><code>Position</code></strong> (<code class="literal">0</code>, <code class="literal">1.4</code>, <code class="literal">0</code>)</li></ol></div><p>The<strong class="userinput"><code>Game</code></strong>view should show that we're inside the scene. If you recall the Ethan experiment that we did earlier, I picked a Y-position of <code class="literal">1.4</code> so that we'll be at about the eye level with Ethan.</p><p>Now, let's save this as a reusable prefabricated object, or <span class="emphasis"><em>prefab</em></span>, in the <strong class="userinput"><code>Project </code></strong>panel, under <strong class="userinput"><code>Assets</code></strong> so that we can use it again in the other scenes in the other chapters of this book:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>In <strong class="userinput"><code>Project</code></strong> panel, under <strong class="userinput"><code>Assets</code></strong>, select the top-level <code class="literal">Assets</code> folder, right-click and navigate to <strong class="userinput"><code>Create</code></strong> | <strong class="userinput"><code>Folder</code></strong>. Rename the folder <code class="literal">Prefabs</code>.</li><li>Drag the <code class="literal">MeMyselfEye</code> prefab into the <strong class="userinput"><code>Project</code></strong> panel, under the <code class="literal">Assets/Prefabs</code> folder to create a prefab.</li></ol></div><p>Your hierarchy with the prefab is shown here:</p><div class="mediaobject"><img src="/graphics/9781788478809/graphics/e3d71d13-928c-407a-9cc2-9b69ff82fbe1.png" /></div><p>Now we will continue the discussion on how to build your project, on a per-platform basis. Please skip to the topic appropriate for your setup.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip26"></a>Note</h3><p>If you want to try your projects on multiple platforms, say VIVE (Windows) and Daydream (Android), consider making separate prefabs for each target device, for example, <code class="literal">MeMyselfEye-SteamVR</code>, <code class="literal">MeMyselfEye-GVR</code>, and so on and then swap them in and out as needed.</p></div></div></div>