<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec32"></a>Setting up for Android devices</h2></div></div><hr /></div><p>To develop VR apps that <span>will</span><a id="id325549819" class="indexterm"></a> run on Google Daydream, Cardboard, GearVR, Oculus GO, or other Android devices, we will need to set up a development machine for Android development.</p><p>This section will help you set up your Windows PC or Mac. The requirements are not specific to virtual reality; these are the same steps required by anyone building any Android app from Unity. The process is also well documented elsewhere, including the Unity documentation at <a class="ulink" href="https://docs.unity3d.com/Manual/android-sdksetup.html" target="_blank">https://docs.unity3d.com/Manual/android-sdksetup.html</a>.</p><p>The steps include:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">Install Java Development Kit</li><li style="list-style-type: disc">Install Android SDK</li><li style="list-style-type: disc">Install USB device drivers and debugging</li><li style="list-style-type: disc">Configure the Unity External Tools</li><li style="list-style-type: disc">Configure the Unity Player Settings for Android</li></ul></div><p>OK, let's get going.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec42"></a>Installing the Java Development Kit (JDK)</h3></div></div></div><p>You may already <span>have</span><a id="id325555194" class="indexterm"></a> Java installed on your machine. You can check by opening a <span>terminal</span> window and running the command <code class="literal">java-version</code>. If you do not <span>have</span><a id="id325560755" class="indexterm"></a> Java or need to upgrade, follow the steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Browse on over to the Java SE Downloads web page at <a class="ulink" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_blank">http://www.oracle.com/technetwork/java/javase/downloads/index.html</a> and get it. Look for the <span class="strong"><strong><strong class="userinput"><code>JDK</code></strong></strong></span> button icon, which takes you to the downloads page.</li><li>Choose the package for your system. For example, for Windows choose <strong class="userinput"><code>Windows x64</code></strong>. After the file downloads, open it and follow the installation instructions.</li><li>Make a note of the installation directory for later reference.</li><li>Once installed, open a fresh terminal window and run <code class="literal">java -version</code> once more to verify.</li></ol></div><p>Whether you just installed the JDK or it was already there, please make a note of its location on your disk. You will need to tell Unity this information in a later step.</p><p>On Windows, the path is probably something like Windows: <code class="literal">C:\Program Files\Java\jdk1.8.0_111\bin</code>.</p><p>If you can't find it, open Windows Explorer, navigate to the <code class="literal">\Program Files</code> folder, look for <strong class="userinput"><code>Java</code></strong>, and drill down until you see its <strong class="userinput"><code>bin</code></strong> directory, as the following screenshot shows:</p><div class="mediaobject"><img src="/graphics/9781788478809/graphics/ee8d85ae-9dad-4282-8467-5347e38568fe.png" /></div><p>On OS X, the path is probably something like: <code class="literal">/Library/Java/JavaVirtualMachines/jdk1.8.0_121.jdk/Contents/Home</code>.</p><p>If you can't find it, from a terminal window, run the following command: <code class="literal">/usr/libexec/java_home</code>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec43"></a>Installing Android SDK</h3></div></div></div><p>You also need to <span>install</span><a id="id325567600" class="indexterm"></a> the Android SDK. Specifically, you <span>need</span><a id="id325567608" class="indexterm"></a> the <span class="strong"><strong>Android SDK Manager</strong></span>. This is available by itself as a command-line tool or part of the full Android Studio IDE. If you can afford the disk space I recommend just installing Android Studio, as it provides a nice graphical interface for SDK Manager.</p><p>To install Android Studio IDE, go to <a class="ulink" href="https://developer.android.com/studio/index.html" target="_blank">https://developer.android.com/studio/install.html</a> and click Download Android Studio. When the download is done, open it and follow the installation instructions.</p><p>You will be prompted for the locations of the Android Studio IDE and the SDK. You can accept the default locations or change them. Please make a note of the SDK path location; you will need to tell Unity this information in a later step:</p><div class="mediaobject"><img src="/graphics/9781788478809/graphics/3eed89d1-af82-43e4-9d3a-6d55f6791d5b.png" /></div><p>Personally, I have more room on my <code class="literal">D:</code> drive so I installed the app into <code class="literal">D:\Programs\Android\Android Studio</code>. And I like to keep the SDK near the Android Studio program files, as it's easier to find again that way, so I change the <span>Android SDK Installation Location</span> to <code class="literal">D:\Programs\Android\sdk</code>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec44"></a>Via Command Line Tools</h3></div></div></div><p>Unity really only needs the command-line <span>tools</span><a id="id325572845" class="indexterm"></a> to build projects for Android. If you prefer, you can install just that package and save disk space. Scroll to the section named <strong class="userinput"><code>Get just the command line tools</code></strong> at the bottom of the downloads page. Select the package for your platform:</p><div class="mediaobject"><img src="/graphics/9781788478809/graphics/61e6c3a5-3278-4982-b572-f48ba3102476.png" /></div><p>This is a ZIP file; uncompress it to a folder and please remember its location. As mentioned, on Windows I like to use <code class="literal">D:\Programs\Android\sdk</code>. This will contain a <code class="literal">tools</code> subfolder.</p><p>The ZIP is only the tools, not the actual SDK. Use the <code class="literal">sdkmanager</code> to download the packages you'll need. See <a class="ulink" href="https://developer.android.com/studio/command-line/sdkmanager.html" target="_blank">https://developer.android.com/studio/command-line/sdkmanager.html</a> for details.</p><p>To list the installed and available packages, run <code class="literal">sdkmanager --list</code>. You can install multiple packages by listing them in quotes, delimited with a semicolon as follows:</p><pre class="programlisting">    sdkmanager "platforms;android-25"</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note31"></a>Note</h3><p>As of writing, the minimum Android API levels are as follows (check the current documentation for changes):<span class="strong"><strong>Cardboard</strong></span>: API Level 19 (Android 4.4 <span class="emphasis"><em>KitKat</em></span>)<span class="strong"><strong>GearVR</strong></span>: API Level 21 (Android 5.0 <span class="emphasis"><em>Lollipop</em></span>)<span class="strong"><strong>Daydream</strong></span>: API Level 24 (Android 7.0 <span class="emphasis"><em>Nougat</em></span>)</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec45"></a>About your Android SDK root path location</h3></div></div></div><p>If you already had Android installed, or if <span>you</span><a id="id325577976" class="indexterm"></a> forget where the SDK is installed, you can find the root path by opening the SDK Manager GUI. While Android Studio is open, navigate to the main menu and <span class="strong"><strong><strong class="userinput"><code>Tools</code></strong></strong></span> | <span class="strong"><strong><strong class="userinput"><code>Android</code></strong></strong></span> | <span class="strong"><strong><strong class="userinput"><code>SDK Manag</code></strong></strong></span><strong class="userinput"><code><span class="strong"><strong><strong class="userinput"><code>e</code></strong>r</strong></span></code></strong>. You can find the path near the top:</p><div class="mediaobject"><img src="/graphics/9781788478809/graphics/f3269f46-3ebf-4a02-8118-6cebcc9b263a.png" /></div><p>On Windows, the path is probably something like:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">Windows: <code class="literal">C:\Program Files\Android\sdk</code>, or <code class="literal">C:/Users/Yourname/AppData/Local/Android/Sdk</code></li></ul></div><p>On OS X, the path is probably something like:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">OS X: <code class="literal">/Users/Yourname/Library/Android/sdk </code></li></ul></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec46"></a>Installing USB device debugging and connection</h3></div></div></div><p>The next step is to enable USB debugging <span>on</span><a id="id325317299" class="indexterm"></a> your Android device. This is part of the <strong class="userinput"><code>Developer Options</code></strong> in your Android <strong class="userinput"><code>Settings</code></strong>. But Developer Options may not be <span>visible</span><a id="id325317314" class="indexterm"></a> and has to be enabled:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Find the <strong class="userinput"><code>Build number</code></strong> property in <span class="strong"><strong><strong class="userinput"><code>Settings</code></strong></strong></span> | <span class="strong"><strong><strong class="userinput"><code>About</code></strong></strong></span> on the device. Depending on your device you may even need to drill down another level or two (such as <span class="strong"><strong><strong class="userinput"><code>Settings</code></strong></strong></span> | <span class="strong"><strong><strong class="userinput"><code>About</code></strong></strong></span> | <span class="strong"><strong><strong class="userinput"><code>Software Information</code></strong></strong></span> | <span class="strong"><strong><strong class="userinput"><code>More</code></strong></strong></span> | <span class="strong"><strong><strong class="userinput"><code>Build number</code></strong></strong></span>).</li><li>Now for the magic incantation. Tap on the build number seven times. It'll count down until the <span class="strong"><strong><strong class="userinput"><code>Developer Options</code></strong></strong></span> are enabled, and will now appear as another choice in the Settings.</li><li>Go to <strong class="userinput"><code>Settings</code></strong> | <strong class="userinput"><code>Developer</code></strong> options, find <strong class="userinput"><code>USB debugging</code></strong>, and enable it.</li><li>Now connect the device to your development machine via USB cable.</li></ol></div><p>The Android device may automatically be recognized. If you are prompted to update the drivers, you can do this through the Windows Device Manager.</p><p>On Windows, if the device is not recognized, you may need to download the Google USB Driver. You can do this through the SDK Manager, under the SDK Tools tab. For more information see <a class="ulink" href="https://developer.android.com/studio/run/win-usb.html" target="_blank">https://developer.android.com/studio/run/win-usb.html</a>. The following screenshot, for example, shows the SDK Manager’s SDK Tools tab with the Google USB Driver selected:</p><div class="mediaobject"><img src="/graphics/9781788478809/graphics/f686cbde-f2ae-4a0a-b218-c424e9a131b9.png" /></div><p>Great job so far!</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec47"></a>Configuring the Unity External Tools</h3></div></div></div><p>Armed with all the stuff we need and the paths to the <span>tools</span><a id="id325578341" class="indexterm"></a> we installed, we can now go back into Unity. We need to tell Unity where to find all the Java and Android stuff. Note that if you skip this step, then Unity will prompt you for the folders when building the app:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>On Windows, navigate to main menu and to <strong class="userinput"><code>Edit</code></strong> | <strong class="userinput"><code>Preferences</code></strong>, then select the <strong class="userinput"><code>External Tools</code></strong><span class="strong"><strong> </strong></span>tab on the left. On OS X it’s in <strong class="userinput"><code>Unity</code></strong> | <strong class="userinput"><code>Preferences</code></strong>.</li><li>In the <strong class="userinput"><code>Android SDK</code></strong> text slot, paste the path of your Android SDK.</li><li>In the <strong class="userinput"><code>Java JDK</code></strong> text slot, paste the path of your Java JDK.</li></ol></div><p>The Unity Preferences with my SDK and JDK are shown here:</p><div class="mediaobject"><img src="/graphics/9781788478809/graphics/c25ec217-1b31-4224-a3f3-6e102909eeb2.png" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec48"></a>Configuring Unity Player Settings for Android</h3></div></div></div><p>We now will configure your Unity project to <span>build</span><a id="id325578405" class="indexterm"></a> for Android. First, ensure <strong class="userinput"><code>Android</code></strong> is your target platform in <strong class="userinput"><code>Build Settings</code></strong>. Unity provides a great deal of support for Android, including configuration and optimization for runtime features and the capabilities of mobile devices. These options can be found in <strong class="userinput"><code>Player Settings</code></strong>. We only need to set a couple of them now. The minimum required to build our demo project are Bundle Identifier and Minimum API Level:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>In Unity, navigate to <strong class="userinput"><code>File</code></strong> | <strong class="userinput"><code>Build Settings</code></strong> and examine the <strong class="userinput"><code>Platform</code></strong> pane.</li><li>If Android is not presently selected, select it now and press <strong class="userinput"><code>Switch Platform.</code></strong></li><li>If you have the <strong class="userinput"><code>Build Settings</code></strong> window open, press the <strong class="userinput"><code>Player Settings…</code></strong> button. Or, you can get there from the main menu and <strong class="userinput"><code>Edit</code></strong> | <strong class="userinput"><code>Project Settings</code></strong> | <strong class="userinput"><code>Player</code></strong>.</li></ol></div><p> </p><div class="orderedlist"><ol class="orderedlist arabic" start="4" type="1"><li>Look across at the <strong class="userinput"><code>Inspector</code></strong> panel, which now contains the Player Settings.</li><li>Find the <strong class="userinput"><code>Other Settings</code></strong> group of parameters, and click the header bar (if it’s not already opened) to find the <strong class="userinput"><code>Identification</code></strong> variables</li><li>Set the <strong class="userinput"><code>Bundle Identifier</code></strong> to a unique name for your product that resembles a traditional Java package name. An ID is required for all Android apps. Typically it is in the format <code class="literal">com.CompanyName.ProductName</code>. It must be unique on the target device, and eventually, unique in the Google Play store. You can choose whatever name you want.</li><li>Set a <strong class="userinput"><code>Minimum API Level</code></strong> for your target platform (as listed earlier).</li></ol></div><p>Again, there are many other options in the Player Settings but we can use their defaults for now.</p></div></div>