<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch10lvl1sec88"></a>Using Unity skyboxes</h2></div></div><hr /></div><p>Back in the olden days, or at <span>least</span><a id="id325317274" class="indexterm"></a> before 360 photos, we simply referred to <span class="emphasis"><em>skyboxes</em></span> as the way to create background imagery in computer graphics. Skyboxes depict what's far on the horizon, may contribute to the ambient lighting of the scene, be used for rendering reflections on object surfaces, and are not interactable. Unity supports skyboxes as part of the Lighting Environment for each scene. We used skyboxes already in a few of the previous chapters' projects (including Wispy Sky and Skull Platform ones).</p><p>Common sources of skyboxes are cylindrical panorama, spherical panorama (360 images), and a six-sided cube. We won't consider the cylindrical one, since it's less useful for VR. </p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec140"></a>Six-sided or cubemap skyboxes</h3></div></div></div><p>A skybox can be <span>represented</span><a id="id325317294" class="indexterm"></a> by a six sides of a cube, where each side is akin to a camera <span>capturing</span><a id="id325317303" class="indexterm"></a> its view pointing in each of the six directions, as illustrated here:</p><div class="mediaobject"><img src="/graphics/9781788478809/graphics/3fcd9ea9-b8d1-41bc-b210-7936299f6eff.jpg" /></div><p></p><p>Given these six images, as textures, you'd create a <span class="emphasis"><em>six-sided</em></span> skybox material like the one shown next for the WispySky cubemap. And then, set it in the Lighting window as the Skybox Material for the scene:</p><div class="mediaobject"><img src="/graphics/9781788478809/graphics/6ad21e0c-6f05-490a-9631-388a638d435d.png" /></div><p>Alternatively, you could combine the six images into a single <span class="emphasis"><em>cubemap</em></span> image, laid out similarly. </p><p>Cubemaps have an advantage because equirectangular textures waste pixels where the image is stretched at the top and bottom poles of the spherical projection. On the other hand, care must be taken to <span>properly</span><a id="id325549813" class="indexterm"></a> design images so they'll smoothly stitch together and not cause seams or other visual artifacts.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note104"></a>Note</h3><p>A variant over traditional cubemaps is the <span class="strong"><strong>Equi-Angular Cubemap</strong></span> (<span class="strong"><strong>EAC</strong></span>). EAC strives to have even more uniform pixel sizes and "equal angle pixel distribution in 3D."  (See <a class="ulink" href="https://blog.google/products/google-vr/bringing-pixels-front-and-center-vr-video/" target="_blank">https://blog.google/products/google-vr/bringing-pixels-front-and-center-vr-video/</a>.)</p></div><p>But most 360 media today, especially coming from consumer cameras, use equirectangular projections, aka spherical panoramas.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec141"></a>Spherical panoramic skyboxes </h3></div></div></div><p>Using a 360 photo for a <span>skybox</span><a id="id325552310" class="indexterm"></a> is referred to a <span class="emphasis"><em>spherical panoramic</em></span>. Earlier in this chapter we used a spherical game object to render an equirectangular texture and placed the player camera dead-center inside it. Now, we'll <span>now</span><a id="id325555080" class="indexterm"></a> use the same image in a skybox. (Note, this will also work for 180-degree content.)</p><p>Start with a new empty scene:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Create a new scene by navigating to <strong class="userinput"><code>File</code></strong> | <strong class="userinput"><code>New Scene</code></strong>. Then, <strong class="userinput"><code>File</code></strong> | <strong class="userinput"><code>Save Scene</code></strong> and name it <code class="literal">Skybox</code>. Replace the <code class="literal">Main Camera</code> with the <code class="literal">MyMyselfEye</code> prefab.</li><li>Assuming you're using the <code class="literal">Farmhouse.jpg</code> image as earlier, create a new <code class="literal">Material</code> and name it <code class="literal">Farmhouse Skybox</code>.</li><li>For the material's <strong class="userinput"><code>Shader</code></strong>, choose <strong class="userinput"><code>Skybox | Panoramic</code></strong>.</li><li>Drag your 360 image (<code class="literal">Farmhouse.jpg</code>) onto the <strong class="userinput"><code>Spherical</code></strong> texture area.</li><li>Set the <strong class="userinput"><code>Mapping</code></strong> to <strong class="userinput"><code>Latitude Longitude Layout</code></strong>.</li><li>Set the <strong class="userinput"><code>Image Type</code></strong> to <strong class="userinput"><code>360 Degrees</code></strong>.
</li></ol></div><p>The Material settings are shown here:</p><div class="mediaobject"><img src="/graphics/9781788478809/graphics/d8d5519d-1a64-455c-a710-24f043e4e7fd.png" /></div><p>Now to use it in your scene:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Open the <strong class="userinput"><code>Lighting</code></strong> window tab (if not in your Editor, navigate to <strong class="userinput"><code>Window | Lighting</code></strong>)</li><li>Drag your <code class="literal">Farmhouse Skybox</code> material onto the <strong class="userinput"><code>Skybox Material</code></strong> slot</li></ol></div><p>The <strong class="userinput"><code>Lighting Environment</code></strong> settings are shown here:</p><div class="mediaobject"><img src="/graphics/9781788478809/graphics/bb46f8a0-44a7-4662-a8b7-2be8e91ba78d.png" /></div><p>Press <strong class="userinput"><code>Play</code></strong>. <span class="emphasis"><em>Voila! </em></span>You should now see the photosphere surrounding you in the scene. That was almost too easy. Thank goodness! </p><p>One thing that's interesting is, since skyboxes are always rendered as if at a very far distance away, the camera will always be at the center of the photosphere. Thus, we don't need to set the camera rig at the origin, and we don't need to disable positional tracking, as we did for the spherical game object version of this project. Wherever you move, the skybox will surround you just the same. If your 360 image contains content (people or objects) that are relatively near, this may feel very unnatural, as if the objects are projected or flattened against the spherical projection (which they are!). This is why skyboxes are generally used for landscapes and wide open spaces. (Later, we'll see how this can be solved using <span class="emphasis"><em>stereo</em></span> skyboxes.) </p><p>At this point, you can add more content to your scene. After all, we're in Unity and not just making an generic 360 photo viewer. Enhance your lovely outdoor scene by adding falling snow or leaves (for example, see the <span class="emphasis"><em>Falling Leaves</em></span> particle package, <a class="ulink" href="https://assetstore.unity.com/packages/3d/falling-leaves-54725" target="_blank">https://assetstore.unity.com/packages/3d/falling-leaves-54725</a>). </p><p>A common application is to use a 360 image in a lobby scene, and add an interactive menu panel for launching other apps or scenes. The Google Daydream lobby comes to mind.</p><p>Another application is to make the 360 image more interactive by add UI canvases to label content in the photo. It may take some thoughtful work to align the labels with the photosphere. Then, using a camera raycast, you can dynamically highlight what the player is looking at (see <a class="link" href="#" linkend="ch04">Chapter 4</a>, <span class="emphasis"><em>Gaze-Based Control</em></span> for coding tips). </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec142"></a>360 video skyboxes</h3></div></div></div><p>Turning your <span>skybox</span><a id="id325576981" class="indexterm"></a> into a 360 degree video player is nearly identical to the steps <span>outlined</span><a id="id325576989" class="indexterm"></a> previously for the spherical game object version. We won't repeat everything again, but briefly it goes as follows:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Set up a <code class="literal">Video Player</code> to play back the video source to a <code class="literal">Render Texture</code></li><li>Set up a <code class="literal">Skybox Material</code> that will receive the <code class="literal">Render Texture</code></li><li>Set the scene to use the <code class="literal">Skybox Material</code></li></ol></div><p>Note, according to Unity, equirectangular videos should have an aspect ratio of exactly 2:1 (or for 180-degree content, 1:1) for the skybox shader. Also, many desktop hardware video decoders are limited to 4K resolutions and mobile hardware video decoders are often limited to 2K or less, limiting the resolution that can be played back in real time on those platforms. </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec143"></a>3D stereo skyboxes</h3></div></div></div><p>If you have a 360 image or video with stereo views, for each of the left and right eyes, Unity can now use that too. As of Unity 2017.3, the Panoramic <span>Skybox</span><a id="id325577774" class="indexterm"></a> material supports 3D textures in with a 3D layout. You <span>can</span><a id="id325577783" class="indexterm"></a> specify <strong class="userinput"><code>Side by side</code></strong> or <strong class="userinput"><code>Over under</code></strong>, as shown here:</p><div class="mediaobject"><img src="/graphics/9781788478809/graphics/fd16913b-b79a-4b88-b7c9-0e09ef490ddd.png" /></div><p></p><p>An example 3D stereographic equirectangular over-under image is given in the next topic, where we discuss capturing 360 media within your Unity project.</p></div></div>