<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch12lvl1sec102"></a>Setting up a simple scene</h2></div></div><hr /></div><p>Let's jump right in and make our own multiplayer <span>demo</span><a id="id325317274" class="indexterm"></a> project. For instructional purposes, we'll start out with a very simple scene with a standard first-person camera and get the networking implemented. Then, we'll synchronize multiple players' avatars over the network. And then we'll share a game object, a bouncy ball, between players to play a game.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch12lvl2sec169"></a>Creating a scene environment</h3></div></div></div><p>To get set up, we will make a new scene with a <span>ground</span><a id="id325317289" class="indexterm"></a> plane and a cube and create a basic first-person character. Perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Create a new scene by navigating to <strong class="userinput"><code>File</code></strong> | <strong class="userinput"><code>New Scene</code></strong>. Then, <strong class="userinput"><code>File</code></strong> | <strong class="userinput"><code>Save Scene As...</code></strong> and name the scene <code class="literal">MultiPlayer</code>.</li><li>Remove the <code class="literal">Main Camera</code> and insert a copy of your <code class="literal">MeMyselfEye</code> prefab. Reset its <strong class="userinput"><code>Transform</code></strong> so it's positioned at the origin.</li><li>Create a new plane by navigating to <strong class="userinput"><code>GameObject</code></strong> | <strong class="userinput"><code>3D Object</code></strong> | <strong class="userinput"><code>Plane</code></strong>, rename it <a class="ulink" href="" target="_blank"><code class="literal">GroundPlane</code></a>, and reset its <strong class="userinput"><code>Transform</code></strong> using the <strong class="userinput"><code>Transform</code></strong> component's <span class="emphasis"><em>gear</em></span> icon | <strong class="userinput"><code>Reset</code></strong>. Make the plane bigger by setting <strong class="userinput"><code>Scale</code></strong> to (<code class="literal">10, 1, 10</code>). </li><li>Make <code class="literal">GroundPlane</code> easier on the eyes. Drag your <code class="literal">Ground Material</code> onto the plane. If you need to create one, navigate to <strong class="userinput"><code>Assets</code></strong> | <strong class="userinput"><code>C<strong class="userinput"><code>r</code></strong>eate</code></strong> | <strong class="userinput"><code>Material</code></strong>, name it <code class="literal">Ground Material</code>, click on its <strong class="userinput"><code>Albedo</code></strong> color chip, and select a neutral color.</li><li>To provide some context and orientation, we'll just add a cube. Navigate to <strong class="userinput"><code>GameObject</code></strong> | <strong class="userinput"><code>3D Object</code></strong> | <strong class="userinput"><code>Cube</code></strong>, reset its <strong class="userinput"><code>Transform</code></strong>, and set its <strong class="userinput"><code>Position</code></strong> to the side, such as (<code class="literal">-2, 0.75, 1</code>). </li><li>Give the cube some color. Drag your <code class="literal">Red Material</code> onto the cube. If you need to create one, Navigate to <strong class="userinput"><code>Assets</code></strong> | <strong class="userinput"><code>Create</code></strong> | <strong class="userinput"><code>Material</code></strong>, name it <code class="literal">Red Material</code>, click on its <strong class="userinput"><code>Albedo</code></strong> color chip, and select a nice red, such as RGB (<code class="literal">240, 115, 115</code>).</li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch12lvl2sec170"></a>Creating an Avatar head</h3></div></div></div><p>Next, you'll need an avatar to represent <span>yourself</span><a id="id325555078" class="indexterm"></a> and your friends. Again, I'm going to keep this super simple so that we can focus on the fundamentals. Forget about a body for now. Just make a floating head with a face. Here's what I did. Your mileage may vary. Just be sure that it's facing forward (the positive Z direction):</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Create an avatar container. Navigate to <strong class="userinput"><code>GameObject</code></strong> | <strong class="userinput"><code>Create Empty</code></strong>, rename it <code class="literal">Avatar</code>, reset its <strong class="userinput"><code>Transform,</code></strong> and set its <code class="literal">Position</code> to the eye level, such as (<code class="literal">0, 1.4, 0</code>).</li><li>Create a sphere under the <code class="literal">Avatar</code> for the head (<strong class="userinput"><code>3D Object</code></strong> | <strong class="userinput"><code>Sphere)</code></strong>, rename it <code class="literal">Head</code>, reset its transformation, and set <strong class="userinput"><code>Scale</code></strong> to (<code class="literal">0.5, 0.5, 0.5</code>).</li><li>Give the head some color. Navigate to <strong class="userinput"><code>Assets</code></strong> | <strong class="userinput"><code>Create</code></strong> | <strong class="userinput"><code>Material</code></strong>, name it <code class="literal">Avatar Head Material</code>, click on its <strong class="userinput"><code>Albedo</code></strong> color chip, and select a nice red, such as RGB (<code class="literal">115, 115, 240</code>). Drag the <code class="literal">Avatar Head Material</code> onto the <code class="literal">Head</code>.</li><li>The dude has got to be cool (and bald headed). We'll borrow a pair of Ethan's glasses and put them on the head. Navigate to <strong class="userinput"><code>GameObject</code></strong> | <strong class="userinput"><code>Create Empty</code></strong>, as a child of <code class="literal">Avatar</code>, rename it <code class="literal">Glasses</code>, reset its <strong class="userinput"><code>Transform,</code></strong> and set its <strong class="userinput"><code>Position</code></strong> to (<code class="literal">0, -5.6, 0.1</code>) and <strong class="userinput"><code>Scale</code></strong> (<code class="literal">4, 4, 4</code>).</li><li>Then, while <code class="literal">Glasses</code> is selected, go to the <code class="literal">Project</code> pane, drill down into the <code class="literal">Assets/Standard Assets/Characters/ThirdPersonCharacter/ Models</code> folder, unfold the <code class="literal">Ethan</code> prefab, find the <code class="literal">EthanGlasses.fbx</code> file (the mesh file), and drag it into the <strong class="userinput"><code>Inspector</code></strong> panel<span class="emphasis"><em>.</em></span> Be sure to select the fbx version of <code class="literal">EthanGlasses</code>, not the prefab.</li><li>It has a mesh, but it needs a material. While <code class="literal">Glasses</code> is selected, go to the <strong class="userinput"><code>Project</code></strong> pane, find the <code class="literal">Assets/Standard Assets/Characters/ThirdPersonCharacter/Materials/</code> folder, find  <code class="literal"> EthanWhite</code>, and drag it into the Inspector.</li></ol></div><p>The following screenshot shows a version of mine (which also includes a mouth):</p><div class="mediaobject"><img src="/graphics/9781788478809/graphics/7896a80d-4a1f-4cbc-884f-27b2ed034526.png" /></div><p>When running as multiplayer, an instance of the avatar will get spawned for each connected player. So, we must first save the object as a prefab and remove it from the scene, as follows:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>With <code class="literal">Avatar</code> selected in the <strong class="userinput"><code>Hierarchy</code></strong>, drag it into your  <strong class="userinput"><code>Project</code></strong><code class="literal">Assets/Prefabs</code> folder</li><li>Select <code class="literal">Avatar</code> again from the <strong class="userinput"><code>Hierarchy</code></strong> and delete it</li><li>Save the scene</li></ol></div><p>OK, now we should be ready to add multiplayer networking.</p></div></div>