<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec26"></a>Creating a BlinnPhong Specular type</h2></div></div><hr /></div><p>
<span class="strong"><strong>Blinn</strong></span> is another more efficient <a id="id175" class="indexterm"></a>way of calculating and estimating specularity. It is done by getting the half vector from the view direction and the light direction. It was brought into the world of Cg by a man named Jim Blinn. He found that it was much more efficient to just get the half vector instead of calculating our own reflection vectors. It cut down on both code and processing time. If you actually look at the built-in BlinnPhong lighting model included in the <code class="literal">UnityCG.cginc</code> file, you will notice that it is using the half vector as well, hence the reason why it is named <span class="strong"><strong>BlinnPhong</strong></span>. It is just a <a id="id176" class="indexterm"></a>simpler version of the full Phong calculation.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec61"></a>Getting ready</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>This time, instead<a id="id177" class="indexterm"></a> of creating a whole new scene, let's just use the objects and scene we have, and create a new Shader and Material and name them <code class="literal">BlinnPhong</code>.</p></li><li><p>Once you have a new Shader, double-click on it to launch MonoDevelop, so that we can start to edit our Shader.</p></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec62"></a>How to do it…</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>First, we need to add our own properties to the <code class="literal">Properties</code> block, so that we can control the look of the Specular highlight.</p><div class="mediaobject"><img src="/graphics/9781849695084/graphics/5084OT_03_13.jpg" /></div></li><li><p>Then, we need<a id="id178" class="indexterm"></a> to make sure that we have created<a id="id179" class="indexterm"></a> the corresponding variables inside our <code class="literal">CGPROGRAM</code> block, so that we can access the data from our <code class="literal">Properties</code> block, inside of our subshader.</p><div class="mediaobject"><img src="/graphics/9781849695084/graphics/5084OT_03_14.jpg" /></div></li><li><p>Now it's time to create our custom lighting model that will process our <code class="literal">Diffuse</code> and <code class="literal">Specular</code> calculations.</p><div class="mediaobject"><img src="/graphics/9781849695084/graphics/5084OT_03_15.jpg" /></div></li><li><p>To complete our Shader, we will need to tell our <code class="literal">CGPROGRAM</code> block to use our custom lighting model rather than a built-in one, by modifying the <code class="literal">#pragma</code> statement with the following code:</p><div class="mediaobject"><img src="/graphics/9781849695084/graphics/5084OT_03_16.jpg" /></div></li></ol></div><p>The following <a id="id180" class="indexterm"></a>screenshot demonstrates the results of our <a id="id181" class="indexterm"></a>BlinnPhong lighting model:</p><div class="mediaobject"><img src="/graphics/9781849695084/graphics/5084OT_03_12.jpg" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec63"></a>How it works…</h3></div></div></div><p>The BlinnPhong Specular is almost exactly like the Phong Specular, except that it is more efficient because it uses less code to achieve almost the same effect. You will find this approach nine times out of ten in today's modern Shaders, as it is easier to code and lighter on the Shader performance.</p><p>Instead of calculating our own reflection vector, we are simply going to get the vector half way between the view direction and the light direction, basically simulating the reflection vector. It has actually been found that this approach is more physically accurate than the last approach, but we thought it is necessary to show you all the possibilities.</p><p>So to get the half vector, we simply need to add the view direction and the light direction together, as shown in the following code snippet:</p><div class="mediaobject"><img src="/graphics/9781849695084/graphics/5084OT_03_44.jpg" /></div><p>Then, we <a id="id182" class="indexterm"></a>simply need to dot the vertex normal with that <a id="id183" class="indexterm"></a>new half vector to get our main Specular value. After that, we just take it to a power of <code class="literal">_SpecPower</code> and multiply it by the Specular color variable. It's much lighter on the code and much lighter on the math, but still gives us a nice Specular highlight that will work for a lot of real-time situations.</p></div></div>