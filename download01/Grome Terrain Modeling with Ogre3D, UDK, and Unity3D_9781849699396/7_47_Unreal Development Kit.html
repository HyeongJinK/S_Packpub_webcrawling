<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch07lvl1sec47"></a>Unreal Development Kit</h2></div></div><hr /></div><p>Featuring advanced rendering techniques, <span class="strong"><strong>Unreal Development Kit</strong></span> (<span class="strong"><strong>UDK</strong></span>) can <a id="id402" class="indexterm"></a>now be downloaded for no fee for the purposes of trying it out. We're going to add a basic terrain object and import our GROME terrain with some texture layer information.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl2sec51"></a>GROME export plugin for UDK</h3></div></div></div><p>To export the GROME heightmap we will use a new plugin <a id="id403" class="indexterm"></a>
<a id="id404" class="indexterm"></a>that makes it easier for us. It's important we match the plugin with the correct version of GROME. The most recent versions are given as follows:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<a class="ulink" href="http://www.quadsoftware.com/storage/udk/ExpUDK_Grome3.zip" target="_blank">http://www.quadsoftware.com/storage/udk/ExpUDK_Grome3.zip</a> (GROME 3.10)</p></li><li style="list-style-type: disc"><p>
<a class="ulink" href="http://www.quadsoftware.com/storage/udk/ExpUDK_Grome311.zip" target="_blank">http://www.quadsoftware.com/storage/udk/ExpUDK_Grome311.zip</a> (GROME 3.11)</p></li></ul></div><p>Extract this plugin, ensure the <code class="literal">.plug</code> file is copied to the GROME3 plugin's directory (the source code is included but isn't needed unless you intend to make modifications). Launch GROME to install it. If the plugin initialization worked, UDK should now be an available option when we select export from the <span class="strong"><strong>File</strong></span> menu.</p><p>This plugin creates a correctly formatted <code class="literal">.bmp</code> heightmap file which can be imported directly into <span class="strong"><strong>UnrealEd</strong></span>. <a id="id405" class="indexterm"></a>By default the height range is scaled to values between 0 and 65,536 which creates a lot of precision but we'll need to use the scale terrain in UDK. For the ground textures we will create four material layers in the UDK terrain properties dialog and pull in the exported <code class="literal">.bmp</code> files.</p><div class="mediaobject"><img src="/graphics/9781849699396/graphics/9182_07_15.jpg" /></div><p>We'll need to check <span class="strong"><strong>Export tile textures</strong></span> and <span class="strong"><strong>Export layer masks</strong></span> so the plugin will dump all of the files we need into the destination folder. The tile textures are the textures used in the materials, the masks contain the distribution <a id="id406" class="indexterm"></a>
<a id="id407" class="indexterm"></a>of that material across the terrain.</p><p>Once that's complete the first thing we need to do is bring up the <span class="strong"><strong>Unreal TerrainEdit</strong></span> dialog box as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849699396/graphics/9182_07_16.jpg" /></div><p>Here we click on the <a id="id408" class="indexterm"></a>
<span class="strong"><strong>Import</strong></span> button with the <span class="strong"><strong>Height Map Only?</strong></span> option checked and select the exported heightmap file. (This will be the <a id="id409" class="indexterm"></a>
<a id="id410" class="indexterm"></a>name of the zone with an underscore HM suffix for example, <code class="literal">IslandSE_HM.bmp</code>).</p><p>This will take a few moments. If this completes the UDK layer panel should look like the following screenshot: </p><div class="mediaobject"><img src="/graphics/9781849699396/graphics/9182_07_17.jpg" /></div><p>If the layer bar is gray it simply means this is unselected in the editor window. The scale of the terrain will need adjustment to make it visible in the editor, it will probably be a huge spikey mass at this point. Click on the "Terrain properties" icon and set the scale of the terrain to something suitable. In the following <a id="id411" class="indexterm"></a>
<a id="id412" class="indexterm"></a>screenshot, I've used a simple ratio of 8 x 8 x 1 for our UDK map which is close enough to our original map scale:</p><div class="mediaobject"><img src="/graphics/9781849699396/graphics/9182_07_18.jpg" /></div><p>In the Unreal editor if we hit the <span class="emphasis"><em>Home</em></span> key it should move our viewpoint to the terrain actor handle. We'll center up the terrain object in the editor and get to work on creating our terrain texture layers because chances are it looks like a blue lump of modeling clay as seen in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849699396/graphics/9182_07_19.jpg" /></div><p>To restore our original texture work is going to take a bit of time in the material editor. If you're not familiar with it then you soon will be. While it's initially confusing, if you've not had to work with shaders or material editors before then this is a cool place to start. It's such a powerful and creative way to experiment with new ideas.</p><p>If the terrain has too many points that are really sluggish, this is something that needs to be addressed by going back and splitting it up into more zones, or we can set the UDK Terrain Properties Tessellation Level to something like <a id="id413" class="indexterm"></a>
<a id="id414" class="indexterm"></a>4.0 (it must be a power of 2).</p><p>In the folder to which we exported our UDK files we should also have copies of our original textures for example <code class="literal">mexico03_tile.png</code>, <code class="literal">canyon_rock01.png</code>, and so on.</p><p>To bring these into UDK we need to add them to a package. From the Package Browser add a new package for materials. For this exercise, I simply called it <code class="literal">GROME_Package</code>.</p><p>Materials for the tiled textures used in splats will require <a id="id415" class="indexterm"></a>
<a id="id416" class="indexterm"></a>adding a <span class="strong"><strong>TextureCoordinate</strong></span> node. After we've dragged in the texture and added the UV <span class="strong"><strong>Textcoord</strong></span> node the material flow graph looks like the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849699396/graphics/9182_07_20.jpg" /></div><p>Our simple Island example has four basic splat texture layers, we will create four materials in the same way.</p><p>We can cheat a little by making use of a 4096 x 4096 baked texture and use this as a base like we did in the Unity example. This serves as an example of importing satellite terrain images and it delivers fast results. I set the UV coordinates for the base texture to fit the terrain (in my example I used a value of 0.003900 which overlaid the terrain perfectly). </p><p>The base texture alone isn't very good, at the very least we should add some detail layers and we can make use of the coverage maps in the next part of this example. The following screenshot shows just the base texture applied at this stage.</p><div class="mediaobject"><img src="/graphics/9781849699396/graphics/9182_07_21.jpg" /></div><p>Additional layers can now be added and painted on top. The composite screenshot given next shows an area of our GROME terrain on the left-hand side, <a id="id417" class="indexterm"></a>
<a id="id418" class="indexterm"></a>and on the right-hand side we have the same area in UDK:</p><div class="mediaobject"><img src="/graphics/9781849699396/graphics/9182_07_22.jpg" /></div><p>UDK currently has no direct DAE import feature so we can't easily make use of meshes like we can with Unity. It's possible to use third-party conversion tools to bring in terrain meshes.</p><p>The only thing left remaining is lots of polish and fine <a id="id419" class="indexterm"></a>
<a id="id420" class="indexterm"></a>tuning to make the terrain look like a million dollars. Quite often the fine tuning is a lot of hard work and there's no substitute (yet) for experimentation and a little bit of talent.</p><p>But I hope this text has gone some way to showing how we can integrate GROME 3.1 into our pipelines without any major difficulty.</p></div></div>