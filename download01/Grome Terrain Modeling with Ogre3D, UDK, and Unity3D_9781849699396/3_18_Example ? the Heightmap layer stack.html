<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec22"></a>Example â€“ the Heightmap layer stack</h2></div></div><hr /></div><p>We can make use of the <a id="id150" class="indexterm"></a>Heightmap layer stack to composite different effects, adding Fractal Mountains to one layer, hand painting a river basin in another. For Volcano Island we can add the signature volcano to a separate layer and keep it separate.</p><p>To illustrate how these layers interact here's a quick <a id="id151" class="indexterm"></a>exercise:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Start with an empty project and a single zone. Make a total of three Heightmap layers in the layer stack.</p></li><li><p>Assign the selected zone to each of the three layers by <a id="id152" class="indexterm"></a>right-clicking on each layer and choosing <span class="strong"><strong>Assign to selection</strong></span>.</p><div class="mediaobject"><img src="/graphics/9781849699396/graphics/9182_03_12.jpg" /></div></li></ol></div><p>Rename the layers by right-clicking and choosing <a id="id153" class="indexterm"></a>
<span class="strong"><strong>Edit label</strong></span>. Name each layer something like the following:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Base (will contain our empty heightmap)</p></li><li style="list-style-type: disc"><p>Fractal (contains procedural content)</p></li><li style="list-style-type: disc"><p>Brush (hand-painted elements)</p></li></ul></div><p>Now make sure that only the top layer <span class="strong"><strong>Brush</strong></span> is "armed" for drawing because we're going to use a Heightmap Brush to paint directly onto the zone. If we <a id="id154" class="indexterm"></a>had all three with red-dot arm icons then our brush would write to all of them.</p><div class="mediaobject"><img src="/graphics/9781849699396/graphics/9182_03_13.jpg" /></div><p>Moving over to the tools panel on the right-hand side; bring up the Modifiers tab for the Heightmap tools and choose <a id="id155" class="indexterm"></a>
<span class="strong"><strong>Heightmap Brushes</strong></span> from the drop-down box. This shows all the functions available for use with brushing. Choose <span class="strong"><strong>Elevation</strong></span> and the appropriate rollup will appear as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849699396/graphics/9182_03_14.jpg" /></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip08"></a>Tip</h3><p>
<span class="strong"><strong>Rollup panels</strong></span>
</p><p>It can be awkward if you have to repeatedly <a id="id156" class="indexterm"></a>scroll up and down rollups to change settings. You can drag scroll the panel by holding down the mouse button wherever the mouse pointer changes to a hand.</p></div><p>We'll go over brush functions in a little more detail but for now we'll set the brush diameter (named "Aspect Size") to something about two to three times the value of the zone's <span class="strong"><strong>Tiles no</strong></span>. The size is given in world units.</p><p>Set the <span class="strong"><strong>Elevation</strong></span> mode to <span class="strong"><strong>Level</strong></span> and a value of <span class="strong"><strong>500</strong></span>. You might want to check if the <span class="strong"><strong>Units</strong></span> value is set to <span class="strong"><strong>100</strong></span> (this is the "flow" of the brush). A red circle around the mouse cursor indicates the diameter of the operation. <a id="id157" class="indexterm"></a>When everything looks good you can paint the most hideous phrase ever ushered into programming text books everywhere.</p><div class="mediaobject"><img src="/graphics/9781849699396/graphics/9182_03_15.jpg" /></div><p>Toggle the Visibility icon on the Brush layer a few times to show and hide our handy-work. Disarm the Brush layer and Arm the Fractal Layer. Change the <a id="id158" class="indexterm"></a>Modifiers drop-down box to <span class="strong"><strong>Procedural Heightmap</strong></span> and click on <span class="strong"><strong>FractalNoise</strong></span>.</p><div class="mediaobject"><img src="/graphics/9781849699396/graphics/9182_03_16.jpg" /></div><p>
<span class="emphasis"><em> </em></span>
</p><p>The rollup for this function has many options, we'll use one of the presets, choose Eroded Mountains 3. Change the Altitude Range min value to 0 and max value to 2,000. Click on the <span class="strong"><strong>Apply</strong></span> button. Toggle layer visibility and see how they combine. The height of the brush layer is merged with the fractal layer.</p><p>The following four screenshots show individual layers (going clockwise from the top-left); Base, Brush, Fractal, and the final layer is all three combined.</p><div class="mediaobject"><img src="/graphics/9781849699396/graphics/9182_03_17.jpg" /></div><p>Arm the Brush layer but check all layers are visible (with the little eye button). At the bottom of the Elevation rollup is a section labeled <a id="id159" class="indexterm"></a>
<span class="strong"><strong>Surface Options</strong></span>. This determines the source value of the brush operation. If <span class="strong"><strong>Surface</strong></span> is selected the <a id="id160" class="indexterm"></a>source value comes from the combined layer stack result, if <span class="strong"><strong>Layer</strong></span> is selected the source value is the active layer.</p></div>