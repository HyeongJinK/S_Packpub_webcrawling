<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec21"></a>Modifier toolsets</h2></div></div><hr /></div><p>The drop-down box directly under the Modifier tab selects <a id="id88" class="indexterm"></a>between three toolsets: <a id="id89" class="indexterm"></a>
<span class="strong"><strong>Heightmap</strong></span>, <a id="id90" class="indexterm"></a>
<span class="strong"><strong>Heightmap</strong></span> <span class="strong"><strong>Brushes</strong></span>, and <a id="id91" class="indexterm"></a>
<span class="strong"><strong>Procedural</strong></span> <span class="strong"><strong>Heightmap</strong></span>. We won't go over every tool in detail but instead present a summary of what is available and focus on how some of them can be applied to level design.</p><div class="mediaobject"><img src="/graphics/9781849699396/graphics/9182_03_01.jpg" /></div><p>Some of these tools are duplicated for the Heightmap Brush, the only difference being the control of the area and brush shape.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec20"></a>Heightmap toolset</h3></div></div></div><p>These operations work across selected zones. The <a id="id92" class="indexterm"></a>sort of things you can do here includes:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Import a heightmap to a specific location</p></li><li style="list-style-type: disc"><p>Set elevation to an absolute value, or scale it</p></li><li style="list-style-type: disc"><p>Apply surface steps or bevels with a Terrace filter</p></li><li style="list-style-type: disc"><p>Smooth out noise</p></li><li style="list-style-type: disc"><p>Increase or decrease terrain resolution</p></li><li style="list-style-type: disc"><p>Generate a 3D model of terrain for use in mobile platforms</p></li><li style="list-style-type: disc"><p>Flatten terrain to fit under placed 3D objects</p></li><li style="list-style-type: disc"><p>HmapStamp tool is a clone tool that lets you copy one area to another</p></li></ul></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec01"></a>Elevation</h4></div></div></div><p>This handy function uniformly sets the terrain <a id="id93" class="indexterm"></a>height to the specified value. Only selected areas (of armed layers) are modified. In a game, sea-level might be represented by a value of zero which keeps things simple. If we create a mask for rivers and tributaries we can level all water features to the same height and use a simple water plane.</p><p>The Elevation <a id="id94" class="indexterm"></a>tool has four mathematical operations (which are also available to the Brush version of this tool):</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Raise</strong></span>: Incrementally <a id="id95" class="indexterm"></a>increases the value by specified amount</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Lower</strong></span>: Reduces the <a id="id96" class="indexterm"></a>heightmap by the value</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Level</strong></span>: Write an absolute <a id="id97" class="indexterm"></a>height value (useful for sea-levels or plateaus)</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Scale</strong></span>: Multiplies the value (below 1.0 reduces, greater than 1.0 increases)</p></li></ul></div><p>The elevation rollup can be seen in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781849699396/graphics/9182_03_02.jpg" /></div><p>Whatever operation is being performed, the base level is rendered in the viewport as a dark blue rectangle. A light blue rectangle represents the magnitude of the operation. You can click and drag the light blue area to set the value of the operation if you prefer to work by eye (this does not work for the scale operation). </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec02"></a>SurfInfo</h4></div></div></div><p>This is just a handy gizmo that displays world coordinates <a id="id98" class="indexterm"></a>
<a id="id99" class="indexterm"></a>and height value under the cursor.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec03"></a>Erosion and FLErosion</h4></div></div></div><p>The difference between these two is quite stark; erosion <a id="id100" class="indexterm"></a>
<a id="id101" class="indexterm"></a>
<a id="id102" class="indexterm"></a>
<a id="id103" class="indexterm"></a>weathers terrain through a simulated ageing process, taking material from the top of hills and depositing it at the bottom. This has a rounding off effect and some of the pre-sets are good for cliff-face details. When creating terrain and deciding on what filters to use, think about how geological processes would shape real terrain. When experimenting with the Erosion tools it's good practice to test them first on a single zone. Start with a small number of "iterations" in the parameter box (1 to 5). A large number of iterations can take a very long time to process; this is the number of times the algorithm is repeated for the effect.</p><p>
<span class="strong"><strong>FLErosion</strong></span> refers to FlowMap Erosion. This simulates water erosion, carving water channels features into terrain. Experimentation is needed to get good results, as always, start with a small number of iterations while you <a id="id104" class="indexterm"></a>
<a id="id105" class="indexterm"></a>
<a id="id106" class="indexterm"></a>
<a id="id107" class="indexterm"></a>experiment with parameters. The following screenshot shows the result of FLErosion applied to a basic fractal mountain terrain. When combined with FlowMap texturing the results look natural. Best results are obtained with high terrain resolutions which allow for fine details in the FlowMap. For first person shooter type games anything with a 1 meter resolution will be just enough to provide the player some natural cover. Usually the artist will want to apply rocks or other washout debris in these areas. FlowMaps can help here too with procedural placement of such detail objects which we'll look at in <a class="link" href="#" linkend="ch05">Chapter 5</a>, <span class="emphasis"><em>Bring Me a Shrubbery</em></span> which covers detailing.</p><div class="mediaobject"><img src="/graphics/9781849699396/graphics/9182_03_03.jpg" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec04"></a>HmapImport</h4></div></div></div><p>This is a very handy method for stamping a <a id="id108" class="indexterm"></a>
<a id="id109" class="indexterm"></a>heightmap file from a TGA source into a specific world location. The <span class="strong"><strong>World Transform </strong></span>
<a id="id110" class="indexterm"></a>
<a id="id111" class="indexterm"></a>properties in the rollup sets the scale and origin of the source image (in world units, the image will be centered at the mid-point). If you need coordinates you have two options. Either use the <span class="strong"><strong>SurfInfo</strong></span> tool or go to the <span class="strong"><strong>Utilities</strong></span> menu and choose <span class="strong"><strong>Scene Statistics</strong></span>, the latter displays the center coordinates of the selected region. You can simply paste the coordinates into the X and Z property values (Y is the height value and can be ignored).</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec05"></a>Resampler</h4></div></div></div><p>This is a handy tool which adjusts the resolution of the <a id="id112" class="indexterm"></a>
<a id="id113" class="indexterm"></a>selected terrain zones. Border zones or areas under the sea can get by with very low resolutions of 64 x 64. Word of warning though, once you reduce the terrain resolution, any fine detail will be lost even if you increase the resolution again.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec06"></a>HSmooth</h4></div></div></div><p>This applies a simple smoothing operation to the selected <a id="id114" class="indexterm"></a>
<a id="id115" class="indexterm"></a>zones. If you've tried a procedural function and it appears noisy, this can take the edge off it but it's better to use the Erosion tools if you can.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec07"></a>HmapStamp</h4></div></div></div><p>This is a clone and stamp tool, great for copying interesting <a id="id116" class="indexterm"></a>
<a id="id117" class="indexterm"></a>features in your terrain from one area to another. Quickly lasso the feature with the mouse, select the <span class="strong"><strong>Transform</strong></span> radio button, wait a few seconds for the mesh gizmo to be generated and you can drag the gizmo around to where you want, adjust the blending (<span class="strong"><strong>Feather</strong></span>), and click on <span class="strong"><strong>Apply</strong></span> to complete the operation.</p><div class="mediaobject"><img src="/graphics/9781849699396/graphics/9182_03_05.jpg" /></div><p>This powerful tool enables us to blend interesting features together or apply simple transformation (such as a scale or rotation) to an existing area of the <a id="id118" class="indexterm"></a>
<a id="id119" class="indexterm"></a>map. Additionally, we can save out these selections to a disk library for use in other scenes using the <span class="strong"><strong>Save</strong></span> and <span class="strong"><strong>Load</strong></span> buttons.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec08"></a>ObjLevel</h4></div></div></div><p>This requires an object instance layer (large number of <a id="id120" class="indexterm"></a>
<a id="id121" class="indexterm"></a>3D objects scattered across the terrain for example, trees or rocks) and will attempt to level the terrain under every object.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec09"></a>Simplify</h4></div></div></div><p>This command generates irregular 3D meshes from terrain heightmaps which is useful for devices or engines that do not natively support heightmaps for terrain. <a id="id122" class="indexterm"></a>
<a id="id123" class="indexterm"></a>For this operation to work, a Mesh layer must be armed and assigned to the current selection. Meshes are exported in Collada DAE format as individual zones. Multiple layers can be created for each LOD stage if we need an LOD mesh for terrain. By reducing the vertex count for each layer, we have precise control over the detail.</p><div class="mediaobject"><img src="/graphics/9781849699396/graphics/9182_03_06.jpg" /></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec21"></a>Heightmap Brush toolset</h3></div></div></div><p>This toolset contains functions applied using a brush. The <a id="id124" class="indexterm"></a>collection is a mix of functions from the first Heightmap toolset and the Procedural toolset. The difference being that instead of the function being applied to the whole zone, it's applied to the area defined by the shape of the brush.</p><p>The brush can either use a circular shape or you can assign a grayscale image as a mask, GROME comes with a set of interesting brushes you can use to add surface texture.</p><p>All brush operations use a circular red and green gizmo to indicate the size of the drawing area. The outermost red circle represents the diameter. Brush strokes are applied as a gradient from green to red if any smoothing is in use.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip06"></a>Tip</h3><p>
<span class="strong"><strong>Brush size</strong></span>
</p><p>Use the square bracket keys (<span class="emphasis"><em>[</em></span> and <span class="emphasis"><em>]</em></span>) to quickly adjust the brush size.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec10"></a>Elevation</h4></div></div></div><p>Identical to the zone-wide Elevation tool <a id="id125" class="indexterm"></a>except the rollup contains brush-specific <a id="id126" class="indexterm"></a>options. </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec11"></a>Smudge</h4></div></div></div><p>The Smudge tool (despite the name) is incredibly useful for <a id="id127" class="indexterm"></a>game maps. It works like the <a id="id128" class="indexterm"></a>Heightmap tool's <span class="strong"><strong>Level</strong></span> operation except the height value isn't absolute, it comes from the underlying terrain. Use this tool to paint paths and roads directly onto the surface. </p><div class="mediaobject"><img src="/graphics/9781849699396/graphics/9182_03_08.jpg" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec12"></a>Smooth</h4></div></div></div><p>Like the Heightmap smooth function with <a id="id129" class="indexterm"></a>brush <a id="id130" class="indexterm"></a>parameters. This is more flexible as the brush gives you control over strength.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec13"></a>Clone</h4></div></div></div><p>The Clone brush gizmo <a id="id131" class="indexterm"></a>works a little differently than the other brushes. The <a id="id132" class="indexterm"></a>green circle indicates the clone source of the operation. </p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip07"></a>Tip</h3><p>Press and hold down the <a id="id133" class="indexterm"></a>
<span class="emphasis"><em>ALT</em></span> key to define the source location. </p></div><p>The Clone mode has two important options: Origin and Relative. If the mode is set to Origin, the read position is <span class="emphasis"><em>reset</em></span> after every brush stroke. This allows you to paint multiple copies of the same spot as multiple brush strokes.</p><p>If the Relative mode is used, the source cursor simply <a id="id134" class="indexterm"></a>maintains a relative offset <a id="id135" class="indexterm"></a>from your brush regardless of how many brush strokes used.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec14"></a>Fractals, hills, mountains, and dunes</h4></div></div></div><p>These apply their respective procedural functions to the area of the brush. Use them to paint fractals onto sides of a cliff or add interesting surface features. The normals of such details can be baked into a bump map texture to bring them out.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec22"></a>Procedural Heightmap toolset</h3></div></div></div><p>Procedural functions write to heightmaps of <a id="id136" class="indexterm"></a>selected zones using fractal <a id="id137" class="indexterm"></a>algorithms. Some great presets are built into GROME that give some good base layers for a variety of terrain.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec15"></a>PDeposition</h4></div></div></div><p>This is used to simulate soil deposits, "particles" are <a id="id138" class="indexterm"></a>
<a id="id139" class="indexterm"></a>dropped at random points. The number of points is set by the <a id="id140" class="indexterm"></a>
<a id="id141" class="indexterm"></a>
<span class="strong"><strong>Drop Points </strong></span>parameter.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec16"></a>FractalNoise and FractalDunes</h4></div></div></div><p>FractalNoise comes <a id="id142" class="indexterm"></a>
<a id="id143" class="indexterm"></a>with many pre-sets for a variety of terrain. For any of these pre-sets you should set the Altitude Range parameters to <a id="id144" class="indexterm"></a>
<a id="id145" class="indexterm"></a>suit the scale of your zone. A min of 0 and max of 1000 clamps the generated terrain features between these values (in world units).</p><p>In the following screenshot on the left-hand side we have an example of the Eroded Mountains tool and on the right-hand side Fractal Dunes.</p><div class="mediaobject"><img src="/graphics/9781849699396/graphics/9182_03_11.jpg" /></div><p>Another value that has a major effect is the World Transform Size parameter, increasing this reduces the density of the fractal noise. Likewise a smaller value increases the density.</p><p>The "Method" combo control changes the function <a id="id146" class="indexterm"></a>
<a id="id147" class="indexterm"></a>
<a id="id148" class="indexterm"></a>
<a id="id149" class="indexterm"></a>used by the fractal generator producing powdery, sharp, basin, or mountains like structures. Experiment with the pre-sets but take care with the altitude ranges.</p><p>Usually applying several filters and combining them on the stack allows us to create projects we can quickly test and change. By using the stack to retain overall shapes we can apply more detail to additional layers.</p></div></div></div>