<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch01lvl1sec10"></a>Physical simulation in Unity</h2></div></div><hr /></div><p>We will now look at the <a id="id16" class="indexterm"></a>physical simulations already available in Physics and how Unity uses them. This section will also give you an overview of the built-in Physics components in Unity3D. Let's take a look at the Physics simulation in Unity:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Unity is a powerful tool. It is able to take care of many problems involved with interactive physical simulations. It embeds a state-of-the-art Physics engine called PhysX.</p></li><li style="list-style-type: disc"><p>It's Rigidbody is mostly targeted at rigid objects.</p></li></ul></div><p>Using Unity we can make Physics<a id="id17" class="indexterm"></a> approximations based on an object's parameter values.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec10"></a>Built-in Physics in Unity3D</h3></div></div></div><p>As I mentioned earlier, Unity is a<a id="id18" class="indexterm"></a> powerful engine that has a number of <a id="id19" class="indexterm"></a>built-in Physics components. It handles physical simulations. By adjusting a few parameter settings, we can create an object that behaves in a realistic way.</p><p>By controlling Physics from scripts, we can give an object the dynamics of a vehicle, machine, cloth, and so on. The built-in components are very useful in fast development. In most interactive developments, these simulations are required. By making Physics a built-in component, Unity3D has made developers' lives easier.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note03"></a>Note</h3><p>Unity has two separate Physics engines: one for 3D Physics and one for 2D Physics.</p></div><p>As such, there is a separate Rigidbody component for 3D Physics and an analogous Rigidbody2D component for 2D Physics.</p><p>Now, let's explore the built-in components in Unity3D.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec11"></a>Built-in Physics components in Unity3D</h3></div></div></div><p>The following figure depicts the <a id="id20" class="indexterm"></a>basic built-in Physics <a id="id21" class="indexterm"></a>components in Unity3D, which help us in interactive development:</p><div class="mediaobject"><img src="/graphics/9781783553693/graphics/3693OT_01_03.jpg" /></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec01"></a>Rigidbodies</h4></div></div></div><p>We have already discussed that in simulation or interactive development, the most important component is a<a id="id22" class="indexterm"></a> <a id="id23" class="indexterm"></a>Rigidbody. It enables the physical behavior of an object. The object to which a Rigidbody is attached can be made to respond to gravity. If we want to create a ball and want it to respond to gravity, we need to add a Rigidbody component to the object and gravity will be enabled by default.</p><p>A Rigidbody component takes the movement of the object to which it is attached; therefore, we shouldn't try to move it using a script by changing the position and rotation. Instead, we can apply forces to push the object and let the Physics engine calculate the results.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec02"></a>Kinematic motion and Rigidbodies</h4></div></div></div><p>Sometimes, it is desirable for a <a id="id24" class="indexterm"></a>Rigidbody object's<a id="id25" class="indexterm"></a> motion to not be controlled by the Physics engine but by the script code instead. This type of motion produced from a script is known as kinematic motion.</p><p>
<span class="strong"><strong>Is Kinematic</strong></span>
<a id="id26" class="indexterm"></a> is one of the properties of a Rigidbody that will remove it from the control of the Physics engine and allow it to be moved using a script. We can change the value of Is Kinematic from a script to switch this property on and off for an object by using both the script and the inspector.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note04"></a>Note</h3><p>Is Kinematic is<a id="id27" class="indexterm"></a> useful, but we should keep in mind that enabling it will affect performance. If enabled, the object will not be driven by the Physics engine and can only be manipulated by its transform, which is more performance consuming.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec03"></a>Colliders</h4></div></div></div><p>It's one of the most important <a id="id28" class="indexterm"></a>built-in components of Unity3D. A collider<a id="id29" class="indexterm"></a> component is used to define the shape for the physical collision. We use different colliders according to the shape of the objects. A collider, which is invisible, need not be matched exactly to the shape of the object's mesh.</p><p>In the later chapters, we will see how to use different colliders.</p><p>In 3D, the following are the basic colliders:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Box Collider</p></li><li style="list-style-type: disc"><p>Sphere Collider</p></li><li style="list-style-type: disc"><p>Capsule Collider</p></li><li style="list-style-type: disc"><p>Mesh Collider</p></li></ul></div><p>Take a look at the following figure:</p><div class="mediaobject"><img src="/graphics/9781783553693/graphics/3693OT_01_04.jpg" /></div><p>There are differences between 3D colliders and<a id="id30" class="indexterm"></a> 2D colliders. In 2D, the following are the <a id="id31" class="indexterm"></a>basic colliders:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>Box Collider 2D</p></li><li style="list-style-type: disc"><p>Circle Collider 2D</p></li><li style="list-style-type: disc"><p>Polygon Collider 2D</p></li></ul></div><p>Take a look at the following figure:</p><div class="mediaobject"><img src="/graphics/9781783553693/graphics/3693OT_01_05.jpg" /></div><p>Apart from the aforementioned core colliders, there are a few important terms about the colliders that you need to know.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="ch01lvl4sec01"></a>Static colliders</h5></div></div></div><p>Colliders can be <a id="id32" class="indexterm"></a>added to an<a id="id33" class="indexterm"></a> object without a Rigidbody component in order to create floors, walls, and so on. These are referred to as static colliders. Repositioning static colliders by changing the transform position will impact the performance of the Physics engine heavily.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note05"></a>Note</h3><p>To improve the performance, we should not reposition static colliders by changing the transformation position.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="ch01lvl4sec02"></a>Dynamic colliders</h5></div></div></div><p>Colliders attached to a <a id="id34" class="indexterm"></a>Rigidbody object are known as dynamic colliders. Static <a id="id35" class="indexterm"></a>colliders do not respond to collisions with dynamic colliders with any movement. In the later chapters, we will learn about the aforementioned colliders and how to implement these colliders in detail.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="ch01lvl4sec03"></a>Physic Materials</h5></div></div></div><p>Different materials are used for<a id="id36" class="indexterm"></a> different objects. As the colliders interact, their surfaces need<a id="id37" class="indexterm"></a> to simulate the properties of the material that they are supposed to represent. We can configure the friction and bounce using Physic Materials.</p><p>Again, Physic Materials for 2D and 3D are different; they are called Physic Materials 3D and Physic Materials 2D.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec04"></a>Triggers</h4></div></div></div><p>In scripting, we can detect <a id="id38" class="indexterm"></a>when the collisions are going to occur <a id="id39" class="indexterm"></a>and then we can initiate taking actions using<a id="id40" class="indexterm"></a> the <code class="literal">OnCollisionEnter</code> function. We can configure a collider, which does not behave as a solid object, as a trigger using the <code class="literal">Is Trigger</code> property<a id="id41" class="indexterm"></a> of Unity3D, and we will simply allow other colliders to pass through. When a collision occurs, a trigger will call the <code class="literal">OnTriggerEnter</code> function<a id="id42" class="indexterm"></a> on the trigger object's scripts. Using these functions, we can handle a number of scenarios where an action after the collision is required.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note06"></a>Note</h3><p>The following points will give you sources where you can find more details on this particular topic:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<code class="literal">Collider.OnCollisionEnter(Collision)</code> <a id="id43" class="indexterm"></a>at <a class="ulink" href="http://docs.unity3d.com/ScriptReference/Collider.OnCollisionEnter.html" target="_blank">http://docs.unity3d.com/ScriptReference/Collider.OnCollisionEnter.html</a>
</p></li><li style="list-style-type: disc"><p>
<code class="literal">Collider.OnCollisionStay(Collision)</code> <a id="id44" class="indexterm"></a>at <a class="ulink" href="http://docs.unity3d.com/ScriptReference/Collider.OnCollisionStay.html" target="_blank">http://docs.unity3d.com/ScriptReference/Collider.OnCollisionStay.html</a>
</p></li><li style="list-style-type: disc"><p>
<code class="literal">Collider.OnCollisionExit(Collision)</code> <a id="id45" class="indexterm"></a>at <a class="ulink" href="http://docs.unity3d.com/ScriptReference/Collider.OnCollisionExit.html" target="_blank">http://docs.unity3d.com/ScriptReference/Collider.OnCollisionExit.html</a>
</p></li><li style="list-style-type: disc"><p>
<code class="literal">Collider.OnTriggerEnter(Collider)</code> <a id="id46" class="indexterm"></a>at <a class="ulink" href="http://docs.unity3d.com/ScriptReference/Collider.OnTriggerEnter.html" target="_blank">http://docs.unity3d.com/ScriptReference/Collider.OnTriggerEnter.html</a>
</p></li><li style="list-style-type: disc"><p>
<code class="literal">Collider.OnTriggerStay(Collider)</code> <a id="id47" class="indexterm"></a>at <a class="ulink" href="http://docs.unity3d.com/ScriptReference/Collider.OnTriggerStay.html" target="_blank">http://docs.unity3d.com/ScriptReference/Collider.OnTriggerStay.html</a>
</p></li><li style="list-style-type: disc"><p>
<code class="literal">Collider.OnTriggerExit(Collider)</code> <a id="id48" class="indexterm"></a>at <a class="ulink" href="http://docs.unity3d.com/ScriptReference/Collider.OnTriggerExit.html" target="_blank">http://docs.unity3d.com/ScriptReference/Collider.OnTriggerExit.html</a>
</p></li></ul></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec05"></a>Joints</h4></div></div></div><p>Often, one Rigidbody object is attached to another using <a id="id49" class="indexterm"></a>joints. Unity <a id="id50" class="indexterm"></a>provides different joints to help us in different scenarios. We can attach one Rigidbody object to another or to a fixed point in space using a joint component. If we want a joint to allow at least some freedom of motion and so on, then Unity provides different joint components that enforce different restrictions.</p><p>The following figure depicts the types of joints:</p><div class="mediaobject"><img src="/graphics/9781783553693/graphics/3693OT_01_06.jpg" /></div><p>Joints also have other options that enable specific effects; for example, we can set a joint to break when the force applied to it exceeds a decided limit.</p><p>We will <a id="id51" class="indexterm"></a>learn more about<a id="id52" class="indexterm"></a> joints in the later chapters.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec06"></a>Character controllers</h4></div></div></div><p>In game development, often <a id="id53" class="indexterm"></a>a character is<a id="id54" class="indexterm"></a> required, and for this, a controller is always required. A character in a first- or third-person game will often need some collision-based Physics so that character doesn't fall on the floor or walk over the walls.</p><p>Unity3D provides a component to create this behavior, which is called <a id="id55" class="indexterm"></a>
<span class="strong"><strong>CharacterController</strong></span>. This component uses a Capsule Collider. The controller has functions to set the object's speed and direction.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note07"></a>Note</h3><p>You can find more<a id="id56" class="indexterm"></a> details at <a class="ulink" href="http://docs.unity3d.com/ScriptReference/CharacterController.html" target="_blank">http://docs.unity3d.com/ScriptReference/CharacterController.html</a>.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec07"></a>Scripting based on collision</h4></div></div></div><p>Let's see how we can handle<a id="id57" class="indexterm"></a> collision and an <a id="id58" class="indexterm"></a>after-collision effects with scripting. Scripts are attached to the objects in order to call some functions on collision. We can write any code in these functions to respond to the collision event. For example, we might play a sound effect when a ball hits an obstacle.</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<code class="literal">OnCollisionEnter</code>: This<a id="id59" class="indexterm"></a> function indicates that the collision is detected in the first update</p></li><li style="list-style-type: disc"><p>
<code class="literal">OnCollisionStay</code>: This <a id="id60" class="indexterm"></a>function indicates that during the updates, the contact is maintained</p></li><li style="list-style-type: disc"><p>
<code class="literal">OnCollisionExit</code>: This<a id="id61" class="indexterm"></a> function indicates that the contact has been broken</p></li></ul></div><p>Similarly, for Trigger Colliders, these functions are called <code class="literal">OnTriggerEnter</code>, <code class="literal">OnTriggerStay</code>, and <code class="literal">OnTriggerExit</code>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note08"></a>Note</h3><p>For 2D Physics, there are equivalent functions with 2D appended to the name; for example, <code class="literal">OnCollisionEnter2D</code>.</p></div><p>With normal nontrigger collisions, there is an additional requirement that at least one of the objects involved must have a nonkinematic Rigidbody. To create a nonkinematic Rigidbody, we must set Is <a id="id62" class="indexterm"></a>Kinematic<a id="id63" class="indexterm"></a> to <code class="literal">off</code>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec08"></a>Frictionless Physic Materials</h4></div></div></div><p>Sometimes, during the development, we<a id="id64" class="indexterm"></a> require frictionless <a id="id65" class="indexterm"></a>Physic Materials. Let's try to create a frictionless material. In Unity3D, to create a completely frictionless material, we need to create a new Physic Materials asset in the <span class="strong"><strong>Project</strong></span> view and set its properties as follows:</p><div class="mediaobject"><img src="/graphics/9781783553693/graphics/3693OT_01_07.jpg" /></div><p>In the previous image, we can see various parameters, using which we can fulfil our frictionless game requirement.</p></div></div></div>