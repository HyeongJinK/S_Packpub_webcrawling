<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec20"></a>Importing 3D models</h2></div></div><hr /></div><p>Before we go into the nifty details of 3D modeling and Unity3D, let's discuss first what 3D models are. In computer graphics, 3D modeling is the process of constructing and developing a mathematical and visual representation of any three-dimensional (3D) surface of an object via any 3D modeling software. The end product of that process is called a <span class="strong"><strong>3D model</strong></span>, or simply model, in the context of this book. The interesting thing about 3D models is that they are in 3D and any computer or laptop screen is a 2D surface, so it becomes a tricky task to display the 3D model in the horizons and bounds of 2D screens. So a process of displaying 3D models in the form of 2D images is used and this is called <span class="strong"><strong>3D rendering</strong></span>. It comes with 3D software tools including our very own Unity3D. This rendering process uses lights and cameras to render the 3D model as it's something real and it presents the image of it in the viewer's mind. We can get into more and more details of this never-ending topic and discussion of 3D models but it is far outside the scope of this book. So, we will talk only about the important details that can help in building a 3D game in Unity, namely models and modeling tools.</p><p>3D modelling is the process of developing a mathematical representation of any three-dimensional surface of an object. Remember, a 3D model is the main asset of any game. A model file may contain a 3D model, such as any character, building, furniture, and so on. A model file may also contain animation data which can be used to animate this model or other models. The animation data is imported as one or more animation clips. We can't create 3D models in Unity because Unity is the gaming engine for developing games, not for creating 3D models. We just can just import them and use them in the game. There are many 3D modeling software packages available on the market, and they are improving day by day as well.</p><p>In Unity, importing meshes can be achieved from two main types of files: <span class="strong"><strong>exported 3D</strong></span> file formats and <span class="strong"><strong>proprietary 3D application</strong></span> files. Let's further describe exported 3D file formats. Unity can read <code class="literal">.fbx</code>, <code class="literal">.dae</code>, <code class="literal">.3DS</code>, <code class="literal">.dxf</code>, and <code class="literal">.obj</code>. The advantages and disadvantages of exported 3D file formats are described in the following text:</p><p><span class="strong"><strong>Advantages</strong></span></p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">Only export the data you need</li><li style="list-style-type: disc">Verifiable data (re-import into the 3D package before Unity)</li><li style="list-style-type: disc">Generally smaller files</li><li style="list-style-type: disc">Encourages modular approach; for example, different components for collision types or interactivity</li><li style="list-style-type: disc">Supports other 3D packages whose proprietary formats we don't have direct support for</li></ul></div><p><span class="strong"><strong>Disadvantages</strong></span></p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">Can be a slower pipeline for prototyping and iterations</li><li style="list-style-type: disc">Easier to lose track of versions between source (working file) and game data (for example, exported FBX)</li></ul></div><p>The second type of files are the proprietary 3D application files such as <code class="literal">.Max</code> and <code class="literal">.Blend</code> file formats from 3D Studio Max or Blender. Unity also can import Max, Maya, Blender, Cinema4D, Modo, Lightwave, and Cheetah3D files. For example, MAX, MB, MA, and so on. The advantages and disadvantages of proprietary 3D application files are as follows:</p><p><span class="strong"><strong>Advantages:</strong></span></p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">Quick iteration process (save the source file and Unity reimports)</li><li style="list-style-type: disc">Simple initially</li></ul></div><p><span class="strong"><strong>Disadvantages:</strong></span></p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">A licensed copy of that software must be installed on all machines using the Unity project</li><li style="list-style-type: disc">Files can become bloated with unnecessary data</li><li style="list-style-type: disc">Big files can slow Unity updates</li><li style="list-style-type: disc">Less validation, so it is harder to troubleshoot problems</li></ul></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec29"></a>3D models</h3></div></div></div><p>3D models are the representation of any physical object constructed using a collection of geometric primitives such as triangles, lines, curved surfaces, and so on. The following figure shows some basic primitives used for the creation of 3D models:</p><div class="mediaobject"><img src="/graphics/9781783550777/graphics/image_03_005.png" /></div><p>Figure 3.5 Some basic primitives for 3D modeling</p><p>All the 3D models and objects are created by assembling, modifying, nudging, and so on, these primitive shapes and objects. To understand it better, take a look at the following figure which shows some 2D primitives used behind the scenes of 2D graphics tools such as Photoshop or Gimp:</p><div class="mediaobject"><img src="/graphics/9781783550777/graphics/image_03_006.png" /></div><p>Figure 3.6 Some 2D primitives</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec30"></a>Modelling tools</h3></div></div></div><p>Now that you have a good understanding of 3D models, let's move ahead in our discussion with the modeling tools. These 3D models are created in very advanced and mostly commercial tools such as Autodesk Maya, Autodesk 3D Studio Max, Blender, and so on. These tools offer modelers a variety of choices and features to create and animate the 3D models and render them in the form of images or video movies, or directly export them into model files.</p><p>The following table shows some 3D modelling tools along with their license types of usage:</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; "><colgroup><col /><col /></colgroup><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><span class="strong"><strong>Tool name</strong></span></p></td><td style="border-bottom: 0.5pt solid ; "><p><span class="strong"><strong>License type</strong></span></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Autodesk Maya</p></td><td style="border-bottom: 0.5pt solid ; "><p>Commercial</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Autodesk 3D Studio Max</p></td><td style="border-bottom: 0.5pt solid ; "><p>Commercial</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Cinema 4D</p></td><td style="border-bottom: 0.5pt solid ; "><p>Commercial</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Cheetah 3D</p></td><td style="border-bottom: 0.5pt solid ; "><p>Commercial</p></td></tr><tr><td style="border-right: 0.5pt solid ; "><p>Blender</p></td><td style=""><p>General public</p></td></tr></tbody></table></div><p>Table 3.1 Some 3D modeling tools</p><p>Unity3D is not an advanced modeling tool but it offers some basic primitives and allows some basic modeling features as well. But, in order to create any 3D game or movie in Unity3D, you need more detailed 3D models in it. So, Unity3D allows developers and modelers to import most kinds of 3D model files to customize, animate, and use them in games or movies with programming as well. This feature makes Unity3D quite powerful indeed compared to other 2D or 3D game engines. Unity3D supports two types of files when it comes to import models:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Exported 3D file formats such as <code class="literal">.fbx</code>, <code class="literal">.dae</code>, <code class="literal">.obj</code>.</li><li>Proprietary 3D application/tool files or native files of modeling tools such as <code class="literal">.max</code>, or <code class="literal">.mb</code>.</li></ol></div><p>The exported files tend to be lighter in size and these files allow you to select the data you want to use in Unity3D at the time of exporting it. Unity3D recommends these types of models to use in the game or movie in order to optimize it for the sake of real-time rendering and high performance.</p><p>The later proprietary files are the native source files of the models of tools such as Maya and 3D Studio Max. The biggest advantage of these files is that they allow for a quick iteration process of testing games/movies by seemingly re-importing models at the time of editing as well. But you need the licensed copy of the modeling tool on every computer in which you use Unity3D and the model files. These files are often very large and not recommended for releasing games or movies in Unity3D.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note28"></a>Note</h3><p>It is highly recommended to use FBX files in Unity3D as it allows for embedding animations and textures directly in the model itself.</p></div><p> </p><p> </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec31"></a>Importing 3D models in Unity3D</h3></div></div></div><p>So, after a little detailed discussion on 3D models and modeling tools, let's get into the real details of how to import 3D models in Unity3D. If we say this in terms of importing sprites, images, and sounds, it sounds similar to putting any 3D model file in the <code class="literal">Assets</code> folder of the project, but it actually gets complicated due to lots of concepts and settings involved in the process of importing in Unity3D.</p><p>In this section, we will discuss how to import any 3D model in Unity. We will import a simple house model of FBX type in Unity now. The FBX type is short for Filmbox files and is used mostly in AutoCAD for CAD/CAM designing for houses, architectures, cars, and engineering modeling. Major 3D modeling tools also give the option of exporting models into <code class="literal">.fbx</code> format as well. The main advantage of using FBX files is that it allows developers to select which type of data should be exported in the file. This data can include meshes, mesh animations, rigs, or bone animations. We have used a simple house model as shown in the following figure, downloaded from The <span class="strong"><strong>Free 3D Models</strong></span> (<span class="strong"><strong>t3fm</strong></span>) website available for general public use:</p><div class="mediaobject"><img src="/graphics/9781783550777/graphics/image_03_007.jpg" /></div><p>Figure 3.7 A house model</p><p>Now, first open our 3D Free Fighter project in Unity, and you will see the <strong class="userinput"><code>Assets</code></strong> folder in the <strong class="userinput"><code>Project</code></strong> panel. Right-click on the <strong class="userinput"><code>Assets</code></strong> folder and create a new folder called <code class="literal">Models</code>. There are many methods of importing models into Unity3D. Click on the <strong class="userinput"><code>Assets</code></strong> menu and choose the <strong class="userinput"><code>Import New Asset...</code></strong> option and select the <strong class="userinput"><code>Farmhouse.fbx</code></strong> file and finally click on the <strong class="userinput"><code>Import </code></strong>button.</p><p>This whole process is as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783550777/graphics/image_03_008.png" /></div><p>Figure 3.8 Importing 3D model in Unity3D</p><p>After importing, you will see that the file will be placed in the <strong class="userinput"><code>Models</code></strong> folder. But you will also notice that another folder with the name <strong class="userinput"><code>Materials</code></strong> will automatically be created with the model file in the <strong class="userinput"><code>Project</code></strong> panel, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783550777/graphics/image_03_009.png" /></div><p>Figure 3.9 House model in project panel</p><p>Now the model is imported into Unity and it can be used in the game. You can drag it in the scene in a similar way as you did to add images and sprites in Unity3D. After dragging it into the scene, you will notice that the model is not colored. It's just a single color white and gray model as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783550777/graphics/image_03_010.png" /></div><p>Figure 3.10 The house model in scene</p><p>The reason for the disappearance of the colors, called textures and materials in Unity3D, is that the .FBX file of this model only contains the mesh of the model that is shown in the scene. The textures and materials also come separate from the models and can also be embedded into the model file itself. It is good practice to separate these files into Unity3D.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note29"></a>Note</h3><p>The model files placed in the <code class="literal">Assets</code> folder manually are automatically imported into Unity3D.</p></div><p>A model file can contain any 3D model such as any character, building, or any geometric shape. We have a farmhouse model imported in Unity3D. In the <strong class="userinput"><code>Scene view</code></strong> or <strong class="userinput"><code>Hierarchy</code></strong> panel, the imported model is placed as a game object of the model prefab, which is automatically created by Unity3D at the time of importing the models. This game object will contain all the model data such as mesh, lights, and so on, as the children objects of it. The following figure shows the farmhouse model's game object in the <strong class="userinput"><code>Hierarchy</code></strong> panel:</p><div class="mediaobject"><img src="/graphics/9781783550777/graphics/image_03_011.png" /></div><p>Figure 3.11 The Farmhouse model prefab object hierarchy</p><p>Developers often get confused after importing models with the different issues involved in the process. Some models become too much small in size after importing, or some models come rotated reversely in Unity3D. This is all about the settings of the model. Since these models are created in other tools such as Maya3D, the difference in scaling and scene settings can cause such issues.</p><p>So, in order to customize these settings more, Unity provides the properties of the model in the <strong class="userinput"><code>Inspector</code></strong> panel, which can help in setting the properties of the model before using it in the scene. When you select the imported model in the <code class="literal">Assets</code> directory, you will see some other settings in the <strong class="userinput"><code>Inspector</code></strong> panel, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783550777/graphics/image_03_012.png" /></div><p>Figure 3.12 Farmhouse model settings</p><p>As you can see in the preceding screenshot, a model file contain three kinds of data presented in tabs form in the settings: <strong class="userinput"><code>Model</code></strong>, <strong class="userinput"><code>Rig</code></strong>, and <strong class="userinput"><code>Animations</code></strong>. The <strong class="userinput"><code>Model </code></strong>tab includes all the data related to the mesh, materials, and the model itself. The <strong class="userinput"><code>Rig </code></strong>tab and <strong class="userinput"><code>Animations </code></strong>tab allow developers to set the animation behavior of the model, either with the embedded animations in the model file itself or from other animation clips in Unity3D. We will discuss these details later in this chapter. Although there are lots of settings in the <strong class="userinput"><code>Model </code></strong>tab itself, we will discuss only some of the important settings which are used generally when importing FBX models in Unity3D:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><span class="strong"><strong>Scale</strong></span>: This scale factor is used for removing the gap between the units system in Unity3D and the units system in the modeling tool in which the model has been created. Unity3D generally refers to one unit of the scale factor as one meter. So, developers should set the scale factor accordingly. Normally, this is set to 1.</li></ol></div><div class="orderedlist"><ol class="orderedlist arabic" start="2" type="1"><li><span class="strong"><strong>Generate colliders</strong></span>: This check allows developers to automatically generate colliders for the mesh and model for the collision detection. Keep in mind that with this check enabled, Unity3D will create mesh colliders, which can sometimes result in very heavy processing, depending on the mesh itself. So, if you want the customized colliders, you can customize, or create your mesh collider in Unity as well.</li></ol></div><p>These two settings will set the model to a good condition. We should be reminded that our model is still in a single color and we haven't yet imported textures and materials to it. So in the next section, we will discuss about applying textures and materials on the model objects.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note30"></a>Note</h3><p>The default scale factor for different 3D models is as follows: <code class="literal">.fbx</code>, <code class="literal">.max,</code><code class="literal">.jas</code>, <code class="literal">.c4d</code> = 0.01, <code class="literal">.mb</code>, <code class="literal">.ma</code>, <code class="literal">.lxo</code>, <code class="literal">.dxf</code>, <code class="literal">.blend</code>, <code class="literal">.dae</code> = 1, <code class="literal">.3ds</code> = 0.1.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec32"></a>Importing FBX Model</h3></div></div></div><p>FBX is the abbreviation of Filmbox. Unity supports FBX files which can be generated from many popular 3D applications. Be aware of export scope, for example, meshes, cameras, lights, animation rigs, and so on:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Applications often let you export selected objects or a whole scene</li><li>Make sure you are exporting only the objects you want to use from your scene by either exporting selected data, or removing unwanted data from your scene.</li><li>Good working practice often means keeping a working file with all lights, guides, control rigs etc. but only exporting the data you need with export selected, an export preset, or even a custom scene exporter.</li></ol></div><p>See the following figure to determine the difference between OBJ and FBX:</p><div class="mediaobject"><img src="/graphics/9781783550777/graphics/image_03_047.jpg" /></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note31"></a>Note</h3><p>In Unity asset store, many 3d models are available free or paid, that can be easily used in any game. Also you can find on internet many website are available where user sell or royalty-free 3D models (<span><a class="ulink" href="http://tf3dm.com/" target="_blank">http://tf3dm.com</a>)</span></p></div><p>So, we have modelled a house in 3D Max, and exported it into FBX format; remember in that model we have only mash, do right click in the <strong class="userinput"><code>Project</code></strong> panel then click <strong class="userinput"><code>Import New Asset...</code></strong>, then browse you FBX model path and click <strong class="userinput"><code>import</code></strong> button. Unity provides us also with a drag and drop feature so we can drop an fbx model into the <strong class="userinput"><code>Project</code></strong> panel. The following figure shows how to import a model into the scene by clicking the <strong class="userinput"><code>Import New Asset... </code></strong>button:</p><div class="mediaobject"><img src="/graphics/9781783550777/graphics/image_03_048.jpg" /></div><p>You can see the FBX model in the <strong class="userinput"><code>Project</code></strong> panel the better way to go forward your project in managed way so create empty folder name as <strong class="userinput"><code>Model</code></strong> in root, then drop your fbx file and material folder of it into the <strong class="userinput"><code>Model</code></strong> folder. The following figure depicts the drop FBX model into the <strong class="userinput"><code>Model</code></strong> folder:</p><div class="mediaobject"><img src="/graphics/9781783550777/graphics/image_03_049.jpg" /></div><p>Now go to the <strong class="userinput"><code>Model</code></strong> folder and drag <strong class="userinput"><code>Farmhouse FBX.fbx</code></strong> file and drop it into the <strong class="userinput"><code>Hierarchy</code></strong> panel; if the models showing are small, that means the scale of models are small, to increase the scale size of model select <strong class="userinput"><code>Farmhouse FBX.fbx </code></strong>from the <strong class="userinput"><code>Project</code></strong> panel, you will see 3 tabs in <strong class="userinput"><code>Inspector</code></strong> panel named <strong class="userinput"><code>Model</code></strong>, <strong class="userinput"><code>Rig </code></strong>and <strong class="userinput"><code>Animations</code></strong>, we focus on model for now model are selected by default. In the first textbox, <strong class="userinput"><code>Scale </code></strong><strong class="userinput"><code>Factor</code></strong>, do change value 1 to whatever you need let suppose 10, then click on <strong class="userinput"><code>Apply</code></strong> button end of <strong class="userinput"><code>Model </code></strong>panel.</p><p>Consider the following figure for illustrating the increase in the scale size of the model:</p><div class="mediaobject"><img src="/graphics/9781783550777/graphics/image_03_050.jpg" /></div></div></div>