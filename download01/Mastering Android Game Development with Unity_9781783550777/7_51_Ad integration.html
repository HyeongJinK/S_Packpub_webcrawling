<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch07lvl1sec50"></a>Ad integration</h2></div></div><hr /></div><p>In Unity, it is very easy to integrate ads in your games using Unity Ads. In Unity, go to <strong class="userinput"><code>Windows</code></strong> | <strong class="userinput"><code>Services</code></strong> and a new tab will open on the right:</p><div class="mediaobject"><img src="/graphics/9781783550777/graphics/image_07_039.png" /></div><p>In the <strong class="userinput"><code>Services</code></strong> tab, log in with your Unity login and password that you obtained while registering on Unity.</p><p>Click on the <strong class="userinput"><code>Create</code></strong> button. This will show the different services that are available to you:</p><div class="mediaobject"><img src="/graphics/9781783550777/graphics/image_07_040.png" /></div><p>Click on the <strong class="userinput"><code>SERVICES</code></strong> tab:</p><div class="mediaobject"><img src="/graphics/9781783550777/graphics/image_07_041.png" /></div><p>Flip the switch on the top right corner to enable it. If the game is targeted at kids under 13 click the checkbox and click on the <strong class="userinput"><code>Continue</code></strong> button:</p><div class="mediaobject"><img src="/graphics/9781783550777/graphics/image_07_042.png" /></div><p>Select <strong class="userinput"><code>Android</code></strong> as the target platform, and check the <strong class="userinput"><code>Enable test mode</code></strong> option, so that we can test it before we publish the game. Now, in the <code class="literal">gamescript</code> class, at the top of the class add the following:</p><pre class="programlisting">    using UnityEngine.Advertisements;   </pre><p>All we have to do is call the <code class="literal">ShowAd</code> function when we want to show an ad. We don't want to show an ad when the player has an achievement as we also don't want to show the ad every time we call the <code class="literal">ShowAd</code> function in the <code class="literal">else</code> statement, when achievements are showing:</p><pre class="programlisting">    if (gameplayCount == 1) { 
        Social.ReportProgress (PunchyPunchAchievements. 
        achievement_played_first_time, 100, (bool sucsess) =&gt; { }); 
    } 
    else if (gameplayCount == 5) { 
        Social.ReportProgress (PunchyPunchAchievements. 
        achievement_played_5_times, 100, (bool sucsess) =&gt; { }); 
    } 
    else if (gameplayCount == 50) { 
        Social.ReportProgress (PunchyPunchAchievements. 
        achievement_played_50_times, 100, (bool sucsess) =&gt; { }); 
    }
    else if (gameplayCount == 100) { 
        Social.ReportProgress (PunchyPunchAchievements. 
        achievement_played_100_times, 100, (bool sucsess) =&gt; { }); 
    } 
    else if (gameplayCount == 1000) { 
        Social.ReportProgress (PunchyPunchAchievements. 
        achievement_played_1000_times, 100, (bool sucsess) =&gt; { }); 
    } else { 
        if (gameplayCount % 3 == 0){ 
            ShowAd(); 
        } 
    }  </pre><p>We call the show ad function if <code class="literal">gameplayCount</code> is divisible by 3. Then, all the magic happens inside the <code class="literal">ShowAd</code> function.</p><p>Create the <code class="literal">ShowAd</code> function as follows:</p><pre class="programlisting">    public void ShowAd() 
    { 
        if (Advertisement.IsReady()) 
        { 
            Advertisement.Show("video", new ShowOptions() { 
                resultCallback = adViewResult}); 
        } 
    }  </pre><p>Sometimes ads are not available at the moment to show, it might be while playing or restarting the game that the ad will start playing. We don't want that so we first check if there is an ad to show so we calling <code class="literal">Advertisement.Isready</code>.</p><p>If there is an ad that is ready, we call the <code class="literal">Advertisement.Show</code> function, and we specify the type of ad we want to show, which is a video. We add in a callback function that will tell us what the player did while watching an ad or if the ad played at all.</p><p>So add a new function called <code class="literal">adViewResult</code> as follows:</p><pre class="programlisting">    public void adViewResult(ShowResult result) { 
        switch (result) { 
            case ShowResult.Finished: 
                Debug.Log(" Player viewed complete Ad"); break; 
            case ShowResult.Skipped: 
                Debug.Log(" Player Skipped Ad "); break; 
            case ShowResult.Failed: 
                Debug.Log("Problem showing Ad "); break;             
        } 
    } </pre><p>We check if the ad has finished playing, skipped, or failed. In each case we log out the information. Build and run the game. Now a test ad should show as per our code:</p><div class="mediaobject"><img src="/graphics/9781783550777/graphics/image_07_043.png" /></div><p>Let us see how to add In-App purchases, so that if the player wants to disable the ad they can make a purchase to disable the ad.</p></div>