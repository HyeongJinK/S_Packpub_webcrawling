<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec16"></a>Camera management</h2></div></div><hr /></div><p>So now we have a game in which we have a penguin that can fly and jump with a rocket fire particle system effect. Also, we have a basic environment of snow backgrounds in the scene as well. In this section, we will learn about how we to make the penguin move throughout an endless generated level and how the camera will always be focused on the penguin.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec22"></a>Making the penguin move forward</h3></div></div></div><p>Let's start by making our penguin move in a forward direction. To do that, open the file <code class="literal">PenguinController.cs</code> created in <a class="link" href="#" linkend="ch01">Chapter 1</a>, <span class="emphasis"><em>Introduction to Android Game Development with Unity3D</em></span>. This file is contained in the <strong class="userinput"><code>Scripts</code></strong> folder of the <strong class="userinput"><code>Assets</code></strong> directory. Add the forward speed public field in the class, as shown in the following code:</p><pre class="programlisting">    public float forwardMovementSpeed = 3.0f;</pre><p>Recall that adding any public field results in the addition of a property in the script's game object, as shown in the <strong class="userinput"><code>Inspector</code></strong> panel in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783550777/graphics/image_02_020.png" /></div><p>Figure 2.19 Forward Movement speed field in the Inspector panel</p><p>Now, in order to move the penguin with any speed, we have to update the speed of the penguin in the <code class="literal">Update()</code> or <code class="literal">FixedUpdate()</code> methods. Since we are using the <code class="literal">FixedUpdate()</code> method in order to utilize the physics behavior of the penguin, so add this code at end of the <code class="literal">FixedUpdate()</code> method:</p><div class="mediaobject"><img src="/graphics/9781783550777/graphics/image_02_021.png" /></div><p>Well, there is not much of anything new in this code snippet. As we updated the penguin's y-position in through jetpack force, we are updating only the x-axis of the penguin's object. See how we are assigning <code class="literal">forwardMovementSpeed</code> in each frame on the velocity of penguin's game object. When you run the project, the penguin will start moving in the right direction, and after a minute, it will leave the screen. Our next task is to make the camera follow the penguin so that the penguin always remains on screen and never gets out of bounds of the camera.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec23"></a>Making the camera follow the Penguin</h3></div></div></div><p>Object as a child of the penguin game object, as shown in the following screenshot:</p><p>We have lots of methods to make the camera follow the penguin. The easiest is to put the Camera object as a child of the penguin game object, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783550777/graphics/image_02_022.png" /></div><p>Figure 2.21 Camera as child of the Penguin object</p><p>Well, you can do this, but there is a problem with this solution. When the penguin jumps or flies, the camera also moves up or down with it. We don't need that in our game. We only need to move the camera horizontally and continuously move forward keeping the penguin in the bounds. So, we will do that by creating another C# script file in the <strong class="userinput"><code>Script</code></strong> folder of the <strong class="userinput"><code>Assets</code></strong> directory with the name <code class="literal">CameraFollow.cs</code>. Now, add a public <code class="literal">GameObject</code> field with a variable named <code class="literal">targetObject</code>. This field will tell the camera about which object to follow. We will keep a reference of the penguin's game object in this field. And finally, to move the camera continuously forward, we will do code similar to the penguin's moving forward code. The only difference here is that we put our code in the <code class="literal">Update()</code> method instead of <code class="literal">FixedUpdate()</code>. The reason for this is that <code class="literal">FixedUpdate()</code> should be used when the object has a rigid body and/or other physical behaviors. As our camera has no connection with the physics, we can do this by simply adding the moving code in the <code class="literal">Update()</code> method. The following is the whole code of the <code class="literal">CameraFollow.cs</code> file:</p><div class="mediaobject"><img src="/graphics/9781783550777/graphics/image_02_023.png" /></div><p>After writing the code, let's put this script on the <strong class="userinput"><code>Camera</code></strong> object. Select the <strong class="userinput"><code>Main Camera</code></strong> object in the <strong class="userinput"><code>Hierarchy</code></strong> panel, and click on the <strong class="userinput"><code>Add Component</code></strong> button in <strong class="userinput"><code>Inspector</code></strong> and choose <strong class="userinput"><code>Scripts - CameraFollow.cs</code></strong>, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783550777/graphics/image_02_024.png" /></div><p>Figure 2.22 Adding CameraFollow.cs on camera</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note21"></a>Note</h3><p>You can also apply scripts on the game objects by simply dragging the script files from the Project Browser panel directly onto game objects in the Hierarchy panel.</p></div><p>When you run the project, although the <strong class="userinput"><code>Camera</code></strong> will move, you will a see an error in the <strong class="userinput"><code>Debug Log</code></strong> panel, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783550777/graphics/image_02_025.png" /></div><p>Figure 2.23 Camera error in Debug Log</p><p>The problem is that the variable <code class="literal">targetObject</code> in the <code class="literal">CameraFollow</code> script is not assigned to any value and we are accessing it the <code class="literal">Update()</code> method. Recall from earlier that we need to assign the penguin game object in the <code class="literal">targetObject</code> value to tell the camera about the target to follow. You can use Unity's public inspector feature and directly assign the penguin object by dragging it into the camera's <code class="literal">targetObject</code> field in the <strong class="userinput"><code>Inspector </code></strong>panel, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783550777/graphics/image_02_026.png" /></div><p>Figure 2.24 Assigning Penguin Object in Target Object</p><p>Now run the game and you will see the camera will never allow the penguin off the screen. However, after moving for a short time, the penguin will start falling since its floor has been left behind and the penguin has no physical support to oppose its gravity. To fix this and continue with the game, we will now work on creating endless levels in the next section.</p></div></div>