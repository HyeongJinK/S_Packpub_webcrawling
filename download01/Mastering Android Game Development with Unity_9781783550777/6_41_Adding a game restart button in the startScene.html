<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch06lvl1sec41"></a>Adding a game restart button in the startScene</h2></div></div><hr /></div><p>Now create a new button in the startScene and rename the button to <strong class="userinput"><code>resetBtn</code></strong> as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783550777/graphics/image_06_008.png" /></div><p>In the <strong class="userinput"><code>Inspector</code></strong> pane, under the <strong class="userinput"><code>Source Image</code></strong> field, select the <strong class="userinput"><code>resetBtn2</code></strong> Sprite type:</p><div class="mediaobject"><img src="/graphics/9781783550777/graphics/image_06_009.png" /></div><p>Leave the rest of the parameters as they are. You will also see a preview of the reset button in the <strong class="userinput"><code>Inspector</code></strong> pane along with its dimensions:</p><div class="mediaobject"><img src="/graphics/9781783550777/graphics/image_06_010.png" /></div><p>Position the button so that it is just under and to the right of the <strong class="userinput"><code>GAMEOVER!!!</code></strong> text. By this we will make it accessible to the player's thumb:</p><div class="mediaobject"><img src="/graphics/9781783550777/graphics/image_06_011.png" /></div><p>Once positioned, it should look like the following in the game:</p><div class="mediaobject"><img src="/graphics/9781783550777/graphics/image_06_012.png" /></div><p>Now we have to create a small script so that, when the button is clicked, the <strong class="userinput"><code>startScene</code></strong> is called. To do this, create a new script, call it <strong class="userinput"><code>buttonClick</code></strong>, and save it in the <code class="literal">Scripts</code> folder. Inside the script add the following lines:</p><pre class="programlisting">    using System.Collections; 
    using System.Collections.Generic; 
    using UnityEngine; 
    using UnityEngine.SceneManagement; 

    public class buttonClick : MonoBehaviour { 
        public void onButtonClick(string level) { 
            SceneManager.LoadScene(level); 
        } 
    } </pre><p>The <code class="literal">SceneManager.LoadScene</code> function is responsible for loading the scene in Unity.</p><p>When the button is clicked, we will select the <code class="literal">OnButtonClick</code> function, then pass in a name of the scene to be loaded, and this string will be passed into the <code class="literal">LoadScene</code> function, which will load the scene itself.</p><p>Now create an empty game object by going to <strong class="userinput"><code>GameObject</code></strong>| <strong class="userinput"><code>CreateEmpty</code></strong>. Name it <strong class="userinput"><code>buttonClickGo</code></strong>. It doesn't matter where this game object is located in the scene. Now add the <code class="literal">buttonClick</code> script to this game object, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783550777/graphics/image_06_013.png" /></div><p>Select the <code class="literal">resetBtn</code> in the Hierarchy. In the <strong class="userinput"><code>Inspector</code></strong> pane for the button, you will see an <strong class="userinput"><code>On Click ()</code></strong> section below the <strong class="userinput"><code>Button (Script)</code></strong> section:</p><div class="mediaobject"><img src="/graphics/9781783550777/graphics/image_06_014.png" /></div><p>In the first dropdown menu, select <strong class="userinput"><code>Editor and Runtime</code></strong> option, so the function can be called inside the editor during runtime.</p><p>Next, select the <strong class="userinput"><code>buttonClickGO</code></strong> game object from the dropdown list, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783550777/graphics/image_06_015.png" /></div><p>Then, select the <code class="literal">buttonClick.onButtonClick</code> function from the dropdown. This is under <strong class="userinput"><code>ButtonClick</code></strong> | <strong class="userinput"><code>onButtonClick (string)</code></strong>:</p><div class="mediaobject"><img src="/graphics/9781783550777/graphics/image_06_016.png" /></div><p>Now, enter the string as the name of the scene that will gets called--in this case we want to call the <strong class="userinput"><code>startScene</code></strong>:</p><div class="mediaobject"><img src="/graphics/9781783550777/graphics/image_06_017.png" /></div><p>We still need to hide the reset button till the game is over. So, in the <code class="literal">gameScript</code>, create a public <code class="literal">Button</code> type, and call it <code class="literal">resetButton</code>, shown as following:</p><pre class="programlisting">    public Text enemyTextInstance; 
    public Text playerTextInstance; 
    public Text gameOverText; 
<span class="strong"><strong>    public Button resetButton;</strong></span></pre><p>Next, in the <code class="literal">Start</code> function we set the active property to <code class="literal">false</code>:</p><pre class="programlisting">    void Start () {  
        GameObject player = GameObject.Find("theDude"); 
        pScript = player.GetComponent&lt;playerScript&gt;(); 

        GameObject enemy = GameObject.Find("Enemy"); 
        eScript = enemy.GetComponent&lt;enemyScript&gt;(); 
        gameOverText.enabled = false; 

        resetButton.gameObject.SetActive(false); 
    } </pre><p>This will ensure that the reset button won't be visible initially. Finally, once the game is over, update the <code class="literal">SetActive</code> function to <code class="literal">true</code> again:</p><pre class="programlisting">    if (playerHealth &lt;= 0 || enemyHealth &lt;= 0) { 
        bGameover = true; 
        gameOverText.enabled = true; 
<span class="strong"><strong>        resetButton.gameObject.SetActive(true);</strong></span>

        Instantiate(particlePrefab); 
    }  </pre><p>For Unity to get the scene you want it to load, you need to add it to the <strong class="userinput"><code>Scenes In Build</code></strong> list in <strong class="userinput"><code>Build Settings</code></strong> option. So, go to <strong class="userinput"><code>File</code></strong> | <strong class="userinput"><code>Build Settings</code></strong> and click the <strong class="userinput"><code>Add Open Scenes</code></strong> button at the bottom, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781783550777/graphics/image_06_018.png" /></div><p>Once the scene has been added, close the window. Now run the game and, once the game is over, you can press the reset button and the game will start again.</p></div>