<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch08lvl1sec82"></a>Stats and performance</h2></div></div><hr /></div><p>Many people think that game optimization should be an afterthought; that is, something that comes at the end of development. This line of reasoning stresses the importance of first making the gameÂ as a complete experience, and then recommends optimizing what has been made by tweaking existing features. This approach, however, though common is not recommended. </p><p>Instead, performance and optimization should factor into the design, meaning that it should be an early consideration. From the outset of development, you should be considering ways to optimize performance and your workload. Consider the following:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<span class="strong"><strong>Target Platform</strong></span>: Decide early on the target hardware to be supported by your game. This should not be defined only in terms of operating system, such as Android and <span class="emphasis"><em>Windows</em></span>, but also in terms of versions-such as <span class="emphasis"><em>Windows 10</em></span> and <span class="emphasis"><em>Android 4.5</em></span>. It is important to establish a minimum baseline version below which the game is not supported; that is, not tested or assumed to work properly. After establishing this, you should get access to all target hardware and software so you can test your game on the minimum systems. Do not rely on simulators or emulators, but always test on the target hardware itself.</p></li><li style="list-style-type: disc"><p>
<span class="strong"><strong>Target Frame rate/performance</strong></span>: Next, decide on a minimum level of runtime performance acceptable for the target hardware. Typically, this can be defined in <span class="strong"><strong>Frames Per Second</strong></span> (<span class="strong"><strong>FPS</strong></span>). That is, the minimum FPS acceptable at any time for the target hardware, such as 40 fps or 50 fps. By deciding on a concrete minimum, you'll have a firm benchmark to make comparisons and judgments about how well your game is performing.</p></li></ul></div><p>After deciding on target hardware and target performance, you're ready to start testing your game and assessing its performance. The best way to do this for desktop platforms is by playing your game directly from the <span class="strong"><strong>Unity editor</strong></span>, running it from the <span class="strong"><strong>Game</strong></span> tab with the <span class="strong"><strong>Stats </strong></span>panel activated. You can activate the <span class="strong"><strong>Stats </strong></span>panel by clicking on the <span class="strong"><strong>Stats</strong></span> button from the <span class="strong"><strong>Game</strong></span> tab. This displays an information panel in the top-right corner of the screen:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781785880742/graphics/image_08_001.jpg" /></div><p>
</p><p>Accessing the Stats panel</p><p>The Stats panel lists lots of critical information about the runtime performance of your game, but it always describes the performance on the current system, specifically the system on which you are running the Unity editor. For this reason, if you're developing and testing on a system that's more powerful than your target hardware, you need to be cautious about the information provided by the <span class="strong"><strong>Stats </strong></span>panel. Ideally, try testing on your target hardware for the most meaningful results:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781785880742/graphics/image_08_002.jpg" /></div><p>
</p><p>Reading the Stats panel on the target hardware</p><p>The <span class="strong"><strong>Tris</strong></span> and <span class="strong"><strong>Verts</strong></span> stats list the total number of triangles and vertices processed by the graphics hardware for the current frame only, specifically, all triangles (tris) and vertices (verts) within view of all active cameras. Thus, it is not a count of the total tris and verts in the scene, as this could be larger. This hints at important opportunities for optimization-on one hand, you can reduce the poly-count of models, but on the other, you can cleverly hide objects from the viewing frustum if they are not needed:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781785880742/graphics/image_08_003.jpg" /></div><p>
</p><p>Viewing the total triangles and vertices for all active cameras</p><p>The <span class="strong"><strong>SetPass calls</strong></span> refers to the number of distinct processing steps that the rendering engine must perform to successfully render the active frame. Fewer steps (lower <span class="strong"><strong>SetPass calls</strong></span>) results in better performance. One quick technique to reduce <span class="strong"><strong>SetPass calls</strong></span> is to use fewer unique materials for meshes, and to share materials among meshes where possible. Try limiting each mesh to one material (as each unique material results in an additional <span class="strong"><strong>SetPass calls</strong></span>):</p><p>
</p><div class="mediaobject"><img src="/graphics/9781785880742/graphics/image_08_004.jpg" /></div><p>
</p><p>Lower SetPass calls results in faster performance</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note56"></a>Note</h3><p>The <span class="strong"><strong>Stats</strong></span> panel is most valuable when your Unity project is running on the target hardware and is in Play mode. More information on the statistics panel can be found online here: <a class="ulink" href="https://docs.unity3d.com/Manual/RenderingStatistics.html" target="_blank">https://docs.unity3d.com/Manual/RenderingStatistics.html</a>.</p></div></div>