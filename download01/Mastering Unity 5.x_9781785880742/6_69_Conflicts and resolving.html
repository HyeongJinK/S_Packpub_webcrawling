<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch06lvl1sec68"></a>Conflicts and resolving</h2></div></div><hr /></div><p>Branches in Git are especially useful whenever two coders need to work from the same <span class="emphasis"><em>base</em></span> or <span class="emphasis"><em>core</em></span> code but they must take the project in new directions, by adding specific features to the original work or by amending the existing work. To do this, each coder works on a separate branch, and their changes are merged back into the main branch to integrate their work together later. This workflow is very powerful because it means different coders can work in isolation on their own branch, without affecting each other. However, a problem arises with this approach logistically. Specifically, what happens if the coders take the project in different and contradictory directions and then try to merge those changes together? What happens if both programmers open the same source file and change code differently on the same line? What happens if one uses a <code class="literal">print</code> statement where another uses <code class="literal">Debug.Log</code>? What should Git do when these two divergent branches merge? In this case, a conflict happens, and we must resolve it.</p><p>Let's consider the relatively simple case of a HTML file added to the Master branch in a new Commit, as follows. The text file is as show in the following figure and in later branches the person name will be changed in a conflicting way.</p><p>
</p><div class="mediaobject"><img src="/graphics/9781785880742/graphics/image_06_060.jpg" /></div><p>
</p><p>Creating a text file for version control</p><p>Now add the newly created text file to the Master Branch as a new Commit, and then create two new branches from the latest Commit. This effectively forks the Master branch in two new directions.</p><p>
</p><div class="mediaobject"><img src="/graphics/9781785880742/graphics/image_06_061.jpg" /></div><p>
</p><p>Creating new and divergent branches</p><p>Now double-click each new branch in the branches list to activate the Branch, changing the contents of the project folder to the branch files. And then, for each branch, open the text file and change its contents to create a conflict. For my example, I am changing the person name. For one branch, the name becomes John Doe, and for the other Jane Doodle. After making the change, be sure to Commit the changes to each branch.</p><p>
</p><div class="mediaobject"><img src="/graphics/9781785880742/graphics/image_06_062.jpg" /></div><p>
</p><p>Changing a text file on separate branches in preparation for a merge</p><p>Now let's try merging these two branches (<span class="strong"><strong>Name_01</strong></span> and <span class="strong"><strong>Name_02</strong></span>), with contradictory changes, back into the Master Branch. Start by activating the Master Branch, double-clicking it from the Branches List.</p><p>
</p><div class="mediaobject"><img src="/graphics/9781785880742/graphics/image_06_063.jpg" /></div><p>
</p><p>Activating the Master Branch</p><p>Right-click the first Branch, and then choose Merge to merge the selected branch into the active branch (the Master). When you do this, the Master Branch updates with the new changes. You can confirm this by opening the changed text file and viewing the new text. That's good!</p><p>
</p><div class="mediaobject"><img src="/graphics/9781785880742/graphics/image_06_064.jpg" /></div><p>
</p><p>Merging</p><p>Now let's try merging the Second Branch, with conflicting changes, into the Master! Activate the Master branch, if it's not already activated, and then right-click the second branch, choosing Merge from the context menu.</p><p>
</p><div class="mediaobject"><img src="/graphics/9781785880742/graphics/image_06_065.jpg" /></div><p>
</p><p>Merging the Second Branch into the Master</p><p>After merging the second branch into the Master, a conflict results. This conflict is caused by the discrepancy in the text file, where the same line differs across Commits; one uses the name John Doe, and the other Jane Doodle. A warning message is printed in orange at the top of the Branch history indicating the conflict problem. At this point, the merge is suspended until you provide input about how to resolve the Conflict.</p><p>
</p><div class="mediaobject"><img src="/graphics/9781785880742/graphics/image_06_066.jpg" /></div><p>
</p><p>Merging the Second Branch into the Master</p><p>To resolve the conflict, select the Conflict message in the branch history. On selecting the conflict message, additional properties about the conflict are shown in the Properties Panel.</p><p>
</p><div class="mediaobject"><img src="/graphics/9781785880742/graphics/image_06_067.jpg" /></div><p>
</p><p>Viewing merge conflict details</p><p>From the Properties panel, two conflicts are highlighted. The first conflict is a metadata file generated for the Mac platform (<code class="literal">DS_Store</code>) You may not have this conflict on Windows. For me, this conflict can be resolved by selecting the file in the Properties panel. On clicking the file, a Conflict Resolution Editor is presented. The top two panels show the two conflicting files, presented side by side, and the bottom pane displays how the conflict should be resolved.</p><p>
</p><div class="mediaobject"><img src="/graphics/9781785880742/graphics/image_06_068.jpg" /></div><p>
</p><p>Merge Conflict Resolution Editor</p><p>Resolving a Conflict in Git is about choosing what the output should be from two divergent branches, A and B. One resolution is to choose branch A as the output; and another is to choose branch B. A third possibility is to develop a custom solution where you manually edit the resultant text file, defining what the outcome is. For the metafile <code class="literal">DS_Store</code>, I'll just choose option B. That is, the file included in the merging branch. This will be the output and resolution for this specific conflict. To do this, just check the option B box from the GitKraken interface.</p><p>
</p><div class="mediaobject"><img src="/graphics/9781785880742/graphics/image_06_069.jpg" /></div><p>
</p><p>Choosing option B to resolve a Binary Conflict</p><p>After choosing option B, click the <span class="strong"><strong>Save</strong></span> button to finalize the resolution. This returns us to the main GitKraken interface.</p><p>
</p><div class="mediaobject"><img src="/graphics/9781785880742/graphics/image_06_070.jpg" /></div><p>
</p><p>Resolving a Merge Conflict</p><p>After resolving the conflict, the file is marked as Resolved in the CommitÂ and is also added to the Staged list, ready for Committing to the Master Branch.</p><p>
</p><div class="mediaobject"><img src="/graphics/9781785880742/graphics/image_06_071.jpg" /></div><p>
</p><p>Resolved Conflicts are added to the Staged List of the Commit</p><p>Now let's resolve the outstanding text file conflict, which still remains in the Conflict list. To do this, select the conflicting file by clicking it.</p><p>
</p><div class="mediaobject"><img src="/graphics/9781785880742/graphics/image_06_072.jpg" /></div><p>
</p><p>Selecting an Outstanding Text File Conflict</p><p>Again, the conflict opens inside the Conflict Resolution Editor. We can see from the top two panels, in HTML form, where the conflict occurs between the Commits. GitKraken highlights the conflict area for us.</p><p>
</p><div class="mediaobject"><img src="/graphics/9781785880742/graphics/image_06_073.jpg" /></div><p>
</p><p>Exploring the Merge Conflict in-depth</p><p>The Output Panel displays the default solution that would be used if the Conflict was saved now. If you have GitKraken Pro, you can edit the Output solution with custom text, refining the resolution. But with the free version, you must select between conflicts: Option A or B only, or a combination of both. Here, I'll select Option B again to update the Conflict. Then choose Save to confirm the solution.</p><p>
</p><div class="mediaobject"><img src="/graphics/9781785880742/graphics/image_06_074.jpg" /></div><p>
</p><p>Resolving a Merge Conflict</p><p>Both conflicts have been resolved and can now be added to the Master Branch as a Commit. To do this, click the button Commit and Merge. This now updates the Master Branch with new changes integrating both Branches. In our example, the conflict mostly applied to just one text file, and the conflict existed on just one line in that file. For more complex projects there are likely to be many more conflicts both within a single file and across multiple files, and these should all be resolved carefully on an individual basis.</p><p>
</p><div class="mediaobject"><img src="/graphics/9781785880742/graphics/image_06_075.jpg" /></div><p>
</p><p>Updating the Master Branch using Commit and Merge</p><p>Voila! Great work. We've now resolved all conflicts and staged them to a new Commit added to the Master Branch. In reaching this far we've seen how to create commits on branches, how to create new branches, and how to resolve conflicts between branches during a merge process. Next, we'll see how enhance collaboration by working with Git Repos on a web server.</p></div>