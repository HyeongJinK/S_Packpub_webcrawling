<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch08lvl1sec83"></a>Profiler and performance assessment</h2></div></div><hr /></div><p>The <span class="strong"><strong>Rendering Statistics Window</strong></span> (<span class="strong"><strong>Stats</strong></span> panel) can help confirm whether your game is suffering performance issues. In the first instance, your judgment about performance is normally based on whether you see a tangible problem in-game during testing. Afterwards, the <span class="strong"><strong>Stats</strong></span> panel (such as the FPS statistic) can help confirm whether the identified problem really is related to game performance, as opposed to a scripting bug, or a software conflict. Nevertheless, the <span class="strong"><strong>Stats</strong></span> panel can't tell you exactly what or where the problem is. To help track down the issue, you can use the <span class="strong"><strong>Profiler</strong></span> window, which is accessible from the Unity editor menu, by navigating to<span class="strong"><strong> Window</strong></span> | <span class="strong"><strong>Profiler</strong></span>. Like the <span class="strong"><strong>Stats</strong></span> panel, the <span class="strong"><strong>Profiler</strong></span> measures game performance on the current hardware, that is, the system on which the editor is running:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781785880742/graphics/image_08_005.jpg" /></div><p>
</p><p>Accessing the Unity Profiler from the application menu</p><p>The <span class="strong"><strong>Profiler</strong></span> window initially appears as a free-floating window. For best results, consider docking this window side by side with the <span class="strong"><strong>Game</strong></span> tab, or use a separate monitor for a multi-monitor setup:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781785880742/graphics/image_08_006.jpg" /></div><p>
</p><p>Viewing the Profiler window alongside the Game tab</p><p>Now take your game for a test run and observe the <span class="strong"><strong>Profiler </strong></span>window, which fills instantly with performance data in a graph. The <span class="strong"><strong>Profiler</strong></span> collects information, frame by frame, for as long as the<span class="strong"><strong> Record</strong></span> button is active, and will add its information to the graph in real time. Data is populated on various axes: CPU usage, rendering, memory, audio, physics, and more:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781785880742/graphics/image_08_007.jpg" /></div><p>
</p><p>Recording frame data with the Profiler during Play mode</p><p>For the <span class="strong"><strong>CPU Usage</strong></span> category, we learn a lot about frame computation time, which is important for overall performance and FPS. The horizontal axis (left-to-right) represents frames (with the most recent frame being on the right side), and the vertical axis (up and down) represents frame computation time in milliseconds (and thus higher values represent lower frame rates). For this reason, high peaks or sudden mountains in the graph (excepting loading screens) may represent problem areas, as they coincide with unusually high activity and performance intensity. To find out more information about a specific frame in the graph (such as a high mountain frame), simply click and drag your mouse anywhere in the graph to pick that frame:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781785880742/graphics/image_08_008.jpg" /></div><p>
</p><p>Selecting frames for investigation in the Profiler</p><p>By selecting a frame for further investigation, exploring why the FPS is as low as it is, you can view more information in the <span class="strong"><strong>Overview</strong></span> panel. This breaks down the computational workload for the frame into distinct categories, allowing you to view the expense of each, to further narrow areas of performance intensity. Tasks are ordered by expense in the list, with the most intensive processes listed at the top. On identifying the most expensive, click the expand arrow to reveal further related processes. Unity lists the most important scripts, functions, or resources associated with the selected frame and process. This helps you trace performance spikes to specific functions in code and specific assets:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781785880742/graphics/image_08_009.jpg" /></div><p>
</p><p>Investigating performance spikes</p><p>You can also view specific categories of performance in the graph, such as <span class="strong"><strong>Rendering</strong></span> or <span class="strong"><strong>Physics</strong></span>, by toggling category visibility using the visibility buttons. This doesn't affect the data recorded or collected by the<span class="strong"><strong> Profiler</strong></span>, but only changes how the data is presented, helping you more clearly visualize the performance:</p><p>
</p><div class="mediaobject"><img src="/graphics/9781785880742/graphics/image_08_010.jpg" /></div><p>
</p><p>Toggling performance viewing using the graph visibility buttons</p><p>Like the <span class="strong"><strong>Rendering Statistics</strong></span> window, the Profiler cannot always identify causes of performance problems with certainty , and even when it does identify them, it cannot propose the solution to them. But, nonetheless, the Profiler can be valuable in tracking down problems in code to specific classes and functions, which saves you time tracing the problems manually. In addition to the standard Profiler modes, you can also enable a <span class="strong"><strong>Deep Profile</strong></span> from the <span class="strong"><strong>Profiler</strong></span> toolbar. This mode increases the range of calls, functions, and resources in scripts that can be monitored for even greater detail, but this option is resource heavy and should only be used where essential. More information on the Profiler can be found online here: <a class="ulink" href="https://docs.unity3d.com/Manual/RenderingStatistics.html" target="_blank">https://docs.unity3d.com/Manual/Profiler.html</a>.</p><p>
</p><div class="mediaobject"><img src="/graphics/9781785880742/graphics/image_08_011.jpg" /></div><p>
</p><p>Enabling a Deep Profile</p></div>