<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec15"></a>Diffuse shading</h2></div></div><hr /></div><p>Before starting <a id="id69" class="indexterm"></a>our journey into texture mapping, it is important to understand how diffuse materials work. Certain objects might have a uniform color and smooth surface, but not smooth enough to shine on reflected light. These matte materials are best represented with a Diffuse shader. While in the real world, pure diffuse materials do not exist; Diffuse shaders are relatively cheap to implement and find a large application in games with low-poly aesthetics.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec28"></a>Getting ready</h3></div></div></div><p>There are several ways in which you can create your own Diffuse shader. A quick way is to start with the Standard Shader in Unity 5 and edit it to remove any texture, similarly to what was previously done in <a class="link" href="#" linkend="ch01">Chapter 1</a>, <span class="emphasis"><em>Creating Your First Shader</em></span>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec29"></a>How to do it...</h3></div></div></div><p>Let's start with our <a id="id70" class="indexterm"></a>Standard Shader, and apply the following changes:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><p>Remove all the properties except <code class="literal">_Color</code>:</p><div class="informalexample"><pre class="programlisting">_Color ("Color", Color) = (1,1,1,1)</pre></div></li><li><p>From the <code class="literal">SubShader{}</code> section, remove the <code class="literal">_MainTex</code>, <code class="literal">_Glossiness</code>, and <code class="literal">_Metallic</code> variables. You should not remove the reference to <code class="literal">uv_MainTex</code> as Cg does not allow the <code class="literal">Input</code> struct to be empty. The value will be simply ignored.</p></li><li><p>Remove the content of the <code class="literal">surf()</code> function and replace it with the following:</p><div class="informalexample"><pre class="programlisting">o.Albedo = _Color.rgb;</pre></div></li><li><p>Your shader should look as follows:</p><div class="informalexample"><pre class="programlisting">Shader "CookbookShaders/Diffuse" {
  <span class="strong"><strong>Properties</strong></span> {
    _Color ("Color", Color) = (1,1,1,1)
  }
  SubShader {
    <span class="strong"><strong>Tags</strong></span> { "RenderType"="Opaque" }
    LOD 200
    
    CGPROGRAM
    #pragma surface surf Standard fullforwardshadows
    #pragma target 3.0
    <span class="strong"><strong>struct</strong></span> Input {
      float2 uv_MainTex;
    };
    fixed4 _Color;

    <span class="strong"><strong>void</strong></span> surf (Input IN, inout SurfaceOutputStandard o) {
      o.Albedo = _Color.rgb;
    }
<span class="strong"><strong>    ENDCG</strong></span>
  } 
  FallBack "Diffuse"
}</pre></div></li></ol></div><p>As this shader has been refitted from a Standard Shader, it will use physically-based rendering to simulate how light behaves on your models. If you are trying to achieve a non-photorealistic look, you can change the first <code class="literal">#pragma</code> directive so that it uses <code class="literal">Lambert</code> rather than <code class="literal">Standard</code>. If you do so, you should also replace <code class="literal">SurfaceOutputStandard</code> with <code class="literal">SurfaceOutput</code>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec30"></a>How it works...</h3></div></div></div><p>The way shaders allow you to communicate the rendering properties of your material to their lighting model is <a id="id71" class="indexterm"></a>via a surface output. It is basically a wrapper around all the parameters that the current lighting model needs. It should not surprise you that different lighting models have different surface output structs. The following table shows the three main output structs used in Unity 5 and how they can be used:</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; "><colgroup><col align="left" /><col align="left" /><col align="left" /></colgroup><thead><tr><th style="border-bottom: 0.5pt solid ; " align="left" valign="bottom">
<p>Type of shaders</p>
</th><th style="border-bottom: 0.5pt solid ; " align="left" valign="bottom">
<p>Unity 4</p>
</th><th style="border-bottom: 0.5pt solid ; " align="left" valign="bottom">
<p>Unity 5</p>
</th></tr></thead><tbody><tr><td style="" align="left" valign="top">
<p>Diffuse</p>
</td><td style="" align="left" valign="top">
<p>Any Surface Shader</p>
<p>
<code class="literal">SurfaceOutput</code>
</p>
</td><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Standard</strong></span>
</p>
<p>
<code class="literal">SurfaceOutputStandard</code>
</p>
</td></tr><tr><td style="" align="left" valign="top">
<p>Specular</p>
</td><td style="" align="left" valign="top">
<p>Any Surface Shader</p>
<p>
<code class="literal">SurfaceOutput</code>
</p>
</td><td style="" align="left" valign="top">
<p>
<span class="strong"><strong>Standard (Specular setup)</strong></span>
</p>
<p>
<code class="literal">SurfaceOutputStandardSpecular</code>
</p>
</td></tr></tbody></table></div><p>The <code class="literal">SurfaceOutput</code> <a id="id72" class="indexterm"></a>struct has the following properties:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<code class="literal">fixed3 Albedo;</code>: This is the diffuse color of the material</p></li><li style="list-style-type: disc"><p>
<code class="literal">fixed3 Normal;</code>: This is the tangent space normal, if written</p></li><li style="list-style-type: disc"><p>
<code class="literal">fixed3 Emission;</code>: This is the color of the light emitted by the material (this property is declared as <code class="literal">half3</code> in the Standard Shaders)</p></li><li style="list-style-type: disc"><p>
<code class="literal">fixed Alpha;</code>: This is the transparency of the material</p></li><li style="list-style-type: disc"><p>
<code class="literal">half Specular;</code>: This is the specular power from <code class="literal">0</code> to <code class="literal">1</code>
</p></li><li style="list-style-type: disc"><p>
<code class="literal">fixed Gloss;</code>: This is the specular intensity</p></li></ul></div><p>The <code class="literal">SurfaceOutputStandard</code> <a id="id73" class="indexterm"></a>struct has the following properties:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<code class="literal">fixed3 Albedo;</code>: This is the base color of the material (whether it's diffuse or specular)</p></li><li style="list-style-type: disc"><p>
<code class="literal">fixed3 Normal;</code>
</p></li><li style="list-style-type: disc"><p>
<code class="literal">half3 Emission;</code>: This property is declared as <code class="literal">half3</code>, while it was defined as <code class="literal">fixed3</code> in <code class="literal">SurfaceOutput</code>
</p></li><li style="list-style-type: disc"><p>
<code class="literal">fixed Alpha;</code>
</p></li><li style="list-style-type: disc"><p>
<code class="literal">half Occlusion;</code>: This <a id="id74" class="indexterm"></a>is the occlusion (default <code class="literal">1</code>)</p></li><li style="list-style-type: disc"><p>
<code class="literal">half Smoothness;</code>: This is the smoothness (<code class="literal">0</code> = rough, <code class="literal">1</code> = smooth)</p></li><li style="list-style-type: disc"><p>
<code class="literal">half Metallic;</code>: <code class="literal">0</code> = non-metal, <code class="literal">1</code>= metal</p></li></ul></div><p>The <a id="id75" class="indexterm"></a>
<code class="literal">SurfaceOutputStandardSpecular</code> struct has the following properties:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p>
<code class="literal">fixed3 Albedo;</code>.</p></li><li style="list-style-type: disc"><p>
<code class="literal">fixed3 Normal;</code>.</p></li><li style="list-style-type: disc"><p>
<code class="literal">half3 Emission;</code>.</p></li><li style="list-style-type: disc"><p>
<code class="literal">fixed Alpha;</code>.</p></li><li style="list-style-type: disc"><p>
<code class="literal">half Occlusion;</code>.</p></li><li style="list-style-type: disc"><p>
<code class="literal">half Smoothness;</code>.</p></li><li style="list-style-type: disc"><p>
<code class="literal">fixed3 Specular;</code>: This is the specular color. This is very different from the <code class="literal">Specular</code> property in <code class="literal">SurfaceOutput</code> as it allows specifying a color rather than a single value.</p></li></ul></div><p>Using a Surface Shader <a id="id76" class="indexterm"></a>correctly is a matter of initializing the surface output with the correct values.</p></div></div>