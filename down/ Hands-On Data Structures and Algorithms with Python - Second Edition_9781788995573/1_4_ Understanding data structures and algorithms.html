<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch01lvl1sec12"></a>Understanding data structures and algorithms</h2></div></div><hr /></div><p>Algorithms and data structures <span>are</span><a id="id325644861" class="indexterm"></a> the most fundamental concepts in computing. They are the main building blocks from which complex software is built. Having an understanding of <span>these</span><a id="id325644852" class="indexterm"></a> foundation concepts is extremely important in software design and this involves the following three characteristics:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">How algorithms manipulate information contained within data structures</li><li style="list-style-type: disc">How data is arranged in memory</li><li style="list-style-type: disc">What the performance characteristics of particular data structures are</li></ul></div><p>In this book, we will examine the topic from several perspectives. Firstly, we will look at the fundamentals of the Python programming language from the perspective of data structures and algorithms. Secondly, it is important that we have the correct mathematical tools. We need to understand the fundamental concepts of computer science and for this we need mathematics. By taking a heuristic approach, developing some guiding principles means that, in general, we do not need any more than high school mathematics to understand the principles of these key ideas.</p><p>Another important aspect is an evaluation. Measuring the <span>performance</span><a id="id325578030" class="indexterm"></a> of algorithms requires an understanding of how the increase in data size affects operations on that data. When we are working on large datasets or real-time applications, it is essential that our algorithms and structures are as efficient as they can be.</p><p>Finally, we need a strong experimental design strategy. Being able to conceptually translate a real-world problem into the algorithms and data structures of a programming language involves being able to understand the important elements of a problem and a methodology for mapping these elements to programming structures.</p><p> </p><p> </p><p>To better understand the importance of <span>algorithmic</span><a id="id326312696" class="indexterm"></a> thinking, let's consider a real-world example. Imagine we are at an unfamiliar market and we are given the task of purchasing a list of items. We assume that the market is laid out randomly, each vendor sells a random subset of items, and some of these items may be on our list. Our aim is to minimize the price for each item we buy, as well as minimize the time spent at the market. One way to approach this problem is to write an algorithm like the following:</p><p>1. Does the vendor have items that are on our list and the cost is less than a predicted cost for that item?</p><p>2. If yes, buy and remove from list; if no, move on to the next vendor.</p><p>3. If no more vendors, end.</p><p>This is a simple iterator, with a decision and an action. If we have to implement this using programming language, we would need data structures to define and store in memory both the list of items we want to buy and the list of items the vendor is selling. We would need to determine the best way of matching items in each list and we need some sort of logic to decide whether to purchase or not.</p><p>There are several observations that we can make regarding this algorithm. <span>Firstly, since the cost calculation is based on a prediction, we don't know what the real cost is. As such, we do not purchase an item because we underpredicted the cost of the item, and we reach the end of the market with items remaining on our list.</span> To handle this situation, we need an effective way of storing the data so that we can efficiently backtrack to the vendor with the lowest cost.</p><p>Also, we need to understand the time taken to compare items on our shopping list with the items being sold by each vendor. It is important because as the number of items on our shopping list, or the number of items sold by each vendor, increases, searching for an item takes a lot more time. The order in which we search through items and the shape of the data structures can make a big difference to the time it takes to do a search. Clearly, we would like to arrange our list as well as the order we visit each vendor in such a way that we minimize the search time.</p><p>Also, consider what happens when we change the buy condition to purchase at the <span class="emphasis"><em>cheapest</em></span> price, not just the below-average predicted price. This changes the problem entirely. Instead of sequentially going from one vendor to the next, we need to traverse the market once and, with this knowledge, we can order our shopping list with regards to the vendors we want to visit.</p><p> </p><p> </p><p>Obviously, there are many more subtleties involved in translating a real-world problem into an abstract construct such as a programming language. For example, as we progress through the market, our knowledge of the cost of a product improves, so our predicted average-price variable becomes more accurate until, by the last stall, our knowledge of the market is perfect. Assuming any kind of backtracking algorithm incurs a cost, we can see cause to review our entire strategy. Conditions such as high price variability, the size and shape of our data structures, and the cost of backtracking all determine the most appropriate solution. The whole discussion clearly demonstrates the importance of data structures and algorithms in building a complex solution.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec4"></a>Python for data</h3></div></div></div><p>Python has several built-in data structures, including lists, dictionaries, and sets, which we use to build customized objects. In addition, there are a number of internal libraries, such as collections and  math object, which  allow us to create more advanced <span>structures</span><a id="id326469698" class="indexterm"></a> as well as perform calculations on those structures. Finally, there are the external libraries such as those found in the SciPy packages. These allow us to perform a range of advanced data tasks such as logistic and linear regression, visualization, and mathematical calculations, <span>such as</span> operations on matrices and vectors. External libraries can be very useful for an out-of-the-box solution. However, we must also be aware that there is often a performance penalty compared to building customized objects from the ground up. By learning how to code these objects ourselves, we can target them to specific tasks, making them more efficient. This is not to exclude the role of external libraries and we will look at this in <a class="link" href="#" linkend="ch13">Chapter 12</a><span class="emphasis"><em>, Design Techniques and Strategies.</em></span></p><p>To begin, we will take an overview of some of the key language features that make Python such a great choice for data programming.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec5"></a>The Python environment</h3></div></div></div><p>Python is one of the <span>most</span><a id="id326469655" class="indexterm"></a> popular and extensively used programming languages all over the world due to its <span class="strong"><strong>readability and flexibility</strong></span>.<span class="strong"><strong> </strong></span>A <span>feature of the Python environment is its interactive console, allowing you to both use Python as a desktop-programmable</span> calculator and also as an environment to write and test snippets of code.</p><p> </p><p> </p><p>The <code class="literal">read...evaluate...print</code> loop of the console is a very convenient way to interact <span>with</span><a id="id326581776" class="indexterm"></a> a larger code base, such as to run functions and methods or to create instances of classes. This is one of the major advantages of Python over compiled languages such as C/C++ or Java, where the <code class="literal">write...compile...test...recompile</code> cycle can increase development time considerably compared to Python's <code class="literal">read...evaluate...print</code> loop. Being able to type in expressions and get an immediate response can greatly speed up data science tasks.</p><p>There are some excellent distributions of Python apart from the official CPython version. Two of the <span>most</span><a id="id326633921" class="indexterm"></a> popular are available at:  <span>Anaconda</span> (<a class="ulink" href="https://www.continuum.io/downloads" target="_blank">h</a><a class="ulink" href="https://www.continuum.io/downloads" target="_blank">t</a><a class="ulink" href="https://www.continuum.io/downloads" target="_blank">t</a><a class="ulink" href="https://www.continuum.io/downloads" target="_blank">p</a><a class="ulink" href="https://www.continuum.io/downloads" target="_blank">s</a><a class="ulink" href="https://www.continuum.io/downloads" target="_blank">://w</a><a class="ulink" href="https://www.continuum.io/downloads" target="_blank">w</a><a class="ulink" href="https://www.continuum.io/downloads" target="_blank">w</a><a class="ulink" href="https://www.continuum.io/downloads" target="_blank">.</a><a class="ulink" href="https://www.continuum.io/downloads" target="_blank">c</a><a class="ulink" href="https://www.continuum.io/downloads" target="_blank">o</a><a class="ulink" href="https://www.continuum.io/downloads" target="_blank">n</a><a class="ulink" href="https://www.continuum.io/downloads" target="_blank">t</a><a class="ulink" href="https://www.continuum.io/downloads" target="_blank">i</a><a class="ulink" href="https://www.continuum.io/downloads" target="_blank">n</a><a class="ulink" href="https://www.continuum.io/downloads" target="_blank">u</a><a class="ulink" href="https://www.continuum.io/downloads" target="_blank">u</a><a class="ulink" href="https://www.continuum.io/downloads" target="_blank">m</a><a class="ulink" href="https://www.continuum.io/downloads" target="_blank">.</a><a class="ulink" href="https://www.continuum.io/downloads" target="_blank">i</a><a class="ulink" href="https://www.continuum.io/downloads" target="_blank">o</a><a class="ulink" href="https://www.continuum.io/downloads" target="_blank">/d</a><a class="ulink" href="https://www.continuum.io/downloads" target="_blank">o</a><a class="ulink" href="https://www.continuum.io/downloads" target="_blank">w</a><a class="ulink" href="https://www.continuum.io/downloads" target="_blank">n</a><a class="ulink" href="https://www.continuum.io/downloads" target="_blank">l</a><a class="ulink" href="https://www.continuum.io/downloads" target="_blank">o</a><a class="ulink" href="https://www.continuum.io/downloads" target="_blank">a</a><a class="ulink" href="https://www.continuum.io/downloads" target="_blank">d</a><a class="ulink" href="https://www.continuum.io/downloads" target="_blank">s</a>) and <span>Canopy</span><a id="id325844252" class="indexterm"></a> (<a class="ulink" href="https://www.enthought.com/products/canopy/" target="_blank">h</a><a class="ulink" href="https://www.enthought.com/products/canopy/" target="_blank">t</a><a class="ulink" href="https://www.enthought.com/products/canopy/" target="_blank">t</a><a class="ulink" href="https://www.enthought.com/products/canopy/" target="_blank">p</a><a class="ulink" href="https://www.enthought.com/products/canopy/" target="_blank">s</a><a class="ulink" href="https://www.enthought.com/products/canopy/" target="_blank">://w</a><a class="ulink" href="https://www.enthought.com/products/canopy/" target="_blank">w</a><a class="ulink" href="https://www.enthought.com/products/canopy/" target="_blank">w</a><a class="ulink" href="https://www.enthought.com/products/canopy/" target="_blank">.</a><a class="ulink" href="https://www.enthought.com/products/canopy/" target="_blank">e</a><a class="ulink" href="https://www.enthought.com/products/canopy/" target="_blank">n</a><a class="ulink" href="https://www.enthought.com/products/canopy/" target="_blank">t</a><a class="ulink" href="https://www.enthought.com/products/canopy/" target="_blank">h</a><a class="ulink" href="https://www.enthought.com/products/canopy/" target="_blank">o</a><a class="ulink" href="https://www.enthought.com/products/canopy/" target="_blank">u</a><a class="ulink" href="https://www.enthought.com/products/canopy/" target="_blank">g</a><a class="ulink" href="https://www.enthought.com/products/canopy/" target="_blank">h</a><a class="ulink" href="https://www.enthought.com/products/canopy/" target="_blank">t</a><a class="ulink" href="https://www.enthought.com/products/canopy/" target="_blank">.</a><a class="ulink" href="https://www.enthought.com/products/canopy/" target="_blank">c</a><a class="ulink" href="https://www.enthought.com/products/canopy/" target="_blank">o</a><a class="ulink" href="https://www.enthought.com/products/canopy/" target="_blank">m</a><a class="ulink" href="https://www.enthought.com/products/canopy/" target="_blank">/p</a><a class="ulink" href="https://www.enthought.com/products/canopy/" target="_blank">r</a><a class="ulink" href="https://www.enthought.com/products/canopy/" target="_blank">o</a><a class="ulink" href="https://www.enthought.com/products/canopy/" target="_blank">d</a><a class="ulink" href="https://www.enthought.com/products/canopy/" target="_blank">u</a><a class="ulink" href="https://www.enthought.com/products/canopy/" target="_blank">c</a><a class="ulink" href="https://www.enthought.com/products/canopy/" target="_blank">t</a><a class="ulink" href="https://www.enthought.com/products/canopy/" target="_blank">s</a><a class="ulink" href="https://www.enthought.com/products/canopy/" target="_blank">/c</a><a class="ulink" href="https://www.enthought.com/products/canopy/" target="_blank">a</a><a class="ulink" href="https://www.enthought.com/products/canopy/" target="_blank">n</a><a class="ulink" href="https://www.enthought.com/products/canopy/" target="_blank">o</a><a class="ulink" href="https://www.enthought.com/products/canopy/" target="_blank">p</a><a class="ulink" href="https://www.enthought.com/products/canopy/" target="_blank">y</a><a class="ulink" href="https://www.enthought.com/products/canopy/" target="_blank">/</a>). Most distributions come with their own developer environments. Both Canopy and Anaconda include libraries for scientific, machine learning, and other data applications. Most distributions come with an editor.</p><p>There are also a number of implementations of the Python console, apart from the CPython version. Most notable among these is the IPython/Jupyter <span>platform which is based on </span>a web-based computational environment.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec6"></a>Variables and expressions</h3></div></div></div><p>To solve a real-world problem through algorithm implementation, <span>we first have to select the variables</span> and then <span>apply</span><a id="id325911781" class="indexterm"></a> the operations on these variables. Variables are labels that are attached to the objects. Variables are not objects nor containers for objects; they only act as a <span>pointer</span><a id="id325911787" class="indexterm"></a> or a reference to the object. For example, consider the following code:</p><div class="mediaobject"><img src="/graphics/9781788995573/graphics/c4889e62-2386-4d06-be7a-a0609bcc2173.png" /></div><p>Here, we have created a variable, <code class="literal">a</code>, that points to a list object. We create another variable, <code class="literal">b</code>, that points to this same list object. When we append an element to this list object, this change is reflected in both <code class="literal">a</code> and <code class="literal">b</code>.</p><p> </p><p>In Python, <span>variable</span><a id="id325915546" class="indexterm"></a> names are attached to different data types during the program execution; it is not required to first declare the datatype for the variables. Each value is of a type (for example, a string or integer); however, the variable name that points to this value does not have a specific type. More specifically, <span>variables point to an object</span> that can change their type depending on the kind of values assigned to them. Consider the following example: </p><div class="mediaobject"><img src="/graphics/9781788995573/graphics/604214e3-2331-4029-bb80-a25af1d7c8b1.png" /></div><p>In the preceding code example, the type of <code class="literal">a</code> is changed from <code class="literal">int</code> to <code class="literal">float</code>, depending upon the value stored in the variable.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec7"></a>Variable scope</h3></div></div></div><p>Scoping rules of variables inside <span>functions</span> are important. Whenever a function executes, a local environment (<span>namespace</span>) is created. This local namespace contains all the <span>variables</span><a id="id325915596" class="indexterm"></a> and parameter names that are assigned by the functions. Whenever a function is called, Python Interpreter first looks into the local namespace that is the function itself—if no match is found, then it looks <span>at</span> the global namespace. If the name is still not found, then it searches in the built-in namespace. If it is not found, then the <span>interpreter</span> would raise a<code class="literal">NameError</code>exception. Consider the following code:</p><pre class="programlisting">a=15;b=25
def my_function():
  global a 
  a=11;b=21

my_function() 
print(a)  #prints 11 
print(b)  #prints 25</pre><p> </p><p> </p><p>In the preceding code, we define two <code class="literal">global</code> variables. We need to tell the interpreter, using the keyword <code class="literal">global</code>, that inside the function we are referring to a <code class="literal">global</code> variable. When we change this <span>variable</span><a id="id325950115" class="indexterm"></a> to <code class="literal">11</code>, these changes are reflected in the global scope. However, the <code class="literal">b</code> variable we set to <code class="literal">21</code> is local to the function, and any changes made to it inside the function are not reflected in the global scope. When we run the function and print <code class="literal">b</code>, we see that it retains its global value.</p><p>In addition, let's consider another interesting example:</p><pre class="programlisting"><span class="strong"><strong>&gt;&gt;&gt; </strong></span>a = 10
<span class="strong"><strong>&gt;&gt;&gt; </strong></span>def my_function():
<span class="strong"><strong>... </strong></span>    print(a)
<span class="strong"><strong>&gt;&gt;&gt; </strong></span>my_function ()
10</pre><p>The code works, and gives an output of <code class="literal">10</code>, but see the following code:</p><pre class="programlisting"><span class="strong"><strong>&gt;&gt;&gt; </strong></span>a = 10 
<span class="strong"><strong>&gt;&gt;&gt; </strong></span>def my_function():
<span class="strong"><strong>... </strong></span>    print(a)
<span class="strong"><strong>... </strong></span>    a= a+1 
<span class="strong"><strong>&gt;&gt;&gt;</strong></span> my_function()

UnboundLocalError: local variable 'a' referenced before assignment</pre><p>The preceding code gives an error because assignment to a variable in a scope makes that variable a local variable to that scope. <span>In the preceding example</span>, in the <code class="literal">my_function()</code> assignment to the <code class="literal">a</code> variable, the compiler assumes <code class="literal">a</code> as a local variable, and that is why the earlier <code class="literal">print()</code> function tries to print a local variable <code class="literal"><span>a</span></code>, which is not initialized as a local variable; thus, it gives an error. It can be resolved by accessing the outer scope variable by declaring it as <code class="literal">global</code>:</p><pre class="programlisting"><span class="strong"><strong>&gt;&gt;&gt; </strong></span>a = 10
<span class="strong"><strong>&gt;&gt;&gt; </strong></span><span class="strong"><strong>def</strong></span> my_function():
<span class="strong"><strong>... </strong></span><span class="strong"><strong>global</strong></span> a
<span class="strong"><strong>... </strong></span>    print(a)
<span class="strong"><strong>... </strong></span>    a = a+1
<span class="strong"><strong>&gt;&gt;&gt; </strong></span>my_function()
10</pre><p>So, in Python, the variables that are referenced inside a function are global implicitly, and if the <code class="literal">a</code> variable is assigned a value anywhere inside the function's body, it is assumed to be a local variable unless explicitly declared as global. </p></div></div>