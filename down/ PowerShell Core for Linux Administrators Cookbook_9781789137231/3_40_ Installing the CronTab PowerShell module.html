<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec47"></a>Installing the CronTab PowerShell module</h2></div></div><hr /></div><p>In this recipe, we will discuss the <span>installation</span><a id="id326204284" class="indexterm"></a> details of a PowerShell module to manage Cron jobs using PowerShell on a Linux machine.</p><p>There are times when there is a need for performing administrative tasks or scheduling a script to execute automatically at a given time. Linux distributions, by default, come with a scheduling utility, called CronTab, which allows any given tasks to be run automatically in the background at a given time. Cron is a time-based scheduler program. It generates events based on the definition in the <code class="literal">crontab</code> file.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec130"></a>How to do it…</h3></div></div></div><p>The PowerShell <code class="literal">crontab</code> wrapper module is not available in the PowerShell repository as yet. You must download the files manually to install the module. The simplest way is to clone the PowerShell repository and install the module from within its <code class="literal">demos</code> directory.</p><p> </p><p> </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note36"></a>Note</h3><p>If you would rather only install the CronTab module alone, download the <code class="literal">&lt;repo&gt;/demos/crontab</code> directory manually. Then, start PowerShell as a super-user and navigate to <code class="literal">crontab</code>. Continue from step 4, running the <code class="literal">Import-Module</code> cmdlet to import the <code class="literal">CronTab</code> module.</p></div><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Clone the PowerShell repository on to your computer:</li></ol></div><pre class="programlisting"><span class="strong"><strong>$ mkdir ~/code</strong></span>
<span class="strong"><strong>$ cd ./code/</strong></span>
<span class="strong"><strong>$ git clone https://github.com/PowerShell/PowerShell.git</strong></span></pre><div class="orderedlist"><ol class="orderedlist arabic" start="2" type="1"><li>Start <code class="literal">pwsh</code> as a super-user.</li><li>Go to the <code class="literal">demos/crontab/CronTab</code> directory within the repository. This is where the module manifest is placed:</li></ol></div><pre class="programlisting"><span class="strong"><strong>PS&gt; Set-Location ~/code/PowerShell/demos/crontab</strong></span></pre><div class="orderedlist"><ol class="orderedlist arabic" start="4" type="1"><li>Use the <code class="literal">Import-Module</code>cmdlet on the module manifest to import the module:</li></ol></div><pre class="programlisting"><span class="strong"><strong>PS&gt; Import-Module -Name ./CronTab/CronTab.psd1</strong></span></pre><div class="orderedlist"><ol class="orderedlist arabic" start="5" type="1"><li>To list the components of the <code class="literal">CronTab</code> module, use the <code class="literal">Get-Module</code><span>cmdlet</span>:</li></ol></div><pre class="programlisting"><span class="strong"><strong>PS&gt; Get-Module -Name CronTab | Format-List</strong></span></pre><div class="mediaobject"><img src="/graphics/9781789137231/graphics/47794cd3-e0b6-4411-9c53-6ef2c3c42b34.png" /></div><p> </p><div class="orderedlist"><ol class="orderedlist arabic" start="6" type="1"><li><p>To list the available command types of the <code class="literal">CronTab</code> module, use the <code class="literal">Get-Command</code> cmdlet<span>:</span></p></li></ol></div><pre class="programlisting"><span class="strong"><strong><span>PS&gt; Get-Command -Module CronTab</span></strong></span></pre><div class="mediaobject"><img src="/graphics/9781789137231/graphics/58b70c33-ad8a-4081-b734-a25bf22eb611.png" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec131"></a>How it works…</h3></div></div></div><p>When you download the CronTab module, the following files get copied to the CronTab folder from the URL mentioned in the recipe and these files contain the module data:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><code class="literal"><span>onTCrab.ps1xml</span></code></li><li style="list-style-type: disc"><code class="literal">CronTab.psd1</code></li><li style="list-style-type: disc"><code class="literal">CronTab.psm1</code></li></ul></div><p>The <code class="literal">Import-Module</code> cmdlet registers the cmdlets available in the <span>module</span><a id="id325905964" class="indexterm"></a> into the PowerShell session and makes the module ready for use. The <code class="literal"><span>Import-Module</span></code> cmdlet is run against the module manifest, which is the <code class="literal">psd1</code> file. </p><p>When you run the <code class="literal">Get-Command</code> cmdlet, you get a list of all of the cmdlets available in the module.</p></div></div>