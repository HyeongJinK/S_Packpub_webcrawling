<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch14lvl1sec152"></a>Installing and configuring OpenSSH on Linux</h2></div></div><hr /></div><p>In this recipe, we'll look at <span>how</span><a id="id326071481" class="indexterm"></a> to install OpenSSH and how to <span>configure</span><a id="id326071465" class="indexterm"></a> parameters in the <code class="literal">sshd_configure</code> file. Most Linux distributions come with an SSH server <span>already</span><a id="id325913575" class="indexterm"></a> baked in. You don't need to do this if you've <span>already</span><a id="id325913513" class="indexterm"></a> installed an SSH server. </p><p> </p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch14lvl2sec386"></a>Getting ready</h3></div></div></div><p>To get started, install the latest PowerShell 6 build from GitHub (<a class="ulink" href="https://docs.microsoft.com/en-us/powershell/scripting/setup/installing-powershell-core-on-linux?view=powershell-6" target="_blank">https://docs.microsoft.com/en-us/powershell/scripting/setup/installing-powershell-core-on-linux?view=powershell-6</a>). Next, install the OpenSSH server package on Linux.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch14lvl2sec387"></a>How to do it…</h3></div></div></div><p>Let's dive deep into the installation steps and procedures to configure SSH Server on Linux:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>To install Ubuntu SSH, run the following command:</li></ol></div><pre class="programlisting"><span class="strong"><strong>$ sudo apt install openssh-client openssh-server</strong></span>
</pre><div class="orderedlist"><ol class="orderedlist arabic" start="2" type="1"><li>Next, edit the <code class="literal">sshd</code> configuration file using the <code class="literal">vi</code> editor or any other available editors:</li></ol></div><pre class="programlisting"><span class="strong"><strong># vi /etc/ssh/sshd_config</strong></span></pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note83"></a>Note</h3><p>To edit the <code class="literal">/etc/ssh/sshd_config</code> file on Linux, log in to the terminal with root credentials and navigate to the <code class="literal">sshd_config</code> file located under the configuration directory.</p></div><div class="orderedlist"><ol class="orderedlist arabic" start="3" type="1"><li>Enable <code class="literal">PasswordAuthentication</code>:</li></ol></div><pre class="programlisting">PasswordAuthentication yes</pre><div class="orderedlist"><ol class="orderedlist arabic" start="4" type="1"><li>Enable the optional <code class="literal">PubKeyAuthentication</code>:</li></ol></div><pre class="programlisting">PubKeyAuthentication yes</pre><div class="orderedlist"><ol class="orderedlist arabic" start="5" type="1"><li>Add the following PowerShell Subsystem entry:</li></ol></div><pre class="programlisting">Subsystem powershell /usr/bin/pwsh -sshs -NoLogo -NoProfile</pre><div class="orderedlist"><ol class="orderedlist arabic" start="6" type="1"><li>Restart the <code class="literal">sshd</code> service:</li></ol></div><pre class="programlisting"><span class="strong"><strong>$ sudo service sshd restart</strong></span></pre><p> </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch14lvl2sec388"></a>How it works…</h3></div></div></div><p>The installation is pretty simple and straightforward. If you're in the Debian world (Ubuntu or Mint), use <code class="literal">apt</code>. If you're in the Red Hat world, which includes CentOS and Fedora, use <code class="literal">yum</code>. In this case, the host is Ubuntu, so run the <code class="literal">sudo apt install OpenSSH-Server</code> command to install the OpenSSH Server package and use <code class="literal">sudo apt install OpenSSH -Client</code> to install the OpenSSH client.</p><p>The next step is to edit the <code class="literal">sshd_config</code> file. I would recommend reading the previous recipe to get a strong hold of configuring OpenSSH on various Linux distros. Type in <code class="literal">vi /etc/ssh/sshd_config</code>, which will open up the SSH daemon configuration file. If you're not using the root user, you'll need to use sudo for this.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch14lvl2sec389"></a>There's more…</h3></div></div></div><p><span>The one recommended place to start SSH troubleshooting steps is the Ubuntu community for SSH, which you can find at </span><span><a class="ulink" href="https://help.ubuntu.com/community/SSH" target="_blank">help.ubuntu.com/community/SSH</a>.</span></p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch14lvl2sec390"></a>See also</h3></div></div></div><p>For detailed information about the configuration of <code class="literal">sshd_config</code>, refer to the previous recipe, <span class="emphasis"><em>Configuring OpenSSH using sshd_config on Windows</em></span>.</p></div></div>