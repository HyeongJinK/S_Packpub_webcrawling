<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch15lvl1sec164"></a>Azure Cloud Shell in action</h2></div></div><hr /></div><p>At Build 2017, Microsoft announced the new <span>Azure</span><a id="id325585862" class="indexterm"></a> Cloud Shell, built into the Azure Portal, which made it easier than ever to use Azure PowerShell. With the Cloud Shell, you don't have to work around copying-and-pasting tokens to authenticate yourself. Also, it is always there. It even provides you with storage so that you can store your scripts.</p><p>The following features are some of its highlights:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">Browser-based integration on the Azure portal</li><li style="list-style-type: disc"> A choice between Bash and PowerShell consoles</li><li style="list-style-type: disc">It's a lightweight tool that has multiple access points from various platforms, such as the following:
<div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><a class="ulink" href="http://portal.azure.com" target="_blank">portal.azure.com</a></li><li style="list-style-type: disc"><a class="ulink" href="http://shell.azure.com" target="_blank">shell.azure.com</a></li><li style="list-style-type: disc">Azure CLI</li><li style="list-style-type: disc">Azure mobile app</li><li style="list-style-type: disc">VS Code Azure Extension</li></ul></div></li><li style="list-style-type: disc">Loads all Azure-related modules</li><li style="list-style-type: disc">Storage support</li></ul></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch15lvl2sec426"></a>Getting ready</h3></div></div></div><p>To get started with PowerShell within the Azure Portal, go to <a class="ulink" href="https://portal.azure.com" target="_blank">https://portal.azure.com</a> and register yourself for a free trial if you don't have one already. Next, click on the Cloud Shell icon on the top-right, next to the notifications (bell) icon.</p><p>Azure will ask you to create a storage account and a file share. Create one that will help you store PowerShell-related content. After you have created your storage account, your Cloud Shell will launch.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note87"></a>Note</h3><p>You will be charged for the non-trial subscription as per how much you use it.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch15lvl2sec427"></a>How to do it…</h3></div></div></div><p>To navigate the Azure Cloud Shell, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Click the Cloud Shell icon in the top navigation bar of the Azure portal; select either <strong class="userinput"><code>Bash</code></strong> or <strong class="userinput"><code>PowerShell</code></strong>.</li><li>Click on the <strong class="userinput"><code>Advanced</code></strong> link to choose from the available subscriptions to create storage account and file share required for local mount.</li><li>Azure requires a storage account and a file share within that so that you can store content pertaining to the Cloud Shell. Therefore, choose a location that is closest to you and then enter the names of the storage account and the file share. If they don't exist, they will be created at this step.</li><li>If you chose <span class="strong"><strong>Bash</strong></span>, type <code class="literal">pwsh</code> to open the PowerShell Core console:</li></ol></div><div class="mediaobject"><img src="/graphics/9781789137231/graphics/e0169c84-b5d2-4916-b16f-3b7b6f144bcc.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="5" type="1"><li>You can run PowerShell commands in the Cloud Shell, just as you would run them on the console:</li></ol></div><pre class="programlisting"><span class="strong"><strong>PS&gt; Get-AzureRmVM</strong></span></pre><div class="orderedlist"><ol class="orderedlist arabic" start="6" type="1"><li>You can navigate the Azure resources as filesystem objects using <code class="literal">dir</code> or <code class="literal">ls</code> and <code class="literal">cd</code>.</li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch15lvl2sec428"></a>How it works…</h3></div></div></div><p>Azure Cloud Shell gives you the flexibility of choosing the shell experience that best suits the way you work. Linux users can opt for the <strong class="userinput"><code>Bash</code></strong> or the <strong class="userinput"><code>PowerShell</code></strong> consoles. You can run PowerShell cmdlets, navigate and manage resources, and run and save scripts on the Cloud Shell. The <code class="literal">Azure</code> PowerShell provider exposes data stores in a <span>hierarchical</span><a id="id325905963" class="indexterm"></a> manner (just like filesystem objects, as seen in the <span class="emphasis"><em>Listing the various providers in PowerShell</em></span> recipe in <a class="link" href="#" linkend="ch01">Chapter 1</a>, <span class="emphasis"><em>Introducing PowerShell Core</em></span>). In other words, the data in your data store can be treated like files and directories so that you can navigate them using the <code class="literal">cd</code> or <code class="literal">dir</code> commands.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch15lvl2sec429"></a>See also</h3></div></div></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">The <span class="emphasis"><em>Listing various providers in PowerShell</em></span> recipe, from <a class="link" href="#" linkend="ch01">Chapter 1</a>, <span class="emphasis"><em>Introducing PowerShell Core.</em></span></li><li style="list-style-type: disc">Refer to the Cloud shell overview (<a class="ulink" href="https://docs.microsoft.com/en-us/azure/cloud-shell/overview" target="_blank">https://docs.microsoft.com/en-us/azure/cloud-shell/overview</a>) documentation for more information.</li></ul></div></div></div>