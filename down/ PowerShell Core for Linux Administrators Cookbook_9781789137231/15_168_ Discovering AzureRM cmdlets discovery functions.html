<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch15lvl1sec163"></a>Discovering AzureRM cmdlets discovery functions</h2></div></div><hr /></div><p>In this recipe, we will discuss the steps for managing Azure resources or services using <span class="strong"><strong>Azure Resource Manager</strong></span> (<span class="strong"><strong>ARM)</strong></span> PowerShell cmdlets. We will use the discovery cmdlets to list out the Azure <span>cmdlets</span><a id="id325906071" class="indexterm"></a> using keywords or patterns.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch15lvl2sec424"></a>How to do it…</h3></div></div></div><p>Getting the Azure cmdlets is a relatively simple task. For the benefit of those who came directly to this chapter, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Run the following command, which is a chain of <code class="literal">Get-Command</code>, <code class="literal">Group-Object</code>, <span class="strong"><strong><code class="literal">Sort-Object</code></strong></span>, and <code class="literal">Format-Table</code> cmdlets, to group all of the available AzureRM cmdlets by verbs:</li></ol></div><pre class="programlisting"><span class="strong"><strong>PS&gt; Get-Command * -Type Cmdlet -Module AzureRM.Net* | Group-Object -Property Verb | Sort-Object Count -Descending | Format-Table -AutoSize</strong></span></pre><div class="mediaobject"><img src="/graphics/9781789137231/graphics/8a22e634-4188-4aab-826f-5d979f9a643c.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="2" type="1"><li>To get a detailed synopsis of the cmdlets, use the following PowerShell script. In the following example, the details of <code class="literal">Login-AzureRmAccount</code> are shown:</li></ol></div><pre class="programlisting"><span class="strong"><strong>PS&gt; Get-Command Login-Azure* -Module AzureRM* | ForEach-Object {</strong></span>
<span class="strong"><strong>[pscustomobject] @{</strong></span>
<span class="strong"><strong>'Name' = $_.Name</strong></span>
<span class="strong"><strong>'Description' = (Get-Help $_.Name).Synopsis</strong></span>
<span class="strong"><strong>}} | Format-Table -Wrap</strong></span>

Name Desc
---- ----
Login-AzureRmAccount
                    Connect-AzureRmAccount [-Environment &lt;string&gt;] [-TenantId &lt;string&gt;] [-Subscription &lt;string&gt;] [-ContextName &lt;string&gt;] [-Force] [-Scope &lt;ContextModificationScope&gt;] [-DefaultProfile &lt;IAzureContextContainer&gt;] [-WhatIf]
                     [-Confirm] [&lt;CommonParameters&gt;]

                     Connect-AzureRmAccount -Credential &lt;pscredential&gt; -ServicePrincipal -TenantId &lt;string&gt; [-Environment &lt;string&gt;] [-Subscription &lt;string&gt;] [-ContextName &lt;string&gt;] [-Force] [-Scope &lt;ContextModificationScope&gt;]
                     [-DefaultProfile &lt;IAzureContextContainer&gt;] [-WhatIf] [-Confirm] [&lt;CommonParameters&gt;]

                     Connect-AzureRmAccount -CertificateThumbprint &lt;string&gt; -ApplicationId &lt;string&gt; -ServicePrincipal -TenantId &lt;string&gt; [-Environment &lt;string&gt;] [-Subscription &lt;string&gt;] [-ContextName &lt;string&gt;] [-Force] [-Scope
 &lt;ContextModificationScope&gt;] [-DefaultProfile &lt;IAzureContextContainer&gt;] [-WhatIf] [-Confirm] [&lt;CommonParameters&gt;]

 Connect-AzureRmAccount -AccessToken &lt;string&gt; -AccountId &lt;string&gt; [-Environment &lt;string&gt;] [-TenantId &lt;string&gt;] [-GraphAccessToken &lt;string&gt;] [-KeyVaultAccessToken &lt;string&gt;] [-Subscription &lt;string&gt;] [-ContextName
 &lt;string&gt;] [-SkipValidation] [-Force] [-Scope &lt;ContextModificationScope&gt;] [-DefaultProfile &lt;IAzureContextContainer&gt;] [-WhatIf] [-Confirm] [&lt;CommonParameters&gt;]

 Connect-AzureRmAccount -Identity [-Environment &lt;string&gt;] [-TenantId &lt;string&gt;] [-AccountId &lt;string&gt;] [-ManagedServicePort &lt;int&gt;] [-ManagedServiceHostName &lt;string&gt;] [-ManagedServiceSecret &lt;securestring&gt;]
 [-Subscription &lt;string&gt;] [-ContextName &lt;string&gt;] [-Force] [-Scope &lt;ContextModificationScope&gt;] [-DefaultProfile &lt;IAzureContextContainer&gt;] [-WhatIf] [-Confirm] [&lt;CommonParameters&gt;]</pre><div class="orderedlist"><ol class="orderedlist arabic" start="3" type="1"><li>To view all cmdlets that contain <code class="literal">VM</code> in the <code class="literal">AzureRM.Compute</code> module, use the following code:</li></ol></div><pre class="programlisting"><span class="strong"><strong>PS&gt; Get-Command -Name '*VM*' -Module AzureRM.Compute.Netcore</strong></span></pre></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch15lvl2sec425"></a>How it works…</h3></div></div></div><p>Cmdlet discovery is key when working with PowerShell,<span class="strong"><strong> </strong></span>unless you are sure of what cmdlets you should use to meet your requirements. PowerShell is designed to provide the useful discovery of <span>cmdlets</span><a id="id325892141" class="indexterm"></a> so that it can display detailed information about them.</p><p>In this recipe, we will use cmdlet discovery, along with <code class="literal">Format-Table</code>, to format the name and the synopsis of the cmdlets in a way that makes reading them easier. We will also use a wildcard-based filtering of cmdlets to list the cmdlets that help manage virtual machines.</p></div></div>