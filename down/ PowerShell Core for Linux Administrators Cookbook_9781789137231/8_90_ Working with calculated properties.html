<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch08lvl1sec92"></a>Working with calculated properties</h2></div></div><hr /></div><p>If you read through the <span class="emphasis"><em>Selecting columns from the output</em></span>recipe, in <a class="link" href="#" linkend="ch04">Chapter 4</a>, <span class="emphasis"><em>Passing Data through the Pipeline</em></span>, you may skip this recipe. This recipe has been created in the <span>interest</span><a id="id325901961" class="indexterm"></a> of context, as well as for those who have skipped that chapter/recipe.</p><p>Calculated properties is another form of performing calculations on the fly. Here is the scenario. You need a report of all the files present in a certain directory, with the names of the files, the last modified date, the full paths, and the sizes in MB.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec245"></a>Getting ready</h3></div></div></div><p>If you do not have the lab files or you deleted the files in the previous recipe, run the script, <code class="literal">Initialize-PacktPs6CoreLinuxLab.ps1</code>, from within the <code class="literal">ch04</code> directory of the book’s GitHub repository. Next, run the script, <code class="literal">Set-LastWriteTime.ps1</code>, from within the <code class="literal">ch08</code> directory of the repository.</p><p> </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec246"></a>How to do it…</h3></div></div></div><p>This is going to be a one-liner.</p><p>At the terminal, type the following and press the <span class="emphasis"><em>Enter</em></span> key:</p><pre class="programlisting"><span class="strong"><strong>PS&gt; Get-ChildItem -file -rec | Select-Object name, lastwritetime, @{n = 'Size'; e = {[math]::Round($_.Length/1MB, 3)}}</strong></span>
<span class="strong"><strong>
PS&gt; # Verbose version: Get-ChildItem -File -Recurse | Select-Object Name, LastWriteTime, @{Name = "Size"; Expression = { [math]::Round($PSItem.Length/1MB, 3) }}</strong></span></pre></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec247"></a>How it works…</h3></div></div></div><p>A calculated property takes in two things: the name of the property and the expression that would produce the desired result. Technically, this is a hashtable with <code class="literal">n</code> (or <code class="literal">Name</code>) and <code class="literal">e</code> (or <code class="literal">Expression</code>) being the two name-value pairs. The <code class="literal">Expression</code> in itself is a script block. When broken down into lines, the query looks like this:</p><pre class="programlisting">Get-ChildItem -File -Recurse | Select-Object Name, LastWriteTime, <span class="strong"><strong>@{
    Name = "Size"
    Expression = {
        [math]::Round($PSItem.Length/1MB, 3)
    }
}</strong></span></pre><p>Since we separated the <code class="literal">Name</code> and the <code class="literal">Expression</code> by a line, we do not need the semicolon anymore.</p><p>Calculated properties come in handy in situation where you do not really want to create a new script, but instead want some information at the terminal itself, as though running a query. The value of <code class="literal"><span>Name</span></code> is the <span>name</span><a id="id326087760" class="indexterm"></a> of the property, and the values in the column are determined by the expression.</p></div></div>