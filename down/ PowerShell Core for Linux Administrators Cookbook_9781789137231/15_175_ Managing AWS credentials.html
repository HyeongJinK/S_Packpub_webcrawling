<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch15lvl1sec170"></a>Managing AWS credentials</h2></div></div><hr /></div><p>Protecting <span>and</span><a id="id326071482" class="indexterm"></a> safeguarding data on the cloud has many unique challenges, especially if additional compliance regulations need to be met. Authentication always plays an important aspect in cloud computing. Credential management is key to the effective management of the cloud ecosystem. </p><p>In this recipe, we will discuss the process of generating the access key and managing profiles using AWS PowerShell cmdlets from a Linux machine.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch15lvl2sec449"></a>Getting ready</h3></div></div></div><p>This recipe requires that you have an AWS account. Go through the AWS documentation (<a class="ulink" href="https://aws.amazon.com/premiumsupport/knowledge-center/create-and-activate-aws-account/" target="_blank">https://aws.amazon.com/premiumsupport/knowledge-center/create-and-activate-aws-account/</a>) to set yourself up with an AWS account.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch15lvl2sec450"></a>How to do it…</h3></div></div></div><p>In this section, we will discuss the steps to follow to obtain credentials and use the AWS tools for PowerShell:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Log on to the AWS Management console (<a class="ulink" href="https://console.aws.amazon.com/iam/home" target="_blank">https://console.aws.amazon.com/iam/home</a>) portal. </li><li>Click on <strong class="userinput"><code>Users</code></strong> from the left-hand pane of the window.</li><li>Click on <strong class="userinput"><code>Add User</code></strong>.</li><li>Enter your username in the <strong class="userinput"><code>Set user details</code></strong> pane.</li></ol></div><div class="orderedlist"><ol class="orderedlist arabic" start="5" type="1"><li>Select the <strong class="userinput"><code>AWS access type</code></strong> as <strong class="userinput"><code>Programmatic access</code></strong> and click the <strong class="userinput"><code>Next: Permissions</code></strong> button:</li></ol></div><div class="mediaobject"><img src="/graphics/9781789137231/graphics/e9165218-9a1e-47d6-aa27-f33014bb6461.png" /></div><p></p><div class="orderedlist"><ol class="orderedlist arabic" start="6" type="1"><li>Choose the option to <strong class="userinput"><code>Attach existing policies directly</code></strong>. In the <strong class="userinput"><code>Policy type</code></strong><span class="strong"><strong> </strong></span>filter, check the <strong class="userinput"><code>AdministratorAccess</code></strong><span class="strong"><strong> </strong></span>box and click <strong class="userinput"><code>Next</code></strong>:</li></ol></div><div class="mediaobject"><img src="/graphics/9781789137231/graphics/d3c2b7ec-9500-47f8-acbb-1bf32bd35eae.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="7" type="1"><li>Click the <strong class="userinput"><code>Create user</code></strong><span class="strong"><strong> </strong></span>button.</li><li>The access key and the security key will be generated <span>and</span><a id="id325585860" class="indexterm"></a> ready to use.</li><li>Save the key in a secure location.</li></ol></div><div class="orderedlist"><ol class="orderedlist arabic" start="10" type="1"><li>To build the session, you must use the necessary keys. The keys are used with <code class="literal">Initialize-AWSDefauultConfiguration</code>:</li></ol></div><pre class="programlisting"><span class="strong"><strong>PS&gt; Initialize-AWSDefaultConfiguration</strong></span></pre><div class="mediaobject"><img src="/graphics/9781789137231/graphics/8b57a40f-f08d-4224-b2de-d49330597271.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="11" type="1"><li>To add the key to a new profile, run <code class="literal">Set-AWSCredential</code>:</li></ol></div><pre class="programlisting"><span class="strong"><strong>PS&gt; Set-AWSCredential -AccessKey AKIAIUR2HFYFHLHVYSCA -SecretKey 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 -StoreAs PackPubLinux</strong></span></pre><div class="orderedlist"><ol class="orderedlist arabic" start="12" type="1"><li>To list the newly created profile, run <code class="literal">Get-AWSCredential</code>:</li></ol></div><pre class="programlisting"><span class="strong"><strong>PS&gt; Get-AWSCredential -ListProfileDetail </strong></span>
<span class="strong"><strong>ProfileName StoreTypeName ProfileLocation</strong></span>
----------- ------------- ---------------
PackPubLinux SharedCredentialsFile /root/.aws/credentials</pre><div class="orderedlist"><ol class="orderedlist arabic" start="13" type="1"><li>To specify the profile for the PowerShell session, run <code class="literal">Initialize-AWSDefaultconfiguration</code>:</li></ol></div><pre class="programlisting"><span class="strong"><strong>PS&gt; Initialize-AWSDefaultConfiguration -ProfileName PackPubLinux</strong></span></pre><p> </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch15lvl2sec451"></a>How it works…</h3></div></div></div><p>All AWS PowerShell Tools cmdlets expect a set of the Access Key and the Secret Key to authenticate with AWS. While it is possible to specify the credentials whenever you run a cmdlet or set the credentials at a session level, this recipe helps you create a profile to access these AWS resources. First, you initialize the AWS profile by entering the necessary credentials and then setting the geographic location. Next, you store the credentials within the <code class="literal">PacktPubLinux</code> profile and bind it to the default configuration.</p><p>This is one of the recommended ways to access AWS resources, since it strikes a nice balance between security <span>and</span><a id="id325901966" class="indexterm"></a> convenience.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch15lvl2sec452"></a>There's more…</h3></div></div></div><p>To remove the profile, use the <code class="literal">Remove-AWSCredentialProfile</code> cmdlet:</p><pre class="programlisting"><span class="strong"><strong>PS&gt; Remove-AWSCredentialProfile -ProfileName MyProfileName</strong></span></pre></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch15lvl2sec453"></a>See also</h3></div></div></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">Refer to the <span>AWS</span><a id="id325905958" class="indexterm"></a> document for credentials management (<a class="ulink" href="https://docs.aws.amazon.com/powershell/latest/userguide/specifying-your-aws-credentials.html" target="_blank">https://docs.aws.amazon.com/powershell/latest/userguide/specifying-your-aws-credentials.html</a>).</li></ul></div></div></div>