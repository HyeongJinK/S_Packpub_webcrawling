<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch17lvl1sec188"></a>Listing Docker containers and the images </h2></div></div><hr /></div><p>In this recipe, we will look at how you can use <span>PowerShell</span><a id="id325585846" class="indexterm"></a> cmdlets to view a list of <span>images</span><a id="id326091333" class="indexterm"></a> and containers (running instances of Docker images, which includes an application and all of its dependent pieces), which may be in different states.</p><p>We'll look at how to list the containers using conditional constructs in PowerShell, as well as how the PowerShell output can be integrated with the <code class="literal">grep</code> and <code class="literal">awk</code> utilities.</p><p> </p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch17lvl2sec504"></a>How to do it…</h3></div></div></div><p>Let's start by listing all the containers in the system:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Use the <code class="literal">Get-Container</code> cmdlet to list out all of the available containers:</li></ol></div><pre class="programlisting"><span class="strong"><strong>PS&gt; Get-Container</strong></span></pre><div class="mediaobject"><img src="/graphics/9781789137231/graphics/e4a98caa-0caa-4db5-aed8-3b376f95a1b9.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="2" type="1"><li>Next, list out only those containers that are in the <code class="literal">Exited</code> state:</li></ol></div><pre class="programlisting"><span class="strong"><strong>PS&gt; Get-Container | Where-Object Status -like 'Exited*'</strong></span></pre><div class="mediaobject"><img src="/graphics/9781789137231/graphics/836cf671-0bf1-4766-983e-d6d8b6696b52.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="3" type="1"><li>You could even narrow down the search results. For instance, you could find the containers that are running and were created in the last six hours:</li></ol></div><pre class="programlisting"><span class="strong"><strong>PS&gt; Get-Container | Where-Object {$_.Status -like 'Up*' -and $_.Created -lt (Get-Date).AddHours(-6)}</strong></span></pre><div class="mediaobject"><img src="/graphics/9781789137231/graphics/3a68373b-db65-49e3-a7b4-e307e691cf38.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="4" type="1"><li>The output can also integrate with <span>commands</span><a id="id325898665" class="indexterm"></a> such as <code class="literal">grep</code> and <code class="literal">awk</code>:</li></ol></div><pre class="programlisting"><span class="strong"><strong>PS&gt; Get-Container | grep bin | awk '{print $1}'</strong></span></pre><div class="mediaobject"><img src="/graphics/9781789137231/graphics/42a4d91a-8b7e-49f9-ab4b-00d70383caf9.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="5" type="1"><li>Next, list out all of the container images:</li></ol></div><pre class="programlisting"><span class="strong"><strong>PS&gt; Get-ContainerImage -All</strong></span></pre><div class="mediaobject"><img src="/graphics/9781789137231/graphics/4d112a68-bc6f-4478-950e-132a3aa91f23.png" /></div><p> </p><p> </p><div class="orderedlist"><ol class="orderedlist arabic" start="6" type="1"><li>Get all of the details about the first <span>image</span><a id="id325905971" class="indexterm"></a> in the output:</li></ol></div><pre class="programlisting"><span class="strong"><strong>PS&gt; Get-ContainerImage | Select-Object * -First 1</strong></span></pre><div class="mediaobject"><img src="/graphics/9781789137231/graphics/12e3f3f6-5d4a-46d1-a32f-d3d7b142bdce.png" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch17lvl2sec505"></a>How it works…</h3></div></div></div><p>To examine the state of Docker containers, we use the <code class="literal">Get-Container</code> cmdlet. The rest of the <span>commands</span><a id="id325906034" class="indexterm"></a> mentioned in this recipe are simple implementations of PowerShell filtration and selection.</p></div></div>