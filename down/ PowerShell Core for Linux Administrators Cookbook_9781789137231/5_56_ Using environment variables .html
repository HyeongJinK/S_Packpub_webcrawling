<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch05lvl1sec61"></a>Using environment variables </h2></div></div><hr /></div><p>In this recipe, you will learn about <span>environment</span><a id="id326224092" class="indexterm"></a> variables. When interacting with the system through a shell session, there are many pieces of information that the shell requires in order to determine the program access, the available resources, default configuration, system properties, and so on. Some of these settings are configured within the system as variables, and these settings are commonly called environment<span class="strong"><strong> </strong></span>variables.</p><p>While hardcoding this information during installation is one way to go, it makes the entire system a monolith that cannot be reconfigured without what is known as nuking-and-paving. With environment variables, another layer of flexibility is introduced.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec165"></a>How to do it…</h3></div></div></div><p>Let's start working with an environment variable by using the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>To display the environment variable, type in <code class="literal">Get-ChildItem env:</code> or <code class="literal">Get-Item env:</code> and press the <span class="emphasis"><em>Enter</em></span> key:</li></ol></div><pre class="programlisting"><span class="strong"><strong>PS&gt; Get-ChildItem env:</strong></span>
<span class="strong"><strong>PS&gt; Get-Item env:</strong></span></pre><div class="orderedlist"><ol class="orderedlist arabic" start="2" type="1"><li><code class="literal">Env:</code> is also a PowerShell provider, and works just like a filesystem. Therefore, you could also use <code class="literal">Set-Location</code> at <code class="literal">Env:</code> and use <code class="literal">Get-ChildItem .</code> to list the variables that are available in your system.</li><li>To display the value of the specified <span>environment</span><a id="id325901987" class="indexterm"></a> variable, run the following command:</li></ol></div><pre class="programlisting"><span class="strong"><strong>PS&gt; Get-ChildItem Env:/PATH | Select-Object value | Format-Table -Wrap</strong></span></pre><p></p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip43"></a>Note</h3><p>After typing <code class="literal">Get-ChildItem Env:/</code>, you can use tab completion to populate all environment variables. </p></div><div class="orderedlist"><ol class="orderedlist arabic" start="4" type="1"><li>Use <code class="literal">Get-Member</code> on the <code class="literal">PATH</code> environment variable to find its type.</li><li>Before changing the environment variable, list the <code class="literal">PATH</code> variable using <code class="literal">$env:PATH | Get-Member</code>. It is a string. Save the contents someplace safe.</li><li>Now, update the <code class="literal">PATH</code> environment variable by adding the path of the <code class="literal">sqlcmd</code> tool executable to the <code class="literal">$env: PATH</code> variable. The operation is a simple addition of a string to the existing value:</li></ol></div><pre class="programlisting"><span class="strong"><strong>PS&gt; $env:PATH = $env:PATH + ':/opt/mssql-tools/bin'</strong></span>
<span class="strong"><strong>PS /root&gt; sqlcmd</strong></span></pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip44"></a>Note</h3><p>You could add any location to <code class="literal">PATH</code>. If you insist on getting <code class="literal">sqlcmd</code>, head over to Microsoft Docs (<a class="ulink" href="https://docs.microsoft.com/en-us/sql/linux/sql-server-linux-setup-tools?view=sql-server-linux-2017" target="_blank">https://docs.microsoft.com/en-us/sql/linux/sql-server-linux-setup-tools?view=sql-server-linux-2017</a>) for SQL Server 2017 for instructions to get yourself a copy.</p></div><p>The output of the preceding code block is illustrated in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781789137231/graphics/5ece18a7-70c0-4524-b5b6-8a121d87fd1e.png" /></div><p> </p><div class="orderedlist"><ol class="orderedlist arabic" start="7" type="1"><li>Let's exit the session, launch a new session,  check the <code class="literal">PATH</code> variable, and run the <code class="literal">sqlcmd</code> executable:</li></ol></div><pre class="programlisting"><span class="strong"><strong>PS&gt; sqlcmd</strong></span>

sqlcmd : The term 'sqlcmd' is not recognized as the name of a cmdlet, function, script file, or operable program.</pre></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec166"></a>How it works…</h3></div></div></div><p>As we saw in the <span class="emphasis"><em>Listing the various providers in PowerShell</em></span> recipe in <a class="link" href="#" linkend="ch01">Chapter 1</a>, <span class="emphasis"><em>Introducing PowerShell Core</em></span>, <code class="literal">Env</code> is a provider that contains environment-specific configuration. Most of these configuration options are also exposed to us as environment variables. We are able to use the <code class="literal">Get-ChildItem</code> and <code class="literal">Get-Item</code> cmdlets to list the values of the available environment variables because <code class="literal">Env:</code> is a drive within the <code class="literal">Env</code> provider. Since <span>environment</span><a id="id325913498" class="indexterm"></a> variables do not have child items, <code class="literal">Get-Item</code> and <code class="literal">Get-ChildItem</code> return the same output.</p><p>Since these variables determine how your session behaves with you, changes made to these values are ephemeral. In other words, the value of <code class="literal">$env:PATH</code> is picked from the configuration on your Linux computer. The manual change made to <code class="literal">$env:PATH</code> that's made within a PowerShell session remains as long as the PowerShell session is alive. Changes made to <code class="literal">$env:PATH</code> do not change the value within the system itself.</p><p>If you would like to make a certain change permanent, edit the <code class="literal">.bashrc</code> or <span class="strong"><strong><code class="literal">~/.bash_profile</code> </strong></span>configuration files. If you would like to use PowerShell instead of Bash, make the change in your PowerShell profile. Instructions on how to do that can be found in the <span class="emphasis"><em>Enabling automated execution of commands for each load</em></span> recipe in <a class="link" href="#" linkend="ch02">Chapter 2</a>, <span class="emphasis"><em>Preparing for Administration Using PowerShell</em></span>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec167"></a>There's more…</h3></div></div></div><p>You can also access environment variables by using a  .NET type accelerator and its methods, like so:</p><pre class="programlisting"><span class="strong"><strong>PS&gt; [environment]::GetEnvironmentVariable("PATH")</strong></span></pre><p> </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec168"></a>See also</h3></div></div></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">About environment variables: <code class="literal">Get-Help about_Environment_Variables</code></li><li style="list-style-type: disc">The <span class="emphasis"><em>Listing the various providers in PowerShell </em></span>in <a class="link" href="#" linkend="ch01">Chapter 1</a>, <span class="emphasis"><em>Introducing PowerShell Core</em></span></li><li style="list-style-type: disc">The <span class="emphasis"><em>Enabling the automated execution of commands for each load </em></span>recipe in <a class="link" href="#" linkend="ch02">Chapter 2</a>, <span class="emphasis"><em>Preparing for Administration Using PowerShell</em></span></li></ul></div></div></div>