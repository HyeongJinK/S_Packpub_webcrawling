<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch17lvl1sec184"></a>Getting and listing the Docker management cmdlets</h2></div></div><hr /></div><p>Docker containers and the Docker engine itself <span>can</span><a id="id325905988" class="indexterm"></a> be managed using PowerShell. The Docker <span>PowerShell</span><a id="id325905979" class="indexterm"></a> module builds on top of the Docker Engine's REST API interface, enabling the user to choose between Docker CLI and PowerShell to manage their Docker operations. Administrators can even use a combination of the two.</p><p>This recipe shows you how to install the Docker module and list out its cmdlets. To know what each cmdlet does, follow the recipes in <a class="link" href="#" linkend="ch01">Chapter 1</a>, <span class="emphasis"><em>Introducing PowerShell Core</em></span>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch17lvl2sec489"></a>Getting ready</h3></div></div></div><p>You must have PowerShell installed on your computer (which should be the case given that you are this far into the book). If you would like the module to be installed system-wide, you also need superuser access.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch17lvl2sec490"></a>How to do it…</h3></div></div></div><p>Let's now begin by installing the Docker module and getting its capabilities:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Open the Terminal. At the prompt, type <code class="literal">pwsh</code> to launch PowerShell. If you would like the module installed system-wide, launch <code class="literal">pwsh</code> with <code class="literal">sudo</code>.</li></ol></div><div class="orderedlist"><ol class="orderedlist arabic" start="2" type="1"><li>At the PowerShell prompt, type in the following command:</li></ol></div><pre class="programlisting"><span class="strong"><strong>PS&gt; Find-Module Docker</strong></span></pre><div class="mediaobject"><img src="/graphics/9781789137231/graphics/34363665-4405-4d4d-b7ff-6b21a7caadc9.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="3" type="1"><li>There's a module called <code class="literal">Docker</code> available in PSGallery. Let's get its description:</li></ol></div><pre class="programlisting"><span class="strong"><strong>PS&gt; (Find-Module Docker).Description</strong></span></pre><div class="mediaobject"><img src="/graphics/9781789137231/graphics/4fe73cfc-492e-456a-9780-fef96902d15f.png" /></div><p>This is the module we want.</p><p> </p><div class="orderedlist"><ol class="orderedlist arabic" start="4" type="1"><li>Go ahead and <span>install</span><a id="id325611889" class="indexterm"></a> the module:</li></ol></div><pre class="programlisting"><span class="strong"><strong>PS&gt; Install-Module Docker</strong></span></pre><div class="mediaobject"><img src="/graphics/9781789137231/graphics/a90ead65-e162-4695-a46c-c6c1f8b1d921.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="5" type="1"><li>Once the installation completes, list out the cmdlets that are available in the Docker module:</li></ol></div><pre class="programlisting"><span class="strong"><strong>PS&gt; Get-Command -Module Docker</strong></span></pre><div class="mediaobject"><img src="/graphics/9781789137231/graphics/b8bb5341-68d2-4e2f-81f3-a9e5bcc38ab3.png" /></div><p>This module currently has only four cmdlets. We need more capabilities than that. How about we go with the bleeding edge of the module?</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note94"></a>Note</h3><p>This project is no longer being actively developed because of low usage. Microsoft recommends using <code class="literal">Docker.DotNet</code> instead. However, given the capabilities available in the module, we should still explore them.</p></div><p>Follow these steps to <span>install</span><a id="id325892157" class="indexterm"></a> the Alpha build of the module:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Download the PowerShell Docker module from <a class="ulink" href="https://github.com/Microsoft/Docker-PowerShell/releases" target="_blank">https://github.com/Microsoft/Docker-PowerShell/releases</a>.</li><li>Download <code class="literal">Docker.0.1.0.zip</code> (<a class="ulink" href="https://github.com/Microsoft/Docker-PowerShell/releases/download/v0.1.0/Docker.0.1.0.zip" target="_blank">https://github.com/Microsoft/Docker-PowerShell/releases/download/v0.1.0/Docker.0.1.0.zip</a>).</li></ol></div><div class="orderedlist"><ol class="orderedlist arabic" start="3" type="1"><li>Next, extract the ZIP file to the <code class="literal">/tmp/Docker</code> folder using the <code class="literal">unzip</code> command:</li></ol></div><pre class="programlisting"><span class="strong"><strong># mkdir /tmp/Docker</strong></span>
<span class="strong"><strong># unzip ./Downloads/Docker.0.1.0.zip -d /tmp/Docker/</strong></span></pre><div class="mediaobject"><img src="/graphics/9781789137231/graphics/d917c4f6-3d79-4d0c-98c6-083d9c5bac16.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="4" type="1"><li>Verify the <span>existence</span><a id="id325898628" class="indexterm"></a> of the <code class="literal">Docker.psd1</code> manifest <span>file</span><a id="id325898670" class="indexterm"></a> using the <code class="literal">ls -l</code> command:</li></ol></div><pre class="programlisting"><span class="strong"><strong># ls -l /tmp/Docker</strong></span></pre><div class="mediaobject"><img src="/graphics/9781789137231/graphics/5f667975-444d-401a-a411-91b36806b361.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="5" type="1"><li>Next, open the <code class="literal">pwsh</code> console.</li><li>Import the <code class="literal">docker</code> module using the <code class="literal">Import-Module</code> cmdlet:</li></ol></div><pre class="programlisting"><span class="strong"><strong>PS&gt; Import-Module -Name /tmp/Docker/Docker.psd1</strong></span></pre><p> </p><div class="orderedlist"><ol class="orderedlist arabic" start="7" type="1"><li>To list the modules that are registered with the current session scope, use the following command:</li></ol></div><pre class="programlisting"><span class="strong"><strong>PS&gt; Get-Module -Name Docker</strong></span>

</pre><div class="mediaobject"><img src="/graphics/9781789137231/graphics/38b424e9-4314-4656-b49b-5bf3e072d95b.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="8" type="1"><li>List the PowerShell cmdlets for Docker using the <code class="literal">Get-Command</code> cmdlet:</li></ol></div><pre class="programlisting"><span class="strong"><strong>PS&gt; Get-Command -Module Docker</strong></span></pre><div class="mediaobject"><img src="/graphics/9781789137231/graphics/66094c8c-349d-4e69-8f7a-f4ba9245c19c.png" /></div><p> </p><p> </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch17lvl2sec491"></a>How it works…</h3></div></div></div><p>The PSGallery repository has a <span>module</span><a id="id325651635" class="indexterm"></a> called <code class="literal">Docker</code>, which is used to manage the Docker Engine. This module, however, has a very small number of cmdlets. The bleeding-edge <code class="literal">Docker</code> module for PowerShell contains more cmdlets to manage Docker, however, the cmdlets are in their alpha stage.</p><p>The alpha Docker PowerShell module contains more capabilities. However, this <span>module</span><a id="id325651653" class="indexterm"></a> needs to be installed from the GitHub repository.</p><p>Here are the PowerShell cmdlets, their aliases, and their CLI equivalents, which are available in the alpha Docker module:</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; "><colgroup><col /><col /><col /></colgroup><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>PowerShell cmdlet</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Alias</p></td><td style="border-bottom: 0.5pt solid ; "><p>Docker command</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">ConvertTo-ContainerImage</code></p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">Commit-Container</code></p></td><td style="border-bottom: 0.5pt solid ; "><p><code class="literal">docker commit</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">Copy-ContainerFile</code></p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p></p></td><td style="border-bottom: 0.5pt solid ; "><p><code class="literal">docker cp</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">Enter-ContainerSession</code></p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">Attach-Container</code></p></td><td style="border-bottom: 0.5pt solid ; "><p><code class="literal">docker attach</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">Export-ContainerImage</code></p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">Save-ContainerImage</code></p></td><td style="border-bottom: 0.5pt solid ; "><p><code class="literal">docker save</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">Get-Container</code></p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p></p></td><td style="border-bottom: 0.5pt solid ; "><p><code class="literal">docker ps -a</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">Get-ContainerDetail</code></p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p></p></td><td style="border-bottom: 0.5pt solid ; "><p><code class="literal">docker inspect</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">Get-ContainerImage</code></p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p></p></td><td style="border-bottom: 0.5pt solid ; "><p><code class="literal">docker images</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">Get-ContainerNet</code></p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p></p></td><td style="border-bottom: 0.5pt solid ; "><p><code class="literal">docker network ls</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">Get-ContainerNetDetail</code></p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p></p></td><td style="border-bottom: 0.5pt solid ; "><p><code class="literal">docker network inspect</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">Import-ContainerImage</code></p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">Load-ContainerImage</code></p></td><td style="border-bottom: 0.5pt solid ; "><p><code class="literal">docker load </code></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">Invoke-containerImage</code></p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">Run-ContainerImage</code></p></td><td style="border-bottom: 0.5pt solid ; "><p><code class="literal">docker run</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">New-Container</code></p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p></p></td><td style="border-bottom: 0.5pt solid ; "><p><code class="literal">docker create</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">New-ContainerImage</code></p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">Build-ContainerImage</code></p></td><td style="border-bottom: 0.5pt solid ; "><p><code class="literal">docker build</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">New-ContainerNet</code></p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p></p></td><td style="border-bottom: 0.5pt solid ; "><p><code class="literal">docker network create</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">Remove-Container</code></p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p></p></td><td style="border-bottom: 0.5pt solid ; "><p><code class="literal">docker rm</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">Remove-ContainerImage</code></p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p></p></td><td style="border-bottom: 0.5pt solid ; "><p><code class="literal">docker rmi</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">Remove-ContainerNet</code></p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p></p></td><td style="border-bottom: 0.5pt solid ; "><p><code class="literal">docker network rm</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">Request-ContainerImage</code></p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">Pull-ContainerImage</code></p></td><td style="border-bottom: 0.5pt solid ; "><p><code class="literal">docker pull</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">Set-ContainerImageTag</code></p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">Tag-ContainerImage</code></p></td><td style="border-bottom: 0.5pt solid ; "><p><code class="literal">docker tag</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">Start-Container</code></p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p></p></td><td style="border-bottom: 0.5pt solid ; "><p><code class="literal">docker start</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">Start-ContainerProcess</code></p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">Exec-Container</code></p></td><td style="border-bottom: 0.5pt solid ; "><p><code class="literal">docker exec</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">Stop-Container</code></p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p></p></td><td style="border-bottom: 0.5pt solid ; "><p><code class="literal">docker stop</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; "><p><code class="literal">Submit-ContainerImage</code></p></td><td style="border-right: 0.5pt solid ; "><p><code class="literal">Push-ContainerImage</code></p></td><td style=""><p><code class="literal">docker push</code></p></td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch17lvl2sec492"></a>See also</h3></div></div></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">About PowerShell <span>Module</span><a id="id325981970" class="indexterm"></a> manifest (<a class="ulink" href="https://docs.microsoft.com/en-in/powershell/developer/windows-powershell" target="_blank">https://docs.microsoft.com/en-in/powershell/developer/windows-powershell</a>)</li></ul></div></div></div>