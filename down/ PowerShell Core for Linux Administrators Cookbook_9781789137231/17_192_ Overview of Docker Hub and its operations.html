<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch17lvl1sec185"></a>Overview of Docker Hub and its operations</h2></div></div><hr /></div><p>Docker Hub is an online repository for sharing <span>Docke</span><a id="id325611870" class="indexterm"></a>r images. Docker Hub is a cloud-based <span>registry</span><a id="id325611862" class="indexterm"></a> service that allows you to link to code repositories, build your images, and test them. It also stores manually pushed images and links to Docker Cloud so that you can deploy images to your hosts. Organizations can even create workgroups to manage access to image repositories:</p><div class="mediaobject"><img src="/graphics/9781789137231/graphics/99abf1ea-4efe-4ccd-93c3-b36e80f3263c.png" /></div><p> </p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch17lvl2sec493"></a>Getting ready</h3></div></div></div><p>It is recommended that you have met the following prerequisites steps before you proceed:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Create a <span>Docker</span><a id="id325611836" class="indexterm"></a> ID at <a class="ulink" href="https://hub.docker.com" target="_blank">https://hub.docker.com</a>.</li><li>PowerShell should be available on the host machine.</li><li>The Docker module manifest should be available and loaded into the session.</li><li>You must be logged in to the session as a user that has superuser privileges.</li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch17lvl2sec494"></a>How to do it…</h3></div></div></div><p>In this recipe, we are going to see the complete life cycle of a Docker image by using PowerShell Docker cmdlets in conjunction with Docker CLI commands:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Open a Terminal and enter root mode.</li><li>Launch PowerShell using <code class="literal">pwsh</code>.</li><li>Log in to the Docker <span>registry</span><a id="id325606807" class="indexterm"></a> using your Docker username and password credentials or using a standard file as an input for the password. The second option is not recommended, for security reasons:</li></ol></div><pre class="programlisting"><span class="strong"><strong># docker login</strong></span></pre><div class="mediaobject"><img src="/graphics/9781789137231/graphics/49618471-98e0-40db-8341-aa6e7160d70c.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="4" type="1"><li>Now, pull the sample <code class="literal">hello-world:latest</code> image from the Docker Hub using the <code class="literal">Pull-ContainerImage</code> cmdlet:</li></ol></div><pre class="programlisting"><span class="strong"><strong>PS&gt; Pull-ContainerImage hello-world:latest</strong></span></pre><div class="mediaobject"><img src="/graphics/9781789137231/graphics/e361ff04-7ddf-4b3b-b83a-08917eb2cfbe.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="5" type="1"><li>To run the container image, use the <code class="literal">Run-ContainerImage</code> cmdlet:</li></ol></div><div class="mediaobject"><img src="/graphics/9781789137231/graphics/410a1a6e-e5df-4877-aa0f-40073183b5c0.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="6" type="1"><li>Let's find the <span>container</span><a id="id325906068" class="indexterm"></a> ID by using <code class="literal">Get-Container</code>:</li></ol></div><pre class="programlisting"><span class="strong"><strong>PS&gt; Get-Container</strong></span></pre><div class="orderedlist"><ol class="orderedlist arabic" start="7" type="1"><li>Let's pick just the container ID. We will use the <code class="literal">Select-Object</code> cmdlet to do this:</li></ol></div><pre class="programlisting"><span class="strong"><strong>PS&gt; Get-Container | Select-Object ID</strong></span></pre><div class="mediaobject"><img src="/graphics/9781789137231/graphics/b2109de7-f08b-4030-9b43-24834aff8acc.png" /></div><p>Make any changes you may want to (or not) to the Docker image. We want this customized image to be saved.</p><div class="orderedlist"><ol class="orderedlist arabic" start="8" type="1"><li>Save this as a new image using the <code class="literal">Commit-ContainerImage</code> cmdlet. This new image has all of the changes that we made to the base image:</li></ol></div><pre class="programlisting"><span class="strong"><strong>PS&gt; Commit-Container &lt;container ID&gt;</strong></span></pre><div class="mediaobject"><img src="/graphics/9781789137231/graphics/6e670bdb-d90a-42dd-893e-fa95d38fe8af.png" /></div><p>As you can see, the container has no tags (<code class="literal">&lt;none&gt;:&lt;none&gt;</code>). Tags are unique identifiers for Docker images. Note the change in the container ID. You need this ID for the next step.</p><div class="orderedlist"><ol class="orderedlist arabic" start="9" type="1"><li>Now, let's add a tag (a unique identifier) to the image using <code class="literal">Tag-ContainerImage</code>. The ID is the SHA ID of the image. Just like in Git, where you can use the first seven characters of the ID, you can use the first three characters here, in this case, as follows:</li></ol></div><pre class="programlisting"><span class="strong"><strong>PS&gt; Tag-ContainerImage -Id 840 -Repository </strong></span>prashanthjayaram/packtpubhelloworld</pre><p> </p><div class="orderedlist"><ol class="orderedlist arabic" start="10" type="1"><li>If you would like to see the details of the container you just tagged, you can do so by selecting all of the properties of the object:</li></ol></div><div class="mediaobject"><img src="/graphics/9781789137231/graphics/bb7de887-10c8-4cc5-a7db-23c35ceca2f6.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="11" type="1"><li>Push the new image into the repository using the <code class="literal">docker push</code> command. We are using <code class="literal">docker push</code> because <code class="literal">Submit-ContainerImage</code> doesn't seem to work in this build:</li></ol></div><pre class="programlisting"><span class="strong"><strong>PS&gt; docker push prashanthjayaram/packtpubhelloworld</strong></span></pre><div class="mediaobject"><img src="/graphics/9781789137231/graphics/3b41a895-c8bb-43f1-baca-5b242782a7cc.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="12" type="1"><li>Log in to <a class="ulink" href="https://hub.docker.com" target="_blank">https://hub.docker.com</a> to verify whether the image is available:</li></ol></div><div class="mediaobject"><img src="/graphics/9781789137231/graphics/83d1e3b9-0357-43ad-8fea-4b72990fbd77.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="13" type="1"><li>Now, validate the newly <span>created</span><a id="id325990913" class="indexterm"></a> image by pulling it from the remote D<span>ocker</span><a id="id325990921" class="indexterm"></a> Hub registry:</li></ol></div><pre class="programlisting"><span class="strong"><strong>PS&gt; Pull-ContainerImage -Repository prashanthjayaram/packtpubhelloworld</strong></span></pre><p> </p><div class="orderedlist"><ol class="orderedlist arabic" start="14" type="1"><li>To run the newly downloaded image, use the <code class="literal">Run-ContainerImage</code> cmdlet:</li></ol></div><pre class="programlisting"><span class="strong"><strong>PS&gt; Run-ContainerImage prashanthjayaram/packtpubhelloworld</strong></span></pre><div class="mediaobject"><img src="/graphics/9781789137231/graphics/61c88d59-df94-4c44-8947-bf762a1a79f7.png" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch17lvl2sec495"></a>How it works…</h3></div></div></div><p>Docker Hub is an online central repository for sharing Docker images. To use Docker Hub, you need to register with the Hub. Once you sign up, it is simple to pull images shared by yourself or others.</p><p>To build a custom image, open a Terminal session with superuser privileges and launch PowerShell. Log in to the Docker Hub using your Docker login credentials.</p><p>In this recipe, we demonstrated a sample container life cycle, wherein we got a public image, made modifications to it, committed the image, tagged it so as to uniquely identify it in the repository, and pushed it to the Hub for others to use. We tested the pull as well, and showed that it worked. We used PowerShell cmdlets for all of the operations other than the container image submission. (At the time of writing this book, the current build of the cmdlet, <code class="literal">Submit-ContainerImage</code>, seems to have issues with authentication.)</p><p>The PowerShell module for Docker does not have any dependency on the Docker CLI that we installed on our Linux computer. Therefore, the PowerShell module can run without Docker CLI being installed. The cmdlets in the module are merely wrapper cmdlets, meaning that they run Docker cmdlets under the hood, based on how you call the cmdlets. While it does not provide us with additional capabilities, the benefit of using the Docker module is the uniformity, readability, and discoverability of PowerShell cmdlets.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch17lvl2sec496"></a>See also</h3></div></div></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><span>Docker</span><a id="id325991413" class="indexterm"></a> Hub documentation (<a class="ulink" href="https://docs.docker.com/docker-hub/" target="_blank">https://docs.docker.com/docker-hub/</a>)</li></ul></div></div></div>