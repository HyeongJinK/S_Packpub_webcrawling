<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch01lvl1sec13"></a>Why choose Koa?</h2></div></div><hr /></div><p>At this point, you may be thinking, "<span class="emphasis"><em>Why exactly should I use Koa, amid the myriad of Node.js frameworks available? What exactly makes Koa special or different?" </em></span>That would be an excellent question. We will cover the answer to that in this section and list some reasons why Koa is a great choice for your next web development project.</p><p>As mentioned earlier, Koa is highly unopinionated, which makes its capabilities limited only by the developer's imagination. It is a framework that provides a light and highly configurable base for developers to quickly get started building out their web applications in JavaScript. Some of the things that make Koa a great <span>choice</span><a id="id326326288" class="indexterm"></a> include the following:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><span class="strong"><strong>Embraces modern standards</strong></span>: Koa embraces the more modern JavaScript ES6 syntax and encourages its use. The more modern syntax brings with it some advantages as the language evolves with every iteration.
</li><li style="list-style-type: disc"><span class="strong"><strong>Very light</strong></span>: Koa is one of the lightest frameworks out there with around 2K LOC. It only comes with the bare minimum. This shows developers that the framework is simply there to help do the bare minimum needed for them to quickly develop their apps and not more or less.</li><li style="list-style-type: disc"><span class="strong"><strong>Highly unopinionated</strong></span>: Koa tries as much as possible not to restrict developers. It does not come with any middleware out of the box, not even for routing. Koa's aim is to allow developers to be even more expressive. Koa encourages developers to either develop any middleware they need or take advantage of the publicly available ones. The Koa core team has developed a number of middlewares that are available for developers to plug into their application if so needed.</li><li style="list-style-type: disc"><span class="strong"><strong>Ease of creating custom middleware</strong></span>: Middleware functions are functions that sit between requests and responses in an application. They can usually manipulate both the request and responses in an application. A key factor in middleware function definition is also calling the next middleware to be executed. Koa's middleware cascading pattern is also one of the reasons Koa is recommended. The cascading pattern makes implementing and understanding the flow of middleware in your applications very easy. Simple middleware in Koa can be defined and registered in as few as three lines, as seen in the following code snippet:</li></ul></div><pre class="programlisting">        app.use(async (context, next) =&gt; {
           console.log(`Time: ${Date.now()}`);
           await next();
         });</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note3"></a>Note</h3><p>This code snippet is simple middleware for logging the time when a request is made to the server in Koa.</p></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><span class="strong"><strong><span>Co</span>mmunity support</strong></span>: As a result of its <span>increase</span><a id="id325755178" class="indexterm"></a> in popularity, a lot of plugins and middleware have been built and made publicly available. There are also a lot of JavaScript developers available to help answer questions and discuss issues related to the framework on popular forums.
</li><li style="list-style-type: disc"><span class="strong"><strong>Ease to get started with</strong></span>: One of the things JavaScript developers who are familiar with Express love about the framework is how easy it is to get started with it. Koa also embraces that simplicity and makes it very easy for developers to get started with it. Little configuration has to be done to cascade a simple Koa application. To illustrate how easy it is to get started with Koa, here is a Koa <code class="literal">Hello World</code> app, as seen on the Koa official website:</li></ul></div><pre class="programlisting">          // ./server.js

          const Koa = require('koa');
          const app = new Koa();

          app.use(asyncctx =&gt; {
            ctx.body = 'Hello World';
          });

          app.listen(3000);</pre><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><span class="strong"><strong>Flexible</strong></span>: K<span>oa does not enf</span>orce folder and file structure; hence, developers can use their preferred file structures when developing applications in Koa.</li><li style="list-style-type: disc"><span class="strong"><strong>Ease of error handling</strong></span>: Koa's embrace of the <code class="literal">async… await</code> JavaScript ES6 syntax makes error handling much easier. It is also easy to define middleware in Koa to handle errors thrown at different points in your application.</li><li style="list-style-type: disc"><span class="strong"><strong>Database and ORM agnostic</strong></span>: Developers can create web applications that will use their database and <span class="strong"><strong>Object Relation Mapper</strong></span> (<span class="strong"><strong>ORM</strong></span>) of choice. They are not <span>forced</span><a id="id325756296" class="indexterm"></a> to stick to a particular database or ORM as defined by the framework. Databases such as <code class="literal">MySQL</code>, <code class="literal">MongoDB</code>, and <code class="literal">PostgreSQL</code> can be used with Koa. ORMs such as <code class="literal">Mongoose</code>, <code class="literal">Sequelize</code>,and <code class="literal">Knex</code> are also easy to integrate with the Koa framework.</li><li style="list-style-type: disc"><span class="strong"><strong>The similarity to Express</strong></span>: If you are like many Node developers, you have at one point or the other worked with Express. This familiarity with Express proves to be an asset when working with Koa, as it makes it easier to get accustomed to Koa and its philosophy. This also works the other way around too. If you get familiar with Koa before Express, it becomes easier for you to pick up <span>Express</span><a id="id325756457" class="indexterm"></a> projects and understand them.</li><li style="list-style-type: disc"><span class="strong"><strong>Concise code</strong></span>: Writing code in Koa is generally more concise than in other <code class="literal">Node.js</code> frameworks. This is because it ditches the use of callbacks and encourages the modern ES6 syntax. It also has a number of HTTP utilities bundled with it to make writing web applications an easier experience.
</li><li style="list-style-type: disc"><span class="strong"><strong>Escape callback hell</strong></span>: As a result of Koa's reliance on modern standards in JavaScript development, we are able to avoid dealing with nested callbacks and the phenomenon <span>known</span><a id="id325903244" class="indexterm"></a> as <span class="strong"><strong>callback hell</strong></span> when developing our applications. To illustrate this, here is an example of how an endpoint to retrieve all of the products in a category from a database would look in Express with the use of callbacks:</li></ul></div><pre class="programlisting">          // ./express-route.js

          app.get('/category/:slug', (req, res, next)) =&gt; {
            const { slug } = req.params;

            Category.findOne({ slug }, (err, category) =&gt; {
              if (err) {
                return next(err);
              }

              Product.find({ category: category.id }, (err, products) 
               =&gt; {
                if (err) {
                  return next(err);
                }

                res.send(products);
              });
            });
          });</pre><p>The same endpoint can be written in Koa, as seen in the following code snippet:</p><pre class="programlisting">// ./koa-route.js

app.get('/category/:slug', async ctx =&gt; {
  const { slug } = ctx.params;
  const category = await Category.findOne({ slug });
  const products = await Product.find({ category: category.id });
  ctx.body = products;
});</pre><p>From these examples, we can see clearly how much more <span>readable</span><a id="id325913236" class="indexterm"></a> the code written in Koa is. We can avoid nested callbacks with the use of promises and the <code class="literal">async… await</code> syntax.</p><p> </p><p> </p></div>