<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch05lvl1sec37"></a>Project setup</h2></div></div><hr /></div><p>Once <span>we</span> have all of the prerequisite <span>software</span><a id="id326375189" class="indexterm"></a> installed, we can start to develop our project locally. The first thing that we need to do is initialize our <code class="literal">Node.js</code> project.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec20"></a>Initialization</h3></div></div></div><p>Most modern JavaScript projects and <span>packages</span><a id="id326019329" class="indexterm"></a> have a <code class="literal">package.json</code> file. This file specifies various metadata about the project, including the following:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">Dependencies</li><li style="list-style-type: disc">Descriptions</li><li style="list-style-type: disc">Repository information</li><li style="list-style-type: disc">Config information</li><li style="list-style-type: disc">Common scripts</li></ul></div><p>To initialize our project and create a <code class="literal">package.json</code> file, we will run the following <span>command:</span></p><pre class="programlisting"><span class="strong"><strong>npm init</strong></span></pre><p>After running the command, a prompt will show up, asking us to fill in some details about the project.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note18"></a>Note</h3><p><strong class="userinput"><code>Note</code></strong>: To initialize a project with default values, you can run the <code class="literal">npm init</code> command with the <code class="literal">-y</code> flag: <code class="literal">npm init -y</code>.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec21"></a>Installing dependencies</h3></div></div></div><p>To run our application properly, we need some <span>external</span><a id="id325756273" class="indexterm"></a> dependencies. We can get these dependencies by using a package manager, like <code class="literal">npm</code> or <code class="literal">yarn</code>.</p><p>Some of the packages that we need are as follows:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><code class="literal">koa</code>: Our base framework</li><li style="list-style-type: disc"><code class="literal">koa-router</code>: RESTful routing middleware for Koa</li><li style="list-style-type: disc"><code class="literal">koa-logger</code>: Development-style logger middleware for Koa</li><li style="list-style-type: disc"><code class="literal">koa-body</code>: Request body parser middleware for Koa</li><li style="list-style-type: disc"><code class="literal">mongoose</code>: <span class="strong"><strong>Object data modelling</strong></span> (<span class="strong"><strong>ODM</strong></span>) library for <span>MongoDB</span><a id="id325756453" class="indexterm"></a> and Node.js</li><li style="list-style-type: disc"><code class="literal">joi</code>: Object schema validation library</li></ul></div><p>To install these dependencies into our application using <code class="literal">npm</code>, we use the following command:</p><pre class="programlisting"><span class="strong"><strong>npm install --save koa koa-router koa-logger koa-body mongoose joi</strong></span></pre><p>The <code class="literal">--save</code> flag specifies that we want to save these packages as dependencies in our <code class="literal">package.json</code> file.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note19"></a>Note</h3><p>With newer versions of <code class="literal">npm</code>, you do not need to specify the <code class="literal">--save</code> flag for installed packages to be added as dependencies in the <code class="literal">package.json</code> file. You can simply install and save dependencies with <code class="literal">npm install</code> or <code class="literal">npm i</code>.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec22"></a>Structure</h3></div></div></div><p>We will structure our application in a <span>simple</span><a id="id325850747" class="indexterm"></a> and modular manner, following a slight modification of the MVC architectural pattern.</p><p>We will create controllers in a <code class="literal">controllers</code> folder, which will house the business logic for our application. Our data objects will also sit in a similarly named <code class="literal">models</code> folder. We will also create a <code class="literal">middleware</code> folder to house our application's middleware functions.</p><p>An <code class="literal">index.js</code> file will be created to serve as the entry point for our server. We will load up the required dependencies, configure our middleware, and start our server from this file.</p><p>To create the required folders, we can run the following command in the Terminal:</p><pre class="programlisting"><span class="strong"><strong>mkdir controllers middleware models</strong></span></pre><p>To create the entry point file, we can run the following command in the Terminal:</p><pre class="programlisting"><span class="strong"><strong>touch index.js</strong></span></pre><p>After initialization, and having created the required folders and files, the structure should look as follows:</p><pre class="programlisting">├── controllers
├── index.js
├── middleware
├── models
├── package-lock.json
└── package.json</pre></div></div>