<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch01lvl1sec15"></a>Koa versus Express</h2></div></div><hr /></div><p>Koa and Express share a lot of similarities, as the development of the two <span>frameworks</span><a id="id326327129" class="indexterm"></a> was kickstarted by the same team. While a lot of the underlying philosophies between <span>Koa</span><a id="id326327127" class="indexterm"></a> and Express are the same, clear differences exist as the creators of the frameworks attempted to do things in a different way with the release of Koa.</p><p>A major difference is in the philosophy of the two frameworks. Whereas Express complements Node, Koa attempts to fix and replace many things in it. The major difference is the fact that Koa tries to completely ditch callbacks and avoid callback hell by making use of <code class="literal">promises</code> and <code class="literal">async</code> functions.</p><p>Unlike Express, which augments Node's request (<code class="literal">req</code>) and response (<code class="literal">res</code>) objects with additional parameters and methods, Koa provides its own <code class="literal">ctx.request</code> and <code class="literal">ctx.response</code> objects. According to the Koa documentation, the following is true:</p><div class="blockquote"><blockquote class="blockquote"><p><span class="emphasis"><em>"Koa can be viewed as an abstraction of Node.js's <code class="literal">http</code> modules, whereas Express is an application framework for Node.js."</em></span></p></blockquote></div><p> </p><p>Koa tries to fix some of the things wrong with Node and provides a simple, lightweight, and unopinionated framework for building out HTTP services.</p><p>Some other differences between Koa and Express include the following:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><span class="strong"><strong>Router</strong></span>: Koa does not include a router out of the box; instead, external middleware is available to be used as routers such as <code class="literal">koa-router</code> and <code class="literal">koa-route</code>. Express, on the other hand, comes bundled with a router out of the box.</li><li style="list-style-type: disc"><span class="strong"><strong>Templating</strong></span>: Express has support for various popular templating engines out of the box, including <code class="literal">Jade</code>, <code class="literal">Pug</code>, <code class="literal">EJS</code>,and <code class="literal">Mustache</code>. In contrast, Koa requires installing an external plugin/middleware to support templating engines. A popular plugin for templating in Koa is <code class="literal">koa-views</code>.</li><li style="list-style-type: disc"><span class="strong"><strong>Convenience utilities</strong></span>: Express includes <span>some</span><a id="id325913255" class="indexterm"></a> convenience utilities (<a class="ulink" href="https://expressjs.com/en/resources/utils.html" target="_blank">https://expressjs.com/en/resources/utils.html</a>) to help programmers handle regular tasks such as file streaming and URL parsing. Koa does not include these utilities.</li><li style="list-style-type: disc"><span class="strong"><strong>Promise-based control flow</strong></span>: Koa has the advantage of ditching callbacks and avoiding callback hell by making heavy use of promises, unlike its predecessor, Express. This ensures that errors are easier to handle without many <code class="literal">try... catch</code> statements.</li><li style="list-style-type: disc"><span class="strong"><strong>Cascading middleware pattern of flow in Koa.js</strong></span>: This allows middleware to take action exactly twice for each request whereas express middleware allows for only single execution per request. This flexibility allows Koa middleware developers to use the patterns established in other languages and systems such as <code class="literal">Ruby's Rack</code>.</li></ul></div><p>Here is a <span>table</span><a id="id325913290" class="indexterm"></a> from the <span>Koa</span><a id="id325967230" class="indexterm"></a> documentation, comparing it to Express:</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; "><colgroup><col /><col /><col /></colgroup><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Feature</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Koa</p></td><td style="border-bottom: 0.5pt solid ; "><p>Express</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Middleware Kernel</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>     </p><div class="mediaobject"><img src="/graphics/9781789345391/graphics/004ce9b8-5d49-4b4d-aa26-831dc58aa4a7.png" /></div></td><td style="border-bottom: 0.5pt solid ; "><div class="mediaobject"><img src="/graphics/9781789345391/graphics/96975e54-c1ff-481e-b1f8-8542bba0e8ad.png" /></div></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Routing</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p></p></td><td style="border-bottom: 0.5pt solid ; "><div class="mediaobject"><img src="/graphics/9781789345391/graphics/004ce9b8-5d49-4b4d-aa26-831dc58aa4a7.png" /></div></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Templating</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p></p></td><td style="border-bottom: 0.5pt solid ; "><div class="mediaobject"><img src="/graphics/9781789345391/graphics/004ce9b8-5d49-4b4d-aa26-831dc58aa4a7.png" /></div></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Sending files</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p></p></td><td style="border-bottom: 0.5pt solid ; "><div class="mediaobject"><img src="/graphics/9781789345391/graphics/004ce9b8-5d49-4b4d-aa26-831dc58aa4a7.png" /></div></td></tr><tr><td style="border-right: 0.5pt solid ; "><p>JSONP</p></td><td style="border-right: 0.5pt solid ; "><p></p></td><td style=""><div class="mediaobject"><img src="/graphics/9781789345391/graphics/004ce9b8-5d49-4b4d-aa26-831dc58aa4a7.png" /></div></td></tr></tbody></table></div><p> </p></div>