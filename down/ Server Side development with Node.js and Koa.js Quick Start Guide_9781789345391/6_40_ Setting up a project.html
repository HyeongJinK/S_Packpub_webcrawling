<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch06lvl1sec43"></a>Setting up a project</h2></div></div><hr /></div><p>As usual, we will begin <span>development</span><a id="id326033078" class="indexterm"></a> locally by initializing a project with <code class="literal">npm</code>. We can run the following command to initialize our project:</p><pre class="programlisting"><span class="strong"><strong>npm init</strong></span>
<span class="strong"><strong>// or npm init -y</strong></span></pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note24"></a>Note</h3><p>
Running <code class="literal">npm init -y</code> initializes the project with default values in the <code class="literal">package.json</code> file.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec30"></a>Installing dependencies</h3></div></div></div><p>We will be making use of the <span>external</span><a id="id326034199" class="indexterm"></a> dependencies listed here:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><code class="literal">koa</code>: Our base framework.</li><li style="list-style-type: disc"><code class="literal">koa-router</code>: RESTful Routing middleware for Koa</li><li style="list-style-type: disc"><code class="literal">koa-logger</code>: Development style logger middleware for Koa</li><li style="list-style-type: disc"><code class="literal">koa-body</code>: Request body parser middleware for Koa</li><li style="list-style-type: disc"><code class="literal">koa-session</code>: Session middleware for Koa</li><li style="list-style-type: disc"><code class="literal">koa-views</code>: Template rendering middleware for Koa
</li><li style="list-style-type: disc"><code class="literal">mongoose</code>: <span class="strong"><strong>Object data modeling</strong></span> (<span class="strong"><strong>ODM</strong></span>) library <span>for</span><a id="id325756268" class="indexterm"></a> MongoDB and Node.js</li><li style="list-style-type: disc"><code class="literal">mongoose-unique-validator</code>: Unique constraint validator plugin for mongoose</li><li style="list-style-type: disc"><code class="literal">ejs</code>: Templating language for JavaScript</li><li style="list-style-type: disc"><code class="literal">bcrypt</code>: Password-hashing library for Node</li></ul></div><p>To install the required dependencies, we can run the following command:</p><pre class="programlisting"><span class="strong"><strong>npm install --save koa koa-router koa-logger koa-body koa-views koa-session mongoose mongoose-unique-validator ejs bcrypt</strong></span></pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note25"></a>Note</h3><p>With newer versions of <code class="literal">npm</code>, you do not need to specify the <code class="literal">--save</code> flag for installed packages to be added as dependencies in the <code class="literal">package</code><code class="literal">.json</code> file. You can simply install and save dependencies with <code class="literal">npm install</code> or <code class="literal">npm i</code>.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec31"></a>Project structure</h3></div></div></div><p>We will be using a similar modular file and <span>folder</span><a id="id325756457" class="indexterm"></a> structure as seen in the previous chapter. Initially, we will create the following folders and files:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><code class="literal">controllers</code>: This folder will house the files that will contain our application's main business logic.</li><li style="list-style-type: disc"><code class="literal">middleware</code>: This folder will contain all our custom middleware.</li><li style="list-style-type: disc"><code class="literal">models</code>: This folder will contain our data objects and mongoose schemas.</li><li style="list-style-type: disc"><code class="literal">views</code>: This folder will contain the template files for our application.</li><li style="list-style-type: disc"><code class="literal">index.js</code>: This is the entry point for our application. Here, we will initialize the application, register all the required middleware, and start the server.</li><li style="list-style-type: disc"><code class="literal">db.js</code>: This is where we will connect to our MongoDB database using Mongoose.</li></ul></div><p>To create the needed folders, you can run the following command in the terminal:</p><pre class="programlisting"><span class="strong"><strong>mkdir controllers middleware models views</strong></span></pre><p>To create the needed files, you can run this command in the terminal:</p><pre class="programlisting"><span class="strong"><strong>touch index.js db.js</strong></span></pre><p>After initializing the project, installing the needed dependencies, and <span>creating</span><a id="id325933044" class="indexterm"></a> the required files and folders, we should have the following structure:</p><pre class="programlisting">├── controllers
├── db.js
├── index.js
├── middleware
├── models
├── package-lock.json
├── package.json
└── views</pre></div></div>