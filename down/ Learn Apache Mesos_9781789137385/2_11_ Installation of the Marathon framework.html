<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec17"></a>Installation of the Marathon framework</h2></div></div><hr /></div><p>The following are the <span>steps</span><a id="id325245074" class="indexterm"></a> to install the Marathon package on the EC2 instance:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>The following screenshot shows the Marathon server in which we will install the package and add the Mesosphere repository to install the Marathon package:</li></ol></div><div class="mediaobject"><img src="/graphics/9781789137385/graphics/90c37c87-0009-482b-ae7d-8a4a90ed389a.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="2" type="1"><li>Install the Marathon by run the following command:</li></ol></div><div class="mediaobject"><img src="/graphics/9781789137385/graphics/aa6815a6-fd90-409c-b639-981f4a19a725.png" /></div><div class="mediaobject"><img src="/graphics/9781789137385/graphics/226ca614-e723-4446-837e-bbe2afcebdbc.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="3" type="1"><li>Perform the <code class="literal">sudo rpm -qa | grep marathon</code> command, which will show the Marathon package installed:</li></ol></div><div class="mediaobject"><img src="/graphics/9781789137385/graphics/98942b6a-43a9-4ded-91b9-0e040f17cf36.png" /></div><p> </p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec11"></a>Configuration of Marathon</h3></div></div></div><p>We need to perform two <span>configurations</span><a id="id325490090" class="indexterm"></a> where we will define the Mesos master-related information and ZooKeeper information.</p><p>The following are the steps to work on the configuration of Marathon:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Edit the <code class="literal">marathon.service</code> file by opening the file that is inside <code class="literal">/etc/systemd/system/multi-user.target.wants/</code>. Type <code class="literal">ls -arlt</code> and you will see the <code class="literal">marathon.service</code> file:</li></ol></div><div class="mediaobject"><img src="/graphics/9781789137385/graphics/28503a5e-c134-468c-ae67-d57b2463c181.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="2" type="1"><li>Open that file, and you will see the basic configuration of Marathon. The language starts with <code class="literal">ExecStart</code>. Go to the end and input the master information and the ZooKeeper information. This information will help the Marathon framework to connect to Mesos master, and this information will store the Marathon information inside ZooKeeper:</li></ol></div><div class="mediaobject"><img src="/graphics/9781789137385/graphics/2ac48d79-99ca-4502-aa17-d60dc9265275.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="3" type="1"><li>Save the file, clear the screen, and do the restart. As we have edited the service file, you need to run <code class="literal">sudo systemctl daemon-reload</code>.</li><li>To run Marathon, check <span>whether</span><a id="id325490226" class="indexterm"></a> the JDK is installed by <code class="literal">java -version</code> command.</li><li>Then run <code class="literal">sudo service marathon start</code> command and check the status with <code class="literal">sudo service marathon start -l</code>. In the following screenshot, you can see that it's in the running state and it has started receiving offers as well:</li></ol></div><div class="mediaobject"><img src="/graphics/9781789137385/graphics/b3624408-b287-42d9-a97a-f4cd0a51f5be.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="6" type="1"><li>Check whether we are able to access the Marathon console. Use the hostname entries where it defined <code class="literal">marathon1</code> to the public IP in the local desktop.</li></ol></div><div class="orderedlist"><ol class="orderedlist arabic" start="7" type="1"><li>Set the URL as <code class="literal">marathon1:8080</code>. As soon as <span>you</span><a id="id325493486" class="indexterm"></a> press <span class="emphasis"><em>Enter</em></span>, it will bring up the landing page of Marathon, where you will see <strong class="userinput"><code>STATUS</code></strong>, <strong class="userinput"><code>HEALTH</code></strong>, and <strong class="userinput"><code>RESOURCES</code></strong>:</li></ol></div><div class="mediaobject"><img src="/graphics/9781789137385/graphics/0f073984-9890-4f87-95bf-32aadcf626eb.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="8" type="1"><li>In the Marathon framework, create an application that will get deployed on the Mesos slave.</li></ol></div><p>This concludes the setup of Marathon, the Mesos master, and the Mesos slave.</p></div></div>