<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec27"></a>Changing hostnames on CentOS</h2></div></div><hr /></div><p>To successfully install <span>Mesos</span>, we <span>need</span><a id="id325245090" class="indexterm"></a> to change the hostname for all of the components, as we want them all to have unique and simple hostnames, so they can seamlessly interact with each other and the system. This is similar to using DNS names instead of IP addresses. Hostnames of components are generally a combination of IP addresses and paths to EC2 servers. So, let's see how we can make simpler hostnames.</p><p>After logging in to AWS, go on to the <code class="literal">master1</code> tab. We will check our current hostname, before moving on to changing it. To get started, run the following command:</p><pre class="programlisting"><span class="strong"><strong>sudo hostname ctl</strong></span></pre><p><span>Subsequently</span>, you will see your current <code class="literal">hostname</code>, which will be a combination of your internal IP address and EC2 paths.</p><p>To change the <code class="literal">hostname</code>, just key in the following command:</p><pre class="programlisting"><span class="strong"><strong>sudo hostnamectl set-hostname --static mesos-master1</strong></span></pre><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p>Here, <code class="literal">mesos-master1</code> is the name that we have assigned to our host—but you can assign any name you wish. Also, a small point to note here is that if you don't run this command using <code class="literal">sudo</code>, you will be asked for authentication.</p><p>After this, you will have to change your <code class="literal">cloud.cfg</code> file as per the following command:</p><pre class="programlisting"><span class="strong"><strong>sudo vi /etc/cloud/cloud.cfg</strong></span></pre><p>After opening the file with the preceding command, define a parameter at the end as follows:</p><pre class="programlisting">preserve_hostname:true</pre><p>Then save and exit using <code class="literal">:wq!</code>.</p><p>Now let's verify that we have successfully changed the <code class="literal">hostname</code>. For this, you will first have to disconnect and log in again:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Disconnect master 1</li><li>Open it again and log in</li></ol></div><p>Repeat this process for all the servers: <code class="literal">master1</code>, <code class="literal">master2</code>, and <code class="literal">master3</code>. and the agents of <code class="literal">slave1</code>, <code class="literal">slave2</code>, <code class="literal">slave3</code>. Lastly, do the same for both the marathon servers.</p><p>Now let's move on to establishing communication between them.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec14"></a>Establishing communication</h3></div></div></div><p>We have just changed the hostnames for all the components—now, we <span>need</span><a id="id325493459" class="indexterm"></a> to enable interaction between them. To do this, we will update the host entries on all the servers so that they can communicate with each other. So, basically, we will be communicating with our servers using DNS names, instead of IP addresses!</p><p>Here are some simple steps to follow to make the host entries. Go on to any of the servers and enter the following command:</p><pre class="programlisting"><span class="strong"><strong>sudo vi /etc/hosts</strong></span></pre><p> </p><p> </p><p> </p><p> </p><p>You should get a blank hosts file. Make the following entries to this file:</p><div class="mediaobject"><img src="/graphics/9781789137385/graphics/7d2fd49f-7094-42ac-8642-c94ded37d742.png" /></div><p> </p><p>Do this for all the masters, as well as for the two marathons, taking care of the internal IPs.</p><p>With this done, we can now move on to installation.</p></div></div>