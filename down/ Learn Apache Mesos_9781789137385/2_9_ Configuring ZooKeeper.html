<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec15"></a>Configuring ZooKeeper</h2></div></div><hr /></div><p>Perform the <span>following</span><a id="id325245248" class="indexterm"></a> steps to configure ZooKeeper:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Type <code class="literal">cd /etc /mesos</code>.</li><li>Open the <code class="literal">vi zk</code> file. The following screenshot shows the default Mesos definition. This is the default ZooKeeper information. The line starts with <code class="literal">zk</code> and ends with <code class="literal">/mesos</code>, and in between, we will have the IP address and the ZooKeeper port:</li></ol></div><div class="mediaobject"><img src="/graphics/9781789137385/graphics/6a1dd9c9-2528-4e76-a061-19a90b96ec98.png" /></div><p> </p><div class="orderedlist"><ol class="orderedlist arabic" start="3" type="1"><li>Replace this localhost with the host IP address by typing <code class="literal">ifconfig</code> in order to get the IP. As we have a standalone server, we will use the IP address that is highlighted here:</li></ol></div><div class="mediaobject"><img src="/graphics/9781789137385/graphics/2bb21949-5302-49c0-987e-50f5b0f7fa96.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="4" type="1"><li>Go to <code class="literal">cd /etc /mesos</code> and run <code class="literal">sudo vi zk</code> to <span>replace</span><a id="id325490238" class="indexterm"></a> the IP.</li><li>Save the file. This completes the ZooKeeper connection information for Mesos.</li><li>Map the unique ID by typing <code class="literal">var/lib/zookeeper</code> and <code class="literal">cat myid</code>.</li><li>It has defined <code class="literal">1</code>. As we have a standalone system, we will keep ID <code class="literal">1</code> for this server only.</li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip3"></a>Note</h3><p>If you don't have this <code class="literal">myid</code> file, you need to create it by <span>typing</span><code class="literal">myid</code>, and inside the file you can define the number <code class="literal">1</code>.</p></div><div class="orderedlist"><ol class="orderedlist arabic" start="8" type="1"><li>To map the ZooKeeper ID, type <code class="literal">cd /etc/zookeeper/conf/</code> and run cat <code class="literal">zoo.cfg</code>, as shown here:</li></ol></div><div class="mediaobject"><img src="/graphics/9781789137385/graphics/49ef8ae4-8605-48e7-9558-e8b9d8c1752a.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="9" type="1"><li>Open the file and add this:</li></ol></div><div class="mediaobject"><img src="/graphics/9781789137385/graphics/071d2bbf-8d4f-4c70-a2b2-6d5149e5abe2.png" /></div><div class="mediaobject"><img src="/graphics/9781789137385/graphics/ad0e9118-771f-414b-bdb4-3eaf4fef9a23.png" /></div><p>This is required to elect the leader and to have communication. So, this step is important when your cluster environment is in your multiple nodes. We will do this as it is and save the file.</p><p> </p><div class="orderedlist"><ol class="orderedlist arabic" start="10" type="1"><li>To configure Mesos, go inside <code class="literal">cd etc/mesos-master</code> and define your quorum hostname and IP address. The quorum setting is required to make a decision by electing a leader, but in this scenario we will keep the default what we have. So, if you see <code class="literal">vi quorum</code>, or you can do <code class="literal">cat quorum</code>, keep the setting as <code class="literal">1</code>.</li><li>Change the IP address and hostname, check your IP address, which is <code class="literal">10.0.1.42</code>. Then type <code class="literal">vi hostname</code> and define the hostname. Check the hostname, which is <code class="literal">mesos</code>. Type <code class="literal">sudo vi hostname</code> and make sure the hostname is <code class="literal">mesos</code>.</li></ol></div><p>Thus, we have <span>completed</span><a id="id325245145" class="indexterm"></a> Mesos configuration by adding the <code class="literal">quorum</code>, <code class="literal">ip</code>, and <code class="literal">hostname</code>:</p><div class="mediaobject"><img src="/graphics/9781789137385/graphics/c029ff90-45a2-42cc-9ec5-7033707afa44.png" /></div></div>