<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec21"></a>Setting up the framework</h2></div></div><hr /></div><p>This section will give you insights on how to <span>set</span><a id="id325245074" class="indexterm"></a> up a multi-node cluster.</p><p> </p><p>We already have Marathon and master servers ready, but they are in our development environment. So, we will change some configurations, and then extend them to production! Further, we will be including more servers as well, as described in the architecture diagram in the previous section.</p><p>The steps to install the necessary packages are as follows:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Add the Mesos repository with the following command:</li></ol></div><pre class="programlisting"><span class="strong"><strong>rpm -Uvh http://repos.mesosphere.io/el/7/noarch/RPMS/mesosphere-el-repo-7-1.noarch.rpm</strong></span></pre><p>This needs to be run on both mesos-master and slave servers.</p><div class="orderedlist"><ol class="orderedlist arabic" start="2" type="1"><li>After this, we can install <code class="literal">mesos</code> as follows:</li></ol></div><pre class="programlisting"><span class="strong"><strong>sudo yum install mesos</strong></span></pre><p>On the master server, this will install both master and slave services, but we will stop the slave services from running on all three master servers. Run this installation command on both master and slave servers.</p><div class="orderedlist"><ol class="orderedlist arabic" start="3" type="1"><li>To stop Mesos slave services running on master servers, enter the following command on the master tab:</li></ol></div><pre class="programlisting"><span class="strong"><strong>sudo service mesos-slave stop</strong></span></pre><div class="orderedlist"><ol class="orderedlist arabic" start="4" type="1"><li>Then, install the ZooKeeper on master servers as follows:</li></ol></div><pre class="programlisting"><span class="strong"><strong>sudo yum install mesosphere-zookeeper</strong></span></pre><p>Ensure you run this command only on master servers.</p><div class="orderedlist"><ol class="orderedlist arabic" start="5" type="1"><li>Disable master services on slave servers:</li></ol></div><pre class="programlisting"><span class="strong"><strong>sudo systemctl disable mesos-slave</strong></span></pre><div class="orderedlist"><ol class="orderedlist arabic" start="6" type="1"><li>Next, install <code class="literal">docker</code> on slave servers, as follows:</li></ol></div><pre class="programlisting"><span class="strong"><strong>sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</strong></span></pre><p> </p><div class="orderedlist"><ol class="orderedlist arabic" start="7" type="1"><li>Start the <code class="literal">docker</code> service with this command:</li></ol></div><pre class="programlisting"><span class="strong"><strong>sudo service docker start</strong></span></pre><p> </p><p> </p><p> </p><p> </p><div class="orderedlist"><ol class="orderedlist arabic" start="8" type="1"><li>Lastly, install <code class="literal">marathon</code> on our Marathon servers as follows:</li></ol></div><pre class="programlisting"><span class="strong"><strong>sudo yum install marathon</strong></span></pre><p>This concludes our quick walkthrough of installing the necessary packages on our servers, as per their roles. You can find more detail on this in <span class="emphasis"><em>Mesos Administration</em></span> section.</p><p>Let's now move on to the core topic of this chapter, which is <span>configuring</span><a id="id325493478" class="indexterm"></a> our mesos-master.</p></div>