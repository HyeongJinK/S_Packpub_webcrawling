<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec31"></a>Adding the currentNodeUrl</h2></div></div><hr /></div><p>After testing our nodes, the next <span>thing</span><a id="id325469152" class="indexterm"></a> that we're going to do is alter the commands in our <code class="literal">package.json</code> slightly. The reason that we're going to do this is because we want each of our network nodes to be aware of what URL they are currently on. For example, they could be on <code class="literal">http://localhost:3001</code>, <code class="literal">localhost:3002</code>, <code class="literal">localhost:3003</code>, and so on. Therefore, we want each node to be aware of the URL that it is being hosted on.</p><p>In our <code class="literal">package.json</code>, as a third parameter to each of our commands, we are going to add the node's URL. Therefore, our first node's URL will simply be <code class="literal">http://localhost:3001</code>. It is likely that for our second node it will be <code class="literal">http://localhost:3002</code>. Similarly, you can add URLs for the remaining nodes, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781789618822/graphics/7324e260-73c8-4f57-90a4-65c4e4494191.png" /></div><p>After adding the URLs, save the file. Now we have the URL of each node being passed in as an argument to the command we use to run each node. Therefore, we should have access to these URLs inside of our file, just like we have access to our port variables inside of our files.</p><p>Now let's go to the <code class="literal">blockchain.js</code> file, and at the part where we define the const, we're going to type the following:</p><pre class="programlisting">const currentNodeUrl = process.argv[3];</pre><p>With this command, we should have access to the current node's URL by using the <code class="literal">currentNodeUrl</code> variable.</p><p>Now we should assign the <code class="literal">currentNodeUrl</code> to our <code class="literal">Blockchain</code> data structure. We do this by typing the following highlighted line of code inside of our <code class="literal">function Blockchain {}</code>:</p><pre class="programlisting">function Blockchain() {
       this.chain = [];
       this.pendingTransactions = [];

<span class="strong"><strong>this.currentNodeUrl = currentNodeUrl;</strong></span>

       this.createNewBlock();
};</pre><p>Next, we also want our blockchain to be aware of all of the other nodes that are inside of our network. Therefore, we will add the following code below the preceding highlighted line of code: </p><pre class="programlisting">this.networkNodes = [];</pre><p>In the further sections, we'll fill up this <span>array</span><a id="id325693381" class="indexterm"></a> with the node URLs of all the other nodes in our network so that every node will be aware of all the other nodes inside of our blockchain network.</p></div>