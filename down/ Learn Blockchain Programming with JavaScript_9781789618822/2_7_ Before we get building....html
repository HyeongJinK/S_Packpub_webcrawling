<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec13"></a>Before we get building...</h2></div></div><hr /></div><p>Before we get into building the blockchain, there are two crucial concepts that we need to familiarize ourselves with. These important concepts are as follows:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">The JavaScript constructor function</li><li style="list-style-type: disc">The prototype object</li></ul></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec4"></a>An explanation of the JavaScript constructor function </h3></div></div></div><p>Becoming familiar with the <span>constructor</span><a id="id325966060" class="indexterm"></a> function is important as we'll be <span>using</span><a id="id325966067" class="indexterm"></a> it to build our blockchain data structure. By now, you must be wondering what a constructor function is and what it actually does.</p><p>A constructor function is simply a function that creates an object class and allows you to easily create multiple instances of that particular class. What this actually means is that the constructor function allows you to create a lot of objects very quickly. All of these objects that are created will have the same properties and functionalities because they are all part of the same class. Now, all of this might seem a little bit confusing when you hear it for the first time, but don't worry — we'll try to understand what a constructor function is with the help of an example.</p><p>Let's take Facebook, for example. Facebook has over one-and-a half billion users, which are all objects of the same class and have similar properties such as name, email, password, birthday, and so on. For our example, let's assume that we are building the Facebook website and want to create a bunch of different users for it. Let's do this by creating a <code class="literal">User</code> constructor function.</p><p>To learn and explore the constructor functions, let's use the Google Chrome console. We can access the console by going to Google Chrome and simply pressing <span class="emphasis"><em>command</em></span> + <span class="emphasis"><em>option</em></span> + <span class="emphasis"><em>J</em></span> for Mac users and <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>I</em></span> for Windows users. Alternatively, we can simply go to the menu option, go to <strong class="userinput"><code>More Tools,</code></strong> and then select the <strong class="userinput"><code>Developer Tools</code></strong> option, as shown in the following screenshot: </p><div class="mediaobject"><img src="/graphics/9781789618822/graphics/7b14ebbf-d061-4716-ad57-aa70cc92da74.png" /></div><p>Following the aforementioned steps will open the console for you, as shown in the following screenshot: </p><div class="mediaobject"><img src="/graphics/9781789618822/graphics/a62f79a4-13ff-4b1c-b904-04bd051031ec.png" /></div><p> </p><p>The constructor function that we'll be coding in this example will allow us to create multiple users or multiple user objects that will have the same properties and functionalities. The code to create this <code class="literal">User</code> constructor function begins by defining it as follows: </p><pre class="programlisting">function User() { 

}</pre><p>Inside of the parentheses, <code class="literal">()</code>, let's pass the properties that we want each of our <code class="literal">User</code> objects to have. We're going to pass properties such as <code class="literal">firstName</code>, <code class="literal">lastName</code>, <code class="literal">age</code>, and <code class="literal">gender</code> because we want all of our user objects to have these components.</p><p>We then assign these <span>parameters</span><a id="id326118381" class="indexterm"></a> to our <code class="literal">User</code> objects by using the <code class="literal">this</code> keyword, as <span>shown</span><a id="id326118394" class="indexterm"></a> in the following block of code: </p><div class="mediaobject"><img src="/graphics/9781789618822/graphics/adb84f1c-876d-4f63-af32-772e9675ff85.png" /></div><p>This is how we define the constructor function in JavaScript. Now, reading through the preceding code block, you might be wondering what we did and what the <code class="literal">this</code> keyword is all about.</p><p>We're going to use this constructor function to create a lot of user objects. The <code class="literal">this</code> keyword is simply referring to each of the user objects that we're going to create. This might all seem a bit overwhelming right now, but let's run through a couple of examples and try to gain more clarity on it. </p><p>Let's begin using our <code class="literal">User</code> constructor function. To make some <code class="literal">User</code> objects, also known as <code class="literal">User</code> instances, follow these steps: </p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>The first user that we are going to create – let's call it <code class="literal">user1</code>– will be defined as follows: </li></ol></div><pre class="programlisting">var user1 = new User('John','Smith',26,'male');</pre><p>In the preceding code, you may have noticed that we used the <code class="literal">new</code> keyword to invoke our constructor function and make a user object, which is how we get our constructor function to work.</p><div class="orderedlist"><ol class="orderedlist arabic" start="2" type="1"><li>Then press <span class="emphasis"><em>Enter,</em></span> and <code class="literal">user1</code> is in the system. Now, if we type <code class="literal">user1</code>  in the console, we'll be able to see what we just created in the previous step:</li></ol></div><div class="mediaobject"><img src="/graphics/9781789618822/graphics/e6c4fff9-d98d-4473-94c5-dda3db43b8e4.png" /></div><p>In the preceding output screenshot, we can see that <code class="literal">user1</code> is an object of the <code class="literal">User</code> class. We can also see that<code class="literal">user1</code>has a<code class="literal">firstName</code>of <code class="literal">John</code>, a<code class="literal">lastName</code>of <code class="literal">Smith</code>, an <code class="literal">age</code>of <code class="literal">26</code>, and <code class="literal">gender</code> of <code class="literal">male</code> because these are the parameters that we passed into the constructor function.</p><div class="orderedlist"><ol class="orderedlist arabic" start="3" type="1"><li>For clarity, try adding one more user. This time, we'll create another user called <code class="literal">user200</code> and pass in into the <code class="literal">new User ( )</code> function with the user's properties, such as a first name of <code class="literal">Jill</code>, a last name of <code class="literal">Robinson</code>, an age of <code class="literal">25</code>, and a <code class="literal">female</code> gender: </li></ol></div><pre class="programlisting">var user200 = new User('Jill', 'Robinson', 25, 'female');</pre><div class="orderedlist"><ol class="orderedlist arabic" start="4" type="1"><li>By pressing <span class="emphasis"><em>Enter</em></span>, our new <code class="literal">user200</code> will be in the system. Now, if we type <code class="literal">user200</code> into the console and press <span class="emphasis"><em>Enter</em></span>, we'll see the following output:</li></ol></div><div class="mediaobject"><img src="/graphics/9781789618822/graphics/b234e9a7-8fdf-430e-906a-37dc970de3ec.png" /></div><p>In the preceding output, we can see that <code class="literal">user200</code> is an object of the <code class="literal">User</code> class, just like <code class="literal">user1</code>, and that she has a first name of <code class="literal">Jill</code>, a last name of <code class="literal">Robinson</code>, an age of <code class="literal">25</code>, and a <code class="literal">female</code> gender because these were the parameters that we passed into our constructor function.</p><p>Now, you might be <span>wondering</span><a id="id326141735" class="indexterm"></a> how all of these properties that we <span>mentioned</span><a id="id326141741" class="indexterm"></a> got assigned correctly. This was all due to the <code class="literal">this</code> keyword that we mentioned earlier. When we create our constructor function, we use the <code class="literal">this</code> keyword to assign properties. When it comes to a constructor function, the <code class="literal">this</code> keyword does not refer to the function that it is in – in our case, the <code class="literal">User</code> function. Instead, <code class="literal">this</code> refers to the object that will be created by the constructor function.</p><p>This signifies that if we use the constructor function to create an object, we must make sure that the property and their objects are first name, last name, age, and gender, or whenever you make your constructor function, set the <code class="literal">firstName</code> property as equal to the <code class="literal">firstName</code> parameter that is passed in, and do the same for the rest of the properties.</p><p>This is how a constructor function works and how the <code class="literal">this</code> keyword plays an important role in the constructor function.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec5"></a>Explanation of the prototype object</h3></div></div></div><p>Another important <span>concept</span><a id="id326199031" class="indexterm"></a> that we need to discuss before getting into coding our blockchain data structure is the prototype object. The <span class="strong"><strong>prototype object</strong></span> is simply an object that multiple other objects can refer to in order to get any information or functionality that they need. For our example, which we discussed in the previous section, each of our constructor functions will have a prototype that all of their instances will be able to refer to. Let's try to understand what a prototype object means by exploring a couple of examples.</p><p>For example, if we take our <code class="literal">User</code> constructor function that we created in the previous section, we can put those properties onto its prototype. Then, all of our user instances like <code class="literal">user1</code> and <code class="literal">user200</code> will have access to and be able to use that prototype. Let's add a property on our <code class="literal">User</code> prototype and see what happens. To add a property on the user prototype, we will type the following code:</p><pre class="programlisting">User.prototype. </pre><p>Then let's add the name of the property to the preceding code. For example, let's say we want a property email domain: </p><pre class="programlisting">User.prototype.emailDomain </pre><p>For our example, assume that Facebook wants every user to have an <code class="literal">@facebook.com</code> email address, so we'll set the email domain property as follows: </p><pre class="programlisting">User.prototype.emailDomain = '@facebook.com';</pre><p>Now let's check out our <code class="literal">user1</code> object again: </p><div class="mediaobject"><img src="/graphics/9781789618822/graphics/3da560a1-fb3f-4ef2-911d-d3f2e64ebf82.png" /></div><p> </p><p> </p><p>In the preceding screenshot, we can see that <code class="literal">user1</code> does not have the email domain property that we just added to it. However, we can expand the <code class="literal">user1</code> object, as well as its dunder proto, as highlighted in the following screenshot:  </p><div class="mediaobject"><img src="/graphics/9781789618822/graphics/84472366-36f8-4b20-a79f-ffed32845242.png" /></div><p>When we do this, we can observe the <code class="literal">emailDomain</code> property that we just added, which is set to <code class="literal">@facebook.com</code>.</p><p>Just to clarify, the dunder proto and the prototype object that we actually put the <code class="literal">emailDomain</code> property on are actually not exactly the same, but are very similar. Basically, anything that we put on the constructor function prototype will have access to the dunder proto of any of the objects that we create with the constructor function.</p><p>So, if we put <code class="literal">emailDomain</code> on the constructor function prototype, we'll have access to it on the <code class="literal">user1</code> dunder proto, the <code class="literal">user200</code> dunder proto, and the dunder <span>protos</span><a id="id326272099" class="indexterm"></a> of any other user instance that we've created.</p><p>Now let's get back to the <code class="literal">emailDomain</code> property. We put the <code class="literal">emailDomain</code> property and the user prototype. We can see that we don't have the property on the actual <code class="literal">user200</code> object, but we have that property under the <code class="literal">user200</code> dunder proto. So, if we type the following command, we will still have access to that property: </p><pre class="programlisting">user200.emailDomain</pre><p>We should then see the following output: </p><div class="mediaobject"><img src="/graphics/9781789618822/graphics/52f6219d-1cb6-4dba-9df2-3f43bc2e853f.png" /></div><p>So, this is how the prototype object works. If we put a property on the constructor function's prototype, all of the instances of the constructor function will have access to that property.</p><p>The same thing applies for any methods or functions that we might want all of our instances to have. Let's take a look at another example, assuming that we want all of our user instances to have a <code class="literal">getEmailAddress</code> method. We can put this on the prototype of the constructor function as follows: </p><pre class="programlisting">User.prototype.getEmailAddress = function () { 
}    </pre><p>Now let's have this <code class="literal">getEmailAddress</code> method return some specific properties, as follows (highlighted):</p><pre class="programlisting">User.prototype.getEmailAddress = function () { 
<span class="strong"><strong>    return this.firstName + this.lastName + this.emailDomain;</strong></span>
} </pre><p>Now both <code class="literal">user1</code> and <code class="literal">user200</code> should have <span>this</span><a id="id326339729" class="indexterm"></a> method under their dunder proto, so let's check it out. Type in our users, and under their dunder proto you will get to observe the preceding function, as shown in the following screenshot: </p><div class="mediaobject"><img src="/graphics/9781789618822/graphics/3db93b7f-f21e-4bb9-b69b-16e7e52038bd.png" /></div><p>In the preceding screenshot, we can observe that both <code class="literal">user1</code> and <code class="literal">user200</code> have the <code class="literal">getEmailAddress</code> method under their dunder proto. </p><p>Now, if we type <code class="literal">user200.getEmailAddress</code> and then invoke it, the method will then create user200's Facebook email address for us, as shown in the following screenshot:  </p><div class="mediaobject"><img src="/graphics/9781789618822/graphics/254ef926-da57-4fc7-badb-483c3d9d865f.png" /></div><p>A similar thing will happen if we invoke the method for <code class="literal">user1</code>:</p><div class="mediaobject"><img src="/graphics/9781789618822/graphics/bb34eb87-7171-4f0a-9833-2fa658680d87.png" /></div><p>So, this is how we use the prototype object with a constructor function. If we want our constructor function instances to all have the properties that are the same for all of them, or all have a method that is the same for all of them, we will put it on the prototype instead of the constructor <span>function</span><a id="id326347405" class="indexterm"></a> itself. This will help in keeping the instances more lean and cleaner.</p><p>This is all the background information that we need to know in order to start coding our blockchain data structure. In the following section, we will start building our blockchain by using a constructor function and the prototype object.</p></div></div>