<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch07lvl1sec53"></a>Building the getBlock method</h2></div></div><hr /></div><p>Let's build a new method called <code class="literal">getBlock</code> that will <span>take</span><a id="id325458919" class="indexterm"></a> the given <code class="literal">blockHash</code> and search the entire blockchain for the block associated with that particular hash. In order to build the <code class="literal">getBlock</code> method, follow these steps: </p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Go to the <code class="literal">dev/blockchain.js</code> file and after the <code class="literal">chainIsValid</code> method, define this new method as follows: </li></ol></div><pre class="programlisting">Blockchain.prototype.getBlock = function(blockHash) { 

};</pre><p> </p><p> </p><p> </p><p> </p><div class="orderedlist"><ol class="orderedlist arabic" start="2" type="1"><li>Inside this method, we want to iterate through the entire blockchain and search for the block that has a particular <code class="literal">blockHash</code> value. Then, this method will return that specific block to us. We're going to do all this with the help of a <code class="literal">for</code> loop:</li></ol></div><pre class="programlisting">Blockchain.prototype.getBlock = function(blockHash) { 
<span class="strong"><strong>this.chain.forEach(block =&gt; {</strong></span>
<span class="strong"><strong></strong></span>
<span class="strong"><strong>    });</strong></span>
};</pre><p>When defining the <code class="literal">for</code> loop, we cycle through every single <code class="literal">block</code> in the blockchain.</p><div class="orderedlist"><ol class="orderedlist arabic" start="3" type="1"><li>Next, inside the loop, mention the conditions with the help of <code class="literal">if</code> statements, as follows: </li></ol></div><pre class="programlisting">Blockchain.prototype.getBlock = function(blockHash) { 
    this.chain.forEach(block =&gt; {
<span class="strong"><strong>if (block.hash === blockHash)</strong></span>
    });
};</pre><div class="orderedlist"><ol class="orderedlist arabic" start="4" type="1"><li>To signify that the <span>correct</span><a id="id325704603" class="indexterm"></a> block that we're searching for is found, we're going to use a flag. Let's define this flag variable as has been highlighted in the following code: </li></ol></div><pre class="programlisting">Blockchain.prototype.getBlock = function(blockHash) { 
<span class="strong"><strong> let correctBlock = null;</strong></span>
    this.chain.forEach(block =&gt; {
            if (block.hash === blockHash) 
    });
};</pre><div class="orderedlist"><ol class="orderedlist arabic" start="5" type="1"><li>As we iterate through all of the blocks in the chain, if we come across the correct block, we assign it to <code class="literal">correctBlock</code>. Let's mention this condition as follows:</li></ol></div><pre class="programlisting">Blockchain.prototype.getBlock = function(blockHash) { 
<span class="strong"><strong></strong></span>let correctBlock = null;
    this.chain.forEach(block =&gt; {
            if (block.hash === blockHash) <span class="strong"><strong>correctBlock = block;</strong></span>
    });
};</pre><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><div class="orderedlist"><ol class="orderedlist arabic" start="6" type="1"><li>Finally, at the end of <span>this</span><a id="id325704794" class="indexterm"></a> method, we want to return the <code class="literal">correctBlock</code> as follows:</li></ol></div><pre class="programlisting">Blockchain.prototype.getBlock = function(blockHash) { 
<span class="strong"><strong></strong></span>let correctBlock = null;
    this.chain.forEach(block =&gt; {
            if (block.hash === blockHash) correctBlock = block;  
    });
<span class="strong"><strong>return correctBlock</strong></span>
};</pre></div>