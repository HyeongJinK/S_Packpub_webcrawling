<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch01lvl1sec13"></a>Installing Keras with Jupyter Notebook in a Docker image</h2></div></div><hr /></div><p>In this recipe, we <span>learn</span><a id="id324602825" class="indexterm"></a> how to <span>install</span><a id="id324812534" class="indexterm"></a> and use a <span>Docker</span><a id="id324812542" class="indexterm"></a> container running Keras inside a container and access it using Jupyter.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec11"></a>Getting ready</h3></div></div></div><p>Install the latest version <span>of</span><a id="id324812557" class="indexterm"></a> the Docker CLI from <a class="ulink" href="https://docs.docker.com/engine/installation/" target="_blank">https://docs.docker.com/engine/installation/</a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec12"></a>How to do it...</h3></div></div></div><p>In the following section, we will be learning how to install the Docker container.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec6"></a>Installing the Docker container </h4></div></div></div><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Execute the following <span>command</span><a id="id324812589" class="indexterm"></a> on the Terminal to run the container. The container image is available with the tag <code class="literal">rajdeepd/jupyter-keras<code class="literal">:</code></code></li></ol></div><pre class="programlisting"><span class="strong"><strong>docker run -d -p 8888:8888 rajdeepd/jupyter-keras start-notebook.sh --NotebookApp.token=''</strong></span></pre><div class="orderedlist"><ol class="orderedlist arabic" start="2" type="1"><li>This will install the Notebook locally and start it as well. You can execute the <code class="literal">docker ps -a</code> command and see the output in the Terminal, as follows:</li></ol></div><pre class="programlisting"><span class="strong"><strong><span>CONTAINER ID<span></span>IMAGE <span></span>COMMAND<span></span>CREATED <span></span>STATUS <span></span>PORTS <span></span>NAMES
</span><span>45998a5eea89<span></span>rajdeepd/jupyter-keras<span></span>"tini -- start-not..." <span></span>About an hour ago Up About an hour <span></span>0.0.0.0:8888-&gt;8888/tcp<span></span>admiring_wing</span></strong></span></pre><p>Please note that the host port of <code class="literal">8888</code> is mapped to the container port of <code class="literal">8888</code>.</p><div class="orderedlist"><ol class="orderedlist arabic" start="3" type="1"><li>Open the browser at the following URL <code class="literal">http://localhost:8888</code>:</li></ol></div><div class="mediaobject"><img src="/graphics/9781788621755/graphics/81742f08-cb20-4ea7-ba14-a4137b3e7720.png" /></div><p>You will notice that Jupyter is running. You can create a new Notebook and run Keras-specific code.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec7"></a>Installing the Docker container with the host volume mapped</h4></div></div></div><p>In this section, we look at <span>how</span><a id="id325345201" class="indexterm"></a> to map the local volume <code class="literal">$(pwd)/keras-samples</code> to the work directory in the container.</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Execute the <code class="literal">note -v flag</code> command, which does the volume mapping:</li></ol></div><pre class="programlisting"><span class="strong"><strong>docker run -d -v /$(pwd)/keras-samples:/home/jovyan/work \</strong></span>
<span class="strong"><strong> -p 8888:8888 rajdeepd/jupyter-keras start-notebook.sh --NotebookApp.token=''</strong></span></pre><p>If you go to the URL, you will notice the sample page being displayed.</p><p> </p><p> </p><div class="orderedlist"><ol class="orderedlist arabic" start="2" type="1"><li>If you got <code class="literal">/$(pwd)/keras-samples</code>, you will notice that the Notebooks are available in the <code class="literal">host</code> directory, and they also can be seen being loaded by Jupyter:</li></ol></div><pre class="programlisting"><span class="strong"><strong>rdua1-ltm:keras-samples rdua$ pwd</strong></span>
<span class="strong"><strong> /Users/rdua/personal/keras-samples</strong></span>
<span class="strong"><strong> rdua1-ltm:keras-samples rdua$ ls</strong></span>
<span class="strong"><strong> MNIST CNN.ipynb sample_one.<span>ipynb</span></strong></span></pre><div class="mediaobject"><img src="/graphics/9781788621755/graphics/11f6d931-e1c9-44d5-8165-74316def1450.png" /></div><p>If you open <code class="literal">MNIST CNN.ipynb</code>, it is a Keras CNN sample, which we will learn more about in the subsequent chapters.</p><p>In this recipe, we used the Docker image <code class="literal">rajdeepd<span class="emphasis"><em>/</em></span>jupyter<span class="emphasis"><em>-</em></span>keras</code> to create a Keras environment and access it from Jupyter running in the host environment.</p></div></div></div>