<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch19lvl1sec161"></a>Optimization and caching</h2></div></div><hr /></div><p>CDNs are all about optimizing the <span>content</span><a id="id325128265" class="indexterm"></a> and <span>caching</span><a id="id325125015" class="indexterm"></a> it. In that way, they improve the performance of your website and user experience. In the previous section, you learned a little bit about the concept of Content Delivery Networks and configured your instance of Azure CDN<span class="emphasis"><em>. </em></span>Now we will try to learn some more advanced features, such as compression, caching rules, and optimization. </p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch19lvl2sec194"></a>Configuring the endpoint</h3></div></div></div><p>To access the endpoint configuration, you have to <span>click</span><a id="id325124996" class="indexterm"></a> on it on the <strong class="userinput"><code>Overview</code></strong><span class="strong"><strong> </strong></span>blade:</p><div class="mediaobject"><img src="/graphics/9781789340624/graphics/a82260ea-20ad-43e0-86fc-571ce965ad41.png" /></div><p>This will display a new screen, where you can find all information regarding that particular CDN endpoint, such as its hostname, available protocols, and configured rules for content optimization. In fact, the screen looks very similar to the previous one—it just offers some additional options:</p><div class="mediaobject"><img src="/graphics/9781789340624/graphics/be0b3fc3-fbcc-452d-b942-bf69092fce5d.png" /></div><p>Now we will discuss different features available for an endpoint.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch19lvl3sec74"></a>Compression</h4></div></div></div><p>One of the basic features of CDNs is <strong class="userinput"><code>compression</code></strong>—they allow you to <span>compress</span><a id="id325120025" class="indexterm"></a> different file types on-the-fly, such as lowering their size and reducing network latency:</p><div class="mediaobject"><img src="/graphics/9781789340624/graphics/21e39083-e71d-4c4f-9b9a-8f567e0fba88.png" /></div><p>When you enable it, you can select the MIME types you are interested in. You can also add new ones, if you plan to support any.</p><p> </p><p> </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip219"></a>Note</h3><p>Remember that a file has to be cached by a CDN to be actually compressed on-the-fly. </p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch19lvl3sec75"></a>Caching rules</h4></div></div></div><p>By default, CDN caches content based on the Cache-Control <span>header</span><a id="id325117142" class="indexterm"></a> you provide. However, you can explicitly define how it should behave if:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">A header is missing</li><li style="list-style-type: disc">A query string is introduced</li><li style="list-style-type: disc">A particular match condition matches</li></ul></div><p>Here you can find a basic setup for this feature:</p><div class="mediaobject"><img src="/graphics/9781789340624/graphics/9b15d15d-9203-4ac9-913d-c2758175036b.png" /></div><p>As you can see, it gives you a lot of control over the behavior of the service, especially with the <strong class="userinput"><code>Custom caching rules</code></strong>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch19lvl3sec76"></a>Geo-filtering</h4></div></div></div><p>Sometimes you need to block specific content for <span>specific</span><a id="id324830085" class="indexterm"></a> countries. Such a feature might be problematic without CDN—you have to control programmatically who can access a given image or a file based on the geo-location. With Azure CDN<span class="emphasis"><em> </em></span>you can enable it within seconds:</p><div class="mediaobject"><img src="/graphics/9781789340624/graphics/040ba9d8-0223-412c-8dc7-70d43538622b.png" /></div><p>On the <strong class="userinput"><code>Geo-filtering</code></strong><span class="strong"><strong> </strong></span>blade, you can <strong class="userinput"><code>Configu</code></strong><strong class="userinput"><code><strong class="userinput"><code>r</code></strong>e</code></strong> different rules blocking or allowing access to a folder or a particular file inside CDN for a particular country.</p></div></div></div>