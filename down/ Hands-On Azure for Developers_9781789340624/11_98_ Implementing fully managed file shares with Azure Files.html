<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch11lvl1sec96"></a>Implementing fully managed file shares with Azure Files</h2></div></div><hr /></div><p>When in need of creating a file share, which can be <span>accessed</span><a id="id326395453" class="indexterm"></a> by different people, you often have to either buy some hardware, which will be set up and configured for such functionality, or use third-party solutions, which can be hard to customize, or expensive. With Azure Storage, you can quickly develop a solution that is almost limitless in terms of capacity, offers industry standard protocols, and can be quickly provisioned, and ready to use.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch11lvl2sec113"></a>Azure Files concepts</h3></div></div></div><p>Azure Files has <span>some</span><a id="id326395448" class="indexterm"></a> basic concepts that create the whole picture of a service. In fact, it is designed to replace current on-premise file servers in terms of functionality and performance. The main difference between Azure Files and the "old" solution is accessibility (as you can set the access token and make the URL private). What is more, it is OS-agnostic, allowing you to use the very same file share mounted on different machines using Linux, Windows, or macOS. It, of course, shares other Azure Storage concepts, so you can use it with the same reliability and durability assurance. The main feature of Azure Files is support for the SMB protocol. This is a very common protocol (and a mature one, as it was designed in the mid-1980s) for sharing computer resources, and used also for printers, and other network devices. We could summarize <span>Azure</span><a id="id326395440" class="indexterm"></a> Files as follows:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><span class="strong"><strong>Fully managed</strong></span>: This is a full cloud service, where you do not have to worry about the OS or its configuration.</li><li style="list-style-type: disc"><span class="strong"><strong>Durability </strong></span><span class="strong"><strong>and resiliency</strong></span>: With Azure Files you do not have to worry about not having access to data stored and securing your resources against power failures, and other outages.</li><li style="list-style-type: disc"><span class="strong"><strong>Common dev tools</strong></span>: Accessing Azure Files is easy, thanks to the system I/O APIs, appropriate SDKs, or even REST APIs.</li></ul></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch11lvl2sec114"></a>Working with Azure Files</h3></div></div></div><p>When you go to Azure Portal and open your <span>Azure</span><a id="id325543761" class="indexterm"></a> Storage instance, you can find the Files blade. It is very similar to the one that will be discussed for Blob Storage. It displays a list of available file shares, as seen in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781789340624/graphics/890840cb-e56e-4812-a569-b9b99c96fc96.png" /></div><p>From this screen, you have the ability to create a new one by clicking on the <strong class="userinput"><code>+ File share</code></strong><span class="strong"><strong> </strong></span>button. The important thing here is the value of the <strong class="userinput"><code>Quota </code></strong>field—it determines the maximum capacity of a file share.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note144"></a>Note</h3><p>The maximum value for the quota of a file share is 5,120 GB.</p></div><p>To get information about how to connect to a file share, you can click on the <strong class="userinput"><code>more</code></strong> button on the right and select <strong class="userinput"><code>Connect</code></strong>:</p><div class="mediaobject"><img src="/graphics/9781789340624/graphics/416924bf-db03-4bb3-9254-1544c23c8766.png" /></div><p>It will display some short instructions about how it is possible to quickly connect from your computer to a specific file share. Here you can find an example of a command for Windows written in PowerShell:</p><pre class="programlisting">$acctKey = ConvertTo-SecureString -String "&lt;key&gt;" -AsPlainText -Force
$credential = New-Object System.Management.Automation.PSCredential -ArgumentList "Azure\handsonazurestore", $acctKey
New-PSDrive -Name Z -PSProvider FileSystem -Root "\\handsonazurestore.file.core.windows.net\handsonazure" -Credential $credential -Persist</pre><p>You can specify the letter of a drive using the <code class="literal">-Name</code><span class="strong"><strong> </strong></span>parameter (in the preceding example it is <code class="literal">Z</code>).</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note145"></a>Note</h3><p>Mapping a drive is an operation that may require additional permissions—make sure you are running all these commands as an administrator.</p></div><p>Now I can compare the contents of my file share displayed in <span>Azure</span><a id="id325117198" class="indexterm"></a> portal:</p><div class="mediaobject"><img src="/graphics/9781789340624/graphics/fe743094-0c3f-425e-8215-13c6b0dbf944.png" /></div><p>With my mounted disk on a virtual machine:</p><div class="mediaobject"><img src="/graphics/9781789340624/graphics/f45929bf-e18a-4c76-a2c2-312102477f80.png" /></div><p>The whole setup took only a few minutes—this is the strength of this service, as normally I would need many hours to set everything up and achieve the same level of portability and reliability. It also gives you unlimited storage capacity—nothing blocks you from attaching multiple Azure Files shares and storing all your files on them.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch11lvl2sec115"></a>Blob Storage versus Azure Files</h3></div></div></div><p>In fact, both Azure Blob Storage and <span>Azure</span><a id="id325120036" class="indexterm"></a> Files have a similar purpose—you create them to store and share files. There are, however, some fundamental differences between them when it comes to use cases, for example:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">If you want to create a common file share space for your company, you will use Azure Files</li><li style="list-style-type: disc">If you want to have a space for files uploaded by your users via, for example, your website, you will use Blob Storage</li><li style="list-style-type: disc">If you want to have your files completely private, you will use Azure Files</li><li style="list-style-type: disc">If you want to configure security on a blob or a containers level, you will use Blob Storage</li></ul></div><p>Both services also have different pricing models (for example, Azure Files is much more expensive when it comes to paying for each GB of data).</p></div></div>