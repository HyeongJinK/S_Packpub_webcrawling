<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch21lvl1sec176"></a>Resources in Azure</h2></div></div><hr /></div><p>Microsoft Azure is all about resources—you <span>manage</span><a id="id325115408" class="indexterm"></a> them directly or indirectly, but nonetheless most of what you touch is a resource of some kind. Whether it is a particular service (such as Azure Functions or Azure Traffic Manager), a part of it (such as the application settings available for Azure App Services), or a distinct feature (such as locks, as discussed in this chapter), you can manage all of them using Azure Resource Manager (which is often referred to as Azure RM). In the last section of this chapter, we will discuss how to access properties of Azure resources, so you can use them to investigate the configuration and automate processes, such as deployment or monitoring.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch21lvl2sec205"></a>Azure Resource Explorer</h3></div></div></div><p>The easiest way to access <span>Azure</span><a id="id324830086" class="indexterm"></a> resources is to use <span class="strong"><strong>Azure Resource Explorer</strong></span>. You can access it by going to <a class="ulink" href="https://resources.azure.com/" target="_blank">https://resources.azure.com/</a><a class="ulink" href="https://resources.azure.com/" target="_blank">.</a></p><p>Your default screen will look similar to mine:</p><div class="mediaobject"><img src="/graphics/9781789340624/graphics/f66252d0-d694-4e26-bc48-40e249029bc1.png" /></div><p>To browse your resources, you have to expand nodes available on the left. Initially, you have access to two different node types:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><strong class="userinput"><code>providers</code></strong>: Those are related to a specific Azure service, such as Azure Cosmos DB<span class="emphasis"><em> </em></span>or Azure Storage</li><li style="list-style-type: disc"><strong class="userinput"><code>subscription</code></strong>:<span class="strong"><strong> </strong></span>As a subscription is also an Azure resource, you can browse it using Azure Resource Explorer</li></ul></div><p> </p><p>These two node types give you access to different kinds of operation; providers are a high-level representation of a specific Azure service, while subscription contains information regarding resources provisioned within it. What is more, it gives you the possibility to directly check the parameters of your resource:</p><div class="mediaobject"><img src="/graphics/9781789340624/graphics/314b6f93-3a1b-4c99-b566-fd2efe8cb74c.png" /></div><p> </p><p> </p><p>The gathered information can be used to enter the required information in ARM templates. You can always consult them with the visible results from Azure Resource Explorer. This tool allows you to also directly edit the resource parameters (by clicking on the <strong class="userinput"><code>Edit </code></strong>button), and generates a PowerShell/Ansible script, which can be used to <span>manage</span><a id="id326401206" class="indexterm"></a> it. In the following, you can find an example of a PowerShell command, generated for my <span>Azure</span><a id="id326401299" class="indexterm"></a> Storage<span class="emphasis"><em> </em></span>account:</p><pre class="programlisting"># PowerShell equivalent script

# GET handsonazureeuwstorage
Get-AzureRmResource -ResourceGroupName handsonazure-euw-rg -ResourceType Microsoft.Storage/storageAccounts -ResourceName "handsonazureeuwstorage" -ApiVersion 2017-10-01

# SET handsonazureeuwstorage
$PropertiesObject = @{
  #Property = value;
}
Set-AzureRmResource -PropertyObject $PropertiesObject -ResourceGroupName handsonazure-euw-rg -ResourceType Microsoft.Storage/storageAccounts -ResourceName "handsonazureeuwstorage" -ApiVersion 2017-10-01 -Force

# DELETE handsonazureeuwstorage
Remove-AzureRmResource -ResourceGroupName handsonazure-euw-rg -ResourceType Microsoft.Storage/storageAccounts -ResourceName "handsonazureeuwstorage" -ApiVersion 2017-10-01 -Force

# Action ListAccountSas
$ParametersObject = @{
  signedServices = "(String)"
  signedResourceTypes = "(String)"
  signedPermission = "(String)"
  signedIp = "(String)"
  signedProtocol = "(String)"
  signedStart = "(String)"
  signedExpiry = "(String)"
  keyToSign = "(String)"
}

Invoke-AzureRmResourceAction -ResourceGroupName handsonazure-euw-rg -ResourceType Microsoft.Storage/storageAccounts -ResourceName handsonazureeuwstorage -Action ListAccountSas -Parameters $ParametersObject -ApiVersion 2017-10-01 -Force

# Action ListServiceSas
$ParametersObject = @{
  canonicalizedResource = "(String)"
  signedResource = "(String)"
  signedPermission = "(String)"
  signedIp = "(String)"
  signedProtocol = "(String)"
  signedStart = "(String)"
  signedExpiry = "(String)"
  signedIdentifier = "(String)"
  startPk = "(String)"
  endPk = "(String)"
  startRk = "(String)"
  endRk = "(String)"
  keyToSign = "(String)"
  rscc = "(String)"
  rscd = "(String)"
  rsce = "(String)"
  rscl = "(String)"
  rsct = "(String)"
}

Invoke-AzureRmResourceAction -ResourceGroupName handsonazure-euw-rg -ResourceType Microsoft.Storage/storageAccounts -ResourceName handsonazureeuwstorage -Action ListServiceSas -Parameters $ParametersObject -ApiVersion 2017-10-01 -Force

# Action listKeys
Invoke-AzureRmResourceAction -ResourceGroupName handsonazure-euw-rg -ResourceType Microsoft.Storage/storageAccounts -ResourceName handsonazureeuwstorage -Action listKeys -ApiVersion 2017-10-01 -Force

# Action regenerateKey
$ParametersObject = @{
  keyName = "(String)"
}

Invoke-AzureRmResourceAction -ResourceGroupName handsonazure-euw-rg -ResourceType Microsoft.Storage/storageAccounts -ResourceName handsonazureeuwstorage -Action regenerateKey -Parameters $ParametersObject -ApiVersion 2017-10-01 -Force</pre><p>As you can see, you do not have to write such <span>scripts</span><a id="id326400754" class="indexterm"></a> on your own, you can just use Azure Resource Manager, copy them, and potentially adjust them to your needs.</p><p> </p><p> </p></div></div>