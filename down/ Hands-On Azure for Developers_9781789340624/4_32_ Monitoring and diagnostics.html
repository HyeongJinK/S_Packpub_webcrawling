<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec37"></a>Monitoring and diagnostics</h2></div></div><hr /></div><p>In the final section of this chapter, we will cover some topics <span>regarding</span><a id="id325120013" class="indexterm"></a> monitoring and diagnosing your services in SF. As you probably remember, I noted such features as one of the most important in microservices, as you have to always be able to tell how each one works and perform the needed action (such as scale out, restart, or kill an instance) if required. In SF, there are a few levels of <span>monitoring</span><a id="id325120017" class="indexterm"></a> that we will briefly describe here.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec37"></a>Application monitoring</h3></div></div></div><p>In most cases, you want to monitor how your application works, what the user traffic is, and how your services communicate with each other. While you are able to bring your own framework, you can also leverage <span class="strong"><strong>Application Insights</strong></span> (<span class="strong"><strong>AI</strong></span>) integration—this will ensure that you are getting all necessary logs and available diagnostic messages. You can set up AI integration while creating a cluster for SF:</p><div class="mediaobject"><img src="/graphics/9781789340624/graphics/4409bee9-a5a7-4c53-b1c3-cef47d7668ad.png" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec38"></a>Cluster monitoring</h3></div></div></div><p>While working, your cluster emits a variety of events, which map to one <span>particular</span><a id="id325117148" class="indexterm"></a> entity within <span>it:</span></p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">Cluster</li><li style="list-style-type: disc">Application</li><li style="list-style-type: disc">Service</li><li style="list-style-type: disc">Partition</li><li style="list-style-type: disc">Replica</li><li style="list-style-type: disc">Container</li></ul></div><p>You can query these events by leveraging the <code class="literal">EventStore</code> service available in SF. It is possible to correlate them, so you can find out how one entity impacts others. The following is the example request to the API returning events from a specific time range:</p><pre class="programlisting">http://{CLUSTER}:19080/EventsStore/Cluster/Events?api-version=6.2-preview&amp;StartTimeUtc=2018-04-03T18:00:00Z&amp;EndTimeUtc=2018-07-04T18:00:00Z</pre></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec39"></a>Health monitoring</h3></div></div></div><p>Besides monitoring your application and cluster, you will also want to check how a <span>particular</span><a id="id325115428" class="indexterm"></a> service is working. To check its health, SF introduces <strong class="userinput"><code>Service Fabric Explorer</code></strong>, which you can access to verify the health of the following:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">Node</li><li style="list-style-type: disc">Application</li><li style="list-style-type: disc">Service</li><li style="list-style-type: disc">Partition</li><li style="list-style-type: disc">Replica</li></ul></div><p> </p><p> </p><p>You can access the Explorer both locally and in the cloud. It presents a nice UI, which displays a lot of useful information that you can use to determine the current status of the whole system, notice possible problems, and get the necessary details to investigate an issue further:</p><div class="mediaobject"><img src="/graphics/9781789340624/graphics/dc5eb809-405f-4746-b227-b44bcd4f73ed.png" /></div></div></div>