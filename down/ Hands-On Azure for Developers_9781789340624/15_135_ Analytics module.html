<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch15lvl1sec129"></a>Analytics module</h2></div></div><hr /></div><p>Multiple ways to integrate Azure <span>Application</span><a id="id325128350" class="indexterm"></a> Insights with different services (as well as a custom application) is not the only big feature of this service. Another important and crucial thing is the analytics language available in the Analytics module. It is an interactive query language, which enables you to explore logged data easily, using a simple and intuitive syntax. Another great thing about it is that you do not need any additional tools to get started—once you store traces, exceptions, or requests, it is available out-of-the-box—the only thing you need to do is write a query. In this section, we will cover both the query language and the module, so you can start writing your own queries and discover many different dimensions available in stored logs.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch15lvl2sec156"></a>Accessing the Analytics module</h3></div></div></div><p>Getting started with the Analytics <span>module</span><a id="id325128343" class="indexterm"></a> is really easy. Go to the <strong class="userinput"><code>Overview </code></strong>blade of your instance of Azure Application Analytics and click on the <strong class="userinput"><code>Analytics </code></strong>button:</p><div class="mediaobject"><img src="/graphics/9781789340624/graphics/45b261d2-aa0e-46a5-abfd-022eda2a3df9.png" /></div><p>It will display another window showing new options, such as the ability to enter a query, use a pre-defined one, or simply explore the different dimensions available:</p><div class="mediaobject"><img src="/graphics/9781789340624/graphics/07738750-5dda-4d83-ad62-c400b96dd4b1.png" /></div><p>The most important thing here is the query window. It is an interactive feature which enables you to write a query and offers you additional capabilities, such as a syntax validator and suggestions. Let's start with a simple query which displays request counts over the last few days:</p><pre class="programlisting">requests
| summarize totalCount=sum(itemCount) by bin(timestamp, 30m)
| render timechart</pre><p>As you can see, it has three parts:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><code class="literal">requests</code>: The dimension you are querying </li><li style="list-style-type: disc"><code class="literal">summarize</code>: A function which defines what you want to get from the dimension</li><li style="list-style-type: disc"><code class="literal">render</code>: An optional function that draws a chart based on the data </li></ul></div><p> </p><p>Of course, queries can have different structures; you can find one that is a bit more complicated:</p><pre class="programlisting">requests
| summarize RequestsCount=sum(itemCount), AverageDuration=avg(duration), percentiles(duration, 50, 95, 99) by operation_Name
| order by RequestsCount desc</pre><p>From the preceding example, there will be no chart—instead, it will display a table:</p><div class="mediaobject"><img src="/graphics/9781789340624/graphics/68fb9433-3520-4e85-b875-00306cf47251.png" /></div><p>The important thing is the date range for a query as inside it you can just filter data. You have to select which dates you are interested in. To do so, click on the <strong class="userinput"><code>Time range</code></strong><span class="strong"><strong> </strong></span>button, next to the<strong class="userinput"><code> Run</code></strong> button, and choose the right option:</p><div class="mediaobject"><img src="/graphics/9781789340624/graphics/993f1e9a-657f-40f3-a13a-532079e42457.png" /></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip181"></a>Note</h3><p>The query language in Azure Application Analytics is very rich as it defines many different functions for different data types and actions (you can use many different window functions, for example, <code class="literal">next()</code>). The relevant reference can be found in the <span class="emphasis"><em>Further reading</em></span><span class="strong"><strong> </strong></span>section.</p></div><p>Additionally, when a query is actioned, you can select an additional filter for it (based on the result), so you can choose specific records:</p><div class="mediaobject"><img src="/graphics/9781789340624/graphics/26e10ba2-d2cf-4b2e-81d2-a1d3cb8b89be.png" /></div><p>There is also one other helpful feature of the Analytics <span>module</span><a id="id325128385" class="indexterm"></a>—smart analytics. It is a set of additional functions which extend the analytic capabilities by introducing elements of machine learning in data analysis. Currently, the following functions are available:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><span class="strong"><strong>Autocluster</strong></span>:<span class="strong"><strong> </strong></span>A function which automatically <span>divides</span><a id="id325143090" class="indexterm"></a> data into clusters to make it easier to understand.</li><li style="list-style-type: disc"><span class="strong"><strong>Basket</strong></span>: This one <span>automatically</span><a id="id325143104" class="indexterm"></a> finds interesting data inside the results of a query.</li><li style="list-style-type: disc"><span class="strong"><strong>Diffpatterns</strong></span>: This feature <span>operates</span><a id="id325143117" class="indexterm"></a> on a column that stores true/false data and tries to find patterns corresponding to the differences between them.</li><li style="list-style-type: disc"><span class="strong"><strong>Timer series</strong></span>: This function (<code class="literal">make-series</code>) will convert data into a single <span>row</span><a id="id325143136" class="indexterm"></a> making it possible to analyze the root cause of a problem.</li><li style="list-style-type: disc"><span class="strong"><strong>Linear regression</strong></span>: With this function, you will <span>easily</span><a id="id325310643" class="indexterm"></a> find data trends based on the results (whether, for example, the number of exceptions grows or not).</li><li style="list-style-type: disc"><span class="strong"><strong>Outlier value detection</strong></span>: This one finds how a <span>value</span><a id="id325310669" class="indexterm"></a> is anomalous in comparison with others.</li></ul></div><p>With these advanced functions, you can greatly improve the analysis of your data. They incorporate many helpful features, making the whole service much more flexible. What is more, you do not have to be a data scientist to actually work on data, find trends, and anomalies.</p></div></div>