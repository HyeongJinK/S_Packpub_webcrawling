<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch17lvl1sec146"></a>Security</h2></div></div><hr /></div><p>Azure Data Lake Store <span>offers</span><a id="id325310682" class="indexterm"></a> a bit of a different security model than other storage options available for Azure. In fact, it offers you a complex solution that consists of authentication, authorization, network isolation, data protection, and auditing. As it is designed to be the very base of data-driven systems, it has to extend common capabilities when it comes to securing who (or what) and how to access information stored. In this section, we will cover different security features available and describe them in detail, so you are familiar with them and know how to use them.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch17lvl2sec178"></a>Authentication and authorization</h3></div></div></div><p>To authenticate who or what can access data stored, Azure <span>Data</span><a id="id325310662" class="indexterm"></a> Lake Store uses Azure Active Directory to know what the current entity accessing <span>data</span><a id="id325310636" class="indexterm"></a> is. To authorize it, it leverages both <span class="strong"><strong>role-based access control</strong></span><span class="emphasis"><em> </em></span>(<span class="strong"><strong>RBAC</strong></span>), to secure the resource itself, and POSIX ACL to secure data.</p><p> </p><p> </p><p>It is important to understand the <span>distinction</span><a id="id325304696" class="indexterm"></a> between these two terms:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><span class="strong"><strong>Authentication</strong></span>: This determines who or what tries to access a particular resource.</li><li style="list-style-type: disc"><span class="strong"><strong>Authorization</strong></span>: This secures a resource by limiting access to it to those who have been assigned a particular set of permissions.</li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip205"></a>Note</h3><p>It is important to remember that if you have multiple subscriptions hosting different resources that would like to access Azure Data Lake Store, you have to assign the same Azure AD instance to all of them—if you fail to do so, some will not be able to access data, as only users and services defined within a directory assigned to ADLS can be authenticated and given access to it.</p></div><p>Let's check the difference between the RBAC and POSIX models.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch17lvl3sec72"></a>RBAC</h4></div></div></div><p>RBAC controls who can access an Azure resource. It is a separate set of roles and permissions, that has <span>nothing</span><a id="id326456339" class="indexterm"></a> to do with the data stored. To check this feature, click on the <strong class="userinput"><code>Access control (IAM)</code></strong><span class="strong"><strong> </strong></span>blade:</p><div class="mediaobject"><img src="/graphics/9781789340624/graphics/6486eb69-2123-424a-8f81-3f8c220f5883.png" /></div><p> </p><p>On the preceding screen, you can see that I have three different apps (services) and one user assigned to the resource. They also have different roles:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><strong class="userinput"><code>Owner</code></strong>: Full access including determining who can access the resource</li><li style="list-style-type: disc"><strong class="userinput"><code>Contributor</code></strong>: Full access excluding determining who can access the resource</li></ul></div><p>If you click the <strong class="userinput"><code>Roles </code></strong>button, you will see a full list of possible roles for the ADLS:</p><div class="mediaobject"><img src="/graphics/9781789340624/graphics/734ae5f1-4df4-4016-b31c-ff78baffd979.png" /></div><p> </p><p> </p><p>Using the <strong class="userinput"><code>Access Control (IAM)</code></strong><span class="strong"><strong> </strong></span>blade, you can easily control who can access your instance of Azure Data Lake Store and how—use it any time you want to change permissions or the set of users/services accessing it.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip206"></a>Note</h3><p>A good idea is to manage groups rather than individual entities—this allows you to add/remove a user or an entity in one place (Azure AD) instead of browsing resources and their RBAC.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch17lvl3sec73"></a>POSIX ACL</h4></div></div></div><p>As described previously, you can manage <span>access</span><a id="id325128348" class="indexterm"></a> to data stored within your instance of ADLS by providing a set of permissions defined as <strong class="userinput"><code>Read</code></strong>, <strong class="userinput"><code>Write</code></strong>,<span class="strong"><strong> </strong></span>and <strong class="userinput"><code>Execute</code></strong>. They are the part of the POSIX <span class="strong"><strong>access control list</strong></span> (<span class="strong"><strong>ACL</strong></span>) that is a feature of Hadoop HDFS, which is the part of the engine of this Azure service. If you <span>have</span><a id="id325128379" class="indexterm"></a> used, for example FTP servers, you probably have worked with filesystem permissions; they were described as numbers or strings containing the letters <code class="literal">r</code>, <code class="literal">w</code>, <code class="literal">x</code>, and the character <code class="literal">-</code>. The following is an example:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><code class="literal">-rwx------</code><span class="strong"><strong> </strong></span>is equal to<code class="literal">0700</code>and declares read, write, and execute permissions only for the owner.</li><li style="list-style-type: disc"><code class="literal">-rwxrwxrwx</code><span class="strong"><strong> </strong></span>is equal to<code class="literal">0777</code>and declares read, write, and execute permissions for everyone.</li><li style="list-style-type: disc"><code class="literal">-rw-rw-rw-</code><span class="strong"><strong> </strong></span>is equal to<code class="literal">0666</code>and declares read and write permissions for everyone.</li></ul></div><p>You can find more about the POSIX ACL model in the <span class="emphasis"><em>Further reading</em></span><span class="strong"><strong> </strong></span>section.</p><p> </p><p> </p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch17lvl2sec179"></a>Network isolation</h3></div></div></div><p>I mentioned the <strong class="userinput"><code>Firewall </code></strong>blade earlier, but we <span>skipped</span><a id="id325228524" class="indexterm"></a> it so you could learn something about it once you are familiar with the service. When you click on the <strong class="userinput"><code>Firewall </code></strong>blade, you will see a screen that allows you to specify which IP address can access your instance:</p><div class="mediaobject"><img src="/graphics/9781789340624/graphics/a36e9679-4b26-44a3-ae20-5e15e71efcf4.png" /></div><p>The important thing here is the ability to block other Azure services from accessing your data—this can be helpful if you have requirements that force you to disallow anyone from reading any information stored in ADLS. You can find out more about security features in the link provided in the <span class="emphasis"><em>Further reading</em></span><span class="strong"><strong> </strong></span>section.</p></div></div>