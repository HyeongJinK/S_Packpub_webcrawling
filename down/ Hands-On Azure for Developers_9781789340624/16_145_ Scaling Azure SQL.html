<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch16lvl1sec138"></a>Scaling Azure SQL</h2></div></div><hr /></div><p>The required performance of your database may differ depending on the time and current state of your application. This is when scaling is all-important—you <span>can</span><a id="id325194195" class="indexterm"></a> adjust cost and available resources depending on the needs of your service. In Azure SQL,<span class="emphasis"><em> </em></span>there are multiple different scenarios that you will consider: whether you use a single database or an elastic pool, whether you need to scale out reads, or whether you need all features available everywhere. In this short section, I will show you how to quickly proceed with your decision and where you can find scaling tools.</p><p> </p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch16lvl2sec167"></a>Single database</h3></div></div></div><p>As we mentioned previously, with a single database scaling is really simple—you just need to go to the <strong class="userinput"><code>Configure</code></strong><span class="strong"><strong> </strong></span>blade and select the new tier you are interested in. You <span>can</span><a id="id325128338" class="indexterm"></a> easily decide whether you need to scale a database up by watching its performance:</p><div class="mediaobject"><img src="/graphics/9781789340624/graphics/e8baff73-986f-4eef-b928-6460930820a5.png" /></div><p>If you see constant spikes or simply utilization of the database is becoming dangerously close to the maximum values, it is always a good decision to give it a few more DTUs or other resources.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip197"></a>Note</h3><p>Remember, you can set alerts when utilization hits upper limits, so there are some ways to automate the process.</p></div><p> </p><p> </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch16lvl2sec168"></a>Elastic pool</h3></div></div></div><p>With elastic pool enabled, things change a little bit—instead of operating on, for example, a DTU for a single database, you <span>can</span><a id="id325128276" class="indexterm"></a> select an elastic pool, which introduces a slightly different model of an elastic DTU:</p><div class="mediaobject"><img src="/graphics/9781789340624/graphics/0c86bea9-2350-423c-88a9-ca8ca16c97c4.png" /></div><p>In that model, you scale your database using elastic pool configuration instead. For a single database, you will be able to only change the maximum data size available (which is also limited to the value set by the pool).</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch16lvl2sec169"></a>Read scale-out</h3></div></div></div><p>Sometimes you only need to scale reads for <span>your</span><a id="id324830061" class="indexterm"></a> database. Such a situation occurs when you would rather serve content than modify it (for example, you have a very popular portal that is managed from a single place but is served globally). In Azure SQL,<span class="emphasis"><em> </em></span>there is a possibility to scale out only a part of the service—the one responsible for managing reads for you. </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note198"></a>Note</h3><p>Note that you need the Premium/Business Critical tier to get this feature working.</p></div><p> </p><p>To enable read scale-out on your database, you can use the REST API:</p><pre class="programlisting">HTTP PUT https://management.azure.com/subscriptions/{SubscriptionId}/resourceGroups/{GroupName}/providers/Microsoft.Sql/servers/{ServerName}/databases/{DatabaseName}?api-version= 2014-04-01-preview

Body:
{
   "properties":
   {
      "readScale":"Enabled"
   }
}</pre><p>Alternatively, you can use PowerShell:</p><pre class="programlisting"><span class="strong"><strong>Set-AzureRmSqlDatabase -ResourceGroupName &lt;my-resource-group&gt; -ServerName &lt;my-server&gt; -DatabaseName &lt;my-database&gt; -ReadScale Disabled</strong></span></pre></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch16lvl2sec170"></a>Sharding</h3></div></div></div><p>The last way to scale <span>your</span><a id="id325115410" class="indexterm"></a> database is to use sharding. As opposed to elastic pools, by using sharding you allocate individual resources to each of your databases. It is also one of the models for horizontal scaling (so you rather provision another database than scale up your existing one).</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note199"></a>Note</h3><p>Note that you can use sharding also for elastic pools by using the Elastic Database split-merge tool: <a class="ulink" href="https://docs.microsoft.com/en-us/azure/sql-database/sql-database-elastic-scale-overview-split-and-merge" target="_blank">https://docs.microsoft.com/en-us/azure/sql-database/sql-database-elastic-scale-overview-split-and-merge</a>.</p></div><p>In general, you will use sharding if you:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">Have too much data to be able to handle it with an individual instance</li><li style="list-style-type: disc">Want to load-balance requests</li><li style="list-style-type: disc">Want to geo-distribute your data</li></ul></div><p>The important thing here is the requirement that the data structure for each shard has to be the same. You can find the full documentation on sharding in Azure SQL<span class="emphasis"><em> </em></span>in the <span class="emphasis"><em>Further reading</em></span><span class="strong"><strong> </strong></span>section for this chapter.</p><p> </p><p> </p></div></div>