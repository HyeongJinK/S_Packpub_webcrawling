<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch05lvl1sec42"></a>Creating an Azure Search service</h2></div></div><hr /></div><p>Creating Azure Search is an easy task and <span>should</span><a id="id325786405" class="indexterm"></a> not take more than a few minutes. The important thing to remember here is that, if you have to recreate a service, there is no way to back up and restore data—if you make mistakes here, everything has to be done from scratch.</p><p>The reason to recreate would be changing the datatypes or other search attributes of the search index columns. While it will not be a problem during this exercise, have that in mind when creating a production workload.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec40"></a>Using Azure Portal</h3></div></div></div><p>As with most services in Azure, we will <span>start</span><a id="id325120041" class="indexterm"></a> our journey by creating Azure Search in the portal. To do so, click on <strong class="userinput"><code>+ Create a resource</code></strong> and search for <code class="literal">Azure Search</code>. On <span>the</span><a id="id325122056" class="indexterm"></a> introduction screen, click on the <strong class="userinput"><code>Create</code></strong> button, which will take you to the configuration of this service:</p><div class="mediaobject"><img src="/graphics/9781789340624/graphics/97d324c5-cabc-4952-876a-07508243e9c1.png" /></div><p>As you can see, we have pretty standard options here, which should not be unclear to you by now. There is, however, an option to select a <strong class="userinput"><code>Pricing tier</code></strong>, where currently there are different options to choose from:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><strong class="userinput"><code>Free</code></strong>: This is the most basic one without replicas available and shared resources.</li><li style="list-style-type: disc"><strong class="userinput"><code>Basic</code></strong>: This comes with load balancing available, scaling, and dedicated resources.</li><li style="list-style-type: disc"><strong class="userinput"><code>Standard</code></strong>: This is three different tiers with more compute power and partitions available.</li><li style="list-style-type: disc"><strong class="userinput"><code>High-density</code></strong>: The same <span>as</span><strong class="userinput"><code>Standard </code></strong>but with more indexes available (and fewer partitions). This particular tier is designed for SaaS developers specifically.</li></ul></div><p>Before we proceed, you will have to understand what all of these concepts are:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><span class="strong"><strong>Replica</strong></span>: This is an individual <span>instance</span><a id="id325128274" class="indexterm"></a> of your search service, which hosts one copy of an index. If you have more than one replica, you can load balance your queries.</li><li style="list-style-type: disc"><span class="strong"><strong>Index</strong></span>: You can think of this as a table <span>that</span><a id="id325128285" class="indexterm"></a> contains multiple rows (or in other words, documents) with additional metadata used by a service.</li><li style="list-style-type: disc"><span class="strong"><strong>Search unit</strong></span> (<span class="strong"><strong>SU</strong></span>): This is a billing unit for Azure Search, which is a <span>composition</span><a id="id325128334" class="indexterm"></a> of the number of replicas and partitions (<span class="emphasis"><em>SU = Replicas * Partitions</em></span>).</li><li style="list-style-type: disc"><span class="strong"><strong>Partition</strong></span>: Each partition provides storage and I/O for your <span>instance</span><a id="id325128349" class="indexterm"></a> of Azure Search, so scaling this unit will give more of those.</li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip68"></a>Note</h3><p>The main difference between replicas and partitions is that, if you need more computational resources, you can increase partitions while, for larger query volumes, you need more replicas (so a query can be load balanced).</p></div><p>When you fill all fields and select a tier, click on the <strong class="userinput"><code>Create</code></strong> button and wait for a moment for service creation. Once it is created, click on it and go to the <strong class="userinput"><code>Overview</code></strong> blade. There, select <strong class="userinput"><code>Import data</code></strong>, so we can start with some samples before diving deeper into Azure Search:</p><div class="mediaobject"><img src="/graphics/9781789340624/graphics/f891bd3c-edce-4eb8-90bc-197634b3b1d8.png" /></div><p> </p><p>On the next screen, you will see multiple options <span>for</span><a id="id325128388" class="indexterm"></a> importing records—you are able to select the data source and index and enable <strong class="userinput"><code>Cognitive Search</code></strong>, which we will cover in the next sections:</p><div class="mediaobject"><img src="/graphics/9781789340624/graphics/2e769187-9040-48d4-8489-e6585f58ea58.png" /></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip69"></a>Note</h3><p>Remember that it is possible to delete or change the fields used for indexing data, but such operations require re-indexing all documents. By re-indexing I mean that you have to delete, then recreate the index. However, it is possible to add new fields without re-indexing the documents—in that case, the values for the new columns will be null for the older ones.</p></div><p>Because we selected sample data, <strong class="userinput"><code>Index</code></strong> is already filled with some default values. When you click <strong class="userinput"><code>Ok</code></strong>, they will be validated and the <strong class="userinput"><code>Indexer</code></strong> screen will become available. You may wonder what indexer is exactly. Its definition is quite simple—it is a crawler that looks at your data source and extracts everything from it based on the mapping between an index and stored information. For example, if you selected a field named <code class="literal">Status</code> as a part of your index, the indexer will search for all records containing it and push it to your index.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note70"></a>Note</h3><p>Indexers can be configured either to fetch data once or on schedule. We will cover scheduled indexers in the section regarding indexes and indexing documents.</p></div><p>If you are satisfied with import configuration, click on the <strong class="userinput"><code>Ok</code></strong> button and wait a moment until the data is imported and indexed. Now, we can test how our service works—on the <strong class="userinput"><code>Overview</code></strong> blade, you can find the <strong class="userinput"><code>Search explorer</code></strong> button. When you click on it, you will see the new screen, where you can <span>enter</span><a id="id325143129" class="indexterm"></a> your <strong class="userinput"><code>Query string</code></strong> and <strong class="userinput"><code>Request URL</code></strong>, which can be used in your application to get results:</p><div class="mediaobject"><img src="/graphics/9781789340624/graphics/70df787f-2f0c-4b02-899b-cb4141a0dd9d.png" /></div></div></div>