<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch06lvl1sec51"></a>Reasons to use Notification Hub</h2></div></div><hr /></div><p>If you have ever <span>had</span><a id="id326363923" class="indexterm"></a> a chance to <span>develop</span><a id="id325115418" class="indexterm"></a> an application that was integrated with any notifications system, you probably know the challenges that are faced when creating such a product. In this chapter, I will try to introduce you to some basic concepts such as PNS, push notifications, and device registrations. This will ensure that we <span>can</span><a id="id325115427" class="indexterm"></a> easily start developing applications leveraging Notification Hub features and focus on learning details and hidden functionalities.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note81"></a>Note</h3><p>Exercises from this chapter are written for <span class="strong"><strong>Universal Windows Platform</strong></span> (<span class="strong"><strong>UWP</strong></span>) applications—however, the concepts presented are true also for other platforms such as Android or iOS.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec45"></a>Challenges for application design</h3></div></div></div><p>Let's assume you <span>have</span><a id="id325115453" class="indexterm"></a> the following architecture:</p><div class="mediaobject"><img src="/graphics/9781789340624/graphics/4d4b6001-c89c-4266-a07c-e5a9dcd04384.png" /></div><p>Here, we have a backend that sends some messages to three different platforms:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">iOS</li><li style="list-style-type: disc">Android</li><li style="list-style-type: disc">Windows</li></ul></div><p> </p><p> </p><p>Now, if these <span>messages</span><a id="id325117165" class="indexterm"></a> are push notifications, our backend <span>will</span><a id="id325117197" class="indexterm"></a> have to communicate with three different services:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><span class="strong"><strong>Apple Push Notification Service</strong></span> (<span class="strong"><strong>APNS</strong></span>)</li><li style="list-style-type: disc"><span class="strong"><strong>Firebase Cloud Messaging</strong></span> (<span class="strong"><strong>FCM</strong></span>)</li><li style="list-style-type: disc"><span class="strong"><strong>Windows Notification Service</strong></span> (<span class="strong"><strong>WNS</strong></span>)</li></ul></div><p>Each of <span>these</span><a id="id325120038" class="indexterm"></a> services is called a <span class="strong"><strong>Platform Notification Service</strong></span> (<span class="strong"><strong>PNS</strong></span>). Their responsibility is to accept a request to send a notification and send it to the appropriate device. They also <span>handle</span><a id="id325122054" class="indexterm"></a> registration of the devices that want to accept notifications (for instance, by tokens in APNS). The downside of such a solution is that none of these services has a common interface—we cannot introduce a simple wrapper in our backend to handle each request in the same fashion. The solution for that kind of trouble would be altering our architecture a little bit, so it contains a service that aggregates the logic for each PNS and is able to communicate with them:</p><div class="mediaobject"><img src="/graphics/9781789340624/graphics/6958396a-2284-4491-a4f2-c083f9376e97.png" /></div><p>Notification Hub is such a service; it's an abstraction over different PNSes and is able to handle different device registration. We can consider two more problems—scaling and routing. It is important to know that, according do the PNSes guide, the device token must be refreshed with each app launch. Now, if it is your backend responsibility, you may end up with a solution that tries to handle refresh requests instead of focusing on your business logic.</p><p>Additionally, if you want to send a notification to a particular device, you have to store its identifier somewhere so you are able to route a message to it. All of these responsibilities can be moved to a notification service, so this whole overhead can be taken from the backend.</p></div></div>