<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch08lvl1sec72"></a>Creating Logic Apps and integrating services</h2></div></div><hr /></div><p>As Azure Logic Apps is also targeted at non-developers, the <span>process</span><a id="id325128263" class="indexterm"></a> of creating <span>instances</span><a id="id325125012" class="indexterm"></a> and working with them is quite straightforward. In this section of this chapter, you will learn how to work with them in Azure Portal and Visual Studio and how to integrate multiple services and use actions to control a workflow.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec75"></a>Creating Logic Apps in Azure Portal </h3></div></div></div><p>To create an instance of a Logic App, follow <span>these</span><a id="id325124998" class="indexterm"></a> steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Click on <strong class="userinput"><code>+ Create a resource</code></strong><span class="strong"><strong> </strong></span>and search for <strong class="userinput"><code>Logic App</code></strong>. When you click on the <strong class="userinput"><code><span>Create</span><a id="id325122105" class="indexterm"></a> </code></strong>button, you will see a simple form that allows you to create a new instance of a Logic App:</li></ol></div><div class="mediaobject"><img src="/graphics/9781789340624/graphics/60dded55-81cd-4405-b8d5-5f4629785e89.png" /></div><p> </p><div class="orderedlist"><ol class="orderedlist arabic" start="2" type="1"><li>In fact, the only extra thing you are able to configure here is enabling Azure Log Analytics. Since this particular service will not be covered in this book, I will skip it in this chapter. When you click on the <strong class="userinput"><code>OK </code></strong>button, Azure will start the creation of a new Logic App.</li><li>When the creation is finished, you can go to the service to check what it initially looks like:</li></ol></div><div class="mediaobject"><img src="/graphics/9781789340624/graphics/9adad7f9-c554-4d51-a48f-d3af31d88acf.png" /></div><p> </p><p> </p><div class="orderedlist"><ol class="orderedlist arabic" start="4" type="1"><li>Now you can click on the <strong class="userinput"><code>Logic App Designer</code></strong><span class="strong"><strong> </strong></span>button on the left to access a new blade that enables you to create a brand new workflow. Initially, you will see plenty of different templates available—it is a great start if you are now familiar with this particular service as it displays many different possibilities and configurations that you may achieve using Azure Logic Apps. To get started, in the <strong class="userinput"><code><span class="strong"><strong>Templates</strong></span></code></strong> section, select the <strong class="userinput"><code>Schedule</code></strong> option in the <strong class="userinput"><code>Category</code></strong> drop-down menu and choose <strong class="userinput"><code>Scheduler - Add message to queue</code></strong>:</li></ol></div><div class="mediaobject"><img src="/graphics/9781789340624/graphics/fc4dd2cf-0e11-4b94-9d8d-6f1f1c5c8ce4.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="5" type="1"><li>When you click on <strong class="userinput"><code>Use this template</code></strong>, you will see a designer window where you will be able to finish configuring a workflow. Note that, initially, we do not see all blocks—we have to set all missing configuration values (such as <strong class="userinput"><code>Queue Name</code></strong> or <strong class="userinput"><code>Message</code></strong>) before we can proceed. Once everything is set up and ready, you can click on <strong class="userinput"><code>Continue</code></strong>, which will allow you to work on your workflow:</li></ol></div><div class="mediaobject"><img src="/graphics/9781789340624/graphics/07ebde66-2143-478c-ad79-7f3efb59498a.png" /></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note109"></a>Note</h3><p>Creating a connection to Azure Queue will require you to create a Storage Account. If you are not familiar with that service, refer to <a class="link" href="#" linkend="ch11">Chapter 11</a>, <span class="emphasis"><em>Using Azure Storage - Tables, Queues, Files, and Blobs</em></span>, about Azure Storage.</p></div><div class="orderedlist"><ol class="orderedlist arabic" start="6" type="1"><li>To finish configuration, you will have to enter all missing values—the queue name and message. Once you do this, you have saved a Logic App and can now try to run it.</li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip110"></a>Note</h3><p>This particular connector does not create a queue if it does not exist. Make sure you have one before starting a Logic App instance. If you do not know how to do so, refer to <a class="link" href="#" linkend="ch11">Chapter 11</a>, <span class="emphasis"><em>Using Azure Storage - Tables, Queues, Files, and Blobs</em></span>, where we discuss Azure Storage features and queues.</p></div><p>If you click on the <strong class="userinput"><code>Run </code></strong>button, you will be able to see <span>how</span><a id="id325407088" class="indexterm"></a> the full flow was executed:</p><div class="mediaobject"><img src="/graphics/9781789340624/graphics/fde68923-c676-4eb3-b075-9ac59b6f9605.png" /></div><p>We can compare the preceding execution with a failed one so <span>that</span><a id="id325407108" class="indexterm"></a> you can see the difference between them (such as message content or a dynamic variable created during the execution of a flow). Logic Apps can be debugged really quickly as they provide detailed error messages and directly point you to the place where something is wrong:</p><div class="mediaobject"><img src="/graphics/9781789340624/graphics/d359c283-67cd-4831-97b2-acff48bd48ea.png" /></div><p> </p><p> </p><p>Congratulations, you have created your first Azure Logic App! In the next section, you will see <span>how</span><a id="id325407717" class="indexterm"></a> you can work with it in Visual Studio.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec76"></a>Working with Azure Logic Apps in Visual Studio</h3></div></div></div><p>While it is perfectly fine to with your Logic Apps using Azure Portal, you do not always want to log in and use its UI. As it is possible to install an extension to Microsoft Visual Studio, which enables you to work with Azure Logic Apps, we will try to check how it work in this chapter:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>To start working with your Logic <span>Apps</span><a id="id325407741" class="indexterm"></a> in Visual Studio you will <span>have</span><a id="id325407751" class="indexterm"></a> to open the <strong class="userinput"><code>Cloud Explorer</code></strong><span class="strong"><strong> </strong></span>(<strong class="userinput"><code>View</code></strong> | <strong class="userinput"><code>Cloud Explorer</code></strong>) window. It will display a list of available subscriptions and resources within it.</li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note111"></a>Note</h3><p>If the <strong class="userinput"><code>Cloud Explorer<span class="strong"><strong> </strong></span></code></strong>window appears to be empty, make sure you have the newest version of Visual Studio and the Azure SDK available and you have signed in to your Azure account.</p></div><div class="orderedlist"><ol class="orderedlist arabic" start="2" type="1"><li>Among other types of service, you should be able to find the <strong class="userinput"><code>Logic Apps</code></strong><span class="strong"><strong> </strong></span>section:</li></ol></div><div class="mediaobject"><img src="/graphics/9781789340624/graphics/4eed88ed-e85c-4895-b0ff-5bc29c5bd9f4.png" /></div><p>This is the main view and allows you to start working with that particular Azure component. When you click on an instance you are interested in, you will see the additional menu, available below the displayed resources.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip112"></a>Note</h3><p>You can also right-click on the resource you would like to work with—it will display a menu with available actions.</p></div><div class="orderedlist"><ol class="orderedlist arabic" start="3" type="1"><li>As you can see in the following screenshot, I clicked on <strong class="userinput"><code>Open with Logic App Editor</code></strong>, which displays the very same view you saw in the portal:</li></ol></div><div class="mediaobject"><img src="/graphics/9781789340624/graphics/361471cd-c5c1-48a7-8142-fc5bb26f2129.png" /></div><p>You can work with your Logic App in Visual Studio in the same manner as you would work in Azure Portal. Additionally, you can take a look at its history and disable and delete it.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip113"></a>Note</h3><p>When you double-click on an item in the run history, you will get the very same view as in Azure Portal, where you were able to debug a particular invocation. This is very helpful as you can quickly develop and test your Logic Apps and work on other parts of your application without leaving your IDE.</p></div><p>I strongly encourage you to play a little bit with Azure Logic <span>Apps</span><a id="id326395600" class="indexterm"></a> by yourself in Visual <span>Studio</span><a id="id326395640" class="indexterm"></a> as this is a great addition to the whole service, and has the same feeling as the portal.</p></div></div>