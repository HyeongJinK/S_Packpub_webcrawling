<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec15"></a>Omnibus on CentOS/RHEL/Scientific Linux/Oracle Linux</h2></div></div><hr /></div><p>To install GitLab using the omnibus <span>package</span><a id="id325171465" class="indexterm"></a> on a CentOS, Red Hat <span>Enterprise</span><a id="id325171457" class="indexterm"></a> Linux (RHEL), Scientific Linux, or Oracle Linux system, make sure that you have a server with a base that's compatible with CentOS 7.</p><p>First, you'll need to connect to a Terminal <span>session</span><a id="id325171406" class="indexterm"></a> and make sure that a <span>few</span><a id="id325171413" class="indexterm"></a> key packages are installed by running the following commands:</p><pre class="programlisting"><span class="strong"><strong>sudo yum install -y curl policycoreutils-python openssh-server</strong></span></pre><p>Now, you'll need to allow HTTP and <span>SSH</span><a id="id325169441" class="indexterm"></a> traffic through the local device firewall. This can be <span>done</span><a id="id325399924" class="indexterm"></a> by running the following code lines:</p><pre class="programlisting"><span class="strong"><strong>sudo systemctl enable sshd</strong></span>
<span class="strong"><strong>sudo systemctl start sshd</strong></span>
<span class="strong"><strong>sudo firewall-cmd --permanent --add-service=http</strong></span>
<span class="strong"><strong>sudo systemctl reload firewalld</strong></span></pre><p>Next, you'll need to decide on <span>whether</span><a id="id325172291" class="indexterm"></a> you want to use Postfix to <span>send</span><a id="id325174178" class="indexterm"></a> notification emails or external SMTP provider. While the latter is recommended, if you do plan to use Postfix, you'll need to install it like so:</p><pre class="programlisting"><span class="strong"><strong>sudo yum install postfix</strong></span>
<span class="strong"><strong>sudo systemctl enable postfix</strong></span>
<span class="strong"><strong>sudo systemctl start postfix</strong></span></pre><p>During the installation of Postfix, a configuration screen will appear. Make sure that you select <strong class="userinput"><code>Internet Site</code></strong> and set an appropriate mail name (preferably the server's external DNS name). For any other requests, you can accept the defaults.</p><p>Next, you'll need to add the GitLab package repository. There's a simple way to do this, and that's by running the following command:</p><pre class="programlisting"><span class="strong"><strong>curl https://packages.gitlab.com/install/repositories/gitlab/gitlab-ee/script.rpm.sh | sudo bash</strong></span></pre><p>If you feel uncomfortable cURLing directly from the internet into a shell, you can download the shell script, inspect it, and run it, or browse to it and then run the commands individually.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note4"></a>Note</h3><p>While it is innocuous in this case, it's a good security practice to be wary about running shell scripts straight form the internet, especially to an elevated/administrator command prompt. They could contain anything, including malicious commands.</p></div><p>Now, you'll want to install the GitLab package. To do to this, you should run the following command, supplementing <code class="literal">http://example.com</code> with the URL or IP you plan to use for this installation. This command will configure and start the GitLab instance for you automatically:</p><pre class="programlisting"><span class="strong"><strong>sudo EXTERNAL_URL="http://example.com" yum install -y gitlab-ee</strong></span></pre><p>Once the installation has completed, you should be faced with the following terminal output:</p><div class="mediaobject"><img src="/graphics/9781789534344/graphics/c50c16cd-bc93-46b3-8e25-6fc98f8c0aaa.png" /></div><p>Now, you can browse to the value you set for <code class="literal">EXTERNAL_URL</code> and you'll be directed to a <span>password</span><a id="id325276565" class="indexterm"></a> setup screen:</p><div class="mediaobject"><img src="/graphics/9781789534344/graphics/1bbf2c4b-0eaf-4969-891b-e00488462fa1.png" /></div><p>Provide a password and you'll be <span>directed</span><a id="id325277153" class="indexterm"></a> to log in. Use the <span>account</span><a id="id325277227" class="indexterm"></a> name <code class="literal">root</code> and the <span>password</span><a id="id325277239" class="indexterm"></a> you just set <span>and</span><a id="id325277248" class="indexterm"></a> you'll be all set up:</p><div class="mediaobject"><img src="/graphics/9781789534344/graphics/cf76022d-b867-423a-bc88-45fe67d7aa48.png" /></div></div>