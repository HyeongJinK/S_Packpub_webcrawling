<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch01lvl1sec11"></a>Basic data types and data structures in R</h2></div></div><hr /></div><p>Before we start delving <span>deep</span><a id="id325232772" class="indexterm"></a> into R for <span>geospatial</span><a id="id325302945" class="indexterm"></a> analysis, we need to have a good understanding of how R handles and stores different types of data. We also need to <span>know</span><a id="id325302954" class="indexterm"></a> how to <span>undertake</span><a id="id325302963" class="indexterm"></a> different operations on that data.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec4"></a>Basic data types in R </h3></div></div></div><p>There are three <span>main</span><a id="id325302978" class="indexterm"></a> data types in R, and they are as follows:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">Numerics</li><li style="list-style-type: disc">Logical or Boolean</li><li style="list-style-type: disc">Character</li></ul></div><p><span class="strong"><strong>Numerics</strong></span> are any numbers <span>with</span><a id="id325744728" class="indexterm"></a> decimal values; thus, 21.0 and 21.1 are both numerics. We <span>can</span><a id="id325744737" class="indexterm"></a> use addition, subtraction, multiplication, division, and so on, with <span>these</span><a id="id325748814" class="indexterm"></a> numerics. Interestingly, R also <span>considers</span><a id="id325748821" class="indexterm"></a> integer <span>numbers</span><a id="id325748884" class="indexterm"></a> to be numerics. <span class="strong"><strong>Logical</strong></span> or <span class="strong"><strong>Boolean</strong></span> data <span>consists</span><a id="id325748899" class="indexterm"></a> of <code class="literal">TRUE</code> and <code class="literal">FALSE</code>; they are mainly used for different comparisons. The<span class="strong"><strong>character</strong></span> variable consists of text, such as the <span>name</span><a id="id325752076" class="indexterm"></a> of something. We <span>write</span><a id="id325752343" class="indexterm"></a> character values in R by putting our character values inside <code class="literal">""</code>, or double quotes.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec5"></a>Variable</h3></div></div></div><p>Just before digging any deeper, we need to <span>know</span><a id="id325753589" class="indexterm"></a> how to assign values to any variable. So, what is a variable? It's like a container, which holds different value(s) of different types (or the same type). When assigning multiple values to any variable, we write the variable name to the left, followed by an <code class="literal">&lt;-</code> or <code class="literal">=</code> and then the value. So, if we want to assign <code class="literal">2</code> to a variable <code class="literal">x</code>, we can write either of the two:</p><pre class="programlisting">x &lt;- 2</pre><p>or</p><pre class="programlisting">x = 2</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip3"></a>Note</h3><p>I find the latter convenient, although the R community prefers to use the former – my suggestion is to use one which you find more convenient.</p></div><p> </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec6"></a>Data structures in R </h3></div></div></div><p>The data <span>structures</span><a id="id326461680" class="indexterm"></a> in R are as follows:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">Vectors</li><li style="list-style-type: disc">Matrices</li><li style="list-style-type: disc">Arrays</li><li style="list-style-type: disc">Data frames</li><li style="list-style-type: disc">Lists</li><li style="list-style-type: disc">Factors </li></ul></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec0"></a>Vectors</h4></div></div></div><p>Vectors are used to store <span>single</span><a id="id326461710" class="indexterm"></a> or multiple values of similar data types in a variable and are considered to be one-dimensional arrays. That means that the <code class="literal">x</code>variable we just defined is a vector. If we want to create a vector with multiple numeric values, we assign as before with one additional rule: we put all the values inside <code class="literal">c()</code> and separate all the <span>values</span><a id="id326461728" class="indexterm"></a> with <code class="literal">,</code> except the last value. Let's look at an example:</p><pre class="programlisting">val= c(1, 2, 3, 4, 5, 6)</pre><p>What happens if we mix different data types such as both numerics and characters? It works! (A variable's name is arbitrarily named as <code class="literal">val</code><span class="emphasis"><em>,</em></span> but you can name your variable anything that you feel appropriate, anything!) Except in some cases, such as variable names, shouldn't start with any special character:</p><pre class="programlisting">x = c(1, 2.0, 3.0, 4, 5, "Hello", "OK")</pre><p>What we have just learned about storing data of the same types doesn't seem to be true then, right? Well, not exactly. What R does behind the scenes is that it tries to convert all the values mentioned for the <code class="literal">x</code> variable to the same type. As it can't convert <code class="literal">Hello</code> and <code class="literal">OK</code> to numeric types, for conformity it converts all the numeric values <code class="literal">1</code>, <code class="literal">2.0</code>, <code class="literal">3.0</code>, <code class="literal">4</code>, and <code class="literal">5</code> to character values: that is, <code class="literal">"1"</code>, <code class="literal">"2.0"</code>, <code class="literal">"3.0"</code>, <code class="literal">"4"</code>, and <code class="literal">"5"</code>, and adds two more values, <code class="literal">"Hello"</code> and <code class="literal">"OK"</code>, and assigns all these character values to <code class="literal">x</code>. We can check the class (data type) of a variable in R with <code class="literal">class(variable_name)</code>, and let's confirm that <code class="literal">x</code> is indeed a character variable:</p><pre class="programlisting">class(x)</pre><p>We will see that the R window will show the following output:</p><pre class="programlisting">[1] "character"</pre><p> </p><p>We can also label vectors or give <span>names</span><a id="id326461832" class="indexterm"></a> to different values according to our need. Suppose we want to assign temperature <span>values</span><a id="id326461841" class="indexterm"></a> recorded at different times to a variable with a recorded time as a label. We can do so using this code:</p><pre class="programlisting">temperature = c(morning = 20, before_noon = 23, after_noon = 25, evening = 22, night =  18)</pre><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="ch01lvl4sec0"></a>Basic operations with vector</h5></div></div></div><p>Suppose the prices of three commodities, namely potatoes, rice, and oil were $10, $20, and $30 respectively in January 2018, denoted by the vector <code class="literal">jan_price</code>, and the prices of all <span>these</span><a id="id326461865" class="indexterm"></a> three elements increased by $1, $2, and $3 respectively in March 2018, denoted by the vector <code class="literal">increase</code>. Then, we can add two vectors <code class="literal">mar_price</code> and <code class="literal">increase</code> to get the new price as follows:</p><pre class="programlisting">jan_price = c(10, 20, 30)
increase = c(1, 2, 3)
mar_price = jan_price + increase</pre><p>To see the contents of <code class="literal">mar_price</code>, we just need to write it and then press <span class="emphasis"><em>Enter</em></span>:</p><pre class="programlisting">mar_price</pre><p>We now see that <code class="literal">mar_price</code> is updated as expected:</p><pre class="programlisting">[1] 11 22 33</pre><p>Similarly, we can subtract and multiply. Remember that R uses element-wise computation, meaning that if we multiply two vectors which are of the same size, the first element of the first vector will be multiplied by the first element of the second vector, and the second element of the second vector will be multiplied by the second element of the second vector, and as such:</p><pre class="programlisting">x = c(10, 20, 30)
y = c(1, 2, 3)<div class="blockquote"><blockquote class="blockquote"><p>
</p></blockquote></div>x * y</pre><p>The result of this multiplication is this:</p><pre class="programlisting">[1] 10 40 90</pre><p>If we multiply a vector with multiple values by a single value, that latter value multiplies every single element of the vector separately. This is demonstrated in the following example:</p><pre class="programlisting">x * 2</pre><p> </p><p>We can see the output of the preceding command as follows:</p><pre class="programlisting">[1] 20 40 60</pre><p>As a vector does element-wise computation, if we check for any condition, the condition will be checked for each element. Thus, if we want to know which values in <code class="literal">x</code> are greater than <code class="literal">15</code>:</p><pre class="programlisting">x &gt; 15</pre><p>As the second and third elements satisfy this condition of being greater than <code class="literal">15</code>, we see <code class="literal">TRUE</code> for these positions and <code class="literal">FALSE</code> for the first position as follows:</p><pre class="programlisting">[1] FALSE TRUE TRUE</pre><p>Indexing in R or the first <span>element</span><a id="id325752416" class="indexterm"></a> of any data type starts with <code class="literal">1</code>; thus, the third or fourth element in R can be accessed with index <code class="literal">3</code> or <code class="literal">4</code>. We need to access any particular index of a variable with a variable name followed by the index inside <code class="literal">[]</code>. Thus, the third element of <code class="literal">x</code> can be accessed as follows:</p><pre class="programlisting">x[3]</pre><p>By pressing <span class="emphasis"><em>Enter</em></span> after <code class="literal">x[3]</code>, we see that the third element of <code class="literal">x</code> is this:</p><pre class="programlisting">30</pre><p>If we want to select all items but the third one, we need to use <code class="literal">-</code> in the following way:</p><pre class="programlisting">x[-3]</pre><p>We now see that <code class="literal">x</code> has all of the elements except the third one:</p><pre class="programlisting">[1] 10 20</pre></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec1"></a>Matrix</h4></div></div></div><p>Suppose, we also have the <span>prices</span><a id="id325752487" class="indexterm"></a> of these three items for the month of June as follows:</p><pre class="programlisting">june_price = c(20, 25, 33)</pre><p> </p><p>Now if we want to stack all these three months in a single variable, we can't use vectors anymore; we need a new data structure. One of the data structures to rescue in this case is the matrix. A matrix is basically a two-dimensional array of data elements with a number of rows and columns fixed. Like a vector, a matrix can also contain just one type of element; a mix of two types is not allowed. To combine these three vectors with every row corresponding to a particular month's prices of different items and every column corresponding to <span>prices</span><a id="id325752506" class="indexterm"></a> of different items in a particular month, what we can do is first combine these three vectors inside a <code class="literal">matrix()</code> command, followed by a comma and <code class="literal">nrow = 3</code>, indicating the fact that there are three different items (for example, items are arranged row-wise and months are arranged column-wise).</p><pre class="programlisting">all_prices = matrix(c(jan_price, mar_price, june_price), nrow= 3)
all_prices</pre><p>The <code class="literal">all_prices</code> data frame will look like the following:</p><pre class="programlisting">[,1] [,2] [,3]
 [1,] 10 11 20
 [2,] 20 22 25
 [3,] 30 33 33</pre><p>Now suppose we change our mind and want to arrange this with the items displayed column-wise and the prices displayed row-wise; that is, the first row corresponds to the prices of different items in a particular month and the first column corresponds to the first month's (January's) prices of different items, with that arrangement continuing for every other row and column. We can do so very easily by mentioning <code class="literal">byrow = TRUE</code> inside the matrix. <code class="literal">byrow = TRUE</code> arranges the values of vectors row-wise. It arranges the matrix by aligning all the elements row-wise allowing for its dimensions:</p><pre class="programlisting">all_prices2 = matrix(c(jan_price, mar_price, june_price), nrow= 3,byrow= TRUE)  
all_prices2</pre><p>The output will look like the following:</p><pre class="programlisting">[,1] [,2] [,3]
 [1,] 10 20 30
 [2,] 11 22 33
 [3,] 20 25 33</pre><p>We can see that here <code class="literal">jan_price</code> is considered as the first row, <code class="literal">mar_price</code> as the second row, and <code class="literal">june_price</code> as the third row in <code class="literal">all_prices2</code>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec2"></a>Array</h4></div></div></div><p>Arrays are also like matrices, but they allow us to have more than two dimensions. The <code class="literal">all_prices2</code> row has <span>prices</span><a id="id325752581" class="indexterm"></a> of different items for January, March, and June 2018. Now, suppose we also want to record prices for 2017. We can do so by using <code class="literal">array()</code> and in this case we want to add two 3x3 matrices where the first one corresponds to 2018 and the latter matrix corresponds to 2017. In <code class="literal">array(m, n, p)</code>, <code class="literal">m</code> and <code class="literal">n</code> stand for the dimensions of the matrix and <code class="literal">p</code> stands for how many matrices we want to store.</p><p>In the following example, we define six vectors for three different months for two different years. Now we create an array by combining six different vectors using <code class="literal">c()</code> and by using them inside <code class="literal">array()</code> as inputs as follows:</p><pre class="programlisting"># Create six vectors
jan_2018 = c(10, 11, 20)
mar_2018 = c(20, 22, 25)
june_2018 = c(30, 33, 33)
jan_2017 = c(10, 10, 17)
mar_2017 = c(18, 23, 21)
june_2017 = c(25, 31, 35)</pre><pre class="programlisting"># Now combine these vectors into array
combined = array(c(jan_2018, mar_2018, june_2018, jan_2017, mar_2017, june_2017),dim = c(3,3,2))
combined</pre><p>We can now see that we have two matrices of 3 x 3 dimensions, as in the output as follows:</p><div class="mediaobject"><img src="/graphics/9781788991674/graphics/d18f1635-cd8c-4c41-8587-bfcf7e58c364.png" /></div><p> </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec3"></a>Data frames</h4></div></div></div><p>Data frames are like matrices, except for the one additional advantage that we can now have a mix of different element types in a data frame. For example, we can now store <span>both</span><a id="id325752646" class="indexterm"></a> numeric and character elements in this data structure. Now, we can also put the names of different food items along with their prices in different months to be stored in a data frame. First, define a variable with the names of different food items:</p><pre class="programlisting">items = c("potato", "rice", "oil")</pre><p>We can define a data frame using <code class="literal">data.frame</code> as follows:</p><pre class="programlisting">all_prices3 = data.frame(items, jan_price, mar_price, june_price) 
all_prices3</pre><p>The data frame <code class="literal">all_prices3</code> looks like the following:</p><div class="mediaobject"><img src="/graphics/9781788991674/graphics/ccbeb4e7-d615-4b5f-af10-ccd040c0a0d7.png" /></div><p>Accessing elements in a data frame can be done by using either <code class="literal">[[]]</code> or <code class="literal">$</code>. To select all the values of <code class="literal">mar_price</code> or the second column, we can do either of the two methods provided as follows:</p><pre class="programlisting">all_prices3$mar_price</pre><p>This gives the values of the <code class="literal">mar_price</code> column of the <code class="literal">all_prices3</code> data frame:</p><pre class="programlisting">[1] 11 22 33</pre><p>Similarly, there is the following:</p><pre class="programlisting">all_prices3[["mar_price"]]</pre><p>We now find the same output as we found by using the <code class="literal">$</code> sign:</p><pre class="programlisting">[1] 11 22 33</pre><p>We can also use <code class="literal">[]</code> to access a data frame. In this case, we can utilize both the row and column dimensions to access an element (or elements) using the row index indicated by the number before, and the column index indicated by the number after. For example, if we wanted to access the second row and third column of <code class="literal">all_prices3</code>, we would write this:</p><pre class="programlisting">all_prices3[2, 3]</pre><p>This gives the following output:</p><pre class="programlisting">[1] 22</pre><p>Here, for simplicity, we will drop items column from <code class="literal">all_prices3</code> using <code class="literal">-</code> and rename the new variable as <code class="literal">all_prices4</code> and we can define this value in a new vector <code class="literal">pen</code> as follows:</p><pre class="programlisting">all_prices4 = all_prices3[-1]</pre><pre class="programlisting">all_prices4</pre><p>We can now see that the <code class="literal">items</code> column is dropped from the <code class="literal">all_prices4</code> data frame:</p><div class="mediaobject"><img src="/graphics/9781788991674/graphics/ebde9807-cf73-4fd6-acac-71ba43351e54.png" /></div><p>We can add a row using <code class="literal">rbind()</code>. Now we <span>define</span><a id="id325535333" class="indexterm"></a> a new numerical vector that contains the price of the <code class="literal">pen</code> vector for January, March, and June, and we can add this row using <code class="literal">rbind()</code>:</p><pre class="programlisting">pen = c(3, 4, 3.5)
all_prices4 =rbind(all_prices4, pen)
all_prices4</pre><p>Now we see from the following output that a new observation is added as a new row:</p><div class="mediaobject"><img src="/graphics/9781788991674/graphics/c86a487a-443d-4528-b001-0fd1c285049f.png" /></div><p>We can add a column using <code class="literal">cbind()</code>. Now, suppose we also have information on the prices of <code class="literal">potato</code>, <code class="literal">rice</code>, <code class="literal">oil</code>, and <code class="literal">pen</code> for August as given in the vector <code class="literal">aug_price</code>:</p><pre class="programlisting">aug_price = c(22, 24, 31, 5)</pre><p>We can now use <code class="literal">cbind()</code> to add <code class="literal">aug_price</code> as a new column to <code class="literal">all_prices4</code>:</p><pre class="programlisting">all_prices4 =cbind(all_prices4, aug_price)
all_prices4</pre><p>Now <code class="literal">all_prices4</code> has a <span>new</span><a id="id325535480" class="indexterm"></a> column <code class="literal">aug_price</code> added to it:</p><div class="mediaobject"><img src="/graphics/9781788991674/graphics/ef7e1e0b-4ac0-4954-a06b-085fbbc14e95.png" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec4"></a>Lists</h4></div></div></div><p>Now, items <code class="literal">jan_price</code> and <code class="literal">mar_price</code> have four elements, whereas <code class="literal">june_price</code> has three elements. So, we can't use a data frame in this case to store all of these values in a <span>single</span><a id="id325535518" class="indexterm"></a> variable. Instead, we can use <span class="strong"><strong>lists</strong></span>. Using lists, we can get almost all the advantages of a data frame in addition to its capacity for storing different sets of elements (columns in the case of data frames) with different lengths:</p><pre class="programlisting">all_prices_list2 = list(items, jan_price, mar_price, june_price)
all_prices_list2</pre><p>We can now see that <code class="literal">all_prices_list2</code> has a different structure than that of a data frame:</p><div class="mediaobject"><img src="/graphics/9781788991674/graphics/56be0438-ab28-47ea-a016-b87c45f0fdfd.png" /></div><p>Accessing list elements can be done by either using <code class="literal">[]</code> or <code class="literal">[[]]</code> where the former gives back a list and the latter gives back element(s) in its original data type. We can get the values of <code class="literal">jan_price</code> in the following way:</p><pre class="programlisting">all_prices_list2[2]</pre><p>Using <code class="literal">[]</code>, we are returned with the second element of <code class="literal">all_prices_list2</code> as a list again:</p><div class="mediaobject"><img src="/graphics/9781788991674/graphics/121b20e7-9120-4c69-bdce-80c8cb61bdce.png" /></div><p>Note that, by using <code class="literal">[]</code>, what we get back is another list and we can't use different mathematical operations on it directly.</p><pre class="programlisting">class(all_prices_list2[2])</pre><p>We can see, as follows, that the class of <code class="literal">all_prices_list2</code> is a list:</p><div class="mediaobject"><img src="/graphics/9781788991674/graphics/d2e6559b-00b2-42e8-9e6f-6d0260c4035e.png" /></div><p>We can get this data in <span>original</span><a id="id325535614" class="indexterm"></a> data types (that is, a numeric vector) by using <code class="literal">[[]]</code> instead of <code class="literal">[]</code>:</p><pre class="programlisting">all_prices_list2[[2]]</pre><p>Now, we get the second element of the list as a vector:</p><div class="mediaobject"><img src="/graphics/9781788991674/graphics/7336d236-73ae-437d-a226-fe0ebb57b18b.png" /></div><p>We can see that it is numeric and we can check further to confirm that it is numeric:</p><pre class="programlisting">class(all_prices_list2[[2]])</pre><p>The following result confirms that it is indeed a numeric vector:</p><div class="mediaobject"><img src="/graphics/9781788991674/graphics/03de3c4e-7942-4a95-87dd-fcbf1493d478.png" /></div><p>We can also create categorical variables with <code class="literal">factor()</code>.</p><p>Suppose we have a numeric vector <code class="literal">x</code> and we want to convert it to a factor, we can do so by following the code as shown as follows:</p><pre class="programlisting">x = c(1, 2, 3)
x = factor(x)
class(x)</pre></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec5"></a>Factor</h4></div></div></div><p>We now see that the class is a <code class="literal">factor</code>, as we can see in the following output:</p><pre class="programlisting">[1] "factor"</pre><p>Now, we can also look at the <span>internal</span><a id="id325535697" class="indexterm"></a> structure of this vector <code class="literal">x</code>, using <code class="literal">str()</code> as follows:</p><pre class="programlisting">str(x)</pre><p>We now see that it converts <code class="literal">1</code>, <code class="literal">2</code>, and <code class="literal">3</code> to factors:</p><pre class="programlisting">[1]  Factor w/ 3 levels "1", "2", "3": 1 2 3</pre></div></div></div>