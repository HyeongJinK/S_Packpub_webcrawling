<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec24"></a>Jinja's syntax</h2></div></div><hr /></div><p><span class="strong"><strong>Jinja</strong></span> is a templating language written in Python. A <span class="strong"><strong>templating language</strong></span> is a simple <span>format</span><a id="id325787726" class="indexterm"></a> that is designed to help automate the creation of documents. In any <span>templating</span><a id="id325787735" class="indexterm"></a> language, variables passed to the template replace predefined elements in the template. In Jinja, variable substitutions are defined by <code class="literal">{{ }}</code>. The <code class="literal">{{ }}</code> syntax is <span>called</span><a id="id325787748" class="indexterm"></a> a <span class="strong"><strong>variable block</strong></span>. There are also <span class="strong"><strong>control blocks</strong></span> defined by <code class="literal">{% %}</code> that declare <span>language</span><a id="id325787766" class="indexterm"></a> functions, such as <span class="strong"><strong>loops</strong></span> or <code class="literal">if</code> statements. For example, when the <code class="literal">Post</code> model from <a class="link" href="#" linkend="ch02">Chapter 2</a>, <span class="emphasis"><em>Creating Models with SQLAlchemy</em></span>, is passed to it, we get the following Jinja code:</p><pre class="programlisting">&lt;h1&gt;{{ post.title }}&lt;/h1&gt; </pre><p>This produces the following:</p><pre class="programlisting">&lt;h1&gt;First Post&lt;/h1&gt; </pre><p>The variables displayed in a Jinja template can be any Python <span>type</span><a id="id325842794" class="indexterm"></a> or object as long as they can be converted into a string via the Python function <code class="literal">str()</code>. For example, a dictionary or a list passed to a template can have its attributes displayed via the following code:</p><pre class="programlisting">{{ your_dict['key'] }} 
{{ your_list[0] }} </pre><p> </p><p> </p><p> </p><p> </p><p>Many programmers prefer to use JavaScript to template and dynamically create their HTML documents to take the HTML rendering load off the server. This will not be covered in this chapter as it is an advanced JavaScript topic. However, many JavaScript templating engines use the <code class="literal">{{ }}</code> syntax as well. If you choose to combine Jinja and your JavaScript templates that are defined in your HTML files, then wrap the JavaScript templates in the <code class="literal">raw</code> control block to tell Jinja to ignore them, as follows:</p><pre class="programlisting">{% raw %} 
&lt;script id="template" type="text/x-handlebars-template"&gt; 
  &lt;h1&gt;{{title}}&lt;/h1&gt; 
  &lt;div class="body"&gt; 
    {{body}} 
  &lt;/div&gt; 
&lt;/script&gt; 
{% endraw %} </pre><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec22"></a>Filters</h3></div></div></div><p>It's a common mistake to believe that Jinja <span>and</span><a id="id325857008" class="indexterm"></a> Python's syntax are the same because of their similarity. However, there is a lot of difference between the two. As you will see in this section, normal Python functions do not really exist. Instead, in Jinja, variables can be passed to built-in functions that modify the variables for display purposes. These functions, called filters, are called in the variable block with the pipe character, <code class="literal">|</code>, as shown in the following code:</p><pre class="programlisting">{{ variable | filter_name(*args) }} </pre><p>Otherwise, if no arguments are passed to the filter, the parentheses can be omitted as follows:</p><pre class="programlisting">{{ variable | filter_name }} </pre><p>Filters called control blocks can also be applied to blocks of text, as follows:</p><pre class="programlisting">{% filter filter_name %} 
  A bunch of text 
{% endfilter %} </pre><p>There are many filters in Jinja; this book will cover only the most useful filters. For the <span>sake</span><a id="id325857038" class="indexterm"></a> of brevity, in each example, the output of each filter will be listed directly beneath the filter itself.</p><p> </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note14"></a>Note</h3><p>For a full list of all the default filters in Jinja, visit <a class="ulink" href="http://jinja.pocoo.org/docs/dev/templates/#list-of-builtin-filters" target="_blank"><span>http://jinja.pocoo.org/docs/dev/templates/#list-of-builtin-filters</span></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec2"></a>The default filter</h4></div></div></div><p>If the passed variable is <code class="literal">None</code>, then <span>replace</span><a id="id325857070" class="indexterm"></a> it with a <code class="literal">default</code> value as follows:</p><pre class="programlisting">{{ post.date | default('2015-01-01') }} 
2015-01-01 </pre><p>If you wish to replace the variable with the <code class="literal">default</code> value, and if the variable evaluates to <code class="literal">False</code>, then pass <code class="literal">True</code> to the optional second parameter, as follows:</p><pre class="programlisting">{{ '' | default('An empty string', True) }} 
An empty string</pre></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec3"></a>The escape filter</h4></div></div></div><p>If the passed <span>variable</span><a id="id325857281" class="indexterm"></a> is a string of HTML, then the <code class="literal">&amp;</code>, <code class="literal">&lt;</code>, <code class="literal">&gt;</code>, <code class="literal">'</code>, and <code class="literal">"</code> characters will be printed as HTML <code class="literal">escape</code> sequences:</p><pre class="programlisting">{{ "&lt;h1&gt;Title&lt;/h1&gt;" | escape }} 
&lt;h1&gt;Title&lt;/h1&gt; </pre></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec4"></a>The float filter</h4></div></div></div><p>The <code class="literal">float</code> filter converts the passed value to a <span>floating</span><a id="id325912688" class="indexterm"></a> point number with the Python <code class="literal">float()</code> function as follows:</p><pre class="programlisting">{{ 75 | float }} 
75.0 </pre></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec5"></a>The int filter</h4></div></div></div><p>The <code class="literal">int</code> filter converts the passed value to an <span>integer</span><a id="id325912713" class="indexterm"></a> with the Python <code class="literal">int()</code> function as follows:</p><pre class="programlisting">{{ 75.7 | int }} 
75 </pre><p> </p><p> </p><p> </p><p> </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec6"></a>The join filter</h4></div></div></div><p>The <code class="literal">join</code> filter joins elements of a list <span>with</span><a id="id325919989" class="indexterm"></a> a string, and works in exactly the same way as the <code class="literal">list</code> method of the same name. It is given as follows:</p><pre class="programlisting">{{ ['Python', 'SQLAlchemy'] | join(',') }} 
Python, SQLAlchemy </pre></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec7"></a>The length filter</h4></div></div></div><p>The <code class="literal">length</code> filter fills the <span>same</span><a id="id325920014" class="indexterm"></a> role as the Python <code class="literal">len()</code> function. It is used as follows:</p><pre class="programlisting">Tag Count: {{ post.tags | length }} 
Tag Count: 2 </pre></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec8"></a>The round filter</h4></div></div></div><p>The <code class="literal">round</code> filter rounds off a float to the specified precision, as follows:</p><pre class="programlisting">{{ 3.141592653589793238462 | round(1) }} 
3.1 </pre><p>You can also specify how you want the number to be rounded off, as shown in the following code:</p><pre class="programlisting">{{ 4.7 | round(1, "common") }} 
5 
{{ 4.2 | round(1, "common") }} 
4 
{{ 4.7 | round(1, "floor") }} 
4 
{{ 4.2 | round(1, "ceil") }} 
5 </pre><p>The <code class="literal">common</code> option rounds such figures in the <span>same</span><a id="id325949958" class="indexterm"></a> way that a person would: Any number at or above 0.5 is rounded up, and any number lower than 0.5 is rounded down. The <code class="literal">floor</code> option always rounds the number down and the <code class="literal">ceil</code> option always rounds up, regardless of the decimal value.</p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec9"></a>The safe filter</h4></div></div></div><p>If you try to insert HTML into your page <span>from</span><a id="id325950000" class="indexterm"></a> a variable—for example, when you wish to display a blog post—Jinja will automatically try to add HTML <code class="literal">escape</code> sequences to the output. Look at the following example:</p><pre class="programlisting">{{ "&lt;h1&gt;Post Title&lt;/h1&gt;" }} 
&lt;h1&gt;Post Title&lt;/h1&gt; </pre><p>This is a necessary security feature. When an application has inputs that allow users to submit arbitrary text, it creates a vulnerability that a malicious user can use to input HTML code. For example, if a user were to submit a script tag as a comment and Jinja didn't have this feature, the script would be executed on all the browsers that visited the page.</p><p>However, we still need a way to display HTML that we know is safe to show, such as the HTML of our blog posts. We can achieve this using the <code class="literal">safe</code> filter as follows:</p><pre class="programlisting">{{ "&lt;h1&gt;Post Title&lt;/h1&gt;" | safe }} 
&lt;h1&gt;Post Title&lt;/h1&gt; </pre></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec10"></a>The title filter</h4></div></div></div><p>The <code class="literal">title</code> filter enables us to capitalize a <span>string</span><a id="id326116370" class="indexterm"></a> using the <code class="literal">title</code> case format as follows:</p><pre class="programlisting">{{ "post title" | title }} 
Post Title </pre></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec11"></a>The tojson filter</h4></div></div></div><p>We use the <code class="literal">tojson</code> filter to pass the variable to <span>the</span><a id="id326116395" class="indexterm"></a> Python <code class="literal">json.dumps</code> function, as shown in the following code. Remember that your passed object must be serializable by the <code class="literal">json</code> module:</p><pre class="programlisting">{{ {'key': False, 'key2': None, 'key3': 45} | tojson }} 
{key: false, key2: null, key3: 45} </pre><p>This feature is most commonly used to pass SQLAlchemy models to JavaScript MVC frameworks upon the loading of the page load than waiting for an AJAX request. If you use <code class="literal">tojson</code> in this way, remember to pass the result to the <code class="literal">safe</code> filter as well to make sure that you don't get HTML <code class="literal">escape</code> sequences in your JavaScript. Here is an example with a collection of models from <code class="literal">Backbone.js</code>, a popular JavaScript MVC framework:</p><pre class="programlisting">var collection = new PostCollection({{ posts | tojson | safe }}); </pre></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec12"></a>The truncate filter</h4></div></div></div><p>The <code class="literal">truncate</code> filter takes a long string, returns a string cutoff at the specified length in characters, and appends an ellipsis, as shown in <span>the</span><a id="id326116444" class="indexterm"></a> following code:</p><pre class="programlisting">{{ "A Longer Post Body Than We Want" | truncate(10) }} 
A Longer... </pre><p>By default, any words that are cut in the middle are discarded. To disable this, pass <code class="literal">True</code> as an extra parameter as follows:</p><pre class="programlisting">{{ "A Longer Post Body Than We Want" | truncate(10, True) }} 
A Longer P... </pre></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec13"></a>Custom filters</h4></div></div></div><p>Adding your own filter into Jinja is as simple as writing a Python function. To understand custom filters, we will look at an example. Our simple filter will count the number of occurrences of a substring in a string and return this figure. Look at <span>the</span><a id="id326116473" class="indexterm"></a> following call:</p><pre class="programlisting">{{ variable | count_substring("string") }} </pre><p>We need to write a new Python function with the following signature, where the first argument is the <span class="emphasis"><em>piped </em></span>variable:</p><pre class="programlisting">def count_substring(variable, sub_string) </pre><p>We can define our filter as the following:</p><pre class="programlisting"><span>@app</span><span>.</span><span>template_filter
</span>def count_substring(string, sub_string): return string.count(sub_string)</pre><p>To add this function to the list of available filters on <span class="strong"><strong>Jinja2</strong></span>, we have to register it <span>and</span><a id="id326116823" class="indexterm"></a> add it to the <code class="literal">filters</code> dictionary of the <code class="literal">jinja_env</code> object in our <code class="literal">main.py</code> file. To do this, we can simply use a decorator that will handle this procedure for us—<code class="literal"><span>@app</span><span>.</span><span>template_filter</span></code>.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec23"></a>Comments</h3></div></div></div><p>Comments in the template are defined by <code class="literal">{# #}</code>, as shown in the <span>following</span><a id="id326116857" class="indexterm"></a> code. They will be ignored by Jinja, and will not be in the returned HTML code:</p><pre class="programlisting">{# Note to the maintainers of this code #} </pre></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec24"></a>Using if statements</h3></div></div></div><p>Using <code class="literal">if</code> statements in Jinja is similar to using them in Python. Anything that returns, or is, a Boolean determines the flow of the code, as shown in the <span>following</span><a id="id326116881" class="indexterm"></a> code:</p><pre class="programlisting">{%if user.is_logged_in() %} 
  &lt;a href='/logout'&gt;Logout&lt;/a&gt; 
{% else %} 
  &lt;a href='/login'&gt;Login&lt;/a&gt; 
{% endif %} </pre><p>Filters can also be used in <code class="literal">if</code> statements, as follows:</p><pre class="programlisting">{% if comments | length &gt; 0 %} 
  There are {{ comments | length }} comments 
{% else %} 
  There are no comments 
{% endif %} </pre></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec25"></a>Loops</h3></div></div></div><p>We can use loops in Jinja to iterate over <span>any</span><a id="id326116912" class="indexterm"></a> list or generator function, as follows:</p><pre class="programlisting">{% for post in posts %} 
  &lt;div&gt; 
    &lt;h1&gt;{{ post.title }}&lt;/h1&gt; 
    &lt;p&gt;{{ post.text | safe }}&lt;/p&gt; 
  &lt;/div&gt; 
{% endfor %} </pre><p> </p><p> </p><p> </p><p> </p><p>Loops and <code class="literal">if</code> statements can be combined to mimic the <code class="literal">break</code> functionality in Python loops. In this example, the loop will only use the post <code class="literal">if post.text</code> is not <code class="literal">None</code>:</p><pre class="programlisting">{% for post in posts if post.text %}
  &lt;div&gt;
    &lt;h1&gt;{{ post.title }}&lt;/h1&gt;
    &lt;p&gt;{{ post.text | safe }}&lt;/p&gt;
  &lt;/div&gt;
{% endfor %}</pre><p>Inside the loop, you have access to a special variable called <code class="literal">loop</code>, which gives you access to information about the <code class="literal">for</code> loop. For example, if we want to know the current index of the current loop to emulate the <code class="literal">enumerate</code> function in Python, we can use the index variable of the <code class="literal">loop</code> variable as follows:</p><pre class="programlisting">{% for post in posts %} 
  {{ loop.index }}. {{ post.title }} 
{% endfor %} </pre><p>This will produce the following output:</p><pre class="programlisting">1. Post Title 
2. Second Post </pre><p>All the variables and functions that the <code class="literal">loop</code> object exposes are listed in the following table:</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; "><colgroup><col /><col /></colgroup><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><span class="strong"><strong>Variable</strong></span></p></td><td style="border-bottom: 0.5pt solid ; "><p><span class="strong"><strong>Description</strong></span></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">loop.index</code></p></td><td style="border-bottom: 0.5pt solid ; "><p>The current iteration of the loop (1 indexed)</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">loop.index0</code></p></td><td style="border-bottom: 0.5pt solid ; "><p>The current iteration of the loop (0 indexed)</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">loop.revindex</code></p></td><td style="border-bottom: 0.5pt solid ; "><p>The number of iterations from the end of the loop (1 indexed)</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">loop.revindex0</code></p></td><td style="border-bottom: 0.5pt solid ; "><p>The number of iterations from the end of the loop (0 indexed)</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">loop.first</code></p></td><td style="border-bottom: 0.5pt solid ; "><p>True if the current item is first in the iterator</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">loop.last</code></p></td><td style="border-bottom: 0.5pt solid ; "><p>True if the current item is last in the iterator</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">loop.length</code></p></td><td style="border-bottom: 0.5pt solid ; "><p>The number of items in the iterator</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">loop.cycle</code></p></td><td style="border-bottom: 0.5pt solid ; "><p>The <code class="literal">helper</code> function to cycle between the items in the iterator (this is explained later)</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><code class="literal">loop.depth</code></p></td><td style="border-bottom: 0.5pt solid ; "><p>Indicates how deep in a recursive loop the loop currently is (starts at level 1)</p></td></tr><tr><td style="border-right: 0.5pt solid ; "><p><code class="literal">loop.depth0</code></p></td><td style=""><p>Indicates how deep in a recursive loop the loop currently is (starts at level 0)</p></td></tr></tbody></table></div><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p>The <code class="literal">cycle</code> function is a function that goes through an iterator one item at a time in every loop. We can use the previous example to demonstrate, as shown in the following code:</p><pre class="programlisting">{% for post in posts %} 
  {{ loop.cycle('odd', 'even') }} {{ post.title }} 
{% endfor %} </pre><p>This will output the following:</p><pre class="programlisting">odd Post Title 
even Second Post </pre></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec26"></a>Macros</h3></div></div></div><p>A <span class="strong"><strong>macro</strong></span> is best understood as a function in Jinja that returns a template or HTML string. This is used to avoid reproducing code that is repeated over and over again and reduce it to one function call. For example, the following is a macro to add a Bootstrap CSS input and a label to your template:</p><pre class="programlisting">{% macro input(name, label, value='', type='text') %} 
  &lt;div class="form-group"&gt; 
    &lt;label for"{{ name }}"&gt;{{ label }}&lt;/label&gt; 
    &lt;input type="{{ type }}" name="{{ name }}" 
      value="{{ value | escape }}" class="form-control"&gt; 
  &lt;/div&gt; 
{% endmacro %} </pre><p>Now, to quickly add an input to a form in <span>any</span><a id="id325643420" class="indexterm"></a> template, call your macro using the following:</p><pre class="programlisting">{{ input('name', 'Name') }} </pre><p>This will output the following:</p><pre class="programlisting">&lt;div class="form-group"&gt; 
  &lt;label for"name"&gt;Name&lt;/label&gt; 
  &lt;input type="text" name="name" value="" class="form-control"&gt; 
&lt;/div&gt; </pre></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec27"></a>Flask-specific variables and functions</h3></div></div></div><p>Flask makes several functions and <span>objects</span><a id="id325643446" class="indexterm"></a> available to you by <span>default</span><a id="id325643454" class="indexterm"></a> in your template.</p><p> </p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec14"></a>The config object</h4></div></div></div><p>Flask <span>makes</span><a id="id325643508" class="indexterm"></a> the current <code class="literal">config</code> object available in templates as follows:</p><pre class="programlisting">{{ config.SQLALCHEMY_DATABASE_URI }} 
sqlite:///database.db </pre></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec15"></a>The request object</h4></div></div></div><p>The Flask <code class="literal">request</code> object <span>refers</span><a id="id325643533" class="indexterm"></a> to the current request:</p><pre class="programlisting">{{ request.url }} 
http://127.0.0.1/ </pre></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec16"></a>The session object</h4></div></div></div><p>The Flask <code class="literal">session</code> object is <span>as</span><a id="id325643556" class="indexterm"></a> follows:</p><pre class="programlisting">{{ session.new }} 
True </pre></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec17"></a>The url_for() function</h4></div></div></div><p>The <code class="literal">url_for</code> function returns the URL of a route by giving the route function name <span>as</span><a id="id325988770" class="indexterm"></a> a parameter, as shown in the following code. This allows URLs to be changed without worrying about where links will break:</p><pre class="programlisting">{{ url_for('home') }} 
/ </pre><p>Here, <code class="literal">home</code><span class="strong"><strong> </strong></span>is the name of a function that is registered as an endpoint on Flask,<span class="strong"><strong> </strong></span>and the relative URL root associated with it, so on our <code class="literal">main.py</code>, we must define a function to deal with the HTTP request and register it on Flask using the decorator <code class="literal">app.route(rule, **options)</code>, as shown in the following code:</p><pre class="programlisting">@app.route('/')
def home():
...</pre><p>If we had a route that had positional arguments in the URL, we pass them as <code class="literal">kwargs</code>. They will be filled in for us in the resultant URL as follows:</p><pre class="programlisting">{{ url_for('post', post_id=1) }}
/post/1</pre><p>With the respective function that we use to handle the request, we restrict this method to handle only GET and POST HTTP requests, as follows:</p><pre class="programlisting">@app.route('/post/&lt;int:post_id&gt;', methods=('GET', 'POST'))
def post(post_id):
...</pre></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec18"></a>The get_flashed_messages() function</h4></div></div></div><p>The <code class="literal">get_flashed_messages()</code> function returns a list of all the messages passed through the <code class="literal">flash()</code> function in Flask. The <code class="literal">flash</code> function is a simple function that <span>queues</span><a id="id326156230" class="indexterm"></a> messages—which consist of Python tuples of (category, message) phrases—for the <code class="literal">get_flashed_messages</code> function to consume, as shown in the following code:</p><pre class="programlisting">{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        {% for category, message in messages %}
        &lt;div class="alert alert-{{ category }} alert-dismissible"               
       role="alert"&gt;
        &lt;button type="button" class="close" data-dismiss="alert" aria-   
   label="Close"&gt;&lt;span aria-hidden="true"&gt;&amp;times;&lt;/span&gt;&lt;/button&gt;
{{ message }}
        &lt;/div&gt;
        {% endfor %}
    {% endif %}
{% endwith %}</pre><p>Proper feedback to the user is very important, and Flask makes it very simple to implement—for example, when handling a new post entry, we want to let the user know that his/her post was saved correctly. The <code class="literal">flash()</code> function accepts three different categories: <code class="literal">info</code>, <code class="literal">error</code>, and <code class="literal">warning</code>. Refer to the following code snippet:</p><pre class="programlisting">@app.route('/post/&lt;int:post_id&gt;', methods=('GET', 'POST'))
def post(post_id):
...
    db.session.commit()
    flash("New post added.", 'info')
...</pre></div></div></div>