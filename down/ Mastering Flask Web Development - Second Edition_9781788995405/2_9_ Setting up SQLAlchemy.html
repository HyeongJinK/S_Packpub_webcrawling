<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec16"></a>Setting up SQLAlchemy</h2></div></div><hr /></div><p>In order to go through the <span>exercises</span><a id="id325375210" class="indexterm"></a> in this chapter, you will need a running database, if you do not already have one. If you have never installed a database, or you do not have a preference, then <span class="strong"><strong>SQLite</strong></span> is the best <span>option</span><a id="id325378665" class="indexterm"></a> for beginners, or if you want to quickly bootstrap a proof of concept.</p><p><span class="strong"><strong>SQLite</strong></span> is an SQL-embedded d<span>atabase</span> engine that is fast, works without a server, and is entirely contained in one file. SQLite is also natively supported in Python, so if you choose to go with SQLite, an SQLite database will be automatically created for you during the exercise in the <span class="emphasis"><em>Our first model</em></span> section.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec13"></a>Python packages</h3></div></div></div><p>Flask SQLAlchemy can be used with multiple <span>database</span><a id="id325378692" class="indexterm"></a> engines, such as ORACLE, MSSQL, MySQL, PostgreSQL, SQLite, and Sybase, but we need to install additional specific packages for these engines. Now it is time to bootstrap our project by creating a new virtual environment for all our application's dependencies. This virtual environment will be used for our blogging application. Enter the following code:</p><pre class="programlisting"><span class="strong"><strong>$ virtualenv env</strong></span></pre><p>Then, in <code class="literal">requirements.txt</code>, add the following code to install the package:</p><pre class="programlisting">flask-sqlalchemy</pre><p>You will also need to install specific packages for your chosen database that will act as the connector for SQLAlchemy, so add the specific packages for your engine in <code class="literal">requirements.txt</code>, as shown in the following code. SQLite users can skip this step:</p><pre class="programlisting"><span class="strong"><strong># MySQL</strong></span><span class="strong"><strong>PyMySQL</strong></span><span class="strong"><strong># Postgres</strong></span><span class="strong"><strong>psycopg2</strong></span><span class="strong"><strong># MSSQL</strong></span><span class="strong"><strong>pyodbc</strong></span><span class="strong"><strong># Oracle</strong></span><span class="strong"><strong>cx_Oracle</strong></span></pre><p>Finally, activate and install the dependencies using the following code:</p><pre class="programlisting"><span class="strong"><strong>$ source env/bin/activate
$ pip install -r requirements.txt</strong></span></pre></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec14"></a>Flask SQLAlchemy</h3></div></div></div><p>Before we can abstract our data, we need to set up Flask SQLAlchemy. SQLAlchemy creates its database connection through a special <span>database</span><a id="id325378796" class="indexterm"></a> URI. This is a string that looks like a URL that contains all the information that SQLAlchemy needs to connect. It takes the general form of the following code:</p><pre class="programlisting">databasetype+driver://user:password@host:port/db_name </pre><p>For each driver that you installed previously, the URI would be as follows:</p><pre class="programlisting"># SQLite connection string/uri is a path to the database file - relative or absolute.<span class="strong"><strong>sqlite:///database.db</strong></span> 
# MySQL 
<span class="strong"><strong>mysql+pymysql://user:password@ip:port/db_name</strong></span> 
# Postgres 
<span class="strong"><strong>postgresql+psycopg2://user:password@ip:port/db_name</strong></span> 
# MSSQL 
<span class="strong"><strong>mssql+pyodbc://user:password@dsn_name</strong></span> 
# Oracle 
<span class="strong"><strong>oracle+cx_oracle://user:password@ip:port/db_name</strong></span></pre><p>In our <code class="literal">config.py</code> file, add the URI to the <code class="literal">DevConfig</code> file with the following:</p><pre class="programlisting">class DevConfig(Config): 
  debug = True 
  SQLALCHEMY_DATABASE_URI = "YOUR URI" </pre></div></div>