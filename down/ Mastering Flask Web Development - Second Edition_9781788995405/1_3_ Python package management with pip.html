<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch01lvl1sec11"></a>Python package management with pip</h2></div></div><hr /></div><p>In Python, programmers can <span>download</span><a id="id324847030" class="indexterm"></a> libraries from other <span>programmers</span><a id="id325368992" class="indexterm"></a> that extend the functionality of the standard Python library. As you already know from using Flask, a lot of Python's power comes from its large number of community-created libraries.</p><p>However, installing third-party libraries can be a huge pain to do correctly. Say that you want to install package X. Simple enough: download the ZIP file and run<code class="literal">setup.py</code>, right? Not quite. Package X relies on package Y, which in turn relies on Z and Q. None of this information was listed on package X's website, but these packages need to be installed for X to work at all. You then have to find all of the packages one by one and install them, and then hope that the packages you are installing don't require any extra packages themselves.</p><p>In order to automate this process, we use <span class="strong"><strong>pip</strong></span>, the Python package manager.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec6"></a>Installing the Python package manager on Windows</h3></div></div></div><p>If you are using Windows, and your previously installed version of Python is the current version, then you already have pip! If your Python installation is not the most recent version, then the easiest thing to do is to simply reinstall it. <span>Download</span><a id="id325371650" class="indexterm"></a> the <span>Python</span><a id="id325371658" class="indexterm"></a> Windows installer at <a class="ulink" href="https://www.python.org/downloads/" target="_blank"><span>https://www.python.org/downloads/</span></a>.</p><p>In Windows, the variable that controls which programs are accessible from the command line is the <code class="literal">path</code>. To modify our <code class="literal">path</code> to include Python and pip, we have to add <code class="literal">C:\Python27</code> and <code class="literal">C:\Python27\Tools</code>. Edit the Windows <code class="literal">path</code> by opening the Windows menu, right-clicking on <strong class="userinput"><code>Computer</code></strong>, and clicking on <strong class="userinput"><code>Properties</code></strong>. Under <strong class="userinput"><code>Advanced system settings</code></strong>, click <strong class="userinput"><code>Environment Variables...</code></strong>. Scroll down until you find <strong class="userinput"><code>Path</code></strong>, double-click on it, and add <code class="literal">;C:\Python27;C:\Python27\Tools</code> to the end.</p><p>To make sure that you have modified your path correctly, close and reopen your Terminal and type the following into the command line:</p><pre class="programlisting"><span class="strong"><strong>pip --help</strong></span></pre><p> </p><p> </p><p>Pip should have printed its usage message, as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781788995405/graphics/c9113d0d-62bc-4a45-b704-219fe44e4e29.png" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec7"></a>Installing pip Python package manager on macOS X and Linux</h3></div></div></div><p>Some Python installations of Linux do not <span>come</span><a id="id325375169" class="indexterm"></a> with pip, and Mac OS X's installations doesn't come with pip by default. If you are using Python 2.7, then you may need to install pip, but pip is already <span>included</span><a id="id325375177" class="indexterm"></a> in Python 3.4, and in later versions. You can check this using the following:</p><pre class="programlisting"><span class="strong"><strong>$ python3 -m pip list</strong></span></pre><p>If you need to install it, download the <code class="literal">get-pip.py</code> file from <a class="ulink" href="https://bootstrap.pypa.io/get-pip.py" target="_blank">https://bootstrap.pypa.io/get-pip.py</a>.</p><p>Once you have downloaded it, run it with elevated <span>privileges</span><a id="id325375204" class="indexterm"></a> using the following code:</p><pre class="programlisting"><span class="strong"><strong># Download and install pip
$ wget https://bootstrap.pypa.io/get-pip.py</strong></span>
<span class="strong"><strong>$ sudo python get-pip.py</strong></span></pre><p> </p><p> </p><p> </p><p> </p><p>Once this has been entered, pip will be installed automatically.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec8"></a>Pip basics</h3></div></div></div><p>We are now going to learn the <span>basic</span><a id="id325378693" class="indexterm"></a> commands for using Python package manager. To install a package with <code class="literal">pip</code>, enter the following code:</p><pre class="programlisting"><span class="strong"><strong>$ pip install [package-name]</strong></span></pre><p>On Mac and Linux, because you are installing programs outside of the user-owned folders, you might have to prepend <code class="literal">sudo</code> to the <code class="literal">install</code> commands. To install Flask, simply run the following:</p><pre class="programlisting"><span class="strong"><strong>$ pip install flask</strong></span></pre><p>Once you have done this, all of the requirements that you need for using Flask will be installed for you.</p><p>If you want to remove a package that you are no longer using, run the following:</p><pre class="programlisting"><span class="strong"><strong>$ pip uninstall [package-name]</strong></span></pre><p>If you wish to explore or find a package, but don't know its exact name, you can use the <code class="literal">search</code> command:</p><pre class="programlisting"><span class="strong"><strong>$ pip search [search-term]</strong></span></pre><p>Now that we have a couple of packages installed, it is common courtesy in the Python community to create a list of packages that are required to run the project so that others can quickly install every necessary package. This also has the added benefit that any new member of your project will be able to run your code quickly.</p><p>This list can be created with pip by running the following command:</p><pre class="programlisting"><span class="strong"><strong>$ pip freeze &gt; requirements.txt</strong></span></pre><p>What exactly did this command do? The <code class="literal">pip freeze</code> command automatically prints out a list of the installed packages and their versions. For our example, it prints the following:</p><pre class="programlisting"><span class="strong"><strong>click==6.7</strong></span>
<span class="strong"><strong>Flask==0.12.4</strong></span>
<span class="strong"><strong>itsdangerous==0.24</strong></span>
<span class="strong"><strong>Jinja2==2.10</strong></span>
<span class="strong"><strong>MarkupSafe==1.0</strong></span>
<span class="strong"><strong>Werkzeug==0.14.1</strong></span></pre><p> </p><p> </p><p> </p><p> </p><p>The <code class="literal">&gt;</code> operator tells Bash to take everything printed by the last command and write it to this file. If you look in your project directory, you can see a new file named <code class="literal">requirements.txt</code> that contains the output of <code class="literal">pip freeze</code>.</p><p>To install all the packages from this file, a new project maintainer would have to run this, as shown in the following code. Normally, this will also be used to deploy the production environment of your project:</p><pre class="programlisting"><span class="strong"><strong>$ pip install -r requirements.txt</strong></span></pre><p>The preceding code tells <code class="literal">pip</code> to read all the packages listed in <code class="literal">requirements.txt</code> and install them.</p></div></div>