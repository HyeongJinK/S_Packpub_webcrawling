<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec28"></a>Sessions and globals</h2></div></div><hr /></div><p><span class="strong"><strong>Sessions</strong></span> are the way Flask will <span>store</span><a id="id325368992" class="indexterm"></a> information across requests; to do this, Flask will use signed cookies using the previously set <code class="literal">SECRET_KEY</code> config to apply the HMAC-SHA1 default cryptographic method. So, a user can read their session cookie but can't modify it. Flask also sets a default session lifetime that defaults to 31 days to prevent relay attacks; this can be changed by using the configuration key's <code class="literal">PERMANENT_SESSION_LIFETIME</code> config key.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note19"></a>Note</h3><p>Security is paramount in today's modern web applications; read Flask's documentation carefully, where various attacks methods are covered: <a class="ulink" href="http://flask.pocoo.org/docs/security/" target="_blank">http://flask.pocoo.org/docs/security/</a>.</p></div><p>A Flask session object is a special kind of <span>Python</span><a id="id325371648" class="indexterm"></a> dictionary, but you can use it much like a plain Python dictionary, as follows:</p><pre class="programlisting">from flask import session
...
session['page_loads'] = session.get('page_loads', 0) + 1
...</pre><p><span class="strong"><strong>Global</strong></span> is a thread-safe namespace store to keep data during a request's context. At the beginning of each request, a new global object is created, and at the end of the request the object is destroyed. It's the right place to keep a User object or any data that needs to be shared across views, templates, or <span>Python</span><a id="id325371666" class="indexterm"></a> functions that are called within the request context. This is done without the need to pass around any data.</p><p>The use of <code class="literal">g</code> (global)<span class="strong"><strong> </strong></span>is very simple, to set a key on a request context:</p><pre class="programlisting">from flask import g
....
# Set some key with some value on a request context
g.some_key = "some_value"
# Get a key
v = g.some_key
# Get and remove a key
v = g.pop('some_key', "default_if_not_present")</pre></div>