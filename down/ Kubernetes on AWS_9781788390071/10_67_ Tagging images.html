<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch10lvl1sec66"></a>Tagging images</h2></div></div><hr /></div><p>Whenever a Docker image is <span>pushed</span><a id="id325268185" class="indexterm"></a> to a registry, we need to identify the image with a tag. A tag can be any alphanumeric string: <code class="literal">latest stable v1.7.3</code> and even <code class="literal">c31b1656da70a0b0b683b060187b889c4fd1d958</code> are both perfectly valid examples of tags that you might use to identify an image that you push to ECR.</p><p>Depending on how your software is developed and versioned, what you put in this tag might be different. There are three main strategies that might be adopted depending on different types of applications and development processes that that we might need to generate images for.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec95"></a>Version Control System (VCS) references</h3></div></div></div><p>When you build images from software <span>where</span><a id="id325268228" class="indexterm"></a> the source is managed in a version control system, such as Git, the simplest way of tagging your images in this case is to utilize the commit ID (often referred to as a SHA when using Git) from your VCS. This gives you a very simple way to check exactly which version of your code is currently running at any one time.</p><p>This first strategy is often adopted for applications where small changes are delivered in an incremental fashion. New versions of your images might be pushed multiple times a day and automatically deployed to testing and production-like environments. Good examples of these kinds of applications that are web applications and other software delivered as a service.</p><p>By pushing a commit ID through an automated testing and release pipeline, you can easily generate deployment manifests for an exact revision of your software.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec96"></a>Semantic versions</h3></div></div></div><p>However, this strategy becomes <span>more</span><a id="id325750930" class="indexterm"></a> cumbersome and harder to deal with if you are building container images that are intended to be used by many users, whether that be multiple users within your organisation or even when you publish images publicly for third parties to use. With applications like these, it can be helpful to use a semantic version number that has some meaning, helping those that depend on you image decide if it safe to move to a newer version.</p><p>A common scheme for these <span>sorts</span><a id="id325750940" class="indexterm"></a> of images is called <span class="strong"><strong>Semantic Versioning</strong></span> (<span class="strong"><strong>SemVer</strong></span>). This is a version number made up of three individual numbers separated by dots. These numbers <span>are</span><a id="id325750955" class="indexterm"></a> known as the <span class="strong"><strong>MAJOR</strong></span>, <span class="strong"><strong>MINOR</strong></span>, and <span class="strong"><strong>PATCH</strong></span> version. A semantic version number lays out these numbers in the form <code class="literal">MAJOR.MINOR.PATCH</code>. When a <span>number</span><a id="id325751166" class="indexterm"></a> is incremented, the less significant numbers to the right are reset to <code class="literal">0</code>.</p><p>These version numbers give downstream <span>users</span><a id="id325751179" class="indexterm"></a> useful information about how a new version might affect compatibility:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">The <code class="literal">PATCH</code> version is incremented whenever a bug or security fix is implemented that maintains backwards compatibility</li><li style="list-style-type: disc">The <code class="literal">MINOR</code> version is incremented whenever a new feature is added that maintains backwards compatibility</li><li style="list-style-type: disc">Any changes that break backwards compatibility should increment the <code class="literal">MAJOR</code> version number</li></ul></div><p>This is useful because users of your images know that <code class="literal">MINOR</code> or <code class="literal">PATCH</code> level changes are unlikely to break anything, so only basic testing should be required when upgrading to a new version. But if upgrading to a new <code class="literal">MAJOR</code> version, they ought to check and test the impact on the changes, which might require changes to configuration or integration code.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note75"></a>Note</h3><p>You can read more about SemVer at <a class="ulink" href="https://semver.org/" target="_blank"><span>https://semver.org/</span></a><span>.</span></p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl2sec97"></a>Upstream version numbers</h3></div></div></div><p>Often, when we when build container <span>images</span><a id="id325753285" class="indexterm"></a> that repackage existing software, it is desirable to use the original version number of the packaged software itself. Sometimes, it can help to add a suffix to version the configuration that you're using to package that software with.</p><p>In larger organisations, it can be common to package software tools with configuration files with organisation-specific default settings. You might find it useful to version the configuration files as well as the software tool.</p><p>If I were packaging the MySQL database for use in my organisation, an image tag might look like <code class="literal">8.0.12-c15</code>, where <code class="literal">8.0.12</code> refers to the upstream MySQL version and <code class="literal">c15</code> is a version number I have created for the MySQL configuration files included in my container image.</p></div></div>