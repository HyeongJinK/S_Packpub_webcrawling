<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch10lvl1sec67"></a>Labelling images</h2></div></div><hr /></div><p>If you have an even moderately complex workflow for developing and releasing your software, you might quickly find yourself wanting to add even more semantic information about your <span>images</span><a id="id325162570" class="indexterm"></a> into its tag than just a simple version number. This can quickly become unwieldy, as you will need to modify your build and deployment tooling whenever you want to add some extra information.</p><p>Thankfully, Docker images carry around labels that can be used to store whatever metadata is relevant to your image.</p><p>Adding a label to your image is done at build time, using the <code class="literal">LABEL</code> instruction in your Dockerfile. The <code class="literal">LABEL</code> instruction accepts multiple key value pairs in this format:</p><pre class="programlisting">LABEL &lt;key&gt;=&lt;value&gt; &lt;key&gt;=&lt;value&gt; ... </pre><p>Using this instruction, we can store any arbitrary metadata that we find useful on our images. And because the metadata is stored inside the image, unlike tags, it can't be changed. By using appropriate image labels, we can discover the exact revision from our VCS, even if an image has been given an opaque tag, such as <code class="literal">latest</code> or <code class="literal">stable</code>.</p><p>If you want to set these labels dynamically at build time, you can also make use of the <code class="literal">ARG</code> instruction in your Dockerfile.</p><p>Let's look at an example of using build arg's to set labels. Here is an example Dockerfile:</p><pre class="programlisting">FROM scratch 
ARG SHA  
ARG BEAR=Paddington 
LABEL git-commit=$GIT_COMMIT \ 
      favorite-bear=$BEAR \ 
      marmalade="5 jars" </pre><p>When we build the container, we can pass values for our labels using the <code class="literal">--build-arg</code> flag. This is useful when we want to pass dynamic values such as a Git commit reference:</p><pre class="programlisting"><span class="strong"><strong>docker build --build-arg SHA=`git rev-parse --short HEAD` -t bear .</strong></span></pre><p>As with the labels that Kubernetes allows you to attach to the objects in your cluster, you are free to label your images with whatever scheme you choose, and save whatever metadata makes sense for your organisation.</p><p>The <span class="strong"><strong>Open Container Initiative</strong></span> (<span class="strong"><strong>OCI</strong></span>), an organization that promotes standards for container runtimes and their image formats, has proposed a standard set of labels that can be <span>used</span><a id="id325753369" class="indexterm"></a> to provide useful metadata that can then be used by other tools that understand them. If you decide to add labels to your container images, choosing to use part or all of this set of labels might be a good place to start.</p><p>These labels are all prefixed with <code class="literal">org.opencontainers.image</code> so that they don't collide with any ad hoc labels that you may already be using:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><code class="literal">* org.opencontainers.image.title</code>: This should be a human-readable title for the image. For example, <code class="literal">Redis</code>.</li><li style="list-style-type: disc"><code class="literal">org.opencontainers.image.description</code>: This should be a human -readable description of the image. For example, <code class="literal">Redis is an open source key-value store</code>.</li><li style="list-style-type: disc"><code class="literal">org.opencontainers.image.created</code>: This should contain the date and time that the image was created. It should be formatted as per RFC 3339. For example, <code class="literal">2018-11-25T22:14:00Z</code>.</li><li style="list-style-type: disc"><code class="literal">org.opencontainers.image.authors</code>: This should contain contact information about the people or organisations responsible for this image. Typically, this might be an email address, or other relevant contact information. For example, <code class="literal">Edward Robinson &lt;ed@errm.co.uk&gt;</code>.</li><li style="list-style-type: disc"><code class="literal">org.opencontainers.image.url</code>: This should be a URL where more information about the image can be found. For example, <a class="ulink" href="https://github.com/errm/kubegratulations" target="_blank">https://github.com/errm/kubegratulations</a>.</li><li style="list-style-type: disc"><code class="literal">org.opencontainers.image.documentation</code>: This should be a URL where documentation about the image can be found. For example, <a class="ulink" href="https://github.com/errm/kubegratulations/wiki" target="_blank">https://github.com/errm/kubegratulations/wiki</a>.</li><li style="list-style-type: disc"><code class="literal">org.opencontainers.image.source</code>: This should be a URL where the source code used to build an image can be found. You might use it to link to a project page on a version control repository, such as GitHub, GitLab, or Bitbucket. For example, <a class="ulink" href="https://github.com/errm/kubegratulations" target="_blank">https://github.com/errm/kubegratulations</a>.</li><li style="list-style-type: disc"><code class="literal">org.opencontainers.image.version</code>: This could be a semantic version for the software packaged in this image, or it could be a label or tag used in your VCS. For example, <code class="literal">1.4.7</code>.</li><li style="list-style-type: disc"><code class="literal">org.opencontainers.image.revision</code>: This should be a reference to a revision in your VCS, such as a Git commit SHA. For example, <code class="literal">e2f3bbdf80acd3c96a68ace41a4ac699c203a6a4</code>.</li><li style="list-style-type: disc"><code class="literal">org.opencontainers.image.vendor</code>: This should be the name of an organisation or individual distributing the image. For example, <span class="strong"><strong>Apache Software Foundation</strong></span> (<span class="strong"><strong>ASF</strong></span>).</li><li style="list-style-type: disc"><code class="literal">org.opencontainers.image.licenses</code>: If your image contains software covered by a <span>specific</span><a id="id325759568" class="indexterm"></a> licence, you can list them here. You should use SPDX identifiers to refer to the licences. You can find the full list at <a class="ulink" href="https://spdx.org/licenses/" target="_blank">https://spdx.org/licenses/</a>. For example, <code class="literal">Apache-2.0</code>.</li></ul></div></div>