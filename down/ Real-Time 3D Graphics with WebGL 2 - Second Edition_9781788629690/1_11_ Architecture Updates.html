<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch01lvl1sec22"></a>Architecture Updates</h2></div></div><hr /></div><p>As we progress through chapters, we will encounter common functionality (for example, design patterns, utility functions, helpers, and data structures) that we can build upon. Not only this will serve us in writing <span class="strong"><strong>DRY</strong></span> code, but it will also provide a useful <span>architecture</span><a id="id325614926" class="indexterm"></a> to support <span>an</span><a id="id325617255" class="indexterm"></a> advanced 3D WebGL application by the end of this book.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note7"></a>Note</h3><p><strong class="userinput"><code>DRY</code></strong><span class="strong"><strong></strong></span><span class="strong"><strong>Don't Repeat Yourself</strong></span> (<span class="strong"><strong>DRY</strong></span>) is a software development principle, the main aim of which is to reduce repetition of code. <span class="strong"><strong>Write Everything Twice</strong></span> (<span class="strong"><strong>WET</strong></span>) is a cheeky abbreviation to mean the opposite— code that doesn't adhere to the DRY principle.<span class="strong"><strong></strong></span></p></div><p>Let's cover some changes that we will use in future chapters:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Open <code class="literal">common/js/utils.js</code> in your editor to see the following code.</li><li>We will use <code class="literal">utils</code> to include many of the utility functions to serve us in building our 3D application. The two methods, <code class="literal">getCanvas</code> and <code class="literal">getGLContent</code>, inside of <code class="literal">utils</code> are similar to the code we've implemented earlier in this chapter:</li></ol></div><pre class="programlisting">'use strict';

// A set of utility functions for /common operations across our 
// application
const utils = {

// Find and return a DOM element given an ID
getCanvas(id) {
const canvas = document.getElementById(id);

if (!canvas) {
      console.error(`There is no canvas with id ${id} on this 
       page.`);
return null;
}

return canvas;
},

// Given a canvas element, return the WebGL2 context
getGLContext(canvas) {
return canvas.getContext('webgl2') || console.error('WebGL2 is 
     not available in your browser.');
}

};</pre><div class="orderedlist"><ol class="orderedlist arabic" start="3" type="1"><li><code class="literal">getCanvas</code> returns the <code class="literal">canvas</code> element with the provided <code class="literal">id</code> as the argument.</li><li><code class="literal">getGLContext</code> returns a WebGL 2 context for a given <code class="literal">canvas</code> element.</li><li>Open up <code class="literal">ch01_05_attributes-final.html</code> in your editor to see the following changes.</li><li>We've included <code class="literal">&lt;link rel="stylesheet" href="/common/lib/normalize.css"&gt;</code> in the <code class="literal">&lt;head&gt;</code> of our document that resets many of the inconsistencies across browsers. This is an external library to help us normalize CSS styling across browsers.</li><li>We've included <code class="literal">&lt;script type="text/javascript" src="/common/js/utils.js"&gt;&lt;/script&gt;</code>.</li></ol></div><div class="orderedlist"><ol class="orderedlist arabic" start="8" type="1"><li>Scroll to the <code class="literal">init</code> function where the necessary changes were made to use the <code class="literal">utils.getCanvas</code> and <code class="literal">utils.getGLContext</code> functions:</li></ol></div><pre class="programlisting">function init() {
const canvas = utils.getCanvas('webgl-canvas');
gl = utils.getGLContext(canvas);
window.onkeydown = checkKey;
}</pre><div class="orderedlist"><ol class="orderedlist arabic" start="9" type="1"><li>Open up <code class="literal">ch01_05_attributes-final.html</code> in a browser to see these changes in action.</li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip8"></a>Note</h3><p><span class="strong"><strong><strong class="userinput"><code>Example Code Structure</code></strong></strong></span>All example code has been structured so that common functionality is at the root of the directory ( <code class="literal">common/</code>), while examples for each chapter are categorized under chapter directories (for example, <code class="literal">ch01/</code>, <code class="literal">ch02/</code>, and <code class="literal">ch03/</code>). That being said, to view these examples in your browser, you will need to start a server at the root of the directory to load all required assets for each example. Please refer to the <a class="link" href="#" linkend="pref07">Preface</a> of this book for more details.</p></div></div>