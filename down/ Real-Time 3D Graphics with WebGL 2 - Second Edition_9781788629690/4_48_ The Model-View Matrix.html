<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec56"></a>The Model-View Matrix</h2></div></div><hr /></div><p>The <span class="strong"><strong>Model-View matrix</strong></span> allows <span>us</span><a id="id325358912" class="indexterm"></a> to perform <span class="emphasis"><em>affine transformations</em></span> in <span>our</span><a id="id325358934" class="indexterm"></a> scene. <span class="strong"><strong>Affine</strong></span> is a mathematical name that describes transformations that do <span class="emphasis"><em>not</em></span> change the structure of the object undergoing such transformations. In our 3D world scene, such transformations are rotation, scaling, reflection shearing, and translation. Fortunately, we do not need to understand how to represent such transformations with matrices. We just need to use one of the many JavaScript matrix libraries that are available online (such as <span class="strong"><strong>glMatrix</strong></span>).</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note53"></a>Note</h3><p><strong class="userinput"><code>Affine Transformations</code></strong>
You can find more information on how transformation matrices work at <a class="ulink" href="https://en.wikipedia.org/wiki/Affine_transformation" target="_blank">https://en.wikipedia.org/wiki/Affine_transformation</a>.</p></div><p>Understanding the structure of the Model-View matrix will not help you if you just want to apply transformations to the scene or to objects in the scene. For that effect, simply use a library, such as <span class="strong"><strong>glMatrix</strong></span>, to do <span>the</span><a id="id325401400" class="indexterm"></a> transformations on your behalf. However, the structure of this matrix could be invaluable information when you are trying to troubleshoot your 3D application. Let's take a look at how the Model-View matrix is constructed.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec71"></a>Spatial Encoding of the World</h3></div></div></div><p>By default, when you render a scene, you are looking at it from <span>the</span><a id="id325401415" class="indexterm"></a> origin of <span>the</span><a id="id325401424" class="indexterm"></a> world in the negative direction of the z-axis. As shown in the following diagram, the z-axis is coming out of the screen (which means that you're looking at the negative z-axis):</p><div class="mediaobject"><img src="/graphics/9781788629690/graphics/83acb62d-0005-4978-8718-9cc285dfb68b.png" /></div><p>From the center of the screen to the right, you will have the positive x-axis, and from the center of the screen up, you will have the positive y-axis. This is the initial configuration and it is the reference for affine transformations.</p><p>In this configuration, the Model-View matrix is the <span class="strong"><strong>Identity matrix</strong></span> of rank four.</p><p>The first three rows of the Model-View matrix contain information about rotations and translations that are affecting the world.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl3sec18"></a>Rotation Matrix</h4></div></div></div><p>The intersection of the <span>first</span><a id="id325401456" class="indexterm"></a> three rows with the <span>first</span><a id="id325614925" class="indexterm"></a> three columns defines the 3x3 Rotation matrix. This matrix contains information about rotations around the standard axis. In the initial configuration, this corresponds to the following:</p><p><code class="literal">[m1, m2, m3]</code> = <code class="literal">[1, 0, 0]</code> = x-axis<code class="literal">[m5, m6, m7]</code> = <code class="literal">[0, 1, 0]</code> = y-axis<code class="literal">[m9, m10, m11]</code> = <code class="literal">[0, 0, 1]</code> = z-axis</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl3sec19"></a>Translation Vector</h4></div></div></div><p>The intersection of the <span>first</span><a id="id325617282" class="indexterm"></a> three rows <span>with</span><a id="id325617290" class="indexterm"></a> the last column defines a three-component Translation vector. This vector indicates how much the origin, and the world, have been translated. In the initial configuration, this corresponds to the following:</p><p><code class="literal">[m13, m14, m15]</code> = <code class="literal">[0, 0, 0]</code> = origin (no translation)</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl3sec20"></a>The Mysterious Fourth Row</h4></div></div></div><p>The <span>fourth</span><a id="id325617353" class="indexterm"></a> row does not <span>have</span><a id="id325617362" class="indexterm"></a> any special meaning.</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">The <code class="literal">m4</code>, <code class="literal">m8</code>, and <code class="literal">m12</code><span class="emphasis"><em> </em></span>elements<span class="emphasis"><em> </em></span>are always <code class="literal">0</code>.</li><li style="list-style-type: disc">The <code class="literal">m16</code><span class="emphasis"><em> </em></span>element<span class="emphasis"><em> </em></span>(the Homogeneous coordinate) will always be <code class="literal">1</code>.</li></ul></div><p>As we described at the beginning of this chapter, there are no cameras in WebGL. However, all the information that we need to operate a camera (mainly rotations and translations) can be extracted from the Model-View matrix itself.</p></div></div></div>