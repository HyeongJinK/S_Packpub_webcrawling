<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch05lvl1sec67"></a>Matrix Stacks</h2></div></div><hr /></div><p>A <span class="strong"><strong>matrix stack</strong></span> provides a way to apply local <span>transforms</span><a id="id325358924" class="indexterm"></a> to individual objects in our scene while preserving global transforms.</p><p>The matrix stack works as each rendering cycle (each call to our <code class="literal">render</code> function) requires calculating the scene matrices to react to camera movements. We first update the Model-View matrix for each object in our scene before passing the matrices to the shading program (as <code class="literal">attributes</code>). We do this in three steps:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Once the global Model-View matrix (such as camera transform) has been calculated, we save (push) it onto a stack. This allows us to recover the original matrix once weâ€™ve applied local transforms.</li><li>Calculate an updated Model-View matrix for each object in the scene. This update consists of multiplying the original Model-View matrix by a matrix that represents the rotation, translation, and/or scaling of each object in the scene. The updated Model-View matrix is passed to the program and the respective object then appears in the location indicated by its local transform.</li><li>Recover the original matrix from the stack, and then repeat steps one to three for the next object that needs to be rendered.</li></ol></div><p>The following diagram shows this three-step procedure for one object:</p><div class="mediaobject"><img src="/graphics/9781788629690/graphics/36623c15-0097-4786-9e2e-aa1ff250a0ef.png" /></div></div>