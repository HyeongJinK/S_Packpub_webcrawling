<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec62"></a>The Projection matrix</h2></div></div><hr /></div><p>At the beginning of this chapter, we learned that the <span class="strong"><strong>Projection matrix</strong></span> combines the projection transformation and the perspective division. These two steps take a 3D scene <span>and</span><a id="id325358912" class="indexterm"></a> convert it into a cube, which is then mapped to the 2D <code class="literal">canvas</code> by the viewport transformation.</p><p>In practice, the Projection matrix determines the geometry of the image that is captured by the camera. In a real-world camera, the lens of the camera would determine how distorted the final images are. In a WebGL world, we use the Projection matrix to simulate that effect. Also, unlike in the real world where our images are always affected by perspective, in WebGL, we can pick a different representation (such as the orthographic projection).</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec80"></a>Field of View</h3></div></div></div><p>The Projection matrix <span>determines</span><a id="id325358942" class="indexterm"></a> the <span class="strong"><strong>field of view</strong></span> (<span class="strong"><strong>FOV</strong></span>) of the camera, that is, how much of the 3D space will be captured <span>by</span><a id="id325358957" class="indexterm"></a> the camera. The field of <span>view</span><a id="id325358964" class="indexterm"></a> is a measure given in degrees, and the term is used interchangeably with the term <span class="strong"><strong>angle of view</strong></span>:</p><div class="mediaobject"><img src="/graphics/9781788629690/graphics/3984dd67-2741-422e-941f-1977f0c8794b.png" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec81"></a>Perspective or Orthogonal Projection</h3></div></div></div><p>A perspective projection assigns more space to details <span>that</span><a id="id325401510" class="indexterm"></a> are closer to the camera than details that are farther away. In other words, the geometry <span>that</span><a id="id325401518" class="indexterm"></a> is close to the camera <span>will</span><a id="id325401527" class="indexterm"></a> appear larger than the geometry that is farther from it. This is the way our eyes see the real world. Perspective projection allows us to assess the distance because it gives our brain a <span class="emphasis"><em>depth cue</em></span>.</p><p>In contrast, an orthogonal projection uses parallel lines; this means that lines will appear to be the same size, regardless of their distance to the camera. Therefore, the depth cue is lost when using orthogonal projection.</p><p>While perspective projection offers a more realistic view of the scene, orthographic is commonly used in engineering as a means to produce object specifications that communicate dimensions unambiguously. Each line of one unit length (cm, meter) will appear to have the same length everywhere on the drawing. This allows the drafter to dimension only a subset of lines and let the reader know that other lines of that length on the drawing are also that length in reality. Every parallel line in the drawing is also parallel in the object.</p><p>If you are looking at a larger scene with buildings, then orthographic rendering gives an exact measure of the distance between the buildings and their relative sizes.</p><p>With perspective mode, lines of identical real-world lengths will appear different due to foreshortening. It becomes difficult to judge relative dimensions and object size in the distance.</p><p>Using <span class="strong"><strong>glMatrix</strong></span>, we can set up the perspective or the orthogonal projection by calling <code class="literal">mat4.perspective</code> or <code class="literal">mat4.ortho</code>, respectively. The signatures for these methods are as follows:</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; "><colgroup><col /><col /></colgroup><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><span class="strong"><strong>Function</strong></span></p></td><td style="border-bottom: 0.5pt solid ; "><p><span class="strong"><strong>Description</strong></span></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><pre class="programlisting">mat4.perspective(
  dest,
fovy,
aspect,
near,
far
);</pre></td><td style="border-bottom: 0.5pt solid ; "><p>Generates a perspective projection matrix with the given bounds.</p><p><span class="strong"><strong>Parameters:</strong></span></p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><code class="literal">dest</code>: <code class="literal">mat4</code> frustum the matrix will be written into</li><li style="list-style-type: disc"><code class="literal">fovy</code>: Vertical field of view</li><li style="list-style-type: disc"><code class="literal">aspect</code>: Aspect ratio, typically the <code class="literal">width / height</code> viewport</li><li style="list-style-type: disc"><code class="literal">near</code>, <code class="literal">far</code>: Near and far bounds of the frustum</li></ul></div></td></tr><tr><td style="border-right: 0.5pt solid ; "><pre class="programlisting">mat4.ortho(
  dest,
left,
right,
bottom,
top,
near,
far
);</pre></td><td style=""><p>Generates an orthogonal projection matrix with the given bounds:</p><p><span class="strong"><strong>Parameters:</strong></span></p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><code class="literal">dest</code>: <code class="literal">mat4</code> frustum the matrix will be written into</li><li style="list-style-type: disc"><code class="literal">left</code>, <code class="literal">right</code>: Left and right bounds of the frustum</li><li style="list-style-type: disc"><code class="literal">bottom</code>, <code class="literal">top</code>: Bottom and top bounds of the frustum</li><li style="list-style-type: disc"><code class="literal">near</code>, <code class="literal">far</code>: Near and far bounds of the frustum</li></ul></div></td></tr></tbody></table></div><p> </p><p>In the <span class="emphasis"><em>Time for Action: Orthographic and Perspective Projections</em></span> section, we will test how the field of view and the perspective projection affect the image that our camera captures. We will experiment with perspective and orthographic projections for both orbiting and tracking cameras.</p></div></div>