<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch12lvl1sec142"></a>WebGL Libraries</h2></div></div><hr /></div><p>Before we dive <span>into</span><a id="id325357459" class="indexterm"></a> various WebGL libraries, we should first define what a software library is. Although <span class="strong"><strong>library</strong></span> and <span class="strong"><strong>framework</strong></span> are <span>often</span><a id="id325659802" class="indexterm"></a> used interchangeably, they refer to <span class="emphasis"><em>different</em></span> concepts in computer science. A software library comprises defined code, configuration, documentation, classes, scripts, and more, so that developers may include them in their programs to enhance their products. For example, in developing a program requiring extensive mathematical operations, a developer may include a suitable software library (for example, <code class="literal">glMatrix</code>) to reduce the need for writing those operations themselves.</p><p>That being said, as you may have noticed, we've built our 3D application in such a way that the classes, utilities, and overall architecture could, eventually, be turned into a library. This process was done intentionally so that we could learn concepts in isolation and also write code that could eventually comprise a feature-rich WebGL library that can be used by other applications.</p><p>That being said, it's important to know when and where to use libraries, so let's cover a few WebGL libraries of various sizes.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch12lvl2sec199"></a>Small Libraries</h3></div></div></div><p>Here are a few examples of small, non-prescriptive WebGL libraries <span>that</span><a id="id325659829" class="indexterm"></a> provide many helpers, utilities, and abstraction layers over WebGL's low-level API.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch12lvl3sec52"></a>TWGL</h4></div></div></div><p><span class="strong"><strong>TWGL</strong></span> (<a class="ulink" href="https://github.com/greggman/twgl.js" target="_blank">https://github.com/greggman/twgl.js</a>) is an open-source WebGL <span>library</span><a id="id325659880" class="indexterm"></a> that serves to "<span class="emphasis"><em>make using the WebGL API less verbose</em></span>". For example, here's a simple TWGL demo <span>that</span><a id="id325659892" class="indexterm"></a> shows its intelligible, yet low-level, API on top of WebGL:</p><pre class="programlisting">const
canvas = document.getElementById('webgl-canvas'),
gl = canvas.getContext('webgl'),
program = twgl.createProgramInfo(gl, ['vertex-shader', 'fragment-shader']),
arrays = {
position: [
      -1, -1, 0,
1, -1, 0,
-1, 1, 0,
-1, 1, 0,
1, -1, 0,
1, 1, 0
],
},
bufferInfo = twgl.createBufferInfoFromArrays(gl, arrays);

function draw(time) {
const { width, height } = gl.canvas;

twgl.resizeCanvasToDisplaySize(gl.canvas);
gl.viewport(0, 0, width, height);

const uniforms = {
time: time * 0.001,
resolution: [width, height],
};

gl.useProgram(program.program);

twgl.setBuffersAndAttributes(gl, program, bufferInfo);
twgl.setUniforms(program, uniforms);
twgl.drawBufferInfo(gl, bufferInfo);

requestAnimationFrame(draw);
}

requestAnimationFrame(draw);</pre><p>You can see the live demo on their GitHub page, which resembles the following:</p><div class="mediaobject"><img src="/graphics/9781788629690/graphics/24a84847-9261-4de2-806f-fe6d0d8fb47e.png" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch12lvl3sec53"></a>Regl</h4></div></div></div><p><span class="strong"><strong>Regl</strong></span> (<a class="ulink" href="https://github.com/regl-project/regl" target="_blank">https://github.com/regl-project/regl</a>) is an open-source WebGL library with a <span>functional</span><a id="id325662120" class="indexterm"></a> flavor. As its documentation explains, Regl "<span class="emphasis"><em>simplifies WebGL programming by removing as much shared state as it can get away with. To do this, it replaces the WebGL API with two fundamental abstractions, <span class="strong"><strong>resources</strong></span> and <span class="strong"><strong>commands</strong></span></em></span>". Here's the snippet of code that <span>illustrates</span><a id="id325662139" class="indexterm"></a> the <span>functional</span><a id="id325662148" class="indexterm"></a> Regl API:</p><pre class="programlisting">const regl = require('regl')();

const vertexShader = `
  precision mediump float;

  attribute vec2 position;

  void main(void) {
    gl_Position = vec4(position, 0, 1);
  }
`;

const fragmentShader = `
  precision mediump float;

  uniform vec4 color;

  void main(void) {
    gl_FragColor = color;
  }
`;

const drawTriangle = regl({
vert: vertexShader,
frag: fragmentShader,
attributes: {
position: regl.buffer([
      [-2, -2],
[4, -2],
[4, 4]
    ])
  },
uniforms: {
color: regl.prop('color')
  },
count: 3
});

regl.frame(({ time }) =&gt; {

  regl.clear({
color: [1, 1, 1, 1],
depth: 1
});

drawTriangle({
color: [
      Math.cos(time * 0.001),
Math.sin(time * 0.0008),
Math.cos(time * 0.003),
1
]
  });

});</pre><p>You can see the live demo on their GitHub page, which resembles the following:</p><div class="mediaobject"><img src="/graphics/9781788629690/graphics/08921e76-1b6a-4743-ac99-d5f6802e7d1e.png" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch12lvl3sec54"></a>StackGL</h4></div></div></div><p><span class="strong"><strong>StackGL</strong></span> (<a class="ulink" href="http://stack.gl/" target="_blank">http://stack.gl</a>) is an open source WebGL project with an interesting approach to building WebGL applications. Instead of being bundled as a single library, it's an ecosystem, comprised of many small, lean modules, inspired by the Unix philosophy.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note99"></a>Note</h3><p><strong class="userinput"><code>Unix philosophy</code></strong><span class="strong"><strong></strong></span> The Unix mindset is a philosophical approach to writing minimalist, modular software, often expressed with the mantra "do one thing, and do it well!". For more information, please visit the following URL: <a class="ulink" href="https://en.wikipedia.org/wiki/Unix_philosophy" target="_blank">https://en.wikipedia.org/wiki/Unix_philosophy</a>.<span class="strong"><strong></strong></span></p></div><p>Unlike many 3D engines, StackGL emphasizes lean, modular code that is focused on writing shader code. That being said, be sure to visit their website, as it includes extensive documentation and demos that will help you master this approach.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch12lvl2sec200"></a>Feature-Rich Libraries</h3></div></div></div><p>While small, lean, and modular WebGL libraries are useful, they may not be enough for complex applications. Here are several feature-rich WebGL libraries <span>that</span><a id="id325662210" class="indexterm"></a> offer an extensive list of features and capabilities.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch12lvl3sec55"></a>Three.js</h4></div></div></div><p><span class="strong"><strong>Three.js</strong></span> (<a class="ulink" href="https://github.com/mrdoob/three.js" target="_blank">https://github.com/mrdoob/three.js</a>) is an open source library <span>that</span><a id="id325662232" class="indexterm"></a> powers many of the WebGL applications on the web. It aims to <span>create</span><a id="id325662241" class="indexterm"></a> an easy to use, lightweight, 3D library, with multiple renderers that target 2D <code class="literal">canvas</code>, WebGL, SVG, and CSS3D. Here's a <span>neat</span><a id="id325662253" class="indexterm"></a> demo of a rotating cube, showcasing the simplicity of the Three.js API:</p><pre class="programlisting">let
renderer,
scene,
camera,
mesh,
width = window.innerWidth,
height = window.innerHeight;

function init() {
  camera = new THREE.PerspectiveCamera(70, width / height, 0.01, 10);
camera.position.z = 1;

scene = new THREE.Scene();

const mesh = new THREE.Mesh(
// geometry
new THREE.BoxGeometry(0.2, 0.2, 0.2),
// material
new THREE.MeshNormalMaterial()
  );
scene.add(mesh);

renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setSize(width, height);
document.body.appendChild(renderer.domElement);
}

function render() {
requestAnimationFrame(render);
mesh.rotation.x += 0.01;
mesh.rotation.y += 0.02;
renderer.render(scene, camera);
}

init();
render();</pre><p>You can see the live demo on their GitHub page, which resembles the following:</p><div class="mediaobject"><img src="/graphics/9781788629690/graphics/88c78b91-e505-46b2-950e-0ecffc95e8be.png" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch12lvl3sec56"></a>Babylon.js</h4></div></div></div><p><span class="strong"><strong>Babylon.js</strong></span> (<a class="ulink" href="https://github.com/mrdoob/three.js" target="_blank">https://github.com/mrdoob/three.js</a>) is an <span>open</span><a id="id325662293" class="indexterm"></a> source WebGL library that came to fruition inside of Microsoft. It is a <span>powerful</span><a id="id325662301" class="indexterm"></a> library that was <span>recently</span><a id="id325401157" class="indexterm"></a> rewritten entirely in TypeScript.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note100"></a>Note</h3><p><strong class="userinput"><code>TypeScript</code></strong><span class="strong"><strong></strong></span>TypeScript is an open source language developed by Microsoft. It is a powerful language that is a strict syntactical superset of JavaScript and adds optional static typing to JavaScript. For more information, visit <a class="ulink" href="https://github.com/Microsoft/TypeScript" target="_blank">https://github.com/Microsoft/TypeScript</a>.<span class="strong"><strong></strong></span></p></div><p>Although choosing Babylon.js doesn't require using TypeScript, it can be a major advantage over other libraries if you or your team prefer the features that TypeScript provides. Here's an interesting JavaScript demo, showcasing the simple Babylon.js API:</p><pre class="programlisting">const canvas = document.getElementById('webgl-canvas');

const engine = new BABYLON.Engine(
  canvas,
true,
{
preserveDrawingBuffer: true,
stencil: true
}
);

function initScene() {
const scene = new BABYLON.Scene(engine);

const camera = new BABYLON.FreeCamera('camera', new BABYLON.Vector3(0, 5, 
   -10), scene);
camera.setTarget(BABYLON.Vector3.Zero());
camera.attachControl(canvas, false);

const ground = BABYLON.Mesh.CreateGround('ground', 6, 6, 2, scene, 
   false);

const sphere = BABYLON.Mesh.CreateSphere('sphere', 16, 2, scene, false, 
   BABYLON.Mesh.FRONTSIDE);
sphere.position.y = 1;

const light = new BABYLON.HemisphericLight('light', new 
   BABYLON.Vector3(0, 1, 0), scene);

return scene;
}

const scene = initScene();
engine.runRenderLoop(() =&gt; scene.render());</pre><p>You can see the live demo on their GitHub page, which resembles the following:</p><div class="mediaobject"><img src="/graphics/9781788629690/graphics/22e94968-2703-433f-a62d-650d7b5d64e1.png" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch12lvl3sec57"></a>A-Frame</h4></div></div></div><p><span class="strong"><strong>A-Frame</strong></span> (<a class="ulink" href="https://github.com/aframevr/aframe" target="_blank">https://github.com/aframevr/aframe</a>) is an open-source <span>web</span><a id="id325401214" class="indexterm"></a> framework for building virtual reality (VR) experiences. It is <span>primarily</span><a id="id325401223" class="indexterm"></a> maintained by Mozilla and the WebVR community. Although other WebGL libraries, such as Three.js and Babylon.js, offer VR support, A-Frame was designed entirely for building VR applications for the web.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note101"></a>Note</h3><p><span class="strong"><strong><strong class="userinput"><code>A-Frame Core</code></strong></strong></span> Although A-Frame is an entirely new project, it is built on top of the Three.js game engine.</p></div><p>Here's a demo showcasing the A-Frame's declarative API:</p><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;Hello, WebVR! - A-Frame&lt;/title&gt;
  &lt;meta name="description" content="Hello, WebVR! - A-Frame"&gt;
  &lt;script src="https://aframe.io/releases/0.8.2/aframe.min.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;a-scene&gt;
  &lt;a-box position="-1 0.5 -3" rotation="0 45 0" color="#4CC3D9" shadow&gt;
  &lt;/a-box&gt;
  &lt;a-sphere position="0 1.25 -5" radius="1.25" color="#EF2D5E" shadow&gt;
  &lt;/a-sphere&gt;
  &lt;a-cylinder position="1 0.75 -3" radius="0.5" height="1.5" 
   color="#FFC65D" shadow&gt;&lt;/a-cylinder&gt;
  &lt;a-plane position="0 0 -4" rotation="-90 0 0" width="4" height="4" 
   color="#7BC8A4" shadow&gt;&lt;/a-plane&gt;
  &lt;a-sky color="#ECECEC"&gt;&lt;/a-sky&gt;
&lt;/a-scene&gt;
&lt;/body&gt;
&lt;/html&gt;</pre><p>You can see the live demo on their GitHub page, which resembles the following:</p><div class="mediaobject"><img src="/graphics/9781788629690/graphics/b2d30d87-a702-4957-88d2-b784a32d8db7.png" /></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch12lvl2sec201"></a>Game Engines</h3></div></div></div><p>Another approach to building complex 3D applications is to use an established game engine. A game engine is a software development <span>environment</span><a id="id325401268" class="indexterm"></a> designed so that people can build complex 3D applications. Although developers use 3D engines to create games for consoles, mobile devices, and personal computers, they can also be used to build interactive web applications. Two powerful game engines that you can use in building complex WebGL applications are Unity and PlayCanvas.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch12lvl3sec58"></a>Unity</h4></div></div></div><p><span class="strong"><strong>Unity</strong></span> (<a class="ulink" href="https://unity3d.com" target="_blank">https://unity3D.com</a>) is a <span>portable</span><a id="id325401290" class="indexterm"></a> game engine developed by Unity Technologies that offers cross-platform capabilities. It was first <span>announced</span><a id="id325401300" class="indexterm"></a> and released in June 2005 at the Apple Inc. Worldwide Developers Conference as an OS X-exclusive <span>game</span><a id="id325401308" class="indexterm"></a> engine. Over the years, it has become the leading game engine for delivering some of the most well-known games across diverse platforms. Although Unity prioritizes native over web-based outputs, it does offer WebGL support:</p><div class="mediaobject"><img src="/graphics/9781788629690/graphics/994559e4-0a4a-4e8a-90b7-bf900f7bc235.png" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch12lvl3sec59"></a>PlayCanvas</h4></div></div></div><p><span class="strong"><strong>PlayCanvas</strong></span> (<a class="ulink" href="https://playcanvas.com/" target="_blank">https://playcanvas.com</a>) is an <span>open</span><a id="id325401339" class="indexterm"></a> source 3D game <span>engine</span><a id="id325401348" class="indexterm"></a> that also offers a proprietary cloud-hosted creation platform. Although <span>other</span><a id="id325401356" class="indexterm"></a> game engines, such as Unity, offer WebGL support, PlayCanvas was built from the ground-up for the web. Additionally, PlayCanvas offers a wonderful development experience since it has many powerful features, such as a visual workspace, full WebGL 2 support, simultaneous editing from multiple computers, and more:</p><div class="mediaobject"><img src="/graphics/9781788629690/graphics/4079ed17-92e8-431a-b0f2-21809102e6ad.png" /></div></div></div></div>