<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec21"></a>Big data storage and data models</h2></div></div><hr /></div><p>We have now explored what <span>big</span><a id="id325804946" class="indexterm"></a> data is, as well as its importance. A demand for storing and processing massive-scale datasets has encouraged the development of data storage and database systems over the past few years. With this advancement, storage systems and data models for <span>big</span><a id="id325804937" class="indexterm"></a> data have been improved and enhanced over time, from local storage to clustered, distributed to cloud-based storage. In this section, you will learn about some most popular storage models and data models:</p><div class="mediaobject"><img src="/graphics/9781788620901/graphics/686ad13b-7e3e-4091-be61-ddbf9f1edb77.png" /></div><p>Figure 2.1</p><p>The preceding diagram shows the taxonomy of data stores and data platforms, and the corresponding systems that are currently available in the market. Let's dig into each category in the next section. </p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec19"></a>Storage models</h3></div></div></div><p>The core component of <span>big</span><a id="id325804891" class="indexterm"></a> data-related systems is the <span class="strong"><strong>storage model</strong></span>. These models have an impact on the system's scalability, programming, data structures, and computational models. In the <span>following</span><a id="id325792006" class="indexterm"></a> section, we will explore three common types of storage model: blocked-based storage, file-based storage, and object-based storage. </p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl3sec0"></a>Block-based storage</h4></div></div></div><p>In a <span class="strong"><strong>block-based storage</strong></span> model, you <span>encounter</span><a id="id325791950" class="indexterm"></a> a system similar to a <span>traditional</span><a id="id325789383" class="indexterm"></a> storage model, with a fixed-sized raw storage capacity, just like a server's hard drive. Here, the hard drive can be installed on a remote server. That is the main concept of block-based storage systems. Each storage block can be treated as an independent disk drive, and can also be controlled by an external OS. Some <span>common</span><a id="id325789371" class="indexterm"></a> block-based storage systems are as follows:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><span class="strong"><strong>Amazon</strong></span><span class="strong"><strong>Elastic Block</strong></span><span class="strong"><strong>Store</strong></span> (<span class="strong"><strong>Amazon EBS</strong></span>) is a block-level storage service</li><li style="list-style-type: disc"><span class="strong"><strong>OpenStack </strong></span>is provided <span>by</span><a id="id325337694" class="indexterm"></a> the Nova system</li></ul></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl3sec1"></a>File-based storage </h4></div></div></div><p>File-based storage is the <span>most</span><a id="id325337709" class="indexterm"></a> common storage model, and has benefits over other storage models, in terms of ease of use and simplicity. It extends the traditional filesystem architecture, maintaining data in a hierarchical structure as files. Accordingly, this type of storage has hierarchically arranged file paths, which are used as entries for accessing data in the physical storage. Big data commonly uses <span class="strong"><strong>distributed file systems</strong></span> (<span class="strong"><strong>DFS</strong></span>) as the <span>basic</span><a id="id325337726" class="indexterm"></a> storage system. Users require namespaces and path knowledge to access saved files in file-based storage. For cross-system file sharing, there are three main parts to the path or namespace of a file: the protocol, the domain name, and the path of the file. NFS-Family and HDFS are two common file-based storage models, and are defined as follows:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><span class="strong"><strong><span>NFS-Family</span></strong></span>: This is a distributed filesystem protocol, originally <span>produced</span><a id="id325591972" class="indexterm"></a> by Sun Microsystems. In this system, a <span class="strong"><strong>network file system</strong></span> (<span class="strong"><strong>NFS</strong></span>) enables <span>remote</span><a id="id326582246" class="indexterm"></a> hosts to mount filesystems over a network, and interact with those filesystems as though they are mounted locally. NFS has been widely used in Unix and Linux-based operating systems, and also encouraged the development of modern distributed filesystems. 
</li><li style="list-style-type: disc"><span class="strong"><strong>HDFS</strong></span>: <span class="strong"><strong>Hadoop Distributed File System</strong></span> (<span class="strong"><strong>HDFS</strong></span>) is a <span>distributed</span><a id="id326583069" class="indexterm"></a> filesystem that was created and optimized for processing large <span>data</span><a id="id326583076" class="indexterm"></a> volumes, and for higher availability. It spreads across the local storage of a cluster consisting of many server nodes. HDFS [14] is an open source <span>distributed</span><a id="id326583084" class="indexterm"></a> filesystem, written in Java. It is the open-source implementation of <span class="strong"><strong>Google File System</strong></span> (<span class="strong"><strong>GFS</strong></span>), and works as the core storage for Hadoop ecosystems and the majority of the existing big data platforms. HDFS was designed for fault detection and recovery, and has the ability to handle huge datasets. </li></ul></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl3sec2"></a>Object-based storage</h4></div></div></div><p>Object-based storage models <span>manage</span><a id="id326583106" class="indexterm"></a> data as objects. They can be <span>implemented</span><a id="id325887046" class="indexterm"></a> at different levels, including the device, system, and interface levels. The object-based storage system uses a flat namespace, which generally maintains identifiers of data and their locations as <span class="strong"><strong>key-value</strong></span> pairs in the object server. The flat architecture simplifies scaling out object-based storage systems, by providing the option to add extra storage nodes to the system.</p><p>There are a number of object-based storage solutions, as follows:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><span class="strong"><strong>Amazon S3</strong></span> (<span class="strong"><strong>Simple Storage Service</strong></span>) is a cloud-based <span>solution</span><a id="id325887074" class="indexterm"></a> offered by <span class="strong"><strong>Amazon Web Services</strong></span> (<span class="strong"><strong>AWS</strong></span>). </li><li style="list-style-type: disc"><span class="strong"><strong>EMC Atmos</strong></span> is an object-based <span>storage</span><a id="id325887096" class="indexterm"></a> services <span>platform</span><a id="id325887105" class="indexterm"></a> that was <span>developed</span><a id="id325887111" class="indexterm"></a> by the EMC Corporation.</li><li style="list-style-type: disc"><span class="strong"><strong>OpenStack Swift</strong></span> is a scalable, redundant, and <span>distributed</span><a id="id325895452" class="indexterm"></a> object-based <span>storage</span><a id="id325895461" class="indexterm"></a> system that works on the OpenStack cloud platform. </li></ul></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec20"></a>Data models</h3></div></div></div><p>A <span class="strong"><strong>data model</strong></span> determines the <span>manner</span><a id="id325895478" class="indexterm"></a> in which you can <span>organize</span><a id="id325895486" class="indexterm"></a> and structure data elements. Data models form the core of data storage, analytics, and the processing of contemporary big data systems. In general, data models can be categorized into two broad families, which will be described in the following sections.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl3sec3"></a>Relational stores (SQLs)</h4></div></div></div><p>MySQL, Oracle, SQL Server, PostgreSQL, and so on, are <span>some </span><a id="id325895501" class="indexterm"></a><span class="strong"><strong>Relational Database Management Systems</strong></span> (<span class="strong"><strong>RDBMSs</strong></span>) that dominated the database <span>community</span><a id="id325927568" class="indexterm"></a> for decades, until <span>they</span><a id="id325927576" class="indexterm"></a> faced the limitation of scaling to very large-scale datasets. Some important database properties that relational databases follow are <span class="strong"><strong>Atomicity</strong></span>, <span class="strong"><strong>Consistency</strong></span>, <span class="strong"><strong>Isolation</strong></span>, and <span class="strong"><strong>Durability</strong></span> (<span class="strong"><strong>ACID</strong></span>). Relational <span>stores</span><a id="id325927604" class="indexterm"></a> can be classified into two major families:</p><div class="mediaobject"><img src="/graphics/9781788620901/graphics/b7d9b411-bd8a-427d-a355-51283b48e01c.png" /></div><p>Figure 2.2</p><p><span class="emphasis"><em>Figure 2.2</em></span> illustrates how information in a department can be stored and the relationship between them. The diagram clearly illustrates the relationship that is established between each of the tables. For example, the <span class="strong"><strong>employees</strong></span> table stores the employee number as the identifier, the birth date, the first name, the last name, the gender, and the hired date. The salaries of the corresponding employees are stored in the <span class="strong"><strong>salaries</strong></span> table. </p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="ch02lvl4sec0"></a>Scalable relational systems</h5></div></div></div><p>Scalable relational systems have <span>improvements</span><a id="id325927916" class="indexterm"></a> over traditional DBMSs, to cope with performance and scalability. The following are some major scalable relational systems:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><span class="strong"><strong>MySQL Cluster</strong></span>: MySQL Cluster is a part of <span>mainline</span><a id="id325927934" class="indexterm"></a> MySQL releases, and is an extension that supports distributed, multi-master, and ACID-compliant databases.</li><li style="list-style-type: disc"><span class="strong"><strong>VoltDB</strong></span>: VoltDB is an <span>open</span><a id="id325927946" class="indexterm"></a> source, SQL-based, in-memory database <span>that</span><a id="id325927955" class="indexterm"></a> is designed for high performance, as well as scalability. </li><li style="list-style-type: disc"><span class="strong"><strong>Vertica Analytics Platform</strong></span>: Vertica <span>Analytics</span><a id="id325927966" class="indexterm"></a> Platform is a cloud-based, column-oriented, <span>distributed</span><a id="id325953508" class="indexterm"></a> database management system.</li></ul></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="ch02lvl4sec1"></a>Database as a Service (DaaS)</h5></div></div></div><p><span class="strong"><strong>Database as a Service</strong></span> (<span class="strong"><strong>DaaS</strong></span>) is a service <span>model</span><a id="id325953529" class="indexterm"></a> wherein a third-party service provider, which hosts scalable relational databases as services, applies the multitenancy technology in database systems. Some famous examples include the following:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><span class="strong"><strong><span>Amazon RDS</span></strong></span>: Amazon <span class="strong"><strong>RDS</strong></span> (<span class="strong"><strong>Relational Database Service</strong></span>) is a DaaS <span>service</span><a id="id325953558" class="indexterm"></a> provided by AWS. Amazone RDS grants a cost-efficient and <span>resizable</span><a id="id325953566" class="indexterm"></a> capacity, while automating time-consuming administration tasks, such as hardware provisioning, database setup, patching, and backups. It frees users to concentrate on their applications, so that they are given the fast performance, high availability, security, and compatibility that they need. </li><li style="list-style-type: disc"><span class="strong"><strong>Microsoft Azure SQL</strong></span>: Azure [16] is a <span>comprehensive</span><a id="id325953750" class="indexterm"></a> set of cloud <span>services</span><a id="id325953756" class="indexterm"></a> that developers and IT professionals utilize to build, deploy, and manage applications through the global network of data centers. The system has integrated tools, DevOps, and marketplace support that help to efficiently build anything from simple mobile apps to internet-scale solutions.</li><li style="list-style-type: disc"><span class="strong"><strong><span>Google Cloud SQL</span></strong></span>: Cloud SQL is a fully-managed <span>database</span><a id="id325953773" class="indexterm"></a> service. It is <span>easy</span><a id="id325953782" class="indexterm"></a> to set up, maintain, manage, and administer relational databases in the cloud. Users can use Cloud SQL with either MySQL or PostgreSQL. In addition to that, Cloud SQL offers high scalability, high performance, security, and convenience. 
</li><li style="list-style-type: disc"><span class="strong"><strong>StormDB</strong></span>: StormDB <span>provides</span><a id="id325953794" class="indexterm"></a> a database as a <span>service</span><a id="id325953800" class="indexterm"></a> cloud platform that can uniquely handle intensive transactional workloads in real-time.</li><li style="list-style-type: disc">Others (EnterpriseDB, Xeround).</li></ul></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl3sec4"></a>NoSQL stores</h4></div></div></div><p>Most <span>NoSQL</span><a id="id325966516" class="indexterm"></a> systems have the <span>following</span><a id="id325966524" class="indexterm"></a> features:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">High scalability</li><li style="list-style-type: disc">High availability</li><li style="list-style-type: disc">High fault tolerance</li><li style="list-style-type: disc">Flexibility in data models</li><li style="list-style-type: disc">Weaker consistency models that have abandoned ACID transactions</li><li style="list-style-type: disc">Simple interfaces</li></ul></div><p>Let's explore some NoSQL systems in the following sections.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="ch02lvl4sec2"></a>Document stores</h5></div></div></div><p>In <span class="strong"><strong>document stores</strong></span>, data is saved in documents. Similar to key-value stores, the documents (values) are referenced by unique names (<span class="strong"><strong>keys</strong></span>). Every document is <span>completely</span><a id="id325966567" class="indexterm"></a> free with <span>regard</span><a id="id325978318" class="indexterm"></a> to its schema; in other words, you can utilize the schema that is required by the application. If demand shifts, adaptations are rather simple. New fields can be attached, and used fields can be eliminated.</p><p><span class="strong"><strong>MongoDB</strong></span>: As <span>claimed</span><a id="id325978330" class="indexterm"></a> by the community, MangoDB is a strong, flexible,and scalable general-purpose database. It blends the ability to scale out with features such as secondary indexes, range queries, sorting, aggregations, and geospatial indexes. MongoDB is a document-oriented database, not a relational one, and has easy-to-use benefits. </p><p>MongoDB was designed with scalability in mind. It guarantees high performance, high availability, and automatic scaling. Since it is a document-oriented data model, it is easier to split data across multiple servers that are geographically located at distinct locations. The load balancer component of MongoDB automatically balances the data and load across the clusters and redistributes the corresponding documents automatically, routing reads and writes to the correct machines. </p><p>A record in <span>MongoDB</span><a id="id325978343" class="indexterm"></a> is called a <span class="strong"><strong>document</strong></span>, which is a data structure composed of <span class="strong"><strong>field and value pairs</strong></span>. MongoDB documents are very similar to JSON objects. The values of fields may include other documents, arrays, and arrays of documents. An example of a MongoDB document is given in the following screenshot, which shows a single object that has a field and a value. For example, <code class="literal">name</code> is the field, and <code class="literal">sue</code> is its corresponding value. The object belongs to a single person whose name is <code class="literal">sue</code>, whose <code class="literal">age</code> is <code class="literal">26</code>, who has a status value of <code class="literal">A</code>, and who is subscribed to the <code class="literal">news</code> and <code class="literal">sports</code> groups:</p><div class="mediaobject"><img src="/graphics/9781788620901/graphics/32c8ff7f-b6f2-42c2-bd16-7030b90bb08f.png" /></div><p>The following are some notable <span>features</span><a id="id326006626" class="indexterm"></a> of <span>MongoDB</span>:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">It has high-performance data persistence and has support for an embedded data model that reduces I/O activity on the database system.</li><li style="list-style-type: disc">It supports a <span class="strong"><strong>Rich Query Language</strong></span> (<span class="strong"><strong>RQL</strong></span>), including <span>data</span><a id="id326006656" class="indexterm"></a> aggregation, text search, and geospatial queries.</li><li style="list-style-type: disc">MongoDB’s replication facility, called a <span class="strong"><strong><span>replica set</span></strong></span>, provides <span>automatic</span><a id="id326006669" class="indexterm"></a> failover and data redundancy. A <span>replica set</span> is a group of MongoDB servers that maintains the same dataset, providing redundancy and increasing data availability.</li><li style="list-style-type: disc">MongoDB provides horizontal scalability as a part of its core functionality.</li><li style="list-style-type: disc">It supports <span>multiple storage engines, including WiredTiger Storage Engine, In-Memory Storage Engine, and MMAPv1 Storage Engine.</span></li></ul></div><p><span><span class="strong"><strong><span>CouchDB</span></strong></span>:</span> CouchDB is a <span>database</span><a id="id326023017" class="indexterm"></a> that completely embraces the web. It stores data with JSON documents and allows for accessing documents with a web browser, via HTTP. CouchDB works well with modern web and mobile apps. We can distribute our data, efficiently using CouchDB’s incremental replication. CouchDB supports master-master setups, with automatic conflict detection: </p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">Queries on CouchDB <span>documents</span><a id="id326023029" class="indexterm"></a> are called <span class="strong"><strong>views,</strong></span> which are <code class="literal">MapReduce</code> based JavaScript functions specifying matching constraints and aggregation logic. </li><li style="list-style-type: disc">CouchDB also supports <span>optimistic</span><a id="id326023045" class="indexterm"></a> locks based on <span class="strong"><strong>Multi-Versioned Concurrency Control</strong></span> (<span class="strong"><strong>MVCC</strong></span>), enabling it to be lock-free during reading operations.</li></ul></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="ch02lvl4sec3"></a>Key-value stores</h5></div></div></div><p>Key-value stores use a simple <span>data</span><a id="id326047578" class="indexterm"></a> model in which data is considered as a set key-value pair; the keys are unique IDs for each piece of data, and they also work as indexes when accessing the data:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><span class="strong"><strong>Remote Dictionary Server</strong></span> (<span class="strong"><strong>Redis</strong></span>): The growing <span>popularity</span><a id="id326047600" class="indexterm"></a> of Redis, an open source key-value NoSQL technology, is a result of Redis's stability, power,and flexibility in executing a wide range ofoperations and tasks in the enterprise. Redis is used by a diverse set of companies, from startups to the largest technology companies. It is written in C. Redis allows you to conceptualize and approach challenging data analysis and data manipulation problems in a very different manner, as compared to a typical relational data model. In an SQL-based relational database, the developer or database administration create a database schema that organizes the solution domain by normalizing the data into columns, rows, and tables with connecting joins, through foreign-key relationships.</li><li style="list-style-type: disc"><span class="strong"><strong>DynamoDB</strong></span>: DynamoDB is a NoSQL store <span>service</span><a id="id326047613" class="indexterm"></a> provided by Amazon. Dynamo supports a much more flexible data model, <span>especially</span><a id="id326047620" class="indexterm"></a> for key-value stores. The data in Dynamo is stored in tables, each of which has a unique primary ID for accessing. Each table can have a set of attributes that are schema-free, and scalar types and sets are supported. The data in Dynamo can be manipulated by searching, inserting, and deleting, based on the primary keys. In addition, conditional operations, atomic modification, and search by non-key attributes are also supported (yet inefficient), which makes it also closer to a document store. Dynamo provides a fast and scalable architecture, wherein sharding and replication are automatically performed. In addition, <span>Dynamo provides support for both eventual consistency and strong consistency for reads, while strong consistency degrades the performance.</span></li></ul></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="ch02lvl4sec4"></a>Extensible-record stores</h5></div></div></div><p><span class="strong"><strong>Extensible-record stores</strong></span> (also called <span class="strong"><strong>column stores</strong></span>) were <span>initially</span><a id="id326072875" class="indexterm"></a> motivated by Google’s Big Table project. In the system, data is considered in tables with rows and <span>column</span><a id="id326072884" class="indexterm"></a> families, in which both rows and columns can be split over multiple nodes:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><span class="strong"><strong>BigTable</strong></span>: Big Table was <span>introduced</span><a id="id326072901" class="indexterm"></a> by Google in 2004, as a column store to <span>support</span><a id="id326072907" class="indexterm"></a> various Google services. Big Table is built on the <span class="strong"><strong>Google File System (GFS)</strong></span> and can <span>easily</span><a id="id326072920" class="indexterm"></a> be scaled up to hundreds and thousands of nodes, maintaining Terabytes and Petabytes scale of data.</li><li style="list-style-type: disc"><span class="strong"><strong>HBase</strong></span>: HBase is an Apache <span>open</span><a id="id326072932" class="indexterm"></a> source project <span>and</span><a id="id326094580" class="indexterm"></a> was developed in Java, based on the principles of Google’s BigTable. HBase is built on the Apache Hadoop framework and Apache Zookeeper, in orderto provide a column-store database. As HBase was inherited from BigTable, they share a lot of features, in both their data models and architectures.</li><li style="list-style-type: disc"><span class="strong"><strong><span class="strong"><strong>Cassandra</strong></span></strong></span>: Cassandra is an <span>open</span><a id="id326094596" class="indexterm"></a> source NoSQL database that was initially developed by Facebook, in Java. It combines the ideas of both BigTable <span>and</span><a id="id326094603" class="indexterm"></a> Dynamo, and it is now open sourced under the Apache license. Casandra shares the majority of its features with other extensible record stores (column stores), in both data modeling and functionality.</li></ul></div></div></div></div></div>