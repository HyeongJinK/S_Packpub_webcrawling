<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch08lvl1sec69"></a>Introducing the WebDriverManager library</h2></div></div><hr /></div><p>One constraint in Selenium automation is that we <span>need</span><a id="id325161569" class="indexterm"></a> to download the driver binary executable for Chrome, Firefox, and Internet Explorer. After downloading the executable files for Java, the absolute path of this executable file has to be set to JVM properties using <code class="literal">System.setProperty</code>. This was an overhead which has been removed with the introduction of a library called <code class="literal">WebDriverManager</code>. </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip13"></a>Note</h3><p>Remember to use JDK 1.8 with this library. It won't work with JDK 1.7.</p></div><p>With this library, there is no need to download the individual binaries for the different browsers. Earlier, we had to manage the versions of the binaries manually. With this library, this gets handled automatically.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec61"></a>How to use the WebDriverManager library</h3></div></div></div><p>The <code class="literal">WebDriverManager</code> library can be <span>used</span><a id="id325162081" class="indexterm"></a> in three ways:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">As a Java dependency</li><li style="list-style-type: disc">As a command-line interface</li><li style="list-style-type: disc">As a server in itself</li></ul></div><p>Let's look at each of these individually.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch08lvl3sec18"></a>WebDriverManager as a Java dependency</h4></div></div></div><p>One of the ways to use the <code class="literal">WebDriverManager</code> library is as a Java dependency. Add the dependency shown in the following code in the Dependencies section. This <span>dependency</span><a id="id325497856" class="indexterm"></a> can be found on GitHub:</p><pre class="programlisting">&lt;dependency&gt;
     &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;
     &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;
     &lt;version&gt;3.0.0&lt;/version&gt;
     &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</pre><p>3.0.0 is the latest version at the time of writing.</p><p>Prior to <code class="literal">WebDriverManager</code>, we had to write the following in order to work with the browsers. Sample code for the Chrome browser is shown here:</p><pre class="programlisting">private WebDriver driver = null;
 System.setProperty("webdriver.chrome.driver", "C:\\chromedriver.exe");
 driver = new ChromeDriver();</pre><p>The same code can be written efficiently, as shown here:</p><pre class="programlisting">private WebDriver driver = null;
WebDriverManager.chromedriver().setup();
driver = new ChromeDriver();</pre><p>As we can seen, we don't <span>require</span><a id="id325854387" class="indexterm"></a> to set the binary path using <code class="literal">System.setProperty</code>. <code class="literal">WebDriverManager</code> handles it for us.</p><p>The following code fragment shows how to use <code class="literal">WebDriverManager</code> for Firefox:</p><pre class="programlisting">private WebDriver driver=null;
WebDriverManager.firefoxdriver().setup();
driver = new FirefoxDriver();</pre><p>The following code fragment shows how to use <code class="literal">WebDriverManager</code> for Internet Explorer:</p><pre class="programlisting">private WebDriver driver=null;
WebDriverManager.iedriver().setup();
driver = new InternetExplorerDriver();</pre><p>The sample code is shown here:</p><pre class="programlisting">public class BrowserFactory {
    private WebDriver driver = null;
    public void openBrowser(String browser) {
        driver = null;
        WebDriverManager.chromedriver().setup();
        driver = new ChromeDriver();
    }
}</pre><p>We will next see how to use <code class="literal">WebDriverManager</code> on the <span>command</span><a id="id325854437" class="indexterm"></a> line.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch08lvl3sec19"></a>WebDriverManager as CLI</h4></div></div></div><p>We can use <code class="literal">WebDriverManager</code> on the <span>command</span><a id="id325929618" class="indexterm"></a> line as well the the Java dependency. We do this simply by using the following Maven command:</p><p><code class="literal">mvn exec:java -Dexec.args="chrome"</code></p><p>On executing this command, the following logs get displayed in the console:</p><div class="mediaobject"><img src="/graphics/9781789612486/graphics/b0746786-9581-4e64-b207-8331ee55a1c0.png" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch08lvl3sec20"></a>WebDriverManagerServer</h4></div></div></div><p><code class="literal">WebDriverManager</code> can also be <span>used</span><a id="id325929651" class="indexterm"></a> as a server. There are two ways to use it as a server:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">Directly from the code and Maven</li><li style="list-style-type: disc">Using <code class="literal">WebDriverManager</code> as a fat JAR</li></ul></div><p>Let's look at both of these methods:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li><span class="strong"><strong>Directly from the code and Maven</strong></span>: The command to be used is:<code class="literal"> mvn exec:java -Dexec.args="server &lt;port&gt;"</code>. If the second argument is omitted, the default port (<code class="literal">4041</code>) will be used: <code class="literal">C:\ Maven mvn exec:java -Dexec.args="server"</code>:</li></ol></div><div class="mediaobject"><img src="/graphics/9781789612486/graphics/334b3773-a1fa-4459-9d87-d25c06158c27.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="2" type="1"><li><span class="strong"><strong>Using <code class="literal">WebDriverManager</code> as a <span>fat-jar</span>:</strong></span> We can also use WebDriverManager as a fat JAR. For instance: <code class="literal">java -jar webdrivermanager-3.0.0-fat.jar chrome</code>.</li></ol></div><p>After executing this command, the <span>following</span><a id="id325943861" class="indexterm"></a> gets printed in the console:</p><div class="mediaobject"><img src="/graphics/9781789612486/graphics/c193196d-15c1-4263-9f64-f1e63411e1a6.png" /></div><p>When <code class="literal">WebDriverManager</code> gets up and running, HTTP requests can be done to resolve driver binary executables (<code class="literal">chromedriver</code>, <code class="literal">geckodriver</code>, and so on). For example, suppose that <code class="literal">WebDriverManager</code> is running the localhost and in the default port, navigates to the following URLs to get the latest versions of the driver executables:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><code class="literal">http://localhost:4041/chromedriver</code>: The latest version of <code class="literal">chromedriver</code></li><li style="list-style-type: disc"><code class="literal">http://localhost:4041/firefoxdriver</code>: The latest version of <code class="literal">geckodriver</code></li></ul></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><code class="literal">http://localhost:4041/operadriver</code>: The latest version of <code class="literal">operadriver</code></li><li style="list-style-type: disc"><code class="literal">http://localhost:4041/phantomjs</code>: The latest version of <code class="literal">phantomjs</code> driver</li><li style="list-style-type: disc"><code class="literal">http://localhost:4041/edgedriver</code>: The latest version of <code class="literal">MicrosoftWebDriver</code></li><li style="list-style-type: disc"><code class="literal">http://localhost:4041/iedriver</code>: The latest version of <code class="literal">IEDriverServer</code></li></ul></div><p>These requests can be initiated using a <span>normal</span><a id="id325944185" class="indexterm"></a> browser. The driver binary is then automatically downloaded by the browser as an attachment in the HTTP response when the response is sent back.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl2sec62"></a>Advantages of WebDriverManager</h3></div></div></div><p>Let's see what <span>advantages</span><a id="id325944200" class="indexterm"></a> the <code class="literal">WebDriverManager</code> offers:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">It checks the browser version installed on your machine (for example, Chrome, Firefox, Internet Explorer, and so on).</li><li style="list-style-type: disc">It checks the version of the driver (for example, <code class="literal">chromedriver</code>, <code class="literal">geckodriver</code>). If the version is not known, it uses the latest version of the driver.</li><li style="list-style-type: disc">It downloads the WebDriver binary executable if it is not present in the <code class="literal">WebDriverManager</code> cache in the Maven repository (<code class="literal">~/.m2/repository/webdriver</code> by default).</li><li style="list-style-type: disc">It exports the appropriate WebDriver Java environment variables required by Selenium (not done when <code class="literal">WebDriverManager</code> is used from the the command-line interface or as a server). </li></ul></div><p>Now that we know about the <code class="literal">WebDriverManager</code> library, we will look at what DataProviders are in TestNG.</p></div></div>