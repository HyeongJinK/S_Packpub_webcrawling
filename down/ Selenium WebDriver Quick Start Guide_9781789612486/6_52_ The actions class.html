<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch06lvl1sec55"></a>The actions class</h2></div></div><hr /></div><p>Websites, nowadays, have various <span>features</span><a id="id325162059" class="indexterm"></a> such as double click, drag and drop, and hover, to accomplish certain functionality. A special API called the Actions API is used to handle these scenarios. The <code class="literal">actions</code> class implements the builder pattern by creating a composite action made up of constituent actions that are specified by method calls.</p><p>Actions is a class in <code class="literal">org.openqa.selenium.interactions.Actions</code> and it extends the base class object. This class has one protected field called <span class="strong"><strong>action</strong></span>, which is of the <code class="literal">CompositeAction</code> type. <code class="literal">CompositeAction</code> is a class that collects all actions and triggers them at the same time. <code class="literal">CompositeAction</code> implements the Action interface. The <code class="literal"><span>action</span></code> interface has just one method: <code class="literal">perform()</code>, which the <code class="literal">actions</code> class implements.</p><p>There are various methods in the <code class="literal">actions</code> class. All of these methods return an actions object unless specified explicitly. The generic code for a few of the important methods in this class are shown when we look at the <code class="literal">TestBase</code> class, and are as follows:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><code class="literal">keyDown(Keys)</code>: Simulates a key press. The key under consideration remains pressed and the subsequent operations may assume that the key is kept pressed.</li><li style="list-style-type: disc"><code class="literal">keyDown(WebElement,Keys)</code>: Simulates a key press after focusing on a <code class="literal">WebElement</code>. The key under consideration remains pressed and the subsequent operations may assume that the key is kept pressed.</li><li style="list-style-type: disc"><code class="literal">keyUp(Keys)</code>: Simulates a key release. If you try to use this method on an undepressed key, this will yield an undefined behavior.</li><li style="list-style-type: disc"><code class="literal">keyUp(WebElement, Keys)</code>: Simulates a key release after focusing on an element.</li><li style="list-style-type: disc"><code class="literal">sendKeys(CharSequence...)</code>: Sends a variable number of arguments of the<code class="literal">CharSequence</code>type. This is a key combination that's sent to the currently active element.</li><li style="list-style-type: disc"><code class="literal">sendKeys(WebElement, CharSequence...)</code>: Sends a variable number of arguments of the<code class="literal">CharSequence</code>type after focusing on the<code class="literal">WebElement</code>that's passed as a parameter.</li><li style="list-style-type: disc"><code class="literal">clickAndHold()</code>:Simulates a left mouse click without releasing at the current mouse location.</li><li style="list-style-type: disc"><code class="literal">clickAndHold(WebElement)</code>: Simulates a left<span>mouse</span><a id="id325465559" class="indexterm"></a>click without releasing in the center of a given web element.</li></ul></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><code class="literal">release()</code>: Releases the depressed left mouse button at the current location. Attempting to invoke this method without first invoking<code class="literal">clickAndHold()</code>will result in an undefined behavior.</li><li style="list-style-type: disc"><code class="literal">release(WebElement)</code>: Releases the depressed left mouse button in the middle of the web element. Attempting to invoke this method without first invoking<code class="literal">clickAndHold()</code>will result in an undefined behavior.</li><li style="list-style-type: disc"><code class="literal">click()</code>: Left mouse click at the current mouse location.</li><li style="list-style-type: disc"><code class="literal">click(WebElement)</code>: Left mouse click in the middle of the given web element.</li><li style="list-style-type: disc"><code class="literal">doubleClick()</code>: Performs a double click at the current mouse location.</li><li style="list-style-type: disc"><code class="literal">doubleClick(WebElement)</code>: Performs a double click at the middle of the given web element.</li><li style="list-style-type: disc"><code class="literal">moveToElement(WebElement)</code>: Moves the mouse cursor to the center of the element. The element is also scrolled into view.</li><li style="list-style-type: disc"><code class="literal">moveToElement(WebElement,int,int)</code>: Moves the mouse cursor to an offset position from the top-left corner of the element. The element is also scrolled into view.</li><li style="list-style-type: disc"><code class="literal">moveByOffset(int,int)</code>: Moves the mouse from its current position (or 0,0 if the mouse has not been moved) by the given offset. If the coordinates that are provided are outside the visible window (the mouse will end up outside the browser visible window), then the content is scrolled to match.</li><li style="list-style-type: disc"><code class="literal">contextClick()</code>: Performs a right-click at the current mouse location.</li><li style="list-style-type: disc"><code class="literal">contextClick(WebElement)</code>: Performs a right-click at the center of the given element. First, it does a<code class="literal">mouseMove</code>to the location of the element.</li><li style="list-style-type: disc"><code class="literal">dragAndDrop(WebElement, WebElement)</code>: Executes click-and-hold at the source element, moves to the location of the target element, and then releases the mouse.</li><li style="list-style-type: disc"><code class="literal">dragAndDropBy(WebElement,int,int)</code>: Executes click-and-hold at the source element, moves the mouse by a given offset, and then releases the mouse.</li><li style="list-style-type: disc"><code class="literal">build()</code>: Generates a composite action<span>containing</span><a id="id325470849" class="indexterm"></a>all of the actions that have been gathered so far, ready to be performed (the internal builder state is reset, so subsequent calls to<code class="literal">build()</code>will contain fresh sequences).</li><li style="list-style-type: disc"><code class="literal">perform()</code>: Performs the accumulated actions without calling<code class="literal">build()</code>first. This method has a return type void.</li></ul></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec49"></a>Various scenarios for the actions class</h3></div></div></div><p>In this section, we will take a look at two <span>scenarios</span><a id="id325563821" class="indexterm"></a> for the <code class="literal">actions</code> class: double click and hover.</p><p>For the double click scenario, the following code creates an HTML page. This HTML page uses JQuery to show and hide the contents of a paragraph:</p><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
 &lt;title&gt;JQuery Demo&lt;/title&gt;
 &lt;script
     src="https://code.jquery.com/jquery-3.3.1.js"
     integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
     crossorigin="anonymous"&gt;&lt;/script&gt;
 &lt;script type="text/javascript"&gt;
     $(document).ready(function(){
         $('h2').dblclick(function(){
             $('p').show();
         })
     });
 &lt;/script&gt;
 &lt;style&gt;
    p {
         display:none;
     }
 &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
 &lt;h2&gt;Double click Here!&lt;/h2&gt;
 &lt;p&gt;This is some sample text&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</pre><p>Next, we put in a Java class with Selenium code. The following code uses the <code class="literal">actions</code> class instance to double click the <code class="literal">h2</code> tag. On double clicking, the paragraph tag is <span>displayed</span><a id="id325563848" class="indexterm"></a> and the text in the paragraph tag is captured:</p><pre class="programlisting">public class JQueryDBLClick {
 public static void main(String[] args) {
 String userDirectory = System.getProperty("user.dir");
 System.setProperty("webdriver.chrome.driver",
 userDirectory+"\\src\\main\\resources\\chromedriver.exe");
 WebDriver driver = new ChromeDriver();
 driver.manage().timeouts().implicitlyWait(15, TimeUnit.SECONDS);
 driver.navigate().to(
 "C:\\Users\\Bhagyashree\\Documents\\DoubleClick.html");
 Actions actions = new Actions(driver);
 actions.doubleClick(driver.findElement(By.tagName("h2"))).perform();
 System.out.println("Text in para: "
 + driver.findElement(By.tagName("p")).getText());
 }
}</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note10"></a>Note</h3><p>You can also set the path of the binary executable in the <code class="literal">path</code> variable. Hence, you can avoid using <code class="literal">System.setProperty()</code> to set the path explicitly.</p></div><p>Next, we will explore the hover scenario, and for this, we will make use of <a class="ulink" href="https://jqueryui.com/tooltip/" target="_blank">https://jqueryui.com/tooltip/</a>, which has a ready-made tooltip that we can make use of. It can be seen that the <code class="literal">aria-describedby</code> HTML attribute is only inserted into the HTML when a mouse hover is done on this element. </p><p>This code extracts the <code class="literal">aria-describedby</code> attribute and <span>prints</span><a id="id325610310" class="indexterm"></a> it to the console:</p><pre class="programlisting">public class HoverDemo {
    public static void main(String[] args) {
        String userDirectory = System.getProperty("user.dir");
        System.setProperty("webdriver.chrome.driver",
             userDirectory+"\\src\\main\\resources\\chromedriver.exe");
        WebDriver driver = new ChromeDriver();
        driver.manage().timeouts().implicitlyWait(15, 
        TimeUnit.SECONDS);
        driver.navigate().to("https://jqueryui.com/tooltip/");
        driver.manage().window().maximize();
        Actions actions = new Actions(driver);
        driver.switchTo().frame(0);
        actions.moveToElement(driver.findElement(By.id("age"))).build()
             .perform();
        System.out.println("Attribute is: "
             + driver.findElement(By.id("age")).getAttribute(
                 "aria-describedby"));
 }
}</pre></div></div>