<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec32"></a>Introducing the log4j framework</h2></div></div><hr /></div><p>Debugging the framework is an <span>equally</span><a id="id325162069" class="indexterm"></a> important activity when errors occur. Logging is the process of creating logs of the framework execution. Because of this, errors occurring during the execution can be easily diagnosed, since we know from the log about the last successful action that happened.</p><p>Log4j is an open source framework for logging. For using the Log4J framework, the following dependency has to be added in <code class="literal">pom.xml</code>:</p><pre class="programlisting">&lt;!-- https://mvnrepository.com/artifact/log4j/log4j --&gt;
&lt;dependency&gt;
 &lt;groupId&gt;log4j&lt;/groupId&gt;
 &lt;artifactId&gt;log4j&lt;/artifactId&gt;
 &lt;version&gt;1.2.17&lt;/version&gt;
 &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</pre><p>Follow these steps to download the Log4J dependency:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Save the <code class="literal">pom.xml</code></li><li>Right-click on <strong class="userinput"><code>Project</code></strong> and select <strong class="userinput"><code>Update Project</code></strong></li><li>The required dependency will get downloaded</li></ol></div><p>In the case of firewall restrictions, a manual <span>download</span><a id="id325447117" class="indexterm"></a> of the log4J JAR has to be done, and later this Jar has to be added to the project build path by right-clicking on the project in Eclipse, then selecting properties. In the properties popup, select Java Build Path and click on Libraries. Add the log4j jar by clicking Add External JARs and selecting <span>the JAR</span> from the local drive.</p><p>For using Log4J, we either require a <code class="literal">log4j.xml</code> or <code class="literal">log4j.properties</code> for configuring log4j to generate logs. We will be using <code class="literal">log4j.properties</code> in this chapter.</p><p><code class="literal">Log4J.properties</code> is shown in the following snippet:</p><pre class="programlisting">#Define the root logger. Level of Root logger is defined as DEBUG
log4j.rootLogger=DEBUG, CONSOLE, LOGFILE

#Define the CONSOLE Appender, the threshhold, the layout and the conversion #pattern
# The logging levels are in the order ALL(Integer.MAX_VALUE) &lt; TRACE(600) &lt; #DEBUG(500) &lt; #INFO(400) &lt; WARN(300) &lt; ERROR(200) &lt; FATAL(100) &lt; OFF(0). Since we #have kept the logging #level # at INFO here, all INFO,WARN,ERROR,FATAL messages #will be displayed. The DEBUG and #TRACE level messages are not displayed

log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender
log4j.appender.CONSOLE.Threshold=INFO
log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout
log4j.appender.CONSOLE.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %-5p %C{1}:%L - %m%n
# Define the File Appender
log4j.appender.LOGFILE=org.apache.log4j.RollingFileAppender
log4j.appender.LOGFILE.File=D:\\logging.log
log4j.appender.LOGFILE.MaxFileSize=20MB
log4j.appender.LOGFILE.MaxBackupIndex=5
log4j.appender.LOGFILE.Append=true
log4j.appender.LOGFILE.Threshold=INFO</pre><p>The log messages will be pushed to the <code class="literal">D:\logging.log</code> file, which will be appended. On reaching 50 MB, a new file will get created. The new file will be an archived version and in the type it will have the version number listed. For example, the first file will be of type <code class="literal">1</code>, the second of type <code class="literal">2</code>. When the version 2 file is created, the version 1 file data will be pushed to version 2 and the current version data will be pushed to version 1. The next thing worth mentioning is that there can be only five versions that can be created. After the fifth version, once <code class="literal">maxFileSize</code> is reached, data will start flowing from the current version to version 1, from version 1 to version 2, version 2 to version 3, and so on. Data in version 5 that was <span>originally</span><a id="id325448946" class="indexterm"></a> there will be overwritten by data from version 4.</p><p>Here is what a sample log looks like:</p><pre class="programlisting">2018-08-14 14:29:05 INFO Navigate:101 - Navigating to http://www.freecrm.com
2018-08-14 14:29:11 INFO WorkspaceSelection:35 - Created Logger object
2018-08-14 14:29:11 INFO WorkspaceSelection:90 - Entering SelectWindowByTitleAndURL
2018-08-14 14:29:16 INFO WorkspaceSelection:98 - windowset size: 2</pre><p>Let's dissect a sample line from the log:</p><p><code class="literal">2018-08-14 14:29:16 INFO WorkspaceSelection:98 - windowset size: 2</code></p><p>The lines from <code class="literal">log4j.properties</code> that correspond to the following output are as follows:</p><pre class="programlisting">log4j.appender.LOGFILE.layout=org.apache.log4j.PatternLayout
 log4j.appender.LOGFILE.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %-5p %C{1}:%L - %m%n</pre><p>In the previous two lines of code, <code class="literal">%d{yyyy-MM-dd HH:mm:ss}</code> corresponds to <code class="literal">2018-08-14 14:29:16</code> in the output. <code class="literal">%-5p</code> corresponds to the text <code class="literal">INFO</code>. The <code class="literal">'-'</code> in <code class="literal">%-5p</code> indicates that the entry should be left justified with maximum five characters.<code class="literal">'%C{1}:'</code> c<span>orresponds</span> to <code class="literal">'WorkspaceSelection:'</code>. This specifies the class name.<code class="literal">'%L -'</code> corresponds to the line number in the class followed by a hyphen.<code class="literal">'%m</code> corresponds to the application supplied message <code class="literal">windowset size: 2</code>.<code class="literal">%n</code> corresponds to the platform dependent line separator character or characters.</p><p>For <span>details</span><a id="id325450461" class="indexterm"></a> on the Log4J framework, refer to <a class="ulink" href="https://logging.apache.org/log4j/2.x/javadoc.html" target="_blank">https://logging.apache.org/log4j/2.x/javadoc.html</a>.</p></div>