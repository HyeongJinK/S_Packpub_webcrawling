<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec31"></a>Bird's eye view of the framework</h2></div></div><hr /></div><p>We will now learn how our Keyword-driven framework will be <span>structured</span><a id="id325162059" class="indexterm"></a> from a high level.</p><p>The following figure shows the bird's eye view of the framework:</p><div class="mediaobject"><img src="/graphics/9781789612486/graphics/e7a86e62-3f04-430c-966b-add0ceea0524.png" /></div><p> </p><p>We will be using <span>a</span> TestNG framework to control all the components of our framework. TestNG is a framework that is a combination of NUnit and JUnit frameworks. This is our base framework. The <code class="literal">testng.xml</code> is triggered from <code class="literal">pom.xml</code>, which eventually will be <span>executed</span><a id="id325441767" class="indexterm"></a> from Jenkins.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec31"></a>Introducing the testng XML file</h3></div></div></div><p>The framework will be <span>controlled</span><a id="id325441782" class="indexterm"></a> by TestNG XML, which is an XML file <span>with</span><a id="id325441790" class="indexterm"></a> all the classes that have to be executed as part of the test run.</p><p>The <code class="literal">TestNG.xml</code> is shown in the following code and <code class="literal">DriverScript</code> will be the name of our main class: </p><pre class="programlisting">&lt;!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd" &gt;
&lt;suite name="Suite1" verbose="1" &gt;
    &lt;test name="FirstTest"&gt;
         &lt;classes&gt;
             &lt;class name="packt.keywordframework.DriverScript"/&gt;
         &lt;/classes&gt;
    &lt;/test&gt;
&lt;/suite&gt;</pre><p>Even though this will be the first class to be executed, it will not contain a Main method. We will see how we can trigger this class in a <a class="link" href="#" linkend="ch07">C<span>hapter 7</span></a><span>, The Command Pattern and Creating Components</span>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl2sec32"></a>Triggering the testng XML from within the POM XML file</h3></div></div></div><p>The <code class="literal">testng.xml</code> that is shown in the <span>preceding</span><a id="id325444804" class="indexterm"></a> code will be <span>triggered</span><a id="id325446998" class="indexterm"></a> from <code class="literal">pom.xml</code>. Let's understand how this triggering takes place. For the triggering to happen, a plugin called <code class="literal">Maven Surefire Plug-in</code> is used. The corresponding dependency is placed in the <code class="literal">pom.xml</code> inside the <code class="literal">&lt;plugin&gt;&lt;/plugin&gt;</code> tag, as shown in the following code snippet. </p><p>Apart from the Maven Surefire plugin, another plugin called the Maven Compiler plugin is also required. For integration tests, the Maven failsafe plugin should be used.</p><p>The following snippet of the <code class="literal">pom.xml</code> shows the <code class="literal">&lt;build&gt;&lt;/build&gt;</code> tags, inside which are <code class="literal">&lt;plugins&gt;&lt;/plugins&gt;</code> tags. Place the dependencies inside the plugins tag, as shown in the following code (<span>make sure to select Version 1.8 of source and target):</span></p><pre class="programlisting">&lt;build&gt;
 &lt;plugins&gt;
     &lt;plugin&gt;
         &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
         &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;
         &lt;version&gt;2.22.0&lt;/version&gt;
         &lt;configuration&gt;
             &lt;suiteXmlFiles&gt;
                 &lt;suiteXmlFile&gt;
                        testng.xml
                 &lt;/suiteXmlFile&gt;
             &lt;/suiteXmlFiles&gt;
         &lt;/configuration&gt; 
     &lt;/plugin&gt;

     &lt;plugin&gt;
         &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
         &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
         &lt;version&gt;3.8.0&lt;/version&gt;
         &lt;configuration&gt;
             &lt;source&gt;1.8&lt;/source&gt;
             &lt;target&gt;1.8&lt;/target&gt;
         &lt;/configuration&gt;
     &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/build&gt;</pre><p>After adding this dependency, save the project and right click on the <strong class="userinput"><code>Project</code></strong> in Eclipse. Click <strong class="userinput"><code>Maven</code></strong> | <strong class="userinput"><code>Update Project</code></strong>.</p><p>The next thing to do is right click on <code class="literal">pom.xml</code> and select <strong class="userinput"><code>Run As</code></strong> | <strong class="userinput"><code>Maven Test</code></strong>.</p><p>Alternatively, you can run Maven from the command line using the command <code class="literal">mvn clean verify</code><span class="strong"><strong> </strong></span>(using the Maven <code class="literal">failsafe</code> plugin) or <code class="literal">mvn clean test</code><span class="strong"><strong> </strong></span>(using the <code class="literal">surefire</code> plugin). <span>JDK</span> that is greater than 1.8 is required. The .java files in the project will be <span>compiled</span><a id="id325447130" class="indexterm"></a> and the <span>tests</span><a id="id325448846" class="indexterm"></a> in the <code class="literal">testng.xml</code> will be run. Right now, we only have one class <code class="literal">DriverScript.java</code> in <code class="literal">testng.xml</code>. Since we have not created this class yet, an error will be thrown after executing the previous command. But that's not a problem.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl3sec11"></a>Handling errors while running pom.xml</h4></div></div></div><p>If an error that's stating <code class="literal">'no compiler is provided in this environment. perhaps you are running on a jre rather than a jdk?'</code> is displayed, then <span>these</span><a id="id325448942" class="indexterm"></a> steps have to be performed:</p><div class="orderedlist"><ol class="orderedlist arabic" type="1"><li>Right-click on the <strong class="userinput"><code>Project</code></strong>. Select <code class="literal">Properties</code> and go to the <strong class="userinput"><code>Compiler</code></strong> section. </li></ol></div><div class="orderedlist"><ol class="orderedlist arabic" start="2" type="1"><li>Verify that the compiler compliance level is set at 1.8 since we are using Java 8, as shown in the following screenshot:</li></ol></div><div class="mediaobject"><img src="/graphics/9781789612486/graphics/51a2779c-bbd9-49ed-9870-3529e21568b3.png" /></div><div class="orderedlist"><ol class="orderedlist arabic" start="3" type="1"><li>Go to <strong class="userinput"><code>Window</code></strong> | <strong class="userinput"><code>Preferences</code></strong> and <span>verify</span><a id="id325449012" class="indexterm"></a> that the JDK 1.8 checkbox is checked, as shown in the following screenshot:</li></ol></div><div class="mediaobject"><img src="/graphics/9781789612486/graphics/3ec13582-86da-44c5-b51b-406d147eb9e0.png" /></div><p>Once these <span>settings</span><a id="id325449031" class="indexterm"></a> are done, the aforementioned error will no longer appear.</p></div></div></div>