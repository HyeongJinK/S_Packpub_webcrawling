<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch23lvl1sec155"></a>Gaining insights through code coverage</h2></div></div><hr /></div><p>Code Coverage is a <span>tool</span><a id="id325333114" class="indexterm"></a> in Xcode that is used to gain insights into how much of your code you are testing with your test suite. It tells you exactly which parts of your code were executed during a test and which parts of your code were not. This is extremely useful because you can take focused action based on the information provided by Code Coverage.</p><p> </p><p>To enable <strong class="userinput"><code>Code Coverag</code></strong><strong class="userinput"><code>e</code></strong>, open the scheme <span>editor</span><a id="id325333138" class="indexterm"></a> through the (<strong class="userinput"><code>Product</code></strong> | <strong class="userinput"><code>Scheme</code></strong>) menu:</p><div class="mediaobject"><img src="/graphics/9781789133202/graphics/9a729b5a-56f2-4b8c-8ea4-895989a619d9.png" /></div><p>Select the Test action and make <span>sure</span><a id="id325333780" class="indexterm"></a> the <strong class="userinput"><code>Gather coverage</code></strong> checkbox on the <strong class="userinput"><code>Options</code></strong> tab is checked:</p><div class="mediaobject"><img src="/graphics/9781789133202/graphics/dfb0516e-ab02-443e-afe8-6a9011dd4ca8.png" /></div><p></p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip55"></a>Note</h3><p>You can also press <span class="emphasis"><em>Cmd</em></span> + <span class="emphasis"><em>&lt; </em></span>to open the scheme editor quickly.</p></div><p>After doing this, close the scheme editor and run your tests. This time, Xcode will monitor which parts of your code were executed during this test, and which parts weren't. This information can give you some good insights about which parts of your code could use some more testing. To see the coverage data, open the <strong class="userinput"><code>Report navigator</code></strong> in the left sidebar in Xcode. The rightmost icon in this sidebar represents the Report navigator:</p><div class="mediaobject"><img src="/graphics/9781789133202/graphics/e6ebc10c-c228-4584-9d5c-49e9cc4a4f95.png" /></div><p>There are several reports listed under <span>your</span><a id="id325333834" class="indexterm"></a> app name. If you select the <span class="strong"><strong>Coverage</strong></span> report, the coverage report will open in the Editor Area in Xcode. You can see all the files in your app and the percentage of code in the file that's covered by your tests. The following screenshot shows Coverage for the <span class="strong"><strong>MovieTrivia</strong></span> app:</p><div class="mediaobject"><img src="/graphics/9781789133202/graphics/b1aaf115-e6e1-4897-9606-1839c75db8d1.png" /></div><p></p><p>The more a bar is filled, the more lines of code in that file or method were executed during your test. You'll notice that the <code class="literal">AppDelegate.swift</code> file is covered under the tests even though you haven't written any tests for it. The reason this happens is that the app must launch during the test to act as a host for the test suite. This means that parts of the code in <code class="literal">AppDelegate.swift</code> are actually executed during the test, and therefore Xcode considers it covered in the tests.</p><p>You can see which methods for a specific file were executed by clicking on the triangle next to the class name. This enables you to see exactly which parts of a file are tested and which parts aren't.</p><p>One last feature of Code Coverage that's worth mentioning is inline Code coverage. Inline Code coverage will show you how often a specific block of code has been executed during testing. This will give you code coverage insights right next to your code, without having to navigate to the Reports navigator. To enable this feature, open up your Xcode preferences and navigate to the <strong class="userinput"><code>Text Editing</code></strong> tab. Check the Show iteration counts checkbox at the bottom of the tab. If you open a file now, you'll see the iteration count for your code on the right side of the editor window. The following screenshot shows the iteration count for the <code class="literal">loadQuestions(callback:)</code> method:</p><div class="mediaobject"><img src="/graphics/9781789133202/graphics/94f68a78-be82-4a16-ad56-9161a3942b5b.png" /></div><p> </p><p> </p><p>Even though Code Coverage is a great tool for gaining insights into your tests, you shouldn't let it influence you too much. Regularly check the Code Coverage for your app and look for methods that are untested and are either easy to write tests for, or should be tested because they contain important logic. Code Coverage is also great for discovering parts of your code that should be tested but are hard to test because they're nested deep inside a view controller or otherwise hard to reach.</p><p>You should always aim for as much code coverage as possible, but don't push yourself to reach 100%. Doing this will make you jump through all kinds of hoops, and you'll invest way more time in testing than you should. Not all paths in your code have to be tested. However, don't shy away from doing some refactoring. Proper testing helps you to avoid bugs and to structure your code better. Code Coverage is just one extra tool in <span>your</span><a id="id325571683" class="indexterm"></a> tool belt to help identify which parts of your code could benefit from some tests.</p><p>If you look at the current state of the coverage in the <span class="strong"><strong>MovieTrivia</strong></span> app, we're doing quite well. Most of the logic in the app is tested. The only parts that are not tested thoroughly are the view controllers. Testing view controllers and navigations flows with <code class="literal">XCTest</code> can be quite hard and tedious. Luckily, there is one last testing tool that we'll discuss in this chapter: <code class="literal">XCUITest</code>.</p></div>