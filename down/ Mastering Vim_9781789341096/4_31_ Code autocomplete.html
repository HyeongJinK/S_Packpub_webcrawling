<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec35"></a>Code autocomplete</h2></div></div><hr /></div><p>One of the most appealing features modern IDEs have is <span>code</span><a id="id326178193" class="indexterm"></a> autocomplete. IDEs allow you to eliminate typos, look up hard to remember variable names, and save time by removing the need to type long variable names over and over again.</p><p>Vim has some built-in autocomplete functionality, and there are plugins that expand upon this.</p><p> </p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec36"></a>Built-in autocomplete</h3></div></div></div><p>Vim supports native autocomplete based on <span>words</span><a id="id325878657" class="indexterm"></a> available in open buffers. It's available out of the box starting with Vim 7.0. Start by typing the beginning of a function name and hit <span class="emphasis"><em>Ctrl </em></span>+ <span class="emphasis"><em>n</em></span> to bring up the <span>autocomplete</span><a id="id325878678" class="indexterm"></a> list. You can navigate the list using <span class="emphasis"><em>Ctrl </em></span>+ <span class="emphasis"><em>n</em></span><span class="emphasis"><em> </em></span>and <span class="emphasis"><em>Ctrl </em></span>+ <span class="emphasis"><em>p</em></span>. For example, open <code class="literal">animal_farm.py</code>, enter insert mode, and start typing the first two letters of a function name: <code class="literal">ma</code> (<code class="literal">make_animal</code>). Press <span class="emphasis"><em>Ctrl </em></span>+ <span class="emphasis"><em>n</em></span>. This will bring up a list of available options:</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/dd8e5baf-e436-409e-a758-3b8b683c0edb.png" /></div><p>Continue typing to dismiss the list.</p><p>In fact, Vim has an insert-completion mode, which supports multiple completion types. Press <span class="emphasis"><em>Ctrl </em></span>+ <span class="emphasis"><em>x </em></span>followed by one of the following keys:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><span class="emphasis"><em>Ctrl </em></span>+ l to complete the whole line</li><li style="list-style-type: disc"><span class="emphasis"><em>Ctrl </em></span>+ <span class="emphasis"><em>]</em></span> to complete tags</li><li style="list-style-type: disc"><span class="emphasis"><em>Ctrl </em></span>+ <span class="emphasis"><em>f </em></span>to complete filenames</li><li style="list-style-type: disc"><code class="literal">s</code> to complete spelling suggestions (if <code class="literal">:set spell</code> is enabled)</li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note79"></a>Note</h3><p>These are the commands I found useful in the past, but there are more! Read <code class="literal">:help ins-completion</code> for a full list of supported commands—everyone's workflow is unique, and you never know which commands you'll find yourself utilizing a lot. You should also check <code class="literal">:help 'complete'</code>, which is an option that controls where Vim looks for completion (by default, Vim looks in buffers, tag files, and headers).</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl2sec37"></a>YouCompleteMe</h3></div></div></div><p>YouCompleteMe takes a built-in <span>autocomplete</span><a id="id326436444" class="indexterm"></a> engine and pumps steroids into it. YouCompleteMe has a <span>few</span><a id="id326436453" class="indexterm"></a> distinctive features that elevate it beyond built-in autocomplete:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">Semantic (language-aware) autocomplete; YouCompleteMe understands your code a lot better than built-in autocomplete</li><li style="list-style-type: disc">Intelligent suggestion ranking and filtering</li><li style="list-style-type: disc">An ability to display documentation, rename variables, autoformat code, and fix certain types of errors (language dependent, see <a class="ulink" href="https://github.com/Valloric/YouCompleteMe#quick-feature-summary" target="_blank">https://github.com/Valloric/YouCompleteMe#quick-feature-summary</a>)</li></ul></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl3sec17"></a>Installation</h4></div></div></div><p>First, make sure that you have <code class="literal">cmake</code> and <code class="literal">llvm</code> installed, since <span>YouCompleteMe</span><a id="id326436732" class="indexterm"></a> needs to <span>be</span><a id="id326436741" class="indexterm"></a> compiled:</p><pre class="programlisting"><span class="strong"><strong>$ sudo apt-get install cmake llvm</strong></span></pre><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note80"></a>Note</h3><p>For Windows, you can get <code class="literal">cmake</code> from <a class="ulink" href="https://cmake.org/download" target="_blank">https://cmake.org/download</a> and <code class="literal">llvm</code> from <a class="ulink" href="https://releases.llvm.org/download.html" target="_blank">https://releases.llvm.org/download.html</a>. YouCompleteMe requires Vim to be compiled with <code class="literal">+python</code>. You can check whether your Vim was compiled with Python support by running <code class="literal">vim --version | grep python</code>. If you see <code class="literal">-python</code>, you'll have to recompile your Vim with Python support.</p></div><p>If you're using <code class="literal">vim-plug</code>, add the <span>following</span><a id="id326437178" class="indexterm"></a> to <code class="literal">.vimrc</code>:</p><pre class="programlisting">let g:plug_timeout = 300  " Increase vim-plug timeout for YouCompleteMe.
Plug 'Valloric/YouCompleteMe', { 'do': './install.py' }</pre><p>Save the file and execute it:</p><pre class="programlisting"><span class="strong"><strong>:source $MYVIMRC | PlugInstall</strong></span></pre><p>Depending on how fast your machine is, this might take a while. You will be greeted by a successful installation screen:</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/cddbb820-6820-4b78-a730-743004399c99.png" /></div><p> </p><p> </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note81"></a>Note</h3><p>If you're running into an error such as <strong class="userinput"><code>c++: internal compiler error: Killed (program cc1plus)</code></strong>, then your machine likely doesn't have enough memory to complete the operation. On Linux, you can perform a swap to increase the available space:<code class="literal">$ sudo dd if=/dev/zero of=/var/swap.img bs=1024k count=1000</code><code class="literal">$ sudo mkswap /var/swap.img</code><code class="literal">$ sudo swapon /var/swap.img</code></p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl3sec18"></a>Using YouCompleteMe</h4></div></div></div><p>YouCompleteMe doesn't introduce a lot of new key bindings, which <span>makes</span><a id="id326438518" class="indexterm"></a> integrating it into your workflow easier. Enter insert mode and start typing away:</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/7b1387d8-b889-4247-9f01-849a46d78a87.png" /></div><p> </p><p>As you do, autocomplete suggestions will pop up. The <span class="emphasis"><em>Tab </em></span>key will cycle through suggestions. Furthermore, if YouCompleteMe is able to look up function definition, together with a supporting docstring, it will show up in a preview window at the top of the screen:</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/084d0ac3-3b93-4c83-b8b0-e6434a3255b1.png" /></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip82"></a>Note</h3><p>The preview window only shows up when YouCompleteMe uses the semantic autocomplete engine. The semantic engine is automatically invoked after typing <code class="literal">.</code> (period) in insert mode or manually by pressing <span class="emphasis"><em>Ctrl </em></span>+ spacebar.</p></div><p> </p><p>For Python, YouCompleteMe also allows you to jump to function definition. Add the <span>following</span><a id="id326450263" class="indexterm"></a> mapping to your <code class="literal">.vimrc</code> file:</p><pre class="programlisting">noremap &lt;leader&gt;] :YcmCompleter GoTo&lt;cr&gt;</pre><p>Now, with the cursor over a function call, press your leader key (backslash (\) by default), followed by <code class="literal">]</code>. You will be taken to the function definition:</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/3375917a-8976-4486-83c2-f2ce413abae4.png" /></div><p> </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note83"></a>Note</h3><p>YouCompleteMe is not the only available autocomplete tool, but merely the author's favorite (and the most popular option at the time of writing this book). There are many alternatives. A quick search along the lines of <span class="emphasis"><em>Vim autocomplete</em></span> will yield plenty of results if you're interested in an alternative.</p></div></div></div></div>