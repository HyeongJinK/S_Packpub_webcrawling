<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch01lvl1sec17"></a>Persistent undo and repeat</h2></div></div><hr /></div><p>Like any editor, Vim keeps track of every operation. Press <code class="literal">u</code> to undo a last operation, and <span class="emphasis"><em>Ctrl </em></span>+ <span class="emphasis"><em>r</em></span> to redo it.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note31"></a>Note</h3><p>To learn more about Vim's undo tree (Vim's undo history is not linear!) and how to navigate it, see <a class="link" href="#" linkend="ch04">chapter 4</a>, <span class="emphasis"><em>Advanced Workflows</em></span>.</p></div><p>Vim also allows you to persist undo history between sessions, which is great if you want to undo (or remember) something you've done a few days ago!</p><p>You can enable persistent undo by adding the <span>following</span><a id="id326288946" class="indexterm"></a> line to your <code class="literal">.vimrc</code>:</p><pre class="programlisting">set undofile</pre><p>However, this will litter your system with an undo file for each file you're editing. You can consolidate the undo files in a single directory, as seen in the <span>following</span><a id="id326288932" class="indexterm"></a> example:</p><pre class="programlisting">" Set up persistent undo across all files.
set undofile
if !isdirectory("$HOME/.vim/undodir")
  call mkdir("$HOME/.vim/undodir", "p")
endif
set undodir="$HOME/.vim/undodir"</pre><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note32"></a>Note</h3><p>If you're using Windows, replace the directories with <code class="literal">%USERPROFILE%\_vim\undodir</code> (and you'll be making changes to <code class="literal">_vimrc</code> instead of <code class="literal">.vimrc</code>).</p></div><p>Now, you'll be able to undo and redo your changes across sessions.</p></div>