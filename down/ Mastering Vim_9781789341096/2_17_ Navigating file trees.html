<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec23"></a>Navigating file trees</h2></div></div><hr /></div><p>Since software projects contain a lot of files and directories, finding a <span>way</span><a id="id326302861" class="indexterm"></a> to traverse and display these using Vim comes in handy. This section will cover five different ways that you can navigate your files: using the built-in Netrw file manager or using the <code class="literal">:e</code> command with the <code class="literal">wildemenu</code> option enabled, as well as using the NERDTree, Vinegar, and CtrlP plugins. All of these provide different ways to interact with files and can be mixed and matched.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec15"></a>Netrw</h3></div></div></div><p>Netrw is a built-in file <span>manager</span><a id="id326302852" class="indexterm"></a> in Vim (if we want to get technical, it's a plugin that ships with Vim). It allows you to <span>browse</span><a id="id326302842" class="indexterm"></a> directories and functions, similar to any other file manager you've worked with in your favorite OS.</p><p>Use <code class="literal">:Ex</code> (the full command is <code class="literal">:Explore</code>) to open the file navigation window:</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/df6dd2a6-dd9c-4e11-98dc-b5a271b2b287.png" /></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note51"></a>Note</h3><p>Netrw is fully integrated with Vim, so executing an edit command on a directory (for example, <code class="literal">:e .</code> to open a current directory) actually opens Netrw. This also makes it so that you have one less command to remember.</p></div><p>Here, you can see all of the files within our workspace. Netrw already provides a quick help section in a status bar, but here are the main controls you'll need to know:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><span class="emphasis"><em>Enter</em></span> opens files and directories</li><li style="list-style-type: disc"><code class="literal">-</code> goes up a directory</li><li style="list-style-type: disc"><code class="literal">D</code> deletes a file or directory</li><li style="list-style-type: disc"><code class="literal">R</code> renames a file or directory</li></ul></div><p>A Netrw window can be open in split windows or new tabs as well:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><code class="literal">:Vex</code> opens Netrw in a vertical split</li><li style="list-style-type: disc"><code class="literal">:Sex</code> opens Netrw in a horizontal split</li><li style="list-style-type: disc"><code class="literal">:Lex</code> opens Netrw in a leftmost full-height vertical split</li></ul></div><p>Netrw is a powerful tool, which supports remote editing as well; for instance, to get a directory listing over SFTP, you can run the following:</p><pre class="programlisting"><span class="strong"><strong>:Ex sftp://&lt;domain&gt;/&lt;directory&gt;/</strong></span></pre><p>You can substitute <code class="literal">:Ex</code> with <code class="literal">:e</code> for the same results. You can edit individual files as well. Here's how to open a file over SCP:</p><pre class="programlisting"><span class="strong"><strong>:e scp://&lt;domain&gt;/&lt;directory&gt;/&lt;file&gt;</strong></span></pre></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec16"></a>:e with wildmenu enabled</h3></div></div></div><p>Another way to <span>explore</span><a id="id325844915" class="indexterm"></a> file trees is to use the <code class="literal">set wildmenu</code> option in your <code class="literal">.vimrc</code> file. This option sets an autocomplete menu to operate in enhanced mode, showing possible autocomplete options above the status line. With <code class="literal">wildmenu</code> enabled, type in <code class="literal">:e</code> (followed by a space) and hit <span class="emphasis"><em>Tab</em></span>. This will bring up a list of files in the current directory, and you can use the <span class="emphasis"><em>Tab</em></span> key to iterate through these and <span class="emphasis"><em>Shift </em></span>+ <span class="emphasis"><em>Tab</em></span> to move backward (the left and right arrow keys perform the same function):</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/8b1be0f0-dbfb-4d27-ab6a-0e773741928d.png" /></div><p>Pressing <span class="emphasis"><em>Enter</em></span> will open the selected file or directory. The down arrow allows you to drill down into directory under cursor, and the up arrow takes you back up a level.</p><p>This also works with partial paths, and entering <code class="literal">:e &lt;beginning_of_filename&gt;</code> followed by a <span class="emphasis"><em>Tab</em></span> key invokes <code class="literal">wildmenu</code> as well.</p><p>My <code class="literal">.vimrc</code> file has the following in it:</p><pre class="programlisting">set wildmenu                    " Enable enhanced tab autocomplete.
set wildmode=list:longest,full  " Complete till longest string,
                                " then open the wildmenu.</pre><p>This allows you to autocomplete the path to the longest match possible (and display a list of <span>possible</span><a id="id325845020" class="indexterm"></a> completion options) on a first <span class="emphasis"><em>Tab</em></span> press, and traverse through files with <code class="literal">wildmenu</code> on a second <span class="emphasis"><em>Tab</em></span> press.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec17"></a>Plugin spotlight – NERDTree</h3></div></div></div><p>NERDTree is a handy plugin that <span>emulates</span><a id="id325850086" class="indexterm"></a> modern IDE behavior by <span>displaying</span><a id="id325850094" class="indexterm"></a> a file tree in a split <span>buffer</span><a id="id325850103" class="indexterm"></a> to the side of the screen. NERDTree is available from <a class="ulink" href="https://github.com/scrooloose/nerdtree.git" target="_blank">https://github.com/scrooloose/nerdtree</a> (see <span class="emphasis"><em>Installing Plugins</em></span> earlier in this chapter for installation instructions). </p><p>Once installed, you can invoke NERDTree by typing the following:</p><pre class="programlisting"><span class="strong"><strong>:NERDTree</strong></span></pre><p>A list of files in a directory will show up:</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/307eec86-0abf-4240-8885-a12e838b033d.png" /></div><p>Use <code class="literal">h</code>, <code class="literal">j</code>, <code class="literal">k</code>, and <code class="literal">l</code> or the arrow keys to navigate the file structure, and <span class="emphasis"><em>Enter</em></span> or <code class="literal">o</code> to open the file. There are multiple useful shortcuts, and <span class="emphasis"><em>Shift </em></span>+ <span class="emphasis"><em>?</em></span> brings up a handy cheat sheet.</p><p>A notable feature is bookmark support, which allows you to bookmark a directory (when placing the cursor over it in NERDTree) by executing <code class="literal">:Bookmark</code>. Press <code class="literal">B</code> when in a NERDTree window to display bookmarks at the top of the window.</p><p>In the following screenshot, you can see the bookmarks I have for code that supports chapters of this book (the <code class="literal">Chapter01/</code> and <code class="literal">Chapter02/</code> directories):</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/51d61382-9ea5-4901-bc71-482da1d88e23.png" /></div><p>You can choose to always display bookmarks in a NERDTree window by setting the <code class="literal">NERDTreeShowBookmarks</code> option in your <code class="literal">.vimrc</code> file:</p><pre class="programlisting">let NERDTreeShowBookmarks = 1  " Display bookmarks on startup.</pre><p>You can bring NERDTree up or hide it by executing <code class="literal">:NERDTreeToggle</code>. If you're interested in having NERDTree up every time you're editing, you might want to add the following to your<code class="literal">.vimrc</code> file:</p><pre class="programlisting">autocmd VimEnter * NERDTree  " Enable NERDTree on Vim startup.</pre><p>Something I personally found really useful is to close the NERDTree window automatically when it's the last open window. I have the following in my<code class="literal">.vimrc</code> file:</p><pre class="programlisting">" Autoclose NERDTree if it's the only open window left.
autocmd bufenter * if (winnr("$") == 1 &amp;&amp; exists("b:NERDTree") &amp;&amp;
  \ b:NERDTree.isTabTree()) | q | endif</pre><p>These days, I rarely find myself using NERDTree. Before switching to Vim, I often <span>relied</span><a id="id325907914" class="indexterm"></a> on having a project outline in the view when I worked. In my early days of learning Vim, NERDTree was a lifesaver. Vim changed the way I work and having a file outline always on became distracting, so eventually I moved back to using Netrw.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec18"></a>Plugin spotlight – Vinegar</h3></div></div></div><p>Tim Pope's <code class="literal">vinegar.vim</code> is a simple plugin that addresses the <span>difficulty</span><a id="id325907940" class="indexterm"></a> of using <span>project</span><a id="id325907949" class="indexterm"></a> drawers with Vim split window functionality. Plugins such as NERDTree become rather disorienting to work with when you have more than one window open in a split.</p><p>In the following example, three windows are open (and a fourth NERDTree window on the left): </p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/df606259-0637-42c2-9d4a-d1258d485d79.png" /></div><p> When pressing <span class="emphasis"><em>Enter</em></span> with the cursor in the NERDTree window, which window will the new file be opened in?</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip52"></a>Note</h3><p>Hint: it's the bottom left one—but you don't have a way of knowing that. NERDTree opens files in the last created window.</p></div><p>Tim Pope solves this problem with a small plugin called <span class="strong"><strong>Vinegar</strong></span>, which makes using Netrw a more <span>seamless</span><a id="id326086414" class="indexterm"></a> experience. It's available over at <a class="ulink" href="https://github.com/tpope/vim-vinegar.git" target="_blank">https://github.com/tpope/vim-vinegar</a> (see <span class="emphasis"><em>Installing plugins</em></span> for installation instructions). </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip53"></a>Note</h3><p>If you have NERDTree installed when using Vinegar, you'll get a NERDTree window instead of Netrw. To avoid NERDTree replacing Netrw (and to make commands like - work), set <code class="literal">let NERDTreeHijackNetrw = 0</code> in your <code class="literal">.vimrc</code> file.</p></div><p>Vinegar adds a handy new mapping: <code class="literal">-</code> (dash) to open Netrw in a current directory. Try it out:</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/8a5eab6f-a1c5-437b-aced-cf3148891c94.png" /></div><p>The plugin hides Netrw's help bar, which might be confusing at first. Hit <span class="emphasis"><em>I</em></span> (uppercase <code class="literal">i</code>) to bring it back. Another shortcut, <span class="emphasis"><em>Shift </em></span>+ <span class="emphasis"><em>~</em></span> key, takes you to your home <code class="literal">directory</code>, which is often where you'll store your projects.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec19"></a>Plugin spotlight – CtrlP</h3></div></div></div><p>CtrlP is a fuzzy <span>completion</span><a id="id326200694" class="indexterm"></a> plugin that helps you open the files <span>you</span><a id="id326200702" class="indexterm"></a> need quickly, given that you somewhat know what you're looking for. CtrlP is available from <a class="ulink" href="https://github.com/ctrlpvim/ctrlp.vim.git" target="_blank">https://github.com/ctrlpvim/ctrlp.vim</a> (see the <span class="emphasis"><em>Installing plugins</em></span> section earlier in this chapter for installation instructions). </p><p>Install it and hit <span><span class="emphasis"><em>Ctrl </em></span>+ <span class="emphasis"><em>p</em></span></span>:</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/ae8b5863-de30-4337-8e62-3b2df576a2f2.png" /></div><p>This shows the list of files in the project directory. Type in a partial filename or a path, and the list of files will narrow down to string matches. You can use <span class="emphasis"><em>Ctrl </em></span>+ j and <span class="emphasis"><em>Ctrl </em></span>+ k to navigate up and down the list, and <span class="emphasis"><em>Enter</em></span> to open the file. <span class="emphasis"><em>Esc</em></span> closes the CtrlP window.</p><p>CtrlP also allows you to navigate through buffers and most recently used files. With the CtrlP window open, you can use <span class="emphasis"><em>Ctrl + f</em></span> and <span class="emphasis"><em>Ctrl </em></span>+ <span class="emphasis"><em>b</em></span> to cycle through the available options.</p><p>You can invoke these directly by executing <code class="literal">:CtrlPBuffer</code> for buffers and <code class="literal">:CtrlPMRU</code> for the most recently used ones. You can also use <code class="literal">:CtrlPMixed</code> to search through files, buffers, and the most recently used files at the same time.</p><p>You can also add custom mappings for these to your <code class="literal">.vimrc</code> file. For example, to map <span class="emphasis"><em>Ctrl </em></span>+ <span class="emphasis"><em>b</em></span> to <code class="literal">:CtrlPBuffer</code>, you could do the following:</p><pre class="programlisting">nnoremap &lt;C-b&gt; :CtrlPBuffer&lt;cr&gt;  " Map CtrlP buffer mode to <span class="emphasis"><em>Ctrl </em></span>+ <span class="emphasis"><em>B</em></span>.</pre></div></div>