<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch01lvl1sec11"></a>Installation</h2></div></div><hr /></div><p>Vim is available on every platform, and <span>comes</span><a id="id326352562" class="indexterm"></a> installed on Linux and Mac OS (however, you may want to upgrade Vim to a more recent version). Find your system in the following paragraphs, and skim through the instructions to set up.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec3"></a>Setting up on Linux</h3></div></div></div><p>Linux machines come with Vim installed, which is great news! However, it might be rather out of date, and Vim 8 introduces some much-needed optimizations. Pull up your <span>Command</span><a id="id326575656" class="indexterm"></a> Prompt, and run the <span>following</span><a id="id326575680" class="indexterm"></a> code:</p><pre class="programlisting"><span class="strong"><strong>$ git clone https://github.com/vim/vim.git</strong></span>
<span class="strong"><strong>$ cd vim/src</strong></span>
<span class="strong"><strong>$ make</strong></span>
<span class="strong"><strong>$ sudo make install</strong></span></pre><p> </p><p> </p><p> </p><p> </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note4"></a>Note</h3><p>If you're running into issues as you're installing Vim, you might be missing some dependencies. If you're using a Debian-based distribution, the following command should add common missing dependencies : $ sudo apt-get install make build-essential libncurses5-<code class="literal">$ sudo apt-get install make build-essential libncurses5-dev 
  libncursesw5-dev --fix-missing</code></p></div><p>This will make sure you’re on the latest major and minor patch of Vim. If you don’t care for being on the cutting edge, you can also update Vim using a package manager of your choice. Different Linux distributions use different package managers; the following list includes some common ones:</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; "><colgroup><col /><col /></colgroup><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p><span class="strong"><strong>Distribution</strong></span></p></td><td style="border-bottom: 0.5pt solid ; "><p><span class="strong"><strong>Command to install the latest version of Vim</strong></span></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Debian-based (Debian, Ubuntu, Mint)</p></td><td style="border-bottom: 0.5pt solid ; "><p><code class="literal">$ sudo apt-get update </code></p><p><code class="literal"> $ sudo apt-get install vim-gtk</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>CentOs (and Fedora prior to Fedora 22)</p></td><td style="border-bottom: 0.5pt solid ; "><p><code class="literal">$sudo yum check-update</code></p><p><code class="literal">$sudo yum install vim-enhanced</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Fedora 22+</p></td><td style="border-bottom: 0.5pt solid ; "><p><code class="literal">$sudo dnf check-update </code></p><p><code class="literal">$sudo dnf install vim-enhanced</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>Arch</p></td><td style="border-bottom: 0.5pt solid ; "><p><code class="literal">$sudo pacman -Syu</code></p><p><code class="literal">$sudo pacman -S gvim</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; "><p>FreeBSD</p></td><td style=""><p><code class="literal">$sudo pkg update</code></p><p><code class="literal">$sudo pkg install vim</code></p></td></tr></tbody></table></div><p> </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip5"></a>Note</h3><p>You can see in the preceding table that Vim uses package names for different repositories. Packages like <code class="literal">vim-gtk</code> on Debian-based distributions or<code class="literal">vim-enhanced</code>on CentOS come with more features enabled (like GUI support for instance).</p></div><p>Do keep in mind that package manager repositories tend to lag behind from anywhere between a few months to a few years.</p><p>That’s it, you’re now ready to dive into the world of Vim! You can start the editor by typing the following command:</p><pre class="programlisting"><span class="strong"><strong>$ vim</strong></span></pre><p>On modern systems, you can also start Vim by invoking <code class="literal">vi</code>. However, it's not always the case: on older systems the two are different binaries. Vi is <span class="strong"><strong>Vim</strong></span>’s predecessor (Vim stands for <span class="strong"><strong>Vi improved</strong></span>). Today, it’s <span>merely</span><a id="id326308083" class="indexterm"></a> an alias pointing to Vim. There are no reasons to use Vi over Vim, unless, for some reason, you're unable to install the latter.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec4"></a>Setting up on MacOS</h3></div></div></div><p>MacOS comes prepackaged with Vim, but the <span>version</span><a id="id326308096" class="indexterm"></a> can be outdated. There are a <span>few</span><a id="id326308104" class="indexterm"></a> ways to install a fresh version of Vim, and this book will cover two. First, you can install Vim using Homebrew, a package manager for MacOS. You'll have to install Homebrew first, though. Second, you can download a <code class="literal">.dmg</code> image of MacVim. This experience would be more familiar because Mac users are used to the visual interface.</p><p>Since this book covers interactions with the <span>Command line</span><a id="id326308118" class="indexterm"></a>, I recommend taking the Homebrew route. But you're welcome to go forward with installing the image if interacting with the Command line does not interest you.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec0"></a>Using Homebrew</h4></div></div></div><p>Homebrew is a third-party package manager for MacOS which makes it easy to install and keep packages up to date. Instructions on how to install <span>Homebrew</span><a id="id326308133" class="indexterm"></a> are available on <a class="ulink" href="https://brew.sh/" target="_blank">https://brew.sh</a>, and, as of the moment of writing this book, consist of a single line <span>executed</span><a id="id326308146" class="indexterm"></a> in the following Command line:</p><pre class="programlisting"><span class="strong"><strong>$ /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"</strong></span></pre><p>The following screenshot shows the list of operations you will then see Homebrew perform during installation:</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/2bec1153-a453-446c-a475-14a9f710ac67.png" /></div><p>Hit Enter to continue.</p><p> </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note6"></a>Note</h3><p>If you don't have XCode installed (which is often a prerequisite for any kind of development-related activity on Mac), you'll get an XCode installation pop-up. We won't be using XCode directly, and you can install it with default settings.</p></div><p>This should take a while to run, but you'll have Homebrew installed by the end: a fantastic tool you can use to install a lot more than Vim! You'll see <strong class="userinput"><code>Installation successful!</code></strong> in bold font once the installation is complete.</p><p>Let's install a new version of Vim now using the following command:</p><pre class="programlisting"><span class="strong"><strong>$ brew install vim</strong></span></pre><p>Homebrew will install all the necessary dependencies too, so you won't have to worry about a thing, as can be seen in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/5f466b98-1022-46f6-ac89-b34c1db70abf.png" /></div><p></p><p>If you already have Homebrew installed, and you have installed <span>Vim</span><a id="id326308621" class="indexterm"></a> in the past, the preceding command will produce an error. You may want to make sure you have the last version of Vim, though, so run the following command:</p><pre class="programlisting"><span class="strong"><strong>$ brew upgrade vim</strong></span></pre><p>You should now be ready to enjoy Vim; let's try opening it with the following command:</p><pre class="programlisting"><span class="strong"><strong>$ vim</strong></span></pre><p>Welcome to Vim:</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/2d4cd1a6-26ca-43ea-b6bd-76a4a8d1f742.png" /></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec1"></a>Downloading a .dmg image</h4></div></div></div><p>Navigate to <a class="ulink" href="https://github.com/macvim-dev/macvim/releases/latest" target="_blank">https://github.com/macvim-dev/macvim/releases/latest</a> and download <code class="literal">MacVim.dmg</code>.</p><p>Open <code class="literal">MacVim.dmg</code>, and then drag the <span>Vim</span><a id="id326324481" class="indexterm"></a> icon into the <code class="literal">Applications</code> directory, as can be seen in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/ca8d5d60-6b74-497d-b1eb-a53570b37787.png" /></div><p></p><p>Depending on the security settings of your Mac, you might be greeted by an error when navigating to the <code class="literal">Applications</code> folder and trying to open the <code class="literal">MacVim</code> app, as demonstrated in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/ab3fbcc4-b4b7-4223-bb80-9e5136b76e9d.png" /></div><p>Open your <code class="literal">Applications</code> folder, find <code class="literal">MacVim</code>, right click the icon and select <strong class="userinput"><code>Open</code></strong>. The following prompt will pop up:</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/600e5e77-602f-4092-be50-11c0371b950f.png" /></div><p></p><p>Now hit <strong class="userinput"><code>Open</code></strong>, and <code class="literal">MacVim</code> can be opened as <span>usual</span><a id="id326330868" class="indexterm"></a> from now on. Give it a shot:</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/a5c36780-9496-4c40-8dcd-85129909c3a6.png" /></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec5"></a>Setting up on Windows</h3></div></div></div><p>Windows provides two primary routes for using Vim: setting up Cygwin and providing a more Unix-like command-line experience, or installing <span class="strong"><strong>gVim</strong></span>—a <span class="strong"><strong>graphical version of Vim</strong></span> (which supports working with <code class="literal">cmd.exe</code> on Windows). I recommend installing both and picking your favorite: gVim feels slightly <span>more</span><a id="id326340019" class="indexterm"></a> at home on Windows (and it is easier to install), while Cygwin might feel more at <span>home</span><a id="id326340027" class="indexterm"></a> if you're used to the Unix shell.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec2"></a>Unix-like experience with Cygwin</h4></div></div></div><p>Cygwin is a Unix-like environment and a command-line interface for Windows. It aims to <span>bring</span><a id="id326340042" class="indexterm"></a> powerful Unix shell and supporting tools to a Windows machine.</p><p> </p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="ch01lvl4sec0"></a>Installing Cygwin</h5></div></div></div><p>To begin the <span>installation</span><a id="id326340060" class="indexterm"></a> process, navigate to <a class="ulink" href="https://cygwin.com/install.html" target="_blank">https://cygwin.com/install.html</a> and download either <code class="literal">setup-x86_64.exe</code> or <code class="literal">setup-x86.exe</code> depending on the version of Windows you're using (64 bit or 32 bit respectively).</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip7"></a>Note</h3><p>If you're not sure whether your system is 32 bit or 64 bit, you can open <strong class="userinput"><code>Control Panel | </code></strong><strong class="userinput"><code>System and Security | </code></strong><strong class="userinput"><code>System</code></strong>, and look at <strong class="userinput"><code>System type</code></strong>. For example, my Windows machine shows <strong class="userinput"><code>System type: 64-bit Operating System, x64-based processor</code></strong>.</p></div><p>Open the executable file, and you will be greeted by the following Cygwin installation window:</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/8d3f4d30-babc-47d9-a304-9d8f99962624.png" /></div><p></p><p>Hit <strong class="userinput"><code>Next &gt;</code></strong> a few times, proceeding with the default settings:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><strong class="userinput"><code>Download source</code></strong>: <strong class="userinput"><code>I</code></strong><strong class="userinput"><code>nstall from Internet</code></strong></li><li style="list-style-type: disc"><strong class="userinput"><code>Root directory</code></strong>: <code class="literal">C:\cygwin64</code> (or a recommended default)</li><li style="list-style-type: disc"><strong class="userinput"><code>Install for:</code></strong><strong class="userinput"><code>all users</code></strong></li><li style="list-style-type: disc"><strong class="userinput"><code>Local package directory:</code></strong><code class="literal">C:\Downloads</code> (or a recommended default)</li><li style="list-style-type: disc"><strong class="userinput"><code>Internet connection:</code></strong> <strong class="userinput"><code>U</code></strong><strong class="userinput"><code>se System Proxy Settings</code></strong></li><li style="list-style-type: disc"><strong class="userinput"><code>Download site:</code></strong><code class="literal">http://cygwin.mirror.constant.com</code> (or any available option)</li></ul></div><p>After this, you will be greeted with the <strong class="userinput"><code>Select Packages</code></strong> screen. Here, we want to select the <code class="literal">vim</code>, <code class="literal">gvim</code>, and <code class="literal">vim-doc</code> packages. The easiest way to do this is to type <code class="literal">vim</code> in a search box, expand the <strong class="userinput"><code>All</code></strong> |<strong class="userinput"><code>Editors</code></strong> category, and click on the arrow-looking icons next to the desired packages, as demonstrated in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/268318aa-c707-4191-ac77-dc754258f795.png" /></div><p></p><p>The preceding screenshot shows version <span class="strong"><strong>8.0.1567-1</strong></span>. This is the only version available at the moment of writing this book, November 2018. The primary difference is the absence of the <code class="literal">:terminal</code> command (see <a class="link" href="#" linkend="ch05">Chapter 5</a>, <span class="emphasis"><em>Build, Test, and Execute</em></span>) in Vim 8.0 vs 8.1.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip8"></a>Note</h3><p>You may want to install <code class="literal">curl</code> from under the Net category, and <code class="literal">git</code> from under the Devel category, as we'll be using both in chapter 3. It might also be helpful to install <code class="literal">dos2unix</code> from under the Utils category, which is a utility used for converting Windows-style line endings to Linux-style line endings (something you might run into once in a while).</p></div><p>Hit <strong class="userinput"><code>Next &gt;</code></strong> two more times to proceed, which will begin the installation. Installation will take some time, and now would be a great moment to prematurely congratulate yourself with some coffee!</p><p>You might get a few post-install script errors, which you can safely dismiss (unless you see any errors related to Vim—then Google is your friend: search for an error text and try to find a solution).</p><p>Hit <strong class="userinput"><code>Next &gt;</code></strong> a few more times, proceeding with the defaults:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><strong class="userinput"><code>Create icon on <strong class="userinput"><code>Desktop</code></strong></code></strong></li><li style="list-style-type: disc"><strong class="userinput"><code>Add icon to <strong class="userinput"><code>Start Menu</code></strong></code></strong></li></ul></div><p>Congratulations, you now have Cygwin installed with Vim!</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip9"></a>Note</h3><p>If you ever need to install additional packages in Cygwin, just rerun the installer while selecting the packages you want.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="ch01lvl4sec1"></a>Using Cygwin</h5></div></div></div><p>Open Cygwin, the program will be <span>called</span><a id="id326407144" class="indexterm"></a><strong class="userinput"><code>Cygwin64 Terminal</code></strong> or <strong class="userinput"><code>Cygwin Terminal</code></strong>, depending on the version of your system, as can be seen in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/d1ba599d-e4a9-4642-8cfb-7e4f58bc1801.png" /></div><p></p><p>Open it! You will see the following prompt, familiar to Linux users:</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/e5f5a5d8-a9b5-4c93-8ea9-154c8d565598.png" /></div><p></p><p>Cygwin supports all of the Unix-style commands we will be using in this book. This book will also say if any commands need to be changed to work with Cygwin. But for now, let's open Vim and proceed onto the next chapter! Type <code class="literal">vim</code> and hit <span class="emphasis"><em>Enter</em></span> to start Vim, as demonstrated in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/4dd2a886-ee2a-4a10-a700-51da7598f57a.png" /></div><p>Cygwin is a way to get a Linux-like shell experience on Windows, meaning you'll have to follow Linux specific instructions throughout this book if you decide to use Cygwin.</p><p>You'll also want to be careful with Windows-style line endings vs Linux-style line endings, as Windows and Linux treat line endings differently. If you run into an odd issue with Vim complaining about <code class="literal">^M</code> characters its unable to recognize, run the <code class="literal">dos2unix</code> utility on the offending file to resolve the issue.</p><p> </p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec3"></a>Visual Vim with gVim</h4></div></div></div><p>In this section. you can read more about the <span>graphical</span><a id="id326450401" class="indexterm"></a> version of Vim in<span class="emphasis"><em>Vanilla</em></span><span class="emphasis"><em> Vim vs GVim</em></span>.As it always is with Windows, the process is slightly more visual. Navigate to<a class="ulink" href="http://www.vim.org/download.php#pc" target="_blank">www.vim.org/download.php#pc</a>in your browser and download an executable installer. At the moment of writing this book, November 2018, the binary is <span>called</span><a id="id326450420" class="indexterm"></a><code class="literal">gvim81.exe</code>, where <code class="literal">81</code> stands for version 8.1.</p><p>Open the executable and follow the prompts on the screen, as demonstrated by the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/bcce884f-628a-429b-b037-2822f2a45135.png" /></div><p>Let's go ahead and hit <strong class="userinput"><code>Yes, </code></strong>then <strong class="userinput"><code>I Agree</code></strong> until we arrive at the <strong class="userinput"><code>Installation Options</code></strong> screen. We're happy with most of the default options gVim has to offer, except that you might want to enable <strong class="userinput"><code>Create .bat files for command line use</code></strong>. This option will make the <code class="literal">vim</code> command work in Windows Command Prompt. Some examples in this book rely on having a Command Prompt, so enabling this option would help you follow along.</p><p> </p><p>Here's a screenshot of the <strong class="userinput"><code>Installation Options</code></strong> screen with the proper boxes checked off:</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/043852e8-d333-41d1-a010-0318820fe3b8.png" /></div><p>Hit <strong class="userinput"><code>Next &gt;</code></strong>. You'll want to continue with the following settings:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><strong class="userinput"><code>Select the type of install</code></strong><strong class="userinput"><code>:</code></strong><code class="literal">Typical</code>, (after <strong class="userinput"><code>Create .bat files for command line use</code></strong> is enabled, type of install value changes to <code class="literal">Custom</code> automatically).</li><li style="list-style-type: disc"><strong class="userinput"><code>Do not remap keys for Windows behavior</code></strong></li><li style="list-style-type: disc"><strong class="userinput"><code>Right button has a popup menu, left button starts visual mode</code></strong></li><li style="list-style-type: disc"><strong class="userinput"><code>Destination Folder:</code></strong><code class="literal">C:\Program Files (x86)\Vim</code> (or a recommended default)</li></ul></div><p>Once you're done, hit <strong class="userinput"><code>Install</code></strong> and then <strong class="userinput"><code>Close</code></strong>, as demonstrated in the following screenshot:</p><p> </p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/1265716d-0e6d-470a-aa24-67743c1d438e.png" /></div><p>Say <strong class="userinput"><code>No</code></strong> to the request to see the <code class="literal">README</code> file (who needs a manual, huh?) as seen in the following command:</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/816b852a-e55b-493b-9b85-dea3df87684d.png" /></div><p>You will now have a few icons pop on your desktop, the most interesting one being <code class="literal">gVim 8.1</code> as shown in the following screenshot:</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/1cee2ae9-5611-4cc5-8cc4-4c6615144d36.png" /></div><p></p><p>Start it, and you're ready to proceed! Happy Vimming!</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec6"></a>Verifying and troubleshooting the installation</h3></div></div></div><p>Regardless of the platform you <span>used</span><a id="id326576100" class="indexterm"></a> to install Vim, it's good to make sure that, with Vim, all the <span>right</span><a id="id326576108" class="indexterm"></a> features enabled. On a command line, run the following command:</p><pre class="programlisting"><span class="strong"><strong>$ vim --version</strong></span></pre><p>You will see the following output, with a set of features having a <code class="literal">+</code> and a <code class="literal">-</code> in front of them:</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/04b15496-c51d-4ef2-b290-a773746ffa16.png" /></div><p> </p><p>In the preceding screenshot, you can see that my Vim was actually compiled with Python 2 support (<code class="literal">+python</code>) instead of Python 3 support (<code class="literal">-python3</code>). To correct the issue, I'd have to either recompile Vim with<code class="literal">+python3</code>enabled or find a package which distributes a compiled version of Vim with<code class="literal">+python3</code>enabled.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip10"></a>Note</h3><p>For a list of all features Vim can have enabled, see <code class="literal">:help feature-list</code>.</p></div><p>For instance, if we wanted to recompile Vim 8.1 with Python 3 support on Linux, we would do the following:</p><pre class="programlisting"><span class="strong"><strong>$ git clone https://github.com/vim/vim.git</strong></span>
<span class="strong"><strong>$ cd vim/src</strong></span>
<span class="strong"><strong>$ ./configure --with-features=huge --enable-python3interp</strong></span>
<span class="strong"><strong>$ make</strong></span>
<span class="strong"><strong>$ sudo make install</strong></span></pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip11"></a>Note</h3><p>We're passing the <code class="literal">--with-features=huge</code> flag in order to compile Vim with most features enabled. However, <code class="literal">--with-features=huge</code> does not install language bindings, so we need to explicitly enable Python 3.</p></div><p>In general, if your Vim is not behaving like other Vim installations (including behavior described in this book), you might be missing a feature.</p><p>Depending on your system and features you require, the process might be slightly or vastly different. A quick web search along the lines of <span class="emphasis"><em>Installing Vim &lt;version&gt; with +&lt;feature&gt; on &lt;operating system&gt;</em></span> should help.</p><p> </p></div></div>