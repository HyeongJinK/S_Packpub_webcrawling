<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch01lvl1sec14"></a>Common operations (or how to exit Vim)</h2></div></div><hr /></div><div class="mediaobject"><img src="/graphics/9781789341096/graphics/92b3a274-f836-4a5f-bdd4-2c9d15c1a006.png" /></div><p>
Tweet source: <a class="ulink" href="https://twitter.com/iamdevloper/status/435555976687923200" target="_blank">https://twitter.com/iamdevloper/status/435555976687923200</a></p><p>We will now focus on interacting with Vim without the use of a mouse or <span>navigational</span><a id="id325844917" class="indexterm"></a> menus. Programming is a focus intensive task on its own. Hunting through context menus is nobody's idea of a good time, and keeping our hands on the home row of your keyboard helps trim constant switching between a keyboard and a mouse.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec7"></a>Opening files</h3></div></div></div><p>First, start your favorite Command Prompt (Terminal in Linux and macOS, Cygwin in Windows). We'll be working on a very basic Python application. For simplicity's sake, let's make a <span>simple</span><a id="id325844900" class="indexterm"></a> square root calculator. Run the following command:</p><pre class="programlisting"><span class="strong"><strong>$ vim animal_farm.py</strong></span></pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note16"></a>Note</h3><p>If you're using gVim—you can open a file by going into a <strong class="userinput"><code>File</code></strong> menu and choosing <strong class="userinput"><code>Open</code></strong>. Sometimes graphical interface is exactly what you need!</p></div><p></p><p>This opens a file named <code class="literal">animal_farm.py</code>. If the file existed, you'd see its contents here, but since it doesn't, we're greeted by an empty screen, as shown in the following example:</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/a59bb9fe-7ab1-4a28-9cbb-1c2dad7c0586.png" /></div><p>You can tell that the file doesn't exist by the <code class="literal">[New File]</code> text next to a file name in the status line at the bottom of the screen. Woohoo! You've just opened your first file with Vim!</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note17"></a>Note</h3><p>Vim's status line often contains a lot of useful information. That's the primary way for Vim to communicate with a user, so do keep an eye out for messages in the status line!</p></div><p></p><p>If you already have Vim open—you can load a file by typing the following, and hitting <span class="emphasis"><em>Enter</em></span>:</p><pre class="programlisting"><span class="strong"><strong>:e animal_farm.py</strong></span></pre><p>You have just executed your first Vim command! Pressing colon character <code class="literal">:</code> enters a command-line mode, which lets you enter a line of text which Vim will interpret as a command. Commands are terminated by hitting the <span class="emphasis"><em>Enter</em></span> key, which allows you to perform various complex operations, as well as accessing your system's Command line. Command <code class="literal">:e</code> stands for <span class="emphasis"><em>edit</em></span>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note18"></a>Note</h3><p>Vim help often refers to the <span class="emphasis"><em>Enter </em></span>key as a <code class="literal">&lt;CR&gt;</code>, which stands for carriage return.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec8"></a>Changing text</h3></div></div></div><p>By default you're in Vim's normal mode, meaning that every <span>key</span><a id="id325899281" class="indexterm"></a> press corresponds to a particular command. Hit <code class="literal">i</code> on your keyboard to enter an insert mode. This will display <strong class="userinput"><code>-- INSERT --</code></strong> in a status line (at the bottom), (and, if you're using gVim, it will change the cursor from a block to a vertical line), as can be seen in the following example:</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/e28ed9d6-e977-40f1-973b-9e6f8e7823c1.png" /></div><p></p><p>The insert mode behaves just like any other modeless editor. Normally, we wouldn't spend a lot of time in insert mode except for adding new text.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note19"></a>Note</h3><p>You've already encountered three of Vim's modes: command-line mode, normal mode, and insert mode. This book will cover more modes, see <a class="link" href="#" linkend="ch03">Chapter 3</a>, <span class="emphasis"><em> Follow the Leader – Plugin Management</em></span><span><span></span></span> for details and explanation.</p></div><p>Let's create our Python application by typing in the following code. We'll be navigating this little snippet throughout this chapter:</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/7d122619-1f3d-4ee0-819d-3be83d8b4448.png" /></div><p></p><p>To get back to normal mode in Vim, hit <span class="emphasis"><em>Esc</em></span> on your keyboard. You'll see that <strong class="userinput"><code>-- INSERT --</code></strong> has disappeared from the status line. Now, Vim is ready to take commands from you again!</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note20"></a>Note</h3><p>The preceding code is not showing Python best practices and is provided to illustrate some of Vim's capabilities.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl2sec9"></a>Saving and closing files</h3></div></div></div><p>Let's save our file! Execute the <span>following</span><a id="id326291195" class="indexterm"></a> command:</p><pre class="programlisting"><span class="strong"><strong>:w</strong></span></pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note21"></a>Note</h3><p>Don't forget to hit <span class="emphasis"><em>Enter </em></span>at the end of a command to execute it.</p></div><p><code class="literal">:w</code> stands for <span class="strong"><strong>write</strong></span>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note22"></a>Note</h3><p>The write command can also be followed by a filename, making it possible to write to a different file, other than the one that is open. This will save the changes in a new file, and will change the current open file to a new one. Try it, using the following command:<code class="literal">:w animal_farm_2.py</code>.</p></div><p>Let's exit Vim and check if the file was indeed created. <code class="literal">:q</code> stands for <span class="strong"><strong>quit</strong></span>. You can also combine write and quit commands to write and exit by executing <code class="literal">:wq</code>.</p><pre class="programlisting"><span class="strong"><strong>:q
</strong></span></pre><p>If you made changes to a file and want to exit Vim without <span>saving</span><a id="id326330435" class="indexterm"></a> the changes, you'll have to use <code class="literal">:q!</code> to force Vim to quit. Exclamation mark at the end of the command forces its execution.</p><p> </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note23"></a>Note</h3><p>Many commands in Vim have shorter and longer versions. For instance, <code class="literal">:e</code>, <code class="literal">:w</code>, and <code class="literal">:q</code> are short versions of <code class="literal">:edit</code>, <code class="literal">:write</code>, and <code class="literal">:quit</code>. In the Vim manual, the optional part of the command is often annotated in square brackets (<code class="literal">[]</code>). For example, <code class="literal">:w[rite]</code> or <code class="literal">:e[dit]</code>.</p></div><p>Now that we're back in our system's Command line, let's check the contents of a current directory, as seen in the following code:</p><pre class="programlisting"><span class="strong"><strong>$ ls</strong></span>
<span class="strong"><strong>$ python3 animal_farm.py</strong></span>
<span class="strong"><strong>$ python3 animal_farm.py cat dog sheep</strong></span></pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note24"></a>Note</h3><p>In Unix, <code class="literal">ls</code> lists contents of a current directory. <code class="literal">python3 animal_farm.py</code> executes the script using a Python 3 interpreter, and <code class="literal">python3 animal_farm.py cat dog sheep</code> passes three arguments <code class="literal">(cat, dog, sheep)</code> to our script.</p></div><p>The following screenshot shows what the three preceding commands should output:</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/7d4a3090-c8ab-46de-827d-a9cd80cc357d.png" /></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl3sec4"></a>A word about swap files</h4></div></div></div><p>By default, Vim keeps track of the <span>changes</span><a id="id326341369" class="indexterm"></a> you make to files in swap files. The swap files are created as you edit the files, and are used to recover the contents of your files in case either Vim, your SSH session, or your machine crashes. If you don't exit Vim cleanly, you'll be greeted by the following screen:</p><p> </p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/c5ddfe83-d558-43e6-a183-b7b2e4cead2a.png" /></div><p>You can either hit <code class="literal">r</code> to recover the swap file contents, or <code class="literal">d</code> to delete the swap file and dismiss the changes. If you decide to recover the swap file, you can prevent the same message from showing up next time you open the file in Vim by reopening a file and running <code class="literal">:e</code>, and pressing <code class="literal">d</code> to delete the swap file.</p><p>By default, Vim creates files like <code class="literal">&lt;filename&gt;.swp</code> and <code class="literal">.&lt;filename&gt;.swp</code> in the same directory as the original file. If you don't like your file system being littered by swap files, you can change this behavior by telling Vim to place all the swap files in a single directory. To do so, add the following to your <code class="literal">.vimrc</code>:</p><pre class="programlisting">set directory=$HOME/.vim/swap//</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip25"></a>Note</h3><p>If you're on Windows, you should use <code class="literal">set directory=%USERDATA%\.vim\swap//</code> (note the direction of the last two slashes).</p></div><p>You can also choose to disable the swap files completely by adding <code class="literal">set noswapfile</code> to your <code class="literal">.vimrc</code>.</p></div></div></div>