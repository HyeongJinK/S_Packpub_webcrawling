<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec22"></a>Organizing workspace</h2></div></div><hr /></div><p>So far, we've only worked with a single file in Vim. When <span>working</span><a id="id325545969" class="indexterm"></a> with code, you usually have to work with multiple files at once, switching back and forth, making edits across multiple files, and looking up certain bits somewhere else. Luckily, Vim provides an extensive way to deal with many files:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">Buffers are the way Vim internally represents files; they allow you to switch between multiple files quickly</li><li style="list-style-type: disc">Windows organize the workspace by displaying multiple files next to each other</li><li style="list-style-type: disc">Tabs are a collection of windows</li><li style="list-style-type: disc">Folds allow you to hide and expand certain portions of files, making large files easier to navigate</li></ul></div><p>Here's a screenshot illustrating the preceding points:</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/216af403-d245-4f2d-b461-0774b551b2b5.png" /></div><p>Let's understand the content in the screenshot:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">Multiple files (labeled <code class="literal">farm.py</code>, <code class="literal">animals/cat.py</code>, and <code class="literal">animal_farm.py</code>) are open as windows</li><li style="list-style-type: disc">The bar at the top (listing <code class="literal">3 farm.py</code> and <code class="literal">a/dog.py</code>) indicates the tabs</li><li style="list-style-type: disc">Lines starting with <code class="literal">+--</code> indicate folds, hiding away portions of a file</li></ul></div><p>This section will go over windows, tabs, and folds in detail, and you'll be able to comfortably work with as many files as you need.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec10"></a>Buffers</h3></div></div></div><p>Buffers are internal representations of files. Every file you open will <span>have</span><a id="id326302878" class="indexterm"></a> a corresponding buffer. Let's open a file from the <span>command</span><a id="id326302887" class="indexterm"></a> line: <code class="literal">vim animal_farm.py</code>. Now, let's see a list of existing buffers:</p><pre class="programlisting"><span class="strong"><strong>:ls</strong></span></pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note36"></a>Note</h3><p>Many commands have synonyms, and <code class="literal">:ls</code> is not an exception: <code class="literal">:buffers</code> and <code class="literal">:files</code> will accomplish the same thing. Pick one that's the easiest for you to remember!</p></div><p>Here's what the output of <code class="literal">:ls</code> looks like (see the bottom three lines):</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/91d1d580-d844-439f-ba87-6f5bbef82143.png" /></div><p>The status bar shows some information about the buffers we have open (we only have one right now):</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><code class="literal">1</code> is the buffer number, and it'll stay constant throughout the Vim session</li><li style="list-style-type: disc"><code class="literal">%</code> indicates that the buffer is in the current window (see the <span class="emphasis"><em>Windows</em></span> section)</li><li style="list-style-type: disc"><code class="literal">a</code> signals that the buffer is active: it's loaded and is visible</li><li style="list-style-type: disc"><code class="literal">"animal_farm.py"</code> is the filename</li><li style="list-style-type: disc"><code class="literal">line 1</code> is the current cursor position</li></ul></div><p>Let's open another file:</p><pre class="programlisting"><span class="strong"><strong>:e animals/cat.py</strong></span></pre><p>You can see that the file we initially opened is nowhere to be seen and has been replaced with the current file. However, <code class="literal">animal_farm.py</code> is still stored in one of the buffers. List all of the buffers again:</p><pre class="programlisting"><span class="strong"><strong>:ls</strong></span></pre><p>You can see both filenames listed:</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/f5d8f155-d1cd-4008-b2af-4781ba30f74e.png" /></div><p>How do we get to the file, then?</p><p>Vim refers to buffers by a number and a name, and both are unique within a single session (until you exit Vim). To switch to a different buffer, use the <code class="literal">:b</code> command, followed by the number of the buffer:</p><pre class="programlisting"><span class="strong"><strong>:b 1</strong></span></pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note37"></a>Note</h3><p>You can shorten the previous by omitting the space between <code class="literal">:b</code> and the buffer number: <code class="literal">:b1</code>.</p></div><p>Voila, you're taken back to the original file! Since buffers are also identified by a filename, you can switch between them using partial filenames. The following will open the buffer containing <code class="literal">animals/cat.py</code>:</p><pre class="programlisting"><span class="strong"><strong>:b cat</strong></span></pre><p>However, if you <span>have</span><a id="id326450398" class="indexterm"></a> more than one match, you'll get an error. Try looking for a buffer with a filename containing <code class="literal">py</code>:</p><pre class="programlisting"><span class="strong"><strong>:b py</strong></span></pre><p>As you can see in the following screenshot, the status line displays an error:</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/1eec3696-34f6-42a6-8a86-6e064a1f1276.png" /></div><p>That's when you can use tab completion to cycle through the available options. Type in <code class="literal">:b py</code> (without hitting <span class="emphasis"><em>Enter</em></span>) and press the <span class="emphasis"><em>Tab</em></span> key to cycle through the available results.</p><p>You can also cycle through buffers using <code class="literal">:bn</code> (<code class="literal">:bnext</code>) and <code class="literal">:bp</code> (<code class="literal">:bprevious</code>).</p><p>Once you're done with the buffer, you can delete it, hence removing it from the list of open buffers without quitting Vim:</p><pre class="programlisting"><span class="strong"><strong>:bd</strong></span></pre><p>This will return an error if the current buffer is not saved. Hence, you'll get a chance to save the file <span>without</span><a id="id326450537" class="indexterm"></a> accidentally deleting the buffer.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec11"></a>Plugin spotlight – unimpaired</h3></div></div></div><p>Tim Pope's vim-unimpaired is a plugin that adds a number of <span>handy</span><a id="id326450550" class="indexterm"></a> mappings for existing Vim commands (and a few new ones). I use it daily, as I find mappings more intuitive—<code class="literal">]b</code> and <code class="literal">[b</code> cycle through <span>open</span><a id="id326450565" class="indexterm"></a> buffers, <code class="literal">]f</code> and <code class="literal">[f</code> cycle through files in a directory, and so on. It's available from GitHub at <a class="ulink" href="https://github.com/tpope/vim-unimpaired" target="_blank">https://github.com/tpope/vim-unimpaired</a> (see the <span class="emphasis"><em>Installing plugins</em></span> section earlier in this chapter for installation instructions).</p><p>Here are some of the mappings vim-unimpaired provides:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p><code class="literal">]b</code> and <code class="literal">[b</code> cycle through buffers</p></li><li style="list-style-type: disc"><p><code class="literal">]f</code> and <code class="literal">[f</code> cycle through files in the same directory as the current buffer</p></li><li style="list-style-type: disc"><p><code class="literal">]l</code> and <code class="literal">[l</code> cycle through the location list (see the <span class="emphasis"><em>Location List</em></span> section in<span class="emphasis"><em> </em></span><a class="link" href="#" linkend="ch05">Chapter 5</a><span class="emphasis"><em>, Build, Test, and Execute</em></span>)</p></li><li style="list-style-type: disc"><p><code class="literal">]q</code> and <code class="literal">[q</code> cycle through the quickfix list (see the <span class="emphasis"><em>Quickfix list</em></span> section in <a class="link" href="#" linkend="ch05">Chapter 5</a>, <span class="emphasis"><em>Build, Test, and Execute</em></span>)</p></li><li style="list-style-type: disc"><p><code class="literal">]t</code> and <code class="literal">[t</code> cycle through tags (see the <span class="emphasis"><em>Meet Exuberant Ctags</em></span> section in <a class="link" href="#" linkend="ch04">Chapter 4</a>, <span class="emphasis"><em>Understanding the Text</em></span>)</p></li></ul></div><p>The plugin also allows you to toggle certain options with just a few key presses, such as <code class="literal">yos</code> to toggle spell checking or <code class="literal">yoc</code> to toggle the cursor line highlighting.</p><p>See <code class="literal">:help unimpaired</code> for a full list of mappings and features that vim-unimpaired provides.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec12"></a>Windows</h3></div></div></div><p>Vim loads buffers into windows. You can have <span>multiple</span><a id="id326510801" class="indexterm"></a> windows open on the <span>screen</span><a id="id326510809" class="indexterm"></a> at the same time, allowing for split screen functionality.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl3sec5"></a>Creating, deleting, and navigating windows</h4></div></div></div><p>Let's give <span>working</span><a id="id326510824" class="indexterm"></a> with windows a shot. Open <code class="literal">animal_farm.py</code> (either from a <span>command</span><a id="id326517971" class="indexterm"></a> line by running <code class="literal">$ vim animal_farm.py</code> or from Vim with <code class="literal">:e animal_farm.py</code>).</p><p>Open one of our files in a <span>split</span><a id="id326517988" class="indexterm"></a> window:</p><pre class="programlisting"><span class="strong"><strong>:split animals/cat.py</strong></span></pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note38"></a>Note</h3><p>You can shorten this command to <code class="literal">:sp</code>.</p></div><p>You can see that <code class="literal">animals/cat.py</code> was opened above the current file and that your cursor was placed there:</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/68a9e44c-b9a0-461f-a35f-371a40ce38d4.png" /></div><p>You can split the window vertically as well by running the following code:</p><pre class="programlisting"><span class="strong"><strong>:vsplit farm.py</strong></span></pre><p>As you can see, this creates another window in a vertical split (your cursor is now moved to the new window):</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/12c0477a-b239-4531-9467-363b5d37b911.png" /></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note39"></a>Note</h3><p><code class="literal">:vs</code> is a shorter version of the <code class="literal">:vsplit</code> command.</p></div><p>You can combine the <code class="literal">:split</code> and <code class="literal">:vsplit</code> commands indefinitely to create as many windows as you need.</p><p>All of the commands you've learned so far will function as usual within this window, including changing buffers. To move between the windows, use <span class="emphasis"><em>Ctrl </em></span>+ <span class="emphasis"><em>w</em></span>, followed by a directional key: <code class="literal">h</code>, <code class="literal">j</code>, <code class="literal">k</code>, or <code class="literal">l</code>. Arrow keys work as well.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip40"></a>Note</h3><p>If you use windows a lot, you might benefit from binding <span class="emphasis"><em>Ctrl </em></span>+ <span class="emphasis"><em>h</em></span> to go to the split to the left, <span class="emphasis"><em>Ctrl </em></span>+ <span class="emphasis"><em>j</em></span> to go to the split at the bottom, and so on. Add the following to your <code class="literal">.vimrc</code> file:<code class="literal">" Fast split navigation with &lt;Ctrl&gt; + hjkl.</code><code class="literal">noremap &lt;c-h&gt; &lt;c-w&gt;&lt;c-h&gt;</code><code class="literal">noremap &lt;c-j&gt; &lt;c-w&gt;&lt;c-j&gt;</code><code class="literal">noremap &lt;c-k&gt; &lt;c-w&gt;&lt;c-k&gt;</code><code class="literal">noremap &lt;c-l&gt; &lt;c-w&gt;&lt;c-l&gt;</code></p></div><p>Give it a shot: <span class="emphasis"><em>Ctrl </em></span>+ <span class="emphasis"><em>w </em></span> followed by <code class="literal">j</code> will move you to the window below, and <span class="emphasis"><em>Ctrl </em></span>+ <span class="emphasis"><em>w, </em></span><code class="literal">k</code> will move the cursor back up.</p><p>You can close the split window in one of the following ways:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p><span><span class="emphasis"><em>Ctrl </em></span>+ <span class="emphasis"><em>w</em></span>, followed by </span><code class="literal">q</code> will close the current window</p></li><li style="list-style-type: disc"><code class="literal">:q</code> will close the window and unload the buffer; however, this will close Vim if you only have one <span>window</span><a id="id326535437" class="indexterm"></a> open</li><li style="list-style-type: disc"><code class="literal">:bd</code> will delete the current buffer and close the <span>current</span><a id="id326575968" class="indexterm"></a> window</li><li style="list-style-type: disc"><p><span class="emphasis"><em>Ctrl </em></span>+ <span class="emphasis"><em>w, </em></span>followed by <code class="literal">o</code> (or the <code class="literal">:only</code> or <code class="literal">:on</code> command) will close all windows except for the current one</p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note41"></a>Note</h3><p>When you have multiple windows open, you can quit them all and exit Vim by executing <code class="literal">:qa</code>. This can be combined with the <code class="literal">:w</code> command to save every open file and quit: <code class="literal">:wqa</code>.</p></div><p>If you want to close a buffer without closing the <span>window</span><a id="id326576011" class="indexterm"></a> it's in, you can add the following command to your <code class="literal">.vimrc</code> file:</p><pre class="programlisting"><span class="strong"><strong>command! Bd :bp | :sp | :bn | :bd  " Close buffer without closing window.</strong></span></pre><p>You'll be able to use <code class="literal">:Bd</code> to close the buffer while keeping a split window open.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl3sec6"></a>Moving windows</h4></div></div></div><p>Windows can also be moved, swapped, and resized. Since there's no drag-and-drop functionality in Vim, there are <span>some</span><a id="id326576282" class="indexterm"></a> commands you will have to remember.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note42"></a>Note</h3><p>You don't have to remember all of these commands, as long as you know what window operations are supported. <code class="literal">:help window-moving</code> and <code class="literal">:help window-resize</code> will take you to the corresponding entries in the Vim manual when you inevitably forget the shortcuts.</p></div><p>As with the rest of the window commands, these are prefixed by <span class="emphasis"><em>Ctrl </em></span>+ <span class="emphasis"><em>w</em></span>.</p><p><span class="emphasis"><em>Ctrl </em></span>+ <span class="emphasis"><em>w </em></span>followed, by an uppercase movement key (<code class="literal">H</code>, <code class="literal">J</code>, <code class="literal">K</code>, or <code class="literal">L</code>) will move the current window to the corresponding position:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><span class="emphasis"><em>Ctrl </em></span>+ w,<span class="emphasis"><em> </em></span><code class="literal">H</code> moves the current window to the leftmost part of the screen</li><li style="list-style-type: disc"><span><span class="emphasis"><em>Ctrl </em></span>+ <span class="emphasis"><em>w,</em></span> </span><code class="literal">J</code> moves the current window to the bottom of the screen</li><li style="list-style-type: disc"><span class="emphasis"><em>Ctrl </em></span>+ <span class="emphasis"><em>w,</em></span> <code class="literal">K</code> moves the current window to the top of the screen</li><li style="list-style-type: disc"><span class="emphasis"><em>Ctrl </em></span>+ <span class="emphasis"><em>w,</em></span> <code class="literal">L</code> moves the current window to the rightmost part of the screen</li></ul></div><p>For example, let's start with the following window layout (which was achieved by opening <code class="literal">animal_farm.py</code> and running <code class="literal">:sp animals/cat.py</code>, followed by <code class="literal">:vs farm.py</code>):</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/5017f803-35fe-46d3-8f19-f10b4ce3009e.png" /></div><p>Note the cursor position (in <code class="literal">animals/cat.py</code>). Here's what happens when we try to move the window containing the<code class="literal">animals/cat.py</code>buffer in each direction:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p><span class="emphasis"><em>Ctrl </em></span>+ <span class="emphasis"><em>w,</em></span> <code class="literal">H</code> migrates <code class="literal">animals/cat.py</code> all the way to the left:</p></li></ul></div><div class="mediaobject"><img src="/graphics/9781789341096/graphics/24c0edcb-399c-4766-bc6b-bcd98ead4bd9.png" /></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p><span class="emphasis"><em>Ctrl </em></span>+ <span class="emphasis"><em>w,</em></span><code class="literal">J</code> moves <code class="literal">animals/cat.py</code> to the bottom of the screen, turning a vertical split into a horizontal split:</p></li></ul></div><div class="mediaobject"><img src="/graphics/9781789341096/graphics/c280f672-a4aa-4adf-847a-cffc4df580b1.png" /></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><p><span class="emphasis"><em>Ctrl </em></span>+ <span class="emphasis"><em>w,</em></span> <code class="literal">K</code> moves <code class="literal">animals/cat.py</code> to the top of <span>the</span><a id="id326616731" class="indexterm"></a> screen:</p></li></ul></div><div class="mediaobject"><img src="/graphics/9781789341096/graphics/824f86cc-9b7a-4632-b72a-e611123ad457.png" /></div><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><span class="emphasis"><em>Ctrl </em></span>+ <span class="emphasis"><em>w,</em></span> <code class="literal">L</code> moves <code class="literal">animals/cat.py</code> to the right of the screen:</li></ul></div><div class="mediaobject"><img src="/graphics/9781789341096/graphics/c5cd0dfe-1b50-450a-bdc5-ccee5e39dbad.png" /></div><p>You can change the contents of each window by simply navigating to it and selecting the desired buffer using the <code class="literal">:b</code> command. There are, however, options for swapping window contents:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><span class="emphasis"><em>Ctrl </em></span>+ <span class="emphasis"><em>w</em></span>, <code class="literal">r</code> moves every window within the row or the column (whichever is available—rows are given preference over columns) to the right or downward. <span class="emphasis"><em>Ctrl </em></span>+ <span class="emphasis"><em>w</em></span>, <code class="literal">R</code><span class="emphasis"><em> </em></span>performs the same operation in reverse.</li><li style="list-style-type: disc"><span class="emphasis"><em>Ctrl + w</em></span>,<span class="emphasis"><em> </em></span><code class="literal">x</code>exchanges the contents of a window with <span>the</span><a id="id326616821" class="indexterm"></a> next one (or a previous one if it's considered a last window).</li></ul></div><p></p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note43"></a>Note</h3><p>Internally, Vim refers to windows by number. However, unlike with buffers, the numbers change as your window layout adjusts, and there is no straightforward way to surface window numbers. Some window management commands take the window number as an argument, but this book will not be covering these. For reference, windows are numbered top to bottom, left to right.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl3sec7"></a>Resizing windows</h4></div></div></div><p>Default 50/50 window <span>proportions</span><a id="id326616842" class="indexterm"></a> might not be exactly what you're looking for, and there are some options for changing sizes.</p><p><span><span class="emphasis"><em>Ctrl </em></span>+ <span class="emphasis"><em>w </em></span>followed by <code class="literal">=</code></span> will equalize the height and width of all open windows. This is really useful when you just resized the Vim window and the height of your windows got all messed up.</p><p>The <code class="literal">:resize</code> command increases or decreases the height of a current window, while <code class="literal">:vertical resize</code> will adjust the width of the window. You can use these as follows:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><code class="literal">:resize +N</code> will increase the height of a current window by <code class="literal">N</code> rows</li><li style="list-style-type: disc"><code class="literal">:resize -N</code> will decrease the height of a current window by <code class="literal">N</code> rows</li><li style="list-style-type: disc"><code class="literal">:vertical resize +N</code> will increase the width of a current window by <code class="literal">N</code> columns</li><li style="list-style-type: disc"><code class="literal">:vertical resize -N</code> will decrease the width of a current window by <code class="literal">N</code> columns</li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note44"></a>Note</h3><p><code class="literal">:resize</code> and <code class="literal">:vertical resize</code> can be shortened to <code class="literal">:res</code> and <code class="literal">:vert res</code>. There are also keyboard shortcuts for changing the height and width by one: <span class="emphasis"><em>Ctrl </em></span>+ w, <code class="literal"><span class="emphasis"><em>-</em></span></code> and <span class="emphasis"><em>Ctrl </em></span>+ w, <code class="literal">+</code> adjust the height, while <span class="emphasis"><em>Ctrl </em></span>+ <span class="emphasis"><em>w</em></span>,<span class="emphasis"><em> </em></span><code class="literal">&gt;</code> and <span class="emphasis"><em>Ctrl </em></span>+ w<span class="emphasis"><em>, </em></span><code class="literal">&lt;</code> adjust the width.</p></div><p>Both commands can also be used to set the height and the width to a specific number of rows or columns:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><code class="literal">:resize N</code> will set the height of the window to <code class="literal">N</code></li><li style="list-style-type: disc"><code class="literal">:vertical resize N</code> will set the width of the window to <code class="literal">N</code></li></ul></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec13"></a>Tabs</h3></div></div></div><p>In many modern editors, tabs are used to <span>represent</span><a id="id326020572" class="indexterm"></a> different files. While you can certainly do this in Vim, you might want to consider their original purpose.</p><p>Vim uses tabs to switch between collections of windows, allowing you to effectively have multiple workspaces. Tabs are often used to work on a slightly different problem or set of files within the same Vim session. Personally, I don't get a lot of use out of tab pages, but if you find yourself often switching context within the project or between projects, then tabs might be <span>exactly</span><a id="id326086393" class="indexterm"></a> what you're looking for.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note45"></a>Note</h3><p>Another reason to use tabs would be Vim's diff functionality, which works per tab. You can read more about the vimdiff in <a class="link" href="#" linkend="ch05">Chapter 5</a>, <span class="emphasis"><em>Build, Test, and Execute</em></span>.</p></div><p>You can open a new tab with an empty buffer as follows:</p><pre class="programlisting"><span class="strong"><strong>:tabnew</strong></span></pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note46"></a>Note</h3><p>You can open an existing file in a new tab by running <code class="literal">:tabnew &lt;filename&gt;</code>.</p></div><p>As you can see, tabs are displayed on the top of the screen. The tab labeled <code class="literal">3 farm.py</code> is a tab with three open windows and an active buffer <code class="literal">farm.py</code>. The <code class="literal">[No Name]</code> tab is the one we just opened:</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/07ae8bef-73ca-4245-abb9-6d997680cce7.png" /></div><p>You can load a file in it in the usual way: <code class="literal">:e &lt;filename&gt;</code>. You can also switch to a desired buffer using the <code class="literal">:b</code> command.</p><p>To navigate between tabs, you can use the following:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><code class="literal">gt</code> or <code class="literal">:tabnext</code> to move to the next tab</li><li style="list-style-type: disc"><code class="literal">gT</code> or <code class="literal">:tabprevious</code> to move to the previous tab</li></ul></div><p>The tabs can be closed using <code class="literal">:tabclose</code> or by closing all of the windows it contains (for example, with <code class="literal">:q</code> if it's the only window).</p><p><code class="literal">:tabmove N</code> lets you place the tab after the <span class="emphasis"><em>N</em></span>th tab (or as a first tab if <code class="literal">N</code> is <code class="literal">0</code>).</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec14"></a>Folds</h3></div></div></div><p>One of the most powerful tools Vim provides for navigating large <span>files</span><a id="id326612915" class="indexterm"></a> is folds. Folds allow you to <span>hide</span><a id="id326612958" class="indexterm"></a> portions of the file, either based on some predefined rules or manual fold markers.</p><p>This is how <code class="literal">animal_farm.py</code> looks with some sections folded:</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/a7d848c9-3650-4223-9526-79517ea611c3.png" /></div><p>Method content is hidden, allowing you to view the code from a bird's-eye view.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl3sec8"></a>Folding Python code</h4></div></div></div><p>Since we're working with <span>Python</span><a id="id326612993" class="indexterm"></a> code throughout this book, let's play with some folds in our code. First, you'll need to change a setting called <code class="literal">foldmethod</code> to <code class="literal">indent</code> in your <code class="literal">.vimrc</code> file:</p><pre class="programlisting">set foldmethod=indent</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip47"></a>Note</h3><p>Don't forget to reload your <code class="literal">~/.vimrc</code> file by either restarting Vim or executing <code class="literal">:source $MYVIMRC</code>.</p></div><p>This will tell Vim to fold based on indentation (there are multiple ways to work with folds; see the following section, <span class="emphasis"><em>Types of folds</em></span>, for more information).</p><p>Open <code class="literal">animal_farm.py</code> and you will see portions of our file folded away:</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/7f743298-9a9b-45c3-ba5f-7b32879afde2.png" /></div><p>Navigate your cursor to one of the folded lines. Hitting <code class="literal">zo</code> will open the current fold:</p><div class="mediaobject"><img src="/graphics/9781789341096/graphics/fb1a1676-c706-473e-b871-ccb8e567c2e6.png" /></div><p>Whenever your cursor is over a potential fold (an indented chunk of code in this example), <code class="literal">zc</code> will close the fold.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip48"></a>Note</h3><p>To visualize where folds are, you can use <code class="literal">:set foldcolumn=N</code>, where N is 0..12. This will dedicate the first N columns to the left of the screen to indicate folds with the <code class="literal">-</code> (beginning of an open fold), <code class="literal">|</code> (contents of an open fold), and <code class="literal">+</code> (closed fold) symbols.</p></div><p>You can also use <code class="literal">za</code> to toggle folds (open closed folds and close open folds).</p><p>You can open and close all folds in the file at the same <span>time</span><a id="id326256850" class="indexterm"></a> using <code class="literal">zR</code> and <code class="literal">zM</code>, respectively.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip49"></a>Note</h3><p>Setting an automatic <code class="literal">foldmethod</code> setting (such as <code class="literal">indent</code>) will display all files as folded by default. It's a matter of preference, and you may prefer to have the folds open when opening a new file. Adding <code class="literal">autocmd BufRead * normal zR</code> to your <code class="literal">.vimrc</code> file will keep the folds open as you open new files. This command tells Vim toexecute<code class="literal">zR</code>(open all folds) when reading a buffer.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl3sec9"></a>Types of folds</h4></div></div></div><p>Vim is somewhat intelligent when it comes to folding code, and <span>supports</span><a id="id326256892" class="indexterm"></a> multiple ways to fold code. The folding method is guarded by a <code class="literal">foldmethod</code> option in your <code class="literal">.vimrc</code> file. Supported fold methods are as follows:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc"><code class="literal">manual</code> allows you to manually define folds. This becomes unrealistic when working with any substantial body of text.</li><li style="list-style-type: disc"><code class="literal">indent</code> supports indentation-based folding, which is perfect for languages and code bases where indentation matters (regardless of the language you're working with, a standardized code base is likely to have some consistent indentation, making <code class="literal">indent</code> a quick and easy way to fold away bits you don't care for).</li><li style="list-style-type: disc"><code class="literal">expr</code> allows for a regular-expression based folding. This is an extremely powerful tool if you have complex custom rules you'd like to use for defining folds.</li><li style="list-style-type: disc"><code class="literal">marker</code> uses special markup in the text, such as <code class="literal">{{{</code> and <code class="literal">}}}</code>. This is useful for managing long <code class="literal">.vimrc</code> files, but has little use outside of the Vim world since it requires modifying file content.</li><li style="list-style-type: disc"><code class="literal">syntax</code> provides syntax-aware folds. However, not every language is supported out of the box (Python isn't).</li><li style="list-style-type: disc"><code class="literal">diff</code> is automatically used when Vim operates in a diff mode, displaying the difference between two files (see<span class="emphasis"><em> Vimdiff</em></span> in <a class="link" href="#" linkend="ch05">Chapter 5</a>, <span class="emphasis"><em>Build, Test, and Execute</em></span>).</li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note50"></a>Note</h3><p>Reminder: you can set an option in your <code class="literal">.vimrc</code> file by adding the following line: <code class="literal">set foldmethod=&lt;method&gt;</code>.</p></div></div></div></div>