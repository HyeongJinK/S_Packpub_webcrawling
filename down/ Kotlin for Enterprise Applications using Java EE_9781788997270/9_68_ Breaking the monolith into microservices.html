<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch09lvl1sec67"></a>Breaking the monolith into microservices</h2></div></div><hr /></div><p>Traditionally, enterprise <span>applications</span><a id="id326510874" class="indexterm"></a> were built as single, large, monolith applications. They were also sometimes built on database-driven systems that stored all logic, from UI to business, and data. Typically, a monolith application looks something like the following:</p><div class="mediaobject"><img src="/graphics/9781788997270/graphics/906b0ca7-b707-47f5-91bf-165dc188eb3c.png" /></div><p>The problem with the monolith service architecture is that any failure in the system will halt the entire system and a small problem can bring down the entire application. When any code change or new implementation has to be applied, this would result in rebuilding and redeploying the whole system.</p><p>Since there is a code change, the system has to go through the entire verification process. Any library upgrade is a nightmare. When the system becomes bulky, it is very difficult to maintain.</p><p>Any code refactoring to improve the code quality or performance will take a lot more time and, if there are no sufficient test cases, this process would be really challenging. For a mission-critical system, these kinds of quality issues and delivery delays are not acceptable and the system becomes unpredictable.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl2sec65"></a>Microservices architecture (MSA)</h3></div></div></div><p>The MSA aims to solve the <span>problems</span><a id="id325998828" class="indexterm"></a> that were present in the monolith design. A microservice is an efficient and flexible approach to building an application. This splits the application being developed into small services that can exist independently, and each service has its own life cycle. Each microservice is responsible for a single functionality only. Consequently, the service's focus is only on doing this and doing it well.</p><p>A typical MSA looks like the following:</p><div class="mediaobject"><img src="/graphics/9781788997270/graphics/320fb97e-1994-4ebd-8b3a-42f90cf27e42.png" /></div><p>As shown in the preceding diagram, the application is composed of small services, each responsible for one functionality and each having its own store. Building, deploying, or upgrading services will have its own life cycle and these services exist independently of each other in the application, interacting with each other over the REST.</p><p>Here is a typical <span>deployment</span><a id="id325998759" class="indexterm"></a> model:</p><div class="mediaobject"><img src="/graphics/9781788997270/graphics/4a5d0fe6-0f1e-41a7-b314-a7a882a4f5cd.png" /></div><p>As shown in the preceding diagram, microservices each have their own database deployed and exposed as REST services. The number of service instances may vary from one service to another based on usage patterns. For example, we can deploy three instances of authentication service as it may be used more frequently, and two instances of each identity and notification service. The <span class="strong"><strong>Load Balancer</strong></span> will be brought in to route the <span>requests</span><a id="id326511184" class="indexterm"></a> properly to these service instances as appropriate. An <span class="strong"><strong>API Gateway</strong></span>, <span class="strong"><strong>service level agreement</strong></span> (<span class="strong"><strong>SLA</strong></span>), is also provided, which uniformly receives external <span>requests</span><a id="id326511179" class="indexterm"></a>, performs load <span>balancing</span><a id="id325801950" class="indexterm"></a> to invoke the backend service, and returns the results to the clients. It also performs some basic validation to prevent attacks and to decouple the exposed microservices from the consuming client. Any client (such as a mobile or web app) can use the APIs exposed over the <span class="strong"><strong>API Gateway</strong></span>. This is a typical deployment model that may vary based on business needs and available infrastructure.</p><p>This is how the microservice architecture makes the application development more efficient and more manageable.</p></div></div>