<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch06lvl1sec45"></a>Understanding the messaging domains</h2></div></div><hr /></div><p>Let's start by looking at what we <span>require</span><a id="id325601666" class="indexterm"></a> from a messaging system and how it works at a high level. A messaging system is characterized by the following attributes:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">The message itself</li><li style="list-style-type: disc">The interaction mode</li><li style="list-style-type: disc">The messaging system</li></ul></div><p>The message represents the business data that is used either for further processing or for persistence.</p><p>The interaction mode can be either synchronous or asynchronous. In synchronous mode, the producer of the message and the receiver system are both in sync and have to be available simultaneously. They will be tightly coupled.  In asynchronous mode, however, the interacting systems are loosely coupled, which means the applications are not tied to each other over a message interaction and they aren't aware of the existence of each other. All they need is the messaging format to be defined. The applications interact with a message provider to send and receive messages.</p><p>In a messaging system, we have producers and consumers. The producer sends out the messages and the consumer consumes the messages. The producer doesn't necessarily know whether the messages have been consumed. This is to ensure the reliability of the system. The consumer might not necessarily exist at the time the message is produced and when the consumer comes up it consumes the message. Also, if the consumer crashes for some reason while it is processing the message, when it comes back, the message will still be there for it to process. If we have multiple consumers waiting for messages, it makes sense to drop the messages into a queue and let the consumers process the messages independently. Messaging systems also have publishers and subscribers. Publishers publish messages on a topic and subscribers listen to specific topics for messages. Publishers are unaware of subscribers. </p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec43"></a>Messaging architecture</h3></div></div></div><p>A typical messaging <span>architecture</span><a id="id325812914" class="indexterm"></a> used in enterprise applications is as follows:</p><div class="mediaobject"><img src="/graphics/9781788997270/graphics/e89172a3-2956-4b0d-8d1a-1367187946f3.png" /></div><p>As depicted in the preceding diagram, the applications are loosely coupled and interact with the standard messaging provider to write and read messages. A known message format is defined, so that the communicating application can understand the message and derive a meaningful representation.</p><p> </p><p> </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl2sec44"></a>Messaging domains</h3></div></div></div><p>In a typical enterprise <span>messaging</span><a id="id325812946" class="indexterm"></a> system, we can send and read messages using the messaging system. There are two different ways to do this:</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc">Point-to-Point messaging model</li><li style="list-style-type: disc">Publish-Subscribe model</li></ul></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch06lvl3sec40"></a>Point-to-point messaging model</h4></div></div></div><p>In the point-to-point messaging model, one <span>producer</span><a id="id325813041" class="indexterm"></a> produces the message and one consumer receives it and further processes it. This model represents a one-to-one relationship between the producer and the consumer. If the sender wants to send the message to more than one application, it has to produce the message again and write to the provider. This is depicted in the following diagram:</p><div class="mediaobject"><img src="/graphics/9781788997270/graphics/e6e6aed9-84a0-4a34-bc19-292b2483197f.png" /></div><p> </p><p>As shown in the preceding diagram, the producer sends the message to the queue and the consumer reads it from there, carries out some operations on it, and persists it if there is any persisting system configured to store the message. In this model, the messaging queue decouples the sender and the receiver of the message. </p><p>This model is suitable for an enterprise application that communicates with a single application or a set of small applications.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="ch06lvl3sec41"></a>Publish-subscribe messaging model</h4></div></div></div><p>In the publish-subscribe messaging model, a <span>publisher</span><a id="id325813070" class="indexterm"></a> broadcasts the message and consumers who are subscribed can consume the message and carry out some operations on it. This model represents a one-to-many relationship. Here, the messages are logically associated using topics and the subscribers register with the message provider about specific topics. Whenever the publisher sends out relevant messages, the message provider that is maintaining the list of subscribers for that topic will notify and deliver the messages.</p><p>This is shown in the following diagram:</p><div class="mediaobject"><img src="/graphics/9781788997270/graphics/dbe27d87-7f72-4822-9d7e-d636368f7b24.png" /></div><p>As depicted in the preceding diagram, the publisher broadcasts the message to a topic, and the subscribed consumers can consume the messages from there and process them further.</p><p>In this model, the messaging topic decouples the publisher and the subscriber of the message.</p></div></div></div>